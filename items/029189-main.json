{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/29189",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/29189/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/29189/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/29189/events",
  "html_url": "https://github.com/rust-lang/rust/pull/29189",
  "id": 112418090,
  "node_id": "MDExOlB1bGxSZXF1ZXN0NDgyMzExNjg=",
  "number": 29189,
  "title": "Add `naked` attribute",
  "user": {
    "login": "jackpot51",
    "id": 7741236,
    "node_id": "MDQ6VXNlcjc3NDEyMzY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7741236?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jackpot51",
    "html_url": "https://github.com/jackpot51",
    "followers_url": "https://api.github.com/users/jackpot51/followers",
    "following_url": "https://api.github.com/users/jackpot51/following{/other_user}",
    "gists_url": "https://api.github.com/users/jackpot51/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jackpot51/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jackpot51/subscriptions",
    "organizations_url": "https://api.github.com/users/jackpot51/orgs",
    "repos_url": "https://api.github.com/users/jackpot51/repos",
    "events_url": "https://api.github.com/users/jackpot51/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jackpot51/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "nrc",
    "id": 762626,
    "node_id": "MDQ6VXNlcjc2MjYyNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nrc",
    "html_url": "https://github.com/nrc",
    "followers_url": "https://api.github.com/users/nrc/followers",
    "following_url": "https://api.github.com/users/nrc/following{/other_user}",
    "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nrc/subscriptions",
    "organizations_url": "https://api.github.com/users/nrc/orgs",
    "repos_url": "https://api.github.com/users/nrc/repos",
    "events_url": "https://api.github.com/users/nrc/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nrc/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "nrc",
      "id": 762626,
      "node_id": "MDQ6VXNlcjc2MjYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nrc",
      "html_url": "https://github.com/nrc",
      "followers_url": "https://api.github.com/users/nrc/followers",
      "following_url": "https://api.github.com/users/nrc/following{/other_user}",
      "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nrc/subscriptions",
      "organizations_url": "https://api.github.com/users/nrc/orgs",
      "repos_url": "https://api.github.com/users/nrc/repos",
      "events_url": "https://api.github.com/users/nrc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nrc/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 28,
  "created_at": "2015-10-20T17:20:55Z",
  "updated_at": "2015-10-21T00:39:49Z",
  "closed_at": "2015-10-20T23:00:20Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/29189",
    "html_url": "https://github.com/rust-lang/rust/pull/29189",
    "diff_url": "https://github.com/rust-lang/rust/pull/29189.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/29189.patch",
    "merged_at": null
  },
  "body": "**Description:**\nThe naked attribute allows functions to be defined that do not have standard wrappers, like stack frames, local variables, or a function return.\n\nThis change exposes the LLVM Naked function attribute by using the #[naked] attribute on a Rust function.\n\nBecause it is unsafe to use, it is feature gated behind #![feature(naked)]. I have already verified that Rust builds correctly with this change.\n\n**Rationale:**\nThe current rustc provides no mechanism for defining these functions _correctly_, which is why this change is required for operating systems development in Rust, such as the development of Redox.\n\nThis is highly important when designing operating systems, due to requirements for interrupt handlers and context switching, or other functions like green threads, virtual machines, and emulators. These require predictable assembly output, without any wrapping instructions. This has limited some features to only being possible in external assembly or C.\n\nhttp://wiki.osdev.org/Interrupt_Service_Routines#Naked_Functions\n\n**Example:**\nA very simple example of use, inside an interrupt handler:\n\n``` rust\n#![feature(naked)]\n\n#[naked]\n#[cfg(target_arch = \"x86\")]\nfn interrupt_handler(){\n    asm!(\"iretd\");\n}\n```\n\nWhich will generate:\n\n``` asm\ninterrupt_handler:\n   iretd\n```\n\nThis is more correct than the current operation:\n\n``` rust\n#[cfg(target_arch = \"x86\")]\nfn interrupt_handler(){\n    asm!(\"iretd\");\n}\n```\n\nWhich will generate something similar to:\n\n``` asm\ninterrupt_handler:\n   push ebp\n   mov ebp, esp\n   iretd\n   ret\n```\n",
  "closed_by": {
    "login": "nrc",
    "id": 762626,
    "node_id": "MDQ6VXNlcjc2MjYyNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nrc",
    "html_url": "https://github.com/nrc",
    "followers_url": "https://api.github.com/users/nrc/followers",
    "following_url": "https://api.github.com/users/nrc/following{/other_user}",
    "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nrc/subscriptions",
    "organizations_url": "https://api.github.com/users/nrc/orgs",
    "repos_url": "https://api.github.com/users/nrc/repos",
    "events_url": "https://api.github.com/users/nrc/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nrc/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/29189/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/29189/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
