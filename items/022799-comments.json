[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/80544348",
    "html_url": "https://github.com/rust-lang/rust/issues/22799#issuecomment-80544348",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22799",
    "id": 80544348,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNTQ0MzQ4",
    "user": {
      "login": "gkoz",
      "id": 4260361,
      "node_id": "MDQ6VXNlcjQyNjAzNjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4260361?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gkoz",
      "html_url": "https://github.com/gkoz",
      "followers_url": "https://api.github.com/users/gkoz/followers",
      "following_url": "https://api.github.com/users/gkoz/following{/other_user}",
      "gists_url": "https://api.github.com/users/gkoz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gkoz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gkoz/subscriptions",
      "organizations_url": "https://api.github.com/users/gkoz/orgs",
      "repos_url": "https://api.github.com/users/gkoz/repos",
      "events_url": "https://api.github.com/users/gkoz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gkoz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-14T15:48:31Z",
    "updated_at": "2015-03-14T15:48:31Z",
    "body": "I'm getting a very similar ICE with this reduced sample:\n\n``` rust\n#![feature(core)]\nuse std::marker::{MarkerTrait, PhantomFn};\n\npub trait Wrapper {\n    type Inner;\n}\n\npub trait IsA<T>: MarkerTrait + PhantomFn<T> { }\n\nimpl <T> IsA<T> for T { }\n\npub trait ToPtr<P: Copy> {\n    fn borrow(&self) -> P;\n}\n\nimpl <PAR: Wrapper, CHI: IsA<PAR>> ToPtr<*mut <PAR as Wrapper>::Inner> for CHI {\n    fn borrow(&self) -> *mut <PAR as Wrapper>::Inner {\n        unimplemented!()\n    }\n}\n\npub struct Object;\npub struct Window;\n\nimpl Wrapper for Window {\n    type Inner = i8;\n}\n\nimpl IsA<Object> for Window { }\n\nimpl Window {\n    pub fn new() -> Window {\n        unimplemented!()\n    }\n}\n\npub trait WindowTrait {\n    fn bar(&self);\n}\n\nimpl <T: Wrapper> WindowTrait for T {\n    fn bar(&self) {\n        ToPtr::<_>::borrow(self);\n    }\n}\n\nfn main() {\n    let window = Window::new();\n    window.bar();\n}\n```\n\nThe error message:\n\n```\nlib.rs:1:1: 1:1 error: internal compiler error: Encountered errors `[FulfillmentError(Obligation(predicate=Binder(TraitPredicate(core::marker::Sized)),depth=1),Ambiguity), FulfillmentError(Obligation(predicate=Binder(TraitPredicate(Wrapper)),depth=1),Ambiguity), FulfillmentError(Obligation(predicate=Binder(TraitPredicate(IsA<_>)),depth=1),Ambiguity), FulfillmentError(Obligation(predicate=Binder(ProjectionPredicate(<_ as Wrapper>::Inner, i8)),depth=2),Ambiguity)]` fulfilling during trans\nlib.rs:1 #![feature(core)]\n         ^\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /home/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libsyntax/diagnostic.rs:129\n\nstack backtrace:\n   1:     0x7f76c6609e2f - sys::backtrace::write::h947ec7660f7e4c8cSBC\n   2:     0x7f76c662ff82 - panicking::on_panic::h23ca8edeaea6c81cLMI\n   3:     0x7f76c6564e8a - rt::unwind::begin_unwind_inner::h47bdb490e575cf7eRsI\n   4:     0x7f76c39db94d - rt::unwind::begin_unwind::h18314895764715619195\n   5:     0x7f76c39db8f3 - diagnostic::SpanHandler::span_bug::h8ef69e7b1a01e686EaB\n   6:     0x7f76c4294263 - session::Session::span_bug::h45f93f11f39024fbNsn\n   7:     0x7f76c5cf5cc7 - trans::common::fulfill_obligation::h1573f2a041dd4f61ykl\n   8:     0x7f76c5c9175b - trans::meth::trans_static_method_callee::hd5b7480b401c3e4aA7x\n   9:     0x7f76c5c8e200 - trans::callee::trans::hb832566848979f51eYf\n  10:     0x7f76c5ca4b7b - trans::callee::trans_call_inner::h13086090426327833152\n  11:     0x7f76c5cb1820 - trans::expr::trans_rvalue_dps_unadjusted::h8c6df01d48428517xzi\n  12:     0x7f76c5c61cf0 - trans::expr::trans_into::h9649503c823db95eSmh\n  13:     0x7f76c5c60fe4 - trans::controlflow::trans_stmt_semi::hc954ae953b072232G5d\n  14:     0x7f76c5c62ab0 - trans::controlflow::trans_block::h4c660619c3bd7816t6d\n  15:     0x7f76c5d3a611 - trans::base::trans_closure::hcfabd7fd269607bekjt\n  16:     0x7f76c5c4b238 - trans::base::trans_fn::hc85106bcc218fcb4dut\n  17:     0x7f76c5c4c90b - trans::monomorphize::monomorphic_fn::h22691e7b0d2d168c2td\n  18:     0x7f76c5c92a0e - trans::callee::trans_fn_ref_with_substs::h46ce93a241a2e351nkg\n  19:     0x7f76c5caaa75 - trans::meth::trans_method_callee::h2c272c3ddb1fcd8cr2x\n  20:     0x7f76c5ca64a9 - trans::callee::trans_call_inner::h320915813152599062\n  21:     0x7f76c5cb05c9 - trans::expr::trans_rvalue_dps_unadjusted::h8c6df01d48428517xzi\n  22:     0x7f76c5c61cf0 - trans::expr::trans_into::h9649503c823db95eSmh\n  23:     0x7f76c5c60fe4 - trans::controlflow::trans_stmt_semi::hc954ae953b072232G5d\n  24:     0x7f76c5c62ab0 - trans::controlflow::trans_block::h4c660619c3bd7816t6d\n  25:     0x7f76c5d3a611 - trans::base::trans_closure::hcfabd7fd269607bekjt\n  26:     0x7f76c5c4b238 - trans::base::trans_fn::hc85106bcc218fcb4dut\n  27:     0x7f76c5c46ef1 - trans::base::trans_item::h167dcb48771cb88c5Rt\n  28:     0x7f76c5d4373c - trans::base::trans_crate::h947378b1d60dae25wOu\n  29:     0x7f76c6c3c6e3 - driver::phase_4_translate_to_llvm::h8e4d85cc4e2e15a5gOa\n  30:     0x7f76c6c182d3 - driver::compile_input::hf1ccb6f79c82b5e3Nba\n  31:     0x7f76c6cd3827 - run_compiler::h5744096088d771cbu2b\n  32:     0x7f76c6cd1459 - thunk::F.Invoke<A, R>::invoke::h2151708636338439058\n  33:     0x7f76c6cd0110 - rt::unwind::try::try_fn::h17480117432322948657\n  34:     0x7f76c66a19c8 - rust_try_inner\n  35:     0x7f76c66a19b5 - rust_try\n  36:     0x7f76c6cd088a - thunk::F.Invoke<A, R>::invoke::h4030886730675850734\n  37:     0x7f76c661e9a5 - sys::thread::thread_start::he7ae8e81d7f8a1f4x4G\n  38:     0x7f76c04bbee4 - start_thread\n  39:     0x7f76c61d7d1c - clone\n  40:                0x0 - <unknown>\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/80544348/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/96112911",
    "html_url": "https://github.com/rust-lang/rust/issues/22799#issuecomment-96112911",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22799",
    "id": 96112911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk2MTEyOTEx",
    "user": {
      "login": "frewsxcv",
      "id": 416575,
      "node_id": "MDQ6VXNlcjQxNjU3NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/416575?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frewsxcv",
      "html_url": "https://github.com/frewsxcv",
      "followers_url": "https://api.github.com/users/frewsxcv/followers",
      "following_url": "https://api.github.com/users/frewsxcv/following{/other_user}",
      "gists_url": "https://api.github.com/users/frewsxcv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frewsxcv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frewsxcv/subscriptions",
      "organizations_url": "https://api.github.com/users/frewsxcv/orgs",
      "repos_url": "https://api.github.com/users/frewsxcv/repos",
      "events_url": "https://api.github.com/users/frewsxcv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frewsxcv/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-25T00:56:00Z",
    "updated_at": "2015-04-25T00:56:00Z",
    "body": "In order to compile @gkoz's code block, I removed the `#![feature(core)]` line\n\nThat said, this still results in an ICE using Rust 1.0 beta 2\n\n```\n~/Downloads $ rustc test.rs\ntest.rs:7:19: 7:30 warning: use of deprecated item: No longer needed, #[warn(deprecated)] on by default\ntest.rs:7 pub trait IsA<T>: MarkerTrait + PhantomFn<T> { }\n                            ^~~~~~~~~~~\ntest.rs:7:33: 7:45 warning: use of deprecated item: No longer needed, #[warn(deprecated)] on by default\ntest.rs:7 pub trait IsA<T>: MarkerTrait + PhantomFn<T> { }\n                                          ^~~~~~~~~~~~\ntest.rs:1:1: 1:1 error: internal compiler error: Encountered errors `[FulfillmentError(Obligation(predicate=Binder(TraitPredicate(core::marker::Sized)),depth=1),Ambiguity), FulfillmentError(Obligation(predicate=Binder(TraitPredicate(Wrapper)),depth=1),Ambiguity), FulfillmentError(Obligation(predicate=Binder(TraitPredicate(IsA<_>)),depth=1),Ambiguity), FulfillmentError(Obligation(predicate=Binder(ProjectionPredicate(<_ as Wrapper>::Inner, i8)),depth=2),Ambiguity)]` fulfilling during trans\ntest.rs:1 use std::marker::{MarkerTrait, PhantomFn};\n          ^\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /Users/rustbuild/src/rust-buildbot/slave/beta-dist-rustc-mac/build/src/libsyntax/diagnostic.rs:149\n```\n\n```\n~/Downloads $ rustc --version\nrustc 1.0.0-beta.2 (e9080ec39 2015-04-16) (built 2015-04-16)\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/96112911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/119735141",
    "html_url": "https://github.com/rust-lang/rust/issues/22799#issuecomment-119735141",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22799",
    "id": 119735141,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExOTczNTE0MQ==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-08T21:26:25Z",
    "updated_at": "2015-07-08T21:26:25Z",
    "body": "Example uses an unconstrained projection (`ToPtr<*mut <PAR as Wrapper>::Inner> for CHI`) - fixed by rust-lang/rfcs#447. Closing.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/119735141/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
