[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26189056",
    "html_url": "https://github.com/rust-lang/rust/pull/9816#issuecomment-26189056",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9816",
    "id": 26189056,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MTg5MDU2",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-12T02:21:10Z",
    "updated_at": "2013-10-12T02:22:04Z",
    "body": "The functions shared by `Rc`, `Arc` and `Own` would be better to be a trait(s) which is then implemented on each, and then `snapmap` could possibly be implemented generically over this trait, rather than having 3 implementations for 3 different pointer types.\n\n>  Note that this is untested beyond compilation, and might well have serious bugs\n\nThere is no chance of this landing until there are tests. \n\n(Also, this needs a rebase on top of master.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26189056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26189248",
    "html_url": "https://github.com/rust-lang/rust/pull/9816#issuecomment-26189248",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9816",
    "id": 26189248,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MTg5MjQ4",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-12T02:33:08Z",
    "updated_at": "2013-10-12T02:48:02Z",
    "body": "Regarding macros and traits, the problem is that it is seems higher-kind trait parameters (i.e. the ability to pass Rc itself and not Rc<Foo>) would be needed, or some way to express recursive type aliases, i.e. `type T = TreeNode<K, V, Rc<T>>`\n\nA trait for pointers would be good though even if macros are still needed.\n\nThe rest has been copied verbatim from treemap.rs\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26189248/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26196260",
    "html_url": "https://github.com/rust-lang/rust/pull/9816#issuecomment-26196260",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9816",
    "id": 26196260,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MTk2MjYw",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-12T12:05:06Z",
    "updated_at": "2013-10-12T12:09:21Z",
    "body": "One can simulate higher-kinded traits with something like\n\n``` rust\ntrait CowPtr<T> {\n    fn cow<'r>(&'r mut self) -> &'r mut T;\n}\n\nimpl<T> CowPtr<T> for Arc<T> {\n     // ...\n}\nimpl<T> CowPtr<T> for ~T {\n    // ...\n}\n```\n\n(or whatever division of methods & traits is necessary.)\n\nThen it would become something like\n\n``` rust\nstruct SnapMap<K, V, Ptr> {\n    priv root: Option<Ptr>,\n    priv length: uint\n}\n\nstruct TreeNode<K, V, Ptr> {\n    key: K,\n    value: V,\n    left: Option<Ptr>,\n    right: Option<Ptr>,\n    level: uint\n}\n\nimpl<K: TotalOrd, V, Ptr: CowPtr<TreeNode<K, V, Ptr>>> \n     MutableMap<K, V> for SnapMap<K, V, Ptr> {\n    // ...\n}\n```\n\n(The above is untested, so I've got no idea if it would work.)\n\n> The rest has been copied verbatim from treemap.rs\n\nThere's always room for improvement, and its easier to make the code nicer at the start than to try to refactor it later.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26196260/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26198355",
    "html_url": "https://github.com/rust-lang/rust/pull/9816#issuecomment-26198355",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9816",
    "id": 26198355,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MTk4MzU1",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-12T14:25:28Z",
    "updated_at": "2013-10-12T14:26:42Z",
    "body": "In your example, what do you use as the Ptr type parameter value in the Rc case?\n\nThe problem is that it would be something like `type Ptr = Rc<TreeNode<K, V, Ptr>>`, but I'm not sure if such a recursive type can be declared in Rust.\n\nThe compiler gives me the error \"error: illegal recursive type; insert an enum in the cycle, if this is desired\" for that line (despite the fact that there is in fact an enum there, namely Option).\n\nMaybe there's another way or it's possible to easily fix the compiler to allow that declaration, not sure.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26198355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26201000",
    "html_url": "https://github.com/rust-lang/rust/pull/9816#issuecomment-26201000",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9816",
    "id": 26201000,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjAxMDAw",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-12T16:44:42Z",
    "updated_at": "2013-10-12T16:44:42Z",
    "body": "Implemented all suggestions.\n\nAlso, changed code to replace treemap instead of adding SnapMap along it, since it seems it would be unmaintainable to have both (e.g. all the issues noticed in this are present in treemap too), and snapmap is supposed to reduce to treemap in the owned pointer case (after aggressive inlining and of course constant propagation).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26201000/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26201043",
    "html_url": "https://github.com/rust-lang/rust/pull/9816#issuecomment-26201043",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9816",
    "id": 26201043,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjAxMDQz",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-12T16:46:40Z",
    "updated_at": "2013-10-12T16:52:27Z",
    "body": "Have you benchmarked the performance with `test/bench/core-map.rs`? Reusing the same code like this would be great, assuming it performs well.\n\nIt might be a bit problematic that it will make moving `treemap` to libstd require moving `arc` too. I think in the long-term we're also not going to want a red-black tree for the mutable case (#4992) and a wide fan-out won't mix well with persistent data structures based on reference counting.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26201043/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26209780",
    "html_url": "https://github.com/rust-lang/rust/pull/9816#issuecomment-26209780",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9816",
    "id": 26209780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjA5Nzgw",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-13T01:40:19Z",
    "updated_at": "2013-10-13T01:40:19Z",
    "body": "@bill-myers looks like a rebase went wrong.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26209780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26301748",
    "html_url": "https://github.com/rust-lang/rust/pull/9816#issuecomment-26301748",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9816",
    "id": 26301748,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzAxNzQ4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-15T01:07:30Z",
    "updated_at": "2013-10-15T01:07:30Z",
    "body": "I think that along the lines of #9653, this is really cool, but may not have it's place in libextra right now. The fate of libextra has been thought of to get split up in favor of a \"package incubator\" type situation. If we don't end up merging this, I would highly recommend making this a separate rustpkg repo and placing it on http://hiho.io/rust-ci/ because I'm sure that others would find this useful!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26301748/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26749128",
    "html_url": "https://github.com/rust-lang/rust/pull/9816#issuecomment-26749128",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9816",
    "id": 26749128,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NzQ5MTI4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-21T19:39:55Z",
    "updated_at": "2013-10-21T19:39:55Z",
    "body": "For similar reasons to #9653, I'm going to close this. This is certainly an awesome data structure, but this doesn't belong in libstd and libextra is on its way to getting dissolved. For now, I highly recomment putting this on RustCI, because I'm sure others would benefit from it!.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26749128/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
