[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151536921",
    "html_url": "https://github.com/rust-lang/rust/issues/18150#issuecomment-151536921",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18150",
    "id": 151536921,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MTUzNjkyMQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-27T15:15:56Z",
    "updated_at": "2018-01-28T20:45:28Z",
    "body": "Triage: same problem, but some [updated code](https://play.rust-lang.org/?gist=abfd6540124c649286db4c3630b9a8fb&version=nightly):\r\n\r\n```\r\nstruct Foo { a: usize }\r\nfn main() {\r\n    let mut x = std::rc::Rc::new(Foo { a: 1 });\r\n    x.a += 1;\r\n\r\n    let mut y = &(Foo { a: 1 });\r\n    y.a += 1;\r\n}\r\n```\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151536921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/283416700",
    "html_url": "https://github.com/rust-lang/rust/issues/18150#issuecomment-283416700",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18150",
    "id": 283416700,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MzQxNjcwMA==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-01T17:53:55Z",
    "updated_at": "2017-03-01T17:53:55Z",
    "body": "Triage: no change",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/283416700/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/361094397",
    "html_url": "https://github.com/rust-lang/rust/issues/18150#issuecomment-361094397",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18150",
    "id": 361094397,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTA5NDM5Nw==",
    "user": {
      "login": "estebank",
      "id": 1606434,
      "node_id": "MDQ6VXNlcjE2MDY0MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/estebank",
      "html_url": "https://github.com/estebank",
      "followers_url": "https://api.github.com/users/estebank/followers",
      "following_url": "https://api.github.com/users/estebank/following{/other_user}",
      "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/estebank/subscriptions",
      "organizations_url": "https://api.github.com/users/estebank/orgs",
      "repos_url": "https://api.github.com/users/estebank/repos",
      "events_url": "https://api.github.com/users/estebank/events{/privacy}",
      "received_events_url": "https://api.github.com/users/estebank/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-28T20:46:14Z",
    "updated_at": "2018-01-28T20:46:14Z",
    "body": "Related: #47774.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/361094397/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/365408545",
    "html_url": "https://github.com/rust-lang/rust/issues/18150#issuecomment-365408545",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18150",
    "id": 365408545,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTQwODU0NQ==",
    "user": {
      "login": "estebank",
      "id": 1606434,
      "node_id": "MDQ6VXNlcjE2MDY0MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/estebank",
      "html_url": "https://github.com/estebank",
      "followers_url": "https://api.github.com/users/estebank/followers",
      "following_url": "https://api.github.com/users/estebank/following{/other_user}",
      "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/estebank/subscriptions",
      "organizations_url": "https://api.github.com/users/estebank/orgs",
      "repos_url": "https://api.github.com/users/estebank/repos",
      "events_url": "https://api.github.com/users/estebank/events{/privacy}",
      "received_events_url": "https://api.github.com/users/estebank/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-02-13T21:22:30Z",
    "updated_at": "2018-02-13T21:22:30Z",
    "body": "Current output:\r\n\r\n```\r\nerror[E0594]: cannot assign to field of immutable binding\r\n --> src/main.rs:4:5\r\n  |\r\n4 |     x.a += 1;\r\n  |     ^^^^^^^^ cannot mutably borrow field of immutable binding\r\n\r\nerror[E0594]: cannot assign to field `y.a` of immutable binding\r\n --> src/main.rs:7:5\r\n  |\r\n7 |     y.a += 1;\r\n  |     ^^^^^^^^ cannot mutably borrow field of immutable binding\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/365408545/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/487209421",
    "html_url": "https://github.com/rust-lang/rust/issues/18150#issuecomment-487209421",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18150",
    "id": 487209421,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NzIwOTQyMQ==",
    "user": {
      "login": "estebank",
      "id": 1606434,
      "node_id": "MDQ6VXNlcjE2MDY0MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/estebank",
      "html_url": "https://github.com/estebank",
      "followers_url": "https://api.github.com/users/estebank/followers",
      "following_url": "https://api.github.com/users/estebank/following{/other_user}",
      "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/estebank/subscriptions",
      "organizations_url": "https://api.github.com/users/estebank/orgs",
      "repos_url": "https://api.github.com/users/estebank/repos",
      "events_url": "https://api.github.com/users/estebank/events{/privacy}",
      "received_events_url": "https://api.github.com/users/estebank/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-04-26T21:37:28Z",
    "updated_at": "2019-04-26T21:37:28Z",
    "body": "Current output:\r\n\r\n```\r\nerror[E0594]: cannot assign to data in a `&` reference\r\n --> src/main.rs:4:5\r\n  |\r\n4 |     x.a += 1;\r\n  |     ^^^^^^^^ cannot assign\r\n\r\nerror[E0594]: cannot assign to `y.a` which is behind a `&` reference\r\n --> src/main.rs:7:5\r\n  |\r\n6 |     let mut y = &(Foo { a: 1 });\r\n  |                 --------------- help: consider changing this to be a mutable reference: `&mut (Foo { a: 1 })`\r\n7 |     y.a += 1;\r\n  |     ^^^^^^^^ `y` is a `&` reference, so the data it refers to cannot be written\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/487209421/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/495837889",
    "html_url": "https://github.com/rust-lang/rust/issues/18150#issuecomment-495837889",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18150",
    "id": 495837889,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTgzNzg4OQ==",
    "user": {
      "login": "estebank",
      "id": 1606434,
      "node_id": "MDQ6VXNlcjE2MDY0MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/estebank",
      "html_url": "https://github.com/estebank",
      "followers_url": "https://api.github.com/users/estebank/followers",
      "following_url": "https://api.github.com/users/estebank/following{/other_user}",
      "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/estebank/subscriptions",
      "organizations_url": "https://api.github.com/users/estebank/orgs",
      "repos_url": "https://api.github.com/users/estebank/repos",
      "events_url": "https://api.github.com/users/estebank/events{/privacy}",
      "received_events_url": "https://api.github.com/users/estebank/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-05-25T03:24:00Z",
    "updated_at": "2019-05-25T03:24:00Z",
    "body": "Case from #52941:\r\n\r\n```\r\nuse std::rc::Rc;\r\nuse std::cell::RefCell;\r\n\r\n#[derive(Debug)]\r\nstruct TestStruct {\r\n    u: u32,\r\n}\r\n\r\nfn main() {\r\n    let mut val = TestStruct{ u: 1 };\r\n    val.u += 2;\r\n    println!(\"val {:?} \", val);\r\n    //prints: val TestStruct { u: 3 }\r\n    \r\n    let mut val_rc = Rc::new(TestStruct{ u: 10 });    \r\n    //above I mistakenly assumed \"mut\" would let me mutate the subcontents of the Rc.\r\n    val_rc.u += 2;\r\n    //above creates compile error: error[E0594]: cannot assign to data in a `&` reference\r\n    println!(\"val_rc {:?} \", val_rc);    \r\n\r\n    //The solution I used\r\n    let val_rc_refcell = Rc::new(RefCell::new(TestStruct{ u: 20 }));\r\n    (*val_rc_refcell).borrow_mut().u += 2;\r\n    println!(\"val_rc_refcell {:?} \", val_rc_refcell);        \r\n}\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/495837889/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/504439715",
    "html_url": "https://github.com/rust-lang/rust/issues/18150#issuecomment-504439715",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18150",
    "id": 504439715,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNDQzOTcxNQ==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-06-21T14:09:33Z",
    "updated_at": "2019-06-21T14:09:33Z",
    "body": "If I understand correctly, it seems like the main thing that is currently missing from the desiderata here is something in the diagnostic connecting the `Rc` type in the users code with the `&`-type that the compiler gets via auto-deref of the `Rc`",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/504439715/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/504440558",
    "html_url": "https://github.com/rust-lang/rust/issues/18150#issuecomment-504440558",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18150",
    "id": 504440558,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNDQ0MDU1OA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-06-21T14:11:53Z",
    "updated_at": "2019-06-21T14:11:53Z",
    "body": "I'll nominate this for discussion at the T-compiler meeting: I do not think the P-high tag is warranted (it was added to this issue based on feedback in #52941), but I want to make sure we at least discuss this issue as a group before I revise its priority.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/504440558/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/508510687",
    "html_url": "https://github.com/rust-lang/rust/issues/18150#issuecomment-508510687",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18150",
    "id": 508510687,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODUxMDY4Nw==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-07-04T14:57:44Z",
    "updated_at": "2019-07-04T14:57:44Z",
    "body": "after discussing at T-compiler meeting, closing this issue (which tracked an old problem that is much improved) and reopening #52941. Marking #52941 as P-high for now, but that might change in near term. (Cc @eddyb) ",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/508510687/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
