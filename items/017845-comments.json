[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58197371",
    "html_url": "https://github.com/rust-lang/rust/issues/17845#issuecomment-58197371",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17845",
    "id": 58197371,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MTk3Mzcx",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-07T14:54:36Z",
    "updated_at": "2014-10-07T14:55:32Z",
    "body": "As a datapoint, this is _literally_ what [microsoft itself recommends doing](http://msdn.microsoft.com/en-us/library/windows/desktop/dn553408%28v=vs.85%29.aspx).\n\n```\nLARGE_INTEGER StartingTime, EndingTime, ElapsedMicroseconds;\nLARGE_INTEGER Frequency;\n\nQueryPerformanceFrequency(&Frequency); \nQueryPerformanceCounter(&StartingTime);\n\n// Activity to be timed\n\nQueryPerformanceCounter(&EndingTime);\nElapsedMicroseconds.QuadPart = EndingTime.QuadPart - StartingTime.QuadPart;\n\n\n//\n// We now have the elapsed number of ticks, along with the\n// number of ticks-per-second. We use these values\n// to convert to the number of elapsed microseconds.\n// To guard against loss-of-precision, we convert\n// to microseconds *before* dividing by ticks-per-second.\n//\n\nElapsedMicroseconds.QuadPart *= 1000000;\nElapsedMicroseconds.QuadPart /= Frequency.QuadPart;\n```\n\nWhere `LARGE_INTEGER` is a `u64`.\n\nBut we're multiplying by an extra 1000.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58197371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58207651",
    "html_url": "https://github.com/rust-lang/rust/issues/17845#issuecomment-58207651",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17845",
    "id": 58207651,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MjA3NjUx",
    "user": {
      "login": "rusty-nail2",
      "id": 9051135,
      "node_id": "MDQ6VXNlcjkwNTExMzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9051135?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rusty-nail2",
      "html_url": "https://github.com/rusty-nail2",
      "followers_url": "https://api.github.com/users/rusty-nail2/followers",
      "following_url": "https://api.github.com/users/rusty-nail2/following{/other_user}",
      "gists_url": "https://api.github.com/users/rusty-nail2/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rusty-nail2/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rusty-nail2/subscriptions",
      "organizations_url": "https://api.github.com/users/rusty-nail2/orgs",
      "repos_url": "https://api.github.com/users/rusty-nail2/repos",
      "events_url": "https://api.github.com/users/rusty-nail2/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rusty-nail2/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-07T15:54:20Z",
    "updated_at": "2014-10-07T15:55:00Z",
    "body": "In fairness to Microsoft, they're operating on a time difference computed mod 2^64, so as long as the interval length is reasonable (less than a few thousand hours for a typical tick rate) it can't overflow.\n\nBut `precise_time_ns` computes an absolute time rather than a difference, so overflows are guaranteed to happen at some point. The 1000x factor only makes it more noticeable.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58207651/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58301167",
    "html_url": "https://github.com/rust-lang/rust/issues/17845#issuecomment-58301167",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17845",
    "id": 58301167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MzAxMTY3",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-08T03:13:35Z",
    "updated_at": "2014-10-08T03:15:31Z",
    "body": "Since we're dealing with absolute time (and therefore something large), it's probably not _unreasonable_ to divide first, or maybe even partially multiply by `1000000000`. Something like:\n\n`ticks * 1000 / ticks_per_s * 1000000` \n\nmaybe? What are \"typical\" and \"extreme\" tick rates and absolute ticks like? An incredibly robust implementation could presumably branch on the size of ticks to determine the optimal split of the `1000000000`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58301167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58519235",
    "html_url": "https://github.com/rust-lang/rust/issues/17845#issuecomment-58519235",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17845",
    "id": 58519235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTE5MjM1",
    "user": {
      "login": "nodakai",
      "id": 90726,
      "node_id": "MDQ6VXNlcjkwNzI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/90726?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nodakai",
      "html_url": "https://github.com/nodakai",
      "followers_url": "https://api.github.com/users/nodakai/followers",
      "following_url": "https://api.github.com/users/nodakai/following{/other_user}",
      "gists_url": "https://api.github.com/users/nodakai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nodakai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nodakai/subscriptions",
      "organizations_url": "https://api.github.com/users/nodakai/orgs",
      "repos_url": "https://api.github.com/users/nodakai/repos",
      "events_url": "https://api.github.com/users/nodakai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nodakai/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-09T14:40:16Z",
    "updated_at": "2014-10-09T15:01:37Z",
    "body": "The x86_64 architecture has the 64 bit MUL instruction whose result is effectively a 128 bit integer which never overflows.  Likewise, the DIV instruction takes an effectively 128 bit integer as the dividened.\n- http://is.gd/UQQAqu\n\n```\nasm!(\"mulq $2; divq $3\" : \"={rax}\"(d) : \"{rax}\"(a), \"{rdi}\"(b), \"{rsi}\"(c) : \"%rdx\" );\n```\n\ni386 offers (u32, u32) -> u64 MUL and (u64, u32) -> (u32, u32) DIV/MOD, so we should be able to implement 64 bit MUL and DIV without overflow.\n\nWindows RT runs on ARMv7 (=~ Cortex-A).  It has (u32, u32) -> u64 UMULL but lacks DIV and we have to call a division routine.  Perhaps we can forget about it for now...\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58519235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64305181",
    "html_url": "https://github.com/rust-lang/rust/issues/17845#issuecomment-64305181",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17845",
    "id": 64305181,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MzA1MTgx",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-25T03:28:28Z",
    "updated_at": "2014-11-25T03:28:28Z",
    "body": "We could use techniques similar to [division by a constant via multiplication and shifts](http://ridiculousfish.com/blog/posts/labor-of-division-episode-iii.html).  \nOf course, in this case, we also have the 1000000000 multiplier, which together with the \"magic constant\" is going to overflow even a 128 bit register, but multiplication can be done \"in parts\".\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64305181/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75686165",
    "html_url": "https://github.com/rust-lang/rust/issues/17845#issuecomment-75686165",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17845",
    "id": 75686165,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1Njg2MTY1",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-24T02:16:04Z",
    "updated_at": "2015-02-24T02:16:04Z",
    "body": "Don't OSX and iOS have a similar problem [here](https://github.com/rust-lang/rust/blob/master/src/libstd/sys/unix/time.rs#L38) and [here](https://github.com/rust-lang/rust/blob/master/src/libstd/sys/unix/time.rs#L64)?\nWhat is the typical value of info.numer?   [This](http://stackoverflow.com/questions/23378063/how-can-i-use-mach-absolute-time-without-overflowing) seems to suggest that is can be large, just like on Windows.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75686165/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75686833",
    "html_url": "https://github.com/rust-lang/rust/issues/17845#issuecomment-75686833",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17845",
    "id": 75686833,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1Njg2ODMz",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-24T02:23:27Z",
    "updated_at": "2015-02-24T02:23:27Z",
    "body": "@pcwalton ^\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75686833/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
