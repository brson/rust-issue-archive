[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52254471",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-52254471",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 52254471,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjU0NDcx",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T22:39:33Z",
    "updated_at": "2014-08-14T22:39:33Z",
    "body": "cc @kballard \n\nSome other libraries (Haskell, SML basis) only provide something akin to our current `join`. Not sure about Boost.\n\nI don't see a great Windows story here, either: `Path::new(\"c:\\\\temp\").join(Path::new(\"c:\\\\windows\"))`. We'd need to figure out a coherent specification.\n\nHonestly, it seems a bit weird to me to take something that's syntactically an absolute path and want to treat it as a relative path. In my experience using `path`, the current `join` function is what I want. It'd be helpful to know a bit more why this case is coming up for you.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52254471/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52255891",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-52255891",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 52255891,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjU1ODkx",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T22:57:02Z",
    "updated_at": "2014-08-14T22:57:22Z",
    "body": "I agree with @aturon. The only sensible operation when joining an absolute path onto some other path is to get the absolute path back. Doing anything else is just _weird_, and only makes sense if you actually think of paths as strings, where \"join\" is \"append, then normalize\". I do not understand why Go's `path.Join` behaves in this way, although they are actually taking strings as arguments.\n\nFWIW Ruby actually matches our join. At least, if you use `Pathname` it does: `Pathname(\"a\").join(Pathname(\"/b\")) == Pathname(\"/b\")`. `File.join()` matches Go, but it also operates on strings, and AFAIK `Pathname` is considered the better way to manipulate paths. Note that `File.join()` is actually documented as \"Returns a new string formed by joining the strings using `File::SEPARATOR`\", and so is not actually even attempting to represent paths, merely do a trivial bit of string manipulation.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52255891/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54755939",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-54755939",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 54755939,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NzU1OTM5",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-07T18:41:06Z",
    "updated_at": "2014-09-07T18:41:06Z",
    "body": "In C++ using `std::path` when I join the two paths `C:\\foo` and `C:\\bar` I get `C:\\foo\\C:\\bar`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54755939/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55673608",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-55673608",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 55673608,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NjczNjA4",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-15T23:21:14Z",
    "updated_at": "2014-09-15T23:21:14Z",
    "body": "@retep998 C++ doesn't have a `std::path`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55673608/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55677326",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-55677326",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 55677326,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1Njc3MzI2",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-15T23:56:41Z",
    "updated_at": "2014-09-15T23:56:41Z",
    "body": "@kballard I was using the `<filesystem>` library which is a TS going through the final committee vote and MSVC has already implemented it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55677326/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55678224",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-55678224",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 55678224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1Njc4MjI0",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-16T00:08:59Z",
    "updated_at": "2014-09-16T00:08:59Z",
    "body": "@retep998 Sounds like a really crappy path definition then. I guess that's what you get with design-by-committee.\n\nAccording to [MSDN](http://msdn.microsoft.com/en-us/library/hh874699.aspx), `basic_path::operator/` is defined as concatenating the strings that the paths wrap. That's a really braindead approach. If it's just going to do string operations, why would I ever use `std::path` instead of just using `std::string`s directly?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55678224/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55683591",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-55683591",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 55683591,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NjgzNTkx",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-16T01:28:59Z",
    "updated_at": "2014-09-16T01:29:31Z",
    "body": "Because `std::path` is the only way to work with unicode paths in a cross-platform manner (using `std::string` is locale-specific), all the filesystem APIs work with `std::path` instead of `std::string`, and it has methods to extract various components of the path.\n`path::operator/` does a bit more than just concatenation according to [cppreference](http://en.cppreference.com/w/cpp/experimental/fs/path/append).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55683591/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58791200",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-58791200",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 58791200,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NzkxMjAw",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-12T11:20:11Z",
    "updated_at": "2014-10-12T11:20:11Z",
    "body": "The C++ committee has recently been dealing with this problem.\nhttp://isocpp.org/files/papers/n4211.html issue 64\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58791200/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58820670",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-58820670",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 58820670,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4ODIwNjcw",
    "user": {
      "login": "Boddlnagg",
      "id": 1024333,
      "node_id": "MDQ6VXNlcjEwMjQzMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1024333?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Boddlnagg",
      "html_url": "https://github.com/Boddlnagg",
      "followers_url": "https://api.github.com/users/Boddlnagg/followers",
      "following_url": "https://api.github.com/users/Boddlnagg/following{/other_user}",
      "gists_url": "https://api.github.com/users/Boddlnagg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Boddlnagg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Boddlnagg/subscriptions",
      "organizations_url": "https://api.github.com/users/Boddlnagg/orgs",
      "repos_url": "https://api.github.com/users/Boddlnagg/repos",
      "events_url": "https://api.github.com/users/Boddlnagg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Boddlnagg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-12T20:15:09Z",
    "updated_at": "2014-10-12T20:15:09Z",
    "body": "C# (or rather the .NET standard library) also matches the current behavior:\n_\"If path2 contains an absolute path, this method returns path2.\"_ ([MSDN](http://msdn.microsoft.com/en-us/library/fyy7a5kt%28v=vs.110%29.aspx))\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58820670/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73804876",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-73804876",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 73804876,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczODA0ODc2",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-10T23:13:41Z",
    "updated_at": "2015-02-10T23:16:06Z",
    "body": "The `join()` function is [often misused](http://lucumr.pocoo.org/2010/12/24/common-mistakes-as-web-developer/) and leads to [security vulnerabilities](http://cuckoosandbox.org/2014-10-07-cuckoo-sandbox-111.html).\n\nMoreover, there is now a documentation indirection pointing to `PathBuf::push()` :(\n\nThe Path reform should get ride of this dangerous behavior. The `join()` could return something like `Result<PathBuf, PathError>` to exclude an absolute path as argument.\nThere is also a name inconsistency between the `Path::join()` and the `PathBuf::push()`.\n\ncc #20034\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73804876/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73807140",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-73807140",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 73807140,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczODA3MTQw",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-10T23:30:23Z",
    "updated_at": "2015-02-10T23:30:23Z",
    "body": "> The `join()` function is [often misused](http://lucumr.pocoo.org/2010/12/24/common-mistakes-as-web-developer/) and leads to [security vulnerabilities](http://cuckoosandbox.org/2014-10-07-cuckoo-sandbox-111.html).\n\nNote that this talks about not just absolute paths, but also relative paths that begin with `..` for example. I don't think that simply ruling out joining absolute paths (which certainly has its uses) is enough to solve this problem, and I'm not sure that `std` should be legislating policy at this level.\n\n> Moreover, there is now a documentation indirection pointing to `PathBuf::push()`\n\n@steveklabnik What's our standing policy here? Do we prefer to have multiple copies of very similar docs?\n\n> There is also a name inconsistency between the `Path::join()` and the `PathBuf::push()`.\n\nThis bothered me with the old path API as well, but I wasn't able to come up with a better solution. Do you have any suggestions?\n\ncc @alexcrichton \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73807140/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73811310",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-73811310",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 73811310,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczODExMzEw",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-11T00:04:26Z",
    "updated_at": "2015-02-23T13:49:31Z",
    "body": "The PR #5023 added an `unsafe_join()` and an `is_restricted()` functions who seem to have been lost\u2026\n\nI like `splice()` to express that the path argument is concatenated and do not replace `self`.\nI think that `Path` and `PathBuf` should have the same function name as they have the same meaning.\n\nOf course, this apply to `join_many()`.\n\nName ideas:\n- `splice()`\n- `push()`\n- `concat()`\n- `chain()`\n- `append()`\n- `nest()`\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73811310/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73813518",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-73813518",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 73813518,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczODEzNTE4",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-11T00:23:40Z",
    "updated_at": "2015-02-11T00:23:40Z",
    "body": "Just here to confirm when using a standard Windows function to join paths, absolute paths will replace the existing path wholesale. Drive relative paths such as `C:foo` count as absolute paths for this purpose.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73813518/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73822040",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-73822040",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 73822040,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczODIyMDQw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-11T01:49:46Z",
    "updated_at": "2015-02-11T01:49:46Z",
    "body": "> There is also a name inconsistency between the Path::join() and the PathBuf::push().\n\nIf we're feeling really ambitious we could overload `/` for both `PathBuf` and `Path` (consuming `PathBuf` in the former case) to produce a `PathBuf` in both cases.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73822040/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74561319",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-74561319",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 74561319,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NTYxMzE5",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-16T19:36:53Z",
    "updated_at": "2015-02-16T19:36:53Z",
    "body": "I'm going to close this particular issue as WONTFIX: we plan to stay with the current join semantics. (If someone strongly disagrees, at this point I think an RFC would probably be warranted, as the current behavior is from an approved RFC).\n\nAs far as naming, we could potentially continue bikeshedding, but not on this issue. I will note that we should not use the same name for `Path` and `PathBuf` both because that would be strongly against convention and because, partly due to the deref from `PathBuf` to `Path`, it would likely be very confusing.\n\nI would love to have a general convention for pairs of functions where one mutates and the other creates a new copy, but I don't have a good candidate. In any case, let's address that elsewhere.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74561319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86219758",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-86219758",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 86219758,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjE5NzU4",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-25T21:11:21Z",
    "updated_at": "2015-03-25T21:11:21Z",
    "body": "> This bothered me with the old path API as well, but I wasn't able to come up with a better solution. Do you have any suggestions?\n\n@aturon, what do you think about an unambiguous new `Path::append<P: AsPath>(&self, path: P) -> PathBuf` to only append a path?\n\nLooking at the current Rust API, `push()` functions _only_ add/push an element/filename (but do not erase nor _merge_) into `self`.\nOn the other hand, `insert()` can add _or_ replace an element (e.g. `Vec` or `BTreeSet`).\n\nThe `PathBuf::push<P: AsPath>(&mut self, path: P)` would look better if renamed to `PathBuf::insert(&mut self, path: PathMode)` with something like `enum PathMode<P: AsPath> { Absolute(P), Relative(P) }` to have explicit behavior/cast (inspired by the `collections::Bound`).\n\nThe `Path::join()` is already know in other languages so it may be a good choice to keep it like this or it could maybe be renamed to `Path::merge()`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86219758/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/382788426",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-382788426",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 382788426,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mjc4ODQyNg==",
    "user": {
      "login": "tarcieri",
      "id": 797,
      "node_id": "MDQ6VXNlcjc5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/797?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tarcieri",
      "html_url": "https://github.com/tarcieri",
      "followers_url": "https://api.github.com/users/tarcieri/followers",
      "following_url": "https://api.github.com/users/tarcieri/following{/other_user}",
      "gists_url": "https://api.github.com/users/tarcieri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tarcieri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tarcieri/subscriptions",
      "organizations_url": "https://api.github.com/users/tarcieri/orgs",
      "repos_url": "https://api.github.com/users/tarcieri/repos",
      "events_url": "https://api.github.com/users/tarcieri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tarcieri/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-19T15:56:13Z",
    "updated_at": "2018-04-19T15:57:25Z",
    "body": "Seems I'm several years late to the party here, but I wanted to chime in and say I found this particular behavior rather unexpected, and worry it could potentially lead to security issues if attackers manage to clobber higher level paths by passing an absolute path to join, i.e. directory traversal.\r\n\r\nGranted that any code doing join on attacker-controlled paths should probably be doing quite a few checks to ensure they're getting the desired results, but it's certainly not clear from the outset that joining to an absolute path can have this outcome.\r\n\r\nYou can imagine someone naively checking a path does not contain `..`, doing a join, and expecting that the result will always be within the provided parent directory.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/382788426/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/441011163",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-441011163",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 441011163,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTAxMTE2Mw==",
    "user": {
      "login": "theronic",
      "id": 1011676,
      "node_id": "MDQ6VXNlcjEwMTE2NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1011676?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theronic",
      "html_url": "https://github.com/theronic",
      "followers_url": "https://api.github.com/users/theronic/followers",
      "following_url": "https://api.github.com/users/theronic/following{/other_user}",
      "gists_url": "https://api.github.com/users/theronic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theronic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theronic/subscriptions",
      "organizations_url": "https://api.github.com/users/theronic/orgs",
      "repos_url": "https://api.github.com/users/theronic/repos",
      "events_url": "https://api.github.com/users/theronic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theronic/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-11-22T12:10:15Z",
    "updated_at": "2018-11-22T12:10:15Z",
    "body": "Chiming in to say this caught me out and cost me about an hour of struggle, and will cause a whole generation of insecure roll-your-own webservers who naively take in \"/etc/passwd\" as a URI, to be joined onto \"./resources\".\r\n\r\nJoining paths should descend deeper unless otherwise specified, and absolutely not climb out of the current directory.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/441011163/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/442636503",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-442636503",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 442636503,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MjYzNjUwMw==",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-11-28T22:53:26Z",
    "updated_at": "2018-11-28T22:53:26Z",
    "body": "What you describe would also completely break the ability to join e.g. `../foo` onto a path. What's more, the behavior you describe is only appropriate for *some* use cases, and other use cases absolutely want to have `\"/foo/bar\".join(\"/baz\") == \"/baz\"`.\r\n\r\nIf you need security guarantees when taking in user-supplied paths, you need to enforce those guarantees yourself, because different people have different expectations. For example, even if you do want the \"never climb out of a given root directory\", you may still want to support `../` path components within that.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/442636503/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/442641091",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-442641091",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 442641091,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MjY0MTA5MQ==",
    "user": {
      "login": "tarcieri",
      "id": 797,
      "node_id": "MDQ6VXNlcjc5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/797?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tarcieri",
      "html_url": "https://github.com/tarcieri",
      "followers_url": "https://api.github.com/users/tarcieri/followers",
      "following_url": "https://api.github.com/users/tarcieri/following{/other_user}",
      "gists_url": "https://api.github.com/users/tarcieri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tarcieri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tarcieri/subscriptions",
      "organizations_url": "https://api.github.com/users/tarcieri/orgs",
      "repos_url": "https://api.github.com/users/tarcieri/repos",
      "events_url": "https://api.github.com/users/tarcieri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tarcieri/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-11-28T23:10:16Z",
    "updated_at": "2018-11-28T23:10:16Z",
    "body": "> What you describe would also completely break the ability to join e.g. `../foo` onto a path.\r\n\r\nThere was a fun article about this I came across today by the Fuchsia developers: [Dot Dot Considered Harmful](https://github.com/fuchsia-mirror/docs/blob/master/the-book/dotdot.md)\r\n\r\n> If you need security guarantees when taking in user-supplied paths, you need to enforce those guarantees yourself\r\n\r\nAs it were, I have a crate that attempts to address some of these issues: [canonical-path](https://crates.io/crates/canonical-path).\r\n\r\nThe semantics aren't quite where I'd like them to be yet (despite a 1.0 version number), but if people are interested in working with paths in security critical contexts, I plan on continuing to address the shortcomings, and would like to put out a breaking 2.0 version with more restrictive behavior.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/442641091/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/442643557",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-442643557",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 442643557,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MjY0MzU1Nw==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-11-28T23:19:27Z",
    "updated_at": "2018-11-28T23:22:46Z",
    "body": "Security minded path enforcement is actually *really* complicated due to crazy things on Windows. There have been so many security holes in browsers due to various techniques to escape out of a path. Basically, Rust should *not* try to make security guarantees regarding path concatenation because it is an *extremely* difficult task and impossible without hitting the filesystem. Giving people a false sense of security when concatenating paths would only make security *worse*!",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/442643557/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/442643611",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-442643611",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 442643611,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MjY0MzYxMQ==",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-11-28T23:19:41Z",
    "updated_at": "2018-11-28T23:19:41Z",
    "body": "I don't think canonicalizing paths ahead of time is actually the solution to security issues. Canonicalization involves resolving symlinks as well.\r\n\r\nI think the correct solution for the general case of \"don't let a user-supplied path escape the sandbox\" is to *standardize* the user-supplied path (where \"standardize\" means remove all `./` components and resolve all `../` components, such that any `../` components left in a standardized path are guaranteed to be at the front of the path), then check if the result is an absolute path and if it is convert it to a relative one (for POSIX paths this would be make it relative to `/`, for Windows paths I guess just make it relative to whatever filesystem root it references, e.g. `C:\\foo\\bar` would become just `foo\\bar`), strip any leading `../` components, and then join it onto your sandbox. This should produce the desired behavior (where the sandbox is treated as the filesystem root).\r\n\r\nOf course, this approach does ignore symlinks, so e.g. if `foo` is a symlink then it resolves `foo/../bar` to `bar` instead of looking through the symlink first. If you don't like this behavior and want to handle symlinks, then you'll have to decide how you want your sandboxing to behave if the symlink points outside of the sandbox. Even here I'm not sure if the canonicalization approach is a good one, because if your sandbox root includes any symlinks, then the result of canonicalization will appear to point outside the sandbox.\r\n\r\nAs the hacker news comments on that very article point out, there's a reason this sort of canonicalization is normally done in the kernel, specifically so the symlinks can't change in between checking the path and using the path. The same comments also mention the `O_BENEATH` flag to `openat()` which is meant to handle this sort of \"don't let the user-supplied path escape my sandbox\", but that flag doesn't appear to be part of POSIX.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/442643611/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/442645736",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-442645736",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 442645736,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MjY0NTczNg==",
    "user": {
      "login": "tarcieri",
      "id": 797,
      "node_id": "MDQ6VXNlcjc5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/797?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tarcieri",
      "html_url": "https://github.com/tarcieri",
      "followers_url": "https://api.github.com/users/tarcieri/followers",
      "following_url": "https://api.github.com/users/tarcieri/following{/other_user}",
      "gists_url": "https://api.github.com/users/tarcieri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tarcieri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tarcieri/subscriptions",
      "organizations_url": "https://api.github.com/users/tarcieri/orgs",
      "repos_url": "https://api.github.com/users/tarcieri/repos",
      "events_url": "https://api.github.com/users/tarcieri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tarcieri/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-11-28T23:27:47Z",
    "updated_at": "2018-11-28T23:49:38Z",
    "body": "@kballard indeed the `join` logic the `canonical-path` crate is less-than-ideal (which is part of what I was alluding to earlier):\r\n\r\nhttps://github.com/iqlusioninc/crates/blob/master/canonical-path/src/lib.rs#L129\r\n\r\nThis does not enforce the property that any joined paths are children of the current path, but merely that the resulting path is also canonical. I think it would be worthwhile to enforce the former property.\r\n\r\nThe algorithm I'd use for that is slightly different from what you were originally suggesting, and works more like what you were alluding to in the second half of your post (the first two steps are what it does today):\r\n\r\n- Begin with a `CanonicalPath` (which is absolute, free of all relative path components, and contains no symlinks at the time it was resolved)\r\n- Join the provided path fragment, canonicalizing the result as another `CanonicalPath`\r\n- [Missing in current impl] Ensure the resulting `CanonicalPath` is parented in the original parent path\r\n\r\nAdditionally, I think it'd probably make sense to ban all relative path components from the argument (i.e. the relative path to be joined).\r\n\r\nIndeed the current implementation contains a TOCTTOU-style race condition where directories/symlinks can be renamed/relocated after resolution. At some expense each borrow of the underlying `&Path` could verify it is still canonical before allowing it to be borrowed, but that only reduces the duration of the TOCTTOU and can't completely eliminate it.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/442645736/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/581849718",
    "html_url": "https://github.com/rust-lang/rust/issues/16507#issuecomment-581849718",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16507",
    "id": 581849718,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MTg0OTcxOA==",
    "user": {
      "login": "Kixunil",
      "id": 1178779,
      "node_id": "MDQ6VXNlcjExNzg3Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1178779?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kixunil",
      "html_url": "https://github.com/Kixunil",
      "followers_url": "https://api.github.com/users/Kixunil/followers",
      "following_url": "https://api.github.com/users/Kixunil/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kixunil/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kixunil/subscriptions",
      "organizations_url": "https://api.github.com/users/Kixunil/orgs",
      "repos_url": "https://api.github.com/users/Kixunil/repos",
      "events_url": "https://api.github.com/users/Kixunil/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kixunil/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-02-04T10:48:08Z",
    "updated_at": "2020-02-04T10:48:08Z",
    "body": "Some more years later (:D), I randomly found this and I think the reason `join()` is confusing is because it doesn't actually say what's the intent of the code. Let's look at some reasons why would you want to join paths in the first place:\r\n\r\n* You have a directory and want to generate a name of file in it. The name should not contain any slashes.\r\n* You have a path supplied to your application and you want to support both absolute and relative paths. Relative paths are relative to a specific directory as opposed to working directory.\r\n* You have paths coming from possibly untrusted source and you want to create a directory structure safely - basically acting as chroot. In this case absolute paths must be treated as relative to chroot, but any `..` attempting to go out of that chroot must point at chroot. Apart from safely extracting archives, something like this is sometimes used in Makefiles (`install: cp foo $(DESTDIR)$(PREFIX)/bin/foo`)\r\n\r\nCurrent `join` seems to perform relative paths resolution. A more safe and clear approach would be having multiple methods, one for each case.\r\n\r\n```rust\r\n// Return result, alternatively it could panic:\r\nfn file_in_dir<I>(&self, components: I) -> Result<PathBuf, ComponentContainsSlashError> \r\nwhere I: Copy + IntoIterator, <I as IntoIterator>::Item: AsRef<OsStr>;\r\n\r\n// Alternatively, using newtype SlashlessOsStr that can only be created from str and guarantees to not contain slashes\r\nfn file_in_dir<I>(&self, components: I) -> PathBuf \r\nwhere I: Copy + IntoIterator, <I as IntoIterator>::Item: AsRef<SlashlessOsStr>;\r\n\r\n// join renamed\r\nfn as_base_to(&self, maybe_relative_trusted_path: &Path) -> PathBuf;\r\n\r\n// Sloppy chroot assumes there are no symlinks, so /foo/../bar will become /bar\r\nfn as_sloppy_chroot(&self, containing: &Path) -> PathBuf;\r\n\r\n// Does exactly what chroot would: resolves symlinks in a way that makes sure they don't point outside\r\n// I have no clue what it should do on windows if you use \"c:\\\" in containing, possibly return error with kind InvalidInput\r\nfn as_chroot(&self, containing: &Path) -> io::Result<PathBuf>;\r\n```\r\n\r\nOpen to bikeshedding obviously. It'd be nice to gather other use cases if there are such, make a set of reasonably-named methods with reasonable interfaces, then deprecate `join` and `push` in favor of them in order to improve security and robustness.\r\n\r\nI may write a crate for this at some point.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/581849718/reactions",
      "total_count": 11,
      "+1": 11,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
