[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19791645",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-19791645",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 19791645,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzkxNjQ1",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-21T00:04:18Z",
    "updated_at": "2013-06-21T00:04:18Z",
    "body": "![benchmark](http://i.imgur.com/ejtokyr.png)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19791645/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19792235",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-19792235",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 19792235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzkyMjM1",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-21T00:24:54Z",
    "updated_at": "2013-06-21T00:24:54Z",
    "body": "Note this doesn't turn on the new scheduler by default yet.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19792235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19952858",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-19952858",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 19952858,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5OTUyODU4",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-25T04:42:05Z",
    "updated_at": "2013-06-25T04:42:21Z",
    "body": "I pushed a number of new commits that port minor runtime features. rustc and the test runner both work with newsched now.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19952858/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19953528",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-19953528",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 19953528,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5OTUzNTI4",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-25T05:07:45Z",
    "updated_at": "2013-06-25T05:07:45Z",
    "body": "@nikomatsakis This moves the dynamic borrow check code from `unstable::lang` to `rt::borrowck`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19953528/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19997981",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-19997981",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 19997981,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5OTk3OTgx",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-25T18:44:51Z",
    "updated_at": "2013-06-25T18:44:51Z",
    "body": "I can't find the corresponding commit for this code, so I'll put a comment here. In mod.rs:\n\n```\n322     // XXX: Hitting TLS twice to check if the scheduler exists\n323     // then to check for the task is not good for perf\n```\n\nThis could be fixed with a borrow function analogous to option `map_default`. Something like `do Local::borrow_or_default::<Scheduler>(GlobalContext) |sched| { ... }`.\n\n```\n324     if unsafe { rust_try_get_task().is_not_null() } {\n325         return OldTaskContext;\n326     } else {\n327         if Local::exists::<Scheduler>() {\n328             let context = Cell::new_empty();\n```\n\nThis cell appears to be unnecessary. Just turn the `put_back` calls into return statements.\n\n```\n329             do Local::borrow::<Scheduler, ()> |sched| {\n330                 if sched.in_task_context() {\n331                     context.put_back(TaskContext);\n332                 } else {\n333                     context.put_back(SchedulerContext);\n334                 }\n335             }\n336             return context.take();\n337         } else {\n338             return GlobalContext;\n339         }\n340     }\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19997981/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20016972",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-20016972",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 20016972,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDE2OTcy",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-25T23:44:19Z",
    "updated_at": "2013-06-26T00:33:19Z",
    "body": "I'm sure you're looking for a better way to structure this ugly pattern:\n\n```\nunsafe {\n    let sched = Local::unsafe_borrow::<Scheduler>();\n    ...stuff...\n    Context::swap(...ctx1..., ...ctx2...);\n\n    // We could be executing in a different thread now \n    let sched = Local::unsafe_borrow::<Scheduler>();\n    (*sched).run_cleanup_job();\n}\n```\n\nConsider using a third-order function like this:\n\n```\nfn borrow_scheduler_with_ctx_swap(blk: fn(Scheduler,\n                                          swap: fn(Scheduler, Context, Context) -> Scheduler)\n                                         -> U) -> U\n```\n\nUsed like:\n\n```\ndo borrow_scheduler_with_ctx_swap |sched, swap_fn| {\n    ... stuff ...\n    let reborrowed_sched = swap_fn(sched, ...ctx1..., ...ctx2...);\n    (*reborrowed_sched).run_cleanup_job(); // swap() could perhaps do this for you\n}\n```\n\nActually I think maybe it doesn't need to be 3rd-order, just 2nd-order, but `Context::swap` can require the scheduler as an argument, and give the new scheduler as the return value.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20016972/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20020000",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-20020000",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 20020000,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDIwMDAw",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-26T00:54:48Z",
    "updated_at": "2013-06-26T00:54:48Z",
    "body": "```\n 635             let last_task_context = match last_task {\n 636                 Some(t) => Some(&mut t.saved_context), None => None\n 637             };\n 638             let next_task_context = match self.current_task {\n 639                 Some(ref mut t) => Some(&mut t.saved_context), None => None\n 640             };\n```\n\nThese could be written with the not-yet-existing `map_mut`; c.f. https://github.com/mozilla/rust/issues/7394\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20020000/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20047582",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-20047582",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 20047582,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDQ3NTgy",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-26T13:42:28Z",
    "updated_at": "2013-06-26T13:42:28Z",
    "body": "rustc doesn't run with the newrt for me, segfaults (linux amd64)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20047582/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20082627",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-20082627",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 20082627,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDgyNjI3",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-26T21:47:12Z",
    "updated_at": "2013-06-26T21:47:12Z",
    "body": "Some comments on sched.rs tests which aren't in this PR:\n\n```\n1139     fn test_simple_scheduling() {\n1140         do run_in_bare_thread {\n1141             let mut task_ran = false;\n1142             let task_ran_ptr: *mut bool = &mut task_ran;\n1143 \n1144             let mut sched = ~new_test_uv_sched();\n1145             let task = ~do Coroutine::new_root(&mut sched.stack_pool) {\n1146                 unsafe { *task_ran_ptr = true; }\n1147             };\n1148             sched.enqueue_task(task);\n1149             sched.run();\n1150             assert!(task_ran);\n1151         }\n1152     }\n```\n\nSeems fragile. I feel like this wants a port/channel blocking mechanism ,and also task_ran should be an atomic bool with release/acquire in child/parent respectively.\n\n```\n1163                 let task = ~do Coroutine::new_root(&mut sched.stack_pool) {\n1164                     unsafe { *task_count_ptr = *task_count_ptr + 1; }\n1165                 };\n```\n\nIs there some guarantee that these tasks will all run on the same core? Otherwise this will race, and will need to use atomicint and xadd. Same comment for lines 1181 and 1220.\n\n```\n1188                     let task1 = Cell::new(task1);\n1189                     sched.enqueue_task(task1.take());\n```\n\n(from test_swap_tasks_then) -- doesn't need to be in a cell\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20082627/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20082801",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-20082801",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 20082801,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDgyODAx",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-26T21:49:56Z",
    "updated_at": "2013-06-26T21:49:56Z",
    "body": "Is there a plan for making the `rust_try` call in `impl Unwinder` not rely / call out to on C++?\n\nIn unstable/mod.rs:\n\n```\n 42 pub fn run_in_bare_thread(f: ~fn()) {\n 43     let (port, chan) = comm::stream();\n 44     // FIXME #4525: Unfortunate that this creates an extra scheduler but it's\n 45     // necessary since rust_raw_thread_join_delete is blocking\n```\n\nI think `pthread_detach` can be used to avoid needing to join.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20082801/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20082987",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-20082987",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 20082987,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDgyOTg3",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-26T21:53:03Z",
    "updated_at": "2013-06-26T21:53:03Z",
    "body": "context.rs:\n\n```\n 20 // XXX: It would be nice to define regs as `~Option<Registers>` since\n 21 // the registers are sometimes empty, but the discriminant would\n 22 // then misalign the regs again.\n```\n\nWhy not `Option<~Registers>`?\n\n```\n209 // XXX: ptr::offset is positive ints only\n210 #[inline]\n211 pub fn mut_offset<T>(ptr: *mut T, count: int) -> *mut T {\n212     use core::sys::size_of;\n213     (ptr as int + count * (size_of::<T>() as int)) as *mut T\n214 }\n```\n\nSeems to work just fine with negative ints. If it's not meant to it should assert?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20082987/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20088827",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-20088827",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 20088827,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDg4ODI3",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-27T00:00:00Z",
    "updated_at": "2013-06-27T00:00:00Z",
    "body": "Using `return` to get rid of the cell in `rt::context` doesn't work because you can't return from inside `do`. Regarding the context switching functions, I agree it would be better to pass the scheduler through the context switch. To do it without TLS requires modifying a bunch of assembly.\n\nRe: your comments on `test_simple_scheduling`, it doesn't need atomics because it is a single-threaded test (run_in_newsched_task vs run_in_mt_newsched_task).\n\nre: `rust_try` we'll eventually use an intrinsic for `catch` but llvm provides no way to throw so we'll either continue calling C++ or open_code the appropriate call to `__cxa_throw`.\n\nre: `Option<~Registers>` because it would contain an allocation and the goal is to not.\n\nre: `mut_offset`. It's defined for `uint`. I think your saying I could just cast my negative int to a uint, which is true.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20088827/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20088868",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-20088868",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 20088868,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDg4ODY4",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-27T00:01:08Z",
    "updated_at": "2013-06-27T00:01:08Z",
    "body": "@bblum thanks for the review\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20088868/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20452496",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-20452496",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 20452496,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNDUyNDk2",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-07-04T00:01:01Z",
    "updated_at": "2013-07-04T00:01:01Z",
    "body": "uv/uvio.rs has the following redundant cell:\n\n```\n313         let incoming_streams_cell = Cell::new(self.incoming_streams.clone());\n314 \n315         let incoming_streams_cell = Cell::new(incoming_streams_cell.take());\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20452496/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20721549",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-20721549",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 20721549,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzIxNTQ5",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-07-10T04:52:19Z",
    "updated_at": "2013-07-10T04:52:19Z",
    "body": "Woo!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20721549/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20721623",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-20721623",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 20721623,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzIxNjIz",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-07-10T04:55:41Z",
    "updated_at": "2013-07-10T04:55:41Z",
    "body": ":cake:\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20721623/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20765334",
    "html_url": "https://github.com/rust-lang/rust/pull/7265#issuecomment-20765334",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7265",
    "id": 20765334,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzY1MzM0",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-07-10T19:06:40Z",
    "updated_at": "2013-07-10T19:06:40Z",
    "body": "The `SharedPort::try_recv` implementation wants some heavy commenting. I like it, but I had to puzzle over it for a while to figure out all the cases.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20765334/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
