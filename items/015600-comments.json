[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48734959",
    "html_url": "https://github.com/rust-lang/rust/issues/15600#issuecomment-48734959",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15600",
    "id": 48734959,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NzM0OTU5",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-11T14:13:47Z",
    "updated_at": "2014-07-11T14:13:47Z",
    "body": "If I'm reading those numbers correct, is that indicating that a task is using 8 _gigabytes_ of stack?\n\nRust tasks currently do not have resizable stacks, and they're allocated through two different means:\n- For native tasks, we pass a stack size to `pthread_create`.\n- For green tasks, we `mmap` a chunk of memory with a given size.\n\nInstrumenting the runtime to hook into all task spawn events is also possible, I've toyed around with it for servo with logging events here: https://github.com/stamourv/rust-task-visualizer/blob/master/rtinstrument.rs\n\nDoes that help?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48734959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48787919",
    "html_url": "https://github.com/rust-lang/rust/issues/15600#issuecomment-48787919",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15600",
    "id": 48787919,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4Nzg3OTE5",
    "user": {
      "login": "nnethercote",
      "id": 1940286,
      "node_id": "MDQ6VXNlcjE5NDAyODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nnethercote",
      "html_url": "https://github.com/nnethercote",
      "followers_url": "https://api.github.com/users/nnethercote/followers",
      "following_url": "https://api.github.com/users/nnethercote/following{/other_user}",
      "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions",
      "organizations_url": "https://api.github.com/users/nnethercote/orgs",
      "repos_url": "https://api.github.com/users/nnethercote/repos",
      "events_url": "https://api.github.com/users/nnethercote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nnethercote/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-11T22:00:11Z",
    "updated_at": "2014-07-12T05:36:39Z",
    "body": "> is that indicating that a task is using 8 gigabytes of stack?\n\nNo, only 8 MiB.\nI can try the visualizer on Monday.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48787919/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48803058",
    "html_url": "https://github.com/rust-lang/rust/issues/15600#issuecomment-48803058",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15600",
    "id": 48803058,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4ODAzMDU4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-12T05:35:26Z",
    "updated_at": "2014-07-12T05:35:26Z",
    "body": "Feel free to ping me on IRC if you need any help! I'm acrichto.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48803058/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49106812",
    "html_url": "https://github.com/rust-lang/rust/issues/15600#issuecomment-49106812",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15600",
    "id": 49106812,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTA2ODEy",
    "user": {
      "login": "nnethercote",
      "id": 1940286,
      "node_id": "MDQ6VXNlcjE5NDAyODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nnethercote",
      "html_url": "https://github.com/nnethercote",
      "followers_url": "https://api.github.com/users/nnethercote/followers",
      "following_url": "https://api.github.com/users/nnethercote/following{/other_user}",
      "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions",
      "organizations_url": "https://api.github.com/users/nnethercote/orgs",
      "repos_url": "https://api.github.com/users/nnethercote/repos",
      "events_url": "https://api.github.com/users/nnethercote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nnethercote/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-15T23:35:50Z",
    "updated_at": "2014-07-15T23:35:50Z",
    "body": "(Alex gave me the following instructions on how to do this.)\n\nYes, this will currently require instrumentation of Servo to work.\nYou'll probably want to take these course of action:\n1. Acquire rtinstrument.rs [1](https://github.com/stamourv/rust-task-visualizer/blob/master/rtinstrument.rs)\n2. Compile into a library and then link to servo\n3. Invoke the instrumentation function [2](https://github.com/stamourv/rust-task-visualizer/blob/master/rtinstrument.rs#L37-L42) around code you wish to instrument\n4. Print the messages to stdout or somewhere to collect them [3](https://github.com/stamourv/rust-task-visualizer/blob/master/msgsend-pipes-shared.rs#L117-L123)\n5. Cat the printed messages into racket somehow to see the visualization.\n\nThis may require a newer version of rust than servo has available, so\nit may be difficult to use for awhile.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49106812/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71281044",
    "html_url": "https://github.com/rust-lang/rust/issues/15600#issuecomment-71281044",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15600",
    "id": 71281044,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMjgxMDQ0",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-23T22:58:16Z",
    "updated_at": "2015-01-23T22:58:16Z",
    "body": "Seems like this has been resolved.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71281044/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72964312",
    "html_url": "https://github.com/rust-lang/rust/issues/15600#issuecomment-72964312",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15600",
    "id": 72964312,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyOTY0MzEy",
    "user": {
      "login": "nnethercote",
      "id": 1940286,
      "node_id": "MDQ6VXNlcjE5NDAyODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nnethercote",
      "html_url": "https://github.com/nnethercote",
      "followers_url": "https://api.github.com/users/nnethercote/followers",
      "following_url": "https://api.github.com/users/nnethercote/following{/other_user}",
      "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions",
      "organizations_url": "https://api.github.com/users/nnethercote/orgs",
      "repos_url": "https://api.github.com/users/nnethercote/repos",
      "events_url": "https://api.github.com/users/nnethercote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nnethercote/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-04T23:38:01Z",
    "updated_at": "2015-02-04T23:38:01Z",
    "body": "It hasn't been resolved. I just measured again with current Servo tip:\n\n```\nRss:                  12 kB\nRss:                  12 kB\nRss:                8192 kB\nRss:                  48 kB\nRss:                  16 kB\nRss:                  24 kB\nRss:                  48 kB\nRss:                4096 kB\nRss:                  48 kB\nRss:                  44 kB\nRss:                4024 kB\nRss:                  44 kB\nRss:                  12 kB\nRss:                4096 kB\nRss:                  12 kB\nRss:                  24 kB\nRss:                  12 kB\nRss:                8192 kB\nRss:                  28 kB\nRss:                  28 kB\nRss:                  48 kB\nRss:                  28 kB\nRss:                4096 kB\nRss:               12128 kB\nRss:                  12 kB\nRss:                  20 kB\nRss:                  16 kB\nRss:                  16 kB\nRss:                  12 kB\nRss:                   8 kB\nRss:                   8 kB\nRss:                   8 kB\nRss:                   8 kB\nRss:                   8 kB\nRss:                   8 kB\nRss:                   8 kB\nRss:                4724 kB\n```\n\nThat's over 48 MiB of stack, which is more than a third of Servo's total Rss.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72964312/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72982510",
    "html_url": "https://github.com/rust-lang/rust/issues/15600#issuecomment-72982510",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15600",
    "id": 72982510,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyOTgyNTEw",
    "user": {
      "login": "nnethercote",
      "id": 1940286,
      "node_id": "MDQ6VXNlcjE5NDAyODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nnethercote",
      "html_url": "https://github.com/nnethercote",
      "followers_url": "https://api.github.com/users/nnethercote/followers",
      "following_url": "https://api.github.com/users/nnethercote/following{/other_user}",
      "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions",
      "organizations_url": "https://api.github.com/users/nnethercote/orgs",
      "repos_url": "https://api.github.com/users/nnethercote/repos",
      "events_url": "https://api.github.com/users/nnethercote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nnethercote/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-05T02:18:12Z",
    "updated_at": "2015-02-05T02:18:12Z",
    "body": "Oh, I just learned that if a non-thread-stack mapping is placed adjacent to a thread stack, the two will be merged and /proc/<pid>/smaps will claim that the merged result is a thread stack. So these big numbers are bogus. Good.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72982510/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
