[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48771034",
    "html_url": "https://github.com/rust-lang/rust/issues/15612#issuecomment-48771034",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15612",
    "id": 48771034,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NzcxMDM0",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-11T19:13:07Z",
    "updated_at": "2014-07-11T19:13:07Z",
    "body": "Pass `--enable-rpath` to configure, or `-C rpath` to `rustc`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48771034/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48771164",
    "html_url": "https://github.com/rust-lang/rust/issues/15612#issuecomment-48771164",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15612",
    "id": 48771164,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NzcxMTY0",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-11T19:14:05Z",
    "updated_at": "2014-07-11T19:14:31Z",
    "body": "In particular they aren't _gone_, just not the default. Should they be? (Can reopen if that is the purpose of this issue)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48771164/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48771181",
    "html_url": "https://github.com/rust-lang/rust/issues/15612#issuecomment-48771181",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15612",
    "id": 48771181,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NzcxMTgx",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-11T19:14:12Z",
    "updated_at": "2014-07-11T19:19:04Z",
    "body": "> Let me start off by saying, _any time that `LD_LIBRARY_PATH` must be used is a bug_. Not just a user experience bug, but an absolute bug. The _sole_ purpose of `LD_LIBRARY_PATH` is for _local administrators_ to override the default for debugging or something, it must never be used by upstream or by distro, in any package. Never, ever, ever.\n\nI don't think Rust is using `LD_LIBRARY_PATH` for anything outside of the build process. It's perfectly sane for a user to make use of it to add libraries in their home directory to the search path and it's also fine to use it as part of a build process.\n\n> relative rpaths are okay, subject to the previous rule\n\nRelative paths are occasionally okay, but most binaries shouldn't have them. It's incorrect for the compiler to set these by default because it doesn't know how the binaries / libraries are going to be arranged when they're deployed. I'm not aware of any other language adding these by default. The layout of packages varies per distribution, and you're going to have a lot of issues on an operating system like NixOS if you hardcode assumptions about paths into the binaries.\n\n> - It is possible to extend the list of standard directories by adding a file to `/etc/ld.so.conf.d/`, but this is the job of the distro, not upstream.\n\nThe directory in is `/etc` because it's part of the _site configuration_. If it was only for the distribution, it would be in `/usr/`. It's best to install libraries to the standard location, but it's fine to add a directory to the library search path if there's a good reason for it.\n\nThe only sane use case for an rpath is to create `/usr/lib/package-name/` and hide bundled libraries in there. If the dependencies aren't specific to the package, then it's a misuse of rpaths. It would be best if Rust stopped putting libraries in `/usr/lib` _completely_ and had the target  / compiler use the same libraries from `rustlib`. The names are never going to collide with system libraries, so it's fine to add the host's `rustlib` directory to the library search path. The subdirectory structure is just organization to distinguish Rust crates from other libraries.\n\n> Finally, a brief mention of Windows. Prior discussion has claimed that Windows does not support rpaths, but this is missing one criticial thing: Windows binaries have a _hard-coded_ rpath of `.`, because each binaries bundling its own libraries has been the _normal_ route, not the exception.\n\nWindows doesn't permit adding arbitrary relative rpaths, and that's the issue. The experience across platforms shouldn't be radically different because we depend on relative rpaths on some systems but not others. I'm not aware of other languages making implicit usage of rpaths, and I found it _very_ surprising.\n\n> The result of misunderstanding the implications of rpath has been much breakage, and telling users to use environment variables that are only intended for debugging.\n\nYou're misconstruing a different opinion with lack of understanding. The `LD_LIBRARY_PATH` variable isn't just for debugging anyway. The security issues it brings are caused by it _existing_ as an option, not by making use of it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48771181/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48771807",
    "html_url": "https://github.com/rust-lang/rust/issues/15612#issuecomment-48771807",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15612",
    "id": 48771807,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NzcxODA3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-11T19:20:01Z",
    "updated_at": "2014-07-11T19:21:55Z",
    "body": "@cmr: I'm not aware of any other language doing it. Speaking as a distribution packager and someone who pays a lot of attention to security issues, it's _not_ okay to have implicitly added runtime search paths. This will result in vulnerabilities in far more cases than you would expect.\n\nThe relative paths added automatically by the Rust compiler are going to be inherently messed up because of the quirks of the staged build process. The _current_ install is essentially messed up because it's putting duplicate versions of the crates for the compiler earlier in the library search path _for all binaries_. It should just be in `rustlib` with a single directory added to the host's library search path and _all_ Rust crates located in there. Either that or all of the host's libraries should be in `/usr/lib`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48771807/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48772653",
    "html_url": "https://github.com/rust-lang/rust/issues/15612#issuecomment-48772653",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15612",
    "id": 48772653,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NzcyNjUz",
    "user": {
      "login": "o11c",
      "id": 964689,
      "node_id": "MDQ6VXNlcjk2NDY4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/964689?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/o11c",
      "html_url": "https://github.com/o11c",
      "followers_url": "https://api.github.com/users/o11c/followers",
      "following_url": "https://api.github.com/users/o11c/following{/other_user}",
      "gists_url": "https://api.github.com/users/o11c/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/o11c/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/o11c/subscriptions",
      "organizations_url": "https://api.github.com/users/o11c/orgs",
      "repos_url": "https://api.github.com/users/o11c/repos",
      "events_url": "https://api.github.com/users/o11c/events{/privacy}",
      "received_events_url": "https://api.github.com/users/o11c/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-11T19:28:06Z",
    "updated_at": "2014-07-11T19:28:06Z",
    "body": "Right now it is impossible to run the rust nightly package at all, since it can't find its own libraries; this gives me no opportunity to pass any flags. The documented way to use rustc right now is \"put LD_LIBRARY_PATH in the environment\".\n\n@cmr The user should never have to specify whether they want rpaths or not, there is a simple rule: if the libraries are in the standard path, never use rpath. If they are not in the standard path, always use an absolute rpath to it. Relative rpaths are useful in other languages during `make test`, but that is the domain of cargo, which I think has it under control.\n\n@thestinger I might be wrong about `/etc/ld.so.conf.d`, but that is what I've observed.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48772653/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48773203",
    "html_url": "https://github.com/rust-lang/rust/issues/15612#issuecomment-48773203",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15612",
    "id": 48773203,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NzczMjAz",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-11T19:33:01Z",
    "updated_at": "2014-07-11T19:33:55Z",
    "body": "@o11c: In my Arch package, I'm planning on removing all of the duplicate `/usr/lib/` crates and adding `/usr/lib/rustlib` to `/etc/ld.so.conf.d`. The `/usr/lib/rustlib` directory would then be the standard place to install Rust crates. At the moment, it just hacks around the build system by adding symlinks from `/usr/lib` to `/usr/lib/rustlib` for all of the crates since I wanted to get rid of the duplication. It would be a _bug_ if the ABI varied between the target libraries matching the host and the compiler libraries since there are never any stage1/stage2 differences and it has never been a problem.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48773203/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48775706",
    "html_url": "https://github.com/rust-lang/rust/issues/15612#issuecomment-48775706",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15612",
    "id": 48775706,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4Nzc1NzA2",
    "user": {
      "login": "o11c",
      "id": 964689,
      "node_id": "MDQ6VXNlcjk2NDY4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/964689?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/o11c",
      "html_url": "https://github.com/o11c",
      "followers_url": "https://api.github.com/users/o11c/followers",
      "following_url": "https://api.github.com/users/o11c/following{/other_user}",
      "gists_url": "https://api.github.com/users/o11c/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/o11c/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/o11c/subscriptions",
      "organizations_url": "https://api.github.com/users/o11c/orgs",
      "repos_url": "https://api.github.com/users/o11c/repos",
      "events_url": "https://api.github.com/users/o11c/events{/privacy}",
      "received_events_url": "https://api.github.com/users/o11c/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-11T19:56:03Z",
    "updated_at": "2014-07-11T19:56:03Z",
    "body": "Well, in the Ubuntu packages, all the .so files are in `/usr/lib/rust/rust-nightly/lib` and `/usr/lib/rust/rust-nightly/lib/rustlib/x86_64-unknown-linux-gnu/lib`, and neither of those can be found at all.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48775706/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
