[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28622958",
    "html_url": "https://github.com/rust-lang/rust/issues/10512#issuecomment-28622958",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10512",
    "id": 28622958,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjIyOTU4",
    "user": {
      "login": "poiru",
      "id": 1319028,
      "node_id": "MDQ6VXNlcjEzMTkwMjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1319028?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/poiru",
      "html_url": "https://github.com/poiru",
      "followers_url": "https://api.github.com/users/poiru/followers",
      "following_url": "https://api.github.com/users/poiru/following{/other_user}",
      "gists_url": "https://api.github.com/users/poiru/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/poiru/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/poiru/subscriptions",
      "organizations_url": "https://api.github.com/users/poiru/orgs",
      "repos_url": "https://api.github.com/users/poiru/repos",
      "events_url": "https://api.github.com/users/poiru/events{/privacy}",
      "received_events_url": "https://api.github.com/users/poiru/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-16T09:22:26Z",
    "updated_at": "2013-11-16T10:07:57Z",
    "body": "You beat me by a few hours :) Here is the description I had in #10515:\n\nThe UAC issue in #10452 is caused by a missing [manifest](http://msdn.microsoft.com/en-us/library/aa374191%28v=vs.85%29.aspx) in the binaries. We should include the following in all binaries:\n\n``` xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<assembly xmlns=\"urn:schemas-microsoft-com:asm.v1\" manifestVersion=\"1.0\">\n    <trustInfo xmlns=\"urn:schemas-microsoft-com:asm.v3\">\n        <security>\n            <requestedPrivileges>\n                <requestedExecutionLevel level=\"asInvoker\" uiAccess=\"false\" />\n            </requestedPrivileges>\n        </security>\n    </trustInfo>\n</assembly>\n```\n\nIn an ideal world, we would allow the user to provide a custom manifest should they wish to require UAC elevation, for example. As another example, a user might want to provide `supportedOS` entries in order to fully support Windows 8.1 (where the `GetVersion()`/`GetVersionEx()` functions [lie about the Windows version](http://msdn.microsoft.com/en-us/library/windows/desktop/dn302074%28v=vs.85%29.aspx) unless `<supportedOS Id=\"{1f676c76-80e1-4239-95bb-83d0f6d0da78}\" />` is present in the manifest).\n\nThe VC++ linker has the [/MANIFESTUAC](http://msdn.microsoft.com/en-us/library/bb384691.aspx) option for the UAC part.\n\nIn a traditional MinGW build, this would be implemented something like this:\n\n```\nwindres -i resource.rc -o resource.o\ngcc -c main.c -o main.o\ngcc -o app.exe main.o resource.o -s -Wl,--subsystem,windows\n```\n\nWhere resource.rc would contain something like this (application.manifest would contain the XML stuff above):\n\n```\n#include <Windows.h>\n\n// ...\n\nCREATEPROCESS_MANIFEST_RESOURCE_ID RT_MANIFEST \"application.manifest\"\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28622958/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28623400",
    "html_url": "https://github.com/rust-lang/rust/issues/10512#issuecomment-28623400",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10512",
    "id": 28623400,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjIzNDAw",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-16T09:52:40Z",
    "updated_at": "2013-11-16T09:53:13Z",
    "body": "I wonder if it would be easier to skip windres altogether and write resource directly into linked executable using [Resource API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648008.aspx).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28623400/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28623821",
    "html_url": "https://github.com/rust-lang/rust/issues/10512#issuecomment-28623821",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10512",
    "id": 28623821,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjIzODIx",
    "user": {
      "login": "klutzy",
      "id": 1589355,
      "node_id": "MDQ6VXNlcjE1ODkzNTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1589355?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klutzy",
      "html_url": "https://github.com/klutzy",
      "followers_url": "https://api.github.com/users/klutzy/followers",
      "following_url": "https://api.github.com/users/klutzy/following{/other_user}",
      "gists_url": "https://api.github.com/users/klutzy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klutzy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klutzy/subscriptions",
      "organizations_url": "https://api.github.com/users/klutzy/orgs",
      "repos_url": "https://api.github.com/users/klutzy/repos",
      "events_url": "https://api.github.com/users/klutzy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klutzy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-16T10:23:51Z",
    "updated_at": "2013-11-16T10:23:51Z",
    "body": "@poiru I use `rustc.exe main.rs --link-args resource.o` to add manifest but I always felt this is a hack.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28623821/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/666850438",
    "html_url": "https://github.com/rust-lang/rust/issues/10512#issuecomment-666850438",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10512",
    "id": 666850438,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2Njg1MDQzOA==",
    "user": {
      "login": "glandium",
      "id": 1038527,
      "node_id": "MDQ6VXNlcjEwMzg1Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1038527?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glandium",
      "html_url": "https://github.com/glandium",
      "followers_url": "https://api.github.com/users/glandium/followers",
      "following_url": "https://api.github.com/users/glandium/following{/other_user}",
      "gists_url": "https://api.github.com/users/glandium/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glandium/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glandium/subscriptions",
      "organizations_url": "https://api.github.com/users/glandium/orgs",
      "repos_url": "https://api.github.com/users/glandium/repos",
      "events_url": "https://api.github.com/users/glandium/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glandium/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-07-31T00:59:36Z",
    "updated_at": "2020-07-31T00:59:36Z",
    "body": "As of MSVC 2008, passing `/MANIFEST:EMBED` to link.exe should add the necessary manifest bits for UAC.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/666850438/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/667015801",
    "html_url": "https://github.com/rust-lang/rust/issues/10512#issuecomment-667015801",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10512",
    "id": 667015801,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NzAxNTgwMQ==",
    "user": {
      "login": "poiru",
      "id": 1319028,
      "node_id": "MDQ6VXNlcjEzMTkwMjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1319028?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/poiru",
      "html_url": "https://github.com/poiru",
      "followers_url": "https://api.github.com/users/poiru/followers",
      "following_url": "https://api.github.com/users/poiru/following{/other_user}",
      "gists_url": "https://api.github.com/users/poiru/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/poiru/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/poiru/subscriptions",
      "organizations_url": "https://api.github.com/users/poiru/orgs",
      "repos_url": "https://api.github.com/users/poiru/repos",
      "events_url": "https://api.github.com/users/poiru/events{/privacy}",
      "received_events_url": "https://api.github.com/users/poiru/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-07-31T08:58:56Z",
    "updated_at": "2020-07-31T08:58:56Z",
    "body": "In case anyone finds this issue, you can use `winres` in a `build.rs` script to solve this:\r\n\r\n```rust\r\n#[cfg(target_os = \"windows\")]\r\nextern crate winres;\r\n\r\nfn main() {\r\n    #[cfg(target_os = \"windows\")]\r\n    {\r\n        let mut res = winres::WindowsResource::new();\r\n        res.set_manifest(\r\n            r#\"\r\n<assembly xmlns=\"urn:schemas-microsoft-com:asm.v1\" manifestVersion=\"1.0\">\r\n<trustInfo xmlns=\"urn:schemas-microsoft-com:asm.v3\">\r\n  <security>\r\n    <requestedPrivileges>\r\n      <requestedExecutionLevel level=\"asInvoker\" uiAccess=\"false\" />\r\n    </requestedPrivileges>\r\n  </security>\r\n</trustInfo>\r\n<compatibility xmlns=\"urn:schemas-microsoft-com:compatibility.v1\">\r\n  <application>\r\n    <supportedOS Id=\"{35138b9a-5d96-4fbd-8e2d-a2440225f93a}\"/><!-- 7 -->\r\n    <supportedOS Id=\"{4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38}\"/><!-- 8 -->\r\n    <supportedOS Id=\"{1f676c76-80e1-4239-95bb-83d0f6d0da78}\"/><!-- 8.1 -->\r\n    <supportedOS Id=\"{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}\"/><!-- 10 -->\r\n  </application>\r\n</compatibility>\r\n</assembly>\r\n\"#,\r\n        );\r\n        res.compile().unwrap();\r\n    }\r\n}\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/667015801/reactions",
      "total_count": 3,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/913847267",
    "html_url": "https://github.com/rust-lang/rust/issues/10512#issuecomment-913847267",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10512",
    "id": 913847267,
    "node_id": "IC_kwDOAAsO6M42eDPj",
    "user": {
      "login": "MeerMusik",
      "id": 10266549,
      "node_id": "MDQ6VXNlcjEwMjY2NTQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/10266549?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MeerMusik",
      "html_url": "https://github.com/MeerMusik",
      "followers_url": "https://api.github.com/users/MeerMusik/followers",
      "following_url": "https://api.github.com/users/MeerMusik/following{/other_user}",
      "gists_url": "https://api.github.com/users/MeerMusik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MeerMusik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MeerMusik/subscriptions",
      "organizations_url": "https://api.github.com/users/MeerMusik/orgs",
      "repos_url": "https://api.github.com/users/MeerMusik/repos",
      "events_url": "https://api.github.com/users/MeerMusik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MeerMusik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-09-06T20:44:59Z",
    "updated_at": "2021-09-06T20:44:59Z",
    "body": "> \r\n> \r\n> In case anyone finds this issue, you can use `winres` in a `build.rs` script to solve this:\r\nHello.\r\n\r\nIt is over 1 year later now since this comment was posted. Is this nasty work around still necessary? Or does the Rust Compiler finally supports embedding Windows Manifest Files and Resources etc. (in anyway whatsoever)?\r\n\r\nThanks!\r\n\r\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/913847267/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
