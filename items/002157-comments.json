[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5016383",
    "html_url": "https://github.com/rust-lang/rust/issues/2157#issuecomment-5016383",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2157",
    "id": 5016383,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTYzODM=",
    "user": {
      "login": "boggle",
      "id": 50886,
      "node_id": "MDQ6VXNlcjUwODg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/50886?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/boggle",
      "html_url": "https://github.com/boggle",
      "followers_url": "https://api.github.com/users/boggle/followers",
      "following_url": "https://api.github.com/users/boggle/following{/other_user}",
      "gists_url": "https://api.github.com/users/boggle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/boggle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/boggle/subscriptions",
      "organizations_url": "https://api.github.com/users/boggle/orgs",
      "repos_url": "https://api.github.com/users/boggle/repos",
      "events_url": "https://api.github.com/users/boggle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/boggle/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-04-08T16:03:20Z",
    "updated_at": "2012-04-08T16:03:20Z",
    "body": "I see the implementation benefits but in this approach\n1. sending can block badly and in order to avoid this, the user needs to explicitly add its own buffer tasks.  This would be in line with rust's idea of being explicit and giving control to the programmer /but/ it is also can be quite difficult to get right without experience with these things.  I always liked how erlang's runtime handles these things for the unexperienced developer and manages queue size, processor load and back pressure quite intelligently.  So this pushes concerns into user code that may be better left to the runtime.\n2. Concerning distributed channels, this channel contract does not really carry over, as it does not model what happens on the network appropriately, for example:\n   - sending the next message before having received an acknowledgement of the last one\n   - true multicast/broadcast support of the underlying network\n   - I'm even tending to be against FIFO guarantees as that is not a good match for UDP\n\nSure these things can be emulated with helper tasks. However channel semantics that directly correspond to network realities simplify re-using of existing code in a distributed setting.  If channel and network semantics differ, it can be very hard to put existing software on the network that relies on channel guarantees the network cannot provide without difficulties.\n\nA middle ground may be providing different channel types that at least document what guarantees are expected.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5016383/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5016953",
    "html_url": "https://github.com/rust-lang/rust/issues/2157#issuecomment-5016953",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2157",
    "id": 5016953,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTY5NTM=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-04-08T17:29:14Z",
    "updated_at": "2012-04-08T17:29:14Z",
    "body": "This doesn't seem to me that it has to be an \"either/or\" thing.  We can have a simple but flexible form of channels (as in #2158) and a highly optimized, contract-driven form of channels.  I don't think it'd be too much of a burden to maintain two channel implementations---or maybe one can be based on the other, as brson suggested---but I'd want to make sure we have a _need_ for both of them.  I'd be inclined to start with the simple, flexible form (perhaps as in #2158) and wait until we hit a roadblock for Servo or some other project where messaging performance is a bottleneck.  At that point, we might think about refactoring.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5016953/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5017881",
    "html_url": "https://github.com/rust-lang/rust/issues/2157#issuecomment-5017881",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2157",
    "id": 5017881,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTc4ODE=",
    "user": {
      "login": "boggle",
      "id": 50886,
      "node_id": "MDQ6VXNlcjUwODg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/50886?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/boggle",
      "html_url": "https://github.com/boggle",
      "followers_url": "https://api.github.com/users/boggle/followers",
      "following_url": "https://api.github.com/users/boggle/following{/other_user}",
      "gists_url": "https://api.github.com/users/boggle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/boggle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/boggle/subscriptions",
      "organizations_url": "https://api.github.com/users/boggle/orgs",
      "repos_url": "https://api.github.com/users/boggle/repos",
      "events_url": "https://api.github.com/users/boggle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/boggle/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-04-08T19:40:04Z",
    "updated_at": "2012-04-08T19:40:04Z",
    "body": "Yes, I agree. I just think it is quite important to get the set of operations over channels right from the start as much as possible (#1255, broadcasts, timeouts), attach precise and reasonable semantics to the abstraction (perhaps using interfaces) that does _not_ leak the implementation strategy, and provide enough support for using it without being a queueing theory expert ;).  These are different issues but I think it is critical to get them right and a good idea to look more at erlang (which has proven that it works) than to look at go (which kind-of still has to). \n\nFrom that angle, I'd like rust to somehow (flags, types, interfaces, typestate) differentiate between wether \n- a channel provides FIFO delivery or not,\n- a channel is lossy or not,\n- a channel send may block or not\n\nand provide a few additional ops (timeouts, broadcasts).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5017881/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6816610",
    "html_url": "https://github.com/rust-lang/rust/issues/2157#issuecomment-6816610",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2157",
    "id": 6816610,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MTY2MTA=",
    "user": {
      "login": "eholk",
      "id": 105766,
      "node_id": "MDQ6VXNlcjEwNTc2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eholk",
      "html_url": "https://github.com/eholk",
      "followers_url": "https://api.github.com/users/eholk/followers",
      "following_url": "https://api.github.com/users/eholk/following{/other_user}",
      "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eholk/subscriptions",
      "organizations_url": "https://api.github.com/users/eholk/orgs",
      "repos_url": "https://api.github.com/users/eholk/repos",
      "events_url": "https://api.github.com/users/eholk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eholk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-06T21:26:32Z",
    "updated_at": "2012-07-06T21:26:32Z",
    "body": "I've been working on implementing Singularity-style channel contracts. As of 7b03832c958826b27ea77df91f2d2ac276bb7411, there is basic support for it in the compiler. I have a post describing it at http://theincredibleholk.wordpress.com/2012/07/06/rusty-pipes/. The proposal for channel contracts is also available at https://github.com/eholk/rust/wiki/Proposal-for-channel-contracts. So far the performance has been quite good. I'm going to be working on converting more code over to use them to get a feel for whether they are usable.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6816610/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7263370",
    "html_url": "https://github.com/rust-lang/rust/issues/2157#issuecomment-7263370",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2157",
    "id": 7263370,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNjMzNzA=",
    "user": {
      "login": "eholk",
      "id": 105766,
      "node_id": "MDQ6VXNlcjEwNTc2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eholk",
      "html_url": "https://github.com/eholk",
      "followers_url": "https://api.github.com/users/eholk/followers",
      "following_url": "https://api.github.com/users/eholk/following{/other_user}",
      "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eholk/subscriptions",
      "organizations_url": "https://api.github.com/users/eholk/orgs",
      "repos_url": "https://api.github.com/users/eholk/repos",
      "events_url": "https://api.github.com/users/eholk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eholk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-25T21:54:03Z",
    "updated_at": "2012-07-25T21:54:03Z",
    "body": "We have these now, so I'm going to close the bug. We could use more syntax extensions, and the pipe compiler needs to be more robust, but basic support is there.\n\nI intend to try and replace all of the existing Rust communication code with things based on channel contracts, and then hopefully remove the `comm` module.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7263370/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
