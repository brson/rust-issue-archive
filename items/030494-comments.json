[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166172871",
    "html_url": "https://github.com/rust-lang/rust/issues/30494#issuecomment-166172871",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30494",
    "id": 166172871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NjE3Mjg3MQ==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-21T01:51:42Z",
    "updated_at": "2015-12-21T01:51:42Z",
    "body": "This seems unrelated to #19571.\nCan you try other versions? If your code compiles on them, that is.\nIf you have `multirust`, it should be trivial to switch between versions.\n\nI could try to reduce rust.js myself, it looks like a moderately sized project.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166172871/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166185683",
    "html_url": "https://github.com/rust-lang/rust/issues/30494#issuecomment-166185683",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30494",
    "id": 166185683,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NjE4NTY4Mw==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-21T03:14:46Z",
    "updated_at": "2015-12-21T03:14:46Z",
    "body": "[Minimal reproduction](https://play.rust-lang.org/?gist=d90352ede36ed7f5d77e&version=stable):\n\n``` rust\nstruct Foo;\nimpl Foo {\n    extern fn foo(_: [u8; 1]) {}\n}\n```\n\nIt appears that `extern` methods (not free functions) have their arguments incorrectly translated.\ncc @dotdash @Aatch\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166185683/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166186498",
    "html_url": "https://github.com/rust-lang/rust/issues/30494#issuecomment-166186498",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30494",
    "id": 166186498,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NjE4NjQ5OA==",
    "user": {
      "login": "yorkie",
      "id": 1935767,
      "node_id": "MDQ6VXNlcjE5MzU3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1935767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorkie",
      "html_url": "https://github.com/yorkie",
      "followers_url": "https://api.github.com/users/yorkie/followers",
      "following_url": "https://api.github.com/users/yorkie/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorkie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorkie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorkie/subscriptions",
      "organizations_url": "https://api.github.com/users/yorkie/orgs",
      "repos_url": "https://api.github.com/users/yorkie/repos",
      "events_url": "https://api.github.com/users/yorkie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorkie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-21T03:17:34Z",
    "updated_at": "2015-12-21T03:17:34Z",
    "body": "Thanks @eddyb for that so detailed reply, do you think it's related to this commit https://github.com/yorkie/rust.js/commit/9525af074e61b84266bb178adbe4e0af20ccba78?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166186498/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166190782",
    "html_url": "https://github.com/rust-lang/rust/issues/30494#issuecomment-166190782",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30494",
    "id": 166190782,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NjE5MDc4Mg==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-21T03:36:45Z",
    "updated_at": "2015-12-21T03:36:45Z",
    "body": "No, not really.\nThe problem stems from the fact that you're passing structures by value in arguments, e.g.:\n\n``` rust\n#[repr(C)]\npub struct FunctionCallbackInfo(*mut *mut FunctionCallbackInfo);\n\n...\n\nimpl StringBytes {\n  extern fn New(arguments: v8::FunctionCallbackInfo) {\n    arguments.GetReturnValue().SetWithBool(true);\n  }\n}\n```\n\nOne way you might be able to work around this bug would be to remove one level of indirection, e.g.\n\n``` rust\nextern {\n  fn v8_function_callback_info_get_return_value(this: &mut FunctionCallbackInfo) -> &mut ReturnValue;\n}\n\n// Doesn't really matter what's inside, can still pretend there's a pointer there.\n#[repr(C)]\npub struct FunctionCallbackInfo(*mut u8);\n#[repr(C)]\npub struct ReturnValue(*mut u8);\n\nimpl FunctionCallbackInfo {\n  pub fn GetReturnValue(&mut self) -> &mut ReturnValue {\n    unsafe { v8_function_callback_info_get_return_value(self) }\n  }\n}\n\nimpl StringBytes {\n  extern fn New(arguments: &mut v8::FunctionCallbackInfo) {\n    arguments.GetReturnValue().SetWithBool(true);\n  }\n}\n```\n\nAnd on the C++ side:\n\n``` cpp\nReturnValue<Value> v8_function_callback_info_get_return_value(FunctionCallbackInfo<Value> *callbackInfo) {\n  return callbackInfo->GetReturnValue();\n}\n```\n\nIt would be a pretty big change, but it should make your code compile.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166190782/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166198764",
    "html_url": "https://github.com/rust-lang/rust/issues/30494#issuecomment-166198764",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30494",
    "id": 166198764,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NjE5ODc2NA==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-21T04:10:43Z",
    "updated_at": "2015-12-21T04:10:43Z",
    "body": "@yorkie Sorry, I was overthinking this, you should be able to get away with just moving `extern fn` methods out of `impl` blocks (and make them free functions).\n\nThis issue is also related to #30235.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166198764/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215122689",
    "html_url": "https://github.com/rust-lang/rust/issues/30494#issuecomment-215122689",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30494",
    "id": 215122689,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNTEyMjY4OQ==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-27T15:34:12Z",
    "updated_at": "2016-04-27T15:34:12Z",
    "body": "duplicate of #30235.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215122689/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
