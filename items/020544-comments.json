[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68756049",
    "html_url": "https://github.com/rust-lang/rust/issues/20544#issuecomment-68756049",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20544",
    "id": 68756049,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NzU2MDQ5",
    "user": {
      "login": "pfalabella",
      "id": 1331706,
      "node_id": "MDQ6VXNlcjEzMzE3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1331706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pfalabella",
      "html_url": "https://github.com/pfalabella",
      "followers_url": "https://api.github.com/users/pfalabella/followers",
      "following_url": "https://api.github.com/users/pfalabella/following{/other_user}",
      "gists_url": "https://api.github.com/users/pfalabella/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pfalabella/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pfalabella/subscriptions",
      "organizations_url": "https://api.github.com/users/pfalabella/orgs",
      "repos_url": "https://api.github.com/users/pfalabella/repos",
      "events_url": "https://api.github.com/users/pfalabella/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pfalabella/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-05T18:53:32Z",
    "updated_at": "2015-01-05T18:53:32Z",
    "body": "probably a dup of https://github.com/rust-lang/rust/issues/20174\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68756049/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68757006",
    "html_url": "https://github.com/rust-lang/rust/issues/20544#issuecomment-68757006",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20544",
    "id": 68757006,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NzU3MDA2",
    "user": {
      "login": "pfalabella",
      "id": 1331706,
      "node_id": "MDQ6VXNlcjEzMzE3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1331706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pfalabella",
      "html_url": "https://github.com/pfalabella",
      "followers_url": "https://api.github.com/users/pfalabella/followers",
      "following_url": "https://api.github.com/users/pfalabella/following{/other_user}",
      "gists_url": "https://api.github.com/users/pfalabella/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pfalabella/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pfalabella/subscriptions",
      "organizations_url": "https://api.github.com/users/pfalabella/orgs",
      "repos_url": "https://api.github.com/users/pfalabella/repos",
      "events_url": "https://api.github.com/users/pfalabella/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pfalabella/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-05T18:58:52Z",
    "updated_at": "2015-01-05T18:58:52Z",
    "body": "@tikue as a workaround, your code works if you change `Fun` from a newtype to a struct with a named field, like this: `struct Fun<F: Fn(T) -> T, T> {f: F}`\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68757006/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68780701",
    "html_url": "https://github.com/rust-lang/rust/issues/20544#issuecomment-68780701",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20544",
    "id": 68780701,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NzgwNzAx",
    "user": {
      "login": "tikue",
      "id": 2915777,
      "node_id": "MDQ6VXNlcjI5MTU3Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2915777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tikue",
      "html_url": "https://github.com/tikue",
      "followers_url": "https://api.github.com/users/tikue/followers",
      "following_url": "https://api.github.com/users/tikue/following{/other_user}",
      "gists_url": "https://api.github.com/users/tikue/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tikue/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tikue/subscriptions",
      "organizations_url": "https://api.github.com/users/tikue/orgs",
      "repos_url": "https://api.github.com/users/tikue/repos",
      "events_url": "https://api.github.com/users/tikue/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tikue/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-05T21:02:30Z",
    "updated_at": "2015-01-05T21:02:30Z",
    "body": "Thank you @pfalabella!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68780701/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76372689",
    "html_url": "https://github.com/rust-lang/rust/issues/20544#issuecomment-76372689",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20544",
    "id": 76372689,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2MzcyNjg5",
    "user": {
      "login": "yann-ledu",
      "id": 11094035,
      "node_id": "MDQ6VXNlcjExMDk0MDM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/11094035?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yann-ledu",
      "html_url": "https://github.com/yann-ledu",
      "followers_url": "https://api.github.com/users/yann-ledu/followers",
      "following_url": "https://api.github.com/users/yann-ledu/following{/other_user}",
      "gists_url": "https://api.github.com/users/yann-ledu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yann-ledu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yann-ledu/subscriptions",
      "organizations_url": "https://api.github.com/users/yann-ledu/orgs",
      "repos_url": "https://api.github.com/users/yann-ledu/repos",
      "events_url": "https://api.github.com/users/yann-ledu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yann-ledu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-27T10:30:59Z",
    "updated_at": "2015-02-27T10:30:59Z",
    "body": "That last struct abstraction does not work anymore : how can we express it now ?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76372689/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100517410",
    "html_url": "https://github.com/rust-lang/rust/issues/20544#issuecomment-100517410",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20544",
    "id": 100517410,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMDUxNzQxMA==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-09T16:57:27Z",
    "updated_at": "2015-05-09T16:57:27Z",
    "body": "Here is a working version.\n\n``` rust\n#![feature(unboxed_closures)]\n#![feature(core)]\n\nuse std::ops::Mul;\n\nstruct Fun<F: Fn(T) -> T, T>(F, std::marker::PhantomData<T>);\n\nimpl<F, T> FnOnce<(T,)> for Fun<F, T> where F: Fn(T) -> T {\n    type Output = T;\n\n    extern \"rust-call\" fn call_once(self, args: (T,)) -> T {\n        self.call(args)\n    }\n}\n\nimpl<F, T> FnMut<(T,)> for Fun<F, T> where F: Fn(T) -> T {\n    extern \"rust-call\" fn call_mut(&mut self, args: (T,)) -> T {\n        self.call(args)\n    }\n}\n\nimpl<F, T> Fn<(T,)> for Fun<F, T> where F: Fn(T) -> T {\n    extern \"rust-call\" fn call(&self, (t,): (T,)) -> T {\n        (self.0)(t)\n    }\n}\n\nimpl<T, F1, F2> Mul<Fun<F2, T>> for Fun<F1, T>\nwhere \n    F1: Fn(T) -> T, \n    F2: Fn(T) -> T {\n\n    type Output = Compose<Fun<F1, T>, Fun<F2, T>, T>;\n    fn mul(self, rhs: Fun<F2, T>) -> Compose<Fun<F1, T>, Fun<F2, T>, T> {\n        Compose{f1: self, f2: rhs, _ph: std::marker::PhantomData}\n    }\n}\n\n\nstruct Compose<F1, F2, T> where F1: Fn(T) -> T, F2: Fn(T) -> T {\n    f1: F1,\n    f2: F2,\n    _ph: std::marker::PhantomData<T>,\n}\n\n\nimpl<T, F1, F2> FnOnce<(T,)> for Compose<F1, F2, T> where F1: Fn(T) -> T, F2: Fn(T) -> T {\n    type Output = T;\n\n    extern \"rust-call\" fn call_once(self, args: (T,)) -> T {\n        self.call(args)\n    }\n}\n\nimpl<T, F1, F2> FnMut<(T,)> for Compose<F1, F2, T> where F1: Fn(T) -> T, F2: Fn(T) -> T {\n\n    extern \"rust-call\" fn call_mut(&mut self, args: (T,)) -> T {\n        self.call(args)\n    }\n}\n\nimpl<T, F1, F2> Fn<(T,)> for Compose<F1, F2, T> where F1: Fn(T) -> T, F2: Fn(T) -> T {\n\n    extern \"rust-call\" fn call(&self, (t,): (T,)) -> T {\n        (self.f1)((self.f2)(t))\n    }\n}\n\nfn main() {\n    let f1 = Fun(|i: isize| i * 2, std::marker::PhantomData::<isize>);\n    let f2 = Fun(|i: isize| i - 1, std::marker::PhantomData::<isize>);\n    let f3 = f1 * f2;\n    println!(\"{}\", f3(3));\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100517410/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100517740",
    "html_url": "https://github.com/rust-lang/rust/issues/20544#issuecomment-100517740",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20544",
    "id": 100517740,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMDUxNzc0MA==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-09T17:02:06Z",
    "updated_at": "2015-05-09T17:02:06Z",
    "body": "And a minimal example:\n\n``` rust\n#![feature(unboxed_closures)]\n#![feature(core)]\n\nstruct Fun<F>(F);\n\nimpl<F, T> FnOnce<(T,)> for Fun<F> where F: Fn(T) -> T {\n    type Output = T;\n\n    extern \"rust-call\" fn call_once(self, (t,): (T,)) -> T {\n        (self.0)(t)\n    }\n}\n\nfn main() {\n    let fun = Fun(|i: isize| i * 2);\n    println!(\"{}\", fun(3));\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100517740/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113224538",
    "html_url": "https://github.com/rust-lang/rust/issues/20544#issuecomment-113224538",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20544",
    "id": 113224538,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzIyNDUzOA==",
    "user": {
      "login": "pmarcelll",
      "id": 1909968,
      "node_id": "MDQ6VXNlcjE5MDk5Njg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1909968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pmarcelll",
      "html_url": "https://github.com/pmarcelll",
      "followers_url": "https://api.github.com/users/pmarcelll/followers",
      "following_url": "https://api.github.com/users/pmarcelll/following{/other_user}",
      "gists_url": "https://api.github.com/users/pmarcelll/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pmarcelll/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pmarcelll/subscriptions",
      "organizations_url": "https://api.github.com/users/pmarcelll/orgs",
      "repos_url": "https://api.github.com/users/pmarcelll/repos",
      "events_url": "https://api.github.com/users/pmarcelll/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pmarcelll/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-18T17:14:48Z",
    "updated_at": "2015-06-18T17:14:48Z",
    "body": "@Stebalien both examples compile and run on my machine with the latest nightly.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113224538/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113248076",
    "html_url": "https://github.com/rust-lang/rust/issues/20544#issuecomment-113248076",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20544",
    "id": 113248076,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzI0ODA3Ng==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-18T18:23:18Z",
    "updated_at": "2015-06-18T18:23:18Z",
    "body": "@pmarcelll yes they do. This can probably be closed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113248076/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
