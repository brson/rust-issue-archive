[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11353195",
    "html_url": "https://github.com/rust-lang/rust/pull/4178#issuecomment-11353195",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4178",
    "id": 11353195,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzUzMTk1",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-12-13T21:04:34Z",
    "updated_at": "2012-12-13T21:04:34Z",
    "body": "Sorry, I think when I re-pushed it wiped @nikomatsakis 's comments. In answer to:\n\n\"this... doesn't seem right to me...maybe I am confused, but I thought that an object was represented as the pair of a vtable and data pointer. I'd expect that you want to preserve this vtable. But then your test does work, presumably, so maybe I'm confused.. or maybe the test is bogus. Can you modify the test somewhat to have multiple fields and assert that they have their expected values, rather than just printing them out?\"\n\nI'll try modifying the test.\n\n\"I think we should call this AutoBorrowObject. I've been trying to use the term \"object\" to refer to instances of a trait type.\"\n\nI'll do this.\n\n\"this seems like a bug in our casting logic, because a ~Trait really ought to be unique. that said, I think that the plan was to move towards auto-coercing as the means of constructing objects and not casts, so maybe this is a moot point.\"\n\nOk, sounds like it's fine to leave this as it is for now?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11353195/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11353850",
    "html_url": "https://github.com/rust-lang/rust/pull/4178#issuecomment-11353850",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4178",
    "id": 11353850,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzUzODUw",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-12-13T21:19:48Z",
    "updated_at": "2012-12-13T21:22:41Z",
    "body": "r- pending further tests.\n\nIn addition to the comments above, there was this one regarding borrow check:\n\nI don't think this is quite correct.  The problem is that, unlike AutoRef, the \"AutoBorrowTrait\" kind of combines a deref and a borrow into one operation.  So, if you have a variable `x: ~T` that is \"autoborrowed\" into `&T`, we want to say that the data found at `*x`---that is, the data that `x` points at---will remain valid.  But here we are only guaranteeing that `x` remains valid, not necessarily the data it points at.\n\nCan you add a test like:\n\n```\nstruct X { x: uint }\n\ntrait Foo {\n    fn foo(&self) -> &self/uint;\n}\n\nimpl X: Foo {\n    fn foo(&self) -> &self/uint { &self.x }\n}\n\nfn main() {\n    let x0 = ~X { x: 3 };\n    let x1 = ~X { x: 3 };\n    let y = (move x0) as ~Foo;\n    let z = y.foo();\n    y = (move x1) as ~Foo; // Should result in an error because we are modifying `y`, which is still borrowed\n    io::println(*z);\n}\n```\n\nFixing this will take a bit of work, though, because `*x` isn't a legal rust expression. So we have to extend the categorization structure, I think, to be able to represent it... actually the _structure_ is probably ok, it's just that we have to extend the code for handling derefs to recognize that there are derefable things that are not permitted by the `*` operator.  We already have this problem to some extent, I think we have addressed it before by adding a special method for handling these sorts of special-case derefs.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11353850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11984342",
    "html_url": "https://github.com/rust-lang/rust/pull/4178#issuecomment-11984342",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4178",
    "id": 11984342,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExOTg0MzQy",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-01-08T04:32:13Z",
    "updated_at": "2013-01-08T04:32:13Z",
    "body": "I need to put more work into this, so closing it for now.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11984342/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
