[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157513863",
    "html_url": "https://github.com/rust-lang/rust/issues/29896#issuecomment-157513863",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29896",
    "id": 157513863,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzUxMzg2Mw==",
    "user": {
      "login": "nrc",
      "id": 762626,
      "node_id": "MDQ6VXNlcjc2MjYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nrc",
      "html_url": "https://github.com/nrc",
      "followers_url": "https://api.github.com/users/nrc/followers",
      "following_url": "https://api.github.com/users/nrc/following{/other_user}",
      "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nrc/subscriptions",
      "organizations_url": "https://api.github.com/users/nrc/orgs",
      "repos_url": "https://api.github.com/users/nrc/repos",
      "events_url": "https://api.github.com/users/nrc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nrc/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-17T21:32:05Z",
    "updated_at": "2015-11-17T21:32:05Z",
    "body": "cc @nagisa\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157513863/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157515429",
    "html_url": "https://github.com/rust-lang/rust/issues/29896#issuecomment-157515429",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29896",
    "id": 157515429,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzUxNTQyOQ==",
    "user": {
      "login": "nrc",
      "id": 762626,
      "node_id": "MDQ6VXNlcjc2MjYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nrc",
      "html_url": "https://github.com/nrc",
      "followers_url": "https://api.github.com/users/nrc/followers",
      "following_url": "https://api.github.com/users/nrc/following{/other_user}",
      "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nrc/subscriptions",
      "organizations_url": "https://api.github.com/users/nrc/orgs",
      "repos_url": "https://api.github.com/users/nrc/repos",
      "events_url": "https://api.github.com/users/nrc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nrc/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-17T21:35:58Z",
    "updated_at": "2015-11-17T21:35:58Z",
    "body": "cc @rust-lang/compiler (I wish labelling T-compiler did this automatically)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157515429/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157542798",
    "html_url": "https://github.com/rust-lang/rust/issues/29896#issuecomment-157542798",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29896",
    "id": 157542798,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzU0Mjc5OA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-17T23:22:20Z",
    "updated_at": "2015-11-17T23:22:20Z",
    "body": "What's the actual errors here? Running valgrind without flags reports:\n\n```\n$ valgrind ./exit-flushes\n==15994== Memcheck, a memory error detector\n==15994== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==15994== Using Valgrind-3.10.0.SVN and LibVEX; rerun with -h for copyright info\n==15994== Command: ./exit-flushes\n==15994== \n==15994== \n==15994== HEAP SUMMARY:\n==15994==     in use at exit: 32 bytes in 1 blocks\n==15994==   total heap usage: 52 allocs, 51 frees, 3,200 bytes allocated\n==15994== \n==15994== LEAK SUMMARY:\n==15994==    definitely lost: 0 bytes in 0 blocks\n==15994==    indirectly lost: 0 bytes in 0 blocks\n==15994==      possibly lost: 0 bytes in 0 blocks\n==15994==    still reachable: 32 bytes in 1 blocks\n==15994==         suppressed: 0 bytes in 0 blocks\n==15994== Rerun with --leak-check=full to see details of leaked memory\n==15994== \n==15994== For counts of detected and suppressed errors, rerun with: -v\n==15994== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n```\n\nAnd running with more flags:\n\n```\n$ valgrind --show-leak-kinds=all --leak-check=full ./exit-flushes\n==16010== Memcheck, a memory error detector\n==16010== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==16010== Using Valgrind-3.10.0.SVN and LibVEX; rerun with -h for copyright info\n==16010== Command: ./exit-flushes\n==16010== \n==16010== \n==16010== HEAP SUMMARY:\n==16010==     in use at exit: 32 bytes in 1 blocks\n==16010==   total heap usage: 52 allocs, 51 frees, 3,200 bytes allocated\n==16010== \n==16010== 32 bytes in 1 blocks are still reachable in loss record 1 of 1\n==16010==    at 0x4C2CC70: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==16010==    by 0x4E3868F: _dlerror_run (dlerror.c:141)\n==16010==    by 0x4E380C0: dlopen@@GLIBC_2.2.5 (dlopen.c:87)\n==16010==    by 0x115427: dynamic_lib::_$LT$impl$GT$::open::h18d9049daa783e54g0d (in /home/alex/code/rust4/exit-flushes)\n==16010==    by 0x11E675: sys::thread::_$LT$impl$GT$::new::h12092075689a77b6yFw (in /home/alex/code/rust4/exit-flushes)\n==16010==    by 0x11BB4F: process::_$LT$impl$GT$::wait_with_output::h9de87472d42d007c8Qm (in /home/alex/code/rust4/exit-flushes)\n==16010==    by 0x11B86C: process::_$LT$impl$GT$::output::hc2dfccaa9143d1c54Cm (in /home/alex/code/rust4/exit-flushes)\n==16010==    by 0x11034A: main::h82a74a745ccbaed7iaa (in /home/alex/code/rust4/exit-flushes)\n==16010==    by 0x1256B4: sys_common::unwind::try::try_fn::h5598476508523168281 (in /home/alex/code/rust4/exit-flushes)\n==16010==    by 0x1229C8: __rust_try (in /home/alex/code/rust4/exit-flushes)\n==16010==    by 0x125356: rt::lang_start::he15236a7da0e712coox (in /home/alex/code/rust4/exit-flushes)\n==16010==    by 0x114329: main (in /home/alex/code/rust4/exit-flushes)\n==16010== \n==16010== LEAK SUMMARY:\n==16010==    definitely lost: 0 bytes in 0 blocks\n==16010==    indirectly lost: 0 bytes in 0 blocks\n==16010==      possibly lost: 0 bytes in 0 blocks\n==16010==    still reachable: 32 bytes in 1 blocks\n==16010==         suppressed: 0 bytes in 0 blocks\n==16010== \n==16010== For counts of detected and suppressed errors, rerun with: -v\n==16010== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n```\n\n(which looks benign)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157542798/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157654028",
    "html_url": "https://github.com/rust-lang/rust/issues/29896#issuecomment-157654028",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29896",
    "id": 157654028,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzY1NDAyOA==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-18T09:25:05Z",
    "updated_at": "2015-11-18T09:25:05Z",
    "body": "Happens with simple check-stage1-rpass-valgrind\n\n```\n---- [run-pass-valgrind] run-pass-valgrind/exit-flushes.rs stdout ----\n\nerror: test run failed!\nstatus: exit code: 100\ncommand: /usr/bin/valgrind --error-exitcode=100 --fair-sched=try --quiet --soname-synonyms=somalloc=NONE --suppressions=/home/nagisa/Documents/rust/rust/src/etc/x86.supp --tool=memcheck --leak-check=full x86_64-unknown-linux-gnu/test/run-pass-valgrind/exit-flushes.stage1-x86_64-unknown-linux-gnu\nstdout:\n------------------------------------------\n\n------------------------------------------\nstderr:\n------------------------------------------\n==28178== 288 bytes in 1 blocks are possibly lost in loss record 2 of 2\n==28178==    at 0x4C2A987: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==28178==    by 0x4011841: allocate_dtv (in /usr/lib/ld-2.22.so)\n==28178==    by 0x401221D: _dl_allocate_tls (in /usr/lib/ld-2.22.so)\n==28178==    by 0x5CDB044: pthread_create@@GLIBC_2.2.5 (in /usr/lib/libpthread-2.22.so)\n==28178==    by 0x4F4E989: sys::thread::_$LT$impl$GT$::new::h18c8e1383a16a102QFw (in /home/nagisa/Documents/rust/rust/x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/libstd-71b07a99.so)\n==28178==    by 0x4F4BD67: thread::_$LT$impl$GT$::spawn::h8240507308132532220 (in /home/nagisa/Documents/rust/rust/x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/libstd-71b07a99.so)\n==28178==    by 0x4F4AE15: thread::spawn::h8206638966982322642 (in /home/nagisa/Documents/rust/rust/x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/libstd-71b07a99.so)\n==28178==    by 0x4F4341D: process::_$LT$impl$GT$::wait_with_output::read::h16290293560351911718 (in /home/nagisa/Documents/rust/rust/x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/libstd-71b07a99.so)\n==28178==    by 0x4F4042A: process::_$LT$impl$GT$::wait_with_output::h149e8dca7ba9fec96Pm (in /home/nagisa/Documents/rust/rust/x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/libstd-71b07a99.so)\n==28178==    by 0x4F402AD: process::_$LT$impl$GT$::output::_$LT$closure$GT$::closure.38650 (in /home/nagisa/Documents/rust/rust/x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/libstd-71b07a99.so)\n==28178==    by 0x4F40128: result::_$LT$impl$GT$::and_then::and_then::h12745603337970662170 (in /home/nagisa/Documents/rust/rust/x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/libstd-71b07a99.so)\n==28178==    by 0x4F40077: process::_$LT$impl$GT$::output::h85147110d45a11184Bm (in /home/nagisa/Documents/rust/rust/x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/libstd-71b07a99.so)\n==28178== \n------------------------------------------\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157654028/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157758744",
    "html_url": "https://github.com/rust-lang/rust/issues/29896#issuecomment-157758744",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29896",
    "id": 157758744,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1Nzc1ODc0NA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-18T15:59:33Z",
    "updated_at": "2015-11-18T15:59:33Z",
    "body": "Ah I think that may have been fixed by https://github.com/rust-lang/rust/pull/29897\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157758744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/158261973",
    "html_url": "https://github.com/rust-lang/rust/issues/29896#issuecomment-158261973",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29896",
    "id": 158261973,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1ODI2MTk3Mw==",
    "user": {
      "login": "nrc",
      "id": 762626,
      "node_id": "MDQ6VXNlcjc2MjYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nrc",
      "html_url": "https://github.com/nrc",
      "followers_url": "https://api.github.com/users/nrc/followers",
      "following_url": "https://api.github.com/users/nrc/following{/other_user}",
      "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nrc/subscriptions",
      "organizations_url": "https://api.github.com/users/nrc/orgs",
      "repos_url": "https://api.github.com/users/nrc/repos",
      "events_url": "https://api.github.com/users/nrc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nrc/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-20T02:36:14Z",
    "updated_at": "2015-11-20T02:36:14Z",
    "body": "Confirmed - we now pass all rpass-valgrind tests.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/158261973/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
