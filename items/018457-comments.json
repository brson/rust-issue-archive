[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61123671",
    "html_url": "https://github.com/rust-lang/rust/pull/18457#issuecomment-61123671",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18457",
    "id": 61123671,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTIzNjcx",
    "user": {
      "login": "rust-highfive",
      "id": 7378925,
      "node_id": "MDQ6VXNlcjczNzg5MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7378925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rust-highfive",
      "html_url": "https://github.com/rust-highfive",
      "followers_url": "https://api.github.com/users/rust-highfive/followers",
      "following_url": "https://api.github.com/users/rust-highfive/following{/other_user}",
      "gists_url": "https://api.github.com/users/rust-highfive/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rust-highfive/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rust-highfive/subscriptions",
      "organizations_url": "https://api.github.com/users/rust-highfive/orgs",
      "repos_url": "https://api.github.com/users/rust-highfive/repos",
      "events_url": "https://api.github.com/users/rust-highfive/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rust-highfive/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-30T16:35:05Z",
    "updated_at": "2014-10-30T16:35:05Z",
    "body": "<img src=\"http://www.joshmatthews.net/warning.svg\" alt=\"warning\" height=20> **Warning** <img src=\"http://www.joshmatthews.net/warning.svg\" alt=\"warning\" height=20>\n- These commits modify **unsafe code**. Please review it carefully!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61123671/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61124681",
    "html_url": "https://github.com/rust-lang/rust/pull/18457#issuecomment-61124681",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18457",
    "id": 61124681,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTI0Njgx",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-30T16:40:27Z",
    "updated_at": "2014-10-30T16:40:27Z",
    "body": "While I think it makes sense to impl `ToCStr` for `str` directly, the loss in ergonomics of `Command` here is somewhat unfortunate (adding lots of `&`). This keeps the string-literal case at the same level of ergonomics, but any owned value now has to have a `&` stuck in front. I've frequently liked how `Command` is so versatile in what I can throw at it and it almost always looks great (just a mild concern).\n\nPerhaps `Command` could continue to take `T` by value but the trait could be defined for `str` instead of `&'a str`?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61124681/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61130628",
    "html_url": "https://github.com/rust-lang/rust/pull/18457#issuecomment-61130628",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18457",
    "id": 61130628,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTMwNjI4",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-30T17:14:45Z",
    "updated_at": "2014-10-30T17:14:45Z",
    "body": "The `to_c_str` doesn't need to take ownership, since it always does a (malloc) allocation and copies the input (i.e. it doesn't reuse the memory owned by the input). If we make the `Command` methods take by value we are going to encourage unnecessary clones, for example:\n\n``` rust\n// path has type &Path\n// Take ToCStr by value\nCommand::new(path.clone());  // allocates for Path (just to satisfy the by-value need)\n// and allocates again for CString\n// vs\n// Take ToCStr by reference\nCommand::new(path);  // only one allocation for the CString\n```\n\nAlthough I didn't find any unnecessary clone in this PR, I did find a few unnecessary clones in my [`BytesContainer` DSTification branch](https://github.com/japaric/rust/commits/bytes2) (which contains a similar by-value to by-reference change).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61130628/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61131347",
    "html_url": "https://github.com/rust-lang/rust/pull/18457#issuecomment-61131347",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18457",
    "id": 61131347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTMxMzQ3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-30T17:19:00Z",
    "updated_at": "2014-10-30T17:19:00Z",
    "body": "Note that if we `T` is taken by value then `&Path` can still implement `BytesContainer` just as `Path` can, so you could call `Command::new(path)` where path has type `Path` or `&Path`. This can be enabled via the blanket `ToCStr for &'a T where T: ToCStr`\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61131347/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61140093",
    "html_url": "https://github.com/rust-lang/rust/pull/18457#issuecomment-61140093",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18457",
    "id": 61140093,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTQwMDkz",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-30T18:03:11Z",
    "updated_at": "2014-10-30T18:03:11Z",
    "body": "> Note that if we T is taken by value then &Path can still implement BytesContainer just as Path can, so you could call Command::new(path) where path has type Path or &Path. This can be enabled via the blanket ToCStr for &'a T where T: ToCStr\n\nThat sounds good to me. (blanket impl for `&T` + take `T: ToCStr` by value)\n\n@aturon What do you think?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61140093/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61206471",
    "html_url": "https://github.com/rust-lang/rust/pull/18457#issuecomment-61206471",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18457",
    "id": 61206471,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMjA2NDcx",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-31T02:30:13Z",
    "updated_at": "2014-10-31T02:30:13Z",
    "body": "I'm comfortable with that. Given that we're already taking a generic parameter for easy overloading, may as well let you pass owned data when convenient.\n\nI would suggest making the `impl` for `&str` instead generic over any `T: ToCStr`, as @alexcrichton proposed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61206471/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61274509",
    "html_url": "https://github.com/rust-lang/rust/pull/18457#issuecomment-61274509",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18457",
    "id": 61274509,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMjc0NTA5",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-31T15:10:16Z",
    "updated_at": "2014-10-31T15:10:16Z",
    "body": "Updated to use @alexcrichton proposal and squashed.\n\n@aturon re-r?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61274509/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
