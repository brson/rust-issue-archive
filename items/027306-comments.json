[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125031695",
    "html_url": "https://github.com/rust-lang/rust/issues/27306#issuecomment-125031695",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27306",
    "id": 125031695,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTAzMTY5NQ==",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-26T19:38:50Z",
    "updated_at": "2015-07-26T19:39:11Z",
    "body": "I would assume that most compilers have a peephole optimisation for a \"normal\" `x & !y` expression -> whatever is the most efficient implementation, similar to how `x % 2` becomes `x & 1` and `x << y | x >> (32 - y)` will become a rotate.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125031695/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125069559",
    "html_url": "https://github.com/rust-lang/rust/issues/27306#issuecomment-125069559",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27306",
    "id": 125069559,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTA2OTU1OQ==",
    "user": {
      "login": "Aatch",
      "id": 342416,
      "node_id": "MDQ6VXNlcjM0MjQxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aatch",
      "html_url": "https://github.com/Aatch",
      "followers_url": "https://api.github.com/users/Aatch/followers",
      "following_url": "https://api.github.com/users/Aatch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions",
      "organizations_url": "https://api.github.com/users/Aatch/orgs",
      "repos_url": "https://api.github.com/users/Aatch/repos",
      "events_url": "https://api.github.com/users/Aatch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aatch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-27T03:08:17Z",
    "updated_at": "2015-07-27T03:08:17Z",
    "body": "This doesn't seem worth it. While yes, there are instructions for doing this specific operation, on x86 at least, it's slower than doing a `not` and an `and`, as the x86 instruction is actually an MMX instruction (and uses the MMX execution units, of which there are far fewer). Furthermore, the related bit-test instructions seem to also have pretty high latencies, so it's no surprise LLVM is reluctant to generate them.\n\nTesting with clang, the output is the same for x86 as rustc, an `and` and a `not`. Using clang's output as a proxy for rustc output for the same arch:\n- **ARM** Outputs the `bic` (\"bit clear\") instruction, which is logically AND NOT.\n- **MIPS** Outputs an `and` + `not`, as it doesn't have a single-instruction implementation.\n- **PowerPC** Outputs `andc` which is \"and with [ones] complement\", aka AND NOT.\n\nSo given that we can't actually generate a direct ANDNOT at the LLVM level (it doesn't have an instruction for it) and LLVM clearly generates the equivalent instruction when it thinks it's the best option, I'm going to say that a special operator for this case is unnecessary. Given that you'd read `a & !b` as \"'a' and not 'b'\", I don't think there's any real advantage to making is special.\n\n(For comparison, `a ^ b` is `(a | b) & !(a & b)`, which isn't exactly obvious)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125069559/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125071518",
    "html_url": "https://github.com/rust-lang/rust/issues/27306#issuecomment-125071518",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27306",
    "id": 125071518,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTA3MTUxOA==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-27T03:19:59Z",
    "updated_at": "2015-07-27T03:19:59Z",
    "body": "I agree with the others. I've also never seen this operator in any other language, so there's not exactly a precedent.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125071518/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
