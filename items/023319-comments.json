[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/78646583",
    "html_url": "https://github.com/rust-lang/rust/issues/23319#issuecomment-78646583",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23319",
    "id": 78646583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NjQ2NTgz",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-12T22:00:15Z",
    "updated_at": "2015-03-12T22:00:15Z",
    "body": "triage: P-backcompat-lang (1.0 beta)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/78646583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85034145",
    "html_url": "https://github.com/rust-lang/rust/issues/23319#issuecomment-85034145",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23319",
    "id": 85034145,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MDM0MTQ1",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-23T14:51:38Z",
    "updated_at": "2015-03-23T14:51:38Z",
    "body": "I've been working more on this. It turns out that my preferred solution (treat everything like a trait match) did not work because `a==b`, when applied to SIMD types, does not have a bool result, and hence is not compatible with the `PartialEq` traits. I've now adopted what I consider to be a superior path. In particular, this path is definitely forwards compatible with optional autoref should we decide to go down that route.\n\nThe idea is simple: for each binary operator `a+b`, we require that the LHS and RHS have known types. In particular, we need to be able to distinguish whether this is a builtin operator application -- e.g. `f32+f32` or `i64+i64` -- from one that should be dispatched by traits -- e.g. `i64 + BigInt`. This is somewhat different from what we did before because, before, we only required the type of the LHS to be known.\n\nThis does cause some breakage, mostly when the RHS is an application of some generic trait method, e.g. `self == Float::infinity()`. The fix here is to use UFCS notation (thanks @eddyb) and write `self == f32::infinity()`, so that the type of both sides are known. As a bonus, this is more readable. In some cases the type may be generic (e.g., some type `T` where `T:Int`), in which case one can just write `T::zero()` or `<T>::zero()`. (In particular, `<>` were needed in macros `<$ty>::zero()` due to what I think coudl be considered a bug.)\n\nHere is an example diff. I can tell you that the resulting code is definitely more readable to someone who has to come and read it for the first time (since that person was me, when making the change):\n\n``` diff\n     #[inline]\n     fn is_infinite(self) -> bool {\n-        self == Float::infinity() || self == Float::neg_infinity()\n+        self == f32::infinity() || self == f32::neg_infinity()\n     }\n```\n\nThere is one unresolved question. In my current branch, we don't do coercions for either side. This caused one broken change, where a `String` was being added to a `&InternedString`. The RHS was being coerced to `&str` by a deref-coercion. This no longer works for me because I am being stricter about the trait that is matched (`L: Add<R>` where `L` and `R` are the types of the left- and right-hand sides, respectively).\n\nI think I can restore the old coercion behavior, at the cost that trait dispatch viability is based only on the LHS. This will potentially impact future auto-ref fallback, because the decision of whether to autoref or not will be based solely on the LHS.\n\ncc @aturon @japaric, this should interest you both.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85034145/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85034961",
    "html_url": "https://github.com/rust-lang/rust/issues/23319#issuecomment-85034961",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23319",
    "id": 85034961,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MDM0OTYx",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-23T14:53:03Z",
    "updated_at": "2015-03-23T14:53:03Z",
    "body": "> There is one unresolved question. In my current branch, we don't do coercions for either side. This caused one broken change, where a String was being added to a &InternedString. The RHS was being coerced to &str by a deref-coercion. This no longer works for me because I am being stricter about the trait that is matched (L: Add<R> where L and R are the types of the left- and right-hand sides, respectively).\n\nNote: Presumably this will also break `String + &String`, which works today. This is why I am concerned.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85034961/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85074378",
    "html_url": "https://github.com/rust-lang/rust/issues/23319#issuecomment-85074378",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23319",
    "id": 85074378,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MDc0Mzc4",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-23T16:22:13Z",
    "updated_at": "2015-03-23T16:22:13Z",
    "body": "Example of code that fails to compile today but I think should compile (and compiles on my branch): http://is.gd/38Z70g\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85074378/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85128925",
    "html_url": "https://github.com/rust-lang/rust/issues/23319#issuecomment-85128925",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23319",
    "id": 85128925,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MTI4OTI1",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-23T18:12:25Z",
    "updated_at": "2015-03-23T18:12:25Z",
    "body": "After some discussion with @aturon, we decided that the better thing to do is revert to the previous approach (all traits, all the time) with some hacky code for SIMD. Basically using `==` for this seems wrong, because `==` should map to the `PartialEq` trait, so we'd rather change SIMD than have stronger rules about when types must be known. This makes sense but I'm not eager to re-implement this all for the 3rd time. ;)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85128925/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
