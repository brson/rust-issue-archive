[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/95871256",
    "html_url": "https://github.com/rust-lang/rust/issues/24764#issuecomment-95871256",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24764",
    "id": 95871256,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk1ODcxMjU2",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-24T09:36:56Z",
    "updated_at": "2015-04-24T09:36:56Z",
    "body": "staticlib must include all its rust dependencies. Use `--emit=obj` to produce object file without bundled dependencies.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/95871256/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/95994604",
    "html_url": "https://github.com/rust-lang/rust/issues/24764#issuecomment-95994604",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24764",
    "id": 95994604,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk1OTk0NjA0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-24T17:11:08Z",
    "updated_at": "2015-04-24T17:11:08Z",
    "body": "@nagisa is correct in that a staticlib must include all rust and native dependencies, so if we take a look at the actual contents of the archive (for me it's 1.9MB) we get:\n- `main.o` - 163K, the public symbols here being `rust_begin_unwind`, `rust_eh_personality`, `rust_eh_personality_catch`, and `rust_stack_exhausted`. Some of these are required by `morestack.o`, but in general this is not a source of much bloat (although in this specific case some of them could probably be optimized away). Note that because of LTO this is the only rust code in the archive.\n- libbacktrace - 208K\n- compiler-rt - 1012K\n- jemalloc - 976K\n- assorted libstd deps - 30K\n\nSo the \"ridiculously large\" aspects of this are the compiler-rt and jemalloc libraries. This will all be stripped away as necessary by the linker when producing a final library, and it is always why we recommend `--gc-section` wherever possible. \n\nIn general I don't think that this bug is super actionable, but some concrete steps we could take are:\n- Add the ability to select jemalloc or the system malloc at link-time\n- Add the option to omit libbacktrace (it's only used for `RUST_BACKTRACE=1`)\n- Somehow pre-link compiler-rt so we don't have to include the entire library\n\nI don't think any of these will necessarily reap a large benefit.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/95994604/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97153515",
    "html_url": "https://github.com/rust-lang/rust/issues/24764#issuecomment-97153515",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24764",
    "id": 97153515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk3MTUzNTE1",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-28T17:57:14Z",
    "updated_at": "2015-04-28T17:57:14Z",
    "body": "Yup, closing as not exactly actionable. Improvements like Alex is talking about could be nice, but should probably be thier own tickets, rather than some sort of general heading, especially when it's not clear that they'll be a significant improvement.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97153515/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
