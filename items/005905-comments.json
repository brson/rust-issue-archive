[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16452644",
    "html_url": "https://github.com/rust-lang/rust/issues/5905#issuecomment-16452644",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/5905",
    "id": 16452644,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NDUyNjQ0",
    "user": {
      "login": "jbclements",
      "id": 226617,
      "node_id": "MDQ6VXNlcjIyNjYxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/226617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbclements",
      "html_url": "https://github.com/jbclements",
      "followers_url": "https://api.github.com/users/jbclements/followers",
      "following_url": "https://api.github.com/users/jbclements/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbclements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbclements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbclements/subscriptions",
      "organizations_url": "https://api.github.com/users/jbclements/orgs",
      "repos_url": "https://api.github.com/users/jbclements/repos",
      "events_url": "https://api.github.com/users/jbclements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbclements/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-04-16T15:47:53Z",
    "updated_at": "2013-04-16T15:47:53Z",
    "body": "Yes, I noticed this a few days ago as well. This is probably as good a place as any to conduct a very short review of the grammar for blocks that I'm observing in the parser.\n\nThe first thing to note is that like many languages, an expression may be used as a statement by putting a trailing semicolon after it. \n\nHowever, _unlike_ many languages, in Rust the term \"if true {3} else {4}\" is a legal expression. At the same time, Rust programmers would prefer not to have to put a semicolon after this expression to make it a statement.\n\nThis raises a potential ambiguity. Specifically, how should we parse\nif true {3} else {4} \n|a|a\n?\nIt could be parsed as an if statement followed by a closure, or as two uses of the or (|) operator.\n\nFinally, there's a Rust-ism (that I'm quite fond of) that allows a programmer to use a final expression as a return value, as long as it's not terminated by a semicolon.\n\nSo, here's what I've currently got:\n\n```\nfun_body : LBRACE inner_attr* block_element* block_last_element? RBRACE ;\nblock_element : expr_no_lhs_stmt (SEMI)+\n  | stmt_not_just_expr (SEMI)*\n  ;\n\n// a statement that is not parsed by the expr_no_lhs_stmt rule\nstmt_not_just_expr : let_stmt\n  | macro_expr\n  | mod_item\n  | expr_stmt\n  ;\n\nblock_last_element : expr_no_lhs_stmt | mac_expr | expr_stmt ;\n```\n\nSeveral definitions are omitted here. The 'expr-no-lhs-stmt' is a production that allows any expression _except_ one that begins with a complete statement, as e.g. ethe 'if' example above. The expr_stmt rule is one that only includes those forms. A mod_item is a \"module item\", e.g. a function declaration, structure declaration, etc.\n\nI'm not yet convinced that this grammar is correct or unambiguous. To address your concern, you'd probably want to change some of these rules, e.g. changing (SEMI+) into SEMI and (SEMI)\\* into /_nothing_/... but you'd want to allow an optional trailing semicolon before the RBRACE, to signal that an expression's value should not be returned.\n\nThoughts?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16452644/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20450637",
    "html_url": "https://github.com/rust-lang/rust/issues/5905#issuecomment-20450637",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/5905",
    "id": 20450637,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNDUwNjM3",
    "user": {
      "login": "toddaaro",
      "id": 366431,
      "node_id": "MDQ6VXNlcjM2NjQzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/366431?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toddaaro",
      "html_url": "https://github.com/toddaaro",
      "followers_url": "https://api.github.com/users/toddaaro/followers",
      "following_url": "https://api.github.com/users/toddaaro/following{/other_user}",
      "gists_url": "https://api.github.com/users/toddaaro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toddaaro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toddaaro/subscriptions",
      "organizations_url": "https://api.github.com/users/toddaaro/orgs",
      "repos_url": "https://api.github.com/users/toddaaro/repos",
      "events_url": "https://api.github.com/users/toddaaro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toddaaro/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-07-03T23:06:17Z",
    "updated_at": "2013-07-03T23:06:17Z",
    "body": "Nominating for backwards compatible. I personally think we shouldn't allow this - so I flagged it with wrong.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20450637/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20450848",
    "html_url": "https://github.com/rust-lang/rust/issues/5905#issuecomment-20450848",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/5905",
    "id": 20450848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNDUwODQ4",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-07-03T23:11:35Z",
    "updated_at": "2013-07-03T23:11:35Z",
    "body": "FWIW, being flexible with semicolons and commas makes writing macros easier.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20450848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20452895",
    "html_url": "https://github.com/rust-lang/rust/issues/5905#issuecomment-20452895",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/5905",
    "id": 20452895,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNDUyODk1",
    "user": {
      "login": "jbclements",
      "id": 226617,
      "node_id": "MDQ6VXNlcjIyNjYxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/226617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbclements",
      "html_url": "https://github.com/jbclements",
      "followers_url": "https://api.github.com/users/jbclements/followers",
      "following_url": "https://api.github.com/users/jbclements/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbclements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbclements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbclements/subscriptions",
      "organizations_url": "https://api.github.com/users/jbclements/orgs",
      "repos_url": "https://api.github.com/users/jbclements/repos",
      "events_url": "https://api.github.com/users/jbclements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbclements/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-07-04T00:18:14Z",
    "updated_at": "2013-07-04T00:18:14Z",
    "body": "+1 to @huonw ; this strikes me as relatively unlikely to be indicative of erroneous code. I'm not actually sure it'll help with macros, though; the expr/statement boundaries are fixed before macro expansion occurs.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20452895/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23107421",
    "html_url": "https://github.com/rust-lang/rust/issues/5905#issuecomment-23107421",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/5905",
    "id": 23107421,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMTA3NDIx",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-22T16:59:39Z",
    "updated_at": "2013-08-22T16:59:39Z",
    "body": "accepted for backwards-compatible milestone\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23107421/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26074117",
    "html_url": "https://github.com/rust-lang/rust/issues/5905#issuecomment-26074117",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/5905",
    "id": 26074117,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDc0MTE3",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-10T17:34:16Z",
    "updated_at": "2013-10-10T17:34:16Z",
    "body": "Wontfix for reasons stated by @huonw and @jbclements  - closing\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26074117/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
