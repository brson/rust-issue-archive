{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/27280",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/27280/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/27280/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/27280/events",
  "html_url": "https://github.com/rust-lang/rust/pull/27280",
  "id": 97215806,
  "node_id": "MDExOlB1bGxSZXF1ZXN0NDA4MzQ4NjM=",
  "number": 27280,
  "title": "Improve siphash performance for longer data",
  "user": {
    "login": "bluss",
    "id": 3209739,
    "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bluss",
    "html_url": "https://github.com/bluss",
    "followers_url": "https://api.github.com/users/bluss/followers",
    "following_url": "https://api.github.com/users/bluss/following{/other_user}",
    "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
    "organizations_url": "https://api.github.com/users/bluss/orgs",
    "repos_url": "https://api.github.com/users/bluss/repos",
    "events_url": "https://api.github.com/users/bluss/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bluss/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [
    {
      "id": 223796632,
      "node_id": "MDU6TGFiZWwyMjM3OTY2MzI=",
      "url": "https://api.github.com/repos/rust-lang/rust/labels/relnotes",
      "name": "relnotes",
      "color": "fad8c7",
      "default": false,
      "description": "Marks issues that should be documented in the release notes of the next release."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "aturon",
    "id": 709807,
    "node_id": "MDQ6VXNlcjcwOTgwNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aturon",
    "html_url": "https://github.com/aturon",
    "followers_url": "https://api.github.com/users/aturon/followers",
    "following_url": "https://api.github.com/users/aturon/following{/other_user}",
    "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
    "organizations_url": "https://api.github.com/users/aturon/orgs",
    "repos_url": "https://api.github.com/users/aturon/repos",
    "events_url": "https://api.github.com/users/aturon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aturon/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2015-07-25T10:25:59Z",
  "updated_at": "2015-08-04T01:51:47Z",
  "closed_at": "2015-07-28T07:15:00Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/27280",
    "html_url": "https://github.com/rust-lang/rust/pull/27280",
    "diff_url": "https://github.com/rust-lang/rust/pull/27280.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/27280.patch",
    "merged_at": "2015-07-28T07:15:00Z"
  },
  "body": "Improve siphash performance for longer data\n\nUse `ptr::copy_nonoverlapping` (aka memcpy) to load an u64 from the\nbyte stream. This is correct for any alignment, and the compiler will\nuse the appropriate instruction to load the data.\n\nAlso contains small tweaks that should benefit hashing short data too,\nboth the commit that removes a variable and the autovectorization of\nthe hash state initialization (in SipHash::reset).\n\nBenchmarks show that hashing longer data benefits for the improved word loading.\n\nBefore (using benchmarks from the first commit in the PR):\n\nThe before benchmark is a bit noisy.\n\n```\ntest hash::sip::bench_bytes_4                              ... bench:          41 ns/iter (+/- 0) = 97 MB/s\ntest hash::sip::bench_bytes_7                              ... bench:          49 ns/iter (+/- 2) = 142 MB/s\ntest hash::sip::bench_bytes_8                              ... bench:          42 ns/iter (+/- 4) = 190 MB/s\ntest hash::sip::bench_bytes_a_16                           ... bench:          57 ns/iter (+/- 14) = 280 MB/s\ntest hash::sip::bench_bytes_b_32                           ... bench:          85 ns/iter (+/- 74) = 376 MB/s\ntest hash::sip::bench_bytes_c_128                          ... bench:         278 ns/iter (+/- 33) = 460 MB/s\ntest hash::sip::bench_long_str                             ... bench:         825 ns/iter (+/- 103)\ntest hash::sip::bench_str_of_8_bytes                       ... bench:         151 ns/iter (+/- 66)\ntest hash::sip::bench_str_over_8_bytes                     ... bench:          59 ns/iter (+/- 3)\ntest hash::sip::bench_str_under_8_bytes                    ... bench:          47 ns/iter (+/- 56)\ntest hash::sip::bench_u32                                  ... bench:          39 ns/iter (+/- 93) = 205 MB/s\ntest hash::sip::bench_u32_keyed                            ... bench:          40 ns/iter (+/- 88) = 200 MB/s\ntest hash::sip::bench_u64                                  ... bench:          54 ns/iter (+/- 96) = 148 MB/s\n```\n\nAfter:\n\n```\ntest hash::sip::bench_bytes_4                              ... bench:          41 ns/iter (+/- 3) = 97 MB/s\ntest hash::sip::bench_bytes_7                              ... bench:          48 ns/iter (+/- 0) = 145 MB/s\ntest hash::sip::bench_bytes_8                              ... bench:          35 ns/iter (+/- 1) = 228 MB/s\ntest hash::sip::bench_bytes_a_16                           ... bench:          45 ns/iter (+/- 1) = 355 MB/s\ntest hash::sip::bench_bytes_b_32                           ... bench:          60 ns/iter (+/- 0) = 533 MB/s\ntest hash::sip::bench_bytes_c_128                          ... bench:         161 ns/iter (+/- 5) = 795 MB/s\ntest hash::sip::bench_long_str                             ... bench:         514 ns/iter (+/- 5)\ntest hash::sip::bench_str_of_8_bytes                       ... bench:          44 ns/iter (+/- 0)\ntest hash::sip::bench_str_over_8_bytes                     ... bench:          51 ns/iter (+/- 0)\ntest hash::sip::bench_str_under_8_bytes                    ... bench:          52 ns/iter (+/- 6)\ntest hash::sip::bench_u32                                  ... bench:          40 ns/iter (+/- 2) = 200 MB/s\ntest hash::sip::bench_u32_keyed                            ... bench:          39 ns/iter (+/- 1) = 205 MB/s\ntest hash::sip::bench_u64                                  ... bench:          36 ns/iter (+/- 1) = 222 MB/s\n```\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/27280/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/27280/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
