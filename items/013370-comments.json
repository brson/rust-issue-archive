[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39695629",
    "html_url": "https://github.com/rust-lang/rust/issues/13370#issuecomment-39695629",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13370",
    "id": 39695629,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njk1NjI5",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-07T04:38:12Z",
    "updated_at": "2014-04-07T04:38:12Z",
    "body": "This is very unfortunate. cc @Aatch @luqmana \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39695629/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/94593166",
    "html_url": "https://github.com/rust-lang/rust/issues/13370#issuecomment-94593166",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13370",
    "id": 94593166,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk0NTkzMTY2",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-20T23:40:56Z",
    "updated_at": "2015-04-20T23:40:56Z",
    "body": "Triage: appears to be the same today.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/94593166/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/263676794",
    "html_url": "https://github.com/rust-lang/rust/issues/13370#issuecomment-263676794",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13370",
    "id": 263676794,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzY3Njc5NA==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-29T19:43:21Z",
    "updated_at": "2016-11-29T19:43:21Z",
    "body": "Triage:  https://is.gd/aLBo9e reproduces.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/263676794/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/429501573",
    "html_url": "https://github.com/rust-lang/rust/issues/13370#issuecomment-429501573",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13370",
    "id": 429501573,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTUwMTU3Mw==",
    "user": {
      "login": "AstralSorceress",
      "id": 8902883,
      "node_id": "MDQ6VXNlcjg5MDI4ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8902883?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AstralSorceress",
      "html_url": "https://github.com/AstralSorceress",
      "followers_url": "https://api.github.com/users/AstralSorceress/followers",
      "following_url": "https://api.github.com/users/AstralSorceress/following{/other_user}",
      "gists_url": "https://api.github.com/users/AstralSorceress/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AstralSorceress/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AstralSorceress/subscriptions",
      "organizations_url": "https://api.github.com/users/AstralSorceress/orgs",
      "repos_url": "https://api.github.com/users/AstralSorceress/repos",
      "events_url": "https://api.github.com/users/AstralSorceress/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AstralSorceress/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-10-13T01:46:34Z",
    "updated_at": "2018-10-13T01:46:34Z",
    "body": "It seems that LLVM does in fact index into the clobber list. If a clobber is specified, the errant operand will change to whatever was specified first in the clobber list. For example:\r\n```\r\n#![feature(asm)]\r\n\r\nfn main() {\r\n    unsafe {\r\n        asm!(\"xor $1, %rax\" :: \"r\"(0) : \"xmm0\");\r\n    }\r\n}\r\n```\r\nwill change the error to\r\n```\r\nerror: <inline asm>:1:2: error: unknown use of instruction mnemonic without a size suffix\r\n        xor %xmm0, %rax\r\n        ^\r\n```\r\nand if the clobber list is changed  to `\"rbx\"`, the program compiles without issue.\r\n\r\nAlso of note is that an out-of-bounds index will cause a compiler crash:\r\n`asm!(\"xor $2, %rax\" :: \"r\"(0));` will result in\r\n```\r\n   Compiling playground v0.0.1 (/playground)\r\nthread '<unnamed>' panicked at 'called `Option::unwrap()` on a `None` value', libcore/option.rs:355:21\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\nstack backtrace:\r\n   0: std::sys::unix::backtrace::tracing::imp::unwind_backtrace\r\n             at libstd/sys/unix/backtrace/tracing/gcc_s.rs:49\r\n   1: std::sys_common::backtrace::print\r\n             at libstd/sys_common/backtrace.rs:71\r\n             at libstd/sys_common/backtrace.rs:59\r\n   2: std::panicking::default_hook::{{closure}}\r\n             at libstd/panicking.rs:211\r\n   3: std::panicking::default_hook\r\n             at libstd/panicking.rs:227\r\n   4: rustc::util::common::panic_hook\r\n   5: std::panicking::rust_panic_with_hook\r\n             at libstd/panicking.rs:480\r\n   6: std::panicking::continue_panic_fmt\r\n             at libstd/panicking.rs:390\r\n   7: rust_begin_unwind\r\n             at libstd/panicking.rs:325\r\n   8: core::panicking::panic_fmt\r\n             at libcore/panicking.rs:77\r\n   9: core::panicking::panic\r\n             at libcore/panicking.rs:52\r\n  10: rustc_codegen_llvm::llvm::diagnostic::Diagnostic::unpack\r\n  11: rustc_codegen_llvm::back::write::diagnostic_handler\r\n  12: _ZN4llvm17DiagnosticHandler17handleDiagnosticsERKNS_14DiagnosticInfoE\r\n  13: _ZN4llvm11LLVMContext8diagnoseERKNS_14DiagnosticInfoE\r\n  14: _ZNK4llvm10AsmPrinter13EmitInlineAsmEPKNS_12MachineInstrE\r\n  15: _ZN4llvm10AsmPrinter16EmitFunctionBodyEv\r\n  16: _ZN4llvm13X86AsmPrinter20runOnMachineFunctionERNS_15MachineFunctionE\r\n  17: _ZN4llvm19MachineFunctionPass13runOnFunctionERNS_8FunctionE\r\n  18: _ZN4llvm13FPPassManager13runOnFunctionERNS_8FunctionE\r\n  19: _ZN4llvm13FPPassManager11runOnModuleERNS_6ModuleE\r\n  20: _ZN4llvm6legacy15PassManagerImpl3runERNS_6ModuleE\r\n  21: LLVMRustWriteOutputFile\r\n  22: rustc_codegen_llvm::back::write::write_output_file\r\n  23: rustc_codegen_llvm::back::write::codegen::{{closure}}\r\n  24: rustc::util::common::time_ext\r\n  25: rustc_codegen_llvm::back::write::codegen\r\n  26: rustc_codegen_llvm::back::write::execute_work_item\r\nquery stack during panic:\r\nend of query stack\r\nerror: aborting due to worker thread failure\r\n\r\nerror: aborting due to previous error\r\n\r\nerror: Could not compile `playground`.\r\n\r\nTo learn more, run the command again with --verbose.\r\n```\r\nI'm thinking about writing a patch to just check that all indices are in bounds before giving the asm template string to LLVM.\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/429501573/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/632864105",
    "html_url": "https://github.com/rust-lang/rust/issues/13370#issuecomment-632864105",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13370",
    "id": 632864105,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMjg2NDEwNQ==",
    "user": {
      "login": "Amanieu",
      "id": 278509,
      "node_id": "MDQ6VXNlcjI3ODUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amanieu",
      "html_url": "https://github.com/Amanieu",
      "followers_url": "https://api.github.com/users/Amanieu/followers",
      "following_url": "https://api.github.com/users/Amanieu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions",
      "organizations_url": "https://api.github.com/users/Amanieu/orgs",
      "repos_url": "https://api.github.com/users/Amanieu/repos",
      "events_url": "https://api.github.com/users/Amanieu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amanieu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-05-22T19:07:00Z",
    "updated_at": "2020-05-22T19:07:00Z",
    "body": "This issue does not apply to the new `asm!` ([RFC 2850](https://github.com/rust-lang/rfcs/pull/2850)) which validates the asm template string.\r\n\r\nThe legacy `llvm_asm!` is deprecated and is no longer maintained.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/632864105/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
