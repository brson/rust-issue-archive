[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68804403",
    "html_url": "https://github.com/rust-lang/rust/pull/20601#issuecomment-68804403",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20601",
    "id": 68804403,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODA0NDAz",
    "user": {
      "login": "rust-highfive",
      "id": 7378925,
      "node_id": "MDQ6VXNlcjczNzg5MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7378925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rust-highfive",
      "html_url": "https://github.com/rust-highfive",
      "followers_url": "https://api.github.com/users/rust-highfive/followers",
      "following_url": "https://api.github.com/users/rust-highfive/following{/other_user}",
      "gists_url": "https://api.github.com/users/rust-highfive/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rust-highfive/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rust-highfive/subscriptions",
      "organizations_url": "https://api.github.com/users/rust-highfive/orgs",
      "repos_url": "https://api.github.com/users/rust-highfive/repos",
      "events_url": "https://api.github.com/users/rust-highfive/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rust-highfive/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-05T23:57:23Z",
    "updated_at": "2015-01-05T23:57:23Z",
    "body": "r? @brson\n\n(rust_highfive has picked a reviewer for you, use r? to override)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68804403/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68805897",
    "html_url": "https://github.com/rust-lang/rust/pull/20601#issuecomment-68805897",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20601",
    "id": 68805897,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODA1ODk3",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-06T00:12:14Z",
    "updated_at": "2015-01-06T00:12:14Z",
    "body": "Some previous discussion: http://discuss.rust-lang.org/t/maps-sets-and-the-value-of-keys/532\n\nThe overwhelming sentiment I've received is that keys are not sufficiently interesting (most collections APIs I've seen ignore them). \n\nThat said, LruCache (which has been moved to collect-rs), is largely just a LinkedHashMap implementation; why doesn't what it does work for you?\n\nCC @aturon \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68805897/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68807104",
    "html_url": "https://github.com/rust-lang/rust/pull/20601#issuecomment-68807104",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20601",
    "id": 68807104,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODA3MTA0",
    "user": {
      "login": "stepancheg",
      "id": 28969,
      "node_id": "MDQ6VXNlcjI4OTY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/28969?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stepancheg",
      "html_url": "https://github.com/stepancheg",
      "followers_url": "https://api.github.com/users/stepancheg/followers",
      "following_url": "https://api.github.com/users/stepancheg/following{/other_user}",
      "gists_url": "https://api.github.com/users/stepancheg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stepancheg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stepancheg/subscriptions",
      "organizations_url": "https://api.github.com/users/stepancheg/orgs",
      "repos_url": "https://api.github.com/users/stepancheg/repos",
      "events_url": "https://api.github.com/users/stepancheg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stepancheg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-06T00:25:29Z",
    "updated_at": "2015-01-06T00:28:53Z",
    "body": "@Gankro yes, `LruCache` is almost what I need. Thanks. I think `LinkedHashMap` can be extracted from `LruCache`, and `LruCache` made a thin wrapper of `LinkedHashMap`.\n\nAnyway, `remove_entry` allows slightly more efficient implementation of `LruCache`: `map` field could be just `map: HashMap<Box<LruEntry<K, V>>, ()>`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68807104/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68807396",
    "html_url": "https://github.com/rust-lang/rust/pull/20601#issuecomment-68807396",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20601",
    "id": 68807396,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODA3Mzk2",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-06T00:28:57Z",
    "updated_at": "2015-01-06T00:28:57Z",
    "body": "I'd be interested to see actual performance numbers, if possible.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68807396/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68808983",
    "html_url": "https://github.com/rust-lang/rust/pull/20601#issuecomment-68808983",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20601",
    "id": 68808983,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODA4OTgz",
    "user": {
      "login": "stepancheg",
      "id": 28969,
      "node_id": "MDQ6VXNlcjI4OTY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/28969?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stepancheg",
      "html_url": "https://github.com/stepancheg",
      "followers_url": "https://api.github.com/users/stepancheg/followers",
      "following_url": "https://api.github.com/users/stepancheg/following{/other_user}",
      "gists_url": "https://api.github.com/users/stepancheg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stepancheg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stepancheg/subscriptions",
      "organizations_url": "https://api.github.com/users/stepancheg/orgs",
      "repos_url": "https://api.github.com/users/stepancheg/repos",
      "events_url": "https://api.github.com/users/stepancheg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stepancheg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-06T00:45:23Z",
    "updated_at": "2015-01-06T00:46:09Z",
    "body": "@Gankro I doubt LruCache with `remove_entry` would be significantly faster, but it would occupy less space.\n\nMy speculation:\n\nAssuming `LruCache` of type `<u32, u32>`.\nSize of `LruEntry` is 8+8+4+4 = 24.\nSize of `Box<LruEntry>` is 24 + malloc overhead + size of pointer = 40 bytes.\nSize of `KeyRef` is 8.\nSize of entry in hashtable is size of key + size of value + size of hash = 8 + 40 + 8 = 56 bytes.\n\nWhen there's no `KeyRef,` size of entry in hashtable would be: 40 + 8 = 48 bytes.\n\nAlso, note, that hash map load factor is 90%.\n\nSo with `remove_key` LruCache would occupy about 10% less space.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68808983/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68935576",
    "html_url": "https://github.com/rust-lang/rust/pull/20601#issuecomment-68935576",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20601",
    "id": 68935576,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTM1NTc2",
    "user": {
      "login": "frankmcsherry",
      "id": 5741500,
      "node_id": "MDQ6VXNlcjU3NDE1MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5741500?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frankmcsherry",
      "html_url": "https://github.com/frankmcsherry",
      "followers_url": "https://api.github.com/users/frankmcsherry/followers",
      "following_url": "https://api.github.com/users/frankmcsherry/following{/other_user}",
      "gists_url": "https://api.github.com/users/frankmcsherry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frankmcsherry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frankmcsherry/subscriptions",
      "organizations_url": "https://api.github.com/users/frankmcsherry/orgs",
      "repos_url": "https://api.github.com/users/frankmcsherry/repos",
      "events_url": "https://api.github.com/users/frankmcsherry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frankmcsherry/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-06T21:19:19Z",
    "updated_at": "2015-01-06T21:22:28Z",
    "body": "Just going to comment that, unless I misunderstand, another use case is when the keys are basically identical, but contain owned resources. If I have a Vec<T> in my key (I do, some times), I'd may need to recover that Vec<T> when I remove the entry. I could just clone the key that I used, of course, so it's not the end of the world, but it is a bit silly that the HashMap is just sitting on exactly the resources I need. By \"silly\" I mean \"involves a conversation with the allocator\". :)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68935576/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70693102",
    "html_url": "https://github.com/rust-lang/rust/pull/20601#issuecomment-70693102",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20601",
    "id": 70693102,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjkzMTAy",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-20T17:16:44Z",
    "updated_at": "2015-01-20T17:16:44Z",
    "body": "Closing due to inactivity, but feel free to reopen with a rebase!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70693102/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
