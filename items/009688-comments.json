[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25586907",
    "html_url": "https://github.com/rust-lang/rust/pull/9688#issuecomment-25586907",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9688",
    "id": 25586907,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTg2OTA3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-02T23:47:54Z",
    "updated_at": "2013-10-02T23:47:54Z",
    "body": "Are we sure that we want this? `&mut` provides stronger guarantees about how something is being accessed than `&` does, and it also expresses more of an interest about what the method is probably doing. I would expect a function like `write` to take `&mut self` because it's most likely mutating internal state. Especially for a function returning `&mut` I would expect the receiver to be `&mut self` as well.\n\nI would consider it more of an implementation bug that all these structures are implicitly copyable and hence the `&mut` guarantees don't' mean a whole lot. By dropping `&mut` in as many places as possible, we're limiting ourselves to possible future implementations.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25586907/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25615314",
    "html_url": "https://github.com/rust-lang/rust/pull/9688#issuecomment-25615314",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9688",
    "id": 25615314,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NjE1MzE0",
    "user": {
      "login": "flaper87",
      "id": 13816,
      "node_id": "MDQ6VXNlcjEzODE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/13816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flaper87",
      "html_url": "https://github.com/flaper87",
      "followers_url": "https://api.github.com/users/flaper87/followers",
      "following_url": "https://api.github.com/users/flaper87/following{/other_user}",
      "gists_url": "https://api.github.com/users/flaper87/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flaper87/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flaper87/subscriptions",
      "organizations_url": "https://api.github.com/users/flaper87/orgs",
      "repos_url": "https://api.github.com/users/flaper87/repos",
      "events_url": "https://api.github.com/users/flaper87/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flaper87/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-03T12:12:54Z",
    "updated_at": "2013-10-03T12:12:54Z",
    "body": "I'm not that convinced about some of this methods needing to be `&mut` however, I agree that it may make sense to keep some of this as they are. However, I'd also like us to consider that must of these implementations required `&mut` just because `WatcherInterop` API required it - although it actually didn't need it to be mutable. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25615314/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25656648",
    "html_url": "https://github.com/rust-lang/rust/pull/9688#issuecomment-25656648",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9688",
    "id": 25656648,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NjU2NjQ4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-03T20:47:06Z",
    "updated_at": "2013-10-03T20:47:06Z",
    "body": "The three methods that are currently `&mut` are:\n- `fn install_watcher_data(&mut self)` - this makes sense to me to take `&mut` because you're modifying the receiver, you're installing data.\n- `fn get_watcher_data<'r>(&'r mut self) -> &'r mut WatcherData` - this needs the `&mut` because you're returning an interior `&mut` pointer\n- `fn drop_watcher_data(&mut self)` - similarly to installation, you're modifying the structure by dropping data, which makes sense to me to get `&mut`\n\nThis is a trait to implement, so the trait shouldn't expose implementation details. It may be the case that the implementation uses all unsafe pointer with a C api that completely disregards mutability, but the traits themselves should reflect the intention of the methods rather than the implementation details themselves.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25656648/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25699906",
    "html_url": "https://github.com/rust-lang/rust/pull/9688#issuecomment-25699906",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9688",
    "id": 25699906,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1Njk5OTA2",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-04T13:52:32Z",
    "updated_at": "2013-10-04T13:52:32Z",
    "body": "In general, methods on uv wrappers take &mut even though the type system would allow them not to because natively they are performing some sort of mutation. The FFI isn't smart enough to know that these methods actually are mutating, so it's up to the discretion of the bindings to make sure that mutability is propagated correctly. So this is as intended.\n\nI imagine that there are actually more methods taking `&self`that should rather be taking `&mut self`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25699906/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
