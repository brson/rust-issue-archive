[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71304090",
    "html_url": "https://github.com/rust-lang/rust/issues/21493#issuecomment-71304090",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21493",
    "id": 71304090,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzA0MDkw",
    "user": {
      "login": "dcampbell24",
      "id": 87889,
      "node_id": "MDQ6VXNlcjg3ODg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/87889?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dcampbell24",
      "html_url": "https://github.com/dcampbell24",
      "followers_url": "https://api.github.com/users/dcampbell24/followers",
      "following_url": "https://api.github.com/users/dcampbell24/following{/other_user}",
      "gists_url": "https://api.github.com/users/dcampbell24/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dcampbell24/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dcampbell24/subscriptions",
      "organizations_url": "https://api.github.com/users/dcampbell24/orgs",
      "repos_url": "https://api.github.com/users/dcampbell24/repos",
      "events_url": "https://api.github.com/users/dcampbell24/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dcampbell24/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-24T07:39:00Z",
    "updated_at": "2015-01-24T07:39:00Z",
    "body": "My understanding of what is happening in this example is that when zero is passed as `0` the type system infers that it should have type `isize` and makes is so, but when the number is explicitly given as having some other type, the type system complains because it expected an expression with type `isize`.\n\nThus, the discriminant `0 as i32` fails with the same error message, but if the enum is given the attribute `#[repr(i32)]`, then there is no compilation error.\n\nIn conclusion, the error message could be improved and I don't understand why if no explicit size for the enum is given, an `isize` discriminant is expected. This is especially confusing given that the size is actually being chosen by the compiler and could be as small as 1 byte.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71304090/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153779956",
    "html_url": "https://github.com/rust-lang/rust/issues/21493#issuecomment-153779956",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21493",
    "id": 153779956,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1Mzc3OTk1Ng==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-04T16:16:41Z",
    "updated_at": "2015-11-04T16:16:41Z",
    "body": "/cc @rust-lang/lang \n\nI think the reason here is that integer falllback constraints works for the literal, so I'm not sure this is actually a bug. \n\n> but if the enum is given the attribute #[repr(i32)], then there is no compilation error.\n\nThis now gives an error\n\n> unsupported representation for univariant enum [E0083]\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153779956/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153830684",
    "html_url": "https://github.com/rust-lang/rust/issues/21493#issuecomment-153830684",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21493",
    "id": 153830684,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MzgzMDY4NA==",
    "user": {
      "login": "nrc",
      "id": 762626,
      "node_id": "MDQ6VXNlcjc2MjYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nrc",
      "html_url": "https://github.com/nrc",
      "followers_url": "https://api.github.com/users/nrc/followers",
      "following_url": "https://api.github.com/users/nrc/following{/other_user}",
      "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nrc/subscriptions",
      "organizations_url": "https://api.github.com/users/nrc/orgs",
      "repos_url": "https://api.github.com/users/nrc/repos",
      "events_url": "https://api.github.com/users/nrc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nrc/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-04T18:58:56Z",
    "updated_at": "2015-11-04T18:58:56Z",
    "body": "As far as I can see there is no bug here - if you don't specify the type, we infer the right one, if you specify the wrong type, there is a type error. Sounds like we even give a nicer error now.\n\nThe only question is should we infer the discriminant type from the literal types, and that sounds like a bad idea to me. Suggest this can be closed.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153830684/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153838877",
    "html_url": "https://github.com/rust-lang/rust/issues/21493#issuecomment-153838877",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21493",
    "id": 153838877,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MzgzODg3Nw==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-04T19:29:43Z",
    "updated_at": "2015-11-04T19:30:02Z",
    "body": "So I think it makes sense that the integer value used for the discriminant must have _SOME_ type. We seem to have selected `isize` unless you tell us another one; this seems like an OK choice. There is an argument for `i32` as well, but there isn't much of a difference. This is particularly true since the **actual space** required by the enum is still a function of the domain of values you use: see e.g. http://is.gd/kQGjNu. So you can always do `ZERO as isize` to make your code compile (or `#[repr(i32)]`).\n\nI don't think we can (or should) use the domain of values to pick the required type, since there is kind of a chicken and egg problem. (We have to type the expressions in order to evaluate them, particularly because of overflow semantics, but we can't type them until we know the answers.)\n\nAlso: the error message for using a `#[repr]` on a univariant enum is a bug, but it is https://github.com/rust-lang/rust/issues/10292.\n\nSo I guess my feeling is \"not a bug\".\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153838877/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153888296",
    "html_url": "https://github.com/rust-lang/rust/issues/21493#issuecomment-153888296",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21493",
    "id": 153888296,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1Mzg4ODI5Ng==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-04T22:23:52Z",
    "updated_at": "2015-11-04T22:23:52Z",
    "body": "Three of us in a row with \"not a bug\", so I'll close. @dcampbell24 , it's been a long time since you opened this, but let me know if you disagree.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153888296/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
