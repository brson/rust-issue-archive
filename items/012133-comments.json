[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34583206",
    "html_url": "https://github.com/rust-lang/rust/issues/12133#issuecomment-34583206",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12133",
    "id": 34583206,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTgzMjA2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-09T19:21:44Z",
    "updated_at": "2014-02-09T19:21:44Z",
    "body": "The underlying cause of this behavior is the `prefer-dynamic` flag to `rustc`. When rustdoc is compiling tests, it flags the `prefer-dynamic` option because the binaries generated have no need to be many megabytes in size.\n\nWhen specified, the linking portion of the compiler will refuse to even look for `rlibs` if you specified that you wanted dynamic linking. The problem is that `compress` is an rlib and there's no dylib for it, so linking is failing as a dynamic version (as requested) can't be found for `libcompress`.\n\nThere are a few ways to go about this:\n1. Close as WONTFIX and leave the behavior as-is.\n2. Change prefer-dynamic to fall back on rlib linking. This may catch some people by surprise, but it would possibly fix the error.\n3. Leave the behavior as-is and implement better error messages suggesting what to do. The linking stage knows that there's an rlib available (it found it already) and it's mostly just ignoring that with respect to the error message.\n\nI would personally vote for option 3, what do others think?\n\nI'm also changing the title to reflect the prefer-dynamic bug here.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34583206/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34583546",
    "html_url": "https://github.com/rust-lang/rust/issues/12133#issuecomment-34583546",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12133",
    "id": 34583546,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTgzNTQ2",
    "user": {
      "login": "kvark",
      "id": 107301,
      "node_id": "MDQ6VXNlcjEwNzMwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/107301?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kvark",
      "html_url": "https://github.com/kvark",
      "followers_url": "https://api.github.com/users/kvark/followers",
      "following_url": "https://api.github.com/users/kvark/following{/other_user}",
      "gists_url": "https://api.github.com/users/kvark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kvark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kvark/subscriptions",
      "organizations_url": "https://api.github.com/users/kvark/orgs",
      "repos_url": "https://api.github.com/users/kvark/repos",
      "events_url": "https://api.github.com/users/kvark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kvark/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-09T19:34:38Z",
    "updated_at": "2014-02-09T19:34:38Z",
    "body": "Thanks Alex. I see it in your Travis CI log now:\n`rustc --crate-type=dylib lib.rs`\nAs for your ways to solve it, I'd be fine with either 2 or 3. However, `prefer-dynamic` flag suggests that it's just a preference, but not the only choice. If you want the behavior to remain the same (i.e. failing to link), you should probably rename it to `use-dynamic` or something.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34583546/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
