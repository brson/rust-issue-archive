[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165911089",
    "html_url": "https://github.com/rust-lang/rust/issues/24479#issuecomment-165911089",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24479",
    "id": 165911089,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTkxMTA4OQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-18T22:26:04Z",
    "updated_at": "2015-12-18T22:26:04Z",
    "body": "Triage: no change in behavior here.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165911089/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/524272404",
    "html_url": "https://github.com/rust-lang/rust/issues/24479#issuecomment-524272404",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24479",
    "id": 524272404,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNDI3MjQwNA==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-08-23T11:00:58Z",
    "updated_at": "2019-08-23T11:00:58Z",
    "body": "It would be nice if this was a clean and intentional abort, which would probably be achieved whenever we make `extern \"C\"` functions abort to avoid UB (but we can do it sooner manually).\r\n\r\nThe `fatal runtime error: Could not unwind stack, error = 5` message could lean one to believe this is some sort of bug elsewhere (i.e. in the implementation of panics).\r\n\r\nFor example, in https://github.com/rust-lang/rust/issues/63804#issuecomment-523973998 I noticed that the message doesn't have anything to do with the way proc macros and libstd('s panic runtime) interact, which is what I initially assumed.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/524272404/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/766453022",
    "html_url": "https://github.com/rust-lang/rust/issues/24479#issuecomment-766453022",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24479",
    "id": 766453022,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2NjQ1MzAyMg==",
    "user": {
      "login": "andersk",
      "id": 26471,
      "node_id": "MDQ6VXNlcjI2NDcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/26471?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/andersk",
      "html_url": "https://github.com/andersk",
      "followers_url": "https://api.github.com/users/andersk/followers",
      "following_url": "https://api.github.com/users/andersk/following{/other_user}",
      "gists_url": "https://api.github.com/users/andersk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/andersk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andersk/subscriptions",
      "organizations_url": "https://api.github.com/users/andersk/orgs",
      "repos_url": "https://api.github.com/users/andersk/repos",
      "events_url": "https://api.github.com/users/andersk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/andersk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-01-24T22:45:51Z",
    "updated_at": "2021-01-25T03:16:11Z",
    "body": "An especially bad side effect is that, when this happens in a test, the test doesn\u2019t always fail.\r\n\r\n```rust\r\nstruct Foo;\r\n\r\nimpl Drop for Foo {\r\n    fn drop(&mut self) {\r\n        panic!()\r\n    }\r\n}\r\n\r\nthread_local!(static FOO: Foo = Foo);\r\n\r\n#[test]\r\npub fn test() {\r\n    FOO.with(|_| {});\r\n}\r\n```\r\n\r\n```console\r\n$ cargo test\r\n    Finished test [unoptimized + debuginfo] target(s) in 0.00s\r\n     Running target/debug/deps/panicking_test-85130fa46b54f758\r\n\r\nrunning 1 test\r\nthread 'test test ... test' panicked at 'explicit panic', src/main.rs:5:9\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\nok\r\n\r\ntest result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\r\n\r\nfatal runtime error: failed to initiate panic, error 5\r\n\r\n$ echo $?\r\n0\r\n```\r\n\r\nThe exit status of `cargo test` is either 0 or 101 nondeterministically, and seems to be more likely to be 0 in a large project, which means that the bug that caused this panic can easily remain uncaught.\r\n\r\nEdit: This turns out to be an independent problem, due to libtest failing to actually wait for its test threads to exit; I opened a PR as #81367.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/766453022/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  }
]
