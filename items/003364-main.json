{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/3364",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/3364/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/3364/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/3364/events",
  "html_url": "https://github.com/rust-lang/rust/pull/3364",
  "id": 6619993,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MjIzMzU1NA==",
  "number": 3364,
  "title": "fix str::eq_slice off-by-one error",
  "user": {
    "login": "ghost",
    "id": 10137,
    "node_id": "MDQ6VXNlcjEwMTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ghost",
    "html_url": "https://github.com/ghost",
    "followers_url": "https://api.github.com/users/ghost/followers",
    "following_url": "https://api.github.com/users/ghost/following{/other_user}",
    "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
    "organizations_url": "https://api.github.com/users/ghost/orgs",
    "repos_url": "https://api.github.com/users/ghost/repos",
    "events_url": "https://api.github.com/users/ghost/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ghost/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 1,
  "created_at": "2012-09-03T17:21:52Z",
  "updated_at": "2014-07-28T01:48:30Z",
  "closed_at": "2012-09-03T17:37:06Z",
  "author_association": "NONE",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/3364",
    "html_url": "https://github.com/rust-lang/rust/pull/3364",
    "diff_url": "https://github.com/rust-lang/rust/pull/3364.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/3364.patch",
    "merged_at": null
  },
  "body": "The new `memcmp`-based implementation of `str::eq_slice` (54a8d69c4feb878e0367cc55772c04ee2d59c8a5) uses `str::as_buf`, which, according to its documentation, passes one more than the real length of the string in order to facilitate null-terminator checks. `eq_slice` doesn't take this into account, and compares the next byte beyond the ends of the slices it is given. For full strings, this is the null terminator, but for slices in the middle of a string, this is whatever the next UTF-8 byte is.\n\nTherefore, code like `assert str::view(\"foobar\", 0, 3) == \"foo\";` fails.\n\nThis fix simply subtracts one from the length yielded by `as_buf` in order to compensate for this.\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/3364/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/3364/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
