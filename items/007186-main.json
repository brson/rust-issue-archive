{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/7186",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/7186/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/7186/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/7186/events",
  "html_url": "https://github.com/rust-lang/rust/pull/7186",
  "id": 15606996,
  "node_id": "MDExOlB1bGxSZXF1ZXN0NjM0NzU0MA==",
  "number": 7186,
  "title": "Avoid quadratic growth of cleanup blocks",
  "user": {
    "login": "dotdash",
    "id": 230962,
    "node_id": "MDQ6VXNlcjIzMDk2Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dotdash",
    "html_url": "https://github.com/dotdash",
    "followers_url": "https://api.github.com/users/dotdash/followers",
    "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
    "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
    "organizations_url": "https://api.github.com/users/dotdash/orgs",
    "repos_url": "https://api.github.com/users/dotdash/repos",
    "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dotdash/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2013-06-16T16:12:33Z",
  "updated_at": "2014-06-13T11:07:38Z",
  "closed_at": "2013-06-16T19:39:56Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/7186",
    "html_url": "https://github.com/rust-lang/rust/pull/7186",
    "diff_url": "https://github.com/rust-lang/rust/pull/7186.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/7186.patch",
    "merged_at": null
  },
  "body": "Currently, cleanup blocks are only reused when there are nested scopes, the\nchild scope's cleanup block will terminate with a jump to the parent\nscope's cleanup block. But within a single scope, adding or revoking\nany cleanup will force a fresh cleanup block. This means quadratic\ngrowth with the number of allocations in a scope, because each\nallocation needs a landing pad.\n\nInstead of forcing a fresh cleanup block, we can keep a list chained\ncleanup blocks that form a prefix of the currently required cleanups.\nThat way, the next cleanup block only has to handle newly added\ncleanups. And by keeping the whole list instead of just the latest\nblock, we can also handle revocations more efficiently, by only\ndropping those blocks that are no longer required, instead of all of\nthem.\n\nReduces the size of librustc by about 5% and the time required to build\nit by about 10%.\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/7186/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/7186/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
