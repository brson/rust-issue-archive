[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43285250",
    "html_url": "https://github.com/rust-lang/rust/pull/14241#issuecomment-43285250",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14241",
    "id": 43285250,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjg1MjUw",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T01:15:01Z",
    "updated_at": "2014-05-16T01:15:01Z",
    "body": "In IRC today I was strongly opposed to this lint. Thinking on it again, I can see why you might want to turn it on only for specific functions (as opposed to turning it on for a full module/crate, where I think it's overly broad and therefore useless).\n\nBut once you start considering turning this on for specific functions, it seems like a poor man's way of trying to make the function pure. Except it's not good enough for that, because it doesn't handle `unsafe` mutability (such as touching `static mut` variables), or explicit `&mut` mutability. Perhaps we would be better served by actually trying to re-introduce the idea of a `pure` function, which is not allowed to touch global state or mutate any of its arguments (either by taking `&mut` or by using internal mutability).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43285250/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43285432",
    "html_url": "https://github.com/rust-lang/rust/pull/14241#issuecomment-43285432",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14241",
    "id": 43285432,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjg1NDMy",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T01:17:54Z",
    "updated_at": "2014-05-16T01:17:54Z",
    "body": "I think a reasonable usecase for this is turning it on for a library like `libcollections`, where they should be (for the most part) straightforward owned types. This will stop accidental/\"lazy\" use of `Cell` etc.\n\n(If there something in that library that absolutely needs internal mutability, then it can turned on just for that type/module.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43285432/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43285483",
    "html_url": "https://github.com/rust-lang/rust/pull/14241#issuecomment-43285483",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14241",
    "id": 43285483,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjg1NDgz",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T01:18:43Z",
    "updated_at": "2014-05-16T01:18:43Z",
    "body": "It's easy to remove a lint without breaking backwards compatibility (make it a no-op + warn) so I don't think there's harm in trying it. It might turn out to be useful because it's too restrictive and has too many false positives, but I don't think we'll ever find out if we don't try.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43285483/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43285555",
    "html_url": "https://github.com/rust-lang/rust/pull/14241#issuecomment-43285555",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14241",
    "id": 43285555,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjg1NTU1",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T01:19:51Z",
    "updated_at": "2014-05-16T01:19:51Z",
    "body": "@alexcrichton You tend to be a very slippery-slope kind of guy. What's your thought on the idea of just adding a lint to try it out?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43285555/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43285652",
    "html_url": "https://github.com/rust-lang/rust/pull/14241#issuecomment-43285652",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14241",
    "id": 43285652,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjg1NjUy",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T01:21:12Z",
    "updated_at": "2014-05-16T01:21:12Z",
    "body": "@huonw What would be the actual benefit of turning it on for something like `libcollections`? I don't see `Cell` as being a \"lazy\" thing to use. The only way to use it lazily is to not bother designing your API properly, and then realize you want mutation in a `&self` method, and opting to use `Cell` rather than go back to the API design board. But our libraries aren't built that way.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43285652/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43285753",
    "html_url": "https://github.com/rust-lang/rust/pull/14241#issuecomment-43285753",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14241",
    "id": 43285753,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjg1NzUz",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T01:22:43Z",
    "updated_at": "2014-05-16T01:22:43Z",
    "body": "Yes, it's to force people to design their APIs properly (or at least think about them) when adding new data structures.\n\n---\n\nI've had to get the compiler to record ReachesUnsafe in addition to its current recording of InteriorUnsafe. cc @nikomatsakis \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43285753/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43290707",
    "html_url": "https://github.com/rust-lang/rust/pull/14241#issuecomment-43290707",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14241",
    "id": 43290707,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjkwNzA3",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T02:58:26Z",
    "updated_at": "2014-05-16T02:58:26Z",
    "body": "Agreed with @thestinger. Lints are cheap. Lots of folks like purity, so this is a good one. Add 'em at will.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43290707/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43297982",
    "html_url": "https://github.com/rust-lang/rust/pull/14241#issuecomment-43297982",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14241",
    "id": 43297982,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjk3OTgy",
    "user": {
      "login": "DaGenix",
      "id": 2101211,
      "node_id": "MDQ6VXNlcjIxMDEyMTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2101211?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DaGenix",
      "html_url": "https://github.com/DaGenix",
      "followers_url": "https://api.github.com/users/DaGenix/followers",
      "following_url": "https://api.github.com/users/DaGenix/following{/other_user}",
      "gists_url": "https://api.github.com/users/DaGenix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DaGenix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DaGenix/subscriptions",
      "organizations_url": "https://api.github.com/users/DaGenix/orgs",
      "repos_url": "https://api.github.com/users/DaGenix/repos",
      "events_url": "https://api.github.com/users/DaGenix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DaGenix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T05:11:24Z",
    "updated_at": "2014-05-16T05:11:24Z",
    "body": "Its currently off by default. My intuition would be that that means that it will see very little use which somewhat defeats the purpose of the lint. On the other hand, I don't think it should be on by default either since I would think it very strange if there is a lint that produces warning as soon as you use `Cell`, one of the basic Rust types (I'm saying its a basic type since its in libcore).\n\nAs mentioned by other comments, there are other forms of mutability that this won't touch - using a `static mut` or calling out to C code.\n\nIt doesn't feel to me like this really solves the currently awkward relationship between aliasability and mutability, at least when it comes to conveying useful information regarding programmer intent. Rust's story regarding mutability and programmer intent is currently very hazy, and I don't think this makes it significantly clearer.\n\nI don't see the harm in adding the lint, but, I don't think its all that useful either.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43297982/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43298432",
    "html_url": "https://github.com/rust-lang/rust/pull/14241#issuecomment-43298432",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14241",
    "id": 43298432,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjk4NDMy",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T05:23:27Z",
    "updated_at": "2014-05-16T05:51:24Z",
    "body": "> Its currently off by default. My intuition would be that that means that it will see very little use which somewhat defeats the purpose of the lint. On the other hand, I don't think it should be on by default either since I would think it very strange if there is a lint that produces warning as soon as you use `Cell`, one of the basic Rust types (I'm saying its a basic type since its in libcore).\n\n`Cell` is included in libcore because it has no external dependencies, not because it's meant to be a commonly used type. It's code smell no matter where it's used, and a lint for it makes sense. It's sometimes necessary for the sake of performance or simplicity, but it remains ugly.\n\n> As mentioned by other comments, there are other forms of mutability that this won't touch - using a `static mut` or calling out to C code.\n\nThis lint allows disabling all types with inherited mutability. Using a mutable global variable is an _external effect_ rather than mutation of a variable. It could be saving state in POSIX shared memory or an on-disk file rather than a global. If Rust ever gains an effects system, modifying a global or task-local variable will be an _effect_ outside of the work the mutability system needs to worry about.\n\nVenturing outside of inherited mutability always requires `unsafe` code, and breaking the fundamental rules by performing mutation without inherited mutability or a contained `Unsafe<T>` is undefined behaviour so this lint will catch 100% of non-inherited mutability for variables.\n\n> It doesn't feel to me like this really solves the currently awkward relationship between aliasability and mutability, at least when it comes to conveying useful information regarding programmer intent. \n\nThis \"awkward\" relationship is the foundation of what makes Rust memory safe. It will _always_ be painful, and no amount of obfuscation / renaming is going to make the borrow checker errors fade into the background. The borrow checker is implemented on top of the underlying ownership-based mutability system, and not all of the checks are related to aliasing.\n\n> Rust's story regarding mutability and programmer intent is currently very hazy, and I don't think this makes it significantly clearer.\n\nRust's mutability system is well defined without anything hazy or confusing involved. The `mut` marker means a variable or reference can be assigned to, nothing more and nothing less. It means `variable = 5` and `*reference = 5` will compile. Most types inherit mutability from the owner, and some owners are variables. A mutable reference is simply observing the mutability of the owner, so it's still the same inherited mutability system.\n\nIt's not possible for a mutability system to take everything into account. It's trivial for \"pure\" Haskell code to spin in a loop consuming all of the system's memory, spinning up the CPU fan and heating up the room until the system grinds to a halt swapping to disk and finally the OOM killer is triggered and ends the misery of the Haskell program, perhaps after killing the user's Eclipse process.\n\nThe lack of perfection doesn't make something any less useful.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43298432/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43299071",
    "html_url": "https://github.com/rust-lang/rust/pull/14241#issuecomment-43299071",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14241",
    "id": 43299071,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjk5MDcx",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T05:40:29Z",
    "updated_at": "2014-05-16T05:40:29Z",
    "body": "I thought of an even better way to do this: only warn if the type reaches at least one `Unsafe` via a pointer (i.e. not just inline in the value being passed to a function) since inline data cannot be visibly modified when passed by-value.\n\n``` rust\nstruct Inline {\n    x: Unsafe<uint>\n}\n\nstruct Pointer<'a> {\n    y: &'a Unsafe<uint>\n}\n\nlet inline: Inline = ...;\nlet ptr: Pointer = ...;\n\nfoo(&inline); // warn\nfoo(inline); // no warning: there's no way for `inline` itself to be visibly mutated\n\nfoo(&ptr); // warn\nfoo(ptr); // warn\n```\n\nThis allows e.g. `Cell` and `RefCell` to be passed around by-value without a warning.\n\nHowever, the compiler doesn't directly support computing this property, so I'll not implement it for now (unless someone thinks this is very much better than also warning for the `foo(inline)`-style uses, as the code does now).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43299071/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43299335",
    "html_url": "https://github.com/rust-lang/rust/pull/14241#issuecomment-43299335",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14241",
    "id": 43299335,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjk5MzM1",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T05:47:33Z",
    "updated_at": "2014-05-16T05:47:53Z",
    "body": "(That could be improved even more, by modelling pointer ownership, e.g. passing any of `Box<Cell<...>>`, `HashMap<K, Cell<...>>` or `Vec<Cell<...>>` is fine without a warning. But doing this is even harder.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43299335/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43299977",
    "html_url": "https://github.com/rust-lang/rust/pull/14241#issuecomment-43299977",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14241",
    "id": 43299977,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjk5OTc3",
    "user": {
      "login": "DaGenix",
      "id": 2101211,
      "node_id": "MDQ6VXNlcjIxMDEyMTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2101211?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DaGenix",
      "html_url": "https://github.com/DaGenix",
      "followers_url": "https://api.github.com/users/DaGenix/followers",
      "following_url": "https://api.github.com/users/DaGenix/following{/other_user}",
      "gists_url": "https://api.github.com/users/DaGenix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DaGenix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DaGenix/subscriptions",
      "organizations_url": "https://api.github.com/users/DaGenix/orgs",
      "repos_url": "https://api.github.com/users/DaGenix/repos",
      "events_url": "https://api.github.com/users/DaGenix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DaGenix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T06:02:44Z",
    "updated_at": "2014-05-16T06:02:44Z",
    "body": "@thestinger A function that calculates the first 10,000 digits of PI might also be freestanding, but that isn't sufficient for it to be included in libcore. I disagree that there is anything wrong with `Cell`. Its just a type with a safe interface that just happens to have an unsafe implementation. Depending on the problem to be solved, there may not be any reasonable way to avoid using it, so, I don't agree that it's a second class type that should have a warning emitted when its used.\n\nIf a type from the core library that is necessary to solve some problems needs to have a warning when it used because it breaks that mutability system, I think that's not a sign that there is something wrong with `Cell` (and friends), but that there is a problem with the mutability system that a lint won't fix.\n\nAs I said, I don't see the harm in adding the lint and I can see it as useful in some contexts, but, I don't see it as a solution to the bigger issues.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43299977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43300294",
    "html_url": "https://github.com/rust-lang/rust/pull/14241#issuecomment-43300294",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14241",
    "id": 43300294,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzAwMjk0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T06:09:45Z",
    "updated_at": "2014-05-16T06:17:59Z",
    "body": "@DaGenix: If `Cell` wasn't ugly, it wouldn't need `Unsafe<T>` in the type definition to make it well-defined. It's not possible to implement it with only `unsafe` code, the compiler has to be informed about the internal mutability. It is very much a second-class type (as is anything containing `Unsafe<T>` like `Rc`), and should be avoided whenever convoluted or poorly performing code isn't required instead.\n\nAny usage of `Unsafe<T>` will cause certain optimizations to be disabled when Rust has type-based alias analysis. An `&T` reference can be assumed to be immutable if and only if `T` contains no `Unsafe`, so LLVM can be informed that it's a non-aliasing, read-only pointer. The definition of aliasing used by C99 and optimizing compilers is a _memory dependency_, not address equality.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43300294/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43329839",
    "html_url": "https://github.com/rust-lang/rust/pull/14241#issuecomment-43329839",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14241",
    "id": 43329839,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzI5ODM5",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T13:20:22Z",
    "updated_at": "2014-05-16T13:21:29Z",
    "body": "Hm, so I actually ran this on real code rather than just what I conjured up for the test... i.e. `libcollections`: `error: aborting due to 1617 previous errors`. Trait objects, closures and generics are all considered to contain `Unsafe` so anything using any of those is warned about.\n\nThis was a nice idea, but requires significantly more implementation work. :(\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43329839/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
