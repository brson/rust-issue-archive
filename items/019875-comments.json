[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67010050",
    "html_url": "https://github.com/rust-lang/rust/issues/19875#issuecomment-67010050",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19875",
    "id": 67010050,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MDEwMDUw",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-15T15:26:47Z",
    "updated_at": "2014-12-15T15:26:47Z",
    "body": "You're going to have to write out the explicit lifetimes in this case. The 'inference' is just a set of simple rules: https://github.com/rust-lang/rfcs/blob/master/text/0141-lifetime-elision.md#the-rules\n\nThe elisison assigns the same lifetime to the `self` reference as the `int` reference, due to rule 3.\n\nI'm not going to close this because I might be missing something, but that's what I see.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67010050/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67017235",
    "html_url": "https://github.com/rust-lang/rust/issues/19875#issuecomment-67017235",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19875",
    "id": 67017235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MDE3MjM1",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-15T16:07:48Z",
    "updated_at": "2014-12-15T16:21:26Z",
    "body": "@tomaka Your code is not safe, and that's why it doesn't compile. If you call `next()` twice you'll end with two mutable references to the head of the vector.\n\n``` rust\n// Calling `next` on an `Iterator` never freezes it, because of the signature of `next()`:\n//    `next(&mut self) -> T`  // no lifetime \"glue\" between `self` and `T`\nlet head_mut: &mut T = iter.next();\nlet another_head_mut: &mut T = iter.next();\n```\n\n> I don't think there is anything unsafe with what I want to do (it's the exact same signature as MutItems).\n\n`MutItems` [internally uses raw pointers](http://doc.rust-lang.org/src/core/slice.rs.html#1214-1219) for this reason, it's an unsafe operation.\n\n> This code does work but is incompatible with the Iterator trait definition\n\nOne possible (future) _safe_ solution is HKT. The `Iterator` trait would need to change to:\n\n``` rust\ntrait Iterator<T> {\n    // note: `T` is a \"type constructor\": lifetime -> concrete type\n    fn next<'a>(&'a mut self) -> T<'a>;\n}\n```\n\nWith that definition and your implementation the iterator will \"freeze\" when `next` method is called, avoiding aliases to mutable memory.\n\n``` rust\nlet head_mut: &mut T = iter.next();  // `iter` gets frozen here\nlet another_head_mut: &mut T = iter.next();  //~ error: `iter` is already mutably borrowed\n```\n\nSee this [blog post](http://smallcultfollowing.com/babysteps/blog/2013/10/24/iterators-yielding-mutable-references/) (warning: old syntax) for more details.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67017235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67021738",
    "html_url": "https://github.com/rust-lang/rust/issues/19875#issuecomment-67021738",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19875",
    "id": 67021738,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MDIxNzM4",
    "user": {
      "login": "tomaka",
      "id": 1412254,
      "node_id": "MDQ6VXNlcjE0MTIyNTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1412254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tomaka",
      "html_url": "https://github.com/tomaka",
      "followers_url": "https://api.github.com/users/tomaka/followers",
      "following_url": "https://api.github.com/users/tomaka/following{/other_user}",
      "gists_url": "https://api.github.com/users/tomaka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tomaka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tomaka/subscriptions",
      "organizations_url": "https://api.github.com/users/tomaka/orgs",
      "repos_url": "https://api.github.com/users/tomaka/repos",
      "events_url": "https://api.github.com/users/tomaka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tomaka/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-15T16:32:52Z",
    "updated_at": "2014-12-15T16:32:52Z",
    "body": "Thanks\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67021738/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
