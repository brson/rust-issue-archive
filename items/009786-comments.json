[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26014896",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26014896",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26014896,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDE0ODk2",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-09T22:32:26Z",
    "updated_at": "2013-10-09T22:37:48Z",
    "body": "Something to note is that this breaks the contract of the `Freeze` kind and therefore defeats the simple mechanism used to prevent the creation of cycles without using the unchecked constructor. It looks memory safe, although I haven't really considered what would happen if you created cycles of `Rc` with nested managed pointers.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26014896/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26015115",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26015115",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26015115,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDE1MTE1",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-09T22:36:08Z",
    "updated_at": "2013-10-09T22:36:08Z",
    "body": "Interesting!\n\nThese semantics are pretty confusing to me for methods called `get_mut` and `borrow_mut`. From the names I would not expect them to clone and mutate their contents before giving me a pointer. These seem like pretty specialized operations so I might want very explicit names.\n\nThe discrepancy between naming here is also troubling. Are the names different because `Rc` and `Arc` are using different conventions?\n\nI'd like to hear others' opinions about how this fits into our smart pointer design.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26015115/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26020569",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26020569",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26020569,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDIwNTY5",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-10T00:30:07Z",
    "updated_at": "2013-10-10T00:30:07Z",
    "body": "I don't think this allows to create cycles.\n\nThe reason is that when you try to create a cycle you need an &mut to the body of an Rc box to do the assignment to an Rc-typed field, which means that the Rc box must have reference count of 1 and you called borrow_mut on an Rc pointing to it, which means that that Rc<T> is mutably borrowed, which means that you need an &mut to the body the Rc box cointaining it, and so on.\n\nSince the whole ownership chain (which is well-defined since all Rc boxes have reference count 1) is mutably borrowed and has a reference count of 1, you can't have an Rc value that can be written to make a cycle.\n\nI guess the naming should indeed be different, maybe using \"_cow\" instead of \"_mut\"; regarding the difference in naming between Rc and Arc, I just followed the preexisting names, and I think that it would indeed make sense to rename Rc's \"borrow\" to \"get\" (or viceversa).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26020569/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26020665",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26020665",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26020665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDIwNjY1",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-10T00:32:20Z",
    "updated_at": "2013-10-10T00:32:20Z",
    "body": "That reasoning seems correct, so I retract what I said earlier about cycles.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26020665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26050947",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26050947",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26050947,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDUwOTQ3",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-10T12:57:14Z",
    "updated_at": "2013-10-10T12:57:14Z",
    "body": "Changed to first rename the existing Rc::borrow to Rc::get to be shorter and match Arc in the first commit, and then use \"cow\" instead of \"get_mut\" as the name for the new functions, choosing the shortest sensible name.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26050947/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26052381",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26052381",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26052381,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDUyMzgx",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-10T13:15:58Z",
    "updated_at": "2013-10-10T13:15:58Z",
    "body": "Now separated the code into two functions, so we ask the compiler to inline the fast path (which needs to be inlined for speed), but not the slow path (which requires allocation and thus should not be inlined for code size).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26052381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26052958",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26052958",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26052958,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDUyOTU4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-10T13:23:59Z",
    "updated_at": "2013-10-10T13:23:59Z",
    "body": "Hm, specifically about the inlining, I wouldn't worry about it at all. LLVM probably knows better how to inline it than we do, and because it's a type-generic method it'll get \"inlined\" into all other crates that use it (so llvm will inline it properly if it decides to do so). I'm also not a fan of the unsafe functions popping up (it looked so nice before!)\n\nWe may also want to keep considering names for a bit. If I see a function called `cow` I think \"moo\" instead of copy-on-write first. @brson has a good point that this should play well into our theoretical \"smart pointer\" design, but I'm thinking that even if we did have smart pointers that you'd want to be explicit about possibly cloning large structures.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26052958/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26053719",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26053719",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26053719,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDUzNzE5",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-10T13:33:50Z",
    "updated_at": "2013-10-10T13:35:04Z",
    "body": "It's quite important though to always inline the fast path, since if the Rc<T> pointer is used as a variant of the unique pointer, it should be as fast as possible since it should be as close as possible to &mut borrowing on an unique pointer, which is a no-op.\n\nIt's also quite important to not inline the slow path, since it can cause code size to blow up and performance doesn't matter since we allocate and clone anyway which are much slower than a function call.\n\nI'm however not sure whether we should use #[inline(always)] or #[inline(never)] rather than just #[inline] and nothing though (or a combination).\n\nThe slow path function needs to be private and unsafe because memory gets leaked if it called when the reference count is 1 (since it would drop it to 0 and not free the object).\n\nNot sure about naming, I decided to choose the shortest meaningful one since it seemed the only objective criteria possible.\n\nBTW, we should put a branch annotation on the conditional like GCC's likely/unlikely = __builtin_expect, but it seems Rust doesn't have that feature yet.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26053719/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26054859",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26054859",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26054859,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDU0ODU5",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-10T13:48:36Z",
    "updated_at": "2013-10-10T13:48:36Z",
    "body": "We've generally been directly shying away from using likely/unlikely, I don't personally know the concrete reasons as to why, but the general idea is that they're often misused and rarely actually have a positive effect on generated code.\n\nWe've also been very much shying away from `inline(always)` and `inline(never)`. Whenever you flag one of them as such, you're often just defeating what LLVM would do normally. LLVM is normally very smart about deciding what to inline. For the case of `inline(never)`, what if the container could be very cheaply cloned? For the use case of `inline(always)`, that often just forces code bloat into the caller when what if it's already massive and wouldn't benefit anyway?\n\nGenerally if we do use these attributes for performance reasons like this, we try to get some numbers behind the decision justifying why the annotations are as such. Along those lines, do you have some code one way or another that's slow without annotations and fast with the annotations? That would be a strong signal that we should probably have them, but without that we'd like to leave as much as possible up to LLVM.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26054859/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26058861",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26058861",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26058861,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDU4ODYx",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-10T14:36:27Z",
    "updated_at": "2013-10-10T14:36:54Z",
    "body": "Removing both the inline(always) and inline(never) seems to run the risk that LLVM decides to inline the slow path in the general function (which is a locally correct decision, since it's the only caller) and then not inline the general function (which is now also a correct decision after inlining the slow path in).\n\nThe slow path requires allocation of a unique box and reference count manipulation, so it never really trivializes, and the inline(never) is only very slightly harmful in code size in case the function is called once.\n\nOn the other hand, maybe we don't want to inline the fast path if we really want to minimize code size.\n\nSo, I replaced the inline(always) with inline and kept the inline(never).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26058861/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26059836",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26059836",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26059836,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDU5ODM2",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-10T14:47:31Z",
    "updated_at": "2013-10-10T15:25:31Z",
    "body": "Regarding naming, possible options, in approximate word number and then length order:\n- cow \n- own\n- excl\n- unshare\n- exclusivize\n- get_cow\n- get_mut\n- get_excl\n- get_clone\n- get_unique\n- make_unique\n- make_owned\n- make_exclusive\n- maybe_clone\n- get_mut_cow\n- get_mut_excl\n- get_mut_clone\n- get_mut_unique\n- clone_if_shared\n- unshare_and_get_mut\n- exclusivize_and_get_mut\n- make_unique_and_get_mut\n- make_owned_and_get_mut\n- make_exclusive_and_get_mut\n- maybe_clone_and_get_mut\n- clone_if_shared_and_get_mut\n\nEDIT: also \"cow_mut\"\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26059836/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26066240",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26066240",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26066240,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDY2MjQw",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-10T15:56:51Z",
    "updated_at": "2013-10-10T15:59:30Z",
    "body": "Even though cycles aren't going to be an issue, I'm still a bit worried about breaking the `Freeze` invariants. If it doesn't mean either inherited mutability or immutable, we're going to need to change the documentation at the very least.\n\nI like this functionality but I'm not sure if it's something we should be committing to supporting in the standard library, at least without `unsafe`. It might be better to make another reference-counted pointer that's marked as non-`Freeze` to do this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26066240/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26070158",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26070158",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26070158,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDcwMTU4",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-10T16:44:48Z",
    "updated_at": "2013-10-10T16:44:48Z",
    "body": "I don't think it breaks the Freeze invariants, since you need an &mut to the Rc to call cow() (because it takes &mut self), which is just like any other struct that supports mutation.\n\nAlso, it's equivalent to creating a new rc wrapping a clone of the contents, except that the clone is optimized out if the reference count is 1.\n\nWhy do you think it breaks the freeze invariants or is unsafe?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26070158/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26070313",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26070313",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26070313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDcwMzEz",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-10T16:46:46Z",
    "updated_at": "2013-10-10T16:49:30Z",
    "body": "BTW, added a new commit that adds 3 new functions, generalizing the approach.\n\nThe try_get_mut() function behaves like cow(), but doesn't require Clone and does nothing if cloning would be necessary (this is implemented like UnsafeArc::try_unwrap, by using an Either).\n\nThe value() and try_unwrap() functions are analogous to cow() and try_get_mut(), except that they take by-value self and return by-value contents.\n\nSpecifically, the value() function will unwrap the Rc<T>, destroying the box, if the reference count is 1, and will otherwise decrement the reference count and return a clone of the contents.\n\ntry_get_mut and try_unwrap functions are non-redundant, since they cannot be implemented externally as they fundamentally require unsafe code and access to private members of Rc.\n\ncow() and value() could be implemented on top of try_get_mut and try_unwrap, but this would risk possibly suboptimal code and increased compilation time (due to the need to optimize out the Either), and anyway the are the interface users would commonly use.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26070313/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26070977",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26070977",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26070977,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDcwOTc3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-10T16:55:09Z",
    "updated_at": "2013-10-10T16:55:09Z",
    "body": "Okay, I'm convinced it's fine from a safety point-of-view. :)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26070977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26073670",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26073670",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26073670,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDczNjcw",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-10T17:28:51Z",
    "updated_at": "2013-10-10T17:28:51Z",
    "body": "Fixed missing unsafe blocks.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26073670/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26187588",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26187588",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26187588,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MTg3NTg4",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-12T01:29:31Z",
    "updated_at": "2013-10-12T01:29:31Z",
    "body": "@bill-myers: needs a rebase now that the `Rc` type has been moved to `libstd`\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26187588/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26392806",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-26392806",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 26392806,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzkyODA2",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-16T04:52:11Z",
    "updated_at": "2013-10-16T04:52:11Z",
    "body": "@thestinger this has been rebased.\n\n@bill-myers in the future, @ mention people who were looking at your PR. GitHub gives no notification that a PR has been updated.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26392806/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29641990",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-29641990",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 29641990,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjQxOTkw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-02T18:07:44Z",
    "updated_at": "2013-12-02T18:07:44Z",
    "body": "Closing due to inactivity, but please reopen if you have an update!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29641990/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30234376",
    "html_url": "https://github.com/rust-lang/rust/pull/9786#issuecomment-30234376",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
    "id": 30234376,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjM0Mzc2",
    "user": {
      "login": "michaelwoerister",
      "id": 1825894,
      "node_id": "MDQ6VXNlcjE4MjU4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelwoerister",
      "html_url": "https://github.com/michaelwoerister",
      "followers_url": "https://api.github.com/users/michaelwoerister/followers",
      "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelwoerister/orgs",
      "repos_url": "https://api.github.com/users/michaelwoerister/repos",
      "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelwoerister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-10T15:05:00Z",
    "updated_at": "2013-12-10T15:05:00Z",
    "body": "@bill-myers Will you have have time to rebase this? If not, I might be able to get it up-to-date within the next days. I'd be very interested to see this functionality in master `:)`\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30234376/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
