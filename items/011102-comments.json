[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31077537",
    "html_url": "https://github.com/rust-lang/rust/issues/11102#issuecomment-31077537",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11102",
    "id": 31077537,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDc3NTM3",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-22T02:43:23Z",
    "updated_at": "2013-12-22T02:43:23Z",
    "body": "I can reproduce this but don't understand yet why there would be a difference in behavior based on the data structures constructed.\n\nI can imagine scenarios where the spinning would starve other tasks, but can't picture how the rng could be affected by a task spinning.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31077537/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31077601",
    "html_url": "https://github.com/rust-lang/rust/issues/11102#issuecomment-31077601",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11102",
    "id": 31077601,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDc3NjAx",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-22T02:48:27Z",
    "updated_at": "2013-12-22T02:48:27Z",
    "body": "Running with just one thread produces the following\n\n```\nbrian@brian-X1:~/dev/rust3/build$ RUST_THREADS=1 ./starvingmap\nFinished tightloop!\nHashMap1 created!\nHashMap2 created!\nHashMap3 created!\n```\n\nIndicating that the hashmap tasks get descheduled at some point in favor of the spinning task. That indicates to me that thieves are failing to find the hashmap tasks. I remember thinking recently that the stealing code was a little racy and that was ok since it doesn't impact the actual correctness (the task does run eventually), but maybe we can tighten it up so that thieves always find work if it's available.\n\nI'd like to know why the task rng causes tasks to be descheduled though....\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31077601/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31077689",
    "html_url": "https://github.com/rust-lang/rust/issues/11102#issuecomment-31077689",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11102",
    "id": 31077689,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDc3Njg5",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-22T02:55:31Z",
    "updated_at": "2013-12-22T02:55:31Z",
    "body": "The task rng deschedules because it seeds via io of course.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31077689/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31077772",
    "html_url": "https://github.com/rust-lang/rust/issues/11102#issuecomment-31077772",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11102",
    "id": 31077772,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDc3Nzcy",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-22T03:04:34Z",
    "updated_at": "2013-12-22T03:04:34Z",
    "body": "Right now if a scheduler fails to steal it pushes itself to the sleeper list and waits for another scheduler to notify it that there is work available. I'm guessing the window between those two events is where the hashmap tasks are descheduling. Closing that window is a little tricky, but I can imagine we might: steal, push to sleeper list, steal again, sleep.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31077772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31077882",
    "html_url": "https://github.com/rust-lang/rust/issues/11102#issuecomment-31077882",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11102",
    "id": 31077882,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDc3ODgy",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-22T03:16:27Z",
    "updated_at": "2013-12-22T03:16:27Z",
    "body": "Oh, my previous guess my be wrong.\n\nIf these tasks are descheduling to do I/O there may be nothing we can do for them. They can't run again until the local scheduler becomes available and the I/O event loop resumes.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31077882/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31078405",
    "html_url": "https://github.com/rust-lang/rust/issues/11102#issuecomment-31078405",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11102",
    "id": 31078405,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDc4NDA1",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-22T04:01:25Z",
    "updated_at": "2013-12-22T04:01:25Z",
    "body": "I think that @brson's analysis of the problem is correct. What happens is that one I/O loop has lots of \"ready events\", but the current task on that I/O loop is not yielding control back to the scheduler. I'm unsure if there's much that we can do about this, we'd have to interrupt the task to allow the I/O loop to wake up and do its business, but currently preemption is not possible (and also would break lots of code today), so this is definitely a tricky problem.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31078405/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31079137",
    "html_url": "https://github.com/rust-lang/rust/issues/11102#issuecomment-31079137",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11102",
    "id": 31079137,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDc5MTM3",
    "user": {
      "login": "metajack",
      "id": 28357,
      "node_id": "MDQ6VXNlcjI4MzU3",
      "avatar_url": "https://avatars.githubusercontent.com/u/28357?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/metajack",
      "html_url": "https://github.com/metajack",
      "followers_url": "https://api.github.com/users/metajack/followers",
      "following_url": "https://api.github.com/users/metajack/following{/other_user}",
      "gists_url": "https://api.github.com/users/metajack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/metajack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/metajack/subscriptions",
      "organizations_url": "https://api.github.com/users/metajack/orgs",
      "repos_url": "https://api.github.com/users/metajack/repos",
      "events_url": "https://api.github.com/users/metajack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/metajack/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-22T05:07:46Z",
    "updated_at": "2013-12-22T05:07:46Z",
    "body": "Is it not possible to transfer tasks sleeping on io to a different scheduler? This failure pattern is not going to be super easy to reason about.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31079137/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31079210",
    "html_url": "https://github.com/rust-lang/rust/issues/11102#issuecomment-31079210",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11102",
    "id": 31079210,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDc5MjEw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-22T05:13:37Z",
    "updated_at": "2013-12-22T05:13:37Z",
    "body": "Sadly no, the problem here is that the libuv event loop needs to run in order to execute the callbacks of the pending I/O handles. The callbacks are what will reawaken the tasks and allow them to get stolen to other schedulers, but there's no way to have a separate event loop run the callback of another event loop.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31079210/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31079246",
    "html_url": "https://github.com/rust-lang/rust/issues/11102#issuecomment-31079246",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11102",
    "id": 31079246,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDc5MjQ2",
    "user": {
      "login": "metajack",
      "id": 28357,
      "node_id": "MDQ6VXNlcjI4MzU3",
      "avatar_url": "https://avatars.githubusercontent.com/u/28357?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/metajack",
      "html_url": "https://github.com/metajack",
      "followers_url": "https://api.github.com/users/metajack/followers",
      "following_url": "https://api.github.com/users/metajack/following{/other_user}",
      "gists_url": "https://api.github.com/users/metajack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/metajack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/metajack/subscriptions",
      "organizations_url": "https://api.github.com/users/metajack/orgs",
      "repos_url": "https://api.github.com/users/metajack/repos",
      "events_url": "https://api.github.com/users/metajack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/metajack/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-22T05:16:53Z",
    "updated_at": "2013-12-22T05:16:53Z",
    "body": "I could have sworn there was talk about migrating descriptors across event loops in the distant past. I figured we just hadn't gotten around to it and such a thing would eventually address this problem.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31079246/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56132201",
    "html_url": "https://github.com/rust-lang/rust/issues/11102#issuecomment-56132201",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11102",
    "id": 56132201,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MTMyMjAx",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-19T03:45:22Z",
    "updated_at": "2014-09-19T03:45:22Z",
    "body": "#17325 means this is no longer relevant to the standard libraries\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56132201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
