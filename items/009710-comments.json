[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25674252",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-25674252",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 25674252,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1Njc0MjUy",
    "user": {
      "login": "toffaletti",
      "id": 145012,
      "node_id": "MDQ6VXNlcjE0NTAxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/145012?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toffaletti",
      "html_url": "https://github.com/toffaletti",
      "followers_url": "https://api.github.com/users/toffaletti/followers",
      "following_url": "https://api.github.com/users/toffaletti/following{/other_user}",
      "gists_url": "https://api.github.com/users/toffaletti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toffaletti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toffaletti/subscriptions",
      "organizations_url": "https://api.github.com/users/toffaletti/orgs",
      "repos_url": "https://api.github.com/users/toffaletti/repos",
      "events_url": "https://api.github.com/users/toffaletti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toffaletti/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-04T03:29:59Z",
    "updated_at": "2013-10-04T03:29:59Z",
    "body": "`check-stage1` failed in a rt::comm test, not sure what test though, the console output is all interleaved.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25674252/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25674313",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-25674313",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 25674313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1Njc0MzEz",
    "user": {
      "login": "toffaletti",
      "id": 145012,
      "node_id": "MDQ6VXNlcjE0NTAxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/145012?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toffaletti",
      "html_url": "https://github.com/toffaletti",
      "followers_url": "https://api.github.com/users/toffaletti/followers",
      "following_url": "https://api.github.com/users/toffaletti/following{/other_user}",
      "gists_url": "https://api.github.com/users/toffaletti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toffaletti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toffaletti/subscriptions",
      "organizations_url": "https://api.github.com/users/toffaletti/orgs",
      "repos_url": "https://api.github.com/users/toffaletti/repos",
      "events_url": "https://api.github.com/users/toffaletti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toffaletti/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-04T03:32:25Z",
    "updated_at": "2013-10-04T03:32:25Z",
    "body": "narrowed it to rt::io tests\n\n```\n$ ./x86_64-unknown-linux-gnu/stage1/test/stdtest-x86_64-unknown-linux-gnu rt::io\n\nrunning 81 tests\ntest rt::io::buffered::test::test_buffered_writer ... ok\ntask '<unnamed>' failed at 'Unhandled condition: read_error: rt::io::IoError{kind: OtherIoError, desc: \"Placeholder error. You shouldn't be seeing this\", detail: None}', /home/jason/rust/src/libstd/condition.rs:131\ntest rt::io::buffered::test::test_buffered_reader ... ok\ntest rt::io::extensions::test::bytes_0_bytes ... ok\ntest rt::io::buffered::test::test_buffered_stream ... ok\ntest rt::io::extensions::test::bytes_eof ... ok\ntest rt::io::extensions::test::push_bytes ... task 'ok<unnamed>\n' failed at 'Unhandled condition: read_error: rt::io::IoError{kind: OtherIoError, desc: \"Placeholder error. You shouldn't be seeing this\", detail: None}', /home/jason/rust/src/libstd/condition.rs:131\ntest rt::io::extensions::test::bytes_error ... ok\ntest rt::io::extensions::test::push_bytes_eof ... ok\ntest rt::io::extensions::test::push_bytes_error ... ok\ntest rt::io::extensions::test::push_bytes_partial ... ok\ntest rt::io::extensions::test::read_byte_0_bytes ... ok\ntest rt::io::extensions::test::read_byte_eof ... ok\ntest rt::io::extensions::test::read_byte ... ok\ntest rt::io::extensions::test::read_bytes ... ok\ntest rt::io::extensions::test::read_byte_error ... ok\ntest rt::io::extensions::test::read_bytes_eof ... ok\ntest rt::io::extensions::test::read_bytes_partial ... ok\ntest rt::io::extensions::test::read_to_end ... ok\ntest rt::io::extensions::test::push_bytes_fail_reset_len ... ok\ntest rt::io::extensions::test::test_read_be_int_n ... ok\ntest rt::io::extensions::test::test_read_f32 ... ok\ntest rt::io::extensions::test::test_read_write_be ... ok\ntest rt::io::extensions::test::read_to_end_error ... ok\ntest rt::io::extensions::test::test_read_write_f32 ... ok\ntest rt::io::extensions::test::test_read_write_le_mem ... ok\ntest rt::io::flate::test::smoke_test ... ignored\ntest rt::io::mem::test::test_buf_reader ... ok\ntest rt::io::mem::test::test_mem_reader ... ok\ntest rt::io::mem::test::test_mem_writer ... ok\ntest rt::io::mem::test::test_with_mem_writer ... ok\ntest rt::io::net::ip::test::ipv6_addr_to_str ... ok\ntest rt::io::net::ip::test::test_from_str_ipv4 ... ok\ntest rt::io::net::ip::test::test_from_str_ipv4_in_ipv6 ... ok\ntest rt::io::net::ip::test::test_from_str_ipv6 ... ok\ntest rt::io::net::ip::test::test_from_str_socket_addr ... ok\ntest rt::io::net::tcp::test::bind_error ... ignored\nfailed in non-task context at 'assertion failed: handle.is_not_null()', /home/jason/rust/src/libstd/rt/uv/mod.rs:105\nfailed in non-task context at 'assertion failed: handle.is_not_null()', /home/jason/rust/src/libstd/rt/uv/mod.rs:105\nfailed in non-task context at 'assertion failed: handle.is_not_null()', /home/jason/rust/src/libstd/rt/uv/mod.rs:105\nfailed in non-task context at 'assertion failed: handle.is_not_null()', /home/jason/rust/src/libstd/rt/uv/mod.rs:105\nfailed in non-task context at 'assertion failed: handle.is_not_null()', /home/jason/rust/src/libstd/rt/uv/mod.rs:105\nAborted\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25674313/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25674549",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-25674549",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 25674549,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1Njc0NTQ5",
    "user": {
      "login": "toffaletti",
      "id": 145012,
      "node_id": "MDQ6VXNlcjE0NTAxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/145012?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toffaletti",
      "html_url": "https://github.com/toffaletti",
      "followers_url": "https://api.github.com/users/toffaletti/followers",
      "following_url": "https://api.github.com/users/toffaletti/following{/other_user}",
      "gists_url": "https://api.github.com/users/toffaletti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toffaletti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toffaletti/subscriptions",
      "organizations_url": "https://api.github.com/users/toffaletti/orgs",
      "repos_url": "https://api.github.com/users/toffaletti/repos",
      "events_url": "https://api.github.com/users/toffaletti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toffaletti/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-04T03:42:43Z",
    "updated_at": "2013-10-04T03:42:43Z",
    "body": "valgrind told me the Abort was from not enough file descriptors. I bumped fd up and now I get:\n\n```\n$ ./x86_64-unknown-linux-gnu/stage1/test/stdtest-x86_64-unknown-linux-gnu rt::io\n\nrunning 81 tests\ntask '<unnamed>' failed at 'Unhandled condition: read_error: rt::io::IoError{kind: OtherIoError, desc: \"Placeholder error. You shouldn't be seeing this\", detail: None}', /home/jason/rust/src/libstd/condition.rs:131\ntest rt::io::buffered::test::test_buffered_reader ... ok\ntest rt::io::buffered::test::test_buffered_stream ... ok\ntest rt::io::buffered::test::test_buffered_writer ... ok\ntest rt::io::extensions::test::bytes_0_bytes ... ok\ntest rt::io::extensions::test::bytes_eof ... ok\ntask '<unnamed>' failed at 'Unhandled condition: read_error: rt::io::IoError{kind: OtherIoError, desc: \"Placeholder error. You shouldn't be seeing this\", detail: None}', /home/jason/rust/src/libstd/condition.rs:131\ntest rt::io::extensions::test::push_bytes ... ok\ntest rt::io::extensions::test::bytes_error ... ok\ntest rt::io::extensions::test::push_bytes_eof ... ok\ntest rt::io::extensions::test::push_bytes_partial ... ok\ntest rt::io::extensions::test::read_byte ... ok\ntest rt::io::extensions::test::push_bytes_error ... ok\ntest rt::io::extensions::test::read_byte_0_bytes ... ok\ntest rt::io::extensions::test::read_byte_eof ... ok\ntest rt::io::extensions::test::read_byte_error ... ok\ntest rt::io::extensions::test::read_bytes_eof ... ok\ntest rt::io::extensions::test::read_bytes ... ok\ntest rt::io::extensions::test::read_bytes_partial ... ok\ntest rt::io::extensions::test::push_bytes_fail_reset_len ... ok\ntest rt::io::extensions::test::read_to_end ... ok\ntest rt::io::extensions::test::test_read_be_int_n ... ok\ntest rt::io::extensions::test::test_read_f32 ... ok\ntest rt::io::extensions::test::read_to_end_error ... ok\ntest rt::io::extensions::test::test_read_write_be ... ok\ntest rt::io::extensions::test::test_read_write_f32 ... ok\ntest rt::io::extensions::test::test_read_write_le_mem ... ok\ntest rt::io::flate::test::smoke_test ... ignored\ntest rt::io::mem::test::test_buf_reader ... ok\ntest rt::io::mem::test::test_mem_reader ... ok\ntest rt::io::mem::test::test_mem_writer ... ok\ntest rt::io::mem::test::test_with_mem_writer ... ok\ntest rt::io::net::ip::test::ipv6_addr_to_str ... ok\ntest rt::io::net::ip::test::test_from_str_ipv4 ... ok\ntest rt::io::net::ip::test::test_from_str_ipv6 ... ok\ntest rt::io::net::ip::test::test_from_str_ipv4_in_ipv6 ... ok\ntest rt::io::net::tcp::test::bind_error ... ignored\ntest rt::io::net::ip::test::test_from_str_socket_addr ... ok\ntask '<unnamed>' failed at 'assertion failed: !dir.exists()', /home/jason/rust/src/libstd/rt/io/file.rs:930\n\n\nInstead of the poems I had hoped for, there came only a shuddering blackness\nand ineffable loneliness; and I saw at last a fearful truth which no one had\never dared to breathe before \u2014 the unwhisperable secret of secrets \u2014 The fact\nthat this city of stone and stridor is not a sentient perpetuation of Old New\nYork as London is of Old London and Paris of Old Paris, but that it is in fact\nquite dead, its sprawling body imperfectly embalmed and infested with queer\nanimate things which have nothing to do with it as it was in life.\n\nfatal runtime error: assertion failed: exit_status\nAborted\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25674549/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25678637",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-25678637",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 25678637,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1Njc4NjM3",
    "user": {
      "login": "toffaletti",
      "id": 145012,
      "node_id": "MDQ6VXNlcjE0NTAxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/145012?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toffaletti",
      "html_url": "https://github.com/toffaletti",
      "followers_url": "https://api.github.com/users/toffaletti/followers",
      "following_url": "https://api.github.com/users/toffaletti/following{/other_user}",
      "gists_url": "https://api.github.com/users/toffaletti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toffaletti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toffaletti/subscriptions",
      "organizations_url": "https://api.github.com/users/toffaletti/orgs",
      "repos_url": "https://api.github.com/users/toffaletti/repos",
      "events_url": "https://api.github.com/users/toffaletti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toffaletti/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-04T06:23:57Z",
    "updated_at": "2013-10-04T06:23:57Z",
    "body": "So the above failure was caused by the previous fd limit failures not cleaning up directories in tmp. I had to rm these two directories:\n\n```\nrm -rf tmp/before_and_after_dir\nrm -rf tmp/di_readdir/\n```\n\nand now all tests pass.\n\n```\ntest result: ok. 1194 passed; 0 failed; 91 ignored; 0 measured\n```\n\nI'd still be very wary of this change though.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25678637/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25768222",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-25768222",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 25768222,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NzY4MjIy",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-06T13:36:18Z",
    "updated_at": "2013-10-06T13:36:18Z",
    "body": "Thanks! I'm out of town at the moment but will give this a close look this week.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25768222/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25772458",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-25772458",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 25772458,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NzcyNDU4",
    "user": {
      "login": "toffaletti",
      "id": 145012,
      "node_id": "MDQ6VXNlcjE0NTAxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/145012?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toffaletti",
      "html_url": "https://github.com/toffaletti",
      "followers_url": "https://api.github.com/users/toffaletti/followers",
      "following_url": "https://api.github.com/users/toffaletti/following{/other_user}",
      "gists_url": "https://api.github.com/users/toffaletti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toffaletti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toffaletti/subscriptions",
      "organizations_url": "https://api.github.com/users/toffaletti/orgs",
      "repos_url": "https://api.github.com/users/toffaletti/repos",
      "events_url": "https://api.github.com/users/toffaletti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toffaletti/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-06T17:37:28Z",
    "updated_at": "2013-10-06T18:05:14Z",
    "body": "I found SleeperList, which looked like a copy of the MessageQueue code. So I tried replacing it with mpsc_queue::Queue<SchedHandle>, but then I get crashes in the AtomicPtr::get refcount != 0 check. I haven't been able to track down which AtomicPtr is causing this yet, but it is troubling because I can't explain why or how this change would expose what looks like a bug in AtomicPtr. I suspect the bug is in my code, not AtomicPtr, but this sure is a head scratcher.\n\n```\ncompile_and_link: x86_64-unknown-linux-gnu/stage1/lib/rustc/x86_64-unknown-linux-gnu/lib/libstd.so\nWarning: removing previous 'libstd-*.so' libraries: x86_64-unknown-linux-gnu/stage1/lib/rustc/x86_64-unknown-linux-gnu/lib//libstd-6c65cf4b443341b1-0.9-pre.so\nfailed in non-task context at 'assertion failed: (*self.data).count.load(Relaxed) > 0', /home/jason/rust/src/libstd/unstable/sync.rs:97\nSegmentation fault\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25772458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25773155",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-25773155",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 25773155,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NzczMTU1",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-06T18:11:52Z",
    "updated_at": "2013-10-06T18:11:52Z",
    "body": "cc #6837 and #6838\n\nI've found breaking on `rust_begin_unwind` useful for generating stack traces in gdb, although the segfault would probably also help showing the stack trace.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25773155/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25773244",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-25773244",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 25773244,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NzczMjQ0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-06T18:16:20Z",
    "updated_at": "2013-10-06T18:16:20Z",
    "body": "I haven't given this a whole lot of thought, but there are two high-level comments which I was wondering about:\n- I think that the SleeperList is a multiple consumer queue, meaning that the queue implemented here probably isn't suitable for that purpose.\n- Along those lines, it's certainly unsafe to use this queue with more than one consumer, so I was curious if we could leverage the rust type system to enforce this safety? Right now it's not guaranteed that you have one consumer in safe code, so safe code can run into problems when using this queue. \n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25773244/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25778332",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-25778332",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 25778332,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1Nzc4MzMy",
    "user": {
      "login": "toffaletti",
      "id": 145012,
      "node_id": "MDQ6VXNlcjE0NTAxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/145012?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toffaletti",
      "html_url": "https://github.com/toffaletti",
      "followers_url": "https://api.github.com/users/toffaletti/followers",
      "following_url": "https://api.github.com/users/toffaletti/following{/other_user}",
      "gists_url": "https://api.github.com/users/toffaletti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toffaletti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toffaletti/subscriptions",
      "organizations_url": "https://api.github.com/users/toffaletti/orgs",
      "repos_url": "https://api.github.com/users/toffaletti/repos",
      "events_url": "https://api.github.com/users/toffaletti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toffaletti/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-06T22:27:32Z",
    "updated_at": "2013-10-06T22:27:32Z",
    "body": "@alexcrichton I was wondering if SleeperList needed to be multi-consumer and whether that might be the issue. If that is the case, it explains the crashes. I will implement another lock-free queue for SleeperList. I also have thought about using the type system to enforce the thread-safe properties of the queue. I think something similar to comm::stream() which makes a Pusher that is Cloneable and Sendable and a Popper that isn't. I'll probably need some help with the intricacies of the type system.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25778332/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25788916",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-25788916",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 25788916,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1Nzg4OTE2",
    "user": {
      "login": "toffaletti",
      "id": 145012,
      "node_id": "MDQ6VXNlcjE0NTAxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/145012?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toffaletti",
      "html_url": "https://github.com/toffaletti",
      "followers_url": "https://api.github.com/users/toffaletti/followers",
      "following_url": "https://api.github.com/users/toffaletti/following{/other_user}",
      "gists_url": "https://api.github.com/users/toffaletti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toffaletti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toffaletti/subscriptions",
      "organizations_url": "https://api.github.com/users/toffaletti/orgs",
      "repos_url": "https://api.github.com/users/toffaletti/repos",
      "events_url": "https://api.github.com/users/toffaletti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toffaletti/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-07T07:17:09Z",
    "updated_at": "2013-10-07T07:17:09Z",
    "body": "Tests are now passing with sleeper list using the multiple producer multiple consumer bounded queue. I used this algorithm: http://www.1024cores.net/home/lock-free-algorithms/queues/bounded-mpmc-queue. The downside is this queue is bounded at powers of 2 capacity. However, it is very fast and easy to understand. I wasn't sure what I could do safely inside the scheduler when a push to the sleeper list failed because the queue was full, so I just put an assert! in for now and made the queue fairly large. Usually there would be a spin with back-off yielding loop.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25788916/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26467023",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-26467023",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 26467023,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDY3MDIz",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-16T23:09:18Z",
    "updated_at": "2013-10-16T23:09:18Z",
    "body": "Forgive me taking so long on this. It looks very impressive, but I'm wary of hastily merging concurrency code these days.\n\nI think it's not too big a problem for the SleeperList to have a bound, at least for now. At the moment the number of work stealing schedulers is fixed at startup, putting a bound on the size of the SleeperList. In the future that number will be able to increase dynamically, but I still don't think that having a reasonable limit on the number of schedulers is a major problem.\n\nThis does convert the SleeperList from a stack to a queue. I'm not sure if this is good or bad. I chose a stack originally with the vague idea that it would be better for cache reasons to keep using threads that were most recently active, but it may not matter at all.\n\nThis also makes all pushes to the scheduler message queue allocate, so there's going to be a performance tradeoff here. This will probably scale a lot better when message queues are contested, but be slower to push/pop.\n\nA minor nit, but I would prefer that the mpsc queue is encapsulated in the scheduler-specific MessageQueue type. Partly just for the naming, but also to make it easier to swap out MessageQueue implementations.\n\nBecause of the special license this won't pass `make tidy`. License exceptions are listed in src/etc/licenseck.py. This appears to be a standard BSD license, which we can accept.\n\nHave you measured any difference in performance with this implementation?\n\nI'm going to run some tests locally here.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26467023/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26469245",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-26469245",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 26469245,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDY5MjQ1",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-16T23:52:19Z",
    "updated_at": "2013-10-16T23:52:19Z",
    "body": "It would be appropriate to put links to the original C source directly in the Rust source. Can you do so?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26469245/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26469727",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-26469727",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 26469727,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDY5NzI3",
    "user": {
      "login": "toffaletti",
      "id": 145012,
      "node_id": "MDQ6VXNlcjE0NTAxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/145012?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toffaletti",
      "html_url": "https://github.com/toffaletti",
      "followers_url": "https://api.github.com/users/toffaletti/followers",
      "following_url": "https://api.github.com/users/toffaletti/following{/other_user}",
      "gists_url": "https://api.github.com/users/toffaletti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toffaletti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toffaletti/subscriptions",
      "organizations_url": "https://api.github.com/users/toffaletti/orgs",
      "repos_url": "https://api.github.com/users/toffaletti/repos",
      "events_url": "https://api.github.com/users/toffaletti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toffaletti/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-17T00:01:41Z",
    "updated_at": "2013-10-17T00:01:41Z",
    "body": "I agree, this merge should not be taken lightly. I have run tests through valgrind's helgrind and drd tools, without noticing any problems however the output is rather noisy even without this patch so I could be missing things. I'd feel better if Rust had http://clang.llvm.org/docs/ThreadSanitizer.html support and/or was helgrind clean.\n\nI will look into implementing a lock-free stack for SleeperList, I missed that detail.\n\nThe allocation per queue push is a concern. It is possible to use a bounded free-list to reduce this, but it would complicate the code and I'd want to see measurements of the allocation being an issue first because jemalloc is hard to beat.\n\nI like encapsulating MessageQueue, perhaps allowing a runtime flag that swaps between implementations could be a good way to go forward with merging this. That minimizes risk and makes testing easier than rebuilding all of Rust from this branch.\n\nI have tried, but so far failed to find a good measure of performance for this. Benchmarking is hard. I think it would be fairly trivial to come up with some micro-benchmarks, but I was hoping to see a difference in real-world applications. I tried running the stage1 tests and benchmarks and also apachebench with various levels of concurrency against rust-http server hoping to see some improvement, but I didn't. I suspect with running the tests and benchmarks the scheduler overhead was too small. As for rust-http I believe I talked to you on irc about the issues with libuv and io on multiple threads. rust-http server really only utilizes a single core when io bound because of libuv. Perhaps Servo would be a good test?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26469727/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26470781",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-26470781",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 26470781,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDcwNzgx",
    "user": {
      "login": "toffaletti",
      "id": 145012,
      "node_id": "MDQ6VXNlcjE0NTAxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/145012?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toffaletti",
      "html_url": "https://github.com/toffaletti",
      "followers_url": "https://api.github.com/users/toffaletti/followers",
      "following_url": "https://api.github.com/users/toffaletti/following{/other_user}",
      "gists_url": "https://api.github.com/users/toffaletti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toffaletti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toffaletti/subscriptions",
      "organizations_url": "https://api.github.com/users/toffaletti/orgs",
      "repos_url": "https://api.github.com/users/toffaletti/repos",
      "events_url": "https://api.github.com/users/toffaletti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toffaletti/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-17T00:26:45Z",
    "updated_at": "2013-10-17T00:26:45Z",
    "body": "I'll update this branch when I get a chance, but until then the code also exists in stand-alone form at https://github.com/toffaletti/rust-code with links to the original algorithms, if that helps. On second thought, I think the code I'm linking to is more C style pseudo-code. I'll try to dig up some actual compilable code (I believe some were posted on the mailing list) if you like.\n\nhttps://github.com/toffaletti/rust-code/blob/master/mpmc_bounded_queue.rs#L29\nhttps://github.com/toffaletti/rust-code/blob/master/mpsc_queue.rs#L30\n\nI'll also explain the padding in a comment in the code, but I wanted to bring up an issue with it here. The padding is to prevent [false sharing](http://en.wikipedia.org/wiki/False_sharing). For it to work, the padding has to be at least the size of the cpu cache line. I hard coded it at 64 bytes because I'm not aware of a good way to determine the actual value at compile or runtime. I've seen reference to some older server class cpus using 128 byte cache lines. I have no idea what ARM uses, but I think most modern desktop/server cpus use 64.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26470781/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26470895",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-26470895",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 26470895,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDcwODk1",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-17T00:29:32Z",
    "updated_at": "2013-10-17T00:29:32Z",
    "body": "I think microbenchmarks are probably the best bet for measuring any results at this point. As you say, most of our real world code is going to swamp the scheduler itself with additional inefficiencies; we probably don't have anything that would actually be impacted by the scalability improvements this should bring (nor do I even have a massively multi-core machine to test on right now).\n\nLast time I was tuning the scheduler I used [this stupid benchmark](https://github.com/brson/rust-sched-bench/blob/master/pingpong.rs) and was just optimizing profiles to remove as much of the scheduler overhead as possible. I was also using mutrace to measure lock contention, which this change should reduce to zero.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26470895/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26471096",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-26471096",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 26471096,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDcxMDk2",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-17T00:34:09Z",
    "updated_at": "2013-10-17T00:34:09Z",
    "body": "@toffaletti I think don't worry about the lock-free stack. There's no evidence a stack is better here.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26471096/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26471320",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-26471320",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 26471320,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDcxMzIw",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-17T00:39:52Z",
    "updated_at": "2013-10-17T00:39:52Z",
    "body": "This does turn the `casual_pop` operations into normal atomic pops. In my last round of optimization these were pretty important for reducing lock contention. I imagine it's not nearly as important now that there are no locks, but it still may be an optimization to peek at the end of the queue non-atomically before deciding to pop. If we're going to leave the operations the same for now then it probably deserves an `XXX` comment indicating that we should reinvestigate later.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26471320/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26471692",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-26471692",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 26471692,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDcxNjky",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-17T00:50:08Z",
    "updated_at": "2013-10-17T00:50:08Z",
    "body": "Oh, the biggest source of contention is actually probably the `WorkQueue` - the work-stealing deque, the replacement of which is the topic of #4877.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26471692/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26555336",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-26555336",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 26555336,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NTU1MzM2",
    "user": {
      "login": "toffaletti",
      "id": 145012,
      "node_id": "MDQ6VXNlcjE0NTAxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/145012?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toffaletti",
      "html_url": "https://github.com/toffaletti",
      "followers_url": "https://api.github.com/users/toffaletti/followers",
      "following_url": "https://api.github.com/users/toffaletti/following{/other_user}",
      "gists_url": "https://api.github.com/users/toffaletti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toffaletti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toffaletti/subscriptions",
      "organizations_url": "https://api.github.com/users/toffaletti/orgs",
      "repos_url": "https://api.github.com/users/toffaletti/repos",
      "events_url": "https://api.github.com/users/toffaletti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toffaletti/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-17T21:37:08Z",
    "updated_at": "2013-10-17T21:37:08Z",
    "body": "I'll take a shot at the WorkQueue after I get some benchmark and testing in place to measure these changes. I think it'll be about 2-3 weeks before I'll have something more to show.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26555336/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26648324",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-26648324",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 26648324,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NjQ4MzI0",
    "user": {
      "login": "toffaletti",
      "id": 145012,
      "node_id": "MDQ6VXNlcjE0NTAxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/145012?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toffaletti",
      "html_url": "https://github.com/toffaletti",
      "followers_url": "https://api.github.com/users/toffaletti/followers",
      "following_url": "https://api.github.com/users/toffaletti/following{/other_user}",
      "gists_url": "https://api.github.com/users/toffaletti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toffaletti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toffaletti/subscriptions",
      "organizations_url": "https://api.github.com/users/toffaletti/orgs",
      "repos_url": "https://api.github.com/users/toffaletti/repos",
      "events_url": "https://api.github.com/users/toffaletti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toffaletti/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-19T11:26:38Z",
    "updated_at": "2013-10-19T11:26:38Z",
    "body": "My first attempt at implementing the chase-lev deque is pretty ugly.\n\nhttps://github.com/toffaletti/rust-code/blob/master/chase_lev_deque.rs\n\nInterestingly I believe I found a bug in the take function from the C11 implementation in http://www.di.ens.fr/~zappa/readings/ppopp13.pdf. They used unsigned ints for top/bottom while the original algorithm used signed ints. The overflow caused by bottom = bottom - 1 when bottom is 0 would cause the check top <= bottom to pass and take would return a value even when the queue was supposed to be empty. I suspect they never noticed this bug because they were storing ints and weren't distinguishing between 0 as a valid return value and 0 as empty.\n\nI also implemented the deque in C++11 https://github.com/toffaletti/libten/blob/ws_sched/include/ten/work_deque.hh and plugged it into a task scheduler which has a decent test suite. I haven't seen any crashes yet, but helgrind/drd do report some races. I probably have a bug in the memory ordering for array initialization and/or array grow.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26648324/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26959491",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-26959491",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 26959491,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTU5NDkx",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-24T01:04:41Z",
    "updated_at": "2013-10-24T01:04:41Z",
    "body": "I've not forgotten about this PR. I have stress tested it here quite a bit without any failures, so I'm feeling pretty good about it, but I've yet to read the code for the data structures closely, which I want to do still.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26959491/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27137935",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-27137935",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 27137935,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MTM3OTM1",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-26T02:58:49Z",
    "updated_at": "2013-10-26T02:58:49Z",
    "body": "Reopened as #10080\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27137935/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27137989",
    "html_url": "https://github.com/rust-lang/rust/pull/9710#issuecomment-27137989",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9710",
    "id": 27137989,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MTM3OTg5",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-26T03:00:31Z",
    "updated_at": "2013-10-26T03:00:31Z",
    "body": "@toffaletti You may also be interested in #8568\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27137989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
