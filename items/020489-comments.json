[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68612009",
    "html_url": "https://github.com/rust-lang/rust/issues/20489#issuecomment-68612009",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20489",
    "id": 68612009,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NjEyMDA5",
    "user": {
      "login": "Thiez",
      "id": 204550,
      "node_id": "MDQ6VXNlcjIwNDU1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/204550?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Thiez",
      "html_url": "https://github.com/Thiez",
      "followers_url": "https://api.github.com/users/Thiez/followers",
      "following_url": "https://api.github.com/users/Thiez/following{/other_user}",
      "gists_url": "https://api.github.com/users/Thiez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Thiez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Thiez/subscriptions",
      "organizations_url": "https://api.github.com/users/Thiez/orgs",
      "repos_url": "https://api.github.com/users/Thiez/repos",
      "events_url": "https://api.github.com/users/Thiez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Thiez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-03T22:23:35Z",
    "updated_at": "2015-01-03T22:23:47Z",
    "body": "Surely if you wanted the comparison to use `PartialEq`, you would do\n\n``` rust\n#[deriving(PartialEq)]\nstruct Foo<T> {\n    value: T\n}\n\nconst F: Foo<int> = Foo { value: 2 };\n\nfn main() {\n    let x = Foo { value: 2 };\n    match x {\n        _ if x == F => { println!(\"Hi\"); }\n        _ => { println!(\"Ho\"); }\n    }\n}\n```\n\nWhy remove the possibly useful behaviour of using constants as a pattern?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68612009/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68617012",
    "html_url": "https://github.com/rust-lang/rust/issues/20489#issuecomment-68617012",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20489",
    "id": 68617012,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NjE3MDEy",
    "user": {
      "login": "ftxqxd",
      "id": 2055302,
      "node_id": "MDQ6VXNlcjIwNTUzMDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2055302?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ftxqxd",
      "html_url": "https://github.com/ftxqxd",
      "followers_url": "https://api.github.com/users/ftxqxd/followers",
      "following_url": "https://api.github.com/users/ftxqxd/following{/other_user}",
      "gists_url": "https://api.github.com/users/ftxqxd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ftxqxd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ftxqxd/subscriptions",
      "organizations_url": "https://api.github.com/users/ftxqxd/orgs",
      "repos_url": "https://api.github.com/users/ftxqxd/repos",
      "events_url": "https://api.github.com/users/ftxqxd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ftxqxd/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-04T01:32:48Z",
    "updated_at": "2015-01-04T01:32:48Z",
    "body": "I was under the impression that `const`s basically have their values inserted into their use sites. That would make this a perfectly valid example. If we required `PartialEq`, then we might as well allow `static`s in patterns as well. I certainly don\u2019t think we should implicitly run `PartialEq::eq` when pattern matching on constants, so it seems strange to require `PartialEq` to be implemented if the implementation\u2019s never going to be used.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68617012/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68639309",
    "html_url": "https://github.com/rust-lang/rust/issues/20489#issuecomment-68639309",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20489",
    "id": 68639309,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NjM5MzA5",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-04T16:45:41Z",
    "updated_at": "2015-01-04T16:45:41Z",
    "body": "So, all I'd like to do for this bug is to ensure that we limit the types of such constants to scalars (and maybe tuples of scalars), which I'm sure we can all agree ought to work. We can hash out our disagreements about what the correct semantics ought to be over an RFC, I imagine.\n\nBut for the record:\n1. I think that the current system breaks encapsulation. The fields of that structure are private, we shouldn't implicitly accessing and comparing them. We don't know what \"equality\" means for this struct.\n2. Put another way, I think that `match foo { CONSTANT => { ... } }` and `match foo { _ if foo == CONSTANT => { ... } }` ought to be equivalent.\n3. As a consequence, I do think we should invoke `PartialEq` from within the match code, which is why I would want to require that it be implemented.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68639309/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68664145",
    "html_url": "https://github.com/rust-lang/rust/issues/20489#issuecomment-68664145",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20489",
    "id": 68664145,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NjY0MTQ1",
    "user": {
      "login": "pythonesque",
      "id": 923144,
      "node_id": "MDQ6VXNlcjkyMzE0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/923144?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pythonesque",
      "html_url": "https://github.com/pythonesque",
      "followers_url": "https://api.github.com/users/pythonesque/followers",
      "following_url": "https://api.github.com/users/pythonesque/following{/other_user}",
      "gists_url": "https://api.github.com/users/pythonesque/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pythonesque/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pythonesque/subscriptions",
      "organizations_url": "https://api.github.com/users/pythonesque/orgs",
      "repos_url": "https://api.github.com/users/pythonesque/repos",
      "events_url": "https://api.github.com/users/pythonesque/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pythonesque/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-05T03:18:59Z",
    "updated_at": "2015-01-05T03:18:59Z",
    "body": "I really can't agree on this.  I don't expect pattern matching to run arbitrary code (which is what running the `PartialEq` implementation would do).  If the two things in your second bullet are supposed to be equivalent, I don't see why matching on a constant should even be allowed, since it doesn't provide any additional functionality over pattern guards.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68664145/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/122436895",
    "html_url": "https://github.com/rust-lang/rust/issues/20489#issuecomment-122436895",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20489",
    "id": 122436895,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMjQzNjg5NQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-17T22:35:37Z",
    "updated_at": "2015-07-17T22:36:09Z",
    "body": "It appears this bug was closed accidentally. I still think this is something we'll have to resolve -- right now, you can match on types that don't implement `PartialEq` at all, and if they do implement it, the match code semantics do not align with what `PartialEq` implements. This seems bad. Having `match x { FOO => ... }` and `match x { y if x == FOO => }` both be accepted but different in subtle ways seems clearly suboptimal to me.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/122436895/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/122437008",
    "html_url": "https://github.com/rust-lang/rust/issues/20489#issuecomment-122437008",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20489",
    "id": 122437008,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMjQzNzAwOA==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-17T22:36:37Z",
    "updated_at": "2015-07-17T22:36:37Z",
    "body": "I'll note that in the MIR desugaring branch this becomes much easier to handle.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/122437008/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/126828760",
    "html_url": "https://github.com/rust-lang/rust/issues/20489#issuecomment-126828760",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20489",
    "id": 126828760,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNjgyODc2MA==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-31T22:38:34Z",
    "updated_at": "2015-07-31T22:38:34Z",
    "body": "triage: P-medium\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/126828760/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147385296",
    "html_url": "https://github.com/rust-lang/rust/issues/20489#issuecomment-147385296",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20489",
    "id": 147385296,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzM4NTI5Ng==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-12T12:41:55Z",
    "updated_at": "2015-10-12T12:41:55Z",
    "body": "Pattern matching is always structural (as I know it from both Rust and other languages), this bug report is very surprising to me.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147385296/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150803818",
    "html_url": "https://github.com/rust-lang/rust/issues/20489#issuecomment-150803818",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20489",
    "id": 150803818,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MDgwMzgxOA==",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-24T12:18:11Z",
    "updated_at": "2015-10-24T12:18:11Z",
    "body": "> I really can't agree on this.\n\n+1\n\n> Pattern matching is always structural (as I know it from both Rust and other languages), this bug report is very surprising to me.\n\n+1\n\n@nikomatsakis \nAFAIR, it was your own idea to treat\n\n```\nstrust S;\n```\n\nas\n\n```\nstruct S {}\nconst S: S = S {}\n```\n\nGiven that interpretation, in the next example `S` and `None` are not structure patterns, but constants of types `S` and `Option<u8>`.\n\n```\nstruct S;\n\nenum Option<T> {\n    Some(T),\n    None,\n}\n\nlet s = S;\nmatch s {\n    S => {}\n}\n\nlet opt = Some(0u8);\nmatch opt {\n    None => {}\n    _ => {}\n}\n```\n\nShould this matching involve `PartialEq`? No way! It means that these constants should be somehow special-cased and the interpretation above doesn't really hold. (Not mentioning the fact, that no one expects `PartialEq` to be run in matches, as @bluss mentioned)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150803818/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150848183",
    "html_url": "https://github.com/rust-lang/rust/issues/20489#issuecomment-150848183",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20489",
    "id": 150848183,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MDg0ODE4Mw==",
    "user": {
      "login": "Thiez",
      "id": 204550,
      "node_id": "MDQ6VXNlcjIwNDU1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/204550?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Thiez",
      "html_url": "https://github.com/Thiez",
      "followers_url": "https://api.github.com/users/Thiez/followers",
      "following_url": "https://api.github.com/users/Thiez/following{/other_user}",
      "gists_url": "https://api.github.com/users/Thiez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Thiez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Thiez/subscriptions",
      "organizations_url": "https://api.github.com/users/Thiez/orgs",
      "repos_url": "https://api.github.com/users/Thiez/repos",
      "events_url": "https://api.github.com/users/Thiez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Thiez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-24T20:35:15Z",
    "updated_at": "2015-10-24T20:35:15Z",
    "body": "I have a hard time imagining how one would even implement `PartialEq` for types such as `Option` without being able to use `match`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150848183/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151255263",
    "html_url": "https://github.com/rust-lang/rust/issues/20489#issuecomment-151255263",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20489",
    "id": 151255263,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MTI1NTI2Mw==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-26T19:19:55Z",
    "updated_at": "2015-10-26T19:19:55Z",
    "body": "@petrochenkov yeah, but I no longer stand by that idea. I think it's a good guiding principle, but there is a definite distinction between an _enum variant_ and a constant like:\n\n``` rust\nstruct Foo { x: i32 }\nconst fn make_foo(x: i32) -> Foo { Foo { x: x } }\n...\nconst EXAMPLE: Foo = make_foo(22);\n...\nmatch something {\n    EXAMPLE => ...\n}\n```\n\nwhat we currently do now in cases like these is to treat that final match _as if_ you wrote:\n\n``` rust\nmatch something {\n    Foo { x: 22 } => ...\n}\n```\n\nThis effectively introduces two forms of equality: normal equality (`==`) and structural-equality (`match`). I don't think this is a good idea. If you match on a constant (note: not an enum variant), I think it should have the same semantics as `==` (if both are accepted). Note that I think it might be ok to have it be an error to `match` on a constant (e.g., Haskell does not accept this, iiuc, as requires you to write `match foo { x if x == EXAMPLE =>` instead).\n\nIn particular, there is something about taking a constant that is computed through an arbitrary complex compile-time expression and \"boiling it down\" to the particular result that feels like a violation of abstraction boundaries. Let me give you another example. Imagine I wrote:\n\n``` rust\nmod foo {\n    pub struct Foo { b: bool }\n    pub const V1: Foo = Foo { b: true };\n    pub const V2: Foo = Foo { b: false };\n}\n```\n\nNote that there is an abstraction boundary here: `b` is a private field. But now if I wrote code from another module that matches on a value of type `Foo`, that abstraction boundary is pierced:\n\n``` rust\nfn bar(f: x::Foo) {\n    // rustc knows this is exhaustive because if expanded `V1` into equivalent\n    // patterns; patterns you could not write by hand!\n    match f {\n        x::V1 => { }\n        x::V2 => { }\n    }\n}\n```\n\nThis seems bad to me. Now if I add new fields to `Foo`, or perhaps change that `b` field to an `i32`, suddenly those examples stop compiling. \n\n(On play: http://is.gd/exTrhs)\n\nAnyway, it seems clear that this topic is controversial enough that it merits a wider audience. I've been planning for some time (months now!) to write an RFC. Things are coming to a head with the MIR rewrite, which requires us to reimplement pattern matching anyhow, and thus makes a good chance to make sure it is doing what we want it to.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151255263/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151266734",
    "html_url": "https://github.com/rust-lang/rust/issues/20489#issuecomment-151266734",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20489",
    "id": 151266734,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MTI2NjczNA==",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-26T20:02:25Z",
    "updated_at": "2015-10-26T20:32:12Z",
    "body": "@nikomatsakis \nYesterday I almost wrote about prohibiting matching on constants with types containing private fields (possibly nested), but stopped after realizing that matching on `None::<StructWithPrivateFields>` would be prohibited as well.\nBut it is apparently solvable by a small tweak - instead of prohibiting private fields in constant _types_, we can prohibit them in constant _values_. This way a \"matchable\" constant is completely \"open\" - it's just a shortcut for a struct literal expression and abstraction boundaries are not violated. Also, enum-variant-constants never contain private fields, so the mental model about unit structs/variants and constants stays in place.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151266734/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151268684",
    "html_url": "https://github.com/rust-lang/rust/issues/20489#issuecomment-151268684",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20489",
    "id": 151268684,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MTI2ODY4NA==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-26T20:09:50Z",
    "updated_at": "2015-10-26T20:10:47Z",
    "body": "+1 for \"ban constants that assign a value to a private field\". Maybe even make matching against `NaN` do the right thing.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151268684/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151809853",
    "html_url": "https://github.com/rust-lang/rust/issues/20489#issuecomment-151809853",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20489",
    "id": 151809853,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MTgwOTg1Mw==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-28T11:34:24Z",
    "updated_at": "2015-10-28T11:34:24Z",
    "body": "I opened a discussion thread here: https://internals.rust-lang.org/t/how-to-handle-pattern-matching-on-constants/2846 I also tried to lay out the pros/cons as I see them. Please add additional considerations I forgot about!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151809853/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/232736477",
    "html_url": "https://github.com/rust-lang/rust/issues/20489#issuecomment-232736477",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20489",
    "id": 232736477,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMjczNjQ3Nw==",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-07-14T17:36:30Z",
    "updated_at": "2016-07-14T17:36:30Z",
    "body": "Closing in favor of https://github.com/rust-lang/rust/issues/31434\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/232736477/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
