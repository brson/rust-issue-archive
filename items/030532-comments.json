[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166847883",
    "html_url": "https://github.com/rust-lang/rust/pull/30532#issuecomment-166847883",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30532",
    "id": 166847883,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2Njg0Nzg4Mw==",
    "user": {
      "login": "michaelwoerister",
      "id": 1825894,
      "node_id": "MDQ6VXNlcjE4MjU4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelwoerister",
      "html_url": "https://github.com/michaelwoerister",
      "followers_url": "https://api.github.com/users/michaelwoerister/followers",
      "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelwoerister/orgs",
      "repos_url": "https://api.github.com/users/michaelwoerister/repos",
      "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelwoerister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-23T09:43:50Z",
    "updated_at": "2015-12-23T09:43:50Z",
    "body": "I'll take a close look at this later today.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166847883/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166849267",
    "html_url": "https://github.com/rust-lang/rust/pull/30532#issuecomment-166849267",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30532",
    "id": 166849267,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2Njg0OTI2Nw==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-23T09:47:02Z",
    "updated_at": "2015-12-23T09:47:02Z",
    "body": "@michaelwoerister \n\nI never replied to [this comment](https://github.com/rust-lang/rust/pull/30393#discussion_r47840272) of yours, sorry:\n\n> So, one other way to structure this would be to not have separate TypeScheme and TCache nodes at all, because essentially they describe the same thing\n\nI think this is equivalent to the current setup in terms of the final result. It might result in a more _compact_ dependency graph (fewer edges), which seems like a good thing, but I see it as a bit of an optimization that strays from the mostly \"pure\" form that I've done so far. Still, might be a good idea just because a smaller dep graph is generally a win.\n\nThe \"pure\" form I am describing is that we keep a split between \"fn\" and \"data\". That is, we have various task nodes, like `CollectItem` and `TypeScheme`, that correspond to bits of code that are executing, and then we have nodes that correspond to data, like `Signature` (was `TCache` before). You always push and keep track of your current fn node, and you track which data nodes it accesses and which subprocedures it invokes. \n\n> That would avoid adding artificial edges ...\n\nHmm. Well, first, I don't see that the edge from task to subtask is \"artificial\": it models return values. That is, pushing a subtask corresponds to calling a fn or something like that, which has a return value. If we were to omit the edges from task to subtask, then there would be cases where that return value allows data to leak in a kind of subtle way, like so:\n\n``` rust\nfn foo(tcx: DepGraph, key: Key) -> Ty<'tcx> {\n    let _task = tcx.dep_graph.in_task(Foo);\n    tcx.some_map[&key]\n}\n```\n\nNote though there is a corresponding potential for a leak that comes through the arguments. That is, when entering a new task, you must \"account for\" all the data you gained access through implicitly from your scope:\n\n``` rust\nfn foo(tcx: DepGraph, def_id: DefId, ty: Ty<'tcx>) -> Ty<'tcx> {\n    // here, `ty` is the type of `def_id`\n    let _task = tcx.dep_graph.in_task(Foo);\n    use(ty); // this read would otherwise go unnoticed\n    tcx.some_map[&def_id]\n}\n```\n\nSo in a case like this you should add `tcx.dep_graph.read(Something(def_id))`. But because the tasks are relatively coarse, I haven't found this to come up that often, though I may be missing something. We could require that task bodies are `fn()` pointers to try and rule this out statically, but it seems unnecessary to me. Time will tell I guess.\n\nSo I guess I could see an argument that we should treat arguments/return-values the same way: you must account for any and all data that comes in/out of a task with explicit reads/writes (or perhaps we add some helper called `read_task` form that adds the read for you, but `in_task` does not). And so long as tasks communicate by mutating shared maps (or other tracked state), this all happens automatically.\n\n> ...and lead to a cleaner, more stable dependency graph (in this case at least). More stable because the graph would not depend on (re-)execution order.\n\nI guess here you are suggesting that one task might invoke another in some kind of random order? \nI don't think that happens in our code base at the moment: tasks only invoke one another when they are a logical subtask. To have a problem there you'd have to have a setup where a task recursively invokes another subtask, but that subtask is chosen from a queue or some random order. I don't see why one would ever do that: it'd be wasteful of your stack, to start.\n\nStill, I do sort of like the idea of distinguishing `read_task` from `enter_task` (today's `in_task`). IIRC the vast majority of tasks today communicate only via shared state anyway, it's a small number that use return values. And as I wrote above, you always want to be aware of tracked state that is entering your task, maybe it's easier to think of all tracked state that is entering or exiting your task consistently.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166849267/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166855511",
    "html_url": "https://github.com/rust-lang/rust/pull/30532#issuecomment-166855511",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30532",
    "id": 166855511,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2Njg1NTUxMQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-23T10:17:25Z",
    "updated_at": "2015-12-23T10:17:25Z",
    "body": "@michaelwoerister so I sort of forgot the context of the last comment in writing my reply. I think I stand by everything I said, but I had forgotten we were talking about memoized maps in particular. Thinking about this more, I agree with you that the best approach is to say that the \"current task\" in such a case _is_ the node for the map-entry itself that we are looking up. I still think it's equivalent to the setup that exists today though.\n\nI was debating about integrating this into the `memoized` helper routine itself. that is, rather than generating a read (as today) if the value is not present, and otherwise invoking the closure and generating a write, it would instead push a new task corresponding to the key entry (and add a read from the previous task to this new one). We can then ignore the reads/writes on the map _itself_. So for the example where you have both `foo` and `bar` that access `baz`, if our map entry is `Signature(baz)`, then you'd wind up with the following edges:\n\n```\nSignature(baz) -> foo\nSignature(baz) -> bar\nHir(baz) -> Signature(baz)\n```\n\nThe interesting tricky case is that final edge. If we go back to the code in question, it would now look something like:\n\n```\nfn signature(ccx, item: &hir::Item) {\n    memoized(..., || {\n        ccx.tcx.dep_graph.read(Hir(item_def_id)); // XXX\n        compute_signature(ccx, item));\n    });\n}\n```\n\nNote the line marked `XXX`: this is where the `Hir(baz) -> Signature(baz)` edge would derive from. This seems awfully subtle: the task creation is now kind of non-obvious, because it is packed into the memoized routine. This seems bad.\n\nOther options:\n- leave the code as it is, but just remove the `TypeScheme` task and change it to the corresponding data node (with a read edge)\n- the memoized routine could _assert_ that the current task is the one it wants.\n- the memoized routine could use OIBITs to rule out that you pass in any HIR nodes or other tracked data (*)\n\nFor now I think I prefer the first choice, which is roughly what you suggested. The last idea sounds cool but seems like it's getting just a bit too clever. Maybe worth experimenting with though, it would really help make the system more bullet-proof.\n\n(*) I'm actually not entirely clear on what that set is. Certainly HIR nodes. But probably `Ty<'tcx>` and other computed results too. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166855511/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166856518",
    "html_url": "https://github.com/rust-lang/rust/pull/30532#issuecomment-166856518",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30532",
    "id": 166856518,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2Njg1NjUxOA==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-23T10:25:39Z",
    "updated_at": "2015-12-23T10:25:39Z",
    "body": "I've also been thinking about these \"meta-nodes\" like `Trans`, `Coherence`, and `Dropck`. These basically correspond to big passes that need to read some state and traverse a bunch of items, but never represent a phase that we would skip outright, unless we've concluded that the _entire crate_ is precisely the same (which IS something we should check for; but we should bail way earlier in that case).\n\nIt's not clear to me that it is useful to push such tasks. It seems like pure overhead. It would be better to replace them with two distinct tasks, I think: \"read-only\" and \"meta\". The rule of thumb would be something like this:\n- push a new task if the following conditions are met:\n  - you can narrow down the set of inputs to this task beyond \"anything in the entire krate\"\n  - the task generates output\n- otherwise, push one of the following:\n  - `read-only` if you believe this task does not mutate any shared state\n  - the `meta` task otherwise\n\nNote that using `meta` would be best avoided, because it basically corresponds to \"work that has to be redone if ANYTHING AT ALL changed\". So, if you wind up writing to shared state `foo` and `bar` from the meta task, you will have a graph like:\n\n```\nkrate -> meta\nmeta -> foo\nmeta -> bar\n```\n\nNow _anything_ that depends on `foo` and `bar` will have to be rewritten if _anything_ in the krate changes. \n\nNote that I'm actually not aware of any places that we need the Meta task. I think read-only suffices. But it does seem like something we might want in general.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166856518/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/167122025",
    "html_url": "https://github.com/rust-lang/rust/pull/30532#issuecomment-167122025",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30532",
    "id": 167122025,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NzEyMjAyNQ==",
    "user": {
      "login": "michaelwoerister",
      "id": 1825894,
      "node_id": "MDQ6VXNlcjE4MjU4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelwoerister",
      "html_url": "https://github.com/michaelwoerister",
      "followers_url": "https://api.github.com/users/michaelwoerister/followers",
      "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelwoerister/orgs",
      "repos_url": "https://api.github.com/users/michaelwoerister/repos",
      "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelwoerister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-24T15:07:40Z",
    "updated_at": "2015-12-24T15:07:40Z",
    "body": "> The \"pure\" form I am describing is that we keep a split between \"fn\" and \"data\".\n\nI think we are just talking about two different but equivalent dependency tracking models here. In mine, there's _only_ data, while yours also has nodes for functions/tasks being executed. There is not much of a difference though as long functions don't have side-effects other than writing the piece of data that they are supposed to produce, just that from the perspective of a \"data-only\" model, the \"fn+data\" model introduces an \"artificial\" intermediate node:\n\n```\nfn+data graph:\n\ninput0--+\n        |\ninput1--+---> fn --> output\n        |\ninput2--+\n\ndata-only graph:\n\ninput0--+\n        |\ninput1--+---> output\n        |\ninput2--+\n\n```\n\nAs long as we are only interested in data, and each piece of data has a unique key, I think it's simple to reason about. Each piece of code that contributes to the value of some piece of data just has to say so by specifying the key of that piece of data before reading any inputs -- i.e., just what `enter_task` does. Which function or pass creates an edge is only interesting for debugging purposes (the RFC implicitly says as much, if I remember correctly, being stating that fn nodes could be omitted from the graph before persisting). \n\nIn the end, it does not matter which model we want to follow, as long as we know how to reason about it and it is simple to use in practice. The data-only model is simpler, I think, but it might be less obvious to use, since it doesn't correspond as closely to the structure of the code itself. On the other hand, a \"false correspondence\", i.e. something that works almost like something else but doesn't in corner cases, can be its own source of bugs and confusion.\n\n> Well, first, I don't see that the edge from task to subtask is \"artificial\": it models return values.\n\nTrue, when function executions are modeled within the dependency graph, they are not. As said above, it's modeling function executions in the graph itself that can be viewed as artificial.\n\n> I guess here you are suggesting that one task might invoke another in some kind of random order?\n\nI was thinking of two things here:\n- Introducing intra-pass parallelism would lead to local execution order indeterminism \n- Changing the program in semantically insignificant ways, like changing the order of items within a module, would also lead to a different dependency graph for the \"same\" program.\n\nBoth of these things would not lead to incorrect results, but I do see them as kind of a code smell.\n\n> Note though there is a corresponding potential for a leak that comes through the arguments. That is, when entering a new task, you must \"account for\" all the data you gained access through implicitly from your scope.\n\nMaybe we could think about introducing something like a `Tracked<T>` type (with a better name) that is just a thin wrapper around something that needs to be tracked. Accessing the value would then introduce the edge, and as much of the code as possible would use these instead of the \"raw\" values (i.e. a `Tracked<Ty>` instead of a `Ty`). The upside of this would be that you don't have to worry about dependency tracking when you use such a value. Downsides of this approach would be that (1) it would potentially introduce overhead if the underlying value is accessed more than once (though that could be alleviated through some optimizations) and (2) it might clutter internal APIs if introduced pervasively.\n\n> We could require that task bodies are fn() pointers to try and rule this out statically, but it seems unnecessary to me.\n\nIt's definitely a neat idea. I like how Rust allows one to express such things `:)`\n\n> Note the line marked XXX: this is where the Hir(baz) -> Signature(baz) edge would derive from. This seems awfully subtle: the task creation is now kind of non-obvious, because it is packed into the memoized routine. This seems bad.\n\nI would probably move the `read` from the closure into `compute_signature`, since computing a signature will always add a dependency to the HIR node. It would then not seem subtle to me. Although I certainly also see the advantages of trying to keep dependency tracking separate from pure algorithm implementations.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/167122025/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/168724289",
    "html_url": "https://github.com/rust-lang/rust/pull/30532#issuecomment-168724289",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30532",
    "id": 168724289,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2ODcyNDI4OQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-04T16:28:36Z",
    "updated_at": "2016-01-04T16:28:36Z",
    "body": "> I think we are just talking about two different but equivalent dependency tracking models here. In mine, there's only data, while yours also has nodes for functions/tasks being executed. \n\nThis seems about right. \n\nWhat is appealing to me about the design I originally put forward is that one can instrument the code in a naive and direct way, just by mapping out the structure of the tasks it is doing, and by identifying the shared state. This accommodates all kind of code, including functions that produce multiple values or which don't produce any value at all (e.g., lint checking).\n\nHowever, I think what I really want it so adopt a kind of hybrid. That is, where it makes sense, we can conflate the task nodes with the nodes for the value that they are producing. I do this already for memoized tables in some places, and it probably makes sense to do it in the type-checking case. Basically there are places where having distinct nodes for the table and the code that populates it feels sort of artificial, and I think in those cases it makes sense to use a single node.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/168724289/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169196432",
    "html_url": "https://github.com/rust-lang/rust/pull/30532#issuecomment-169196432",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30532",
    "id": 169196432,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2OTE5NjQzMg==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-06T02:08:53Z",
    "updated_at": "2016-01-06T02:08:53Z",
    "body": "@michaelwoerister ok, pushed an updated version. It turned out I was wrong about the overhead -- measurements now show around 1 or 2% building rustdoc, and it appears to be _slightly_ faster if you check for a boolean enabled flag. In any case, this isn't quite ready to land -- there are some TODOs for which I should open separate issues, for example -- but it's ready to review, I think. (Essentially, I'd like to land basically this code and go from there.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169196432/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169304730",
    "html_url": "https://github.com/rust-lang/rust/pull/30532#issuecomment-169304730",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30532",
    "id": 169304730,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2OTMwNDczMA==",
    "user": {
      "login": "michaelwoerister",
      "id": 1825894,
      "node_id": "MDQ6VXNlcjE4MjU4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelwoerister",
      "html_url": "https://github.com/michaelwoerister",
      "followers_url": "https://api.github.com/users/michaelwoerister/followers",
      "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelwoerister/orgs",
      "repos_url": "https://api.github.com/users/michaelwoerister/repos",
      "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelwoerister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-06T11:39:52Z",
    "updated_at": "2016-01-06T11:39:52Z",
    "body": "Looks very good! Great readme, nice incremental improvements over the previous version too.\nr=me when nits are addressed. (see also `make tidy` [errors](https://travis-ci.org/rust-lang/rust/builds/100497286))\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169304730/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169380115",
    "html_url": "https://github.com/rust-lang/rust/pull/30532#issuecomment-169380115",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30532",
    "id": 169380115,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2OTM4MDExNQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-06T16:30:52Z",
    "updated_at": "2016-01-06T16:30:52Z",
    "body": "@bors r=mw\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169380115/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169380116",
    "html_url": "https://github.com/rust-lang/rust/pull/30532#issuecomment-169380116",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30532",
    "id": 169380116,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2OTM4MDExNg==",
    "user": {
      "login": "bors",
      "id": 3372342,
      "node_id": "MDQ6VXNlcjMzNzIzNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bors",
      "html_url": "https://github.com/bors",
      "followers_url": "https://api.github.com/users/bors/followers",
      "following_url": "https://api.github.com/users/bors/following{/other_user}",
      "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
      "organizations_url": "https://api.github.com/users/bors/orgs",
      "repos_url": "https://api.github.com/users/bors/repos",
      "events_url": "https://api.github.com/users/bors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bors/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-06T16:30:53Z",
    "updated_at": "2016-01-06T16:30:53Z",
    "body": ":pushpin: Commit 93996b1 has been approved by `mw`\n\n<!-- @bors r=mw 93996b160ce319f864fbab6c9243048c4d65704c -->\n",
    "author_association": "COLLABORATOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169380116/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169413984",
    "html_url": "https://github.com/rust-lang/rust/pull/30532#issuecomment-169413984",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30532",
    "id": 169413984,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2OTQxMzk4NA==",
    "user": {
      "login": "bors",
      "id": 3372342,
      "node_id": "MDQ6VXNlcjMzNzIzNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bors",
      "html_url": "https://github.com/bors",
      "followers_url": "https://api.github.com/users/bors/followers",
      "following_url": "https://api.github.com/users/bors/following{/other_user}",
      "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
      "organizations_url": "https://api.github.com/users/bors/orgs",
      "repos_url": "https://api.github.com/users/bors/repos",
      "events_url": "https://api.github.com/users/bors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bors/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-06T18:37:58Z",
    "updated_at": "2016-01-06T18:37:58Z",
    "body": ":hourglass: Testing commit 93996b1 with merge e8c337b...\n",
    "author_association": "COLLABORATOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169413984/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169452361",
    "html_url": "https://github.com/rust-lang/rust/pull/30532#issuecomment-169452361",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30532",
    "id": 169452361,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2OTQ1MjM2MQ==",
    "user": {
      "login": "bors",
      "id": 3372342,
      "node_id": "MDQ6VXNlcjMzNzIzNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bors",
      "html_url": "https://github.com/bors",
      "followers_url": "https://api.github.com/users/bors/followers",
      "following_url": "https://api.github.com/users/bors/following{/other_user}",
      "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
      "organizations_url": "https://api.github.com/users/bors/orgs",
      "repos_url": "https://api.github.com/users/bors/repos",
      "events_url": "https://api.github.com/users/bors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bors/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-06T20:30:53Z",
    "updated_at": "2016-01-06T20:30:53Z",
    "body": ":sunny: Test successful - [auto-linux-32-nopt-t](http://buildbot.rust-lang.org/builders/auto-linux-32-nopt-t/builds/7610), [auto-linux-32-opt](http://buildbot.rust-lang.org/builders/auto-linux-32-opt/builds/7630), [auto-linux-64-debug-opt](http://buildbot.rust-lang.org/builders/auto-linux-64-debug-opt/builds/883), [auto-linux-64-nopt-t](http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/7568), [auto-linux-64-opt](http://buildbot.rust-lang.org/builders/auto-linux-64-opt/builds/7586), [auto-linux-64-x-android-t](http://buildbot.rust-lang.org/builders/auto-linux-64-x-android-t/builds/7571), [auto-linux-cross-opt](http://buildbot.rust-lang.org/builders/auto-linux-cross-opt/builds/795), [auto-linux-musl-64-opt](http://buildbot.rust-lang.org/builders/auto-linux-musl-64-opt/builds/2746), [auto-mac-32-opt](http://buildbot.rust-lang.org/builders/auto-mac-32-opt/builds/7637), [auto-mac-64-nopt-t](http://buildbot.rust-lang.org/builders/auto-mac-64-nopt-t/builds/7631), [auto-mac-64-opt](http://buildbot.rust-lang.org/builders/auto-mac-64-opt/builds/7595), [auto-win-gnu-32-nopt-t](http://buildbot.rust-lang.org/builders/auto-win-gnu-32-nopt-t/builds/2602), [auto-win-gnu-32-opt](http://buildbot.rust-lang.org/builders/auto-win-gnu-32-opt/builds/2616), [auto-win-gnu-64-nopt-t](http://buildbot.rust-lang.org/builders/auto-win-gnu-64-nopt-t/builds/2617), [auto-win-gnu-64-opt](http://buildbot.rust-lang.org/builders/auto-win-gnu-64-opt/builds/2596), [auto-win-msvc-32-opt](http://buildbot.rust-lang.org/builders/auto-win-msvc-32-opt/builds/1847), [auto-win-msvc-64-opt](http://buildbot.rust-lang.org/builders/auto-win-msvc-64-opt/builds/2598)\n",
    "author_association": "COLLABORATOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169452361/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
