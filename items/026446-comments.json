[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113762710",
    "html_url": "https://github.com/rust-lang/rust/issues/26446#issuecomment-113762710",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26446",
    "id": 113762710,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzc2MjcxMA==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-20T13:04:06Z",
    "updated_at": "2015-06-20T13:04:06Z",
    "body": "There are three possible solutions here: timeout, close the TCP listener, or select/epoll on a control channel. Eventually, we probably want all three but the simplest one to implement is closing the TCP listener (you can actually do this now with a bit of unsafe code (just manually close the file descriptor)).\n\nAnother solution is to send an interrupt signal to the listener thread but I don't know how rust wants to handle interrupts.\n\nRegardless, this issue goes on in the RFC repo.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113762710/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113777176",
    "html_url": "https://github.com/rust-lang/rust/issues/26446#issuecomment-113777176",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26446",
    "id": 113777176,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzc3NzE3Ng==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-20T14:59:11Z",
    "updated_at": "2015-06-20T14:59:11Z",
    "body": "@Stebalien Not sure if this is the place to detail such things, but could you explain how polling a \"control\" channel might fix this? Wouldn't we be in the same place regarding the fact that the IO is blocking and we can't rely on it to check a channel?\n\nIn my opinion (read: \"I might be wrong, but\"), the only safe, semantic design I can picture is all blocking `Read` implementations having some way to cause them to return `Err(_)` on read. In which case, I like the idea of having a method that just allows you to cause a certain `Err(SpecificError)` once only, without any other side effects (closing the stream, etc.) This way, you can simply give the thread a chance to check the state of other things.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113777176/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113861932",
    "html_url": "https://github.com/rust-lang/rust/issues/26446#issuecomment-113861932",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26446",
    "id": 113861932,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzg2MTkzMg==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-21T03:55:28Z",
    "updated_at": "2015-06-21T03:55:28Z",
    "body": "> Wouldn't we be in the same place regarding the fact that the IO is blocking and we can't rely on it to check a channel?\n\nAs of 1.1, you can get the raw file descriptor for a TcpListener. This means that, on Linux at least, you can use the epoll/select system calls to block on _both_ a control file descriptor (some other file descriptor such as an eventfd) and the TcpListener's fd. You could then write to the control file descriptor causing the select/epoll call to return. Obviously, this requires a fair bit of low-level code so it would be nice if the standard library provided some abstractions here.\n\n> In my opinion (read: \"I might be wrong, but\"), the only safe, semantic design I can picture is all blocking Read implementations having some way to cause them to return Err(_) on read. In which case, I like the idea of having a method that just allows you to cause a certain Err(SpecificError) once only, without any other side effects (closing the stream, etc.) This way, you can simply give the thread a chance to check the state of other things.\n\nThat's what interrupts are for. If you send a SIGINT to the blocking thread, the read should stop blocking and should return an `io::Error` (with `io::ErrorKind::Interrupted`).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113861932/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113992763",
    "html_url": "https://github.com/rust-lang/rust/issues/26446#issuecomment-113992763",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26446",
    "id": 113992763,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzk5Mjc2Mw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-22T03:31:49Z",
    "updated_at": "2015-06-22T03:31:49Z",
    "body": "As @Stebalien mentions, there isn't currently a way to do this in the standard library and it's also unclear how it would be done in a \"standard fashion\" if at all. Unfortunately the underlying system does not give the ability to return from a blocking `accept` call, a different system altogether needs o be used (e.g. epoll/select as @Stebalien mentioned).\n\nAs a result I'm going to close this issue for now, but I would certainly recommend checking out [mio](http://github.com/carllerche/mio) and/or opening an RFC issue on this topic, although it may fall under the \"async I/O story\" more than wanting its own issue.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113992763/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/227448715",
    "html_url": "https://github.com/rust-lang/rust/issues/26446#issuecomment-227448715",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26446",
    "id": 227448715,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzQ0ODcxNQ==",
    "user": {
      "login": "anil1596",
      "id": 10175367,
      "node_id": "MDQ6VXNlcjEwMTc1MzY3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10175367?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/anil1596",
      "html_url": "https://github.com/anil1596",
      "followers_url": "https://api.github.com/users/anil1596/followers",
      "following_url": "https://api.github.com/users/anil1596/following{/other_user}",
      "gists_url": "https://api.github.com/users/anil1596/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/anil1596/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/anil1596/subscriptions",
      "organizations_url": "https://api.github.com/users/anil1596/orgs",
      "repos_url": "https://api.github.com/users/anil1596/repos",
      "events_url": "https://api.github.com/users/anil1596/events{/privacy}",
      "received_events_url": "https://api.github.com/users/anil1596/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-21T14:00:37Z",
    "updated_at": "2016-06-21T14:01:35Z",
    "body": "fn  main(){\nlet listener = TcpListener::bind(\"127.0.0.1:8080\").unwrap();\nprintln!(\"{:?}\",listener);\n}\nIt gives the result :  \nTcpListener { addr: V4(127.0.0.1:8080), fd: 3 }\n\nhow can extract fd from the listener???\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/227448715/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/227460486",
    "html_url": "https://github.com/rust-lang/rust/issues/26446#issuecomment-227460486",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26446",
    "id": 227460486,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzQ2MDQ4Ng==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-21T14:38:44Z",
    "updated_at": "2016-06-21T14:38:44Z",
    "body": "@anil1596 You can use the `IntoRawFd` trait on unix or `IntoRawHandle` trait on windows.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/227460486/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/227645282",
    "html_url": "https://github.com/rust-lang/rust/issues/26446#issuecomment-227645282",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26446",
    "id": 227645282,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzY0NTI4Mg==",
    "user": {
      "login": "anil1596",
      "id": 10175367,
      "node_id": "MDQ6VXNlcjEwMTc1MzY3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10175367?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/anil1596",
      "html_url": "https://github.com/anil1596",
      "followers_url": "https://api.github.com/users/anil1596/followers",
      "following_url": "https://api.github.com/users/anil1596/following{/other_user}",
      "gists_url": "https://api.github.com/users/anil1596/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/anil1596/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/anil1596/subscriptions",
      "organizations_url": "https://api.github.com/users/anil1596/orgs",
      "repos_url": "https://api.github.com/users/anil1596/repos",
      "events_url": "https://api.github.com/users/anil1596/events{/privacy}",
      "received_events_url": "https://api.github.com/users/anil1596/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-22T05:12:02Z",
    "updated_at": "2016-06-22T05:12:02Z",
    "body": "@Stebalien that worked with implementation of AsRawFd trait.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/227645282/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/227765142",
    "html_url": "https://github.com/rust-lang/rust/issues/26446#issuecomment-227765142",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26446",
    "id": 227765142,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzc2NTE0Mg==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-22T14:39:08Z",
    "updated_at": "2016-06-22T14:39:08Z",
    "body": "@anil1596 What precisely are you trying to do?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/227765142/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228001868",
    "html_url": "https://github.com/rust-lang/rust/issues/26446#issuecomment-228001868",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26446",
    "id": 228001868,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODAwMTg2OA==",
    "user": {
      "login": "anil1596",
      "id": 10175367,
      "node_id": "MDQ6VXNlcjEwMTc1MzY3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10175367?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/anil1596",
      "html_url": "https://github.com/anil1596",
      "followers_url": "https://api.github.com/users/anil1596/followers",
      "following_url": "https://api.github.com/users/anil1596/following{/other_user}",
      "gists_url": "https://api.github.com/users/anil1596/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/anil1596/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/anil1596/subscriptions",
      "organizations_url": "https://api.github.com/users/anil1596/orgs",
      "repos_url": "https://api.github.com/users/anil1596/repos",
      "events_url": "https://api.github.com/users/anil1596/events{/privacy}",
      "received_events_url": "https://api.github.com/users/anil1596/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-23T09:47:28Z",
    "updated_at": "2016-06-23T09:47:28Z",
    "body": "@Stebalien I am implementing I/O notification facility based on epoll in rust.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228001868/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228063850",
    "html_url": "https://github.com/rust-lang/rust/issues/26446#issuecomment-228063850",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26446",
    "id": 228063850,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODA2Mzg1MA==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-23T14:16:37Z",
    "updated_at": "2016-06-23T14:16:37Z",
    "body": "@anil1596 got it. Yes, you want AsRawFd.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228063850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
