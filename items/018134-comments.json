[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59601215",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-59601215",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 59601215,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjAxMjE1",
    "user": {
      "login": "Zoxc",
      "id": 25784,
      "node_id": "MDQ6VXNlcjI1Nzg0",
      "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Zoxc",
      "html_url": "https://github.com/Zoxc",
      "followers_url": "https://api.github.com/users/Zoxc/followers",
      "following_url": "https://api.github.com/users/Zoxc/following{/other_user}",
      "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions",
      "organizations_url": "https://api.github.com/users/Zoxc/orgs",
      "repos_url": "https://api.github.com/users/Zoxc/repos",
      "events_url": "https://api.github.com/users/Zoxc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Zoxc/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-18T06:47:01Z",
    "updated_at": "2014-10-18T06:47:01Z",
    "body": "Some further investigation shows that this is due to `extern \"C\"` being on function definitions, not `#[no_mangle]`. It's also not due to IR differences in from adding `extern \"C\"`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59601215/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59609536",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-59609536",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 59609536,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjA5NTM2",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-18T11:44:13Z",
    "updated_at": "2014-10-18T15:30:51Z",
    "body": "At some point, there was a decision to treat `extern` functions differently in the visibility rules. There may be no way to make these functions have internal visibility now, so it's a performance bug.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59609536/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59611780",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-59611780",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 59611780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjExNzgw",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-18T12:44:46Z",
    "updated_at": "2014-10-18T12:44:46Z",
    "body": "Why would there be no way to make them internally visible?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59611780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59612054",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-59612054",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 59612054,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjEyMDU0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-18T12:52:22Z",
    "updated_at": "2014-10-18T12:55:35Z",
    "body": "I can't tell you the _reasoning_ behind it because I strongly disagreed with it and made that clear when it happened. I can point you at the [commit that implemented this](https://github.com/rust-lang/rust/commit/d4dec4701a5e5e6fb4f66c838b9646bc1c1f711b). I didn't understand why the ABI is relevant to visibility then and I don't understand it now. IMO, it's an awful hack to work around broken code that could have just been fixed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59612054/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59612184",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-59612184",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 59612184,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjEyMTg0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-18T12:56:07Z",
    "updated_at": "2014-10-18T12:56:07Z",
    "body": "Nominating since fixing this would be a backwards incompatible language change. It would begin causing errors due to missing symbols in previously valid code.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59612184/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59618473",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-59618473",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 59618473,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjE4NDcz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-18T15:28:01Z",
    "updated_at": "2014-10-18T15:28:01Z",
    "body": "@Zoxc can you provide a test case? I'm unable to reproduce this with a few different permutations\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59618473/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59618554",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-59618554",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 59618554,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjE4NTU0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-18T15:30:15Z",
    "updated_at": "2014-10-18T15:31:20Z",
    "body": "Define a `pub fn foo()` and a `pub extern \"C\" fn foo()` in a crate, and link against it with LTO. The Rust ABI function is marked internal is the executable and the C ABI function is not.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59618554/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59629786",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-59629786",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 59629786,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjI5Nzg2",
    "user": {
      "login": "Zoxc",
      "id": 25784,
      "node_id": "MDQ6VXNlcjI1Nzg0",
      "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Zoxc",
      "html_url": "https://github.com/Zoxc",
      "followers_url": "https://api.github.com/users/Zoxc/followers",
      "following_url": "https://api.github.com/users/Zoxc/following{/other_user}",
      "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions",
      "organizations_url": "https://api.github.com/users/Zoxc/orgs",
      "repos_url": "https://api.github.com/users/Zoxc/repos",
      "events_url": "https://api.github.com/users/Zoxc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Zoxc/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-18T21:12:30Z",
    "updated_at": "2014-10-18T21:12:30Z",
    "body": "`etest.rs`:\n\n```\n#![crate_name = \"etest\"]\n#![crate_type = \"rlib\"]\n#![no_std]\n\npub fn func1() {}\npub extern fn func2() {}\n```\n\n`bare.rs`:\n\n```\n#![no_std]\n#![no_main]\n#![feature(lang_items)]\n\nextern crate etest;\n\n#[lang = \"begin_unwind\"] extern fn begin_unwind() {}\n#[lang = \"stack_exhausted\"] extern fn stack_exhausted() {}\n#[lang = \"eh_personality\"] extern fn eh_personality() {}\n#[lang = \"fail_fmt\"] fn fail_fmt() {}\n```\n\nBuliding:\n    rustc etest.rs\n    rustc -L . -C lto bare.rs --emit=ir\n\n`func2` is exported in the `bare` create, but `func1` is not.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59629786/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60309809",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-60309809",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 60309809,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMzA5ODA5",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-23T21:10:31Z",
    "updated_at": "2014-10-23T21:10:31Z",
    "body": "Assigning P-low, not 1.0.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60309809/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60314673",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-60314673",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 60314673,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMzE0Njcz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-23T21:47:06Z",
    "updated_at": "2014-10-23T21:47:06Z",
    "body": "I'm actually going to close this as working as intended now that I've had some time to investigate it more thoroughly. The impetus for this functionality is #14500, which I do think is a real and valid issue to consider. Any reachable functions with a `Rust` ABI are implementation details (and therefore candidates to be optimized away). Any reachable functions with a defined ABI, however, are not implementation details, and consequently are not candidates to be optimized away.\n\nIf you do not compile with `-C lto`, then there will be linkage conflicts because the objects in rlibs all have their symbols already exposed (for all ABIs). You can control the visibility of a symbol in an object file through the visibility of the function itself. If a function is not reachable, then it won't be marked as visible.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60314673/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60334737",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-60334737",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 60334737,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMzM0NzM3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-24T01:49:36Z",
    "updated_at": "2014-10-24T01:49:36Z",
    "body": "Rust is exposing unreachable functions from the final executable. It would only be reachable if the executable crate exposed it as public at the top-level. The included library crate is private at the top-level so those symbols shouldn't get exported in an LTO build. If you want them exported, you should be able to mark the crate as public (or use `pub use`).\n\nThere's a valid performance bug as long as there's not an equivalent to `-fvisibility=hidden` for C and C++. Rust is _almost_ there because it's handling the Rust ABI functions sanely, but I don't understand why the ABI is a valid reason to make a distinction in visibility rules. It's forcing code that's not actually exported from the executable to be exposed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60334737/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60405121",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-60405121",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 60405121,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwNDA1MTIx",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-24T15:40:04Z",
    "updated_at": "2014-10-24T15:40:04Z",
    "body": "Currently we have no notion of a \"private crate\" or a \"public crate\", we just link crates together and the interface they expose is always public. I'm not sure why you say we don't have the equivalent of `-fvisibility=hidden` because that's basically wrapping your entire crate in `mod foo { ... }` to make all symbols private.\n\nI also don't quite understand why  you think that we're exposing unreachable functions. All of the exported functions are reachable with respect to privacy (as the example from @Zoxc shows). Do you have an example where an un-reachable extern function gets exposed? I do think that would be a bug (I haven't seen an example in this thread). Some exact reproducible code would also be more helpful than a description of a test case.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60405121/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/139916084",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-139916084",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 139916084,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzOTkxNjA4NA==",
    "user": {
      "login": "DemiMarie",
      "id": 6395399,
      "node_id": "MDQ6VXNlcjYzOTUzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6395399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DemiMarie",
      "html_url": "https://github.com/DemiMarie",
      "followers_url": "https://api.github.com/users/DemiMarie/followers",
      "following_url": "https://api.github.com/users/DemiMarie/following{/other_user}",
      "gists_url": "https://api.github.com/users/DemiMarie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DemiMarie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DemiMarie/subscriptions",
      "organizations_url": "https://api.github.com/users/DemiMarie/orgs",
      "repos_url": "https://api.github.com/users/DemiMarie/repos",
      "events_url": "https://api.github.com/users/DemiMarie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DemiMarie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-13T20:44:46Z",
    "updated_at": "2015-09-13T20:44:46Z",
    "body": "One case where this would be useful is where is using lto so that cross-language optimizations can take place.  For instance, one can (or should be able to) inline a small C function compiled with Clang into Rust code, or inline a Rust function into C code.  In both cases, the function may be private to the combined library.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/139916084/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/252525012",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-252525012",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 252525012,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjUyNTAxMg==",
    "user": {
      "login": "Zoxc",
      "id": 25784,
      "node_id": "MDQ6VXNlcjI1Nzg0",
      "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Zoxc",
      "html_url": "https://github.com/Zoxc",
      "followers_url": "https://api.github.com/users/Zoxc/followers",
      "following_url": "https://api.github.com/users/Zoxc/following{/other_user}",
      "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions",
      "organizations_url": "https://api.github.com/users/Zoxc/orgs",
      "repos_url": "https://api.github.com/users/Zoxc/repos",
      "events_url": "https://api.github.com/users/Zoxc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Zoxc/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-10T00:58:19Z",
    "updated_at": "2016-10-10T00:58:19Z",
    "body": "It appears extern functions are removed now due to a recent change (tested on 3210fd5c20ffc6da420eb00e60bdc8704577fd3b). However doing so isn't always the right thing either. This breaks [rlibc](https://github.com/alexcrichton/rlibc).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/252525012/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/301346096",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-301346096",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 301346096,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTM0NjA5Ng==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-14T23:03:49Z",
    "updated_at": "2017-05-14T23:03:49Z",
    "body": "@alexcrichton So we first made extern \"C\" functions stay around with LTO, but now we no longer do this, so I'm not sure -- should we close this issue? It's not clear whether we want or don't want this.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/301346096/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/301502532",
    "html_url": "https://github.com/rust-lang/rust/issues/18134#issuecomment-301502532",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18134",
    "id": 301502532,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTUwMjUzMg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-15T15:01:37Z",
    "updated_at": "2017-05-15T15:01:37Z",
    "body": "I believe bugs have been fixed in the meantime, it looks like this issue is no longer applicable.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/301502532/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
