[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68905576",
    "html_url": "https://github.com/rust-lang/rust/pull/20650#issuecomment-68905576",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20650",
    "id": 68905576,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTA1NTc2",
    "user": {
      "login": "rust-highfive",
      "id": 7378925,
      "node_id": "MDQ6VXNlcjczNzg5MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7378925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rust-highfive",
      "html_url": "https://github.com/rust-highfive",
      "followers_url": "https://api.github.com/users/rust-highfive/followers",
      "following_url": "https://api.github.com/users/rust-highfive/following{/other_user}",
      "gists_url": "https://api.github.com/users/rust-highfive/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rust-highfive/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rust-highfive/subscriptions",
      "organizations_url": "https://api.github.com/users/rust-highfive/orgs",
      "repos_url": "https://api.github.com/users/rust-highfive/repos",
      "events_url": "https://api.github.com/users/rust-highfive/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rust-highfive/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-06T18:08:47Z",
    "updated_at": "2015-01-06T18:08:47Z",
    "body": "r? @huonw\n\n(rust_highfive has picked a reviewer for you, use r? to override)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68905576/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68906256",
    "html_url": "https://github.com/rust-lang/rust/pull/20650#issuecomment-68906256",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20650",
    "id": 68906256,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTA2MjU2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-06T18:13:21Z",
    "updated_at": "2015-01-06T18:13:21Z",
    "body": "This is why we can't have nice things :(\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68906256/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68906306",
    "html_url": "https://github.com/rust-lang/rust/pull/20650#issuecomment-68906306",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20650",
    "id": 68906306,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTA2MzA2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-06T18:13:41Z",
    "updated_at": "2015-01-06T18:13:41Z",
    "body": "Regardless, impressive investigation! Thanks so much for finding this!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68906306/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68909017",
    "html_url": "https://github.com/rust-lang/rust/pull/20650#issuecomment-68909017",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20650",
    "id": 68909017,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTA5MDE3",
    "user": {
      "login": "barosl",
      "id": 573768,
      "node_id": "MDQ6VXNlcjU3Mzc2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/573768?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barosl",
      "html_url": "https://github.com/barosl",
      "followers_url": "https://api.github.com/users/barosl/followers",
      "following_url": "https://api.github.com/users/barosl/following{/other_user}",
      "gists_url": "https://api.github.com/users/barosl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barosl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barosl/subscriptions",
      "organizations_url": "https://api.github.com/users/barosl/orgs",
      "repos_url": "https://api.github.com/users/barosl/repos",
      "events_url": "https://api.github.com/users/barosl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barosl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-06T18:30:55Z",
    "updated_at": "2015-01-06T18:33:56Z",
    "body": "I do hope this would fix some Windows-related parts of #19120. It will save us from tons of computational resource wastes. Great work, @klutzy!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68909017/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68974758",
    "html_url": "https://github.com/rust-lang/rust/pull/20650#issuecomment-68974758",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20650",
    "id": 68974758,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTc0NzU4",
    "user": {
      "login": "klutzy",
      "id": 1589355,
      "node_id": "MDQ6VXNlcjE1ODkzNTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1589355?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klutzy",
      "html_url": "https://github.com/klutzy",
      "followers_url": "https://api.github.com/users/klutzy/followers",
      "following_url": "https://api.github.com/users/klutzy/following{/other_user}",
      "gists_url": "https://api.github.com/users/klutzy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klutzy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klutzy/subscriptions",
      "organizations_url": "https://api.github.com/users/klutzy/orgs",
      "repos_url": "https://api.github.com/users/klutzy/repos",
      "events_url": "https://api.github.com/users/klutzy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klutzy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-07T03:35:41Z",
    "updated_at": "2015-01-07T03:40:16Z",
    "body": "Hmm, I realized this may not be an ideal way in the long term. This patch addresses two issues:\n-    race condition for `CreateProcess(bInheritedHandles = TRUE)`. (We set `bInheritedHandles = TRUE` at `std::sys::windows::process::spawn()`.)\n-    race condition for process error mode.\n\nFor the first issue, lock has a drawback: non-Rust code still call `CreateProcess()` then the race continues.\nThere is better method without lock: explicitly pass inherited handles. http://blogs.msdn.com/b/oldnewthing/archive/2011/12/16/10248328.aspx The APIs are from Vista though.\nSo, although lock fixes the issue, in the long term we may have to consider the explicit method.\n\nFor the second issue, it seems impossible to protect error mode without locking. However, @HNO3 found that `GetLongPathName()` also internally calls `SetErrorMode()` [in a racy way](https://pastebin.mozilla.org/8167064)! (tested on win7)\nThere seems no perfect way to preserve error mode on multi-thread environment.\n\nActually our goal is not to preserve error mode but just to avoid crash dialogs. We just may add Mutex at `compiletest` instead of `std`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68974758/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68976112",
    "html_url": "https://github.com/rust-lang/rust/pull/20650#issuecomment-68976112",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20650",
    "id": 68976112,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTc2MTEy",
    "user": {
      "login": "nitric1",
      "id": 172585,
      "node_id": "MDQ6VXNlcjE3MjU4NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/172585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nitric1",
      "html_url": "https://github.com/nitric1",
      "followers_url": "https://api.github.com/users/nitric1/followers",
      "following_url": "https://api.github.com/users/nitric1/following{/other_user}",
      "gists_url": "https://api.github.com/users/nitric1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nitric1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nitric1/subscriptions",
      "organizations_url": "https://api.github.com/users/nitric1/orgs",
      "repos_url": "https://api.github.com/users/nitric1/repos",
      "events_url": "https://api.github.com/users/nitric1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nitric1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-07T03:59:28Z",
    "updated_at": "2015-01-07T09:01:55Z",
    "body": "([Stack trace of each `SetErrorMode`](https://gist.github.com/HNO3/ec6fde3d3398e8e7099b))\nTo be more specific (for leaving my investigation), `SetErrorMode` is called 4 times with arguments `0x8001`, `0x8001`, `0x8001` and original value during calling `CreateProcess`. Each argument means:\n1. setting \"ignoring-message-box\" mode to suppress \"Cannot find\" message box during `CreateProcess`\n2. setting \"ignoring-message-box\" mode to suppress same message box of `GetFileAttribute` used by `GetLongPathName`\n3. restoring original value (from 1)\n4. restoring original value (from before calling `CreateProcess`)\n\nI think there are many similar problems related to using process error mode in multi-threaded environment.\n\nWell, there's a brand new function [`SetThreadErrorMode`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd553630%28v=vs.85%29.aspx) which should be used in that APIs since Windows 7, but Microsoft might miss it\u2026\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68976112/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
