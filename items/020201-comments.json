[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68069420",
    "html_url": "https://github.com/rust-lang/rust/issues/20201#issuecomment-68069420",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20201",
    "id": 68069420,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDY5NDIw",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-24T18:54:08Z",
    "updated_at": "2014-12-24T19:05:49Z",
    "body": "Additionally, inlining [rawmessage.rs](https://github.com/kmcguire3413/water.rs/blob/e4638ff83566a064f0dcc464276ed24289b42fa2/src/rawmessage.rs) into [message.rs](https://github.com/kmcguire3413/water.rs/blob/e4638ff83566a064f0dcc464276ed24289b42fa2/src/message.rs) will introduce new linker erorrs:\n\n```\n$ cargo test\n\u2026\n/home/nagisa/files/rust/fails/water.rs/target/safesync-490939a7cdc50d58.o: In function `message::SyncMessage::get_payload::h8503016970478518134':\nsafesync.0.rs:(.text._ZN7message11SyncMessage11get_payload20h8503016970478518134E+0x17b): undefined reference to `message::SyncMessage::get_payload::_FILE_LINE::h7cd42812b01f00a3Vzb'\n/home/nagisa/files/rust/fails/water.rs/target/safesync-490939a7cdc50d58.o: In function `message::RawMessage::readstructunsafe::h9415964264797449173':\nsafesync.0.rs:(.text._ZN7message10RawMessage16readstructunsafe20h9415964264797449173E+0xa8): undefined reference to `message::RawMessage::readstructunsafe::_FILE_LINE::h7cd42812b01f00a3Ilb'\ncollect2: error: ld returned 1 exit status\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68069420/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68078207",
    "html_url": "https://github.com/rust-lang/rust/issues/20201#issuecomment-68078207",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20201",
    "id": 68078207,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDc4MjA3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-24T23:17:27Z",
    "updated_at": "2014-12-24T23:17:27Z",
    "body": "Closing as a dupe of https://github.com/rust-lang/rust/issues/16734, but if you can get a minimized example that's different, feel free to reopen!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68078207/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68108399",
    "html_url": "https://github.com/rust-lang/rust/issues/20201#issuecomment-68108399",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20201",
    "id": 68108399,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MTA4Mzk5",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-25T17:11:12Z",
    "updated_at": "2014-12-25T17:12:02Z",
    "body": "@alexcrichton It seems I have no button to repoen. This minimal case is pretty different, since I could reduce it enough to cause it even without the use of \u22a5 type:\n\nlib.rs:\n\n``` rust\n#![crate_name=\"repr\"]\n#![crate_type=\"rlib\"]\n\npub use link::Link;\n\nmod link {\n    use error::Error;\n    pub struct Link;\n    impl Link {\n        pub fn error(&self) -> Error { Error }\n    }\n}\n\nmod error {\n    use std::default::Default;\n    pub struct Error;\n    impl Error {\n        pub fn produce<T : Default>(self) -> (T, uint) {\n            static LINK_ERROR : uint = 0u;\n            (Default::default(), LINK_ERROR)\n        }\n    }\n}\n```\n\nmain.rs:\n\n``` rust\nextern crate repr;\n\nuse repr::Link;\n\nfn main() {\n    let link_error : (uint, uint) = Link.error().produce();\n}\n```\n\n``` sh\n$ bash -c 'rustc lib.rs && rustc main.rs -L.'\n\u2026\nnote: main.o: In function `error::Error::produce::h13795623746139935984':\nmain.0.rs:(.text._ZN5error5Error7produce21h13795623746139935984E+0x3d): undefined reference to `error::Error::produce::LINK_ERROR::h6790b04a8ae1707fTaa'\ncollect2: error: ld returned 1 exit status\n```\n\nI hypothesise, that this is caused by module visibility issues (note: only the `Link` type is exported as a public type). If the `mod error` is made `pub`, then the error disappears. If the `produce` method is not polymorphic, linker fails to link to the method itself rather than just its static constant.\n\nThis [gist](https://gist.github.com/nagisa/72b12e6f0939f0fddfdd) contains a \u201cnon-prettified\u201d (i.e. before I renamed `Message`s and `Endpoint`s to `Link`s and `Error`s) test case which results in same error message that I reported in the first message.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68108399/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68196288",
    "html_url": "https://github.com/rust-lang/rust/issues/20201#issuecomment-68196288",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20201",
    "id": 68196288,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MTk2Mjg4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-28T02:20:43Z",
    "updated_at": "2014-12-28T02:20:43Z",
    "body": "That example is actually a dupe of #16734 in that the reachability pass isn't quite doing as much as it should. The type `Error` is \"reachable\" so its functions must be public symbols, but our reachability analysis currently does not propagate through the signatures of reachable types right now. For example #16734 is an error because we don't see that `Baz` is a reachable type.\n\nOnce a generic method is used we always monomorphize across crates, which is why the error goes away. Regardless though, I'm going to close this as a dupe again of #16734, but thanks for the minimized example!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68196288/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68204715",
    "html_url": "https://github.com/rust-lang/rust/issues/20201#issuecomment-68204715",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20201",
    "id": 68204715,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjA0NzE1",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-28T11:32:03Z",
    "updated_at": "2014-12-28T11:32:03Z",
    "body": "I see. Thanks for the explanation.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68204715/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
