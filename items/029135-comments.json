[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148979717",
    "html_url": "https://github.com/rust-lang/rust/issues/29135#issuecomment-148979717",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29135",
    "id": 148979717,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODk3OTcxNw==",
    "user": {
      "login": "shadowmint",
      "id": 355760,
      "node_id": "MDQ6VXNlcjM1NTc2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/355760?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shadowmint",
      "html_url": "https://github.com/shadowmint",
      "followers_url": "https://api.github.com/users/shadowmint/followers",
      "following_url": "https://api.github.com/users/shadowmint/following{/other_user}",
      "gists_url": "https://api.github.com/users/shadowmint/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shadowmint/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shadowmint/subscriptions",
      "organizations_url": "https://api.github.com/users/shadowmint/orgs",
      "repos_url": "https://api.github.com/users/shadowmint/repos",
      "events_url": "https://api.github.com/users/shadowmint/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shadowmint/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-18T05:19:54Z",
    "updated_at": "2015-10-18T05:19:54Z",
    "body": "Sorry, and just to be clear: calling C from rust works perfectly fine, obviously.\n\nThis is specifically with regard to compiling a crate as a static/dynamic library and calling it from an external C application.\n\nIt occurred to try loading the dynamic library using python, which gives:\n\n```\ndoug@Tio /c/projects/rust-all/rust-extern/target/debug\n$ /c/Python27/python.exe\nPython 2.7.5 (default, May 15 2013, 22:43:36) [MSC v.1500 32 bit (Intel)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import ctypes\n>>> ex = ctypes.CDLL(\"extern.dll\")\n>>> ex.rs_str()\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"c:\\Python27\\lib\\ctypes\\__init__.py\", line 378, in __getattr__\n    func = self.__getitem__(name)\n  File \"c:\\Python27\\lib\\ctypes\\__init__.py\", line 383, in __getitem__\n    func = self._FuncPtr((name_or_ordinal, self))\nAttributeError: function 'rs_str' not found\n```\n\nWhich is odd, given:\n\n```\ndoug@Tio /c/projects/rust-all/rust-extern/target/debug\n$ nm extern.dll | grep rs_\n627c16e0 t __ZN10rs_trigger10__rust_abiE\n628950a4 r __ZN10rs_trigger15__STATIC_FMTSTR20hdfbe560ac65b650e4baE\n62895098 r __ZN10rs_trigger15__STATIC_FMTSTR20hdfbe560ac65b650epbaE\n628950ac r __ZN10rs_trigger15__STATIC_FMTSTR20hdfbe560ac65b650eucaE\n62895090 r __ZN10rs_trigger15__STATIC_FMTSTR20hdfbe560ac65b650eVaaE\n62895a68 R __ZN11dynamic_lib2dl19check_for_errors_in15__STATIC_FMTSTR20h94187edf\n1ce43451q4dE\n627c19e0 t __ZN11rs_register10__rust_abiE\n6289516c r __ZN11rs_register15__STATIC_FMTSTR20hdfbe560ac65b650e6caE\n627c98e0 T __ZN3env7vars_os20h2fe647ea53eb2950b7dE\n627c1580 t __ZN6rs_str10__rust_abiE\n627c19c0 T _rs_register@4\n627c1570 T _rs_str@0\n627c16c0 T _rs_trigger@4\n```\n\nI'm not quite sure what to make of that; the DLL is the right 32-bit type, but the symbol names aren't right perhaps?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148979717/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148986048",
    "html_url": "https://github.com/rust-lang/rust/issues/29135#issuecomment-148986048",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29135",
    "id": 148986048,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODk4NjA0OA==",
    "user": {
      "login": "eefriedman",
      "id": 12769964,
      "node_id": "MDQ6VXNlcjEyNzY5OTY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/12769964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eefriedman",
      "html_url": "https://github.com/eefriedman",
      "followers_url": "https://api.github.com/users/eefriedman/followers",
      "following_url": "https://api.github.com/users/eefriedman/following{/other_user}",
      "gists_url": "https://api.github.com/users/eefriedman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eefriedman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eefriedman/subscriptions",
      "organizations_url": "https://api.github.com/users/eefriedman/orgs",
      "repos_url": "https://api.github.com/users/eefriedman/repos",
      "events_url": "https://api.github.com/users/eefriedman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eefriedman/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-18T07:05:53Z",
    "updated_at": "2015-10-18T07:05:53Z",
    "body": "This is sort of a random guess, but I think you want `extern \"C\"` rather than `extern \"system\"`?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148986048/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148986083",
    "html_url": "https://github.com/rust-lang/rust/issues/29135#issuecomment-148986083",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29135",
    "id": 148986083,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODk4NjA4Mw==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-18T07:07:23Z",
    "updated_at": "2015-10-18T07:07:23Z",
    "body": "`extern \"system\"` actually means `extern \"stdcall\"` on 32-bit while `extern \"C\"` means `extern \"cdecl\"`. The default that the C code uses depends on the flags you pass to the compiler, so it would probably be best if you explicitly specified `stdcall` or `cdecl` on both sides.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148986083/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148988798",
    "html_url": "https://github.com/rust-lang/rust/issues/29135#issuecomment-148988798",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29135",
    "id": 148988798,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODk4ODc5OA==",
    "user": {
      "login": "shadowmint",
      "id": 355760,
      "node_id": "MDQ6VXNlcjM1NTc2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/355760?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shadowmint",
      "html_url": "https://github.com/shadowmint",
      "followers_url": "https://api.github.com/users/shadowmint/followers",
      "following_url": "https://api.github.com/users/shadowmint/following{/other_user}",
      "gists_url": "https://api.github.com/users/shadowmint/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shadowmint/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shadowmint/subscriptions",
      "organizations_url": "https://api.github.com/users/shadowmint/orgs",
      "repos_url": "https://api.github.com/users/shadowmint/repos",
      "events_url": "https://api.github.com/users/shadowmint/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shadowmint/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-18T08:14:56Z",
    "updated_at": "2015-10-18T08:14:56Z",
    "body": "That wont resolve the missing symbols surely?\n\nI did try with cdecl before, but that didnt seem to work either... but\nsure. I'll give extern C another try later.\n\nOn Sunday, 18 October 2015, Peter Atashian notifications@github.com wrote:\n\n> extern \"system\" actually means extern \"stdcall\" on 32-bit while extern \"C\"\n> means extern \"cdecl\". The default that the C code uses depends on the\n> flags you pass to the compiler, so it would probably be best if you\n> explicitly specified stdcall or cdecl on both sides.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/rust-lang/rust/issues/29135#issuecomment-148986083.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148988798/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148991716",
    "html_url": "https://github.com/rust-lang/rust/issues/29135#issuecomment-148991716",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29135",
    "id": 148991716,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODk5MTcxNg==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-18T08:45:21Z",
    "updated_at": "2015-10-18T08:45:21Z",
    "body": "It actually might resolve the missing symbols issue because different calling conventions decorate/mangle the symbol names differently.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148991716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/149005144",
    "html_url": "https://github.com/rust-lang/rust/issues/29135#issuecomment-149005144",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29135",
    "id": 149005144,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0OTAwNTE0NA==",
    "user": {
      "login": "shadowmint",
      "id": 355760,
      "node_id": "MDQ6VXNlcjM1NTc2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/355760?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shadowmint",
      "html_url": "https://github.com/shadowmint",
      "followers_url": "https://api.github.com/users/shadowmint/followers",
      "following_url": "https://api.github.com/users/shadowmint/following{/other_user}",
      "gists_url": "https://api.github.com/users/shadowmint/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shadowmint/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shadowmint/subscriptions",
      "organizations_url": "https://api.github.com/users/shadowmint/orgs",
      "repos_url": "https://api.github.com/users/shadowmint/repos",
      "events_url": "https://api.github.com/users/shadowmint/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shadowmint/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-18T11:37:34Z",
    "updated_at": "2015-10-18T11:37:34Z",
    "body": "Woo, seems you're right.\n\nEither using `__stdcall` and `extern \"system\"` or `__cdecl` and `extern \"C\"` works, but you can't mix and match. \n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/149005144/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
