[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40300087",
    "html_url": "https://github.com/rust-lang/rust/pull/13489#issuecomment-40300087",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13489",
    "id": 40300087,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMzAwMDg3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-13T05:34:14Z",
    "updated_at": "2014-04-13T05:34:14Z",
    "body": "I'm a little confused by this description, Here's what I get today:\n\n```\n$ cat foo.rs\n#![crate_type = \"dylib\"]\n\nfn main() {}\n$ rustc --crate-file-name foo.rs --crate-type=rlib \nlibfoo-aab0fa9e-0.0.dylib\nlibfoo-aab0fa9e-0.0.rlib\n```\n\nThis makes me think that `crate-file-name` is reading both the compiler flags and the attributes (hence I'm confused about the first sentence of the PR description).\n\nWhat's the intended behavior you're looking for here? I wouldn't want `--crate-file-name` to _only_ look at the compiler flags when the rest of the compiler looks at both. Having compiler flags override attributes was brought up in #11573.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40300087/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40300334",
    "html_url": "https://github.com/rust-lang/rust/pull/13489#issuecomment-40300334",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13489",
    "id": 40300334,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMzAwMzM0",
    "user": {
      "login": "JustAPerson",
      "id": 789308,
      "node_id": "MDQ6VXNlcjc4OTMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/789308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustAPerson",
      "html_url": "https://github.com/JustAPerson",
      "followers_url": "https://api.github.com/users/JustAPerson/followers",
      "following_url": "https://api.github.com/users/JustAPerson/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustAPerson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustAPerson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustAPerson/subscriptions",
      "organizations_url": "https://api.github.com/users/JustAPerson/orgs",
      "repos_url": "https://api.github.com/users/JustAPerson/repos",
      "events_url": "https://api.github.com/users/JustAPerson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustAPerson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-13T05:57:34Z",
    "updated_at": "2014-04-13T05:57:51Z",
    "body": "Oh my. I am mistaken there. I was adding some debugging statements to the relevant code and when I tested it with both flags + attributes I thought I only saw the filenames from the attributes. I think I accidentally just used a flag for a crate type that was already specified by attribute. Sorry about that :(\n\nMy intent is the same as issue #11573. I was motivated to attempt this because when writing a Makefile for a project, I noticed that after updating a library it began to build twice unnecessarily. A new `crate_type` attribute had been added, and now `--crate-file-name` returned two names, causing `make` to generate two dependencies where there had previously only been one. I at first filtered only the filename I wanted, but later remembered the `--crate-type` and wanted to see if that would solve my problem. I had the same expectations expressed in that issue.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40300334/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40313312",
    "html_url": "https://github.com/rust-lang/rust/pull/13489#issuecomment-40313312",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13489",
    "id": 40313312,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMzEzMzEy",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-13T17:22:31Z",
    "updated_at": "2014-04-13T17:22:31Z",
    "body": "I do agree that implementing #11573 would make makefiles a little easier, and would make compilation probably a little more intuitive.\n\nFixing the bug would likely involve modifying `collect_crate_types` and then updating the relevant documentation about linkage. For now though, I don't think that we want to modify just `crate-file-name` and not compilation, so I'm going to close this.\n\nFeel free to reopen if you're willing to take a stab at #11573 though!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40313312/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40317422",
    "html_url": "https://github.com/rust-lang/rust/pull/13489#issuecomment-40317422",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13489",
    "id": 40317422,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMzE3NDIy",
    "user": {
      "login": "JustAPerson",
      "id": 789308,
      "node_id": "MDQ6VXNlcjc4OTMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/789308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustAPerson",
      "html_url": "https://github.com/JustAPerson",
      "followers_url": "https://api.github.com/users/JustAPerson/followers",
      "following_url": "https://api.github.com/users/JustAPerson/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustAPerson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustAPerson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustAPerson/subscriptions",
      "organizations_url": "https://api.github.com/users/JustAPerson/orgs",
      "repos_url": "https://api.github.com/users/JustAPerson/repos",
      "events_url": "https://api.github.com/users/JustAPerson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustAPerson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-13T19:42:36Z",
    "updated_at": "2014-04-13T19:42:36Z",
    "body": "I have modified both `collect_crate_types` and the relevant documentation. This addresses both my original concern and #11573.\n\nYou can see my changes here:\nhttps://github.com/JustAPerson/rust/compare/crate-file-name\n(the diff is slightly more complicated than necessary due to indenting some of the code).\n\nI don't think that I can reopen this pull request myself, and it appears that GitHub is not registering the new commits to my branch here because this is closed. At your discretion, I can either update the original post for this pull request once reopened or create a new one.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40317422/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40317623",
    "html_url": "https://github.com/rust-lang/rust/pull/13489#issuecomment-40317623",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13489",
    "id": 40317623,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMzE3NjIz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-13T19:50:28Z",
    "updated_at": "2014-04-13T19:50:28Z",
    "body": "That looks good to me! Can you add a test for this change as well? You'd probably want to add a `run-make` test in the `src/test/run-make` directory.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40317623/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40423381",
    "html_url": "https://github.com/rust-lang/rust/pull/13489#issuecomment-40423381",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13489",
    "id": 40423381,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDIzMzgx",
    "user": {
      "login": "JustAPerson",
      "id": 789308,
      "node_id": "MDQ6VXNlcjc4OTMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/789308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustAPerson",
      "html_url": "https://github.com/JustAPerson",
      "followers_url": "https://api.github.com/users/JustAPerson/followers",
      "following_url": "https://api.github.com/users/JustAPerson/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustAPerson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustAPerson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustAPerson/subscriptions",
      "organizations_url": "https://api.github.com/users/JustAPerson/orgs",
      "repos_url": "https://api.github.com/users/JustAPerson/repos",
      "events_url": "https://api.github.com/users/JustAPerson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustAPerson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-14T21:57:47Z",
    "updated_at": "2014-04-14T21:57:47Z",
    "body": "@alexcrichton,\nHiya, I've added a `run-make` test now. Sorry for the delay!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40423381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
