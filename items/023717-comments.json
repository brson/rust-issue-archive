[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86232712",
    "html_url": "https://github.com/rust-lang/rust/issues/23717#issuecomment-86232712",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23717",
    "id": 86232712,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjMyNzEy",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-25T22:07:18Z",
    "updated_at": "2015-03-25T22:07:22Z",
    "body": "How did you compile the rust code? It looks like you passed `--emit=obj`, but that isn't pulling in upstream dependencies, so you may want to consider using `--crate-type staticlib` instead.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86232712/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86246338",
    "html_url": "https://github.com/rust-lang/rust/issues/23717#issuecomment-86246338",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23717",
    "id": 86246338,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjQ2MzM4",
    "user": {
      "login": "rudib",
      "id": 835602,
      "node_id": "MDQ6VXNlcjgzNTYwMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/835602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rudib",
      "html_url": "https://github.com/rudib",
      "followers_url": "https://api.github.com/users/rudib/followers",
      "following_url": "https://api.github.com/users/rudib/following{/other_user}",
      "gists_url": "https://api.github.com/users/rudib/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rudib/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rudib/subscriptions",
      "organizations_url": "https://api.github.com/users/rudib/orgs",
      "repos_url": "https://api.github.com/users/rudib/repos",
      "events_url": "https://api.github.com/users/rudib/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rudib/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-25T23:00:00Z",
    "updated_at": "2015-03-25T23:00:00Z",
    "body": "Alex, that's right. I have `#![crate_type=\"staticlib\"]` in the lib.rs, but it looks like that doesn't get taken into account. Passing it explicitly to the compiler does invoke a different compilation mode and it currently complains with `could not find native static library `compiler-rt``, so obviously I have to compile an ARM version of that as well. Will look into it, many thanks!\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86246338/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86247016",
    "html_url": "https://github.com/rust-lang/rust/issues/23717#issuecomment-86247016",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23717",
    "id": 86247016,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjQ3MDE2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-25T23:02:11Z",
    "updated_at": "2015-03-25T23:02:11Z",
    "body": "Perhaps the crate type was overridden from the command line? It's also only actually emitted if `--emit=link` (the default) is present.\n\nIf you're using the custom target specification I believe you can turn off auto-linking to `compiler-rt` as well.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86247016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86249094",
    "html_url": "https://github.com/rust-lang/rust/issues/23717#issuecomment-86249094",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23717",
    "id": 86249094,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjQ5MDk0",
    "user": {
      "login": "rudib",
      "id": 835602,
      "node_id": "MDQ6VXNlcjgzNTYwMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/835602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rudib",
      "html_url": "https://github.com/rudib",
      "followers_url": "https://api.github.com/users/rudib/followers",
      "following_url": "https://api.github.com/users/rudib/following{/other_user}",
      "gists_url": "https://api.github.com/users/rudib/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rudib/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rudib/subscriptions",
      "organizations_url": "https://api.github.com/users/rudib/orgs",
      "repos_url": "https://api.github.com/users/rudib/repos",
      "events_url": "https://api.github.com/users/rudib/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rudib/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-25T23:11:31Z",
    "updated_at": "2015-03-25T23:11:31Z",
    "body": "I've added the option for it to my target spec, but it doesn't make a difference, same error message. Here's the JSON target spec:\n\n```\n{\n    \"arch\": \"arm\",\n    \"cpu\": \"cortex-m3\",\n    \"data-layout\": \"e-m:e-p:32:32-i1:8:32-i8:8:32-i16:16:32-i64:64-v128:64:128-a:0:32-n32-S64\",\n    \"disable-redzone\": true,\n    \"executables\": true,\n    \"llvm-target\": \"thumbv7m-none-eabi\",\n    \"morestack\": false,\n    \"os\": \"none\",\n    \"relocation-model\": \"static\",\n    \"target-endian\": \"little\",\n    \"target-pointer-width\": \"32\",\n    \"no_compiler_rt\" : true\n} \n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86249094/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86249794",
    "html_url": "https://github.com/rust-lang/rust/issues/23717#issuecomment-86249794",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23717",
    "id": 86249794,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjQ5Nzk0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-25T23:16:58Z",
    "updated_at": "2015-03-25T23:16:58Z",
    "body": "Hm that's odd... Not entirely sure what's going on there!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86249794/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86250187",
    "html_url": "https://github.com/rust-lang/rust/issues/23717#issuecomment-86250187",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23717",
    "id": 86250187,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjUwMTg3",
    "user": {
      "login": "rudib",
      "id": 835602,
      "node_id": "MDQ6VXNlcjgzNTYwMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/835602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rudib",
      "html_url": "https://github.com/rudib",
      "followers_url": "https://api.github.com/users/rudib/followers",
      "following_url": "https://api.github.com/users/rudib/following{/other_user}",
      "gists_url": "https://api.github.com/users/rudib/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rudib/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rudib/subscriptions",
      "organizations_url": "https://api.github.com/users/rudib/orgs",
      "repos_url": "https://api.github.com/users/rudib/repos",
      "events_url": "https://api.github.com/users/rudib/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rudib/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-25T23:20:07Z",
    "updated_at": "2015-03-25T23:20:07Z",
    "body": "Not a problem, I'll have some more fun with this over the weekend. Will report. Thanks for the help!\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86250187/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/88007734",
    "html_url": "https://github.com/rust-lang/rust/issues/23717#issuecomment-88007734",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23717",
    "id": 88007734,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg4MDA3NzM0",
    "user": {
      "login": "rudib",
      "id": 835602,
      "node_id": "MDQ6VXNlcjgzNTYwMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/835602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rudib",
      "html_url": "https://github.com/rudib",
      "followers_url": "https://api.github.com/users/rudib/followers",
      "following_url": "https://api.github.com/users/rudib/following{/other_user}",
      "gists_url": "https://api.github.com/users/rudib/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rudib/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rudib/subscriptions",
      "organizations_url": "https://api.github.com/users/rudib/orgs",
      "repos_url": "https://api.github.com/users/rudib/repos",
      "events_url": "https://api.github.com/users/rudib/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rudib/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-31T09:11:27Z",
    "updated_at": "2015-03-31T09:11:27Z",
    "body": "Some of my findings, for reference if anyone will find this thread:\n\nI couldn't get `no_compiler_rt` to work with the staticlib build. I'll try to recompile the compiler with some debugging statements around there, to me it almost looks like a parsing error as the code is quite trivial around the linker's invocation.\n\nLuckily, Rust's .rlib files are plain old libraries, so any linker will happily link them into the final executable. So, if you cross compile Rust's libcore, liballoc (with external functions feature), libunicode and libcollections, implement some methods for the memory allocator and other minor things, you can get an ARM bare-hardware Rust library that can be called from C. With working Vec and String! Compiler's runtime seems to be compatible with the one provided by GCC, so far I didn't need to compile a custom `compiler-rt`.\n\nI'll try to do a writeup on this once 1.0 is released, but having all the cruft of low level STM32 drivers, initializations and whatnot in C and the actual logic code in Rust looks like an incredible timesaver for embedded development.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/88007734/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97419322",
    "html_url": "https://github.com/rust-lang/rust/issues/23717#issuecomment-97419322",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23717",
    "id": 97419322,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk3NDE5MzIy",
    "user": {
      "login": "ekiwi",
      "id": 2456545,
      "node_id": "MDQ6VXNlcjI0NTY1NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2456545?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ekiwi",
      "html_url": "https://github.com/ekiwi",
      "followers_url": "https://api.github.com/users/ekiwi/followers",
      "following_url": "https://api.github.com/users/ekiwi/following{/other_user}",
      "gists_url": "https://api.github.com/users/ekiwi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ekiwi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ekiwi/subscriptions",
      "organizations_url": "https://api.github.com/users/ekiwi/orgs",
      "repos_url": "https://api.github.com/users/ekiwi/repos",
      "events_url": "https://api.github.com/users/ekiwi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ekiwi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-29T13:00:59Z",
    "updated_at": "2015-04-29T13:00:59Z",
    "body": "@rudib I'm currently trying to accomplish the same thing: compile rust code into a static lib and then link it to C code for a cortex-m4 target.\n\nI was successful in compiling my rust code to an _object file_ and then using `gcc` to link it with my c code. However, when I try to build a _static library_, I get the `could not find native static library compiler-rt` error.\n\nRight now I'm trying to figure out how to deal with this and thus found this issue.\n\n> I couldn't get no_compiler_rt to work with the staticlib build. I'll try to recompile the compiler with some debugging statements around there, to me it almost looks like a parsing error as the code is quite trivial around the linker's invocation.\n\nDo you have any updates on this issue? Did you get `no_compile_rt` to work?\n\n> so far I didn't need to compile a custom compiler-rt.\n\nWhy is this? Is there a precompiled version for cortex-m? Or did you just use `gcc` to link the object files generated by `rustc`?\n\nThe reason why I would like to use `rustc` to produce a staticlib is that I want to use `cargo` for my rust code.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97419322/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97428871",
    "html_url": "https://github.com/rust-lang/rust/issues/23717#issuecomment-97428871",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23717",
    "id": 97428871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk3NDI4ODcx",
    "user": {
      "login": "rudib",
      "id": 835602,
      "node_id": "MDQ6VXNlcjgzNTYwMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/835602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rudib",
      "html_url": "https://github.com/rudib",
      "followers_url": "https://api.github.com/users/rudib/followers",
      "following_url": "https://api.github.com/users/rudib/following{/other_user}",
      "gists_url": "https://api.github.com/users/rudib/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rudib/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rudib/subscriptions",
      "organizations_url": "https://api.github.com/users/rudib/orgs",
      "repos_url": "https://api.github.com/users/rudib/repos",
      "events_url": "https://api.github.com/users/rudib/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rudib/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-29T13:39:03Z",
    "updated_at": "2015-04-29T13:39:03Z",
    "body": "Yeah, I just use gcc to link the Rust library and all of its dependencies (.rlib) into the final executable (firmware image). So, from Rust's side: liballoc, libcollections, libcore and libunicode. Here are the compiler commands to compile these base dependencies:\n\n```\nrustc -C opt-level=2 -Z no-landing-pads --target thumbv7m-none-eabi -g src/libcore/lib.rs --out-dir libs-arm\nrustc --cfg feature=\\\"external_funcs\\\" -C opt-level=2 -Z no-landing-pads --target thumbv7m-none-eabi -g src/liballoc/lib.rs --out-dir libs-arm -L libs-arm\nrustc -C opt-level=2 -Z no-landing-pads --target thumbv7m-none-eabi -g src/libunicode/lib.rs --out-dir libs-arm -L libs-arm\nrustc -C opt-level=2 -Z no-landing-pads --target thumbv7m-none-eabi -g src/libcollections/lib.rs --out-dir libs-arm -L libs-arm\n```\n\nAnd for my final library:\n\n```\nrustc -C opt-level=2 -Z no-landing-pads --target thumbv7m-none-eabi -g --crate-type lib -L libcore-thumbv7m src/lib.rs\n```\n\nPass all of these libraries to your final gcc build and it should find all the required symbols.\n\nI have a slightly outdated rustc version, hopefully this stuff still works. I'm building on Windows (_gasp_) with GNU ARM plugin for Eclipse for the final build. Works perfectly fine on a STM32 F4 Discovery dev board.\n\nI've built a little library for embedded CLI tools, I plan on doing a blog-post-style writeup with a sample project once Rust 1.0 is released. https://github.com/hashmismatch/terminal_cli.rs\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97428871/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/103237742",
    "html_url": "https://github.com/rust-lang/rust/issues/23717#issuecomment-103237742",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23717",
    "id": 103237742,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMzIzNzc0Mg==",
    "user": {
      "login": "rudib",
      "id": 835602,
      "node_id": "MDQ6VXNlcjgzNTYwMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/835602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rudib",
      "html_url": "https://github.com/rudib",
      "followers_url": "https://api.github.com/users/rudib/followers",
      "following_url": "https://api.github.com/users/rudib/following{/other_user}",
      "gists_url": "https://api.github.com/users/rudib/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rudib/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rudib/subscriptions",
      "organizations_url": "https://api.github.com/users/rudib/orgs",
      "repos_url": "https://api.github.com/users/rudib/repos",
      "events_url": "https://api.github.com/users/rudib/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rudib/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-18T22:39:15Z",
    "updated_at": "2015-05-18T22:39:15Z",
    "body": "For 1.1 nightly, I've found out that you need to compile to both .rlib and .o libs and then link .o's for your final build and .rlibs for intermediate Rust builds. Blog writeup: http://www.hashmismatch.net/2015/05/18/pragmatic-bare-metal-rust.html\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/103237742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/109980826",
    "html_url": "https://github.com/rust-lang/rust/issues/23717#issuecomment-109980826",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23717",
    "id": 109980826,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwOTk4MDgyNg==",
    "user": {
      "login": "russellmcc",
      "id": 603279,
      "node_id": "MDQ6VXNlcjYwMzI3OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/603279?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/russellmcc",
      "html_url": "https://github.com/russellmcc",
      "followers_url": "https://api.github.com/users/russellmcc/followers",
      "following_url": "https://api.github.com/users/russellmcc/following{/other_user}",
      "gists_url": "https://api.github.com/users/russellmcc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/russellmcc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/russellmcc/subscriptions",
      "organizations_url": "https://api.github.com/users/russellmcc/orgs",
      "repos_url": "https://api.github.com/users/russellmcc/repos",
      "events_url": "https://api.github.com/users/russellmcc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/russellmcc/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-08T12:46:06Z",
    "updated_at": "2015-06-08T12:47:38Z",
    "body": "I don't need to build .o libraries, and I'm on 1.1 nightly.  Are you sure you built your rlibs with the correct version of `ar`?  Using the system (non-cross) one probably won't work.\n\nI mention this because I ran into a similar error before I realized I needed to match `ar` versions, and I don't see a `-C ar=<path/to/ar>` in your build instructions for your libraries\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/109980826/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129195187",
    "html_url": "https://github.com/rust-lang/rust/issues/23717#issuecomment-129195187",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23717",
    "id": 129195187,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTE5NTE4Nw==",
    "user": {
      "login": "pierzchalski",
      "id": 1725294,
      "node_id": "MDQ6VXNlcjE3MjUyOTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1725294?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pierzchalski",
      "html_url": "https://github.com/pierzchalski",
      "followers_url": "https://api.github.com/users/pierzchalski/followers",
      "following_url": "https://api.github.com/users/pierzchalski/following{/other_user}",
      "gists_url": "https://api.github.com/users/pierzchalski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pierzchalski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pierzchalski/subscriptions",
      "organizations_url": "https://api.github.com/users/pierzchalski/orgs",
      "repos_url": "https://api.github.com/users/pierzchalski/repos",
      "events_url": "https://api.github.com/users/pierzchalski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pierzchalski/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-09T15:00:39Z",
    "updated_at": "2015-08-09T15:45:47Z",
    "body": "I'm having similar issues to the original poster, in that I'm missing the same symbols (although I'm trying to fit into another build system, which might be my problem). \n\nI've also got a missing `__mulodi4` symbol in libcore that's apparently provided by compiler-rt. This is despite having `\"no-compiler-rt\" = true` set in my target spec (which seems to be having something like the intended effect, since I can compile libcore and liballoc with `--crate-type=\"staticlib\"`)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129195187/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151292435",
    "html_url": "https://github.com/rust-lang/rust/issues/23717#issuecomment-151292435",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23717",
    "id": 151292435,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MTI5MjQzNQ==",
    "user": {
      "login": "madstr",
      "id": 13166899,
      "node_id": "MDQ6VXNlcjEzMTY2ODk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13166899?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/madstr",
      "html_url": "https://github.com/madstr",
      "followers_url": "https://api.github.com/users/madstr/followers",
      "following_url": "https://api.github.com/users/madstr/following{/other_user}",
      "gists_url": "https://api.github.com/users/madstr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/madstr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/madstr/subscriptions",
      "organizations_url": "https://api.github.com/users/madstr/orgs",
      "repos_url": "https://api.github.com/users/madstr/repos",
      "events_url": "https://api.github.com/users/madstr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/madstr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-26T21:39:55Z",
    "updated_at": "2015-10-26T21:39:55Z",
    "body": "@rudib \nI am also trying to do with something similar with x86 platform and was able to re-implement most of the crypto library which runs on bare metal i386 target. Now I have been cornered and want to use Box feature, so I ended up pulling up liballoc. But when I tried to link liballoc.rlib during generation of final binary (similar to libcore) it gives errors like \n\n```\nmain.0.rs:(.text.__rust_allocate+0x10): undefined reference to `malloc'\nmain.0.rs:(.text.__rust_allocate+0x30): undefined reference to `posix_memalign'\ndtls/build/main.o: In function `__rust_deallocate':\nmain.0.rs:(.text.__rust_deallocate+0x1): undefined reference to `free'\ndtls/build/main.o: In function `__rust_reallocate':\nmain.0.rs:(.text.__rust_reallocate+0x20): undefined reference to `realloc'\nmain.0.rs:(.text.__rust_reallocate+0x42): undefined reference to `posix_memalign'\nmain.0.rs:(.text.__rust_reallocate+0x6c): undefined reference to `free'\ndtls/build/main.o: In function `funcs::posix88::fcntl::open::h9ce22954c6c581ea6ab':\nmain.0.rs:(.text._ZN5funcs7posix885fcntl4open20h9ce22954c6c581ea6abE+0x1): undefined reference to `open'\n```\n\nDoes liballoc has any dependencies?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151292435/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/230182220",
    "html_url": "https://github.com/rust-lang/rust/issues/23717#issuecomment-230182220",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23717",
    "id": 230182220,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMDE4MjIyMA==",
    "user": {
      "login": "DemiMarie",
      "id": 6395399,
      "node_id": "MDQ6VXNlcjYzOTUzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6395399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DemiMarie",
      "html_url": "https://github.com/DemiMarie",
      "followers_url": "https://api.github.com/users/DemiMarie/followers",
      "following_url": "https://api.github.com/users/DemiMarie/following{/other_user}",
      "gists_url": "https://api.github.com/users/DemiMarie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DemiMarie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DemiMarie/subscriptions",
      "organizations_url": "https://api.github.com/users/DemiMarie/orgs",
      "repos_url": "https://api.github.com/users/DemiMarie/repos",
      "events_url": "https://api.github.com/users/DemiMarie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DemiMarie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-07-03T23:35:03Z",
    "updated_at": "2016-07-03T23:35:03Z",
    "body": "@madstr liballoc depends on an underlying allocator.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/230182220/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
