{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/19536",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/19536/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/19536/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/19536/events",
  "html_url": "https://github.com/rust-lang/rust/pull/19536",
  "id": 51029242,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MjU1Mjg1NDg=",
  "number": 19536,
  "title": "Enum layout optimizations",
  "user": {
    "login": "luqmana",
    "id": 287063,
    "node_id": "MDQ6VXNlcjI4NzA2Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luqmana",
    "html_url": "https://github.com/luqmana",
    "followers_url": "https://api.github.com/users/luqmana/followers",
    "following_url": "https://api.github.com/users/luqmana/following{/other_user}",
    "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions",
    "organizations_url": "https://api.github.com/users/luqmana/orgs",
    "repos_url": "https://api.github.com/users/luqmana/repos",
    "events_url": "https://api.github.com/users/luqmana/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luqmana/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 10,
  "created_at": "2014-12-04T21:08:17Z",
  "updated_at": "2014-12-08T21:14:36Z",
  "closed_at": "2014-12-08T21:14:36Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/19536",
    "html_url": "https://github.com/rust-lang/rust/pull/19536",
    "diff_url": "https://github.com/rust-lang/rust/pull/19536.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/19536.patch",
    "merged_at": null
  },
  "body": "Part 1: This extends the nullable enum opt to traverse beyond just the first level to find possible fields to use as the discriminant. So now, it'll work through structs, tuples, and fixed sized arrays.\n\nPart 2: Introduce a new lang item, NonZero, that you can use to wrap raw pointers or integral types to indicate to rustc that the underlying value is known to never be 0/NULL. We then use this in Vec, Rc and Arc to have them also benefit from the nullable enum opt.\n\n```\nx86_64 Linux:\n                        T       Option<T> (Before)      Option<T> (After)\n----------------------------------------------------------------------------------\nVec<int>                24          32                      24\nString                  24          32                      24\nRc<int>                 8           16                      8\nArc<int>                8           16                      8\n[Box<int>, ..2]         16          24                      16\n(String, uint)          32          40                      32\n```\n\nFixes #19419.\nFixes #13194.\nFixes #9378.\nFixes #7576.\n",
  "closed_by": {
    "login": "luqmana",
    "id": 287063,
    "node_id": "MDQ6VXNlcjI4NzA2Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luqmana",
    "html_url": "https://github.com/luqmana",
    "followers_url": "https://api.github.com/users/luqmana/followers",
    "following_url": "https://api.github.com/users/luqmana/following{/other_user}",
    "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions",
    "organizations_url": "https://api.github.com/users/luqmana/orgs",
    "repos_url": "https://api.github.com/users/luqmana/repos",
    "events_url": "https://api.github.com/users/luqmana/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luqmana/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/19536/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/19536/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
