[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29147656",
    "html_url": "https://github.com/rust-lang/rust/issues/10626#issuecomment-29147656",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10626",
    "id": 29147656,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTQ3NjU2",
    "user": {
      "login": "dwrensha",
      "id": 495768,
      "node_id": "MDQ6VXNlcjQ5NTc2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/495768?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dwrensha",
      "html_url": "https://github.com/dwrensha",
      "followers_url": "https://api.github.com/users/dwrensha/followers",
      "following_url": "https://api.github.com/users/dwrensha/following{/other_user}",
      "gists_url": "https://api.github.com/users/dwrensha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dwrensha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dwrensha/subscriptions",
      "organizations_url": "https://api.github.com/users/dwrensha/orgs",
      "repos_url": "https://api.github.com/users/dwrensha/repos",
      "events_url": "https://api.github.com/users/dwrensha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dwrensha/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-24T02:53:12Z",
    "updated_at": "2013-11-24T02:53:12Z",
    "body": "I see the same behavior if instead I explicitly set the descriptors to `Ignored`:\n\n```\n...\n        io : [process::Ignored, process::Ignored, process::Ignored]\n...\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29147656/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29150886",
    "html_url": "https://github.com/rust-lang/rust/issues/10626#issuecomment-29150886",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10626",
    "id": 29150886,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTUwODg2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-24T08:03:33Z",
    "updated_at": "2013-11-24T08:03:33Z",
    "body": "What is the expected behavior? This appears to all be working as-intended to me. You have instructed the child to print something, but you have not provided a method of it to print anything, and it's aborting as a result.\n\nIt could be a bug that it's aborting incorrectly, but that seems separate from this issue.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29150886/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29154931",
    "html_url": "https://github.com/rust-lang/rust/issues/10626#issuecomment-29154931",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10626",
    "id": 29154931,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTU0OTMx",
    "user": {
      "login": "dwrensha",
      "id": 495768,
      "node_id": "MDQ6VXNlcjQ5NTc2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/495768?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dwrensha",
      "html_url": "https://github.com/dwrensha",
      "followers_url": "https://api.github.com/users/dwrensha/followers",
      "following_url": "https://api.github.com/users/dwrensha/following{/other_user}",
      "gists_url": "https://api.github.com/users/dwrensha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dwrensha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dwrensha/subscriptions",
      "organizations_url": "https://api.github.com/users/dwrensha/orgs",
      "repos_url": "https://api.github.com/users/dwrensha/repos",
      "events_url": "https://api.github.com/users/dwrensha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dwrensha/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-24T13:05:01Z",
    "updated_at": "2013-11-24T13:05:01Z",
    "body": "I expect the child to exit normally.\n\nI discovered that I actually don't need the parent process in order to see the unexpected behavior.\n\n```\n$ ./child 2> /dev/null\nAbort trap: 6\n```\n\nHere are some of gdb stack traces I see when the crash occurs:\n\n```\nprogram received signal EXC_BAD_ACCESS, Could not access memory.\nReason: KERN_INVALID_ADDRESS at address: 0x0000000000000080\n[Switching to process 55750 thread 0x271f]\nuv__stream_osx_select (arg=0x100d15bd0) at ../../../src/libuv/src/unix/stream.c:157\n157   if (fd > s->int_fd)\n(gdb) bt\n#0  uv__stream_osx_select (arg=0x100d15bd0) at ../../../src/libuv/src/unix/stream.c:157\n#1  0x0000000100699b49 in uv__thread_start (arg=<value temporarily unavailable, due to optimizations>) at ../../../src/libuv/src/uv-common.c:274\n#2  0x00007fff8fdf9772 in _pthread_start ()\n#3  0x00007fff8fde61a1 in thread_start ()\n```\n\n```\nProgram received signal SIGABRT, Aborted.\n[Switching to process 55754 thread 0x1203]\n0x00007fff85b97212 in __pthread_kill ()\n(gdb) bt\n#0  0x00007fff85b97212 in __pthread_kill ()\n#1  0x00007fff8fdfab24 in pthread_kill ()\n#2  0x00007fff8fe3ef61 in abort ()\n#3  0x0000000100007835 in rt::util::abort::h78af1956eb5e49das::v0.9$x2dpre ()\n#4  0x00000001006472b3 in rt::task::begin_unwind::hd550344a74825a7av::v0.9$x2dpre ()\n#5  0x0000000100683915 in uvio::HomingIO::fire_homing_missile::h275a15cd89566c45a7::v0.9$x2dpre ()\n#6  0x0000000100671181 in file::Drop$FileWatcher::drop::h243d5422d728745Mgap::v0.9$x2dpre ()\n#7  0x00000001006710cd in file..FileWatcher::glue_drop::hb83953d6ca359e89ao ()\n#8  0x000000010067106d in _$UP$file..FileWatcher::glue_free::hb4f5f58975dc6e74ak ()\n#9  0x0000000100039ffb in logging::log::hd2877e3741c67e5aw::v0.9$x2dpre ()\n#10 0x0000000100001d03 in main::anon::expr_fn::ap ()\n#11 0x00000001000018c7 in main::hada226789343cd84ah::v0.0 ()\n#12 0x00000001000d7755 in rt::task::__extensions__::build_start_wrapper::anon::anon::expr_fn::aw ()\n#13 0x00000001000d6333 in rt::task::__extensions__::run::anon::expr_fn::a1 ()\n#14 0x00000001007402e3 in rust_try (f=<value temporarily unavailable, due to optimizations>, fptr=<value temporarily unavailable, due to optimizations>, env=<value temporarily unavailable, due to optimizations>) at /Users/davidrenshaw/Code/rust/src/rt/rust_cxx_glue.cpp:20\n#15 0x00000001000d6243 in rt::task::Unwinder::try::hdc872d3e23884703Sa0::v0.9$x2dpre ()\n#16 0x00000001000d4e05 in rt::task::Task::run::he4b13dcb792462759TaY::v0.9$x2dpre ()\n#17 0x00000001000d6eda in rt::task::__extensions__::build_start_wrapper::anon::expr_fn::ab ()\n```\n\nAlso, the following program shows the same behavior.\n\n```\n// child.rs\nfn main() {\n    for _ in range::<uint>(0, 1000) {\n        writeln!(&mut std::io::stderr() as &mut std::io::Writer, \"hello?\");\n    }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29154931/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29155151",
    "html_url": "https://github.com/rust-lang/rust/issues/10626#issuecomment-29155151",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10626",
    "id": 29155151,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTU1MTUx",
    "user": {
      "login": "dwrensha",
      "id": 495768,
      "node_id": "MDQ6VXNlcjQ5NTc2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/495768?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dwrensha",
      "html_url": "https://github.com/dwrensha",
      "followers_url": "https://api.github.com/users/dwrensha/followers",
      "following_url": "https://api.github.com/users/dwrensha/following{/other_user}",
      "gists_url": "https://api.github.com/users/dwrensha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dwrensha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dwrensha/subscriptions",
      "organizations_url": "https://api.github.com/users/dwrensha/orgs",
      "repos_url": "https://api.github.com/users/dwrensha/repos",
      "events_url": "https://api.github.com/users/dwrensha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dwrensha/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-24T13:17:53Z",
    "updated_at": "2013-11-24T13:18:06Z",
    "body": "For comparison, the following program behaves as I think the other versions of \"child.rs\" ought to.\n\n```\n// child.rs\n// exits normally\nfn main() {\n    let mut w = std::io::stderr();\n    for _ in range::<uint>(0, 1000) {\n        w.write(\"hello?\\n\".as_bytes());\n    }\n}\n```\n\nHowever, it reverts back to the bad behavior if I change it to:\n\n```\n// child.rs\n// crashes\nfn main() {\n    for _ in range::<uint>(0, 1000) {\n        std::io::stderr().write(\"hello?\\n\".as_bytes());\n    }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29155151/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
