{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/12047",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/12047/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/12047/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/12047/events",
  "html_url": "https://github.com/rust-lang/rust/pull/12047",
  "id": 26951551,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTIyMTcwODg=",
  "number": 12047,
  "title": "Ensure an Rc isn't freed while running its own destructor.",
  "user": {
    "login": "huonw",
    "id": 1203825,
    "node_id": "MDQ6VXNlcjEyMDM4MjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/huonw",
    "html_url": "https://github.com/huonw",
    "followers_url": "https://api.github.com/users/huonw/followers",
    "following_url": "https://api.github.com/users/huonw/following{/other_user}",
    "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
    "organizations_url": "https://api.github.com/users/huonw/orgs",
    "repos_url": "https://api.github.com/users/huonw/repos",
    "events_url": "https://api.github.com/users/huonw/events{/privacy}",
    "received_events_url": "https://api.github.com/users/huonw/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 8,
  "created_at": "2014-02-05T11:00:31Z",
  "updated_at": "2014-07-04T21:01:54Z",
  "closed_at": "2014-02-06T12:21:36Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/12047",
    "html_url": "https://github.com/rust-lang/rust/pull/12047",
    "diff_url": "https://github.com/rust-lang/rust/pull/12047.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/12047.patch",
    "merged_at": null
  },
  "body": "A weak pointer inside itself will have its destructor run when the last\nstrong pointer to that data disappears, so we need to make sure that the\nWeak and Rc destructors don't duplicate work (i.e. freeing).\n\nBy making the Rcs effectively take a weak pointer, we ensure that no\nWeak destructor will free the pointer while still ensuring that Weak\npointers can't be upgraded to strong ones as the destructors run.\n\nThis approach of starting weak at 1 is what libstdc++ does.\n\nFixes #12046.\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/12047/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/12047/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
