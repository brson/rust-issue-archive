[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24832704",
    "html_url": "https://github.com/rust-lang/rust/issues/9364#issuecomment-24832704",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9364",
    "id": 24832704,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0ODMyNzA0",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-20T18:52:40Z",
    "updated_at": "2013-09-20T18:52:40Z",
    "body": "This came up as I was trying to parse Rust syntax using macros:\n\n```\nmacro_rules! stmt_list(\n    ( while $cond:expr { $($body:tt)+ } ) => ( while $cond { $($body:tt)+ } );\n    ( $head:stmt ; ) => ( { $head; } );\n    ( $head:stmt ; $($rest:tt)+ ) => ( { $head ; stmt_list!( $($rest)+ ) } );\n)\n\nfn main()\n{\n    trace_macros!(true);\n\n    stmt_list!(\n        while x < 100 {\n            let y = x + 1;\n            x = y;\n        }\n    )\n}\n```\n\n```\n>rustc --pretty expanded parse.rs\nstmt_list! { while y < 0 { let y = x + 1 ; x = y ; } }\nparse.rs:37:8: 37:9 error: Local ambiguity: multiple parsing options: built-in NTs tt ('body') or 1 other options.\nparse.rs:37         }\n                    ^\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24832704/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24832928",
    "html_url": "https://github.com/rust-lang/rust/issues/9364#issuecomment-24832928",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9364",
    "id": 24832928,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0ODMyOTI4",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-20T18:55:44Z",
    "updated_at": "2013-09-20T18:55:44Z",
    "body": "I suppose the other way to fix this would be to allow passing interpolated stms as macro parameters.   I could then write my statement sequence pattern as \n`( $head:stmt ; $($rest:stmt);+ ) => ( { $head ; stmt_list!( $($rest);+ ) } );`\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24832928/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24833598",
    "html_url": "https://github.com/rust-lang/rust/issues/9364#issuecomment-24833598",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9364",
    "id": 24833598,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0ODMzNTk4",
    "user": {
      "login": "paulstansifer",
      "id": 1431,
      "node_id": "MDQ6VXNlcjE0MzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1431?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulstansifer",
      "html_url": "https://github.com/paulstansifer",
      "followers_url": "https://api.github.com/users/paulstansifer/followers",
      "following_url": "https://api.github.com/users/paulstansifer/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulstansifer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulstansifer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulstansifer/subscriptions",
      "organizations_url": "https://api.github.com/users/paulstansifer/orgs",
      "repos_url": "https://api.github.com/users/paulstansifer/repos",
      "events_url": "https://api.github.com/users/paulstansifer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulstansifer/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-20T18:59:30Z",
    "updated_at": "2013-09-20T18:59:30Z",
    "body": "@vadimcn Passing interpolated statements is allowed; the problem is that they cannot be broken apart and re-parsed after they have been parsed once.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24833598/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70726173",
    "html_url": "https://github.com/rust-lang/rust/issues/9364#issuecomment-70726173",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9364",
    "id": 70726173,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNzI2MTcz",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-20T20:25:05Z",
    "updated_at": "2015-01-20T20:25:05Z",
    "body": "Triage: updated code:\n\n```\n#![feature(trace_macros)]\n\nmacro_rules! stmt_list(\n    ( while $cond:expr { $($body:tt)+ } ) => ( while $cond { $($body:tt)+ } );\n    ( $head:stmt ; ) => ( { $head; } );\n    ( $head:stmt ; $($rest:tt)+ ) => ( { $head ; stmt_list!( $($rest)+ ) } );\n);\n\nfn main()\n{\n    trace_macros!(true);\n\n    stmt_list!(\n        while x < 100 {\n            let y = x + 1;\n            x = y;\n        }\n    )\n}\n\n```\n\nupdated error and output:\n\n```\nstmt_list! { while x < 100 { let y = x + 1 ; x = y ; } }\nhello.rs:4:64: 4:72 error: unexpected token: `an interpolated tt`\nhello.rs:4     ( while $cond:expr { $($body:tt)+ } ) => ( while $cond { $($body:tt)+ } );\n                                                                          ^~~~~~~~\n\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70726173/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70726202",
    "html_url": "https://github.com/rust-lang/rust/issues/9364#issuecomment-70726202",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9364",
    "id": 70726202,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNzI2MjAy",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-20T20:25:14Z",
    "updated_at": "2015-01-20T20:25:14Z",
    "body": "/cc @kmcallister \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70726202/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76031100",
    "html_url": "https://github.com/rust-lang/rust/issues/9364#issuecomment-76031100",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9364",
    "id": 76031100,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2MDMxMTAw",
    "user": {
      "login": "kmcallister",
      "id": 444997,
      "node_id": "MDQ6VXNlcjQ0NDk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/444997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kmcallister",
      "html_url": "https://github.com/kmcallister",
      "followers_url": "https://api.github.com/users/kmcallister/followers",
      "following_url": "https://api.github.com/users/kmcallister/following{/other_user}",
      "gists_url": "https://api.github.com/users/kmcallister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kmcallister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kmcallister/subscriptions",
      "organizations_url": "https://api.github.com/users/kmcallister/orgs",
      "repos_url": "https://api.github.com/users/kmcallister/repos",
      "events_url": "https://api.github.com/users/kmcallister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kmcallister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-25T19:00:55Z",
    "updated_at": "2015-02-25T19:00:55Z",
    "body": "`$($x:tt)*` definitely _does_ work; it's a common pattern for forwarding arguments between macros. e.g.\n\n``` rust\nmacro_rules! foo {\n    ($($x:tt)*) => (println!($($x)*));\n}\n\nfn main() {\n    foo!(\"Hello, {}!\", \"world\");\n}\n```\n\nThe example originally given by @vadimcn should not have `$body:tt` on the right hand side of a `=>`, but that doesn't change the outcome.  I think what @steveklabnik sees now is a completely different bug, however.  The parser shouldn't _ever_ try to process an interpolated tt as a token.  It should crack it open and process the tokens inside.  I'm going to look into this more.\n\nIt seems like the issue @paulstansifer originally raised here was fixed at some point, although I'm not sure.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76031100/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76079800",
    "html_url": "https://github.com/rust-lang/rust/issues/9364#issuecomment-76079800",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9364",
    "id": 76079800,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2MDc5ODAw",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-25T22:57:36Z",
    "updated_at": "2015-02-25T22:57:36Z",
    "body": "Yeah, currently, interpolated tokens on the RHS can only be used as input to other macros. \n\nThe parsing problem on the LHS (which is what this issue is about) had been mitigated, - now it is at least possible to match `$($x:tt)*` when it is followed by a \"close\" delimiter, i.e.`}`, `)`  or `]`.   I think it would be very hard to fix it in the general case because of inherent parsing ambiguities.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76079800/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76081492",
    "html_url": "https://github.com/rust-lang/rust/issues/9364#issuecomment-76081492",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9364",
    "id": 76081492,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2MDgxNDky",
    "user": {
      "login": "kmcallister",
      "id": 444997,
      "node_id": "MDQ6VXNlcjQ0NDk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/444997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kmcallister",
      "html_url": "https://github.com/kmcallister",
      "followers_url": "https://api.github.com/users/kmcallister/followers",
      "following_url": "https://api.github.com/users/kmcallister/following{/other_user}",
      "gists_url": "https://api.github.com/users/kmcallister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kmcallister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kmcallister/subscriptions",
      "organizations_url": "https://api.github.com/users/kmcallister/orgs",
      "repos_url": "https://api.github.com/users/kmcallister/repos",
      "events_url": "https://api.github.com/users/kmcallister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kmcallister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-25T23:08:06Z",
    "updated_at": "2015-02-25T23:08:12Z",
    "body": "Okay, cool. In that case I'm closing this as a dupe of #3232.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76081492/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
