[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76352848",
    "html_url": "https://github.com/rust-lang/rust/issues/17462#issuecomment-76352848",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17462",
    "id": 76352848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2MzUyODQ4",
    "user": {
      "login": "UserAB1236872",
      "id": 3078382,
      "node_id": "MDQ6VXNlcjMwNzgzODI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3078382?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/UserAB1236872",
      "html_url": "https://github.com/UserAB1236872",
      "followers_url": "https://api.github.com/users/UserAB1236872/followers",
      "following_url": "https://api.github.com/users/UserAB1236872/following{/other_user}",
      "gists_url": "https://api.github.com/users/UserAB1236872/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/UserAB1236872/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/UserAB1236872/subscriptions",
      "organizations_url": "https://api.github.com/users/UserAB1236872/orgs",
      "repos_url": "https://api.github.com/users/UserAB1236872/repos",
      "events_url": "https://api.github.com/users/UserAB1236872/events{/privacy}",
      "received_events_url": "https://api.github.com/users/UserAB1236872/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-27T08:00:52Z",
    "updated_at": "2015-02-27T08:00:52Z",
    "body": "This seems to be the same issue I'm having:\n\n```\nuse std::cmp::Eq;\n\nenum List<T: Eq> {\n    Cons {\n        val: T,\n        next: Box<List<T>>,\n    },\n    Nil,\n}\n\nimpl <T: Eq> List<T> {\n    fn find_mut(&mut self, query: T) -> &mut List<T> {\n        use List::{Cons, Nil};\n        match *self {\n            Nil => self,\n            Cons{ref val, ref mut next} =>\n            if *val == query { self } else { next.find_mut(query) },\n        }\n    }\n}\n```\n\nThe example is a bit useless, but that's about as minimal as I could get it. The actual case was a Binary Search Tree. [Playground link](http://is.gd/l61Zav), but the short version is you get the error `cannot borrow '*self' as mutable because 'self.val' is also borrowed as immutable`.\n\nThis is despite the fact that all the `ref` borrows will end upon return from the match. Without returning `self` from the `Cons` clause, it compiles fine. I can't even really find a good workaround for this without forcing T to implement the Copy trait.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76352848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76474834",
    "html_url": "https://github.com/rust-lang/rust/issues/17462#issuecomment-76474834",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17462",
    "id": 76474834,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2NDc0ODM0",
    "user": {
      "login": "UserAB1236872",
      "id": 3078382,
      "node_id": "MDQ6VXNlcjMwNzgzODI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3078382?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/UserAB1236872",
      "html_url": "https://github.com/UserAB1236872",
      "followers_url": "https://api.github.com/users/UserAB1236872/followers",
      "following_url": "https://api.github.com/users/UserAB1236872/following{/other_user}",
      "gists_url": "https://api.github.com/users/UserAB1236872/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/UserAB1236872/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/UserAB1236872/subscriptions",
      "organizations_url": "https://api.github.com/users/UserAB1236872/orgs",
      "repos_url": "https://api.github.com/users/UserAB1236872/repos",
      "events_url": "https://api.github.com/users/UserAB1236872/events{/privacy}",
      "received_events_url": "https://api.github.com/users/UserAB1236872/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-27T21:27:39Z",
    "updated_at": "2015-02-27T21:27:39Z",
    "body": "Perhaps the title should be changed to something like \"Borrow checker is too sensitive to borrows in pattern matching.\"\n\nAnother example has shown up on [stack overflow](http://stackoverflow.com/questions/28767108/borrow-pointer-errors-recursively-traversing-tree).\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76474834/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/216214875",
    "html_url": "https://github.com/rust-lang/rust/issues/17462#issuecomment-216214875",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17462",
    "id": 216214875,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjIxNDg3NQ==",
    "user": {
      "login": "birkenfeld",
      "id": 144359,
      "node_id": "MDQ6VXNlcjE0NDM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/144359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/birkenfeld",
      "html_url": "https://github.com/birkenfeld",
      "followers_url": "https://api.github.com/users/birkenfeld/followers",
      "following_url": "https://api.github.com/users/birkenfeld/following{/other_user}",
      "gists_url": "https://api.github.com/users/birkenfeld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/birkenfeld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/birkenfeld/subscriptions",
      "organizations_url": "https://api.github.com/users/birkenfeld/orgs",
      "repos_url": "https://api.github.com/users/birkenfeld/repos",
      "events_url": "https://api.github.com/users/birkenfeld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/birkenfeld/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-02T11:42:01Z",
    "updated_at": "2016-05-02T11:42:01Z",
    "body": "Doesn't look there anything diagnostic-related to do here.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/216214875/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424059387",
    "html_url": "https://github.com/rust-lang/rust/issues/17462#issuecomment-424059387",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17462",
    "id": 424059387,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDA1OTM4Nw==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-09-24T17:33:53Z",
    "updated_at": "2018-09-24T17:33:53Z",
    "body": "Triage: this code still does not compile",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424059387/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424113559",
    "html_url": "https://github.com/rust-lang/rust/issues/17462#issuecomment-424113559",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17462",
    "id": 424113559,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDExMzU1OQ==",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-09-24T20:28:29Z",
    "updated_at": "2019-04-29T11:06:22Z",
    "body": "Note that this will be fine once NLL stabilizes:\r\n\r\n```rust\r\nstruct Node {\r\n    left: Option<Box<Node>>,\r\n}\r\n\r\nfn leftmost_child(n: &mut Node) -> &mut Node {\r\n    let mut leftest = n;\r\n    loop {\r\n        match leftest.left {\r\n            Some(ref mut nl) => leftest = &mut **nl,\r\n            None => break,\r\n        }\r\n    }\r\n    leftest\r\n}\r\n\r\nfn main() {}\r\n```\r\n\r\nOr more idiomatically:\r\n\r\n```rust\r\nstruct Node {\r\n    left: Option<Box<Node>>,\r\n}\r\n\r\nfn leftmost_child(n: &mut Node) -> &mut Node {\r\n    let mut leftest = n;\r\n    while let Some(ref mut nl) = leftest.left {\r\n        leftest = nl;\r\n    }\r\n    leftest\r\n}\r\n\r\nfn main() {}\r\n```\r\n\r\nSee also the [canonical answer for this on Stack Overflow](https://stackoverflow.com/q/37986640/155423), which shows how to make it work before NLL.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424113559/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/487536152",
    "html_url": "https://github.com/rust-lang/rust/issues/17462#issuecomment-487536152",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17462",
    "id": 487536152,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NzUzNjE1Mg==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-04-29T10:53:35Z",
    "updated_at": "2019-04-29T10:53:35Z",
    "body": "NLL (migrate mode) is enabled in all editions as of PR #59114. Verified that test case compiled in Nightly 2015 edition; closing as fixed.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/487536152/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
