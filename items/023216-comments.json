[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/80831652",
    "html_url": "https://github.com/rust-lang/rust/issues/23216#issuecomment-80831652",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23216",
    "id": 80831652,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwODMxNjUy",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-15T04:07:34Z",
    "updated_at": "2015-03-15T04:07:34Z",
    "body": "@CtrlZvi: Can't find this API in MSDN...  Are you sure you've declared it correctly?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/80831652/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/80863519",
    "html_url": "https://github.com/rust-lang/rust/issues/23216#issuecomment-80863519",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23216",
    "id": 80863519,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwODYzNTE5",
    "user": {
      "login": "CtrlZvi",
      "id": 4283627,
      "node_id": "MDQ6VXNlcjQyODM2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4283627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CtrlZvi",
      "html_url": "https://github.com/CtrlZvi",
      "followers_url": "https://api.github.com/users/CtrlZvi/followers",
      "following_url": "https://api.github.com/users/CtrlZvi/following{/other_user}",
      "gists_url": "https://api.github.com/users/CtrlZvi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CtrlZvi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CtrlZvi/subscriptions",
      "organizations_url": "https://api.github.com/users/CtrlZvi/orgs",
      "repos_url": "https://api.github.com/users/CtrlZvi/repos",
      "events_url": "https://api.github.com/users/CtrlZvi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CtrlZvi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-15T05:15:27Z",
    "updated_at": "2015-03-15T07:21:28Z",
    "body": "@vadimcn It's not documented in MSDN as its not part of the API. But it's an exported function in the store\\amd64 version of vccorlib. It's called as part of the initialization of WinRT apps. I think I got the declaration correct, but maybe I got it wrong?\n\nI copied the name from Dependency Walker (looking at \"C:\\Program Files\\WindowsApps\\Microsoft.VCLibs.120.00.Debug_12.0.21005.1_x64__8wekyb3d8bbwe\\vccorlib120_app.dll\" after installing Visual Studio 2013 and running a 64 bit of a sample WinRT Universal App):\nMangled: ?GetCmdArguments@Details@Platform@@YAPEAPEA_WPEAH@Z\nUnMangled: wchar_t \\* \\* Platform::Details::GetCmdArguments(int *)\n\nI confirmed through tracing through the DirectX WinRT Universal App sample that the function does mutate the input, which is how it returns the number of command line arguments.\n\nIf I change the #[link_name] then it fails to link, so the import library definitely provides the symbol as specified.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/80863519/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/80916620",
    "html_url": "https://github.com/rust-lang/rust/issues/23216#issuecomment-80916620",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23216",
    "id": 80916620,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwOTE2NjIw",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-15T08:24:18Z",
    "updated_at": "2015-03-15T08:24:18Z",
    "body": "So how do I run this?   Looks like you are trying to create a store app?\nWhat specific problems are you seeing?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/80916620/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/81255448",
    "html_url": "https://github.com/rust-lang/rust/issues/23216#issuecomment-81255448",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23216",
    "id": 81255448,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMjU1NDQ4",
    "user": {
      "login": "CtrlZvi",
      "id": 4283627,
      "node_id": "MDQ6VXNlcjQyODM2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4283627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CtrlZvi",
      "html_url": "https://github.com/CtrlZvi",
      "followers_url": "https://api.github.com/users/CtrlZvi/followers",
      "following_url": "https://api.github.com/users/CtrlZvi/following{/other_user}",
      "gists_url": "https://api.github.com/users/CtrlZvi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CtrlZvi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CtrlZvi/subscriptions",
      "organizations_url": "https://api.github.com/users/CtrlZvi/orgs",
      "repos_url": "https://api.github.com/users/CtrlZvi/repos",
      "events_url": "https://api.github.com/users/CtrlZvi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CtrlZvi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-15T21:47:56Z",
    "updated_at": "2015-03-15T21:47:56Z",
    "body": "The issue can be seen without running, but I'll provide instructions for running at the bottom of this.\nI am trying to use Rust to create a Store App.\n\nWhen linking against import libraries for DLLs, what's imported is just a `jmp` instruction followed by a couple `nop` instructions. The `jmp` jumps to an address stored in the contents of a memory location that is addressed by relative offset to an entry in the import address table (IAT). For the above code, linked against the vccorlib import library for 64bit store applications, the `jmp` instruction for the Platform::Details::GetCmdArguments function winds up with an absolute offset into the IAT instead of a relative one. This causes at best an invalid access at runtime and worse jumping to a random point in memory and executing code. If the executable is patched to use a relative offset instead, then the program runs fine.\n\nTo run the code:\n1) Compile the above code for testing being sure to specify the path to the 64-bit store version of the Visual Studio 2013 VC libraries as a linker path (defaults to C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\lib\\store\\amd64).\n\n``` bash\nrustc minimumrepro.rs --crate-name minimumrepro --crate-type lib -g --test --emit=dep-info,link -L \"C:/Program Files (x86)/Microsoft Visual Studio 12.0/VC/lib/store/amd64\"\n```\n\n1) Copy vccorlib120_app.dll, msvcrp120_app.dll, and msvcr120_app.dll next to the test executable from C:\\Program Files\\WindowsApps\\Microsoft.VCLibs.120.00_12.0.21005.1_x64__8wekyb3d8bbwe (the hash at the end might be different). If necessary use Visual Studio to create a run a sample 64bit Windows store app to install those libraries.\n2) For each of the copied DLLs run link.exe /EDIT /APPCONTAINER:NO <dll>\n3) Run the executable\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/81255448/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/81763829",
    "html_url": "https://github.com/rust-lang/rust/issues/23216#issuecomment-81763829",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23216",
    "id": 81763829,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNzYzODI5",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-16T16:05:42Z",
    "updated_at": "2015-03-16T16:05:42Z",
    "body": "Rustc-generated code looks correct, however the address on the import table stub is wrong.  It's probably [this linker bug](https://sourceware.org/bugzilla/show_bug.cgi?id=16598).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/81763829/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/82006593",
    "html_url": "https://github.com/rust-lang/rust/issues/23216#issuecomment-82006593",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23216",
    "id": 82006593,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMDA2NTkz",
    "user": {
      "login": "CtrlZvi",
      "id": 4283627,
      "node_id": "MDQ6VXNlcjQyODM2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4283627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CtrlZvi",
      "html_url": "https://github.com/CtrlZvi",
      "followers_url": "https://api.github.com/users/CtrlZvi/followers",
      "following_url": "https://api.github.com/users/CtrlZvi/following{/other_user}",
      "gists_url": "https://api.github.com/users/CtrlZvi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CtrlZvi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CtrlZvi/subscriptions",
      "organizations_url": "https://api.github.com/users/CtrlZvi/orgs",
      "repos_url": "https://api.github.com/users/CtrlZvi/repos",
      "events_url": "https://api.github.com/users/CtrlZvi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CtrlZvi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-17T00:44:14Z",
    "updated_at": "2015-03-17T00:44:14Z",
    "body": "Yep, that looks like the exact issue.  Good find.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/82006593/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85346366",
    "html_url": "https://github.com/rust-lang/rust/issues/23216#issuecomment-85346366",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23216",
    "id": 85346366,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MzQ2MzY2",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-24T05:26:00Z",
    "updated_at": "2015-03-24T05:26:00Z",
    "body": "I've pinged maintainers, and the fix is now checked in.  Unclear how soon it will show up in mingw-builds...\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85346366/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85354948",
    "html_url": "https://github.com/rust-lang/rust/issues/23216#issuecomment-85354948",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23216",
    "id": 85354948,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MzU0OTQ4",
    "user": {
      "login": "CtrlZvi",
      "id": 4283627,
      "node_id": "MDQ6VXNlcjQyODM2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4283627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CtrlZvi",
      "html_url": "https://github.com/CtrlZvi",
      "followers_url": "https://api.github.com/users/CtrlZvi/followers",
      "following_url": "https://api.github.com/users/CtrlZvi/following{/other_user}",
      "gists_url": "https://api.github.com/users/CtrlZvi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CtrlZvi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CtrlZvi/subscriptions",
      "organizations_url": "https://api.github.com/users/CtrlZvi/orgs",
      "repos_url": "https://api.github.com/users/CtrlZvi/repos",
      "events_url": "https://api.github.com/users/CtrlZvi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CtrlZvi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-24T06:00:14Z",
    "updated_at": "2015-03-24T06:00:14Z",
    "body": "That's awesome. It looks like the bug had had a fix attached for a very long time with no traction. Thanks so much!\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85354948/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/126879171",
    "html_url": "https://github.com/rust-lang/rust/issues/23216#issuecomment-126879171",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23216",
    "id": 126879171,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNjg3OTE3MQ==",
    "user": {
      "login": "CtrlZvi",
      "id": 4283627,
      "node_id": "MDQ6VXNlcjQyODM2Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4283627?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CtrlZvi",
      "html_url": "https://github.com/CtrlZvi",
      "followers_url": "https://api.github.com/users/CtrlZvi/followers",
      "following_url": "https://api.github.com/users/CtrlZvi/following{/other_user}",
      "gists_url": "https://api.github.com/users/CtrlZvi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CtrlZvi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CtrlZvi/subscriptions",
      "organizations_url": "https://api.github.com/users/CtrlZvi/orgs",
      "repos_url": "https://api.github.com/users/CtrlZvi/repos",
      "events_url": "https://api.github.com/users/CtrlZvi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CtrlZvi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-01T07:50:26Z",
    "updated_at": "2015-08-01T07:50:26Z",
    "body": "The MSVC beta of Rust 1.2 does not seem to have this issue.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/126879171/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/127052553",
    "html_url": "https://github.com/rust-lang/rust/issues/23216#issuecomment-127052553",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23216",
    "id": 127052553,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNzA1MjU1Mw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-02T18:33:33Z",
    "updated_at": "2015-08-02T18:33:33Z",
    "body": "It looks like the bug has been fixed upstream and MSVC also fixes this, so at this point everything is in the pipeline. As a result I'm going to close this, nice investigation @vadimcn and @CtrlZvi!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/127052553/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
