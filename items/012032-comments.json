[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34354904",
    "html_url": "https://github.com/rust-lang/rust/issues/12032#issuecomment-34354904",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12032",
    "id": 34354904,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0MzU0OTA0",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-06T18:36:33Z",
    "updated_at": "2014-02-06T18:36:33Z",
    "body": "1.0 blocker, P-low.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34354904/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45814259",
    "html_url": "https://github.com/rust-lang/rust/issues/12032#issuecomment-45814259",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12032",
    "id": 45814259,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODE0MjU5",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-11T23:40:29Z",
    "updated_at": "2014-06-11T23:40:29Z",
    "body": "Nominating for removal from milestone. We'll live if this isn't documented.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45814259/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45950583",
    "html_url": "https://github.com/rust-lang/rust/issues/12032#issuecomment-45950583",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12032",
    "id": 45950583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1OTUwNTgz",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-12T21:30:04Z",
    "updated_at": "2014-06-12T21:30:04Z",
    "body": "Removing from 1.0 milestone.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45950583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74313060",
    "html_url": "https://github.com/rust-lang/rust/issues/12032#issuecomment-74313060",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12032",
    "id": 74313060,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MzEzMDYw",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-13T19:37:39Z",
    "updated_at": "2015-02-13T19:37:39Z",
    "body": "Traige: I'm not sure what these are exactly, maybe we can have a chat about them, @nikomatsakis ?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74313060/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74365543",
    "html_url": "https://github.com/rust-lang/rust/issues/12032#issuecomment-74365543",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12032",
    "id": 74365543,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MzY1NTQz",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-14T07:28:45Z",
    "updated_at": "2015-02-14T07:28:45Z",
    "body": "@steveklabnik I would say\n- niko's blog posts are a great start for understanding the background here:\n  - http://smallcultfollowing.com/babysteps/blog/2012/09/15/rvalue-lifetimes/\n  - http://smallcultfollowing.com/babysteps/blog/2014/01/09/rvalue-lifetimes-in-rust/\n- Many of the rules are illustrated via example in [run-pass/cleanup-value-scopes.rs](https://github.com/rust-lang/rust/blob/master/src/test/run-pass/cleanup-rvalue-scopes.rs), as noted in #3511\n\n---\n\nMy go-to example of a gotcha here: Consider the following hypothetical desugaring of `for`-loop into more primitive constructs:\n\n``` rust\nmacro_rules! for_bad {\n    (($pat:pat) in $head:expr { $($body:stmt)* }) => { {\n        let mut iter = IntoIterator::into_iter($head);\n        loop {\n            match Iterator::next(&mut iter) {\n                Some($pat) => { $($body)* }\n                None => break,\n            }\n        }\n    } }\n}\n```\n\nThe above is remarkably easy to read, at least for someone versed in `macro_rules!`: evaluate the input `$head` expression, convert it to an iterator, bind that result to `iter`, and then loop over the method calls to `next`.\n\nUnfortunately, it does not work, and (according to my understanding), it is due to the R-value lifetime rules for temporaries.\n\nIn particular, consider: `for_bad!(  (k) in &[7,8,9] { println!(\"{}\", k) } );`; here, the temporaries created during the evaluation of:\n\n``` rust\n        let mut iter = IntoIterator::into_iter($head);\n```\n\nonly live to the end of that statement, not beyond.  Thus the `[7,8,9]` in the head expression `&[7,8,9]` does not survive long enough for us to iterate over it!\n\nSo, what's the go-to fix for this?  Its this: Bind via `match` instead of `let`, because `match` keeps its input alive for the entirety of the evaluation of the matched arm.  (The main surprise to me here is that we need to use `match` to bind a non enum value.)\n\nHere's that desugaring:\n\n``` rust\nmacro_rules! for_gud {\n    (($pat:pat) in $head:expr { $($body:stmt)* }) => { {\n        match IntoIterator::into_iter($head) {\n            mut iter => loop {\n                match Iterator::next(&mut iter) {\n                    Some($pat) => { $($body)* }\n                    None => break,\n                }\n            }\n        }\n    } }\n}\n```\n\nAnd here's a playpen link to save you the trouble of transcribing the above into code if you want to play with it: http://is.gd/NmptIx\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74365543/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/99535792",
    "html_url": "https://github.com/rust-lang/rust/issues/12032#issuecomment-99535792",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12032",
    "id": 99535792,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk5NTM1Nzky",
    "user": {
      "login": "sanxiyn",
      "id": 45249,
      "node_id": "MDQ6VXNlcjQ1MjQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sanxiyn",
      "html_url": "https://github.com/sanxiyn",
      "followers_url": "https://api.github.com/users/sanxiyn/followers",
      "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions",
      "organizations_url": "https://api.github.com/users/sanxiyn/orgs",
      "repos_url": "https://api.github.com/users/sanxiyn/repos",
      "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sanxiyn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-06T16:52:48Z",
    "updated_at": "2015-05-06T16:52:48Z",
    "body": "Any update? I wrote down some rules here: https://internals.rust-lang.org/t/borrow-scopes/1732\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/99535792/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/115834019",
    "html_url": "https://github.com/rust-lang/rust/issues/12032#issuecomment-115834019",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12032",
    "id": 115834019,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNTgzNDAxOQ==",
    "user": {
      "login": "taralx",
      "id": 1036808,
      "node_id": "MDQ6VXNlcjEwMzY4MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1036808?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/taralx",
      "html_url": "https://github.com/taralx",
      "followers_url": "https://api.github.com/users/taralx/followers",
      "following_url": "https://api.github.com/users/taralx/following{/other_user}",
      "gists_url": "https://api.github.com/users/taralx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/taralx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/taralx/subscriptions",
      "organizations_url": "https://api.github.com/users/taralx/orgs",
      "repos_url": "https://api.github.com/users/taralx/repos",
      "events_url": "https://api.github.com/users/taralx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/taralx/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-26T18:57:28Z",
    "updated_at": "2015-06-26T18:57:37Z",
    "body": "@pnkfelix Wouldn't it work to just bind $head with a let?\n\n``` rust\nmacro_rules! for_ok {\n    (($pat:pat) in $head:expr { $($body:stmt)* }) => { {\n        let head = $head;\n        let mut iter = IntoIterator::into_iter(head);\n        loop {\n            match Iterator::next(&mut iter) {\n                Some($pat) => { $($body)* }\n                None => break,\n            }\n        }\n    } }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/115834019/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/118958772",
    "html_url": "https://github.com/rust-lang/rust/issues/12032#issuecomment-118958772",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12032",
    "id": 118958772,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExODk1ODc3Mg==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-06T18:58:55Z",
    "updated_at": "2015-07-06T18:58:55Z",
    "body": "https://github.com/rust-lang/rust/blob/master/src/librustc/middle/region.rs#L891-L950 has some info\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/118958772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/119274606",
    "html_url": "https://github.com/rust-lang/rust/issues/12032#issuecomment-119274606",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12032",
    "id": 119274606,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExOTI3NDYwNg==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-07T17:22:49Z",
    "updated_at": "2015-07-07T17:22:49Z",
    "body": "After doing https://github.com/rust-lang/rust/pull/26833 , @nikomatsakis and I decided to not actually go through this right now. At some point, we'll be developing a more formal model for Rust, and this information will belong there, but as it is, it feels weird in the reference.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/119274606/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
