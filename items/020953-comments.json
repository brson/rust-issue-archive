[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69508366",
    "html_url": "https://github.com/rust-lang/rust/issues/20953#issuecomment-69508366",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20953",
    "id": 69508366,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTA4MzY2",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-11T19:51:56Z",
    "updated_at": "2015-01-11T19:51:56Z",
    "body": "CC @nikomatsakis \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69508366/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69530488",
    "html_url": "https://github.com/rust-lang/rust/issues/20953#issuecomment-69530488",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20953",
    "id": 69530488,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTMwNDg4",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-12T05:07:26Z",
    "updated_at": "2015-01-12T05:07:26Z",
    "body": "I think the problem is worse than this; trait objects in general don\u2019t seem to be being recognised as implementing their traits:\n\n``` rust\ntrait Trait { }\n\nfn a(x: &Trait) { try(x); }\nfn b(x: &mut Trait) { try(x); }\nfn c(x: Box<Trait>) { try(x); }\nfn try<T: Trait>(t: T) { }\n\nfn main() { }\n```\n\nAll three fail:\n\n``` text\ni.rs:3:19: 3:22 error: the trait `Trait` is not implemented for the type `&Trait`\ni.rs:3 fn a(x: &Trait) { try(x); }\n                         ^~~\ni.rs:4:23: 4:26 error: the trait `Trait` is not implemented for the type `&mut Trait`\ni.rs:4 fn b(x: &mut Trait) { try(x); }\n                             ^~~\ni.rs:5:23: 5:26 error: the trait `Trait` is not implemented for the type `Box<Trait>`\ni.rs:5 fn c(x: Box<Trait>) { try(x); }\n                             ^~~\nerror: aborting due to 3 previous errors\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69530488/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69565093",
    "html_url": "https://github.com/rust-lang/rust/issues/20953#issuecomment-69565093",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20953",
    "id": 69565093,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTY1MDkz",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-12T12:50:10Z",
    "updated_at": "2015-01-12T12:50:10Z",
    "body": "I'm not sure this is a bug at all. You're pretty much asking for an automatic `impl<T> Trait for &mut T where T: Trait` - I did come up with a `Deref` & `DerefMut`-based model that would kinda work for this and IIRC @nikomatsakis pointed out that object-safe traits would eventually qualify for this. We do have object safety now, so it might be doable, but I wouldn't bet on it making into 1.0.\nIn the meanwhile, does `.by_ref()` work? If it doesn't, is it just the case of missing `?Sized` in a couple places?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69565093/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69567372",
    "html_url": "https://github.com/rust-lang/rust/issues/20953#issuecomment-69567372",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20953",
    "id": 69567372,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTY3Mzcy",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-12T13:12:34Z",
    "updated_at": "2015-01-12T13:12:34Z",
    "body": "This a particular case of #20617. See comments over there. @nikomatsakis is leaning towards an opt-in `derive` syntax extension that handles the boiler plate code, instead of automatic `impl`s by the compiler.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69567372/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69633632",
    "html_url": "https://github.com/rust-lang/rust/issues/20953#issuecomment-69633632",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20953",
    "id": 69633632,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NjMzNjMy",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-12T19:51:53Z",
    "updated_at": "2015-01-13T09:17:51Z",
    "body": "ByRef for trait objects seems to hit the same llvm assertion:\n\n``` rust\nfn main() {\n    struct ByRef<'r, I: ?Sized>(&'r mut I) where I: 'r;\n    impl<'r, I: ?Sized> Iterator for ByRef<'r, I> where\n        I: 'r + Iterator\n    {\n        type Item = <I as Iterator>::Item;\n        fn next(&mut self) -> Option<<I as Iterator>::Item>\n        {\n            self.0.next()\n        }\n    }\n\n    let mut it = Box::new(0..10) as Box<Iterator<Item=i32>>;\n    assert_eq!(it.next(), Some(0));\n\n    let mut jt: &mut Iterator<Item=i32> = &mut *it;\n    assert_eq!(jt.next(), Some(1));\n\n    let mut r = ByRef(jt);\n    assert_eq!(r.next(), Some(2));    // No ICE without this line.\n}\n```\n\noutput:\n\n```\nrustc: /build/rust-git/src/rust/src/llvm/lib/IR/Instructions.cpp:1086: void llvm::StoreInst::AssertOK(): Assertion `getOperand(0)->getType() == cast<PointerType>(getOperand(1)->getType())->getElementType() && \"Ptr must be a pointer to Val type!\"' failed.\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69633632/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69650240",
    "html_url": "https://github.com/rust-lang/rust/issues/20953#issuecomment-69650240",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20953",
    "id": 69650240,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NjUwMjQw",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-12T21:33:04Z",
    "updated_at": "2015-01-12T21:33:04Z",
    "body": "> I'm not sure this is a bug at all. You're pretty much asking for an automatic `impl<T> Trait for &mut T where T: Trait`\n\nInteresting. So if I have a value with type `Box<T>` where `T` is a trait, then we can't say that `Box<T>` implements `T` in the general case? (Assuming object safety.) So my guess is that `Box<Iterator>` can still call `next` because of auto deref? Shouldn't that mean it can work with `for`? Maybe that is what #20605 is about... You have to explicitly deref a `Box<Iterator>` to use it in `for`?\n\n(Sorry for all the questions. I'm just confused!)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69650240/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69666070",
    "html_url": "https://github.com/rust-lang/rust/issues/20953#issuecomment-69666070",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20953",
    "id": 69666070,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NjY2MDcw",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-12T23:13:26Z",
    "updated_at": "2015-01-12T23:13:26Z",
    "body": "@BurntSushi doing autoderef on the iterator in `for` seems like something reasonable to have.\n#20605 looks like the compiler is mistakenly treating an unsized lvalue as an rvalue, in trans.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69666070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69730247",
    "html_url": "https://github.com/rust-lang/rust/issues/20953#issuecomment-69730247",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20953",
    "id": 69730247,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NzMwMjQ3",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-13T11:20:46Z",
    "updated_at": "2015-01-13T11:20:46Z",
    "body": "On Mon, Jan 12, 2015 at 01:33:08PM -0800, Andrew Gallant wrote:\n\n> Interesting. So if I have a value with type `Box<T>` where `T` is a\n> trait, then we can't say that `Box<T>` implements `T` in the general\n> case?\n\nActually, I believe it works with `Box`, but not with the other types.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69730247/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/269854840",
    "html_url": "https://github.com/rust-lang/rust/issues/20953#issuecomment-269854840",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20953",
    "id": 269854840,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTg1NDg0MA==",
    "user": {
      "login": "hicqu",
      "id": 8407317,
      "node_id": "MDQ6VXNlcjg0MDczMTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8407317?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hicqu",
      "html_url": "https://github.com/hicqu",
      "followers_url": "https://api.github.com/users/hicqu/followers",
      "following_url": "https://api.github.com/users/hicqu/following{/other_user}",
      "gists_url": "https://api.github.com/users/hicqu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hicqu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hicqu/subscriptions",
      "organizations_url": "https://api.github.com/users/hicqu/orgs",
      "repos_url": "https://api.github.com/users/hicqu/repos",
      "events_url": "https://api.github.com/users/hicqu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hicqu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-12-31T08:05:03Z",
    "updated_at": "2016-12-31T08:05:03Z",
    "body": "Just thank you for this issue. It resolves all my problems perfectly!",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/269854840/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
