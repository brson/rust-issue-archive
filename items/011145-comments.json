[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31210824",
    "html_url": "https://github.com/rust-lang/rust/issues/11145#issuecomment-31210824",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11145",
    "id": 31210824,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjEwODI0",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-26T04:14:59Z",
    "updated_at": "2013-12-26T04:14:59Z",
    "body": "Some IRC convo:\n\n```\n19:46 < sfackler> brson: do you know if there's any way to get stuff in test/auxiliary to link against the same version of e.g. libsyntax that that version of rustc links \n                  against?\n19:46 < sfackler> just doing an \"extern mod syntax\" seems to link a stage too high\n19:46 -!- kimundi [kimundi@moz-403D73FE.dip0.t-ipconnect.de] has quit [Ping timeout]\n19:48 <@brson> sfackler: no, there isn't a way. because of the way the stage progression works, rustc is always linked to the previous stage\n19:48 <@brson> i can't imagine a reason that would matter though? what odd thing are you trying to do?\n19:49 <@brson> if you link to rustc from aux though you'll get a different rustc than the one used to do the compilation\n19:49 < sfackler> external syntax extensions! https://github.com/sfackler/rust/blob/28206f335c02ee5fef1eded5ab13dd3b459db839/src/test/auxiliary/macro_crate_test.rs\n19:50 -!- kimundi [kimundi@moz-626CD9BD.dip0.t-ipconnect.de] has joined #rust-internals\n19:50 <@brson> aha\n19:51 < sfackler> I need to use the same libsyntax binary or the dynamic linker fails to match things up properly\n19:51 <@brson> that is going to be tricky because of this issue :(\n19:51 <@brson> i would like to build the stages in a different way so that they aren't intermixed like this, but there are complications\n19:52 <@brson> this is something we need to resolve though\n19:52 <@brson> i guess I'd prefer to just bite the bullet and *completely change the build process*\n19:52 < sfackler> how does run-pass-fulldeps work? would it be possible to do something like that for auxilliary-fulldeps?\n19:53 <@brson> sfackler: no, you would still be getting the wrong libs\n19:53 <@brson> the rustc exe basically has its own set of libraries\n19:53 <@brson> from the previous stage\n19:53 <@brson> you could hack something together to manually point your library to the correct libraries\n19:54 <@brson> but that's minimally useful\n19:54 < sfackler> yeah\n19:54 <@brson> with -L\n19:54 -!- kimundi is now known as zz_kimundi\n19:55 <@brson> in theory the stage3 rustc should have the same libs as its targets\n19:55 <@brson> but stage3 is not used much\n19:55 <@brson> and that's not always true, for unknown reasons\n19:57 <@brson> i'll file an issue about this\n19:58 < sfackler> cool. I'm guessing that this'll block on getting the test infrastructure to a place where it can actually have an rpass test, right?\n19:59 -!- canhtak [canhtak@38266F07.7A8E554D.FC900DAF.IP] has quit [Quit: canhtak]\n20:00 <@brson> sfackler: does it work manually, but not in a test harness? that would surprise me\n20:00 < sfackler> it works off of a full install\n20:01 -!- zz_kimundi is now known as kimundi\n20:01 <@brson> ok. probably because the symbols for the host bins and target bins are identical\n20:01 < sfackler> and i'm guessing that  work at stage1 if I pointed it at the right libsyntax\n20:01 < sfackler> *that it'll\n20:01 <@brson> does the test work in stage2?\n20:02 <@brson> i would expect so, since stage2 is the install stage\n20:02 < sfackler> let me check\n20:02 < sfackler> it does appear to work at stage2\n20:03 <@brson> if it works reliably in stage2 we *might* be able to merge it, but I'm not sure how much we can rely on the stage2 symbols being the same\n20:03 < sfackler> is rustc statically linked?\n20:04 < sfackler> it should definitely work with the installed version of rustc since rustc and the extension crate will be linking to the exact same library\n20:05 <@brson> they won't be linking to the same library. there are always at least two copies of the libs installed\n20:05 < sfackler> oh, really?\n20:05 <@brson> one in /usr/lib and one in /usr/lib/rustc/$triple/lib\n20:05 < sfackler> ah\n20:06 <@brson> i would rather the one in /usr/lib didn't exist\n20:06 <@brson> it's very compilcated to change the build process though\n20:06 < sfackler> yeah, it seems like if you want to link against libsyntax or librustc, you'd always want the same version as rustc's\n20:08 <@brson> yes. it's tricky though. the rustc that is compiling your crate that is linking to libsyntax needs to be exactly compatible with the one that built libsyntax, \n               but it itself also needs to link to the libsyntax that it built\n20:08 <@brson> bootstrapping is neat\n20:09 <@brson> s/neat/hard\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31210824/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31211006",
    "html_url": "https://github.com/rust-lang/rust/issues/11145#issuecomment-31211006",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11145",
    "id": 31211006,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjExMDA2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-26T04:27:33Z",
    "updated_at": "2013-12-26T04:27:33Z",
    "body": "Nominating. If we want a true cross-compile process I think we'll need to deal with this.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31211006/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31962412",
    "html_url": "https://github.com/rust-lang/rust/issues/11145#issuecomment-31962412",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11145",
    "id": 31962412,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxOTYyNDEy",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-09T18:38:38Z",
    "updated_at": "2014-01-09T18:38:38Z",
    "body": "Figuring out some aspects of this are blocked on Loadable Syntax Extensions (i.e. #11151).\n\nAlong with the cross-compilation issues. . .and we don't have to resolve it for 1.0.\n\nSo assigning to P-low.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31962412/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70885847",
    "html_url": "https://github.com/rust-lang/rust/issues/11145#issuecomment-70885847",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11145",
    "id": 70885847,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwODg1ODQ3",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-21T17:49:43Z",
    "updated_at": "2015-01-21T17:49:43Z",
    "body": "Triage: while Loadable Syntax Extensions have landed, I don't think much else has changed here.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70885847/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/178693240",
    "html_url": "https://github.com/rust-lang/rust/issues/11145#issuecomment-178693240",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11145",
    "id": 178693240,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3ODY5MzI0MA==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-02T17:09:41Z",
    "updated_at": "2016-02-02T17:09:41Z",
    "body": "Triage: still not aware of any actual changes yet, but @alexcrichton 's Cargo-based build system may fix this, maybe not?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/178693240/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/181743183",
    "html_url": "https://github.com/rust-lang/rust/issues/11145#issuecomment-181743183",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11145",
    "id": 181743183,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MTc0MzE4Mw==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-09T07:25:10Z",
    "updated_at": "2016-02-09T07:25:10Z",
    "body": "Assigning to compiler team ... though in hindsight maybe we don't have a team that owns build infrastructure issues\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/181743183/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/279101164",
    "html_url": "https://github.com/rust-lang/rust/issues/11145#issuecomment-279101164",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11145",
    "id": 279101164,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTEwMTE2NA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-02-11T00:13:56Z",
    "updated_at": "2017-02-11T00:13:56Z",
    "body": "Quite a bit of time has passed since this was first opened, and I don't think it's wholly relevant any more. In any case with rustbuild now we've refactored the build into the current desired format for many moons to come, so closing.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/279101164/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
