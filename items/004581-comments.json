[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12574427",
    "html_url": "https://github.com/rust-lang/rust/issues/4581#issuecomment-12574427",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4581",
    "id": 12574427,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTc0NDI3",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-01-23T00:02:34Z",
    "updated_at": "2013-01-23T00:02:34Z",
    "body": "Rust uses the `|` character to combine patterns in an \"or\": `match color { Red | Green => ..., Blue | Violet => ... }`, for example. I don't know enough about the macro-parsing rules to say whether that means it couldn't work in macros, though.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12574427/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12574850",
    "html_url": "https://github.com/rust-lang/rust/issues/4581#issuecomment-12574850",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4581",
    "id": 12574850,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTc0ODUw",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-01-23T00:11:04Z",
    "updated_at": "2013-01-23T00:11:04Z",
    "body": "Yes @catamorphism. This is exactly the usage of `|` I want to make, but through a macro.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12574850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12585975",
    "html_url": "https://github.com/rust-lang/rust/issues/4581#issuecomment-12585975",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4581",
    "id": 12585975,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTg1OTc1",
    "user": {
      "login": "lbonn",
      "id": 2680312,
      "node_id": "MDQ6VXNlcjI2ODAzMTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2680312?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lbonn",
      "html_url": "https://github.com/lbonn",
      "followers_url": "https://api.github.com/users/lbonn/followers",
      "following_url": "https://api.github.com/users/lbonn/following{/other_user}",
      "gists_url": "https://api.github.com/users/lbonn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lbonn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lbonn/subscriptions",
      "organizations_url": "https://api.github.com/users/lbonn/orgs",
      "repos_url": "https://api.github.com/users/lbonn/repos",
      "events_url": "https://api.github.com/users/lbonn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lbonn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-01-23T08:28:53Z",
    "updated_at": "2013-01-23T08:28:53Z",
    "body": "The [macro tutorial](http://static.rust-lang.org/doc/tutorial-macros.html#multiplicity) has an interesting example similar to yours.\n\nI've got this code working:\n\n```\nmacro_rules! is_match(\n    ($value:expr, [ $($pattern:pat)|+ ]) => (\n        match $value { \n            $(\n                $pattern => true,\n            )+\n            _ => false\n        }\n    );\n)\n```\n\nused like this: `if is_match!('a', ['a'..'z' | 'A'..'Z'])`.\n\nI suspect your example doesn't work because `pat1 | pat2` is not a pattern in itself.\nThe [match section of the manual](http://static.rust-lang.org/doc/rust.html#match-expressions) is, in my opinion, not very clear on this and I could not find a real definition of `pat`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12585975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17481334",
    "html_url": "https://github.com/rust-lang/rust/issues/4581#issuecomment-17481334",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4581",
    "id": 17481334,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NDgxMzM0",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-06T13:29:41Z",
    "updated_at": "2013-05-06T13:29:41Z",
    "body": "I concur with @lbonn's analysis that vertical-bar (`|`) is not part of the subgrammar for `pat`, so you won't inherit the handling of `|` in your own macro.  (Also, if you drop the surrounding `[` .. `]` from lbonn's definition, then you get something compatible with SimonSapin's original example.  Or at least, it seemed to work for me.)\n\nSo either this is not-a-bug, _or_ it should be interpreted as a request for a named macro-syntactic-class that contains `$($pattern:pat)|+` (but I suspect there is not much value in adding a new named class over just writing the pattern out.)\n\nIssue #2234 is already filed for providing a formal (i.e. EBNF) definition for Rust's grammar, which would presumably help provide more direct answers for these sorts of questions.  Since that's already filed, I'm going to close this bug as not-a-bug.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17481334/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
