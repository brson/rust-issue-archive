[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65674989",
    "html_url": "https://github.com/rust-lang/rust/pull/19459#issuecomment-65674989",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19459",
    "id": 65674989,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1Njc0OTg5",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-04T18:05:50Z",
    "updated_at": "2014-12-04T18:05:50Z",
    "body": "cc @aturon @alexcrichton\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65674989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65724948",
    "html_url": "https://github.com/rust-lang/rust/pull/19459#issuecomment-65724948",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19459",
    "id": 65724948,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NzI0OTQ4",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-04T23:46:50Z",
    "updated_at": "2014-12-04T23:46:50Z",
    "body": "Thanks for the PR! A couple of points:\n1. We're in the middle of creating an IO reform RFC that is likely to remove `BufWriter` in favor of `MemWriter` -- I would be interested to know more about where you're using `BufWriter` and whether `MemWriter` would be feasible instead.\n2. It's a bit weird that you can't also pull out the current position; again, hearing a bit more detail about the use case would help.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65724948/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65818600",
    "html_url": "https://github.com/rust-lang/rust/pull/19459#issuecomment-65818600",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19459",
    "id": 65818600,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1ODE4NjAw",
    "user": {
      "login": "hannobraun",
      "id": 85732,
      "node_id": "MDQ6VXNlcjg1NzMy",
      "avatar_url": "https://avatars.githubusercontent.com/u/85732?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hannobraun",
      "html_url": "https://github.com/hannobraun",
      "followers_url": "https://api.github.com/users/hannobraun/followers",
      "following_url": "https://api.github.com/users/hannobraun/following{/other_user}",
      "gists_url": "https://api.github.com/users/hannobraun/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hannobraun/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hannobraun/subscriptions",
      "organizations_url": "https://api.github.com/users/hannobraun/orgs",
      "repos_url": "https://api.github.com/users/hannobraun/repos",
      "events_url": "https://api.github.com/users/hannobraun/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hannobraun/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-05T16:55:49Z",
    "updated_at": "2014-12-05T16:55:49Z",
    "body": "Hi @aturon,\n\nthanks for your reply.\n\n> We're in the middle of creating an IO reform RFC that is likely to remove BufWriter in favor of MemWriter -- I would be interested to know more about where you're using BufWriter and whether MemWriter would be feasible instead.\n\nWasn't MemWriter deprecated in favour of Vec's Writer implementation?\n\nI'm using BufWriter in an encoder that encodes network messages for a multiplayer game. This encoder is special in two regards:\n1. It doesn't allocate any memory after it's been initialized. This isn't terribly important right now, I just wanted to do it.\n2. It encodes incrementally until the target buffer is full. The reason is that the encoded message goes into a UDP packet and those will cause problems when they become too large.\n\nPseudocode:\n\n``` Rust\nstruct Encoder {\n    buffer: [u8, ..512],\n}\nimpl Encoder {\n    fn new_message(&mut self) -> MessageEncoder {\n        MessageEncoder {\n            writer: BufWriter::new(&mut self.buffer),\n        }\n    }\n}\n\nstruct MessageEncoder {\n    writer: BufWriter,\n}\nimpl MessageEncoder {\n    fn add_update(&mut self, update: &[u8]) -> bool {\n        // write update into the internal buffer using the BufWriter\n        // return a bool indicating whether the update could be written\n        // note: If the update doesn't fit in the buffer, BufWriter returns an error and writes nothing. This fits my use case perfectly\n    }\n    fn encode(self, message_buffer: &mut [u8]) -> IoResult<&[u8]> {\n        // copy message from internal buffer into the caller-provided buffer\n        // return slice of caller-provided buffer, that covers exactly what we've written into it\n        // this is where I need BufWriter::into_slice\n    }\n}\n```\n\nIf BufWriter were no longer available, I guess I could use MemWriter (or rather Vec) for this and manually keep track of how many bytes were written. I'd rather use my own my own version of BufWriter though, since it's exactly what I need and would be relatively easy to write myself.\n\n> It's a bit weird that you can't also pull out the current position; again, hearing a bit more detail about the use case would help.\n\nYou can, and I do. See [tell](http://doc.rust-lang.org/std/io/struct.BufWriter.html#method.tell)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65818600/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65824175",
    "html_url": "https://github.com/rust-lang/rust/pull/19459#issuecomment-65824175",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19459",
    "id": 65824175,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1ODI0MTc1",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-05T17:28:59Z",
    "updated_at": "2014-12-05T17:28:59Z",
    "body": "`MemWriter` will probably be added back with support for seeks. However, it was deprecated in order to move all existing users over to `Vec` in order to avoid a performance hit.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65824175/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65890889",
    "html_url": "https://github.com/rust-lang/rust/pull/19459#issuecomment-65890889",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19459",
    "id": 65890889,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1ODkwODg5",
    "user": {
      "login": "hannobraun",
      "id": 85732,
      "node_id": "MDQ6VXNlcjg1NzMy",
      "avatar_url": "https://avatars.githubusercontent.com/u/85732?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hannobraun",
      "html_url": "https://github.com/hannobraun",
      "followers_url": "https://api.github.com/users/hannobraun/followers",
      "following_url": "https://api.github.com/users/hannobraun/following{/other_user}",
      "gists_url": "https://api.github.com/users/hannobraun/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hannobraun/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hannobraun/subscriptions",
      "organizations_url": "https://api.github.com/users/hannobraun/orgs",
      "repos_url": "https://api.github.com/users/hannobraun/repos",
      "events_url": "https://api.github.com/users/hannobraun/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hannobraun/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-06T09:21:36Z",
    "updated_at": "2014-12-06T09:21:36Z",
    "body": "Ah, that makes sense. Thanks!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65890889/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67558356",
    "html_url": "https://github.com/rust-lang/rust/pull/19459#issuecomment-67558356",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19459",
    "id": 67558356,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NTU4MzU2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-18T21:17:10Z",
    "updated_at": "2014-12-18T21:17:10Z",
    "body": "For now I'm going to close this while the dust on https://github.com/rust-lang/rfcs/pull/517 settles (to see which direction we're going to go with this).\n\nFor now you should be able to re-acquire the slice in some circumstances with an explicit scope that contains the `MemWriter` (but this isn't always applicable).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67558356/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
