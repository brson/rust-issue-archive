[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2664440",
    "html_url": "https://github.com/rust-lang/rust/issues/1155#issuecomment-2664440",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1155",
    "id": 2664440,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NjQ0NDA=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-11-08T06:53:53Z",
    "updated_at": "2011-11-08T06:56:40Z",
    "body": "This is cute. By default log is turned off, and doesn't evaluate its arguments, so recv isn't even being called. Combine that with the fact that we don't clean up our queues when data gets left in them and the \"Hello World\" string gets leaked. I bet if you changed 'log' to 'log_err' it would work as expected.\n\nI think we should fix the example to be less error prone and properly clean up the port queues when they die.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2664440/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2668708",
    "html_url": "https://github.com/rust-lang/rust/issues/1155#issuecomment-2668708",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1155",
    "id": 2668708,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2Njg3MDg=",
    "user": {
      "login": "jhferris",
      "id": 964097,
      "node_id": "MDQ6VXNlcjk2NDA5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/964097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jhferris",
      "html_url": "https://github.com/jhferris",
      "followers_url": "https://api.github.com/users/jhferris/followers",
      "following_url": "https://api.github.com/users/jhferris/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhferris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jhferris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhferris/subscriptions",
      "organizations_url": "https://api.github.com/users/jhferris/orgs",
      "repos_url": "https://api.github.com/users/jhferris/repos",
      "events_url": "https://api.github.com/users/jhferris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jhferris/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-11-08T15:18:35Z",
    "updated_at": "2011-11-08T15:18:35Z",
    "body": "Partially for my own edification, I just spent a few minutes poking around in the rt/ folder trying to get a handle on this bug/how ports & channels are structured internally. When the string is sent from the channel, it's buffered by the channel until one if its ports calls recv? And if there are >1 ports bound to one channel, only one port will ever recv \"Hello World\", or is it broadcast to everyone? \n\nIf my understanding is correct, this bug would get fixed by modifying the destructor in rt/rust_chan.cpp?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2668708/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2668747",
    "html_url": "https://github.com/rust-lang/rust/issues/1155#issuecomment-2668747",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1155",
    "id": 2668747,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2Njg3NDc=",
    "user": {
      "login": "jhferris",
      "id": 964097,
      "node_id": "MDQ6VXNlcjk2NDA5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/964097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jhferris",
      "html_url": "https://github.com/jhferris",
      "followers_url": "https://api.github.com/users/jhferris/followers",
      "following_url": "https://api.github.com/users/jhferris/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhferris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jhferris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhferris/subscriptions",
      "organizations_url": "https://api.github.com/users/jhferris/orgs",
      "repos_url": "https://api.github.com/users/jhferris/repos",
      "events_url": "https://api.github.com/users/jhferris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jhferris/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-11-08T15:21:17Z",
    "updated_at": "2011-11-08T15:21:17Z",
    "body": "also how do I enable log, for future reference? My understanding is that its somewhat of a language builtin? \n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2668747/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2670913",
    "html_url": "https://github.com/rust-lang/rust/issues/1155#issuecomment-2670913",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1155",
    "id": 2670913,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NzA5MTM=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-11-08T17:52:52Z",
    "updated_at": "2011-11-08T17:53:58Z",
    "body": "There's a section in the usage FAQ about enabling logging: https://github.com/graydon/rust/wiki/Usage-FAQ and there is some additional information in the language reference documentation.\n\nThere is only ever one port associated with a given channel, but there may be any number of channels associated with a port. It looks like messages are queued in individual channels. The fix here is that the rust_chan destructor needs to run the drop glue of the channel's element type on every element in the queue.\n\nThis presents some problems in that the channel doesn't currently know the type descriptor of the type it contains, and because channels can be sent across tasks, but type descriptors can't. Looks like a bit of a mess - probably we can just pull the drop glue function out of the type descriptor and store it with the channel instead of the entire type descriptor. But now that I think of it, we aren't going to be able to run the drop glue from C++ code once we have split stacks.\n\nMaybe instead of drop glue we should just walk the shape of the type, like the cycle collector.\n\nAs a stopgop, we could just call kernel->free() on every element when we know that they are pointers. That would at least fix this problem with strings, vectors and unique boxes. It would not fix the problem with structural types that contain pointers though.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2670913/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2675193",
    "html_url": "https://github.com/rust-lang/rust/issues/1155#issuecomment-2675193",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1155",
    "id": 2675193,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NzUxOTM=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-11-08T23:13:40Z",
    "updated_at": "2011-11-08T23:13:40Z",
    "body": "Both this and #1038 require tydescs that can move between tasks\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2675193/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2725324",
    "html_url": "https://github.com/rust-lang/rust/issues/1155#issuecomment-2725324",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1155",
    "id": 2725324,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MjUzMjQ=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-11-13T23:53:02Z",
    "updated_at": "2011-11-13T23:53:02Z",
    "body": "This turned out to be easier than expected because all the queuing actually happens on the port side, so it was just a matter of draining the queue (in rust code) when the port dies.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2725324/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2734740",
    "html_url": "https://github.com/rust-lang/rust/issues/1155#issuecomment-2734740",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1155",
    "id": 2734740,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MzQ3NDA=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-11-14T18:54:32Z",
    "updated_at": "2011-11-14T18:54:32Z",
    "body": "Reopening. There are still two cases that aren't covered:\n\n1) Ports are refcounted, so task A can take a ref, task B can run the Rust-side port destructor, then task A can send to the port and drop the ref.\n\n2) I don't know what happens when you try to send after the port doesn't exist\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2734740/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2738846",
    "html_url": "https://github.com/rust-lang/rust/issues/1155#issuecomment-2738846",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1155",
    "id": 2738846,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3Mzg4NDY=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-11-14T23:59:48Z",
    "updated_at": "2011-11-14T23:59:48Z",
    "body": "2 is fixed by 5b9f76eb7c53a28ed99d4005645485e24568ce22\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2738846/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
