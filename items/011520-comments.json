[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32222332",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32222332",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32222332,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjIyMzMy",
    "user": {
      "login": "omasanori",
      "id": 167209,
      "node_id": "MDQ6VXNlcjE2NzIwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/167209?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/omasanori",
      "html_url": "https://github.com/omasanori",
      "followers_url": "https://api.github.com/users/omasanori/followers",
      "following_url": "https://api.github.com/users/omasanori/following{/other_user}",
      "gists_url": "https://api.github.com/users/omasanori/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/omasanori/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/omasanori/subscriptions",
      "organizations_url": "https://api.github.com/users/omasanori/orgs",
      "repos_url": "https://api.github.com/users/omasanori/repos",
      "events_url": "https://api.github.com/users/omasanori/events{/privacy}",
      "received_events_url": "https://api.github.com/users/omasanori/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-13T23:08:37Z",
    "updated_at": "2014-01-13T23:08:37Z",
    "body": "> you can anyway deadlock by taking two mutexes in opposite orders from two threads\n\nCouldn't we provide something like `std::lock` in C++? (maybe off-topic, though)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32222332/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32224762",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32224762",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32224762,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjI0NzYy",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-13T23:42:13Z",
    "updated_at": "2014-01-13T23:42:13Z",
    "body": "> Couldn't we provide something like std::lock in C++? (maybe off-topic, though)\n\nMaybe as a macro; anyway, it doesn't help with the user incorrectly calling it recursively unless you ban all recursive locking (which is limiting, since it prevents composition).\n\nThat said, I'm not sure whether we should detect recursion, or even have the option of allowing recursion, and it's mostly independent of the mutex implementation algorithm.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32224762/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32242263",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32242263",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32242263,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjQyMjYz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-14T06:44:04Z",
    "updated_at": "2014-01-14T06:44:04Z",
    "body": "This looks promising, thanks for implementing this!\n\nI'll take a look at this tomorrow.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32242263/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32298574",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32298574",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32298574,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjk4NTc0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-14T19:30:25Z",
    "updated_at": "2014-01-14T19:30:25Z",
    "body": "In general, I'd prefer a cleaner history, so could you replace the original mutex commit with your mutex commit? Dealing with the fallout will probably be similar.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32298574/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32319750",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32319750",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32319750,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzE5NzUw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-14T23:32:19Z",
    "updated_at": "2014-01-14T23:32:19Z",
    "body": "Once this is ready, I'd be uncomfortable merging without performance numbers, so I'm going to collect some numbers after the dust has settled from review. If you want to collect some numbers beforehand, though, feel free!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32319750/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32322781",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32322781",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32322781,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzIyNzgx",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-15T00:18:56Z",
    "updated_at": "2014-01-15T00:19:29Z",
    "body": "BTW, I think all this code and the atomics are wrong in requiring &mut self.\n\n&mut means that they are no aliases, and the whole point of atomics is that there are aliases.\n\nSo they should all take & and be marked as no_freeze.\n\nAlso this avoids the issues in try_lock.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32322781/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32329167",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32329167",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32329167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzI5MTY3",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-15T02:22:58Z",
    "updated_at": "2014-01-15T02:22:58Z",
    "body": "New version:\n1. Splits the commits\n2. Replaces all &mut self in atomics, and does the same in the revised native mutex, and the new sync::Mutex\n3. Split native Mutex into Mutex and Cond, so we don't have an unused conditional variable in sync::Mutex\n4. Addresses most/all review comments\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32329167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32336886",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32336886",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32336886,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzM2ODg2",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-15T05:58:53Z",
    "updated_at": "2014-01-15T15:19:15Z",
    "body": "I think requiring &mut is wrong, for a few reasons:\n1. Makes it impossible to use the Mutex from safe code to protect external resources (e.g. you can't put it in an Arc and just use it)\n2. It breaks the no-aliasing guarantees of &mut, which could theoretically result in incorrect code if one were to aggressively optimize based on it (e.g. tell LLVM alias analysis that there are no aliases, or even downgrade atomics to non-atomics plus fences around the scope since we know there is no concurrent access)\n3. It makes it apparently impossible to call try_lock from lock and also implement Mutex::try_lock in terms of StaticMutex::try_lock without unsafe code (or is there any signature for try_lock that would let you do that?)\n\nNote that while &mut would prevent to trivially recursively lock the Mutex, that can be accomplished anyway by using a different path to the Mutex, which must have the ability to be created since otherwise the Mutex would be accessible only by one thread and thus pointless.\n\nFor comparison, Cell::set also mutates the underlying value, but it doesn't take an &mut self.\n\nBTW, the atomic intrinsics also need to have their signature changed to take either an & or a *mut, but that requires new compiler snapshots (since the compiler checks the signatures) and I'm not sure how to do that.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32336886/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32378067",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32378067",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32378067,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzc4MDY3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-15T16:32:05Z",
    "updated_at": "2014-01-15T16:32:05Z",
    "body": "> Makes it impossible to use the Mutex from safe code to protect external resources\n\nAny illusion of safety to have with a Mutex is just that, an illusion. Sharing memory is completely unsafe and making it appear safer is just asking for trouble.\n\n> It breaks the no-aliasing guarantees of &mut\n\nI don't think this is true. Each _thread_ will have only one `&mut` pointer, the problem is that it is aliased across threads. That has nothing to do with LLVM optimizations.\n\n> It makes it apparently impossible to call try_lock from lock and also implement Mutex::try_lock in terms of StaticMutex::try_lock without unsafe code\n\nAgain, any illusion of safety is purely an illusion, there is no code in the mutex that is truly safe\n\n> Note that while &mut would prevent to trivially recursively lock the Mutex, that can be accomplished anyway by using a different path to the Mutex, which must have the ability to be created since otherwise the Mutex would be accessible only by one thread and thus pointless.\n\nI believe that usage of `&mut` will protect against recursive locking if you're using a `Mutex`, but it does nothing when you're using a `StaticMutex`. I think you're trying to make the implementation of the mutex \"safer\" but this is simply not possible because a mutex is only useful when its memory is shared among threads. Once you have shared memory all semblance of safety is gone and having a few `&self` functions to reduce the number of transmutes isn't making this any safer at all.\n\n> For comparison, Cell::set also mutates the underlying value, but it doesn't take an &mut self.\n\nThis is an entirely different use case where you're capturing interior mutability, it has nothing to do with mutexes or atomics. Using a `Cell` is considered a smell and all of rust favors inherited mutability.\n\n> BTW, the atomic intrinsics also need to have their signature changed to take either an & or a *mut, but that requires new compiler snapshots (since the compiler checks the signatures) and I'm not sure how to do that.\n\nAgain, we're not switching away from `&mut`, so this is not necessary.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32378067/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32387326",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32387326",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32387326,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzg3MzI2",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-15T17:20:39Z",
    "updated_at": "2014-01-15T17:20:39Z",
    "body": "> I don't think this is true. Each thread will have only one &mut pointer, the problem is that it is aliased across threads. That has nothing to do with LLVM optimizations.\n\nFirst of all, &mut guarantees that it is not aliased AT ALL, that's the whole point of it!\n\nIf aliased &mut between tasks are allowed in general then memory safety and freedom from data races are both broken.\n\nAlso, it's incorrect that each thread will have only one &mut to the Mutex.\n\nLet's say you have a MutexArc implemented using Mutex and make a clone of it.\n\nNow, you lock the first one, which returns the guard object, which must ultimately contain a LockGuard and thus an &mut to the Mutex.\n\nThen you recursively attempt to lock the clone: at this point that recursive lock operation is using an &mut which is the same as the one in the LockGuard of the first lock.\n\nThis breaks Rust semantics.\n\n> Again, any illusion of safety is purely an illusion, there is no code in the mutex that is truly safe\n\nThe Mutex is safe to use (except for destroy, which is unsafe and maybe shouldn't be there in the first place).\n\nLet's say you have tasks and you want each to make three beeps using the computer speaker using a distinctive frequency, by calling an hypotetical speaker::beep(frequency: uint) three times.\n\nYou don't want the beeps to interleave, so you put a Mutex in an Arc, and use that to make sure it doesn't happen.\n\nThis is a perfectly valid and memory-safe use for Mutex that doesn't need unsafe code.\n\n> I believe that usage of &mut will protect against recursive locking if you're using a Mutex\n\nNo, because if you are locking the Mutex as part of a MutexArc, for instance, then the MutexArc is clonable so you can do the recursive locking by locking the other clone.\n\nIf you are a \"naked\" Mutex where other paths cannot be created, you can't send have the tasks simultaneously accessing it, which makes it pointless to use one.\n\n> For comparison, Cell::set also mutates the underlying value, but it doesn't take an &mut self.\n> \n> This is an entirely different use case where you're capturing interior mutability, it has nothing to do with mutexes \n> or atomics. Using a Cell is considered a smell and all of rust favors inherited mutability.\n\nCell<T> and Atomic<T> (let's assume the latter exists) are both mechanisms to allow to mutate aliased memory, and the only difference is that Cell either must not be allowed or will result in undefined values if the aliases are shared between tasks.\n\nCell is thus strictly more restrictive in its pre-conditions that Atomic, so it makes no sense for Cell to require a self pointer that provides less guarantees than Atomic.\n\nAnd of course, it breaks the non-aliasing property of &mut as already argued.\n\nThat said, the fix to the mutability of self is mostly separate from the rest, but it conflicts with the rest of the code in a non-trivial way (because lock as implemented no longer borrow checks with &mut self), so I think introducing Mutex with the correct &self pointers is simpler that doing it in two commits.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32387326/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32406246",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32406246",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32406246,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDA2MjQ2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-15T19:33:02Z",
    "updated_at": "2014-01-15T19:33:02Z",
    "body": "> First of all, &mut guarantees that it is not aliased AT ALL, that's the whole point of it!\n\nCorrect. That is not the only point of it. For atomics we are using it to indicate \"this is being mutated\"\n\n> If aliased &mut between tasks are allowed in general then memory safety and freedom from data races are both broken.\n\nCorrect. That is why it's _unsafe_ to create multiple `&mut` aliases to an atomic.\n\n> Let's say you have a MutexArc implemented using Mutex and make a clone of it.\n\nThe point that you're missing is that it's _unsafe_ to clone it.\n\n> This breaks Rust semantics.\n\nSo does sharing the memory of the mutex itself, but that's what must be done.\n\n> The Mutex is safe to use (except for destroy, which is unsafe and maybe shouldn't be there in the first place).\n\nCorrect. It must be unsafely shared. This is not a first-class primitive for everyone everywhere to use. This is a primitive to build other concurrency primitives. For example, a `MutexArc` would contain one of these inside of it, and it would protect some shared data. You should never be interacting with a `Mutex` directly.\n\n> No, because if you are locking the Mutex as part of a MutexArc, for instance, then the MutexArc is clonable so you can do the recursive locking by locking the other clone.\n\nAgain, cloning a MutexArc is unsafe in terms of the usage of the mutex.\n\nIf you want to remove `&mut self` in atomics, please do so in a separate PR or issue. This is not up for debate as a portion of this PR (it has enough as-is). If you would like to debate whether `Mutex` should take `&self` or `&mut self`, I think it should take `&mut self` because that's what it's truly doing and it doesn't really matter from a usability perspective because no one should be using this directly anyway.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32406246/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32418026",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32418026",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32418026,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDE4MDI2",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-15T21:39:34Z",
    "updated_at": "2014-01-15T21:52:04Z",
    "body": "> Correct. That is why it's unsafe to create multiple &mut aliases to an atomic.\n\nI think having multiple &mut aliases is not merely unsafe, but needs to be defined as resulting in undefined behavior if they are actually used, and thus unsafe code must not do so, just like unsafe code must not transmute random integers or zero to &T or ~T and access those pointers, and so on.\n\nThe alternative of having multiple &mut aliases not be undefined behavior means that Rust programs will be slower because some optimizations cannot be applied (specifically, telling LLVM using TBAA or another mechanism that there cannot be any aliases and thus that memory accesses can be moved with no restrictions and that loads can be freely merged or duplicated).\n\nAnyway, it's pretty easy to remove all the changes from & -> &mut self if desired.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32418026/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32419759",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32419759",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32419759,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDE5NzU5",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-15T21:58:05Z",
    "updated_at": "2014-01-15T21:58:05Z",
    "body": "Unfortunately, I'm not sure if I'll have time to do further work myself on this.\n\nI believe the current code in the pull request should be an acceptable design and mergeable, except for potential bugs, cosmetic issues and the fact that things like the &mut change and Mutex/Cond split could perhaps be split in separate commits (but at the cost of having more \"churn\" in the series as things are written and then changed by subsequent commits).\n\nWe might want to switch to 64-bit atomics on 32-bit and perhaps 128-bit atomics on 64-bit, but that can be done later, since the task limit won't be hit anyway without non-default stack sizes that make it impossible to call C functions.\n\nAnother thing to do is to replace critical sections and events with SRW locks and condition variables on Windows Vista+: note that both of those structures are pointed-sized and statically initializable just like the atomic uints in the current code, so it's trivial to switch at runtime between the current code on Windows XP and reinterpreting those fields as SRW locks or condition variables for Windows Vista and later.\n\nFinally an rwlock is probably needed as well, and should be possible to implement by extending the algorithm in the code to use a (queue_size, readers, writers) tuple and putting the read mode in the queued nodes (64/128-bit atomics will allow to fit the triple).\n\nNative rwlocks don't always support a truly fair FIFO mode (at least the one in Linux glibc NPTL either lets all readers or all writers get ahead), so it might be a good idea to let the user specify what they prefer or if they want the rwlock to be FIFO, and avoid blocking native tasks on the native rwlock at all if the user selects FIFO.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32419759/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32420397",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32420397",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32420397,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDIwMzk3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-15T22:05:11Z",
    "updated_at": "2014-01-15T22:05:11Z",
    "body": "> Unfortunately, I'm not sure if I'll have time to do further work myself on this.\n\nWould you like me to take it from here?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32420397/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32422127",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32422127",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32422127,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDIyMTI3",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-15T22:24:07Z",
    "updated_at": "2014-01-15T22:24:07Z",
    "body": "> Would you like me to take it from here?\n\nYes, if you'd like, thanks.\n\nOpened issue #11583 for mutability in atomics (I used an issue since the code is not complete, since it doesn't fix the actual intrinsics).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32422127/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32423417",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32423417",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32423417,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDIzNDE3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-15T22:38:59Z",
    "updated_at": "2014-01-15T22:38:59Z",
    "body": "Thanks again for all your work!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32423417/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32433713",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32433713",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32433713,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDMzNzEz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-16T01:15:26Z",
    "updated_at": "2014-01-16T01:15:26Z",
    "body": "Closing for now, I'll reopen once I've gotten through all the rebasings\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32433713/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32575546",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32575546",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32575546,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTc1NTQ2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-17T02:40:20Z",
    "updated_at": "2014-01-17T02:40:20Z",
    "body": "I got around to benchmarking this code, and here's the results I got. The `cxchg` is this mutex and the `held` is the original version that I wrote. Each test was run with 1,2,4,6,8 threads, and the test was simply locking a mutex N times and then immediately unlocking. I used this test to get an idea of what the overhead of using a lock is and also what happens on contention of lots of threads running around.\n\nThe caveat here is that the green numbers aren't too significant. We currently need to seriously tune the green schedulers for workloads like this because the numbers all over the place. The numbers provided here are all run with `RUST_THREADS=1` which essentially serializes the whole program (rust tasks never yield to one another). Again, these numbers don't mean much in terms of green, but they do in terms of native.\n\nIn this table, these are all runtimes, so lower is better. All tests were run in an arch linux VM with 4 cores.\n\n| # threads | pthreads | native held | native cxchg | green held | green cxchg |\n| --- | --- | --- | --- | --- | --- |\n| 1 | 0.207 | 0.195 | 0.358 | 0.204 | 0.325 |\n| 2 | 1.113 | 1.098 | 1.644 | 0.394 | 0.644 |\n| 4 | 3.437 - 4.530 | 2.945 - 4.199 | 8.066 - 10.656 | 0.774 | 1.284 |\n| 6 | 4.859 - 6.070 | 5.547 | 14.090 | 1.136 | 1.909 |\n| 8 | 7.009 | 6.391 | 17.365 | 1.614 | 2.575\\ |\n\nMy conclusions from this are that doing pretty much any atomic other than `pthread_mutex_lock` is just not going to cut it. If we truly want to get right next to pthreads performance, we're going to pretty much eliminate all atomics. The green threads aren't a good enough case to look at just yet because scheduling among them is in such an un-tuned state right now that there's no way we can compare alternate mutex implementations.\n\nWith this in mind, I'm going to abandon this implementation and go back to the original version. Once the green scheduler is tuned, we can revisit to see what the impact is for green threads in finer detail.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32575546/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32575745",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32575745",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32575745,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTc1NzQ1",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-17T02:45:24Z",
    "updated_at": "2014-01-17T02:45:24Z",
    "body": "@alexcrichton Thanks for the measurements. That's a little disappointing since I liked the elegance of this solution.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32575745/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32702886",
    "html_url": "https://github.com/rust-lang/rust/pull/11520#issuecomment-32702886",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11520",
    "id": 32702886,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNzAyODg2",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-19T07:32:00Z",
    "updated_at": "2014-01-19T07:32:00Z",
    "body": "Added an optimization to the cmpxchg loops and benchmarks, see https://github.com/bill-myers/rust/tree/mutex-lockless for the updated code.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32702886/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
