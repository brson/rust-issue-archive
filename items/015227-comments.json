[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47412056",
    "html_url": "https://github.com/rust-lang/rust/pull/15227#issuecomment-47412056",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15227",
    "id": 47412056,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDEyMDU2",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-28T00:07:45Z",
    "updated_at": "2014-06-28T00:07:45Z",
    "body": "Just for completeness: did you consider doing the reverse (rejecting `unlink` on a read-only file on unix)? If so, what was the reason for rejecting that?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47412056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47417902",
    "html_url": "https://github.com/rust-lang/rust/pull/15227#issuecomment-47417902",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15227",
    "id": 47417902,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDE3OTAy",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-28T04:15:16Z",
    "updated_at": "2014-06-28T04:15:16Z",
    "body": "@huonw That would be completely wrong in Unix, since unlink removes the name from the directory, which has nothing to do with whether the file is writable or not, but depends of course on whether the directory is writable or not.\n\n@alexcrichton However, the code seems to suffer from race conditions, since it will fail if someone unsets the read-only attribute just after the unlink fails, but it looks like this race condition is unfixable if ERROR_ACCESS_DENIED is returned for other errors too (however, retrying N times might be better).\n\nIt appears, from web searches (https://vtopan.wordpress.com/2009/05/26/using-ntdeletefile-from-delphi/), that the NT API NtDeleteFile will delete read-only files too (and also delete the file immediately, like Unix): maybe that could be the best solution if it's indeed the case.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47417902/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47434311",
    "html_url": "https://github.com/rust-lang/rust/pull/15227#issuecomment-47434311",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15227",
    "id": 47434311,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDM0MzEx",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-28T18:04:15Z",
    "updated_at": "2014-06-28T18:04:15Z",
    "body": "> Just for completeness: did you consider doing the reverse (rejecting unlink on a read-only file on unix)? If so, what was the reason for rejecting that?\n\nI suppose I hadn't given it an overwhelming amount of thought, no! I suppose I conceptually would rather just delete a file when I call `unlink` rather than check whether it's actually writable, but I would suspect that I am mostly just biased towards unix.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47434311/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47434384",
    "html_url": "https://github.com/rust-lang/rust/pull/15227#issuecomment-47434384",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15227",
    "id": 47434384,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDM0Mzg0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-28T18:07:58Z",
    "updated_at": "2014-06-28T18:07:58Z",
    "body": "> However, the code seems to suffer from race conditions\n\nThat is correct, and this was written with that in mind. I would think that essentially _any_ filesystem interaction is inherently racy, however, so trying to protect this one case on windows may not be buying us much.\n\n> the NT API NtDeleteFile will delete read-only files too\n\nInteresting! I was under the impression that `Nt`-prefix things were internal-use-only and weren't recommended for use? This is also a problem with libgreen and would require upstreaming something to libuv as well.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47434384/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
