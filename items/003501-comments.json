[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8581208",
    "html_url": "https://github.com/rust-lang/rust/issues/3501#issuecomment-8581208",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3501",
    "id": 8581208,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1ODEyMDg=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-09-15T02:43:40Z",
    "updated_at": "2012-09-15T02:43:40Z",
    "body": "This definitely should not type check.  You are returning a pointer into the stack frame.  \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8581208/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8588629",
    "html_url": "https://github.com/rust-lang/rust/issues/3501#issuecomment-8588629",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3501",
    "id": 8588629,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1ODg2Mjk=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-09-15T20:40:26Z",
    "updated_at": "2012-09-15T20:40:26Z",
    "body": "I added this to 0.4 milestone and assigned myself.  I think it's pretty important to get this right.  I'm having a hard time debugging it, though, due to #3506\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8588629/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8619063",
    "html_url": "https://github.com/rust-lang/rust/issues/3501#issuecomment-8619063",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3501",
    "id": 8619063,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MTkwNjM=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-09-17T15:40:22Z",
    "updated_at": "2012-09-17T15:40:22Z",
    "body": "Actually, this is due to the unsound type of `vec::push()`!  It's worse than I thought.  If you change the example to:\n\n```\nstruct A {\n    x: ~int,\n    mut y: ~[&~int],\n}\n\nfn push<T>(v: &mut ~[T], +x: T) {\n    vec::push(*v, move x);\n}\n\nfn A() -> A {\n    let a = A { x: ~1, y: ~[] };\n    push(&mut a.y, &a.x);\n    a\n}\n\nfn main() {\n    let a = A();\n    error!(\"%?\", a);\n}\n```\n\nthen you get the region error I expected:\n\n```\nRunning /usr/local/bin/rustc:\n/Users/nmatsakis/tmp/bug3501.rs:12:20: 12:21 error: illegal borrow: borrowed value does not live long enough\n/Users/nmatsakis/tmp/bug3501.rs:12     push(&mut a.y, &a.x);\n                                                       ^\n/Users/nmatsakis/tmp/bug3501.rs:10:12: 14:1 note: borrowed pointer must be valid for the anonymous lifetime #1 defined on the block at 10:12...\n/Users/nmatsakis/tmp/bug3501.rs:10 fn A() -> A {\n/Users/nmatsakis/tmp/bug3501.rs:11     let a = A { x: ~1, y: ~[] };\n/Users/nmatsakis/tmp/bug3501.rs:12     push(&mut a.y, &a.x);\n/Users/nmatsakis/tmp/bug3501.rs:13     a\n/Users/nmatsakis/tmp/bug3501.rs:14 }\n/Users/nmatsakis/tmp/bug3501.rs:10:12: 14:1 note: ...but borrowed value is only valid for the block at 10:12\n/Users/nmatsakis/tmp/bug3501.rs:10 fn A() -> A {\n/Users/nmatsakis/tmp/bug3501.rs:11     let a = A { x: ~1, y: ~[] };\n/Users/nmatsakis/tmp/bug3501.rs:12     push(&mut a.y, &a.x);\n/Users/nmatsakis/tmp/bug3501.rs:13     a\n/Users/nmatsakis/tmp/bug3501.rs:14 }\nerror: aborting due to previous error\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8619063/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8661590",
    "html_url": "https://github.com/rust-lang/rust/issues/3501#issuecomment-8661590",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3501",
    "id": 8661590,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjE1OTA=",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-09-18T16:49:19Z",
    "updated_at": "2012-09-18T16:49:19Z",
    "body": "Dupe of #3513, closing.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8661590/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8661592",
    "html_url": "https://github.com/rust-lang/rust/issues/3501#issuecomment-8661592",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3501",
    "id": 8661592,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjE1OTI=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-09-18T16:49:23Z",
    "updated_at": "2012-09-18T16:49:23Z",
    "body": "Closing as dup of #3513.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8661592/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
