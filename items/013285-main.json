{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/13285",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/13285/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/13285/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/13285/events",
  "html_url": "https://github.com/rust-lang/rust/pull/13285",
  "id": 30797606,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTQzNDQ5OTQ=",
  "number": 13285,
  "title": "rustc: Stop using LLVMGetSectionName",
  "user": {
    "login": "alexcrichton",
    "id": 64996,
    "node_id": "MDQ6VXNlcjY0OTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexcrichton",
    "html_url": "https://github.com/alexcrichton",
    "followers_url": "https://api.github.com/users/alexcrichton/followers",
    "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
    "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
    "repos_url": "https://api.github.com/users/alexcrichton/repos",
    "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 1,
  "created_at": "2014-04-03T17:51:01Z",
  "updated_at": "2014-07-08T00:07:14Z",
  "closed_at": "2014-04-04T01:32:03Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/13285",
    "html_url": "https://github.com/rust-lang/rust/pull/13285",
    "diff_url": "https://github.com/rust-lang/rust/pull/13285.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/13285.patch",
    "merged_at": null
  },
  "body": "The recent pull request to remove libc from libstd has hit a wall in compiling\non windows, and I've been trying to investigate on the try bots as to why (it\ncompiles locally just fine). To the best of my knowledge, the LLVM section\niterator is behaving badly when iterating over the sections of the libc DLL.\n\nUpon investigating the LLVMGetSectionName function in LLVM, I discovered that\nthis function doesn't always return a null-terminated string. It returns the\ndata pointer of a StringRef instance (LLVM's equivalent of &str essentially),\nbut it has no method of returning the length of the name of the section.\n\nThis commit modifies the section iteration when loading libraries to invoke a\ncustom LLVMRustGetSectionName which will correctly return both the length and\nthe data pointer.\n\nI have not yet verified that this will fix landing liblibc, as it will require a\nsnapshot before doing a full test. Regardless, this is a worrisome situation\nregarding the LLVM API, and should likely be fixed anyway.\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/13285/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/13285/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
