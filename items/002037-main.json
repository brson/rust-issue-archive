{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/2037",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/2037/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/2037/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/2037/events",
  "html_url": "https://github.com/rust-lang/rust/pull/2037",
  "id": 3739869,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTAxOTA0Mw==",
  "number": 2037,
  "title": "WIP: distinguish inferable types from non-inferable types",
  "user": {
    "login": "nikomatsakis",
    "id": 155238,
    "node_id": "MDQ6VXNlcjE1NTIzOA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nikomatsakis",
    "html_url": "https://github.com/nikomatsakis",
    "followers_url": "https://api.github.com/users/nikomatsakis/followers",
    "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
    "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
    "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
    "repos_url": "https://api.github.com/users/nikomatsakis/repos",
    "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 3,
  "created_at": "2012-03-21T03:34:12Z",
  "updated_at": "2014-07-05T19:16:24Z",
  "closed_at": "2012-03-21T20:47:15Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/2037",
    "html_url": "https://github.com/rust-lang/rust/pull/2037",
    "diff_url": "https://github.com/rust-lang/rust/pull/2037.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/2037.patch",
    "merged_at": null
  },
  "body": "This is a \"work in progress\" refactoring I wanted some feedback on.  The idea is to separate out the representation of types into \"types used during inference\" (`ty::t_i`) and \"types during the rest of compilation\" (`ty::t`).  One immediate effect of this is that `ty_var` is no longer a member of `ty::t`, so we no longer need to check for it and \"fail\" all over the place, as we used to do.  The eventual goal is to make more things inferable in a more powerful way: e.g., fn protos, integer literal suffixes, regions, etc, all without affecting the `ty::t` type as a whole.\n\nBoth `ty::t` and `ty::t_i` are defined based on a common base set of types called things like `ty::sty_base`, `ty::fn_ty_base` and so on.  These types are parameterized by a generic type `T` which represents the \"type of a type\".  This is the famous \"Curiously Recurring Template Pattern\", or CRTP as pcwalton likes to call it.  For the most part there is very little duplication of code, though some of the type declarations can be a bit mind-bending.  Generic functions that operate over both `ty::t` and `ty::t_i` (such as `fold_ty`, `walk_ty`, and even unification) are currently coded using ifaces and impls.  This can probably be improved further and ultimately made much nicer using traits.\n\nCurrently the code type checks but I cannot run it because the stage0 compiler fails with an obscure error during trans.  As far as I can tell the patch is exposing a bug in monomorphization.  I have tried to narrow down the problem but so far haven't produced anything useful. @marijnh if you are interested in taking a look lemme' know. :)\n",
  "closed_by": {
    "login": "nikomatsakis",
    "id": 155238,
    "node_id": "MDQ6VXNlcjE1NTIzOA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nikomatsakis",
    "html_url": "https://github.com/nikomatsakis",
    "followers_url": "https://api.github.com/users/nikomatsakis/followers",
    "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
    "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
    "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
    "repos_url": "https://api.github.com/users/nikomatsakis/repos",
    "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/2037/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/2037/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
