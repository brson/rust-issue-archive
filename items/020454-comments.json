[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68580489",
    "html_url": "https://github.com/rust-lang/rust/issues/20454#issuecomment-68580489",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20454",
    "id": 68580489,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTgwNDg5",
    "user": {
      "login": "jfager",
      "id": 23755,
      "node_id": "MDQ6VXNlcjIzNzU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23755?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jfager",
      "html_url": "https://github.com/jfager",
      "followers_url": "https://api.github.com/users/jfager/followers",
      "following_url": "https://api.github.com/users/jfager/following{/other_user}",
      "gists_url": "https://api.github.com/users/jfager/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jfager/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jfager/subscriptions",
      "organizations_url": "https://api.github.com/users/jfager/orgs",
      "repos_url": "https://api.github.com/users/jfager/repos",
      "events_url": "https://api.github.com/users/jfager/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jfager/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-03T02:40:11Z",
    "updated_at": "2015-01-03T02:40:11Z",
    "body": "Replacing `loop` with `while true` spits out a warning to use loop instead but compiles and runs as expected.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68580489/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68584478",
    "html_url": "https://github.com/rust-lang/rust/issues/20454#issuecomment-68584478",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20454",
    "id": 68584478,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTg0NDc4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-03T05:47:33Z",
    "updated_at": "2015-01-03T05:47:33Z",
    "body": "This is largely because the [`spawn` function](http://doc.rust-lang.org/std/thread/struct.Thread.html#method.spawn) has a type parameter `T` indicating the return value of the closure.\n\nIn the case of `loop`, the closure return value cannot be inferred (as the function never returns). In the case of `while` the closure return value is `()` because the compiler assumes all while loops eventually terminate.\n\nTo use `loop`, you can invoke `spawn` like so:\n\n``` rust\nThread::spawn(|| -> T {\n    loop { /* ... */ }\n});\n```\n\nHere the `-> T` is a manual ascription of what the return type should be, and it can be `-> ()` to say that it's the \"unit return value\"\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68584478/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68593097",
    "html_url": "https://github.com/rust-lang/rust/issues/20454#issuecomment-68593097",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20454",
    "id": 68593097,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTkzMDk3",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-03T12:13:12Z",
    "updated_at": "2015-01-03T12:34:30Z",
    "body": "Actually, for diverging type variables (which is what a `loop` without a `break` gets typeck'ed to) we normally fall back to `()`. However, that happens at the very end of type checking and so the fall back will not be used for dispatch resolution. Maybe we should do it earlier, then.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68593097/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69474425",
    "html_url": "https://github.com/rust-lang/rust/issues/20454#issuecomment-69474425",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20454",
    "id": 69474425,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NDc0NDI1",
    "user": {
      "login": "viperscape",
      "id": 3178836,
      "node_id": "MDQ6VXNlcjMxNzg4MzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3178836?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/viperscape",
      "html_url": "https://github.com/viperscape",
      "followers_url": "https://api.github.com/users/viperscape/followers",
      "following_url": "https://api.github.com/users/viperscape/following{/other_user}",
      "gists_url": "https://api.github.com/users/viperscape/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/viperscape/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/viperscape/subscriptions",
      "organizations_url": "https://api.github.com/users/viperscape/orgs",
      "repos_url": "https://api.github.com/users/viperscape/repos",
      "events_url": "https://api.github.com/users/viperscape/events{/privacy}",
      "received_events_url": "https://api.github.com/users/viperscape/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-10T22:17:23Z",
    "updated_at": "2015-01-10T22:17:23Z",
    "body": "Here's the same issue: \n\n``` rust\n\nuse std::thread::Thread;\nuse std::sync::mpsc::{channel};\n\nfn main() {\n    let (chs,chr) = channel();\n\n    Thread::spawn(move || {\n        chs.send(1u8); //must specifically annotate\n    });\n}\n```\n\nAs seen [here](http://is.gd/l72Sm9)\n\nIt took me a bit to realize the issue was actually regarding the channel type, as I thought it was referring to the thread's move fn itself with the error:\n\n```\nerror: unable to infer enough type information about `closure[<anon>:8:24: 10:6]`; type annotations required\n<anon>:8     Thread::spawn(move || {\n             ^~~~~~~~~~~~~\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69474425/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69599202",
    "html_url": "https://github.com/rust-lang/rust/issues/20454#issuecomment-69599202",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20454",
    "id": 69599202,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTk5MjAy",
    "user": {
      "login": "sixohsix",
      "id": 40615,
      "node_id": "MDQ6VXNlcjQwNjE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/40615?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sixohsix",
      "html_url": "https://github.com/sixohsix",
      "followers_url": "https://api.github.com/users/sixohsix/followers",
      "following_url": "https://api.github.com/users/sixohsix/following{/other_user}",
      "gists_url": "https://api.github.com/users/sixohsix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sixohsix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sixohsix/subscriptions",
      "organizations_url": "https://api.github.com/users/sixohsix/orgs",
      "repos_url": "https://api.github.com/users/sixohsix/repos",
      "events_url": "https://api.github.com/users/sixohsix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sixohsix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-12T16:37:10Z",
    "updated_at": "2015-01-12T16:37:10Z",
    "body": "I'm stuck with the same-looking bug, but the loop is apparently not the cause:\n\n``` rust\n    for i in range(0, 4) {\n        let my_numbers = shared_numbers.clone();\n        let my_frame_counter = shared_frame_counter.clone();\n        Thread::spawn(move || -> () {\n            loop {\n                my_numbers[i] = (my_frame_counter.frame() / i as i32) % 240;\n                t::delay(16);\n            }\n            return ();\n        });\n    }\n```\n\nWhen I comment-out the `my_numbers[i] =` line, I get no errors. When the line is there, I get the error.\n\n```\nerror: unable to infer enough type information about `closure[/Users/XXX/projects/rust-test/src/main.rs:109:28: 115:10]`; type annotations required\n/Users/XXX/projects/rust-test/src/main.rs:109         Thread::spawn(move || -> () {\n                                                      ^~~~~~~~~~~~~\nerror: aborting due to previous error\n```\n\nUnfortunately I don't yet know enough to figure out what's wrong with that line. However, the error message is extremely confusing.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69599202/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69722163",
    "html_url": "https://github.com/rust-lang/rust/issues/20454#issuecomment-69722163",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20454",
    "id": 69722163,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NzIyMTYz",
    "user": {
      "login": "sixohsix",
      "id": 40615,
      "node_id": "MDQ6VXNlcjQwNjE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/40615?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sixohsix",
      "html_url": "https://github.com/sixohsix",
      "followers_url": "https://api.github.com/users/sixohsix/followers",
      "following_url": "https://api.github.com/users/sixohsix/following{/other_user}",
      "gists_url": "https://api.github.com/users/sixohsix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sixohsix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sixohsix/subscriptions",
      "organizations_url": "https://api.github.com/users/sixohsix/orgs",
      "repos_url": "https://api.github.com/users/sixohsix/repos",
      "events_url": "https://api.github.com/users/sixohsix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sixohsix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-13T10:10:32Z",
    "updated_at": "2015-01-13T10:10:32Z",
    "body": "My mistake was trying to use mutable state across threads. Using AtomicUsize solved the problem. To be clear: the only issue is that the message \"unable to infer enough type information\" is confusing because it has nothing to do with the real problem. The loop statement without break caused no problems for me.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69722163/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71382675",
    "html_url": "https://github.com/rust-lang/rust/issues/20454#issuecomment-71382675",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20454",
    "id": 71382675,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzgyNjc1",
    "user": {
      "login": "starwing",
      "id": 114483,
      "node_id": "MDQ6VXNlcjExNDQ4Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/114483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/starwing",
      "html_url": "https://github.com/starwing",
      "followers_url": "https://api.github.com/users/starwing/followers",
      "following_url": "https://api.github.com/users/starwing/following{/other_user}",
      "gists_url": "https://api.github.com/users/starwing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/starwing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/starwing/subscriptions",
      "organizations_url": "https://api.github.com/users/starwing/orgs",
      "repos_url": "https://api.github.com/users/starwing/repos",
      "events_url": "https://api.github.com/users/starwing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/starwing/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-25T17:38:42Z",
    "updated_at": "2015-01-25T17:38:42Z",
    "body": "I have the same issue event with the program in \"A 30-minute Introduction to Rust\":\n\n``` rust\nuse std::thread::Thread;\nuse std::sync::{Arc,Mutex};\n\nfn main() {\n    let numbers = Arc::new(Mutex::new(vec![1, 2, 3]));\n\n    for i in range(0, 3) {\n        let number = numbers.clone();\n        Thread::spawn(|&:| {\n            let i = 5;\n            let mut array = number.lock().unwrap();\n            (*array)[i] += 1;\n            println!(\"numbers[{}] is {}\", i, (*array)[i]);\n        });\n    }\n}\n```\n\nit has the same error:\n\n```\nnoname\\2015-01-26-1.rs|9 col 9| 9:22 error: unable to infer enough type information about `closure[noname\\2015-01-26-1.rs:9:23: 14:10]`; type annotations required [E0282]\n|| noname\\2015-01-26-1.rs:9         Thread::spawn(|&:| {\n||                                  ^~~~~~~~~~~~~\n|| error: aborting due to previous error\n|| rustc returned 101\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71382675/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
