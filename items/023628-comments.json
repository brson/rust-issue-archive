[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/84764040",
    "html_url": "https://github.com/rust-lang/rust/issues/23628#issuecomment-84764040",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23628",
    "id": 84764040,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NzY0MDQw",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-23T02:54:58Z",
    "updated_at": "2015-03-23T02:54:58Z",
    "body": "Ah, this is annoying. Do you happen to know of a way that we can avoid the strict dependency while still calling `__pthread_get_minstack` or do we have to just remove it entirely?\n\n(It is [used](https://github.com/rust-lang/rust/blob/b0aad7dd4fad8d7e2e2f877a511a637258949597/src/libstd/sys/unix/thread.rs#L325-L326) as a weak symbol atm.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/84764040/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/84764408",
    "html_url": "https://github.com/rust-lang/rust/issues/23628#issuecomment-84764408",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23628",
    "id": 84764408,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NzY0NDA4",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-23T02:55:32Z",
    "updated_at": "2015-03-23T02:55:32Z",
    "body": "triage: I-nominated\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/84764408/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/84771726",
    "html_url": "https://github.com/rust-lang/rust/issues/23628#issuecomment-84771726",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23628",
    "id": 84771726,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NzcxNzI2",
    "user": {
      "login": "andersk",
      "id": 26471,
      "node_id": "MDQ6VXNlcjI2NDcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/26471?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/andersk",
      "html_url": "https://github.com/andersk",
      "followers_url": "https://api.github.com/users/andersk/followers",
      "following_url": "https://api.github.com/users/andersk/following{/other_user}",
      "gists_url": "https://api.github.com/users/andersk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/andersk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andersk/subscriptions",
      "organizations_url": "https://api.github.com/users/andersk/orgs",
      "repos_url": "https://api.github.com/users/andersk/repos",
      "events_url": "https://api.github.com/users/andersk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/andersk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-23T03:12:18Z",
    "updated_at": "2015-03-23T03:12:18Z",
    "body": "I guess one horrible solution would be to look up the symbol with `dlsym()`.\n\n``` c\n#include <dlfcn.h>\n#include <pthread.h>\n#include <stdio.h>\n#include <string.h>\n\nint main()\n{\n    pthread_attr_t attr;\n    pthread_attr_init(&attr);\n    memset(&attr, 0, sizeof(attr));\n    void *handle = dlopen(NULL, RTLD_LAZY);\n    size_t (*__pthread_get_minstack)(const pthread_attr_t *attr) =\n        dlsym(handle, \"__pthread_get_minstack\");\n    if (__pthread_get_minstack != NULL)\n        printf(\"%zd\\n\", __pthread_get_minstack(&attr));\n    dlclose(handle);\n    pthread_attr_destroy(&attr);\n    return 0;\n}\n```\n\n``` console\n$ gcc -Wall minstack.c -ldl -lpthread -o minstack\n$ ./minstack\n24640\n$ dpkg-shlibdeps minstack\ndpkg-shlibdeps: warning: binaries to analyze should already be installed in their package's directory\n$ cat debian/substvars\nshlibs:Depends=libc6 (>= 2.4)\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/84771726/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/84873690",
    "html_url": "https://github.com/rust-lang/rust/issues/23628#issuecomment-84873690",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23628",
    "id": 84873690,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0ODczNjkw",
    "user": {
      "login": "andersk",
      "id": 26471,
      "node_id": "MDQ6VXNlcjI2NDcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/26471?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/andersk",
      "html_url": "https://github.com/andersk",
      "followers_url": "https://api.github.com/users/andersk/followers",
      "following_url": "https://api.github.com/users/andersk/following{/other_user}",
      "gists_url": "https://api.github.com/users/andersk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/andersk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andersk/subscriptions",
      "organizations_url": "https://api.github.com/users/andersk/orgs",
      "repos_url": "https://api.github.com/users/andersk/repos",
      "events_url": "https://api.github.com/users/andersk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/andersk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-23T08:05:30Z",
    "updated_at": "2015-03-23T08:05:30Z",
    "body": "BTW, `dlsym()` is how we used to do this, until commit 699b33d060c5c9cc580d50cf3fe39536ae7a059a, so I feel less horrible about this now.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/84873690/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
