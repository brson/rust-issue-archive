[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68053628",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-68053628",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 68053628,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDUzNjI4",
    "user": {
      "login": "ranma42",
      "id": 1506030,
      "node_id": "MDQ6VXNlcjE1MDYwMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1506030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ranma42",
      "html_url": "https://github.com/ranma42",
      "followers_url": "https://api.github.com/users/ranma42/followers",
      "following_url": "https://api.github.com/users/ranma42/following{/other_user}",
      "gists_url": "https://api.github.com/users/ranma42/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ranma42/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ranma42/subscriptions",
      "organizations_url": "https://api.github.com/users/ranma42/orgs",
      "repos_url": "https://api.github.com/users/ranma42/repos",
      "events_url": "https://api.github.com/users/ranma42/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ranma42/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-24T13:56:38Z",
    "updated_at": "2014-12-24T13:56:56Z",
    "body": "I do not see `String::as_mut_vec` as preventing SSO, instead I think it simply makes it natural to apply SSO to the underlying data structure (i.e. `Vec`). This would make it possible to keep `String::as_mut_vec` and to get the advantages of SSO (trading an additional comparison to gain more cache locality, to avoid allocating and dereferencing) on all `Vec`-based data structures.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68053628/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68058295",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-68058295",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 68058295,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDU4Mjk1",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-24T15:24:34Z",
    "updated_at": "2014-12-24T15:24:34Z",
    "body": "> instead I think it simply makes it natural to apply SSO to the underlying data structure (i.e. Vec)\n\nWhile this approach is possible, unlike SSO for strings it's not adopted by popular implementations of generic vector - folly::fbvector, boost::vector and not allowed by std::vector. There must be reasons, probably of statistical nature (I can start speculating on them but would prefer not to).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68058295/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68072010",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-68072010",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 68072010,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDcyMDEw",
    "user": {
      "login": "ranma42",
      "id": 1506030,
      "node_id": "MDQ6VXNlcjE1MDYwMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1506030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ranma42",
      "html_url": "https://github.com/ranma42",
      "followers_url": "https://api.github.com/users/ranma42/followers",
      "following_url": "https://api.github.com/users/ranma42/following{/other_user}",
      "gists_url": "https://api.github.com/users/ranma42/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ranma42/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ranma42/subscriptions",
      "organizations_url": "https://api.github.com/users/ranma42/orgs",
      "repos_url": "https://api.github.com/users/ranma42/repos",
      "events_url": "https://api.github.com/users/ranma42/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ranma42/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-24T20:00:19Z",
    "updated_at": "2014-12-24T20:00:19Z",
    "body": "The main reference I can provide for something like this on vectors is [LLVM](http://llvm.org/docs/ProgrammersManual.html#llvm-adt-smallvector-h), but in that case the number of elements is parametrised (the user is free to choose it and the compiler is able to optimise it... AFAICT this would not be possible in rust).\nAn interesting analysis of the results of using SSO to optimise JavaScript strings is available [here](https://blog.mozilla.org/javascript/2014/07/21/slimmer-and-faster-javascript-strings-in-firefox/). It might provide a starting point for choosing what sizes can be most effective.\n\nI believe you're right about the reason why SSO is more common than similar optimisations on other data structures. Also, the absence of a variable-sized type parameter might contribute in making it easier to find a reasonable default \"local cache size\" for strings.\nIt might also make sense to keep this optimisation in mind when implementing ropes https://github.com/rust-lang/rust/issues/7628\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68072010/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68073173",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-68073173",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 68073173,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDczMTcz",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-24T20:33:14Z",
    "updated_at": "2014-12-24T20:33:14Z",
    "body": "In the worst case, this can still be provided by upgrading an SSO to a `Vec` although it's a little sad to make `as_...` possibly expensive.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68073173/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68074520",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-68074520",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 68074520,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDc0NTIw",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-24T21:13:04Z",
    "updated_at": "2014-12-24T21:13:04Z",
    "body": "@petrochenkov: It wouldn't make sense to provide a small string type without providing a small vector type since it needs to be written anyway. The small string / vector optimization increases the code size and adds extra branches / operations. Rust is _always_ going to provide this string type based on `Vec` even if the small string optimization is implemented because there's a trade-off.\n\nIt's important to note that `std::string` in C++ is an array of arbitrary bytes - there's no equivalent to Rust's string types. The only real difference between it and `std::vector<char>` is that it needs to maintain an internal NUL byte at the end for the `data` and `c_str` methods. Rust's string types are wrappers around byte slices / vectors enforcing UTF-8 encoding.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68074520/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68074684",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-68074684",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 68074684,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDc0Njg0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-24T21:17:17Z",
    "updated_at": "2014-12-24T21:17:17Z",
    "body": "The libc++ `std::string` is 24 bytes on x86_64 just like the obvious implementation with a length, capacity and data pointer. It only uses the small string optimization for strings up to 23 bytes in length (including the trailing NUL). For small vectors, more flexibility is needed (integer type parameter) because some types are many bytes in length and the usage patterns vary more. Ideally, a small string would also expose that integer type parameter and pass it along to the underlying small vector.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68074684/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68076722",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-68076722",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 68076722,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDc2NzIy",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-24T22:22:59Z",
    "updated_at": "2014-12-24T22:53:47Z",
    "body": "> Rust is always going to provide this string type based on Vec even if the small string optimization is implemented\n\nIf you are really going to do that, then `as_mut_vec` is not an issue, it's just the decision to make `Vec` \"small optimized\" is much more serious than making `as_mut_vec` experimental or replacing it with something.\n\n> ... vectors is LLVM, but in that case the number of elements is parametrised\n> \n> ---\n> \n> For small vectors, more flexibility is needed (integer type parameter) \n\nThis is what I would expect from \"small optimized\" vector too.\nThen `as_mut_vec` will have to return something like `&mut Vec<u8, MAGIC_BUFFER_SIZE>` to work correcly, assuming the small buffer size is not kept at runtime. _Edit:_ Interesting, LLVM SmallVector does seem to keep the capacity of small vectors in runtime.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68076722/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69957242",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-69957242",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 69957242,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTU3MjQy",
    "user": {
      "login": "pepp-cz",
      "id": 7118958,
      "node_id": "MDQ6VXNlcjcxMTg5NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7118958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pepp-cz",
      "html_url": "https://github.com/pepp-cz",
      "followers_url": "https://api.github.com/users/pepp-cz/followers",
      "following_url": "https://api.github.com/users/pepp-cz/following{/other_user}",
      "gists_url": "https://api.github.com/users/pepp-cz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pepp-cz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pepp-cz/subscriptions",
      "organizations_url": "https://api.github.com/users/pepp-cz/orgs",
      "repos_url": "https://api.github.com/users/pepp-cz/repos",
      "events_url": "https://api.github.com/users/pepp-cz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pepp-cz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T17:40:15Z",
    "updated_at": "2015-01-14T17:40:15Z",
    "body": "Some hard data: as_mut_vec is not used anywhere in Rust and it is used four times in Rust outside of the String implementation itself.\n\nI suggest to make as_mut_vec private. You know: better safe than sorry.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69957242/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69957799",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-69957799",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 69957799,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTU3Nzk5",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T17:43:19Z",
    "updated_at": "2015-01-14T17:43:19Z",
    "body": "If there was a small string there would be an underlying small vector type to go along with it. Either way, there _is_ going to be a string type to go along with `Vec<T>` so there is no problem here.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69957799/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69959154",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-69959154",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 69959154,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTU5MTU0",
    "user": {
      "login": "LukasKalbertodt",
      "id": 7419664,
      "node_id": "MDQ6VXNlcjc0MTk2NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7419664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukasKalbertodt",
      "html_url": "https://github.com/LukasKalbertodt",
      "followers_url": "https://api.github.com/users/LukasKalbertodt/followers",
      "following_url": "https://api.github.com/users/LukasKalbertodt/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukasKalbertodt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukasKalbertodt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukasKalbertodt/subscriptions",
      "organizations_url": "https://api.github.com/users/LukasKalbertodt/orgs",
      "repos_url": "https://api.github.com/users/LukasKalbertodt/repos",
      "events_url": "https://api.github.com/users/LukasKalbertodt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukasKalbertodt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T17:50:54Z",
    "updated_at": "2015-01-14T17:50:54Z",
    "body": "I don't understand why the string type needs to have a vector type as underlying buffer. Strings and Vecs are pretty similar in how they work but completely different in what they are used for. Hence we need to treat String as another type with it's own challenges IMO.\nWe discussed the issue here: http://discuss.rust-lang.org/t/small-string-optimization-remove-as-mut-vec/1320\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69959154/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69959177",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-69959177",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 69959177,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTU5MTc3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T17:51:04Z",
    "updated_at": "2015-01-14T17:51:04Z",
    "body": "The design of strings is that they're a thin wrapper around the corresponding slice/vector type. A small string type would be a wrapper around a small vector type. It's a design trade-off so there would be a choice between the types as there always is. Unless someone can explain why an asymmetric string / vector design makes any sense... ?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69959177/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69960049",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-69960049",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 69960049,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTYwMDQ5",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T17:56:20Z",
    "updated_at": "2015-01-14T17:57:49Z",
    "body": "@LukasKalbertodt: Strings in Rust are slice/vector wrappers providing a UTF-8 encoding guarantee. There is always going to be a string type implemented as a wrapper around `Vec<u8>`. In the future, Rust can have a string type with small string optimization but writing that _implies_ writing a small vector type and it wouldn't make sense to provide one without the other.\n\nThe preferred default string type is a separate issue from whether a string wrapper around vectors exists. Note that there is zero language support for either `Vec<u8>` or `String`, they are entirely unprivileged library types beyond the fact that a default prelude exists.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69960049/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69961235",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-69961235",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 69961235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTYxMjM1",
    "user": {
      "login": "pepp-cz",
      "id": 7118958,
      "node_id": "MDQ6VXNlcjcxMTg5NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7118958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pepp-cz",
      "html_url": "https://github.com/pepp-cz",
      "followers_url": "https://api.github.com/users/pepp-cz/followers",
      "following_url": "https://api.github.com/users/pepp-cz/following{/other_user}",
      "gists_url": "https://api.github.com/users/pepp-cz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pepp-cz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pepp-cz/subscriptions",
      "organizations_url": "https://api.github.com/users/pepp-cz/orgs",
      "repos_url": "https://api.github.com/users/pepp-cz/repos",
      "events_url": "https://api.github.com/users/pepp-cz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pepp-cz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T18:03:26Z",
    "updated_at": "2015-01-14T18:03:26Z",
    "body": "I cannot say if it makes any sense but I do not any sense if it is other way round. Firstly Sting is a sequence of \"characters\" in UTF-8 endcoding so I do see any direct similarity to Vec<u8>.\n\nI do not want to argue about implementation of String using Vec or whatsoever. The issue is just about future-proofing the design. At some time it can happen that it is better to have independent String and Vec but this little as_mut_vec methods just makes it harder (e.g. maybe SSO can be done better in strings that on generic vector). And the sad thing about it is that nobody cares about that method.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69961235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69961249",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-69961249",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 69961249,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTYxMjQ5",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T18:03:33Z",
    "updated_at": "2015-01-14T18:03:33Z",
    "body": "It would also make sense to have a string implemented as a rope type, and implementing that is going to result in an underlying general purpose rope-based vector type. It's just the logical way to do things... there's no good reason to make the implementation unusable for other purposes than storing UTF-8.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69961249/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69962160",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-69962160",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 69962160,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTYyMTYw",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T18:09:22Z",
    "updated_at": "2015-01-14T18:09:22Z",
    "body": "> I cannot say if it makes any sense but I do not any sense if it is other way round. Firstly Sting is a sequence of \"characters\" in UTF-8 endcoding so I do see any direct similarity to Vec.\n\nThere is one UTF-8 string type that's a wrapper around `[u8]` and another that's a wrapper around `Vec<u8>`. The types exist to provide a UTF-8 guarantee while filling the same purpose as the corresponding byte array types. It's more than just a direct similarity - it's by design.\n\n> I do not want to argue about implementation of String using Vec or whatsoever. The issue is just about future-proofing the design. At some time it can happen that it is better to have independent String and Vec but this little as_mut_vec methods just makes it harder (e.g. maybe SSO can be done better in strings that on generic vector). And the sad thing about it is that nobody cares about that method.\n\nThere is always going to be a UTF-8 string type that's a wrapper around `Vec<u8>`. There can be a small string type wrapping a small vector, but it will never obsolete the use case for the type wrapping the normal vectors. There is nothing forcing the small string type to have a method converting to `&mut Vec<u8>`. It would instead have a method converting to `&mut SmallVec<u8, N>`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69962160/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69962946",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-69962946",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 69962946,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTYyOTQ2",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T18:14:18Z",
    "updated_at": "2015-01-14T18:14:42Z",
    "body": "If someone wants to write an RFC addressing the various points, then they're free to do so. The issue tracker is for actionable, concrete issues in the language / libraries rather than very subjective changes that are open to debate. I certainly think SSO is important and I'm not arguing against providing it...\n\nI am just explaining that the string type exists solely to provide a UTF-8 guarantee. It would not exist if Rust used (native endian) UTF-32 since it could just use `Vec<char>`. There is a use case for a wrapper type providing a UTF-8 guarantee for vectors, small vectors and ropes. The existing type wrapping `Vec<u8>` isn't going to be removed regardless of additional collection types being added.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69962946/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69963979",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-69963979",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 69963979,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTYzOTc5",
    "user": {
      "login": "LukasKalbertodt",
      "id": 7419664,
      "node_id": "MDQ6VXNlcjc0MTk2NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7419664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukasKalbertodt",
      "html_url": "https://github.com/LukasKalbertodt",
      "followers_url": "https://api.github.com/users/LukasKalbertodt/followers",
      "following_url": "https://api.github.com/users/LukasKalbertodt/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukasKalbertodt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukasKalbertodt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukasKalbertodt/subscriptions",
      "organizations_url": "https://api.github.com/users/LukasKalbertodt/orgs",
      "repos_url": "https://api.github.com/users/LukasKalbertodt/repos",
      "events_url": "https://api.github.com/users/LukasKalbertodt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukasKalbertodt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T18:20:34Z",
    "updated_at": "2015-01-14T18:20:34Z",
    "body": "I understand that the string type should just be a UTF-8 Wrapper with various underlying data structures. I am just worried that `std::string::String` will have a method called `as_mut_vec` when Rust 1.0 is released. If that happens, we wouldn't be able to revert it since we would break production code. \n\nWe should limit the String type so that we don't make assumptions about the internal implementation. But you are right, this issue page is probably the wrong place to discuss that. So we should continue the discussion here: http://discuss.rust-lang.org/t/small-string-optimization-remove-as-mut-vec/1320\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69963979/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69965388",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-69965388",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 69965388,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTY1Mzg4",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T18:29:10Z",
    "updated_at": "2015-01-14T18:29:10Z",
    "body": "A string wrapper around `Vec<u8>` exists and is going to continue to exist. There is no integration of either type into the language, so there is absolutely no risk because it's not a standard string type beyond the fact that it's provided by the standard libraries. Additional string types wrapping different underlying data structures can be provided in the future without any problems.\n\nThe `as_mut_vec` method is _hardly_ the only one derived from the fact that it's a wrapper around `Vec<u8>`. There are various methods taking advantage of the ability to convert it to and from a byte vector without a copy. A string implemented as a small vector type would still provide all of these methods but would convert to the underlying small vector type instead. I fail to see why this is a problem in any way, and no one seems willing to respond to the points I've raised.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69965388/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69967127",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-69967127",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 69967127,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTY3MTI3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T18:39:45Z",
    "updated_at": "2015-01-14T18:39:45Z",
    "body": "I don't see why \"I want option X\" needs to become \"cripple option Y\". There is nothing preventing small string / vector types from having the same level of support as the ones without that optimization trade-off. It's certainly not a clear win because it adds a branch to many operations - it is, as these things tend to be, a compromise that makes sense in some cases and not others.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69967127/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69968259",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-69968259",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 69968259,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTY4MjU5",
    "user": {
      "login": "LukasKalbertodt",
      "id": 7419664,
      "node_id": "MDQ6VXNlcjc0MTk2NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7419664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukasKalbertodt",
      "html_url": "https://github.com/LukasKalbertodt",
      "followers_url": "https://api.github.com/users/LukasKalbertodt/followers",
      "following_url": "https://api.github.com/users/LukasKalbertodt/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukasKalbertodt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukasKalbertodt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukasKalbertodt/subscriptions",
      "organizations_url": "https://api.github.com/users/LukasKalbertodt/orgs",
      "repos_url": "https://api.github.com/users/LukasKalbertodt/repos",
      "events_url": "https://api.github.com/users/LukasKalbertodt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukasKalbertodt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T18:46:23Z",
    "updated_at": "2015-01-14T18:46:23Z",
    "body": "> [...] no one seems willing to respond to the points I've raised.\n\nExactly which points are you talking about? \n\n>  [...] so there is absolutely no risk because it's not a standard string type beyond the fact that it's provided by the standard libraries.\n\nI disagree: The name is the problem. A type in the standard library that is called `std::string::String` is assumed to be the standard string type of the language. And yes sure, I don't argue against a wrapper around Vec, so there should be this kind of type. But it shouldn't be called `String`\n\n> It's certainly not a clear win because it adds a branch to many operations - it is, as these things tend to be, a compromise that makes sense in some cases and not others.\n\nI agree. What about that?\n- `VecString`: UTF8 wrapper around Vec\n- `SmallString`: UTF8 wrapper around a SmallVec\n- `RawString`: Custom buffer and memory handling with SSO support.\n- `WhateverString`: Another implementation\n- `String`: Typedefs one of the types listed above. But the language should make clear that this standard string type doesn't have implementation dependent methods, like `as_mut_vec`\n\n**TL;DR:** Create any string implementation with any special implementation dependent operations, but don't call it `String`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69968259/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69971665",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-69971665",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 69971665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTcxNjY1",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T19:05:52Z",
    "updated_at": "2015-01-14T19:05:52Z",
    "body": "Sure, I agree that `String` is a bad name for the type. It doesn't make sense to remove methods from it though, since the intended purpose is wrapping `Vec<u8>` and providing the UTF-8 guarantee.\n\nI would support an RFC proposing a rename but I don't expect that it would succeed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69971665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69972287",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-69972287",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 69972287,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTcyMjg3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T19:09:34Z",
    "updated_at": "2015-01-14T19:10:34Z",
    "body": "I don't think we need a type that's an \"abstract\" string. Individual projects are already free to use type aliases like that or simply mass-change from one string type to another. The hard part is not converting from one type to another but rather figuring out the cases where it makes sense to pay the cost of using small string optimization. LLVM's usage of small strings / vectors is a great example of this: all of the effort is spent on profiling / statistics, not changing code.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69972287/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70021171",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70021171",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70021171,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDIxMTcx",
    "user": {
      "login": "LukasKalbertodt",
      "id": 7419664,
      "node_id": "MDQ6VXNlcjc0MTk2NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7419664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukasKalbertodt",
      "html_url": "https://github.com/LukasKalbertodt",
      "followers_url": "https://api.github.com/users/LukasKalbertodt/followers",
      "following_url": "https://api.github.com/users/LukasKalbertodt/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukasKalbertodt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukasKalbertodt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukasKalbertodt/subscriptions",
      "organizations_url": "https://api.github.com/users/LukasKalbertodt/orgs",
      "repos_url": "https://api.github.com/users/LukasKalbertodt/repos",
      "events_url": "https://api.github.com/users/LukasKalbertodt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukasKalbertodt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T00:40:10Z",
    "updated_at": "2015-01-15T00:40:10Z",
    "body": "> [...] since the intended purpose is wrapping `Vec<u8>` and providing the UTF-8 guarantee.\n\nWho \"intended\" that? Shouldn't the design of `String` just say: A growable sequence of characters with UTF-8 guarantee?\nI think this is exactly what users want. I just don't see why this type was designed so closely related to Vec... Who said that `String` has to use a Vec as underlying data structure? I think those classes shouldn't even know of each other.\n\nMaybe I will create a pull request that adds another SmallString class to `std::string`... But I will continue this discussion in the discuss-thread which link I posted twice already.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70021171/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70030597",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70030597",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70030597,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDMwNTk3",
    "user": {
      "login": "comex",
      "id": 47517,
      "node_id": "MDQ6VXNlcjQ3NTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/comex",
      "html_url": "https://github.com/comex",
      "followers_url": "https://api.github.com/users/comex/followers",
      "following_url": "https://api.github.com/users/comex/following{/other_user}",
      "gists_url": "https://api.github.com/users/comex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/comex/subscriptions",
      "organizations_url": "https://api.github.com/users/comex/orgs",
      "repos_url": "https://api.github.com/users/comex/repos",
      "events_url": "https://api.github.com/users/comex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/comex/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T02:26:41Z",
    "updated_at": "2015-01-15T02:26:41Z",
    "body": "@thestinger\nThere may always be a string type implemented as a wrapper around `Vec<u8>` (though I'm not sure I see the use), but that string type doesn't have to be `String`.  If `String` removed this single method exposing its `Vec<u8>` internals, then it would be feasible to switch it in the future to be based on a SSO vector type without requiring _the entire Rust ecosystem_ to mass rename their `String`s to `SuperSSOString`, or `as_mut_vec` to suddenly have to do some weird expensive conversion.  Well, maybe not every last use of the struct in the ecosystem, but, per C++ discussion, it seems like SSO would be better for most people who just want a string; I doubt there are many people who have actually thought about it and decided they like the guarantee that `String` is a `Vec<u8>`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70030597/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70084526",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70084526",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70084526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDg0NTI2",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T13:23:24Z",
    "updated_at": "2015-01-15T13:23:24Z",
    "body": "The ability to convert between the string and underlying byte vector type without copies is very important. Again, the `as_mut_vec` method is hardly the only thing derived from the representation of `String`. The time spent performing small dynamic allocations is _tiny_. The real win from SSO is data locality, but it comes at the cost of a huge number of extra branches and splitting the vector ecosystem is going to cause expensive copies.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70084526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70085009",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70085009",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70085009,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDg1MDA5",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T13:27:51Z",
    "updated_at": "2015-01-15T13:28:19Z",
    "body": "@comex: Also, there's no need to rename everything. Rust has namespaces, so you can just change the imports across the project without touching any of the code.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70085009/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70085183",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70085183",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70085183,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDg1MTgz",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T13:29:21Z",
    "updated_at": "2015-01-15T13:30:52Z",
    "body": "(You can import `SmallString` as `Str` and `String` as `StrVec` or whatever else you want to do in your project - names are not monopolized across the ecosystem simply because one library chooses to use it.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70085183/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70085327",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70085327",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70085327,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDg1MzI3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T13:30:41Z",
    "updated_at": "2015-01-15T13:30:41Z",
    "body": "Since there would be no room for the argument if it was called `StrVec`, this is simply a naming bikeshed. There's clearly no backwards compatibility issue.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70085327/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70087368",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70087368",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70087368,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDg3MzY4",
    "user": {
      "login": "pepp-cz",
      "id": 7118958,
      "node_id": "MDQ6VXNlcjcxMTg5NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7118958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pepp-cz",
      "html_url": "https://github.com/pepp-cz",
      "followers_url": "https://api.github.com/users/pepp-cz/followers",
      "following_url": "https://api.github.com/users/pepp-cz/following{/other_user}",
      "gists_url": "https://api.github.com/users/pepp-cz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pepp-cz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pepp-cz/subscriptions",
      "organizations_url": "https://api.github.com/users/pepp-cz/orgs",
      "repos_url": "https://api.github.com/users/pepp-cz/repos",
      "events_url": "https://api.github.com/users/pepp-cz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pepp-cz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T13:48:21Z",
    "updated_at": "2015-01-15T13:48:21Z",
    "body": "@thestinger Can you quantify how important is it to have cheap conversion from `String` to `Vec<u8>` and in the opposite direction? Uses of `as_mut_vec` and `into_bytes` on `String` are pretty rare in rustc and servo.\nThe `from_utf8` is used more often but not very often.\n\nHow we can know that cheap conversion is bigger performance win than SSO?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70087368/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70087669",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70087669",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70087669,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDg3NjY5",
    "user": {
      "login": "LukasKalbertodt",
      "id": 7419664,
      "node_id": "MDQ6VXNlcjc0MTk2NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7419664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukasKalbertodt",
      "html_url": "https://github.com/LukasKalbertodt",
      "followers_url": "https://api.github.com/users/LukasKalbertodt/followers",
      "following_url": "https://api.github.com/users/LukasKalbertodt/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukasKalbertodt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukasKalbertodt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukasKalbertodt/subscriptions",
      "organizations_url": "https://api.github.com/users/LukasKalbertodt/orgs",
      "repos_url": "https://api.github.com/users/LukasKalbertodt/repos",
      "events_url": "https://api.github.com/users/LukasKalbertodt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukasKalbertodt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T13:50:49Z",
    "updated_at": "2015-01-15T13:50:49Z",
    "body": "> The ability to convert between the string and underlying byte vector type without copies is very important. [...]\n> The time spent performing small dynamic allocations is tiny.\n\nSaid who? These are just some random facts without proof. You can easily imagine a situation in which a huge number of small allocations take place.\nAnd who uses this conversion between String and Vec? As I said above: There are other methods to do that, both without copying all data.\n\n> Again, the as_mut_vec method is hardly the only thing derived from the representation of String. \n\nAs far as I can tell `as_mut_vec` and `into_bytes` are the only methods of the interface that use a Vec in some way. And `into_bytes` is not hard to implement for string types that don't use Vec as underlying data structure (Though I would propose to remove that method too).\n\n> Also, there's no need to rename everything. Rust has namespaces, so you can just change the imports across the project without touching any of the code.\n\nSuppose we had a name for a standard container type... lets call it `Collection`. And suppose now that the standard implementation of that type is a linked list (which is hardly optimal as standard container). This type then has specific methods that rely on the linked list implementation and it doesn't have methods that would be useful for other implementations, like random access. I would tell you: Whats the problem? We can alias our types, we have namespaces. Just call your vector type `std::collections::CollectionsVector`. \nSure everyone would be able to alias this name to a nicer name. But no one, especially not beginners, does this! \n\nI think that we should not destroy our standard string type (means: name!) in that way! I think that the conversion from string to Vec is rarely used and a special case. Using SSO, on the other hand, is no special case and would serve better as an standard string type.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70087669/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70089894",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70089894",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70089894,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDg5ODk0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:08:44Z",
    "updated_at": "2015-01-15T14:08:44Z",
    "body": "> Said who? These are just some random facts without proof. You can easily imagine a situation in which a huge number of small allocations take place.\n\nSmall allocations take ~8ns on modern hardware. You're the one making the extraordinary claim that SSO is important rather than just an option that's nice to have as a frill. Code size matters a lot _in practice_ while the cost of making small allocations rarely does, even in naive code. It's already known that greatly speeding up small allocations or eliminating them isn't going to do anything for projects like rustc, because it has been done and measured. A disproportionate amount of time is spent copying _large_ allocations, and little time is wasted elsewhere.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70089894/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70090799",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70090799",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70090799,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDkwNzk5",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:15:32Z",
    "updated_at": "2015-01-15T14:15:32Z",
    "body": "@pepp-cz: The cost of small allocations is almost always a non-issue. The small vector optimization is a nice thing to have, but it's certainly no paradigm shift. In exchange for paying for extra branches, you get better data locality. Most code is not hot so code size and minimal branches is more important than raw performance in order to minimize the impact on the code that's actually hot. Good usage of small strings means finding those hot spots and then applying it as a micro-optimization.\n\nIn any case where reallocation is rare and the data is task-local, you would be _far_ better off making the string type itself as small as possible (1 pointer) and using lightweight reference counting. I think those cases might actually be the majority of string usage.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70090799/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70091235",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70091235",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70091235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDkxMjM1",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:18:54Z",
    "updated_at": "2015-01-15T14:20:04Z",
    "body": "The case where small allocation performance matters is when you're allocating small vectors or nodes of linked data structures in an inner loop. I doubt that reallocation of those kinds of small strings is common, so the best optimization would be making them immutable and reducing the representation to a single pointer to `{ count, data[] }`. If it's non-Send, the reference counting doesn't need to be atomic so it's blazing fast. The data always needs 1 byte alignment so you don't even lose any of the allocation to padding. If reallocation _is_ common, then the extra branches added by small strings is going to hurt a lot more than it helps...\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70091235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70091495",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70091495",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70091495,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDkxNDk1",
    "user": {
      "login": "pepp-cz",
      "id": 7118958,
      "node_id": "MDQ6VXNlcjcxMTg5NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7118958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pepp-cz",
      "html_url": "https://github.com/pepp-cz",
      "followers_url": "https://api.github.com/users/pepp-cz/followers",
      "following_url": "https://api.github.com/users/pepp-cz/following{/other_user}",
      "gists_url": "https://api.github.com/users/pepp-cz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pepp-cz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pepp-cz/subscriptions",
      "organizations_url": "https://api.github.com/users/pepp-cz/orgs",
      "repos_url": "https://api.github.com/users/pepp-cz/repos",
      "events_url": "https://api.github.com/users/pepp-cz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pepp-cz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:20:52Z",
    "updated_at": "2015-01-15T14:20:52Z",
    "body": "@thestinger  As you said, SSO help more with data locality than with allocation. How is it that all major implementations of C++ I know implements SSO for std::string and also projects such Firefox and Chrome uses it for their custom strings as well. Are they all just fools?\nIf it was measured it is fine. Was it measured on memory constrained devices such as most of the \nAndroid phones?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70091495/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70092378",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70092378",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70092378,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDkyMzc4",
    "user": {
      "login": "pepp-cz",
      "id": 7118958,
      "node_id": "MDQ6VXNlcjcxMTg5NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7118958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pepp-cz",
      "html_url": "https://github.com/pepp-cz",
      "followers_url": "https://api.github.com/users/pepp-cz/followers",
      "following_url": "https://api.github.com/users/pepp-cz/following{/other_user}",
      "gists_url": "https://api.github.com/users/pepp-cz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pepp-cz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pepp-cz/subscriptions",
      "organizations_url": "https://api.github.com/users/pepp-cz/orgs",
      "repos_url": "https://api.github.com/users/pepp-cz/repos",
      "events_url": "https://api.github.com/users/pepp-cz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pepp-cz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:27:25Z",
    "updated_at": "2015-01-15T14:27:56Z",
    "body": "@thestinger Basically everything you say makes sense but there is no evidence so far.\nMy concern is that `String` being a wrapper over `Vec<u8>` may not be the best option for default string type and I fear that with the current `String` interface we'll be stuck with this choice of default forever. Nothing less, nothing more.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70092378/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70092757",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70092757",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70092757,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDkyNzU3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:30:12Z",
    "updated_at": "2015-01-15T14:30:12Z",
    "body": "std::string has very little to do with strings in Rust. It's a vector of completely arbitrary bytes and already pays the cost of extra branches to preserve the `\\0` at the end. C++ calls the copy constructor by default so string allocations are much more pervasive.\n\n> Are they all just fools?\n\nYes, [they are](https://groups.google.com/a/chromium.org/forum/#!msg/chromium-dev/EUqoIz2iFU4/kPZ5ZK0K3gEJ) but it's beside the point.\n\n> If it was measured it is fine. Was it measured on memory constrained devices such as most of the \n> Android phones?\n\nAndroid phones aren't memory constrained. They use a garbage collected virtual machine language for nearly everything. The Nexus 5 had 2G of memory and the Nexus 6 has bumped that to 3G. Android can barely cope with < 1G of memory. There is nothing special about that environment.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70092757/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70093131",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70093131",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70093131,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDkzMTMx",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:32:45Z",
    "updated_at": "2015-01-15T14:32:45Z",
    "body": "> Basically everything you say makes sense but there is no evidence so far.\n\nI'm not the one making extraordinary claims and demanding that the default be changed. It's your job to prove me wrong because you want to change the status quo. The burden of proof is on the people arguing for change and arguing against convention optimization wisdom.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70093131/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70093365",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70093365",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70093365,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDkzMzY1",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:34:14Z",
    "updated_at": "2015-01-15T14:34:14Z",
    "body": "It's pretty simple. Strings aren't actually mutable once you take away reallocation. Once you have immutability, you can use reference counting with a single pointer as the representation. It doesn't make sense to do anything else. Mutable strings should be optimized for reallocations, because they have no other reason to exist.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70093365/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70093629",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70093629",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70093629,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDkzNjI5",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:36:09Z",
    "updated_at": "2015-01-15T14:36:09Z",
    "body": "SSO adds a branch to every push operation, and 2 branches to an append operation. Ouch. Yes, there are cases where it will be faster, but I doubt that is the correct choice in >5% of cases.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70093629/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70093749",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70093749",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70093749,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDkzNzQ5",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:37:01Z",
    "updated_at": "2015-01-15T14:37:01Z",
    "body": "(it also adds a branch to operations like slicing)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70093749/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70094467",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70094467",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70094467,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDk0NDY3",
    "user": {
      "login": "LukasKalbertodt",
      "id": 7419664,
      "node_id": "MDQ6VXNlcjc0MTk2NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7419664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukasKalbertodt",
      "html_url": "https://github.com/LukasKalbertodt",
      "followers_url": "https://api.github.com/users/LukasKalbertodt/followers",
      "following_url": "https://api.github.com/users/LukasKalbertodt/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukasKalbertodt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukasKalbertodt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukasKalbertodt/subscriptions",
      "organizations_url": "https://api.github.com/users/LukasKalbertodt/orgs",
      "repos_url": "https://api.github.com/users/LukasKalbertodt/repos",
      "events_url": "https://api.github.com/users/LukasKalbertodt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukasKalbertodt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:41:48Z",
    "updated_at": "2015-01-15T14:43:47Z",
    "body": "> You're the one making the extraordinary claim that SSO is important rather than just an option that's nice to have as a frill.\n\nYes I made some claims, but telling you that SSO is great is not my plan. \n\n> My concern is that String being a wrapper over Vec<u8> may not be the best option for default string type and I fear that with the current String interface we'll be stuck with this choice of default forever. Nothing less, nothing more.\n\nThis is the problem and not whether or not SSO is better than Vec based string types. \n\nWe just argue to remove methods of the standard string type (read: name) that have implications about the implementation. I wouldn't argue to add a `uses_sso` method because I want the standard string type to be SSO. The interface of the standard string type should allow every implementation.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70094467/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70095162",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70095162",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70095162,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDk1MTYy",
    "user": {
      "login": "pepp-cz",
      "id": 7118958,
      "node_id": "MDQ6VXNlcjcxMTg5NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7118958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pepp-cz",
      "html_url": "https://github.com/pepp-cz",
      "followers_url": "https://api.github.com/users/pepp-cz/followers",
      "following_url": "https://api.github.com/users/pepp-cz/following{/other_user}",
      "gists_url": "https://api.github.com/users/pepp-cz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pepp-cz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pepp-cz/subscriptions",
      "organizations_url": "https://api.github.com/users/pepp-cz/orgs",
      "repos_url": "https://api.github.com/users/pepp-cz/repos",
      "events_url": "https://api.github.com/users/pepp-cz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pepp-cz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:46:05Z",
    "updated_at": "2015-01-15T14:46:05Z",
    "body": "@thestinger: If you are concerned about pushes and appends then you assume that string mutation is rather frequent operation. My experience so far from other PLs is that heap-allocated strings are created once and kept around in some data structure. Now in Rust where &str is the prefered way to pass strings to functions the introduced branch can be executed once per conversion to &str or to Iterator which does not sound like a lot of an overhead.\n\nNow I do not want to argue with you about performance implications of different implementation but to discuss and learn your experience if you are interested.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70095162/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70095196",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70095196",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70095196,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDk1MTk2",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:46:15Z",
    "updated_at": "2015-01-15T14:49:11Z",
    "body": "It's a mutable string type using `uint` for indexing cookies (it does composition by returning `uint` and having you pass it back to other functions). Using a rope type or reference counting is already ruled out because it can't efficiently implement the API. There is nothing gained from removing the `as_mut_vec` method **and the others derived from the underlying implementation**. The use case for a mutable string type in lieu of an immutable one is (fast) reallocation, nothing more.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70095196/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70095444",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70095444",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70095444,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDk1NDQ0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:47:42Z",
    "updated_at": "2015-01-15T14:47:42Z",
    "body": "@pepp-cz: The sole purpose of `String` is optimizing for reallocation. You should be using immutable strings if you want fast copies (reference counting) instead of support for in-place reallocation.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70095444/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70096020",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70096020",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70096020,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDk2MDIw",
    "user": {
      "login": "LukasKalbertodt",
      "id": 7419664,
      "node_id": "MDQ6VXNlcjc0MTk2NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7419664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukasKalbertodt",
      "html_url": "https://github.com/LukasKalbertodt",
      "followers_url": "https://api.github.com/users/LukasKalbertodt/followers",
      "following_url": "https://api.github.com/users/LukasKalbertodt/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukasKalbertodt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukasKalbertodt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukasKalbertodt/subscriptions",
      "organizations_url": "https://api.github.com/users/LukasKalbertodt/orgs",
      "repos_url": "https://api.github.com/users/LukasKalbertodt/repos",
      "events_url": "https://api.github.com/users/LukasKalbertodt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukasKalbertodt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:51:15Z",
    "updated_at": "2015-01-15T14:51:15Z",
    "body": "> There is nothing gained from removing the `as_mut_vec` method **and the others derived from the underlying implementation**\n\nWhich other methods?\nAnd maybe we gain the ability to make the default string type a SSO-string later in the future? Or some other implementation we don't know about yet? \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70096020/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70096165",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70096165",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70096165,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDk2MTY1",
    "user": {
      "login": "pepp-cz",
      "id": 7118958,
      "node_id": "MDQ6VXNlcjcxMTg5NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7118958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pepp-cz",
      "html_url": "https://github.com/pepp-cz",
      "followers_url": "https://api.github.com/users/pepp-cz/followers",
      "following_url": "https://api.github.com/users/pepp-cz/following{/other_user}",
      "gists_url": "https://api.github.com/users/pepp-cz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pepp-cz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pepp-cz/subscriptions",
      "organizations_url": "https://api.github.com/users/pepp-cz/orgs",
      "repos_url": "https://api.github.com/users/pepp-cz/repos",
      "events_url": "https://api.github.com/users/pepp-cz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pepp-cz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:52:05Z",
    "updated_at": "2015-01-15T14:52:05Z",
    "body": "@thestinger: That is not what Rust guide and other sources say and probably that is source of misunderstanding right now. They say `String` is generic owned (like boxed) type in the language. No word about mutability or whatsoever and AFAIK there is no immutable heap-allocated string provided by standard library.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70096165/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70096861",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70096861",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70096861,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDk2ODYx",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:56:04Z",
    "updated_at": "2015-01-15T14:56:04Z",
    "body": "@pepp-cz: `Vec<T>` and `String` exist to provide mutable collections with resizing. You would be using `Box<[T]>` or `Box<str>` if you didn't want that... but `Box<str>` is not very useful because without resizing UTF-8 strings are not really mutable. An immutable string makes a lot more sense, because then it can use reference counting instead of allocation + memcpy for clones.\n\n> That is not what Rust guide and other sources say and probably that is source of misunderstanding right now.\n\nThat's not relevant. Fix the documentation or work on improving support for immutable strings (`Rc<str>`) but I don't see the point in bringing that up in a discussion about SSO.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70096861/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70097418",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70097418",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70097418,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDk3NDE4",
    "user": {
      "login": "LukasKalbertodt",
      "id": 7419664,
      "node_id": "MDQ6VXNlcjc0MTk2NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7419664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukasKalbertodt",
      "html_url": "https://github.com/LukasKalbertodt",
      "followers_url": "https://api.github.com/users/LukasKalbertodt/followers",
      "following_url": "https://api.github.com/users/LukasKalbertodt/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukasKalbertodt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukasKalbertodt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukasKalbertodt/subscriptions",
      "organizations_url": "https://api.github.com/users/LukasKalbertodt/orgs",
      "repos_url": "https://api.github.com/users/LukasKalbertodt/repos",
      "events_url": "https://api.github.com/users/LukasKalbertodt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukasKalbertodt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:59:11Z",
    "updated_at": "2015-01-15T14:59:11Z",
    "body": "> in a discussion about SSO.\n\nThis discussion is not mainly about SSO nor it's advantages. SSO is just an example for an implementation that would be impossible to use when we keep the current string interface.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70097418/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70097439",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70097439",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70097439,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDk3NDM5",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T14:59:15Z",
    "updated_at": "2015-01-15T14:59:15Z",
    "body": "@LukasKalbertodt:\n\n> Which other methods?\n\nThe methods offering conversion to and from byte vectors without memory allocation or copying the data. Ropes are ruled out by the usage of `uint` indexing cookies and the fact that it returns slices of the data, because slices are inherently contiguous.\n\n> And maybe we gain the ability to make the default string type a SSO-string later in the future?\n\nThat's not a gain, as I have explained.\n\n> Or some other implementation we don't know about yet?\n\nThe only useful representation is the one matching up with `Vec<u8>`. If there was a better way to do it, then it would apply to vectors too. Mutable strings and mutable vectors aren't substantially different.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70097439/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70097632",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70097632",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70097632,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDk3NjMy",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T15:00:22Z",
    "updated_at": "2015-01-15T15:00:22Z",
    "body": "> This discussion is not mainly about SSO nor it's advantages. SSO is just an example for an implementation that would be impossible to use when we keep the current string interface.\n\nThat's not true. There's no possibility of using ropes or reference counting with it anyway. It's a mutable, sendable string type... you're just making up bullshit now and you can't back it up.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70097632/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70097660",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70097660",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70097660,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDk3NjYw",
    "user": {
      "login": "pepp-cz",
      "id": 7118958,
      "node_id": "MDQ6VXNlcjcxMTg5NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7118958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pepp-cz",
      "html_url": "https://github.com/pepp-cz",
      "followers_url": "https://api.github.com/users/pepp-cz/followers",
      "following_url": "https://api.github.com/users/pepp-cz/following{/other_user}",
      "gists_url": "https://api.github.com/users/pepp-cz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pepp-cz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pepp-cz/subscriptions",
      "organizations_url": "https://api.github.com/users/pepp-cz/orgs",
      "repos_url": "https://api.github.com/users/pepp-cz/repos",
      "events_url": "https://api.github.com/users/pepp-cz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pepp-cz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T15:00:31Z",
    "updated_at": "2015-01-15T15:00:31Z",
    "body": "> ... I don't see the point in bringing that up in a discussion about SSO.\n\n@thestinger: Fair enough. The dicussion does not match the subject for a long time now. But many things cleared up for me. Thanks\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70097660/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70098095",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70098095",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70098095,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDk4MDk1",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T15:03:07Z",
    "updated_at": "2015-01-15T15:04:16Z",
    "body": "There **_is**_ a difference in usage patterns between text and general purpose arrays. The distinction is that text is almost always immutable, so it makes sense to use a string type _without_ fast reallocation in order to eliminate the cost of cloning almost completely. `String` is not that type, because it's designed as a mutable string type. That's the entire reason for it existing, and there _is_ a use case for it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70098095/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70103733",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70103733",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70103733,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTAzNzMz",
    "user": {
      "login": "LukasKalbertodt",
      "id": 7419664,
      "node_id": "MDQ6VXNlcjc0MTk2NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7419664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukasKalbertodt",
      "html_url": "https://github.com/LukasKalbertodt",
      "followers_url": "https://api.github.com/users/LukasKalbertodt/followers",
      "following_url": "https://api.github.com/users/LukasKalbertodt/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukasKalbertodt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukasKalbertodt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukasKalbertodt/subscriptions",
      "organizations_url": "https://api.github.com/users/LukasKalbertodt/orgs",
      "repos_url": "https://api.github.com/users/LukasKalbertodt/repos",
      "events_url": "https://api.github.com/users/LukasKalbertodt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukasKalbertodt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T15:36:32Z",
    "updated_at": "2015-01-15T15:36:32Z",
    "body": "Wow... I give up. \nApparently some Rust developer are not interested in a future proof interface...\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70103733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70105044",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70105044",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70105044,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTA1MDQ0",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T15:44:08Z",
    "updated_at": "2015-01-15T15:44:08Z",
    "body": "This is getting a little heated. Can we maybe calm it down a bit? There's a lot of good ligitimate technical points being made on all sides of this discussion, but they're starting to get lost in the way they're delivered.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70105044/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70105057",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70105057",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70105057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTA1MDU3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T15:44:12Z",
    "updated_at": "2015-01-15T15:45:35Z",
    "body": "It doesn't make sense to design a \"future proof\" interface. There is always going to be the need for a UTF-8 wrapper around Vec<u8>, so the type will never become obsolete. The use case for a mutable string with fast in-place reallocation could be covered by a type using small vector optimization, but making that the preferred type would be dubious. Migrating from one string type to another is trivial anyway. The hard part is not changing the code, but figuring out which type to use in each case based on profiling / statistics.\n\nhttp://c2.com/cgi/wiki?YouArentGonnaNeedIt\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70105057/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70106294",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70106294",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70106294,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTA2Mjk0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T15:51:02Z",
    "updated_at": "2015-01-15T15:51:02Z",
    "body": "@steveklabnik: Where are the technical arguments for making this change? There's a repeated argument to authority (\"some C++ implementations of a much different type do it\") and scare tactics based on the fact that it would break compatibility. It's not a technical discussion if one side is just repeating rhetoric and not addressing any of the points that are raised.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70106294/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70107514",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70107514",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70107514,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTA3NTE0",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T15:57:31Z",
    "updated_at": "2015-01-15T15:57:31Z",
    "body": "@thestinger I actually agree with all of the points that you've raised. But that doesn't mean that, in certain circumstances, SSO is useful. As you've pointed out, that doesn't mean that it's useful for `String`, or that we should change `String` at all, for other, good technical reasons. It's just that the cons outweigh the pros here.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70107514/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70107930",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70107930",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70107930,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTA3OTMw",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T15:59:31Z",
    "updated_at": "2015-01-15T15:59:31Z",
    "body": "@steveklabnik: I am the one who opened the first issue asking for types implementing the small vector optimization. At one point I wondered if it would make sense to use by default, but I changed my mind based on the evidence that's available. It's certainly useful in a narrow niche, but it really is quite narrow for strings. It's less narrow for vectors, because mutating them is much more common.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70107930/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70109234",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70109234",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70109234,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTA5MjM0",
    "user": {
      "login": "pepp-cz",
      "id": 7118958,
      "node_id": "MDQ6VXNlcjcxMTg5NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7118958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pepp-cz",
      "html_url": "https://github.com/pepp-cz",
      "followers_url": "https://api.github.com/users/pepp-cz/followers",
      "following_url": "https://api.github.com/users/pepp-cz/following{/other_user}",
      "gists_url": "https://api.github.com/users/pepp-cz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pepp-cz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pepp-cz/subscriptions",
      "organizations_url": "https://api.github.com/users/pepp-cz/orgs",
      "repos_url": "https://api.github.com/users/pepp-cz/repos",
      "events_url": "https://api.github.com/users/pepp-cz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pepp-cz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T16:06:45Z",
    "updated_at": "2015-01-15T16:06:45Z",
    "body": "The thing is that the purpose of the `String` type is not clear from the documentation and the name itself suggest that it is some general purpose best-most-of-the time implementation of strings. Once this was revealed than there is nothing to argue about in technical terms. The thing that still can be disussed is the naming of the type and what properties should the default string type (if there is any) have but that should take place somewhere else.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70109234/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70109399",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70109399",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70109399,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTA5Mzk5",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T16:07:44Z",
    "updated_at": "2015-01-15T16:07:44Z",
    "body": "> At one point I wondered if it would make sense to use by default, but I changed my mind based on the evidence that's available.\n\nRight. This basically describes my thought process here too, a question I answered in IRC about it, which kicked off this new discussion. After reading said discussion, I'm in agreement with your position here. But everyone has to come along on that journey, you know? Not everyone will agree all the time on a particular technical tradeoff.\n\nAnyway, this isn't even just about you here. The \"Apparently some Rust developer are not interested in a future proof interface...\" isn't helpful either. I'd just prefer that we stick to the technical side of things without getting all nasty. It really squashes discussion.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70109399/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70110337",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70110337",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70110337,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTEwMzM3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T16:12:37Z",
    "updated_at": "2015-01-15T16:17:32Z",
    "body": "A summary of the facts from the discussion:\n- `String` exists to provide a mutable, resizeable string. Mutation without the ability to perform in-place resizes would not be useful, due to the realities of Unicode. The only efficient mutable operations are appending and truncating, again thanks to Unicode.\n- An immutable string is inherently more efficient when resizing is not required, because clones do not need to be implemented by making a new dynamic memory allocation and copying the data.\n- The small string optimization can take advantage of the fact that dynamic arrays are represented as 3 words to store 23 bytes (with a 64-bit address space) in-place, avoiding a small memory allocation in many cases and somewhat improving data locality. The cost is increased code size and lots of extra branches.\n- The small string optimization really only makes sense for mutable strings, because immutability makes allocations on clones unnecessary.\n\n@steveklabnik: I don't think there's much of a technical trade-off here. Unicode ruins mutable strings beyond the string builder use case, which is what `String` is. The small vector optimization only makes sense when the vector is mutable, so while it's compelling for many vector use cases the niche with strings is pretty small. Even string builders that are almost always small are going to take a big hit from the extra SSO branches.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70110337/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70111728",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70111728",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70111728,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTExNzI4",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T16:19:48Z",
    "updated_at": "2015-01-15T16:19:53Z",
    "body": "Oh and `Box<str>` as a way to drop one word from `String` for long-term storage wouldn't work if it used SSO. However, that has very a dubious value. It makes a lot more sense for applications to prefer using task-local immutable strings for efficiency, as long as they don't need (frequent) appends.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70111728/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70112763",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70112763",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70112763,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTEyNzYz",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T16:25:30Z",
    "updated_at": "2015-01-15T16:25:52Z",
    "body": "@pepp-cz: It used to be called `StrBuf` but `String` is a nicer name. It's likely that immutable strings are more common in an application but there are lots of other nice names available (`Text`, for one).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70112763/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70131368",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70131368",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70131368,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTMxMzY4",
    "user": {
      "login": "LukasKalbertodt",
      "id": 7419664,
      "node_id": "MDQ6VXNlcjc0MTk2NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7419664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukasKalbertodt",
      "html_url": "https://github.com/LukasKalbertodt",
      "followers_url": "https://api.github.com/users/LukasKalbertodt/followers",
      "following_url": "https://api.github.com/users/LukasKalbertodt/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukasKalbertodt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukasKalbertodt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukasKalbertodt/subscriptions",
      "organizations_url": "https://api.github.com/users/LukasKalbertodt/orgs",
      "repos_url": "https://api.github.com/users/LukasKalbertodt/repos",
      "events_url": "https://api.github.com/users/LukasKalbertodt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukasKalbertodt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T18:04:24Z",
    "updated_at": "2015-01-15T18:14:23Z",
    "body": ">  I'd just prefer that we stick to the technical side of things without getting all nasty. It really squashes discussion.\n\nYou are right and I am sorry, but I was a little bit shocked that @thestinger whose profile gave me the impression that he is a experienced Rust developer (professional) called my argumentation bullshit. Let's forget about that...\n\n> A summary of the facts from the discussion: [...]\n\nI agree with 1-3. I don't understand the last one though. Sure: It makes allocations on clones unnecessary but we still have to allocate once to create the string. And like Andrei Alexandrescu said: \"No work is less work than some work\". I think there are enough situations in which you want SSO for immutable strings. What about a huge vector of forum usernames (mostly < 23 bytes)? I know... it's a strange example but still.\n\nIt's important to remember that most users of a language are no experts in either the language nor the theory of UTF8 strings (string theory if you like :P). And (IMO) most users that use the default String type don't care about `as_mut_vec` or SSO at all. To decide which implementation is better as default implementation we would need to spend a lot of time testing and benchmarking that. Removing `as_mut_string` gives us the opportunity to delay this decision. If we keep that method and it turns out that SSO indeed doesn't make sense in most cases, everything is fine. But if it turns out that SSO becomes even more important in the future, Rust's default string type is unable to use it. And that would be sad.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70131368/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70134989",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70134989",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70134989,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTM0OTg5",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T18:26:31Z",
    "updated_at": "2015-01-15T18:26:59Z",
    "body": "@LukasKalbertodt\n\n> What about a huge vector of forum usernames (mostly < 23 bytes)? I know... it's a strange example but still.\n\nIt's not strange, a lot of strings are normal human words or word combinations.\nAs an especially biased example, these days I write a lot of text processing scripts where the _most_ of strings are words or bigrams, which would perfectly fit into 23 byte buffer.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70134989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70139467",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70139467",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70139467,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTM5NDY3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T18:52:30Z",
    "updated_at": "2015-01-15T18:52:30Z",
    "body": "> You are right and I am sorry, but I was a little bit shocked that @thestinger whose profile gave me the impression that he is a experienced Rust developer (professional) called my argumentation bullshit. \n\nIt was. You started hand waving about some future optimization that no one can think of today, which could be used to justify removing _anything_ if it was considered a valid argument.\n\n> It makes allocations on clones unnecessary but we still have to allocate once to create the string. And like Andrei Alexandrescu said: \"No work is less work than some work\". I think there are enough situations in which you want SSO for immutable strings. \n\n`String` is not an immutable string. It's not a good design to use if the strings aren't being mutated. It may or may not make sense to use SSO for immutable strings but it has little to do with `String`.\n\n> Removing as_mut_string gives us the opportunity to delay this decision. \n\nNo it doesn't. Again, it's not the only method derived from the underlying implementation.\n\n> To decide which implementation is better as default implementation we would need to spend a lot of time testing and benchmarking that.\n\nIt's pretty clear that it slows down the cases that string builders (`String`) are actually designed for. I have already implemented and measured it. It slows down pushes by nearly 50% for vectors.\n\n> Removing as_mut_string gives us the opportunity to delay this decision. If we keep that method and it turns out that SSO indeed doesn't make sense in most cases, everything is fine. But if it turns out that SSO becomes even more important in the future, Rust's default string type is unable to use it. And that would be sad.\n\nRemoving these method**s** hurts performance by forcing copies. You haven't shown that we get anything in return for hurting performance by crippling the API. The `String` type is not a \"default string type\", it's a mutable string builder. The language has string literals, but it has no idea that `String` even exists. It's _entirely_ implemented in the libraries without any privileged support in the language.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70139467/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70163644",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70163644",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70163644,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTYzNjQ0",
    "user": {
      "login": "mzabaluev",
      "id": 1198919,
      "node_id": "MDQ6VXNlcjExOTg5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1198919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzabaluev",
      "html_url": "https://github.com/mzabaluev",
      "followers_url": "https://api.github.com/users/mzabaluev/followers",
      "following_url": "https://api.github.com/users/mzabaluev/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzabaluev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzabaluev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzabaluev/subscriptions",
      "organizations_url": "https://api.github.com/users/mzabaluev/orgs",
      "repos_url": "https://api.github.com/users/mzabaluev/repos",
      "events_url": "https://api.github.com/users/mzabaluev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzabaluev/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T21:19:05Z",
    "updated_at": "2015-01-15T21:19:05Z",
    "body": "@thestinger Unfortunately `String` and `Vec` are _also_ the go-to types for an owned (not necessarily mutable) string and vector, respectively. There is `Cow` infrastructure pointing their way, and so on. Boxed DSTs would be an alternative, but as far as I know that doesn't work.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70163644/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70165066",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70165066",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70165066,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTY1MDY2",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T21:27:56Z",
    "updated_at": "2015-01-15T21:27:56Z",
    "body": "> Boxed DSTs would be an alternative, but as far as I know that doesn't work.\n\nIt works fine, but those are not great types to use for immutable data either.\n\n> Unfortunately String and Vec are also the go-to types for an owned (not necessarily mutable) string and vector, respectively.\n\nLack of knowledge and missing features in the standard libraries doesn't make these appropriate types for this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70165066/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70176552",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70176552",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70176552,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTc2NTUy",
    "user": {
      "login": "mzabaluev",
      "id": 1198919,
      "node_id": "MDQ6VXNlcjExOTg5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1198919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzabaluev",
      "html_url": "https://github.com/mzabaluev",
      "followers_url": "https://api.github.com/users/mzabaluev/followers",
      "following_url": "https://api.github.com/users/mzabaluev/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzabaluev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzabaluev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzabaluev/subscriptions",
      "organizations_url": "https://api.github.com/users/mzabaluev/orgs",
      "repos_url": "https://api.github.com/users/mzabaluev/repos",
      "events_url": "https://api.github.com/users/mzabaluev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzabaluev/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T22:41:14Z",
    "updated_at": "2015-01-15T22:41:14Z",
    "body": "So, the title of this issue might as well be \"Mixed intents on usage of `String` prevent small string optimization for a common use case\".\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70176552/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70180919",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70180919",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70180919,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTgwOTE5",
    "user": {
      "login": "comex",
      "id": 47517,
      "node_id": "MDQ6VXNlcjQ3NTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/comex",
      "html_url": "https://github.com/comex",
      "followers_url": "https://api.github.com/users/comex/followers",
      "following_url": "https://api.github.com/users/comex/following{/other_user}",
      "gists_url": "https://api.github.com/users/comex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/comex/subscriptions",
      "organizations_url": "https://api.github.com/users/comex/orgs",
      "repos_url": "https://api.github.com/users/comex/repos",
      "events_url": "https://api.github.com/users/comex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/comex/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T23:13:31Z",
    "updated_at": "2015-01-15T23:15:31Z",
    "body": "@thestinger When StrBuf was renamed to String, I remember someone arguing that there was not much point carefully distinguishing immutable and mutable strings, because the capacity field was not that much overhead; and now that it is renamed, it is quite hopeless to expect most people to use something else for general strings (which are usually not mutated - c.f. the decision of most high level languages to make strings immutable by default).\n\nAlso, if `Box<str>` works, that is news to me; \n\n```\nhelp.rs:4:59: 4:68 error: the trait `core::iter::FromIterator<char>` is not implemented for the type `Box<str>`\nhelp.rs:4     let bs: Box<str> = ['a', 'b', 'c'].iter().map(|&x| x).collect();\n```\n\nTherefore (to say this as neutrally as possible), the way the current 1.0 API is designed, any future optimizations that help immutable strings but hurt mutable strings are likely to speed up most programs in practice.\n\n(I would argue that immutable use not being 'appropriate' per implementation design or whatever is pretty irrelevant if people will be strongly encouraged to use them as such anyway.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70180919/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70182269",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70182269",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70182269,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTgyMjY5",
    "user": {
      "login": "mzabaluev",
      "id": 1198919,
      "node_id": "MDQ6VXNlcjExOTg5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1198919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzabaluev",
      "html_url": "https://github.com/mzabaluev",
      "followers_url": "https://api.github.com/users/mzabaluev/followers",
      "following_url": "https://api.github.com/users/mzabaluev/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzabaluev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzabaluev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzabaluev/subscriptions",
      "organizations_url": "https://api.github.com/users/mzabaluev/orgs",
      "repos_url": "https://api.github.com/users/mzabaluev/repos",
      "events_url": "https://api.github.com/users/mzabaluev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzabaluev/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T23:24:43Z",
    "updated_at": "2015-01-15T23:34:57Z",
    "body": "@thestinger And I'm not buying the argument that a string builder would not benefit from SSO in all usage scenarios, either.\n\nThe performance analysis that brought up the whole thing into being seems to indicate that there is any number of places where strings are built out of frequently small sources. If you use an insert-optimized, always allocating builder in these cases, you have already lost the main benefit of SSO.\nAs `std` probably shouldn't offer a wild variety of micro-optimized string types, the question is of preference and trade-offs: in the place of the go-to mutable string type, do we want a string builder for fast inserts, or a more balanced container that may not, however, be ideal for higher-volume applications? Note that the latter might be unhappy with the flat backing vector, either.\n\nIt appears that all major C++ standard library implementations nowadays use SSO for the bog standard string type, `std::string`. Because people, call them ignorant as you want, use it to build any kind of dynamic strings, and those strings often end up small enough to fit in 23 characters. For high-volume applications there is rope and other non-standard solutions.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70182269/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70182583",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70182583",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70182583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTgyNTgz",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T23:27:21Z",
    "updated_at": "2015-01-15T23:27:21Z",
    "body": "> When StrBuf was renamed to String, I remember someone arguing that there was not much point carefully distinguishing immutable and mutable strings, because the capacity field was not that much overhead; and now that it is renamed.\n\n`Box<str>` is not any more immutable than `&mut str`, but in practice there are no useful mutable operations to perform without the ability to resize due to Unicode.\n\n> now that it is renamed, it is quite hopeless to expect most people to use something else for general strings (which are usually not mutated - c.f. the decision of most high level languages to make strings immutable by default).\n\nI don't see how renaming it is connected to a not yet existent immutable string type.\n\n> Therefore (to say this as neutrally as possible), the way the current 1.0 API is designed, any future optimizations that help immutable strings but hurt mutable strings are likely to speed up most programs in practice.\n\nI seriously doubt that, and you've shown no evidence of it.\n\n> Also, if Box<str> works, that is news to me;\n\nIt does work fine, just as `Box<[T]>` does. It doesn't have an implementation of that trait. The `Box<[T]>` type does have allocation/copy-free conversions to and from `Vec<T>` and it can and should be added for `Box<str>` <-> `String` too.\n\n> Therefore (to say this as neutrally as possible), the way the current 1.0 API is designed, any future optimizations that help immutable strings but hurt mutable strings are likely to speed up most programs in practice.\n\nUh, `String` is a mutable string builder. That is the purpose of the type. Hurting the performance of the one thing it exists to do would be idiotic. More claims about performance from people who haven't done any measuring / profiling too, nice.\n\n> (I would argue that immutable use not being 'appropriate' per implementation design or whatever is pretty irrelevant if people will be strongly encouraged to use them as such anyway.)\n\nSo then fix the real problem, the lack of proper immutable string support. It seems you have a problem with the name so you want to go out of your way to ruin the type.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70182583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70183843",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70183843",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70183843,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTgzODQz",
    "user": {
      "login": "LukasKalbertodt",
      "id": 7419664,
      "node_id": "MDQ6VXNlcjc0MTk2NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7419664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LukasKalbertodt",
      "html_url": "https://github.com/LukasKalbertodt",
      "followers_url": "https://api.github.com/users/LukasKalbertodt/followers",
      "following_url": "https://api.github.com/users/LukasKalbertodt/following{/other_user}",
      "gists_url": "https://api.github.com/users/LukasKalbertodt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LukasKalbertodt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LukasKalbertodt/subscriptions",
      "organizations_url": "https://api.github.com/users/LukasKalbertodt/orgs",
      "repos_url": "https://api.github.com/users/LukasKalbertodt/repos",
      "events_url": "https://api.github.com/users/LukasKalbertodt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LukasKalbertodt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T23:37:34Z",
    "updated_at": "2015-01-15T23:37:50Z",
    "body": "@thestinger \n\n> I have already implemented and measured it. It slows down pushes by nearly 50% for vectors.\n> [...]\n> More claims about performance from people who haven't done any measuring / profiling too, nice.\n\nPlease tell us more about your measurements then. We need a little bit more information and data to understand this measurement. It should be pretty clear that this measurement is highly dependent on your test data. If you are just pushing 1000 byte strings, it's obvious that SSO would be a bad idea. So yeah: It would be interesting if you'd provide more information.\n\nAlso: I guess measuring the performance for small and larger strings is one thing... But knowing what kind of strings are mostly used in \"the real world\"... is another important thing.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70183843/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70184332",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70184332",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70184332,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTg0MzMy",
    "user": {
      "login": "comex",
      "id": 47517,
      "node_id": "MDQ6VXNlcjQ3NTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/comex",
      "html_url": "https://github.com/comex",
      "followers_url": "https://api.github.com/users/comex/followers",
      "following_url": "https://api.github.com/users/comex/following{/other_user}",
      "gists_url": "https://api.github.com/users/comex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/comex/subscriptions",
      "organizations_url": "https://api.github.com/users/comex/orgs",
      "repos_url": "https://api.github.com/users/comex/repos",
      "events_url": "https://api.github.com/users/comex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/comex/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T23:41:49Z",
    "updated_at": "2015-01-15T23:43:56Z",
    "body": "> I don't see how renaming it is connected to a not yet existent immutable string type.\n\nIt is connected because everyone is going to use a type named `String` for what they use similarly named types in every other language for, which usually includes a lot of immutable strings.  (Without appropriate trait implementations for `Box<str>` [or `Rc<str>` even], most will likely do this even if they are aware of the issue.  And in any case, for casual use Rust already has two 'string types', `&str` and `String`, so adding a third is somewhat confusing.)\n\n> Uh, `String` is a mutable string builder. That is the purpose of the type. Hurting the performance of the one thing it exists to do would be idiotic. More claims about performance from people who haven't done any measuring / profiling too, nice.\n\nYou have done microbenchmarks, which are useful, but not the macrobenchmarks which would be needed to resolve the question; and of course the results of such benchmarks would depend on the precise choices of representation for and amount of microoptimization done on the type in question, which would take quite a bit of time.  Thankfully, I am in support merely of future proofing the design (a future decision in any case could take advantage of a number of large real-world Rust applications hopefully greater than two).\n\n> So then fix the real problem, the lack of proper immutable string support. It seems you have a problem with the name so you want to go out of your way to ruin the type.\n\nI humbly suggest that, as names and API designs stand, the best approach might be to view it the other way around: that if, in the future, SSO or other optimizations to `String` make the mutable case significantly suboptimal (yes, 50% sounds rather worse than suboptimal, but without more details I'm not convinced your benchmark is representative of real world use cases), a separate type should be created for faster string building, rather than creating a new type for immutable strings.  Or at least that the decision of whether to do this does not need to be made now, before all the data is available (since the optimizations in question have not even been written yet, and the impact of removing this one method is so low).  Of course, in the meantime, since you are advocating library-based approaches in general, you could always write your own 'StrVec' type.\n\nedit: also, if you want absolute highest performance from a type, building UTF-8 validation into it by default sounds like a bad idea to me... YMMV\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70184332/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70185012",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70185012",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70185012,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTg1MDEy",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T23:47:41Z",
    "updated_at": "2015-01-15T23:47:41Z",
    "body": ">  And I'm not buying the argument that a string builder would not benefit from SSO in all usage scenarios, either.\n\nIt slows down mutation and other operations like slicing by adding branches. It doesn't matter if you buy it or not, that's how things are. Strings as large as 3 pointers are not uncommon so it fills the code with branches that are prone to being mispredicted, which is awful.\n\n> The performance analysis that brought up the whole thing into being seems to indicate that there is any number of places where strings are built out of frequently small sources. \n\nIn every case, branches would be added. In every case, conversions to and from `Box<str>` would be crippled. In every case, conversions to and from the type it is intended to be a UTF-8 wrapper for (`Vec<u8>`) would be crippled. The allocations / reallocations are dwarfed by the other work in nearly every case, because that's how the types are designed - they amortize the cost. I don't think you realize how cheap small allocations are. Branch misses are much worse, and the cost of large copies dwarfs anything else in most programs - especially `rustc`.\n\n> If you use an insert-optimized, always allocating builder in these cases, you have already lost the main benefit of SSO.\n\nThat's what `String` is for, it's a string builder type.\n\n> As std probably shouldn't offer a wild variety of micro-optimized string classes, the question is of preference and trade-offs: in the place of the go-to mutable string type, do we want a string builder for fast inserts, or a more balanced container that may not, however, be ideal for higher-volume applications? Note that the latter might be unhappy with the flat backing vector, either.\n\nSSO is not more balanced. It bloats the code and hurts performance in most cases. Here's the thing: I have done extensive measuring / profiling / statistics in regards to this and gave up on my original plan to implement SSO for the good old `~str` type while you're just making up bullshit as you go. It obviously slows down read operations too because you're adding branches to all of them...\n\n> It appears that all major C++ standard library implementations nowadays use SSO for the bog standard string type, std::string. \n\nFor the nth time, `std::string` has very little to with strings in Rust. It is a mutable vector of _arbitrary_ bytes terminated by `\\0`. It pays the cost of having plenty of bloat to maintain the `\\0` at the end and has no other real distinctions from the vector type. Some major implementations (not all as you incorrectly claim) use the small string optimization and a major part of the rationale is because it doesn't make sense to provide the same type twice (`std::vector<T>`, `std::basic_string<T>`).\n\nIn C++, the copy constructor calls are also implicit. It doesn't offer an efficient `Rc<str>` equivalent without double indirection either, although Rust can do better than it already does.\n\n> Because people, call them ignorant as you want, use it to build any kind of dynamic strings, and those strings often end up small enough to fit in 23 characters. For high-volume applications there is rope and other non-standard solutions.\n\nSlowing down every operation via branches to speed up construction doesn't seem like a good trade-off for most applications. Cloning strings is essentially free because most strings are immutable and cloning will just be a reference count. Poorly written applications aren't the case that's optimized for by Rust.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70185012/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70186347",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70186347",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70186347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTg2MzQ3",
    "user": {
      "login": "comex",
      "id": 47517,
      "node_id": "MDQ6VXNlcjQ3NTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/comex",
      "html_url": "https://github.com/comex",
      "followers_url": "https://api.github.com/users/comex/followers",
      "following_url": "https://api.github.com/users/comex/following{/other_user}",
      "gists_url": "https://api.github.com/users/comex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/comex/subscriptions",
      "organizations_url": "https://api.github.com/users/comex/orgs",
      "repos_url": "https://api.github.com/users/comex/repos",
      "events_url": "https://api.github.com/users/comex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/comex/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T23:59:40Z",
    "updated_at": "2015-01-15T23:59:40Z",
    "body": "> SSO is not more balanced. It bloats the code and hurts performance in most cases. Here's the thing: I have done extensive measuring / profiling / statistics in regards to this and gave up on my original plan to implement SSO for the good old `~str` type while you're just making up bullshit as you go. It obviously slows down read operations too because you're adding branches to all of them...\n\nThere doesn't actually have to be a branch.  Conditional move should be doable... and there are other tricks.  Which perhaps you have already tried, per your extensive measuring / profiling - but these decisions are basically wagers.  To hear vague references to profiling on an old version of Rust increases my personal believed probability that SSO is a bad idea, but not enough that it would be worth making non-future-proof decisions at such an early stage, when the alternative is to temporarily sacrifice _one method_ that is basically unnecessary in most cases, since you can still convert to `Vec<u8>` by value without copies \u2013 hardly crippling the API!\n\n(You say that other methods implicitly depend on there being a `Vec<u8>` inside `String`, but I do not understand what you mean.  Please elaborate?)\n\nThis issue is not a decision about whether or not to use SSO.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70186347/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70186402",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70186402",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70186402,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTg2NDAy",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-16T00:00:11Z",
    "updated_at": "2015-01-16T00:02:18Z",
    "body": "> It is connected because everyone is going to use a type named String for what they use similarly named types in every other language for, which usually includes a lot of immutable strings. (Without appropriate trait implementations for Box<str> [or Rc<str> even], most will likely do this even if they are aware of the issue. And in any case, for casual use Rust already has two 'string types', &str and String, so adding a third is somewhat confusing.)\n\nThe string slice type is `str`. Rust users will already know how `&T`, `Box<T>`, `Rc<T>` and `Arc<T>` works separate from any usage of strings. Missing trait implementations are issues that need to fixed, but most of it is already dealt with. The `Box<[T]>` incarnation of slices is already fully usable via allocation/copy-free conversions to and from `Vec<T>` and the same thing will be provided for `String`. The `Box<str>` type is not an immutable string though and does not offer the performance advantages of one, as I already pointed out above.\n\n> You have done microbenchmarks, which are useful, but not the macrobenchmarks which would be needed to resolve the question; and of course the results of such benchmarks would depend on the precise choices of representation for and amount of microoptimization done on the type in question, which would take quite a bit of time. Thankfully, I am in support merely of future proofing the design (a future decision in any case could take advantage of a number of large real-world Rust applications hopefully greater than two).\n\nYes, I have done macro-benchmarks. I have measured the impact on both the Rust compiler and Servo of various allocator optimizations / tradeoffs and various string / vector implementations. Crippling the type by forcing allocation/copying in cases that are current free of allocation/copying is not \"future proofing\", it would simply be misguided and poor API design.\n\nAs I've already pointed out several times, migrating in between different vector / string types is one of the most trivial sweeping changes you can make. The LLVM project does it regularly, because they have widespread usage of small strings and vectors and need to carefully identify when it makes sense to use them. It causes significant code bloat and hurts the performance of the non-copying / non-creation methods in essentially every case.\n\nThe vast majority of code is relatively cold code, and it should be optimized for size rather than raw performance. With this in mind, it would make absolutely no sense to pervasively use the small vector optimization.\n\n> I humbly suggest that, as names and API designs stand, the best approach might be to view it the other way around: that if, in the future, SSO or other optimizations to String make the mutable case significantly suboptimal (yes, 50% sounds rather worse than suboptimal, but without more details I'm not convinced your benchmark is representative of real world use cases), a separate type should be created for faster string building, rather than creating a new type for immutable strings. Or at least that the decision of whether to do this does not need to be made now, before all the data is available (since the optimizations in question have not even been written yet, and the impact of removing this one method is so low). Of course, in the meantime, since you are advocating library-based approaches in general, you could always write your own 'StrVec' type.\n\nThe small vector optimization hurts the performance of every operation other than construction and cloning in every case. It hurts slicing performance, it hurts fetching the length, it hurts bounds checking performance and so on. It adds branches to these operations, and they are not trivially predictable ones. It also significantly bloats the code size.\n\n You're the one proposing that the status quo should be changed by crippling the type, so the burden of proof is on you to demonstrate that it's a good idea.\n\nI guess I need to restate for what seems like the 10th time that the `as_mut_vec` method is **certainly** not the only one derived from the underlying representation being `Vec<u8>`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70186402/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70186561",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70186561",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70186561,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTg2NTYx",
    "user": {
      "login": "comex",
      "id": 47517,
      "node_id": "MDQ6VXNlcjQ3NTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/comex",
      "html_url": "https://github.com/comex",
      "followers_url": "https://api.github.com/users/comex/followers",
      "following_url": "https://api.github.com/users/comex/following{/other_user}",
      "gists_url": "https://api.github.com/users/comex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/comex/subscriptions",
      "organizations_url": "https://api.github.com/users/comex/orgs",
      "repos_url": "https://api.github.com/users/comex/repos",
      "events_url": "https://api.github.com/users/comex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/comex/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-16T00:01:53Z",
    "updated_at": "2015-01-16T00:01:59Z",
    "body": "(Not to imply that thestinger should have read what I wrote a few seconds ago, but just to keep the conversation in order, I asked in the last post for clarification on what these other methods from the last paragraph are.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70186561/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70187660",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70187660",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70187660,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTg3NjYw",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-16T00:12:36Z",
    "updated_at": "2015-01-16T00:14:47Z",
    "body": "> There doesn't actually have to be a branch. Conditional move should be doable... and there are other tricks. Which perhaps you have already tried, per your extensive measuring / profiling - but these decisions are basically wagers. To hear vague references to profiling on an old version of Rust increases my personal believed probability that SSO is a bad idea, but not enough that it would be worth making non-future-proof decisions at such an early stage, when the alternative is to temporarily sacrifice one method that is basically unnecessary in most cases, since you can still convert to Vec<u8> by value without copies \u2013 hardly crippling the API!\n\nA conditional move isn't enough without a whole bunch of extra bloat / hacks (at least for most of the operations) and isn't even an option everywhere. The more hacks like small vector optimization that are used, the more the code is bloated - hurting caching and branch prediction. It's better to have smaller code in nearly every case because few cases are directly in the hot inner loops.\n\nThe sacrifice is more than one method. It introduces asymmetry into what should be a simple system where `Box<str>` and `Box<[T]>` are the owned slice types, with `String` and `Vec<T>` having free (assuming no extra capacity needs to be dropped) conversions to and from them. It means an end to reliable cheap conversions between `String` and `Vec<u8>` too, along with introducing a lot of pain for FFI.\n\nThere isn't a performance argument for doing it. Small strings really only belong in carefully chosen hot code because they're just plain bloated. Storing 11 or 23 bytes inline isn't enough to justify it at all. The cases where they're great almost always want to add a bunch of padding to store far more inline, considering that they're paying the price of branches and code bloat for it. This is how it's done in LLVM, where they're fairly widely used, but aren't the majority of vectors / strings.\n\n> This issue is not a decision about whether or not to use SSO.\n\nIt's not a decision about anything because it's RFC material, not issue tracker material. The discussion here is a waste of time beyond developing points to copy-paste into an RFC discussion.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70187660/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70188269",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70188269",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70188269,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTg4MjY5",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-16T00:18:31Z",
    "updated_at": "2015-01-16T00:18:31Z",
    "body": "It's very clean and _useful_ to have UTF-8 wrappers around general purpose vector types. There simply isn't a valid reason to provide a string without exposing the underlying vector type. It would be a far inferior API and would bring Rust a lot closer to the mess of C++ collections (`char[n]`, `std::array<char, N>`, `std::unique_ptr<char[]>`, `std::vector<char>`, `std::basic_string<char>` - all totally incompatible for no reason at all, and forcing many inefficiencies too - not a design with much to learn from), whether the excuse is \"future proofing\" or not.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70188269/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70188411",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70188411",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70188411,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTg4NDEx",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-16T00:20:16Z",
    "updated_at": "2015-01-16T00:20:16Z",
    "body": "Ultimately, it would be nice if the implementation of the string type could be extracted into a reusable facade to wrap around anything able to expose the random-access / contiguous vector API. Turning it into more than just a vector wrapper is stepping away from that kind of clean, reusable design.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70188411/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70188851",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70188851",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70188851,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTg4ODUx",
    "user": {
      "login": "comex",
      "id": 47517,
      "node_id": "MDQ6VXNlcjQ3NTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/comex",
      "html_url": "https://github.com/comex",
      "followers_url": "https://api.github.com/users/comex/followers",
      "following_url": "https://api.github.com/users/comex/following{/other_user}",
      "gists_url": "https://api.github.com/users/comex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/comex/subscriptions",
      "organizations_url": "https://api.github.com/users/comex/orgs",
      "repos_url": "https://api.github.com/users/comex/repos",
      "events_url": "https://api.github.com/users/comex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/comex/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-16T00:25:06Z",
    "updated_at": "2015-01-16T00:25:06Z",
    "body": "Can you please answer my question about the other methods (inherently) derived from the underlying representation being `Vec<u8>`?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70188851/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70189211",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70189211",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70189211,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTg5MjEx",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-16T00:28:43Z",
    "updated_at": "2015-01-16T00:28:43Z",
    "body": "The allocation/copy-free conversion methods to/from `Vec<u8>` and soon `Box<str>` (just as `Vec<T>` provides those for `Box<[T]>`), _among others_.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70189211/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70189396",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70189396",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70189396,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTg5Mzk2",
    "user": {
      "login": "comex",
      "id": 47517,
      "node_id": "MDQ6VXNlcjQ3NTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/comex",
      "html_url": "https://github.com/comex",
      "followers_url": "https://api.github.com/users/comex/followers",
      "following_url": "https://api.github.com/users/comex/following{/other_user}",
      "gists_url": "https://api.github.com/users/comex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/comex/subscriptions",
      "organizations_url": "https://api.github.com/users/comex/orgs",
      "repos_url": "https://api.github.com/users/comex/repos",
      "events_url": "https://api.github.com/users/comex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/comex/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-16T00:30:48Z",
    "updated_at": "2015-01-16T00:30:48Z",
    "body": "If the string is not small, then this is possible regardless of the actual underlying type.  If it is small - who said these had to be allocation free?  You were just saying how cheap allocations were... and the copy for a small string would be all of 23 bytes (at maximum).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70189396/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70190870",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70190870",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70190870,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTkwODcw",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-16T00:47:05Z",
    "updated_at": "2015-01-16T00:47:37Z",
    "body": "As @steveklabnik was alluding to, the Rust community greatly values respectful, technical discussion and recognizes that most decisions involve tradeoffs between competing concerns. Dismissive or aggressive argumentation makes forums unwelcoming, rather than fostering meaningful exchange or insight. I don\u2019t feel that this comment thread has lived up to the high standards we strive for.\n\n---\n\nThat said, in general the issue tracker is not a good place to discuss design changes, in part because of its relatively low visibility to the broader community. \n\nAt this point, I don\u2019t think that continued discussion on this github issue is likely to be productive. For the time being, I'd like to ask that discussion move to the [discuss thread](http://discuss.rust-lang.org/t/small-string-optimization-remove-as-mut-vec/1320/13) on the topic. I\u2019ll help draw more attention to it, to ensure that it is seen more widely by the community. \n\nFinally, when previous design decisions have turned out not to address specific concerns, we\u2019ve tried hard to revisit them. While there is limited time for such changes before 1.0, it might be worth trying to lay out the concerns in an [RFC](https://github.com/rust-lang/rfcs) to foster a more in-depth, community-wide discussion. Hopefully such an RFC would draw from the conclusions from the discuss thread. I\u2019d be glad to help with this process as well.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70190870/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70192731",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70192731",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70192731,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTkyNzMx",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-16T01:06:11Z",
    "updated_at": "2015-01-16T01:06:11Z",
    "body": "> As @steveklabnik was alluding to, the Rust community greatly values respectful, technical discussion and recognizes that most decisions involve tradeoffs between competing concerns. Dismissive or aggressive argumentation makes forums unwelcoming, rather than fostering meaningful exchange or insight. I don\u2019t feel that this comment thread has lived up to the high standards we strive for.\n\nPiling on dismissive, condescending stuff like this isn't raising the level of discussion at all.\n\n> I'd like to ask that discussion move to the discuss thread on the topic. I\u2019ll help draw more attention to it, to ensure that it is seen more widely by the community.\n\nI don't participate there because it's even more awful than the discussion system here. I think I've said everything that I plan on saying anyway, and I'll just refine the arguments and make a more coherent case against this if an RFC is actually filed. This is just a practice game.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70192731/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70216819",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70216819",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70216819,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjE2ODE5",
    "user": {
      "login": "mzabaluev",
      "id": 1198919,
      "node_id": "MDQ6VXNlcjExOTg5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1198919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzabaluev",
      "html_url": "https://github.com/mzabaluev",
      "followers_url": "https://api.github.com/users/mzabaluev/followers",
      "following_url": "https://api.github.com/users/mzabaluev/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzabaluev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzabaluev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzabaluev/subscriptions",
      "organizations_url": "https://api.github.com/users/mzabaluev/orgs",
      "repos_url": "https://api.github.com/users/mzabaluev/repos",
      "events_url": "https://api.github.com/users/mzabaluev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzabaluev/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-16T07:20:17Z",
    "updated_at": "2015-01-17T08:24:39Z",
    "body": "To cut back on unnecessary argument, perhaps it would be good to narrow down the issue:\n- `as_mut_vec` is the only method on `String` so far identified that necessarily exposes `Vec`, going above the general assumption of an amortized-linear buffer as the backing store.\n- Uses of this method, rare as they are, can be easily replaced with moving transformations: `into_bytes` to change the facade to `Vec`, and `String::from_utf8_unchecked` to change it back to `String` when done mutating the vector. If this is found happening on a hot path (and it has to be hot for such modification to have significant impact), consider taking such transformations outside of the hot path or using a specialized solution.\n- The presence of this method limits options for future optimization on `String` if needs for such optimization, specific to usage patterns of mutable strings, are discovered in later applications of Rust which is going to be much more extensive and varied than they are now. SSO is not necessarily the only possible optimization.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70216819/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70218161",
    "html_url": "https://github.com/rust-lang/rust/issues/20198#issuecomment-70218161",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20198",
    "id": 70218161,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjE4MTYx",
    "user": {
      "login": "mzabaluev",
      "id": 1198919,
      "node_id": "MDQ6VXNlcjExOTg5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1198919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzabaluev",
      "html_url": "https://github.com/mzabaluev",
      "followers_url": "https://api.github.com/users/mzabaluev/followers",
      "following_url": "https://api.github.com/users/mzabaluev/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzabaluev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzabaluev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzabaluev/subscriptions",
      "organizations_url": "https://api.github.com/users/mzabaluev/orgs",
      "repos_url": "https://api.github.com/users/mzabaluev/repos",
      "events_url": "https://api.github.com/users/mzabaluev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzabaluev/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-16T07:40:08Z",
    "updated_at": "2015-01-16T08:55:19Z",
    "body": "It's suprising that indexing/slicing is brought up. Safe indexing/slicing cannot be fast on `String`, or `&str` for that matter, because it has to assert UTF-8 sequence boundaries, so it has to have lots-o-branches regardless. Though many of those branches will be well-predicted and should be statically hotpath-optimized, doing such operations on a massive scale is not conductive to good performance.\n\nJust about the only safe way to read strings that's worth optimizing is sequential iteration. For ultra-fast access to raw bytes, transform into `Vec`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70218161/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
