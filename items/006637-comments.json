[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18187399",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18187399",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18187399,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MTg3Mzk5",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-21T03:45:02Z",
    "updated_at": "2013-05-21T03:45:02Z",
    "body": "I am interested in that! But comparing stage0 and stage1 is not much to go on: they differ by whatever has happened since the last snapshot. If you (or someone -- I can try to set up a run if nobody else wants to) bisect from the previous snapshot-registering commit to this point, you should find the culprit.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18187399/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18205365",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18205365",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18205365,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MjA1MzY1",
    "user": {
      "login": "bstrie",
      "id": 865233,
      "node_id": "MDQ6VXNlcjg2NTIzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bstrie",
      "html_url": "https://github.com/bstrie",
      "followers_url": "https://api.github.com/users/bstrie/followers",
      "following_url": "https://api.github.com/users/bstrie/following{/other_user}",
      "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions",
      "organizations_url": "https://api.github.com/users/bstrie/orgs",
      "repos_url": "https://api.github.com/users/bstrie/repos",
      "events_url": "https://api.github.com/users/bstrie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bstrie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-21T12:27:12Z",
    "updated_at": "2013-05-21T12:27:12Z",
    "body": "Does this have to do with the fact that stage0 is built with optimizations, but stage1 isn't?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18205365/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18324012",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18324012",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18324012,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MzI0MDEy",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-23T05:30:49Z",
    "updated_at": "2013-05-23T05:30:49Z",
    "body": "No, both versions are opt.\n\nI bisected down to either of 1daaf785ab26f801d5003ad057f590d0886a5203 or 030c666cc1bc4830eac2f845b114f7c514f6e201 : the latter won't build and the former is definitely bad. Doesn't matter, they're both the same pull req.\n\nPaging @alexcrichton ?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18324012/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18324051",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18324051",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18324051,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MzI0MDUx",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-23T05:32:28Z",
    "updated_at": "2013-05-23T05:32:28Z",
    "body": "@graydon It seems unlikely that either of those commits could explain all of it, though? I noticed huge slowdowns in, for example, typeck and trans, and those commits only appear to affect lint. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18324051/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18324606",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18324606",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18324606,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MzI0NjA2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-23T05:52:37Z",
    "updated_at": "2013-05-23T05:52:37Z",
    "body": "I'd be surprised if either of those were the root cause of this. @catamorphism is right in that those should only affect linting predominately.\n\nI can try to investigate this though to make sure that it's not those commits.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18324606/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18324687",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18324687",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18324687,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MzI0Njg3",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-23T05:56:33Z",
    "updated_at": "2013-05-23T05:56:33Z",
    "body": "@catamorphism This is about a memory regression, not a speed regression. It only takes one typo to cause a cycle-leak. I'm not _certain_ it's this rev, but it's the one bisect found. As in: the rev before uses 1.8gb to build stage1, this rev uses 2.5gb. I'm not sure what else to say about that; I'll try re-confirming or slicing the history graph differently tomorrow. Gotta do some laundry now.\n\nI'm not aware of this being directly connected to a speed regression. Can you find a pick out a time when the build was fast, for you, so that I can bisect _that_?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18324687/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18325678",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18325678",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18325678,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MzI1Njc4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-23T06:22:44Z",
    "updated_at": "2013-05-23T06:22:44Z",
    "body": "@graydon one thing that would be useful if possible would be differences in the heap graphs over time. If I knew in what stage of the build the memory started deviating largely from what it was before, I could probably see what the problem was.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18325678/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18325768",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18325768",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18325768,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MzI1NzY4",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-23T06:26:23Z",
    "updated_at": "2013-05-23T06:26:23Z",
    "body": "@alexcrichton massif can produce those graphs. If you like I can make a pair of them tomorrow; if you have it installed locally it will work the same for you or me.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18325768/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18325802",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18325802",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18325802,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MzI1ODAy",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-23T06:27:40Z",
    "updated_at": "2013-05-23T06:27:40Z",
    "body": "that is, `valgrind --tool=massif <command>` followed by `ms_print massif.out.<pid>`\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18325802/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18328049",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18328049",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18328049,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MzI4MDQ5",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-23T07:41:40Z",
    "updated_at": "2013-05-23T07:41:40Z",
    "body": "I ran out of time tonight, but I did manage to get one dump of the bad version of the compiler (https://gist.github.com/alexcrichton/5633336). I was having trouble making either heads or tails of the data...\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18328049/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18346727",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18346727",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18346727,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MzQ2NzI3",
    "user": {
      "login": "jdm",
      "id": 27658,
      "node_id": "MDQ6VXNlcjI3NjU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/27658?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jdm",
      "html_url": "https://github.com/jdm",
      "followers_url": "https://api.github.com/users/jdm/followers",
      "following_url": "https://api.github.com/users/jdm/following{/other_user}",
      "gists_url": "https://api.github.com/users/jdm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jdm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jdm/subscriptions",
      "organizations_url": "https://api.github.com/users/jdm/orgs",
      "repos_url": "https://api.github.com/users/jdm/repos",
      "events_url": "https://api.github.com/users/jdm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jdm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-23T14:27:58Z",
    "updated_at": "2013-05-23T14:27:58Z",
    "body": "From profile 55, which showed 2,283,406,322B of memory usage, we see:\n- 22% under middle::astencode::decode_side_tables\n- 12% under llvm::User::operator new, all from various places regarding trans calling into LLVM\n- 8% from various LLVM things related to modules passes\n- 7% under things that massif thinks are too small to care about profiling, so we should change some default values there\n- 7% from the LLVM slab allocator for symbols\n- 4% under fold::**extensions**::meth_18501::fold_expr\n- 3% from the ast_map hashmap from map_expr\n- 3% under fold::noop_fold_path\n\netc. The massif docs have a nice clear explanation of how to read the results. The peak snapshot is usually the most interesting one to analyze.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18346727/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18347477",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18347477",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18347477,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MzQ3NDc3",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-23T14:38:44Z",
    "updated_at": "2013-05-23T14:38:44Z",
    "body": "When reading, it's important to differentiate local and exchange heap allocations. They are separately reported.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18347477/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18363490",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18363490",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18363490,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MzYzNDkw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-23T18:43:54Z",
    "updated_at": "2013-05-23T18:43:54Z",
    "body": "OK, so here's the result of some more investigation.\n\n[Before this patch:](https://gist.github.com/alexcrichton/5638407) (rev 918bfa7)\n\n```\n\n    GB\n1.748^                                                                       :\n     |                                      @@                            @:#:\n     |                                    @@@                            :@:#:\n     |                                    @@@                        :::::@:#:\n     |                                    @@@                    :::@:::::@:#:\n     |                                    @@@               :::@@:::@:::::@:#:\n     |                                  ::@@@         :::::::: @ :::@:::::@:#:\n     |                                :@: @@@     :::::: : ::: @ :::@:::::@:#:\n     |                             @@::@: @@@ :::@: :::: : ::: @ :::@:::::@:#:\n     |                             @ ::@: @@@ :::@: :::: : ::: @ :::@:::::@:#:\n     |                            @@ ::@: @@@ :::@: :::: : ::: @ :::@:::::@:#:\n     |                            @@ ::@: @@@ :::@: :::: : ::: @ :::@:::::@:#:\n     |                    ::@:@@::@@ ::@: @@@ :::@: :::: : ::: @ :::@:::::@:#:\n     |          ::::::@:::::@:@ ::@@ ::@: @@@ :::@: :::: : ::: @ :::@:::::@:#:\n     |    ::::::: ::::@:: ::@:@ ::@@ ::@: @@@ :::@: :::: : ::: @ :::@:::::@:#:\n     |    : ::::: ::::@:: ::@:@ ::@@ ::@: @@@ :::@: :::: : ::: @ :::@:::::@:#:\n     |    : ::::: ::::@:: ::@:@ ::@@ ::@: @@@ :::@: :::: : ::: @ :::@:::::@:#:\n     |   @: ::::: ::::@:: ::@:@ ::@@ ::@: @@@ :::@: :::: : ::: @ :::@:::::@:#:\n     |   @: ::::: ::::@:: ::@:@ ::@@ ::@: @@@ :::@: :::: : ::: @ :::@:::::@:#:\n     |  @@: ::::: ::::@:: ::@:@ ::@@ ::@: @@@ :::@: :::: : ::: @ :::@:::::@:#:\n   0 +----------------------------------------------------------------------->Gi\n     0                                                                   172.6\n```\n\n[After this patch](https://gist.github.com/alexcrichton/5633336) (rev 1daaf785ab26f801d5003ad057f590d0886a5203)\n\n```\n    GB\n2.359^                                                                       :\n     |                                                                    @:#:\n     |                                                                @:@:@:#:\n     |                                                          ::::@@@:@:@:#:\n     |                                                    ::::::: : @@@:@:@:#:\n     |                                             @@@@::@::: ::: : @@@:@:@:#:\n     |                                     @@:::@@@@ @ : @::: ::: : @@@:@:@:#:\n     |                                    @@ : :@@ @ @ : @::: ::: : @@@:@:@:#:\n     |                                    @@ : :@@ @ @ : @::: ::: : @@@:@:@:#:\n     |                                    @@ : :@@ @ @ : @::: ::: : @@@:@:@:#:\n     |                                @@@@@@ : :@@ @ @ : @::: ::: : @@@:@:@:#:\n     |                              @@@ @@@@ : :@@ @ @ : @::: ::: : @@@:@:@:#:\n     |                              @@@ @@@@ : :@@ @ @ : @::: ::: : @@@:@:@:#:\n     |                            ::@@@ @@@@ : :@@ @ @ : @::: ::: : @@@:@:@:#:\n     |                     :::::::: @@@ @@@@ : :@@ @ @ : @::: ::: : @@@:@:@:#:\n     |       :::::::@::@@::: ::: :: @@@ @@@@ : :@@ @ @ : @::: ::: : @@@:@:@:#:\n     |   @@:::: ::: @::@ ::: ::: :: @@@ @@@@ : :@@ @ @ : @::: ::: : @@@:@:@:#:\n     |   @@: :: ::: @::@ ::: ::: :: @@@ @@@@ : :@@ @ @ : @::: ::: : @@@:@:@:#:\n     |   @@: :: ::: @::@ ::: ::: :: @@@ @@@@ : :@@ @ @ : @::: ::: : @@@:@:@:#:\n     |   @@: :: ::: @::@ ::: ::: :: @@@ @@@@ : :@@ @ @ : @::: ::: : @@@:@:@:#:\n   0 +----------------------------------------------------------------------->Gi\n     0                                                                   172.8\n```\n\nCan you spot the difference? As it turns out, about 700MB was free'd in that drop in the before graph, which is the difference between the before and after. Of this, nearly all of it was from `smallintmap::insert` during `middle::astencode::decode_side_tables`. So, from what I can tell, this just means that something which is being decoded isn't being deallocated?\n\nI'm still having trouble understanding how this relates to the lint patch. This definitely didn't touch anything in trans, much less anything in ast encoding/decoding. Any ideas?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18363490/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18520111",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18520111",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18520111,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NTIwMTEx",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-28T01:21:38Z",
    "updated_at": "2013-05-28T01:21:38Z",
    "body": "Looking at your before/after logs, it looks like the sidetable decoding costs are present in both:\n\npre:\n\n```\n...\n#-----------\nsnapshot=32\n#-----------\ntime=99635562745\nmem_heap_B=1706284326\nmem_heap_extra_B=93736826\nmem_stacks_B=0\nheap_tree=detailed\nn7: 1706284326 (heap allocation functions) malloc/new/new[], --alloc-fns, etc.\n n1: 633714405 0x2E37219: rust_exchange_alloc::realloc(void*, unsigned long) (rust_exchange_alloc.cpp:32)\n  n1: 633714405 0x2E2D67C: vec_reserve_shared (rust_util.h:75)\n   n3: 633714405 0x1659D: vec::rustrt::vec_reserve_shared::_fd87ae5bf33686b::_07pre\n    n2: 536870960 0x1375924: smallintmap::__extensions__::insert_60798::_4ecd04f78c24ce::_07pre\n     n1: 536870960 0x1592486: middle::astencode::decode_side_tables::anon::expr_fn_79872\n      n1: 536870960 0x50C70D: ebml::reader::docs::_29cfc8699845a3a::_07pre\n       n1: 536870960 0xDA1A8F: middle::astencode::decode_inlined_item::_cd72efb8a779f80::_07pre\n        n1: 536870960 0xD9FC48: middle::trans::inline::maybe_instantiate_inline::anon::expr_fn_19981\n...\n```\n\npost:\n\n```\n--------------------------------------------------------------------------------\n  n        time(i)         total(B)   useful-heap(B) extra-heap(B)    stacks(B)\n--------------------------------------------------------------------------------\n 60 180,036,106,317    2,511,642,448    2,394,469,533   117,172,915            0\n 61 181,210,964,676    2,524,188,480    2,406,285,136   117,903,344            0\n95.33% (2,406,285,136B) (heap allocation functions) malloc/new/new[], --alloc-fns, etc.\n->24.66% (622,355,697B) 0x2E2D219: rust_exchange_alloc::realloc(void*, unsigned long) (rust_exchange_alloc.cpp:32)\n| ->24.66% (622,355,697B) 0x2E2367C: vec_reserve_shared (rust_util.h:75)\n|   ->24.66% (622,355,697B) 0x1659D: vec::rustrt::vec_reserve_shared::_bcc196118a2caa62::_07pre\n|     ->21.27% (536,870,960B) 0x1373874: smallintmap::__extensions__::insert_60769::_4ecd04f78c24ce::_07pre\n|     | ->21.27% (536,870,960B) 0x1588B36: middle::astencode::decode_side_tables::anon::expr_fn_80017\n|     | | ->21.27% (536,870,960B) 0x50B71D: ebml::reader::docs::_29cfc8699845a3a::_07pre\n|     | |   ->21.27% (536,870,960B) 0xDA053F: middle::astencode::decode_inlined_item::_2fc881d8e6edb7c7::_07pre\n\n```\n\nSo I don't think it's that (curious why the logs differ between runs though -- different ms_print binaries?)\nIt's very interesting to know we're spending so much on decoded ASTs. We should fix that! 600mb there is absurd enough on its own.\n\nAnyway, the \"drop off\" you see in the first graph but not the second is _supposed_ to be the place where we drop all pre-LLVM state we can. If you look in the `librustc/driver/driver.rs` you'll see something like:\n\n```\n    let (llmod, link_meta) = {\n    ...\n    }\n    ...\n    link::write::run_passes(sess, llmod, sess.opts.output_type, &outputs.obj_filename));\n```\n\nThe stuff in the block is supposed to get dropped, leaving only `llmod` and `link_meta` to pass to LLVM. This is not happening, so the result is we retain it too long.\n\nThis is what I expected was happening. As to why, I'd _guess_ we're making a new cycle that keeps everything alive. We don't have a tracing GC at this point (working on it!), so even one bad cycle will keep very large things alive-and-leaked until task death.\n\nI'll keep reading through the code and trying to find such a new cycle, but I'd bet that's what we're seeing. Any further hints from your knowledge of \"what the code does\" would be appreciated.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18520111/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18522190",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18522190",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18522190,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NTIyMTkw",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-28T02:52:37Z",
    "updated_at": "2013-05-28T02:52:37Z",
    "body": "Update: talked to @alexcrichton on IRC and it seems likely this is a cycle between the visitors and the lint context. Meanwhile I made a small patch (#6776) that removes the smallintmap pathology in decoding ASTs, saves 400mb.\n\nPlease keep looking on this one though!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18522190/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18534114",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18534114",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18534114,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NTM0MTE0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-28T06:57:44Z",
    "updated_at": "2013-05-28T06:57:44Z",
    "body": "Just confirmed this after 6264df5. The stage0 peak is around 2.2GB, and the stage1 peak is around 1.5GB\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18534114/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18551877",
    "html_url": "https://github.com/rust-lang/rust/issues/6637#issuecomment-18551877",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6637",
    "id": 18551877,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NTUxODc3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-28T13:56:54Z",
    "updated_at": "2013-05-28T13:56:54Z",
    "body": "Yay!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18551877/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
