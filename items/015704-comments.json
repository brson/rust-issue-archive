[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49127011",
    "html_url": "https://github.com/rust-lang/rust/pull/15704#issuecomment-49127011",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15704",
    "id": 49127011,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTI3MDEx",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-16T06:08:46Z",
    "updated_at": "2014-07-16T06:08:46Z",
    "body": "Is accepting concurrently an unfortunate side-effect or is it actually a desirable property? If it's not desired, did you consider an alternative design where you can create \"Closer\" objects that can shut down the acceptor without exposing concurrent acceptance?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49127011/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49173580",
    "html_url": "https://github.com/rust-lang/rust/pull/15704#issuecomment-49173580",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15704",
    "id": 49173580,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTczNTgw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-16T14:30:10Z",
    "updated_at": "2014-07-16T14:30:10Z",
    "body": "I would classify it akin to reading/writing concurrently like the other I/O primitives. An explicit design decision was made long ago to have these objects be clone-able and then have the `close_foo` methods instead of any of a number of other strategies. We could create separate closer objects, but I prefer consistency across all objects for now.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49173580/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49203127",
    "html_url": "https://github.com/rust-lang/rust/pull/15704#issuecomment-49203127",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15704",
    "id": 49203127,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MjAzMTI3",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-16T18:00:14Z",
    "updated_at": "2014-07-16T18:00:14Z",
    "body": "@alexcrichton I understand the potential use in concurrent reading/writing of other I/O primitives. I don't really understand if there is a benefit to concurrent accepting, and the way this PR is worded, it seemed reasonable to believe that concurrent accepting was the consequence of `clone`ing but was not actually desired.\n\nThat said, I don't actually have an objection to concurrent accepting. I just wanted to make sure that a simpler approach wouldn't solve the goal (of terminating an accept loop from another task) without so much support code. But if you'd prefer the consistency, or if there's actually a valid reason to want concurrent accepting, then by all means go ahead.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49203127/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49234753",
    "html_url": "https://github.com/rust-lang/rust/pull/15704#issuecomment-49234753",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15704",
    "id": 49234753,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MjM0NzUz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-16T22:10:54Z",
    "updated_at": "2014-07-16T22:10:54Z",
    "body": "Yes I personally prefer the consistency as it's very easy to understand `clone` as it's so prevalent everywhere else. The only real painful part of concurrent accepts was librustuv, but it ended up being nicely abstracted so it doesn't matter a whole lot.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49234753/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49546828",
    "html_url": "https://github.com/rust-lang/rust/pull/15704#issuecomment-49546828",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15704",
    "id": 49546828,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTQ2ODI4",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-20T13:48:00Z",
    "updated_at": "2014-07-20T13:53:49Z",
    "body": "At least on Linux you should use shutdown(SHUT_RD) to cancel accept() rather than an extra pipe fd.\n\nOn Windows, check whether AcceptEx and CancelIoEx work for this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49546828/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51728817",
    "html_url": "https://github.com/rust-lang/rust/pull/15704#issuecomment-51728817",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15704",
    "id": 51728817,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNzI4ODE3",
    "user": {
      "login": "npryce",
      "id": 56219,
      "node_id": "MDQ6VXNlcjU2MjE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/56219?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/npryce",
      "html_url": "https://github.com/npryce",
      "followers_url": "https://api.github.com/users/npryce/followers",
      "following_url": "https://api.github.com/users/npryce/following{/other_user}",
      "gists_url": "https://api.github.com/users/npryce/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/npryce/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/npryce/subscriptions",
      "organizations_url": "https://api.github.com/users/npryce/orgs",
      "repos_url": "https://api.github.com/users/npryce/repos",
      "events_url": "https://api.github.com/users/npryce/events{/privacy}",
      "received_events_url": "https://api.github.com/users/npryce/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-10T22:01:34Z",
    "updated_at": "2014-08-10T22:01:34Z",
    "body": "I've had to solve this issue as well, although in my case it was to gracefully stop a task doing interrupt-driven GPIO, rather than accepting TCP connections.  I solved it by defining an IoSelector struct, that acts rather like a channel select! statement but for I/O objects, and then selecting between the I/O object served by the task (TCP acceptor in your case, GPIO pins in mine) and another I/O object used to signal that the task should stop gracefully and release I/O resources.  On Linux, I implemented this for the native runtime, using the epoll syscall for the IoSelector and eventfd syscalls for the stop signal.  On other platforms, IoSelector could be implemented with select (unix) or WaitForMultipleObjects (win32) , and the stop signal with a pipe (unix) or event object (win32).\n\nCode here: http://github.com/npryce/rusty-pi\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51728817/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
