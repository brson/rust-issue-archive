[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47287158",
    "html_url": "https://github.com/rust-lang/rust/pull/15204#issuecomment-47287158",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15204",
    "id": 47287158,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3Mjg3MTU4",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-26T22:14:52Z",
    "updated_at": "2014-06-26T22:14:52Z",
    "body": "I agree that the rant about \"Trusting Rust\" is inappropriate. I also agree that delivering unsigned binaries over http is unfortunate.\n\nHowever, I think the problem of executing a partially-downloaded script can be solved without changing the ergonomics of running the script (i.e. by still allowing for piping directly to `sudo sh`). That can be done by taking the body of `rustup.sh` and wrapping it in a `main() {}` function, and then invoking that function at the bottom of the file. This way if the connection is interrupted before it finishes download the file, it won't actually execute any commands.\n\nTechnically speaking, there are various points in the file where a termination would in fact attempt to invoke a command, e.g. in any of the function definitions, terminating before the `()` would cause the function name to be invoked as a command, but it's unlikely that that would do anything.\n\nAnother suggestion might be to get rid of the `sudo sh` and have the script itself invoke `sudo`. That way a partial download won't even run anything with root permissions.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47287158/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47287284",
    "html_url": "https://github.com/rust-lang/rust/pull/15204#issuecomment-47287284",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15204",
    "id": 47287284,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3Mjg3Mjg0",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-26T22:16:10Z",
    "updated_at": "2014-06-26T22:16:10Z",
    "body": "Perhaps piping is actually the wrong approach. It could instead say\n\n``` sh\nscript=$(curl -s http://www.rust-lang.org/rustup.sh) && sudo sh -c \"$script\"\n```\n\nThis will avoid executing the script if `curl` returns with a non-zero exit code.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47287284/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47297643",
    "html_url": "https://github.com/rust-lang/rust/pull/15204#issuecomment-47297643",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15204",
    "id": 47297643,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3Mjk3NjQz",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-27T00:54:49Z",
    "updated_at": "2014-06-27T00:54:49Z",
    "body": "I would strongly prefer fixing Rustup rather than changing the instructions.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47297643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47316772",
    "html_url": "https://github.com/rust-lang/rust/pull/15204#issuecomment-47316772",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15204",
    "id": 47316772,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MzE2Nzcy",
    "user": {
      "login": "mcpherrinm",
      "id": 47425,
      "node_id": "MDQ6VXNlcjQ3NDI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/47425?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mcpherrinm",
      "html_url": "https://github.com/mcpherrinm",
      "followers_url": "https://api.github.com/users/mcpherrinm/followers",
      "following_url": "https://api.github.com/users/mcpherrinm/following{/other_user}",
      "gists_url": "https://api.github.com/users/mcpherrinm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mcpherrinm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mcpherrinm/subscriptions",
      "organizations_url": "https://api.github.com/users/mcpherrinm/orgs",
      "repos_url": "https://api.github.com/users/mcpherrinm/repos",
      "events_url": "https://api.github.com/users/mcpherrinm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mcpherrinm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-27T07:49:09Z",
    "updated_at": "2014-06-27T07:49:09Z",
    "body": "How would you propose changing rustup?  If it defaulted to installing per-user, I would still request this same change be made to the instructions, just without the `sudo` calls\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47316772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47323453",
    "html_url": "https://github.com/rust-lang/rust/pull/15204#issuecomment-47323453",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15204",
    "id": 47323453,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MzIzNDUz",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-27T09:15:43Z",
    "updated_at": "2014-06-27T09:15:43Z",
    "body": "There's two big concerns with Rustup, right now:\n1. `sudo`\n2. partial script execution\n\nThe first is fixible by modifying Rustup. The second... I can't even believe that that happens, though of course, lol computers. Do you have any more information on this actually happening?\n\nSecondarily, it seems that a fix for that problem was presented by @kballard : \" taking the body of rustup.sh and wrapping it in a main() {} function, and then invoking that function at the bottom of the file\". Would that address your concern?\n\nOther projects just pipe to `sh`. How do they solve this issue? Do they just ignore it?\n\nI'm a bit loathe to change the instructions, because a single step to install is so much nicer than 'two steps and then delete this file.' Especially if we can get away with just one.\n\nFinally, while you're right that you're installing a compiler, and so you have to trust us anyway, this argument _always_ comes up on every HN/reddit thread where someone suggests `curl | sh`. It's an attempt to acknowledge and head that off. It should stay.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47323453/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47326935",
    "html_url": "https://github.com/rust-lang/rust/pull/15204#issuecomment-47326935",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15204",
    "id": 47326935,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MzI2OTM1",
    "user": {
      "login": "mcpherrinm",
      "id": 47425,
      "node_id": "MDQ6VXNlcjQ3NDI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/47425?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mcpherrinm",
      "html_url": "https://github.com/mcpherrinm",
      "followers_url": "https://api.github.com/users/mcpherrinm/followers",
      "following_url": "https://api.github.com/users/mcpherrinm/following{/other_user}",
      "gists_url": "https://api.github.com/users/mcpherrinm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mcpherrinm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mcpherrinm/subscriptions",
      "organizations_url": "https://api.github.com/users/mcpherrinm/orgs",
      "repos_url": "https://api.github.com/users/mcpherrinm/repos",
      "events_url": "https://api.github.com/users/mcpherrinm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mcpherrinm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-27T09:57:56Z",
    "updated_at": "2014-06-27T10:03:06Z",
    "body": "> Do you have any more information on this actually happening?\n\nI've had it happen, and can somewhat reliably make it happen using a slow network connection that goes down for a few seconds in the middle of the script downloading.   (In this case, I deliberately throttled it, but no worse than what I get on my cell phone on caltrain...).  I tried to make an automated test case so you can try at home but it was a pain compared to just doing it manually.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47326935/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47509731",
    "html_url": "https://github.com/rust-lang/rust/pull/15204#issuecomment-47509731",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15204",
    "id": 47509731,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTA5NzMx",
    "user": {
      "login": "kyrias",
      "id": 2285387,
      "node_id": "MDQ6VXNlcjIyODUzODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2285387?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kyrias",
      "html_url": "https://github.com/kyrias",
      "followers_url": "https://api.github.com/users/kyrias/followers",
      "following_url": "https://api.github.com/users/kyrias/following{/other_user}",
      "gists_url": "https://api.github.com/users/kyrias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kyrias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kyrias/subscriptions",
      "organizations_url": "https://api.github.com/users/kyrias/orgs",
      "repos_url": "https://api.github.com/users/kyrias/repos",
      "events_url": "https://api.github.com/users/kyrias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kyrias/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-30T09:06:17Z",
    "updated_at": "2014-06-30T09:06:17Z",
    "body": "> I'm a bit loathe to change the instructions, because a single step to install is so much nicer than 'two steps and then delete this file.' Especially if we can get away with just one.\n\nThat sort of the point of @kballard's suggestion, it saves the script to a variable instead of a file, giving you the same benefit as a file but without having to care about deleting it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47509731/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/50546960",
    "html_url": "https://github.com/rust-lang/rust/pull/15204#issuecomment-50546960",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15204",
    "id": 50546960,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTQ2OTYw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-29T22:15:17Z",
    "updated_at": "2014-07-29T22:15:17Z",
    "body": "Closing due to inactivity\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/50546960/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
