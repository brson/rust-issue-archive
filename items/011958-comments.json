[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33845964",
    "html_url": "https://github.com/rust-lang/rust/issues/11958#issuecomment-33845964",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11958",
    "id": 33845964,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODQ1OTY0",
    "user": {
      "login": "nickdesaulniers",
      "id": 1823839,
      "node_id": "MDQ6VXNlcjE4MjM4Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1823839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nickdesaulniers",
      "html_url": "https://github.com/nickdesaulniers",
      "followers_url": "https://api.github.com/users/nickdesaulniers/followers",
      "following_url": "https://api.github.com/users/nickdesaulniers/following{/other_user}",
      "gists_url": "https://api.github.com/users/nickdesaulniers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nickdesaulniers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nickdesaulniers/subscriptions",
      "organizations_url": "https://api.github.com/users/nickdesaulniers/orgs",
      "repos_url": "https://api.github.com/users/nickdesaulniers/repos",
      "events_url": "https://api.github.com/users/nickdesaulniers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nickdesaulniers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-31T21:50:00Z",
    "updated_at": "2014-01-31T21:50:00Z",
    "body": "When I pull the shadowing out of the test, I'm seeing:\n`cannot assign to immutable captured outer variable in a heap closure` which I think comes from [loan checking within the borrow checker](https://github.com/mozilla/rust/blob/15ba0c310a2bfe2ab69670d0d87529a29d527973/src/librustc/middle/borrowck/check_loans.rs#L356).  Not certain how that string is built up.  cc @nikomatsakis @alexcrichton \n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33845964/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33870947",
    "html_url": "https://github.com/rust-lang/rust/issues/11958#issuecomment-33870947",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11958",
    "id": 33870947,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODcwOTQ3",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-01T13:00:57Z",
    "updated_at": "2014-02-01T13:00:57Z",
    "body": "Ultimately the cause of this error is the categorization created by `mem_categorization`, which categorizes copied upvars as immutable.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33870947/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33985016",
    "html_url": "https://github.com/rust-lang/rust/issues/11958#issuecomment-33985016",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11958",
    "id": 33985016,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzOTg1MDE2",
    "user": {
      "login": "nickdesaulniers",
      "id": 1823839,
      "node_id": "MDQ6VXNlcjE4MjM4Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1823839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nickdesaulniers",
      "html_url": "https://github.com/nickdesaulniers",
      "followers_url": "https://api.github.com/users/nickdesaulniers/followers",
      "following_url": "https://api.github.com/users/nickdesaulniers/following{/other_user}",
      "gists_url": "https://api.github.com/users/nickdesaulniers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nickdesaulniers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nickdesaulniers/subscriptions",
      "organizations_url": "https://api.github.com/users/nickdesaulniers/orgs",
      "repos_url": "https://api.github.com/users/nickdesaulniers/repos",
      "events_url": "https://api.github.com/users/nickdesaulniers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nickdesaulniers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-03T18:37:38Z",
    "updated_at": "2014-02-03T18:38:01Z",
    "body": "@nikomatsakis , ok trying to understand this.  I'm guessing I'm getting [warmer](https://github.com/mozilla/rust/blob/ec4b456b26cd019b8b2a4a8a3f9fa9841904bf09/src/librustc/middle/mem_categorization.rs#L508)?  Not sure what a \"[one shot stack closure](https://github.com/mozilla/rust/blob/ec4b456b26cd019b8b2a4a8a3f9fa9841904bf09/src/librustc/middle/mem_categorization.rs#L518)\" is.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33985016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33993394",
    "html_url": "https://github.com/rust-lang/rust/issues/11958#issuecomment-33993394",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11958",
    "id": 33993394,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzOTkzMzk0",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-03T19:58:25Z",
    "updated_at": "2014-02-03T19:58:25Z",
    "body": "@nickdesaulniers the relevant line is [here](https://github.com/mozilla/rust/blob/ec4b456b26cd019b8b2a4a8a3f9fa9841904bf09/src/librustc/middle/mem_categorization.rs#L544). A \"one shot stack closure\" is often called a \"once closure\" -- not currently really supported, though some code exists -- it's a closure that only executes once, but which is stored on the stack. In any case, a `proc` type is (somewhat hackishly) represented as a closure with a `OwnedSigil` right now in the code.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33993394/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33998676",
    "html_url": "https://github.com/rust-lang/rust/issues/11958#issuecomment-33998676",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11958",
    "id": 33998676,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzOTk4Njc2",
    "user": {
      "login": "nickdesaulniers",
      "id": 1823839,
      "node_id": "MDQ6VXNlcjE4MjM4Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1823839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nickdesaulniers",
      "html_url": "https://github.com/nickdesaulniers",
      "followers_url": "https://api.github.com/users/nickdesaulniers/followers",
      "following_url": "https://api.github.com/users/nickdesaulniers/following{/other_user}",
      "gists_url": "https://api.github.com/users/nickdesaulniers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nickdesaulniers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nickdesaulniers/subscriptions",
      "organizations_url": "https://api.github.com/users/nickdesaulniers/orgs",
      "repos_url": "https://api.github.com/users/nickdesaulniers/repos",
      "events_url": "https://api.github.com/users/nickdesaulniers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nickdesaulniers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-03T20:53:44Z",
    "updated_at": "2014-02-03T20:53:44Z",
    "body": "@nikomatsakis , I had changed the mutbl member to be `upvar_cmt.mutbl.inherit()` (moving the definition of upvar_cmt out above the conditional).  Should I instead make the `var_is_refd` true for OwnedSigil cases?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33998676/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35098237",
    "html_url": "https://github.com/rust-lang/rust/issues/11958#issuecomment-35098237",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11958",
    "id": 35098237,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDk4MjM3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-14T16:19:13Z",
    "updated_at": "2014-02-14T16:19:13Z",
    "body": "As @huonw noted in #12260, this code seems like it should work\n\n``` rust\nfn main() {\n    let mut x = 1;\n    proc() { x = 2 };\n}\n```\n\n```\nproc-mut.rs:3:14: 3:15 error: cannot assign to immutable captured outer variable in a heap closure\nproc-mut.rs:3     proc() { x = 2 };\n                           ^\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35098237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
