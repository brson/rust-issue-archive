[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/116409492",
    "html_url": "https://github.com/rust-lang/rust/issues/26591#issuecomment-116409492",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26591",
    "id": 116409492,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNjQwOTQ5Mg==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-29T03:19:49Z",
    "updated_at": "2015-06-29T03:19:49Z",
    "body": "Since build scripts link to their dependencies dynamically instead of statically, this means that statics have to be properly marked with dllimport and dllexport, unlike for functions where those attributes can be left off with only a minor performance hit. MinGW's `ld`patches up those missing references for us which is why the MinGW version works, but MSVC's `link` does not.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/116409492/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/116439275",
    "html_url": "https://github.com/rust-lang/rust/issues/26591#issuecomment-116439275",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26591",
    "id": 116439275,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNjQzOTI3NQ==",
    "user": {
      "login": "tomaka",
      "id": 1412254,
      "node_id": "MDQ6VXNlcjE0MTIyNTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1412254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tomaka",
      "html_url": "https://github.com/tomaka",
      "followers_url": "https://api.github.com/users/tomaka/followers",
      "following_url": "https://api.github.com/users/tomaka/following{/other_user}",
      "gists_url": "https://api.github.com/users/tomaka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tomaka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tomaka/subscriptions",
      "organizations_url": "https://api.github.com/users/tomaka/orgs",
      "repos_url": "https://api.github.com/users/tomaka/repos",
      "events_url": "https://api.github.com/users/tomaka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tomaka/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-29T05:24:07Z",
    "updated_at": "2015-06-29T05:24:07Z",
    "body": "cc @alexcrichton I guess\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/116439275/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/117134955",
    "html_url": "https://github.com/rust-lang/rust/issues/26591#issuecomment-117134955",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26591",
    "id": 117134955,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNzEzNDk1NQ==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-30T11:29:50Z",
    "updated_at": "2015-06-30T11:29:50Z",
    "body": "See also https://github.com/rust-lang/rust/issues/7196\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/117134955/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/117437943",
    "html_url": "https://github.com/rust-lang/rust/issues/26591#issuecomment-117437943",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26591",
    "id": 117437943,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNzQzNzk0Mw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-01T05:18:26Z",
    "updated_at": "2015-07-01T05:18:26Z",
    "body": "We currently do place dllimport on statics (and dllexport), but I haven't had a chance to investigate this thoroughly yet. I'm surprised that this doesn't work when the bootstrap works.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/117437943/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/118266990",
    "html_url": "https://github.com/rust-lang/rust/issues/26591#issuecomment-118266990",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26591",
    "id": 118266990,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExODI2Njk5MA==",
    "user": {
      "login": "tomaka",
      "id": 1412254,
      "node_id": "MDQ6VXNlcjE0MTIyNTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1412254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tomaka",
      "html_url": "https://github.com/tomaka",
      "followers_url": "https://api.github.com/users/tomaka/followers",
      "following_url": "https://api.github.com/users/tomaka/following{/other_user}",
      "gists_url": "https://api.github.com/users/tomaka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tomaka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tomaka/subscriptions",
      "organizations_url": "https://api.github.com/users/tomaka/orgs",
      "repos_url": "https://api.github.com/users/tomaka/repos",
      "events_url": "https://api.github.com/users/tomaka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tomaka/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-03T07:49:43Z",
    "updated_at": "2015-07-03T07:49:43Z",
    "body": "I'm going to replace `static` by `const` in the khronos_api crate, so the test case above will no longer produce an error.\n\nHowever any static + build script combination seems to trigger this problem, so it should be easy to reproduce.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/118266990/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/118508246",
    "html_url": "https://github.com/rust-lang/rust/issues/26591#issuecomment-118508246",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26591",
    "id": 118508246,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExODUwODI0Ng==",
    "user": {
      "login": "tomaka",
      "id": 1412254,
      "node_id": "MDQ6VXNlcjE0MTIyNTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1412254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tomaka",
      "html_url": "https://github.com/tomaka",
      "followers_url": "https://api.github.com/users/tomaka/followers",
      "following_url": "https://api.github.com/users/tomaka/following{/other_user}",
      "gists_url": "https://api.github.com/users/tomaka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tomaka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tomaka/subscriptions",
      "organizations_url": "https://api.github.com/users/tomaka/orgs",
      "repos_url": "https://api.github.com/users/tomaka/repos",
      "events_url": "https://api.github.com/users/tomaka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tomaka/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-04T12:22:47Z",
    "updated_at": "2015-07-04T12:23:45Z",
    "body": "I have the same problem with my `pocket-resources` crate: https://github.com/tomaka/pocket-resources\nWhen compiling the demo, I get the following:\n\n```\nerror: linking with `link.exe` failed: exit code: 1120\nnote: \"link.exe\" \"/NOLOGO\" \"/NXCOMPAT\" \"/LIBPATH:D:\\Logiciels\\Rust\\bin\\rustlib\\x\n86_64-pc-windows-msvc\\lib\" \"D:\\Projets\\pocket-resources\\demo\\target\\debug\\build\\\ntest-0957aa1c8f24e32d\\build_script_build.o\" \"/OUT:D:\\Projets\\pocket-resources\\de\nmo\\target\\debug\\build\\test-0957aa1c8f24e32d\\build_script_build.exe\" \"/OPT:REF,IC\nF\" \"D:\\Projets\\pocket-resources\\demo\\target\\debug\\deps\\libpocket_resources-3f7a5\n7389309468a.rlib\" \"/LIBPATH:D:\\Logiciels\\Rust\\bin\\rustlib\\x86_64-pc-windows-msvc\n\\lib\" \"std-74fa456f.lib\" \"/LIBPATH:D:\\Projets\\pocket-resources\\demo\\target\\debug\n\" \"/LIBPATH:D:\\Projets\\pocket-resources\\demo\\target\\debug\\deps\" \"/LIBPATH:D:\\Log\niciels\\Rust\\bin\\rustlib\\x86_64-pc-windows-msvc\\lib\" \"/LIBPATH:D:\\Projets\\pocket-\nresources\\demo\\.rust\\bin\\x86_64-pc-windows-msvc\" \"/LIBPATH:D:\\Projets\\pocket-res\nources\\demo\\bin\\x86_64-pc-windows-msvc\" \"/LIBPATH:C:\\Users\\pierre\\.rust\\bin\\x86_\n64-pc-windows-msvc\" \"ws2_32.lib\" \"userenv.lib\" \"advapi32.lib\" \"kernel32.lib\" \"sh\nell32.lib\" \"msvcrt.lib\" \"compiler-rt.lib\"\nnote:    Creating library D:\\Projets\\pocket-resources\\demo\\target\\debug\\build\\te\nst-0957aa1c8f24e32d\\build_script_build.lib and object D:\\Projets\\pocket-resource\ns\\demo\\target\\debug\\build\\test-0957aa1c8f24e32d\\build_script_build.exp\nbuild_script_build.o : error LNK2019: unresolved external symbol __imp__ZN7packa\nge15__STATIC_FMTSTR20h1f831eca1e1942baPaaE referenced in function _ZN7package20h\n5585954171191908666E\nbuild_script_build.o : error LNK2019: unresolved external symbol __imp__ZN7packa\nge15__STATIC_FMTSTR20h1f831eca1e1942bafbaE referenced in function _ZN7package20h\n5585954171191908666E\nbuild_script_build.o : error LNK2019: unresolved external symbol __imp__ZN7packa\nge15__STATIC_FMTSTR20h1f831eca1e1942baEbaE referenced in function _ZN7package20h\n5585954171191908666E\nbuild_script_build.o : error LNK2019: unresolved external symbol __imp__ZN7packa\nge15__STATIC_FMTSTR20h1f831eca1e1942ba0faE referenced in function _ZN7package20h\n5585954171191908666E\nbuild_script_build.o : error LNK2019: unresolved external symbol __imp__ZN7packa\nge16__STATIC_FMTARGS20h2be310a11ffe1ab8HgaE referenced in function _ZN7package20\nh5585954171191908666E\nbuild_script_build.o : error LNK2019: unresolved external symbol __imp__ZN7packa\nge15__STATIC_FMTSTR20h1f831eca1e1942ba8caE referenced in function _ZN7package12c\nlosure.1694E\nbuild_script_build.o : error LNK2019: unresolved external symbol __imp__ZN7packa\nge15__STATIC_FMTSTR20h1f831eca1e1942baPdaE referenced in function _ZN7package12c\nlosure.1694E\nbuild_script_build.o : error LNK2019: unresolved external symbol __imp__ZN7packa\nge15__STATIC_FMTSTR20h1f831eca1e1942baweaE referenced in function _ZN7package12c\nlosure.1694E\nbuild_script_build.o : error LNK2019: unresolved external symbol __imp__ZN21path\n_to_resource_name10_FILE_LINE20h548d6e231b25c39c1maE referenced in function _ZN2\n1path_to_resource_name12closure.2253E\nbuild_script_build.o : error LNK2019: unresolved external symbol __imp__ZN21path\n_to_resource_name10_FILE_LINE20h548d6e231b25c39cnnaE referenced in function _ZN2\n1path_to_resource_name12closure.2253E\nbuild_script_build.o : error LNK2019: unresolved external symbol __imp__ZN21path\n_to_resource_name10_FILE_LINE20h548d6e231b25c39cJnaE referenced in function _ZN2\n1path_to_resource_name12closure.2253E\nbuild_script_build.o : error LNK2019: unresolved external symbol __imp__ZN21path\n_to_resource_name10_FILE_LINE20h548d6e231b25c39c5naE referenced in function _ZN2\n1path_to_resource_name12closure.2253E\nbuild_script_build.o : error LNK2019: unresolved external symbol __imp__ZN20path\n_to_enum_variant15__STATIC_FMTSTR20h1f831eca1e1942barlaE referenced in function\n_ZN20path_to_enum_variant12closure.2484E\nD:\\Projets\\pocket-resources\\demo\\target\\debug\\build\\test-0957aa1c8f24e32d\\build_\nscript_build.exe : fatal error LNK1120: 13 unresolved externals\n```\n\nBut interesingly if I add `crate-type = [\"dylib\"]` in pocket_resources' Cargo.toml it works.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/118508246/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/118509240",
    "html_url": "https://github.com/rust-lang/rust/issues/26591#issuecomment-118509240",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26591",
    "id": 118509240,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExODUwOTI0MA==",
    "user": {
      "login": "tomaka",
      "id": 1412254,
      "node_id": "MDQ6VXNlcjE0MTIyNTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1412254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tomaka",
      "html_url": "https://github.com/tomaka",
      "followers_url": "https://api.github.com/users/tomaka/followers",
      "following_url": "https://api.github.com/users/tomaka/following{/other_user}",
      "gists_url": "https://api.github.com/users/tomaka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tomaka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tomaka/subscriptions",
      "organizations_url": "https://api.github.com/users/tomaka/orgs",
      "repos_url": "https://api.github.com/users/tomaka/repos",
      "events_url": "https://api.github.com/users/tomaka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tomaka/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-04T12:40:51Z",
    "updated_at": "2015-07-04T12:45:05Z",
    "body": "Apparently using `panic!` seems to store the line number and filename in a static.\n\nFor each usage of `panic!`, `assert!` or similar you get either a warning `LNK4217` or an error. Warnings seem much more frequent than errors.\n\nI tried to compile a complex project (outside of a build script), and I got hundreds and hundreds of warnings, and 9 errors.\n\nIn my opinion this wasn't detected earlier because warnings from the linker are simply ignored.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/118509240/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/122987670",
    "html_url": "https://github.com/rust-lang/rust/issues/26591#issuecomment-122987670",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26591",
    "id": 122987670,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMjk4NzY3MA==",
    "user": {
      "login": "Mr-Byte",
      "id": 2321210,
      "node_id": "MDQ6VXNlcjIzMjEyMTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2321210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mr-Byte",
      "html_url": "https://github.com/Mr-Byte",
      "followers_url": "https://api.github.com/users/Mr-Byte/followers",
      "following_url": "https://api.github.com/users/Mr-Byte/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mr-Byte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mr-Byte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mr-Byte/subscriptions",
      "organizations_url": "https://api.github.com/users/Mr-Byte/orgs",
      "repos_url": "https://api.github.com/users/Mr-Byte/repos",
      "events_url": "https://api.github.com/users/Mr-Byte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mr-Byte/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-20T18:55:15Z",
    "updated_at": "2015-07-20T18:55:15Z",
    "body": "I'm having a similar issue during linking using `cargo test`.  In my main crate I have a static `INTERFACE_ID` which is not public, but instead local to the module.  A reference is then returned to this via an `iid()` static method.  Calling `cargo build` will succeed, but when calling `cargo test` which links against the main crate, very similar linking errors occur.  I'm not sure why this would occur, since the static is not public, other than the fact that the `iid()` method is inline.  I'll attempt turning off inlining to see what results I get.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/122987670/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123513631",
    "html_url": "https://github.com/rust-lang/rust/issues/26591#issuecomment-123513631",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26591",
    "id": 123513631,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzUxMzYzMQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-22T00:08:15Z",
    "updated_at": "2015-07-22T00:08:15Z",
    "body": "OK, I had some time to investigate this and I believe I know what's going on now. The fundamental problem here is https://github.com/rust-lang/rust/issues/7196 (we don't handle dllimport/dllexport properly). To recap, a constant `FOO`, when tagged with dllexport, is referenced through `__imp_FOO` instead of the normal path (I don't believe the symbol `FOO` is exposed from the dll). So our situation is:\n- An upstream rlib declares a `dllexport` static. This rlib then contains this object file, but apparently the crucial part is that the symbol table for the rlib **does not include the `__imp_` name**.\n- Our downstream executable references the upstream constant, tagging it as `dllimport`. This means that we generate a symbol reference to `__imp_FOO`\n- When linking these two objects together the linker is trying to find the symbol `__imp_FOO` but it never finds it because the symbol table for our first library didn't actually include that symbol. This is when the linker winds up generating an error.\n\nNow one question I had personally was \"why doesn't this break everything?!\" We have a huge test suite, most of which is passing on MSVC, and most of which references a static from the standard library (aka this exact situation). It turns out that if the linker already included the object file for another reason (e.g. it resolved another function) then it will detect that we're looking for `__imp_FOO` but found `FOO`, wiring the two up after issuing a warning.\n\nWhat this ends up meaning is that if any other symbol from our upstream library was used, then the linker error goes away. For example if you add `pub fn foo() {}` to the upstream library and then call it in the downstream library everything will link (with the linker issuing warnings).\n\nSo, to summary, there are a number of ways to work around this:\n- Make sure some other symbol in the library is referenced (to make sure the whole library is linked). This could just be a dummy function.\n- Make a dylib. The dllimport annotation is then actually correct!\n- Don't expose statics/constants in the public interface. Sidesteps the problem entirely.\n\nWe currently don't tag any functions with dllimport (only dllexport), so I'm currently exploring that route to see if it works for constants as well (which would fix this problem), but I vaguely remember it specifically not working before, so my hopes are not that high.\n\nOtherwise this is basically a dupe of https://github.com/rust-lang/rust/issues/7196 (correctly dealing with dllimport/dllexport), so I'm going to close this in favor of that.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123513631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123516378",
    "html_url": "https://github.com/rust-lang/rust/issues/26591#issuecomment-123516378",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26591",
    "id": 123516378,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzUxNjM3OA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-22T00:27:37Z",
    "updated_at": "2015-07-22T00:27:37Z",
    "body": "Ah yeah unfortunately not using dllimport didn't work. If you're importing a function from a dll and forget dllimport I think you take a small perf hit (e.g. one jump instruction) to link anyway, but if you're importing a constant from a dll and forget dllimport it just hits a link error.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123516378/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
