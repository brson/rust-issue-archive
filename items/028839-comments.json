[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145393587",
    "html_url": "https://github.com/rust-lang/rust/issues/28839#issuecomment-145393587",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28839",
    "id": 145393587,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NTM5MzU4Nw==",
    "user": {
      "login": "eefriedman",
      "id": 12769964,
      "node_id": "MDQ6VXNlcjEyNzY5OTY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/12769964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eefriedman",
      "html_url": "https://github.com/eefriedman",
      "followers_url": "https://api.github.com/users/eefriedman/followers",
      "following_url": "https://api.github.com/users/eefriedman/following{/other_user}",
      "gists_url": "https://api.github.com/users/eefriedman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eefriedman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eefriedman/subscriptions",
      "organizations_url": "https://api.github.com/users/eefriedman/orgs",
      "repos_url": "https://api.github.com/users/eefriedman/repos",
      "events_url": "https://api.github.com/users/eefriedman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eefriedman/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-04T22:23:45Z",
    "updated_at": "2015-10-04T22:43:10Z",
    "body": "The following works on both stable and nightly:\n\n``` rust\nuse std::ptr;\npub trait Foo { }\nstatic mut _foo: Option<&'static mut Foo> = None;\npub fn get_foo() -> &'static mut Foo {\n    unsafe {\n        match ptr::read(&_foo) {\n            Some(x) => x,\n            None => panic!(),\n        }\n    }\n}\n```\n\n~~The nightly-only error is a consequence of #28321: a borrow of an `&'static mut` pointer no longer has static lifetime.~~ Not sure this is true.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145393587/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145394899",
    "html_url": "https://github.com/rust-lang/rust/issues/28839#issuecomment-145394899",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28839",
    "id": 145394899,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NTM5NDg5OQ==",
    "user": {
      "login": "eefriedman",
      "id": 12769964,
      "node_id": "MDQ6VXNlcjEyNzY5OTY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/12769964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eefriedman",
      "html_url": "https://github.com/eefriedman",
      "followers_url": "https://api.github.com/users/eefriedman/followers",
      "following_url": "https://api.github.com/users/eefriedman/following{/other_user}",
      "gists_url": "https://api.github.com/users/eefriedman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eefriedman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eefriedman/subscriptions",
      "organizations_url": "https://api.github.com/users/eefriedman/orgs",
      "repos_url": "https://api.github.com/users/eefriedman/repos",
      "events_url": "https://api.github.com/users/eefriedman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eefriedman/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-04T22:32:26Z",
    "updated_at": "2015-10-04T22:32:26Z",
    "body": "Hmm... it looks like there's a bug here, though: the following, which should be equivalent to your original testcase, works:\n\n``` rust\npub trait Foo { }\n\nstatic mut _foo: Option<&'static mut Foo> = None;\n\npub fn get_foo() -> &'static mut Foo {\n    unsafe { match _foo {\n            Some(ref mut x) => &mut **x,\n            None => panic!(),\n    } }\n}\n\nfn main() {}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145394899/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145400910",
    "html_url": "https://github.com/rust-lang/rust/issues/28839#issuecomment-145400910",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28839",
    "id": 145400910,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NTQwMDkxMA==",
    "user": {
      "login": "Virtlink",
      "id": 647530,
      "node_id": "MDQ6VXNlcjY0NzUzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/647530?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Virtlink",
      "html_url": "https://github.com/Virtlink",
      "followers_url": "https://api.github.com/users/Virtlink/followers",
      "following_url": "https://api.github.com/users/Virtlink/following{/other_user}",
      "gists_url": "https://api.github.com/users/Virtlink/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Virtlink/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Virtlink/subscriptions",
      "organizations_url": "https://api.github.com/users/Virtlink/orgs",
      "repos_url": "https://api.github.com/users/Virtlink/repos",
      "events_url": "https://api.github.com/users/Virtlink/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Virtlink/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-04T23:25:09Z",
    "updated_at": "2015-10-04T23:25:27Z",
    "body": "@eefriedman Thanks, that works! I'm using your second suggestion now.\n\nI'm curious to know whether this is indeed a bug.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145400910/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145403162",
    "html_url": "https://github.com/rust-lang/rust/issues/28839#issuecomment-145403162",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28839",
    "id": 145403162,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NTQwMzE2Mg==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-04T23:48:01Z",
    "updated_at": "2015-10-04T23:48:01Z",
    "body": "@rust-lang/lang, is this a bug or not?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145403162/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145405338",
    "html_url": "https://github.com/rust-lang/rust/issues/28839#issuecomment-145405338",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28839",
    "id": 145405338,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NTQwNTMzOA==",
    "user": {
      "login": "eefriedman",
      "id": 12769964,
      "node_id": "MDQ6VXNlcjEyNzY5OTY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/12769964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eefriedman",
      "html_url": "https://github.com/eefriedman",
      "followers_url": "https://api.github.com/users/eefriedman/followers",
      "following_url": "https://api.github.com/users/eefriedman/following{/other_user}",
      "gists_url": "https://api.github.com/users/eefriedman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eefriedman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eefriedman/subscriptions",
      "organizations_url": "https://api.github.com/users/eefriedman/orgs",
      "repos_url": "https://api.github.com/users/eefriedman/repos",
      "events_url": "https://api.github.com/users/eefriedman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eefriedman/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-05T00:31:57Z",
    "updated_at": "2015-10-05T00:31:57Z",
    "body": "There's definitely something weird going on here, and I don't think it has anything to do with static lifetimes.  Another related testcase:\n\n``` rust\npub struct Foo;\n// Accepted on stable and nightly\npub fn get_foo<'a, 'b>(foo: &'a mut Option<&'b mut Foo>) -> &'a mut Foo {\n    match foo {\n        &mut Some(ref mut x) => *x,\n        &mut None => panic!(),\n    }\n}\n// Rejected on nightly, accepted on stable\npub fn get_foo2<'a>(foo: &'a mut Option<&'a mut Foo>) -> &'a mut Foo {\n    match foo {\n        &mut Some(ref mut x) => *x,\n        &mut None => panic!(),\n    }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145405338/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145413166",
    "html_url": "https://github.com/rust-lang/rust/issues/28839#issuecomment-145413166",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28839",
    "id": 145413166,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NTQxMzE2Ng==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-05T02:31:29Z",
    "updated_at": "2015-10-05T02:31:29Z",
    "body": "I'm not 100% sure what's going on. It seems to have to do with the coercion rules. I'm not aware that they changed recently, but I'll have to review the PRs. \n\ntriage: P-high (regression)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145413166/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145599515",
    "html_url": "https://github.com/rust-lang/rust/issues/28839#issuecomment-145599515",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28839",
    "id": 145599515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NTU5OTUxNQ==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-05T17:02:45Z",
    "updated_at": "2015-10-05T17:07:16Z",
    "body": "This works on 1.4 too, but is broken on 3e6d7243ae9749eff27fd320cb422e42291e79d4 - so something recent, but not too recent.\n\nOddly enough,\n\n``` Rust\npub fn get_foo2<'a>(foo: &'a mut Option<&'a mut Foo>) -> &'a mut Foo {\n    match foo {\n        &mut Some(ref mut x) => match x { x => *x },\n        &mut None => panic!(),\n    }\n}\n```\n\nworks.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145599515/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145611191",
    "html_url": "https://github.com/rust-lang/rust/issues/28839#issuecomment-145611191",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28839",
    "id": 145611191,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NTYxMTE5MQ==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-05T17:48:08Z",
    "updated_at": "2015-10-05T17:48:08Z",
    "body": "2be0d0ad924f9fd0162d31669b58bc39734e91d8 looks like the problem commit\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145611191/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145666928",
    "html_url": "https://github.com/rust-lang/rust/issues/28839#issuecomment-145666928",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28839",
    "id": 145666928,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NTY2NjkyOA==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-05T21:00:26Z",
    "updated_at": "2015-10-05T21:00:26Z",
    "body": "Hmm... Interesting. I guess we could revert that change while keeping the\ntest as trans should handle the no-op adjustment by now. I'll try that\ntomorrow.\nAm 05.10.2015 19:48 schrieb \"arielb1\" notifications@github.com:\n\n> 2be0d0a\n> https://github.com/rust-lang/rust/commit/2be0d0ad924f9fd0162d31669b58bc39734e91d8\n> looks like the problem commit\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/rust-lang/rust/issues/28839#issuecomment-145611191.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145666928/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145978042",
    "html_url": "https://github.com/rust-lang/rust/issues/28839#issuecomment-145978042",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28839",
    "id": 145978042,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NTk3ODA0Mg==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-06T19:50:47Z",
    "updated_at": "2015-10-06T19:50:47Z",
    "body": "Ah, yes, that makes sense. I should have thought of that interaction. Sigh.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/145978042/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
