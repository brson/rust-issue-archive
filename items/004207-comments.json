[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11456728",
    "html_url": "https://github.com/rust-lang/rust/issues/4207#issuecomment-11456728",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4207",
    "id": 11456728,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNDU2NzI4",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-12-17T19:18:56Z",
    "updated_at": "2012-12-17T19:18:56Z",
    "body": "How about a function attribute instead:\n\n```\n#[main]\nfn my_main() { }\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11456728/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11556226",
    "html_url": "https://github.com/rust-lang/rust/issues/4207#issuecomment-11556226",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4207",
    "id": 11556226,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNTU2MjI2",
    "user": {
      "login": "ILyoan",
      "id": 2672194,
      "node_id": "MDQ6VXNlcjI2NzIxOTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2672194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ILyoan",
      "html_url": "https://github.com/ILyoan",
      "followers_url": "https://api.github.com/users/ILyoan/followers",
      "following_url": "https://api.github.com/users/ILyoan/following{/other_user}",
      "gists_url": "https://api.github.com/users/ILyoan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ILyoan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ILyoan/subscriptions",
      "organizations_url": "https://api.github.com/users/ILyoan/orgs",
      "repos_url": "https://api.github.com/users/ILyoan/repos",
      "events_url": "https://api.github.com/users/ILyoan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ILyoan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-12-20T01:01:20Z",
    "updated_at": "2012-12-20T01:01:20Z",
    "body": "Yeah, that also would be a good option.\nBut I can't grasp fully how function attributes work in rustc yet, \nso I may need your help\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11556226/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11557140",
    "html_url": "https://github.com/rust-lang/rust/issues/4207#issuecomment-11557140",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4207",
    "id": 11557140,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNTU3MTQw",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-12-20T01:46:20Z",
    "updated_at": "2012-12-20T01:50:03Z",
    "body": "This will require some refactoring to clean up the way rustc deals with main, but should otherwise be straightforward.\n\nThere are primarily two passes that deal with `main`, [resolve](https://github.com/mozilla/rust/blob/master/src/librustc/middle/resolve.rs#L3832) and [trans](https://github.com/mozilla/rust/blob/master/src/librustc/middle/trans/base.rs#L1976), but these two passes don't quite collaborate as much as they need to in order to make this work.\n\nResolve is currently responsible for locating the main function and putting a reference to it into the compilation session, so other passes may know the main function. This is used, for example, by the type checker to verify that main has the correct signature.\n\nTrans is currently responsible for generating some wrappers around the main function necessary to start up the runtime. Trans also is (incorrectly) responsible for the check that there is only a single main function (test [here](https://github.com/mozilla/rust/blob/master/src/test/compile-fail/multiple-main.rs)). Notably, trans does not use the information about main that is generated by resolve - it duplicates the search for the main function.\n\nHere's how I suggest this be fixed:\n- move the duplicate main check from trans to resolve - resolve will become the only pass capable of figuring out which function is main.\n- change trans to use the main function indicated in the session so that all compiler passes agree on which function is main\n- in resolve, look at each function's attributes to see if it has `#[main]`, using the attribute accessors [here](https://github.com/mozilla/rust/blob/master/src/libsyntax/attr.rs).\n\nIt's not clear to me whether the presence of a `#[main]` attribute should silently override an existing function named `main` or if having both should trigger the multiple main error. I think that, if there's a function with `#[main]` then having other functions named `main` should probably be allowed, specifically for the following reason:\n\nThe 'test' pass, that generates a binary for running `#[test]` functions, synthesizes a main function and will have to be aware of this attribute. The current strategy it uses is to _[remove](https://github.com/mozilla/rust/blob/master/src/librustc/front/test.rs#L86)_ any existing functions named `main` from the AST so as not to trigger the multiple main error. There has been an issue open (#2403) to fix this behavior for a while. What it should do instead is add `#[main]` to the synthesized main function and strip `#[main]` from all other functions in the AST.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11557140/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11557148",
    "html_url": "https://github.com/rust-lang/rust/issues/4207#issuecomment-11557148",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4207",
    "id": 11557148,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNTU3MTQ4",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-12-20T01:46:37Z",
    "updated_at": "2012-12-20T01:46:42Z",
    "body": "@graydon Pinging you to see if you agree.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11557148/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11557328",
    "html_url": "https://github.com/rust-lang/rust/issues/4207#issuecomment-11557328",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4207",
    "id": 11557328,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNTU3MzI4",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-12-20T01:54:50Z",
    "updated_at": "2012-12-20T01:54:50Z",
    "body": "@ILyoan do you need to be able to compile the same codebase using _different_ main functions, or do you simply need `main` to have a different name? This attribute strategy will not work so well for compiling the same codebase with multiple entry points, though conditional compilation probably covers that use case.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11557328/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11561024",
    "html_url": "https://github.com/rust-lang/rust/issues/4207#issuecomment-11561024",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4207",
    "id": 11561024,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNTYxMDI0",
    "user": {
      "login": "ILyoan",
      "id": 2672194,
      "node_id": "MDQ6VXNlcjI2NzIxOTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2672194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ILyoan",
      "html_url": "https://github.com/ILyoan",
      "followers_url": "https://api.github.com/users/ILyoan/followers",
      "following_url": "https://api.github.com/users/ILyoan/following{/other_user}",
      "gists_url": "https://api.github.com/users/ILyoan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ILyoan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ILyoan/subscriptions",
      "organizations_url": "https://api.github.com/users/ILyoan/orgs",
      "repos_url": "https://api.github.com/users/ILyoan/repos",
      "events_url": "https://api.github.com/users/ILyoan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ILyoan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-12-20T05:41:23Z",
    "updated_at": "2012-12-20T05:41:23Z",
    "body": "@brson \nit seems like that the modification will not be a simple work :)\nfor the last question, just different name is sufficient for me.\nThanks\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11561024/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11562199",
    "html_url": "https://github.com/rust-lang/rust/issues/4207#issuecomment-11562199",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4207",
    "id": 11562199,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNTYyMTk5",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-12-20T06:54:49Z",
    "updated_at": "2012-12-20T06:54:49Z",
    "body": "Attribute is best, I agree. Goal is to keep anything _required_ for a build expressed in-code, command line options only for adjusting build flavours.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11562199/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11721683",
    "html_url": "https://github.com/rust-lang/rust/issues/4207#issuecomment-11721683",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4207",
    "id": 11721683,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNzIxNjgz",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-12-27T23:57:44Z",
    "updated_at": "2012-12-27T23:57:44Z",
    "body": "Changed the title to reflect the preferred solution.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11721683/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12336259",
    "html_url": "https://github.com/rust-lang/rust/issues/4207#issuecomment-12336259",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4207",
    "id": 12336259,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzM2MjU5",
    "user": {
      "login": "luqmana",
      "id": 287063,
      "node_id": "MDQ6VXNlcjI4NzA2Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luqmana",
      "html_url": "https://github.com/luqmana",
      "followers_url": "https://api.github.com/users/luqmana/followers",
      "following_url": "https://api.github.com/users/luqmana/following{/other_user}",
      "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions",
      "organizations_url": "https://api.github.com/users/luqmana/orgs",
      "repos_url": "https://api.github.com/users/luqmana/repos",
      "events_url": "https://api.github.com/users/luqmana/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luqmana/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-01-16T19:47:13Z",
    "updated_at": "2013-01-16T19:47:13Z",
    "body": "Guess this issue should be closed now since it's fixed in incoming.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12336259/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
