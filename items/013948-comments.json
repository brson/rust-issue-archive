[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42205467",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42205467",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42205467,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjA1NDY3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-05T16:15:25Z",
    "updated_at": "2014-05-05T16:15:25Z",
    "body": "r=me, but looks like there's a failure on travis\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42205467/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42340524",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42340524",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42340524,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzQwNTI0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-06T18:29:43Z",
    "updated_at": "2014-05-06T18:29:43Z",
    "body": "This build failure is a legitimate problem, and it is a bit of an interesting one. The failure occurs when the compiler opens up the `regex_macros` library. This library has a dependence on the `regex` crate, and it is supposed to be found in the target lib directory. The compiler adds the target lib directory to `LD_LIBRARY_PATH` so it can be found. Unfortunately, the compiler adds this target directory to the _end_ of the search path.\n\nYou've updated libtest to have a dependency on libregex, which means that libregex-foo.so is now available in the _host_ directory (it was missing there before), so now the call to dlopen is opening up libregex-foo.so in the _host_ directory, not the _target_ directory.\n\nI believe if you change the order of addition [here](https://github.com/mozilla/rust/blob/a5be12ce/src/libstd/unstable/dynamic_lib.rs#L76) to prepend to `LD_LIBRARY_PATH` instead of append, it should work out.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42340524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42340635",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42340635",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42340635,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzQwNjM1",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-06T18:30:40Z",
    "updated_at": "2014-05-06T18:30:40Z",
    "body": "As in, this:\n\n``` diff\ndiff --git a/src/libstd/unstable/dynamic_lib.rs b/src/libstd/unstable/dynamic_lib.rs\nindex 68f0aaa..865b9cb 100644\n--- a/src/libstd/unstable/dynamic_lib.rs\n+++ b/src/libstd/unstable/dynamic_lib.rs\n@@ -73,7 +73,7 @@ impl DynamicLibrary {\n             (\"LD_LIBRARY_PATH\", ':' as u8)\n         };\n         let newenv = os::getenv_as_bytes(envvar).unwrap_or(box []);\n-        let newenv = newenv + &[sep] + path.as_vec();\n+        let newenv = path.as_vec() + &[sep] + newenv;\n         os::setenv(envvar, str::from_utf8(newenv).unwrap());\n     }\n\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42340635/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42549058",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42549058",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42549058,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTQ5MDU4",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-08T13:25:35Z",
    "updated_at": "2014-05-08T13:25:35Z",
    "body": "I've been a bit busy, will get to this tomorrow.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42549058/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42550033",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42550033",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42550033,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTUwMDMz",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-08T13:35:06Z",
    "updated_at": "2014-05-08T13:35:06Z",
    "body": "Actually, was easy enough to do now. r? @alexcrichton \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42550033/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42626871",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42626871",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42626871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjI2ODcx",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-09T02:00:45Z",
    "updated_at": "2014-05-09T02:00:45Z",
    "body": "I'm confused about this failure, I'll try to investigate soon.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42626871/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42666871",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42666871",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42666871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjY2ODcx",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-09T13:44:28Z",
    "updated_at": "2014-05-09T13:47:06Z",
    "body": "I have been looking at the failure.  I can replicate on OS X.  Here is what I have established:\n- Running the same `compiletest` command reproduces the failure for me.\n- Running the `rustc` command that `compiletest` claims it is running does not fail (or rather, it hits the expected syntax error, rather than hitting the dynamic link failure that `compiletest` hits).\n- Inspecting the source code for `compiletest`, I now know the reason for the above discrepancy: `compiletest`'s log output is lying to us.  In particular the string constructed [here in `make_cmdline`](../blob/9fb8741b2ec6cf44256b7241123fcb81a4b21a68/src/compiletest/runtest.rs#L1055) is a source of it lying to us, because it causes the output to include nothing about the `_libpath` being used, even though [here in `program_output`](../blob/9fb8741b2ec6cf44256b7241123fcb81a4b21a68/src/compiletest/runtest.rs#L1046) we can see that it does actually pass the `lib_path` to `procsrv::run`, and thus it _will_ use the `lib_path` that `make_cmdline` failed to report back to us. \n- Modifying `program_output` to include a bit more log output with the `lib_path`, we can see it is using this `lib_path` for the run: `x86_64-apple-darwin/stage2/lib`.  When I install _that_ as the `DYLD_LIBRARY_PATH`, then the `rustc` invocation fails.  If I install instead `x86_64-apple-darwin/stage2/lib/rustlib/x86_64-apple-darwin/lib`, then the `rustc` invocation behaves the way we want.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42666871/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42672190",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42672190",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42672190,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjcyMTkw",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-09T14:30:23Z",
    "updated_at": "2014-05-09T14:30:23Z",
    "body": "I assume that `regex_macros` needs to dynamically load the `regex` crate in order to determine what symbols to link against in its output code; is that actually true, or should it be able to determine the appropriate mangled symbol without loading (or at least finding the path to) the `regex` crate?\n\nThe reason I ask: we have wanted to support keeping the compile-time crates in a path distinct from the run-time crates, if desired.  But that implies that the above kinds of symbol lookups should not attempt to use the `DYLD_LIBRARY_PATH` at the time that `rustc` runs.\n\nPerhaps this is the kind of problem that @alexcrichton has been concerned about for all this time, and I was missing the big picture issue...\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42672190/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42675492",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42675492",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42675492,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjc1NDky",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-09T14:59:31Z",
    "updated_at": "2014-05-09T15:00:30Z",
    "body": "Or really, if you think about a model like that used in Racket (see [\"You Want It When\" paper](http://www.cs.utah.edu/plt/publications/macromod.pdf) and [the sequel](http://www.cs.utah.edu/plt/publications/gpce13-f-color.pdf)), it seems to me that what we probably need is for `libregex_macros/lib.rs` to say something like:\n\n```\n// \"phase(generated_code)\" is meant to mean something\n// like Racket's `(requre (for-template ...))`\n#[phase(generated_code)]\nextern crate regex;\n```\n\ni.e. that model needs some way for the macro-defining compile-time crate to indicate that it wants symbols from the run-time crate, but it won't be executing any code from that run-time crate.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42675492/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42676724",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42676724",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42676724,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjc2NzI0",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-09T15:10:18Z",
    "updated_at": "2014-05-09T15:10:18Z",
    "body": "(i haven't looked very carefully at why _this_ PR exposes the bug described above.  You would think we would be seeing it even without this PR...)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42676724/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42686934",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42686934",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42686934,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjg2OTM0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-09T16:41:33Z",
    "updated_at": "2014-05-09T16:41:33Z",
    "body": "Interesting! \n\nI believe that a major culprit is this code: https://github.com/mozilla/rust/blob/master/src/librustc/driver/driver.rs#L234-L241. The comment I wrote asserts that rpaths on unix fix everything, but this is not a true statement. The contents of `LD_LIBRARY_PATH` are prioritized over rpaths.\n\nI believe that `compiletest` is passing the correct `LD_LIBRARY_PATH` to invoking rustc, because rustc genuinely wants to use the libraries in that directory. The difference comes when you want to dynamically open up a library. The compiler I believe just needs to prepend the compiler lookup paths to `LD_LIBRARY_PATH` so you'll find the right regex macros crate.\n\nI'm not sure if requiring a set of compile-time crates and a set of non-compile-time crates is what we want, but I'm still confused by this problem. It appears that the stage2 host regex crate is different than the stage2 target regex crate, but we're semi-guaranteeing convergence by stage2. For example, the stage2 regex target crate depends on the stage2 std target crate, but we're dlopening the stage2 regex target crate into a process which only has the stage2 host std crate (and yet somehow it works)?\n\nI feel like we've been toeing the line of whether this arbitrary code at compile time is possible or not. The possibility of it is looking bleaker as time goes on...\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42686934/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42687256",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42687256",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42687256,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjg3MjU2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-09T16:44:38Z",
    "updated_at": "2014-05-09T16:44:38Z",
    "body": "And I confuse myself even further. That code in rustc is adding the _host_ directory to the search paths, not the _target_ directory. So it will not have the fix that I was talking about...\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42687256/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42691749",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42691749",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42691749,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjkxNzQ5",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-09T17:27:18Z",
    "updated_at": "2014-05-09T17:42:19Z",
    "body": "Another thing I just noticed that I should point out: \n\nAssuming that our makefiles and `compiletest` are feeding in the correct paths (which I think they are; I  agree with alex that `compiletest` seems like it is passing the correct `LD_LIBRARY_PATH` to `rustc`) ...\n\nTake a look at this command line transcript (which I believe corresponds to what `compiletest` is asking `rustc` to do):\n\n```\n% DYLD_LIBRARY_PATH=x86_64-apple-darwin/stage2/lib x86_64-apple-darwin/stage2/bin/rustc /Users/fklock/Dev/Mozilla/rust-helphuon/src/test/compile-fail-fulldeps/syntax-extension-regex-invalid.rs -L x86_64-apple-darwin/test/compile-fail-fulldeps --target=x86_64-apple-darwin -L x86_64-apple-darwin/test/compile-fail-fulldeps/syntax-extension-regex-invalid.stage2-x86_64-apple-darwin.libaux -C prefer-dynamic -o x86_64-apple-darwin/test/compile-fail-fulldeps/syntax-extension-regex-invalid.stage2-x86_64-apple-darwin --cfg rtopt --cfg debug -O -L x86_64-apple-darwin/rt\ndyld: lazy symbol binding failed: Symbol not found: __ZN2re5Regex3new20h605f1a58f435e390BZg9v0.11.preE\n  Referenced from: /Users/fklock/Dev/Mozilla/rust-helphuon/objdir-dbgopt-check/x86_64-apple-darwin/stage2/lib/rustlib/x86_64-apple-darwin/lib/libregex_macros-10a265ff-0.11-pre.dylib\n  Expected in: x86_64-apple-darwin/stage2/lib/libregex-1cae1bee-0.11-pre.dylib\n\ndyld: Symbol not found: __ZN2re5Regex3new20h605f1a58f435e390BZg9v0.11.preE\n  Referenced from: /Users/fklock/Dev/Mozilla/rust-helphuon/objdir-dbgopt-check/x86_64-apple-darwin/stage2/lib/rustlib/x86_64-apple-darwin/lib/libregex_macros-10a265ff-0.11-pre.dylib\n  Expected in: x86_64-apple-darwin/stage2/lib/libregex-1cae1bee-0.11-pre.dylib\n\nTrace/BPT trap: 5\n```\n\nIn particular, why is that talking about `lib/rustlib/x86_64-apple-darwin/lib/libregex_macros`, i.e. the target's `regex_macros` crate ?  If everything were internally consistent, shouldn't we only be pulling in the _host_'s `regex_macros` crate?\n\n---\n\nupdate: perhaps this is exactly why the fix @alexcrichton mentioned two comments up might actually work (even though alex denied that could work one comment up...)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42691749/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42692296",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42692296",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42692296,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjkyMjk2",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-09T17:32:15Z",
    "updated_at": "2014-05-09T17:32:34Z",
    "body": "@alexcrichton  and yes, I was also surprised that we did not have convergence in terms of the state of `regex` on stage2-host and stage2-target.\n\nBut I also think a scheme like the one employed by Racket should actually not _require_ convergence; rather, it requires the macro author to understand the distinction between their run-time symbols (which end up as compile-time for the end-client program using the macro) and their \"template\"-time symbols (what I also called \"`phase(codegen)`\" above), which end up as run-time for the end-client program using the macro.  The macro author may in fact need to reference two distinct versions of the crate, (and give them different names when pulling them in), since they may want to use the crate themselves in the implementation of the procedures driving the macro, while also emitting code that refers to symbols from the crate).  But we should be able to handle that in principle.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42692296/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42725337",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42725337",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42725337,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzI1MzM3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-10T00:03:38Z",
    "updated_at": "2014-05-10T00:03:38Z",
    "body": "> In particular, why is that talking about lib/rustlib/x86_64-apple-darwin/lib/libregex_macros, i.e. the target's regex_macros crate\n\nWhen the compiler dlopen()s a crate, it uses the target libraries, not the host libraries (reason below)\n\n>  If everything were internally consistent, shouldn't we only be pulling in the host's regex_macros crate?\n\nThe compiler can't currently produce an artifact linked against its own artifacts because that would involve linking to code that the compiler didn't generate. It is dlopen()'ing the code though, which is a bit sketchy...\n\n>  And I confuse myself even further. That code in rustc is adding the host directory to the search paths, not the target directory. So it will not have the fix that I was talking about...\n\nI rescind this comment, this makes sense.\n\n---\n\nNew development: http://www.cocoabuilder.com/archive/cocoa/133694-dyld-library-path-etc.html\n\n>  You cannot do this as the dynamic linker reads these variables at the\n> time the application launches, and not each time a new framework is\n> loaded.\n\nOur hokey method of adding to the search path at runtime is apparently just that, hokey. It worked for windows, but I don't think that it works for anyone else.\n\n---\n\nOk, so here's what I think the situation is. As long as we can guarantee convergence by stage, everything _should_ be working today. I believe the regex crate is the _only_ crate that is not converging, due to one use case of `cfg(not(stage1))`. This is proven via:\n\n```\n$ RUST_LOG=rustc::back::link=info ./x86_64-apple-darwin/stage1/bin/rustc ./src/libregex/lib.rs --cfg stage1         \nINFO:rustc::back::link: LinkMeta { crateid: regex#0.11-pre, crate_hash: b823b9eafa200ad0 }\n$ RUST_LOG=rustc::back::link=info ./x86_64-apple-darwin/stage2/bin/rustc ./src/libregex/lib.rs --cfg stage2                   \nINFO:rustc::back::link: LinkMeta { crateid: regex#0.11-pre, crate_hash: d76de1556444a553 }\n```\n\nOk, so let's think about a solution. First, I/felix have been talking a lot about search paths and library paths. I don't think those are relevant in this instance, as we can only have a sane world if we rely on convergence. The real issue here is that the regex crate is different at stage1-generation time and stage2-generation time (all libraries should be constant at these two times).\n\nI believe the real solution is that we need `libregex` to converge. An easy solution may be `libregex_tests`, I would like to have better support in the compiler, however, to guarantee this convergence. The AST truly is the same, but I think it takes a bit of a different path to get there.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42725337/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42731736",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42731736",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42731736,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzMxNzM2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-10T04:46:48Z",
    "updated_at": "2014-05-10T04:46:48Z",
    "body": "I believe I have found why regex is not converging. This has to do with how when we hash an identifier, we hash the _name_ of the identifier, not the _contents_ of the identifier. This means that the order in which identifiers are declared turns out to be important. For example:\n\n``` rust\nfn main() {                  \n    let foo = 1;             \n    let bar = 3;             \n    let baz = 4;             \n    let _a = (foo, bar, baz);\n}\n```\n\n```\nexport RUST_LOG=rustc::back::link=info\nrustc foo.rs && rustc foo.rs --cfg foo && rustc foo.rs --cfg bar && rustc foo.rs --cfg baz\nINFO:rustc::back::link: LinkMeta { crateid: foo#0.0, crate_hash: deb14a517b1d850c }\nINFO:rustc::back::link: LinkMeta { crateid: foo#0.0, crate_hash: e317e2ddb2708a7e }\nINFO:rustc::back::link: LinkMeta { crateid: foo#0.0, crate_hash: 1ca13c598ed2b157 }\nINFO:rustc::back::link: LinkMeta { crateid: foo#0.0, crate_hash: 3495502fed3558fd }\n```\n\nWhat's happening here is that these symbols are getting interned early on in the compilation process due to being on the command line, affecting their values later on.\n\nSo the problem is not that the regex crate has `cfg(stage1)`, the problem is that `stage1` appears as an identifier _anywhere_ in the crate.\n\n---\n\ntl;dr - I have no idea why, but this patch appears to generate the same SVH for stage1/stage2\n\n``` diff\ndiff --git a/src/libregex/test/mod.rs b/src/libregex/test/mod.rs\nindex a4c3a83..b315396 100644\n--- a/src/libregex/test/mod.rs\n+++ b/src/libregex/test/mod.rs\n@@ -9,6 +9,7 @@\n // except according to those terms.\n\n #[cfg(not(stage1))]\n+#[cfg(stage2)]\n #[phase(syntax)]\n extern crate regex_macros;\n\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42731736/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42757402",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42757402",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42757402,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzU3NDAy",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-10T23:19:15Z",
    "updated_at": "2014-05-10T23:20:00Z",
    "body": "@alexcrichton I agree that convergence is a sufficient condition for correctness of our overall macro system (that is, if we could get this crate to converge, then a lot of the problems we are seeing on this PR would go away).\n\nI am not yet convinced that convergence is a _necessary_ condition for correctness (which I think I stated earlier when I was referring to the various Racket macro papers).  But I am also willing to table this debate for now in the interest of getting today's code working.  :)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42757402/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42860709",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42860709",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42860709,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyODYwNzA5",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-12T17:17:45Z",
    "updated_at": "2014-05-12T17:17:53Z",
    "body": "I hypothesize that rebasing this PR atop PR #14145 will remove the issue that @alexcrichton dissected and diagnosed in [his earlier comment](#issuecomment-42731736)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42860709/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42951967",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-42951967",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 42951967,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTUxOTY3",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-13T13:08:43Z",
    "updated_at": "2014-05-13T13:08:43Z",
    "body": "I'll rebase and reopen this when #14145 lands.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42951967/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43192911",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-43192911",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 43192911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTkyOTEx",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-15T10:20:32Z",
    "updated_at": "2014-05-15T10:20:32Z",
    "body": "Responding to myself: the place where convergence _is_ a necessary condition for correctness is when you have macros that generate procedural macros that are then invoked in that same crate.  \n\nThe Racket papers I linked above provide examples where Racket wants to be able to generate procedural macros and invoke those macros within the same compilation unit (effectively), and I am pretty sure that some of those examples cannot be readily re-encoded in a system where there is a forced separation between the compilation unit with the macro-definition and the unit with the macro-use.\n\n(But just because Racket needs that feature does not mean that _Rust_ needs it...)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43192911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43202261",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-43202261",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 43202261,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjAyMjYx",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-15T12:20:21Z",
    "updated_at": "2014-05-15T12:22:12Z",
    "body": "Rebased. r?\n\nI kicked off some try builds (I'll probably be asleep by the time they (hopefully) pass):\n- http://buildbot.rust-lang.org/builders/try-bsd/builds/958\n- http://buildbot.rust-lang.org/builders/try-linux/builds/1070\n- http://buildbot.rust-lang.org/builders/try-mac/builds/1048\n- http://buildbot.rust-lang.org/builders/try-win/builds/1088\n\nI'm not sure if the dynamic_lib patch is needed any more?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43202261/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43206787",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-43206787",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 43206787,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjA2Nzg3",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-15T13:10:06Z",
    "updated_at": "2014-05-15T13:10:06Z",
    "body": "Well, I screwed that batch up; new set:\n- http://buildbot.rust-lang.org/builders/try-bsd/builds/959\n- http://buildbot.rust-lang.org/builders/try-linux/builds/1071\n- http://buildbot.rust-lang.org/builders/try-mac/builds/1049\n- http://buildbot.rust-lang.org/builders/try-win/builds/1089\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43206787/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43263096",
    "html_url": "https://github.com/rust-lang/rust/pull/13948#issuecomment-43263096",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13948",
    "id": 43263096,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjYzMDk2",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-15T20:51:09Z",
    "updated_at": "2014-05-15T20:51:09Z",
    "body": "Thanks for fixing the SVH, @pnkfelix!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43263096/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
