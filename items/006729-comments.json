[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18440182",
    "html_url": "https://github.com/rust-lang/rust/pull/6729#issuecomment-18440182",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6729",
    "id": 18440182,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NDQwMTgy",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-25T05:44:37Z",
    "updated_at": "2013-06-25T13:13:36Z",
    "body": "I really dislike this API. Can we not make it something like this:\n\n```\nenum CStringBundle {\n    allocation: Option<~[u8]>,\n    c_str: *u8,\n}\n\nfn as_c_str(&self) -> CStringBundle {\n    if I'm null terminated {\n        CStringBundle { None, &self[0] }\n    } else {\n        let new_allocation = copy and null terminate me;\n        CStringBundle { Some(new_allocation), &new_allocation[0] }\n    } \n}\n```\n\n---\n\n**HELLO WORLD LOL, THIS IS BEN EDITING PATRICK'S COMMENT TO PROVE THAT GITHUB ALLOWS ME TO EDIT ANY ARBITRARY COMMENT ON ANY PULL REQUEST THAT I'VE OPENED! NOTHING IS SAFE!**\n\n**R+ BSTRIE/REFLECTIONS_ON_TRUSTING_TRUST**\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18440182/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18448036",
    "html_url": "https://github.com/rust-lang/rust/pull/6729#issuecomment-18448036",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6729",
    "id": 18448036,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NDQ4MDM2",
    "user": {
      "login": "bstrie",
      "id": 865233,
      "node_id": "MDQ6VXNlcjg2NTIzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bstrie",
      "html_url": "https://github.com/bstrie",
      "followers_url": "https://api.github.com/users/bstrie/followers",
      "following_url": "https://api.github.com/users/bstrie/following{/other_user}",
      "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions",
      "organizations_url": "https://api.github.com/users/bstrie/orgs",
      "repos_url": "https://api.github.com/users/bstrie/repos",
      "events_url": "https://api.github.com/users/bstrie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bstrie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-25T14:31:43Z",
    "updated_at": "2013-05-25T14:31:43Z",
    "body": "@Aatch Good catch, I completely glossed over the extra indirection there.\n\n@pcwalton I'm not attached to the current API, but how would you expect to use a CStringBundle for C interop? Right now my Lua interop code looks like this:\n\n``` rust\nlet ret1 = str::as_c_str(\"function foo (x,y) return x+y end\",\n                         |s| luaL_loadstring(L, s));\n```\n\nWith this pull I was expecting to change it to this:\n\n``` rust\nlet ret1 = do \"function foo (x,y) return x+y end\".as_c_str |s| {\n    luaL_loadstring(L, s);\n}\n```\n\nThis still seems roundabout, I'd be perfectly happy with something like:\n\n``` rust\nlet ret1 = luaL_loadstring(L, \"function foo (x,y) return x+y end\".as_c_str());\n```\n\nWith your proposed function, would `\"foo\".as_c_str()` become `\"foo\".as_c_str().c_str` ?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18448036/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18456182",
    "html_url": "https://github.com/rust-lang/rust/pull/6729#issuecomment-18456182",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6729",
    "id": 18456182,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NDU2MTgy",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-26T00:34:23Z",
    "updated_at": "2013-05-26T00:34:40Z",
    "body": "@pcwalton What I don't like about this API most is that the performance characteristics are not obvious. What if we instead changed the signature to `as_c_str(&~str)` so you are guaranteed to be null terminated and not allocate?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18456182/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18456187",
    "html_url": "https://github.com/rust-lang/rust/pull/6729#issuecomment-18456187",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6729",
    "id": 18456187,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NDU2MTg3",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-26T00:35:17Z",
    "updated_at": "2013-05-26T00:35:17Z",
    "body": "Redesigning this interface probably doesn't need to block this pull request though.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18456187/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18456191",
    "html_url": "https://github.com/rust-lang/rust/pull/6729#issuecomment-18456191",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6729",
    "id": 18456191,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NDU2MTkx",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-26T00:36:02Z",
    "updated_at": "2013-05-26T00:37:03Z",
    "body": "Oh, what I _really_ like the least about this api is that it is possible to read uninitialized memory when checking for null.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18456191/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18463809",
    "html_url": "https://github.com/rust-lang/rust/pull/6729#issuecomment-18463809",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6729",
    "id": 18463809,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NDYzODA5",
    "user": {
      "login": "Kimundi",
      "id": 2903206,
      "node_id": "MDQ6VXNlcjI5MDMyMDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2903206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kimundi",
      "html_url": "https://github.com/Kimundi",
      "followers_url": "https://api.github.com/users/Kimundi/followers",
      "following_url": "https://api.github.com/users/Kimundi/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kimundi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kimundi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kimundi/subscriptions",
      "organizations_url": "https://api.github.com/users/Kimundi/orgs",
      "repos_url": "https://api.github.com/users/Kimundi/repos",
      "events_url": "https://api.github.com/users/Kimundi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kimundi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-26T14:27:01Z",
    "updated_at": "2013-05-26T14:27:01Z",
    "body": "@brson Are you talking about the current as_c_str? how can it read uninitialized memory?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18463809/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18776283",
    "html_url": "https://github.com/rust-lang/rust/pull/6729#issuecomment-18776283",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6729",
    "id": 18776283,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4Nzc2Mjgz",
    "user": {
      "login": "bstrie",
      "id": 865233,
      "node_id": "MDQ6VXNlcjg2NTIzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bstrie",
      "html_url": "https://github.com/bstrie",
      "followers_url": "https://api.github.com/users/bstrie/followers",
      "following_url": "https://api.github.com/users/bstrie/following{/other_user}",
      "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions",
      "organizations_url": "https://api.github.com/users/bstrie/orgs",
      "repos_url": "https://api.github.com/users/bstrie/repos",
      "events_url": "https://api.github.com/users/bstrie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bstrie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-31T22:58:13Z",
    "updated_at": "2013-05-31T22:58:13Z",
    "body": "I've opened #6869 for addressing the API change. In the meantime, this is still the direction that we'd like to go wrt changing functions to methods where it makes sense (#6045).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18776283/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18783291",
    "html_url": "https://github.com/rust-lang/rust/pull/6729#issuecomment-18783291",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6729",
    "id": 18783291,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NzgzMjkx",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-01T04:19:34Z",
    "updated_at": "2013-06-01T04:19:34Z",
    "body": "@Kimundi perhaps it can't if we maintain the invariant that all slices are overallocated. There was a bug once because some code didn't and I've had a vendetta for it since.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18783291/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
