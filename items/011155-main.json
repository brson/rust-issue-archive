{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/11155",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/11155/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/11155/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/11155/events",
  "html_url": "https://github.com/rust-lang/rust/pull/11155",
  "id": 24807347,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTExMDYzMTk=",
  "number": 11155,
  "title": "Generate --dep-info earlier in the compillation",
  "user": {
    "login": "SiegeLord",
    "id": 480550,
    "node_id": "MDQ6VXNlcjQ4MDU1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/480550?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SiegeLord",
    "html_url": "https://github.com/SiegeLord",
    "followers_url": "https://api.github.com/users/SiegeLord/followers",
    "following_url": "https://api.github.com/users/SiegeLord/following{/other_user}",
    "gists_url": "https://api.github.com/users/SiegeLord/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SiegeLord/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SiegeLord/subscriptions",
    "organizations_url": "https://api.github.com/users/SiegeLord/orgs",
    "repos_url": "https://api.github.com/users/SiegeLord/repos",
    "events_url": "https://api.github.com/users/SiegeLord/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SiegeLord/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 5,
  "created_at": "2013-12-27T03:57:10Z",
  "updated_at": "2014-06-16T22:32:45Z",
  "closed_at": "2013-12-31T21:47:03Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/11155",
    "html_url": "https://github.com/rust-lang/rust/pull/11155",
    "diff_url": "https://github.com/rust-lang/rust/pull/11155.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/11155.patch",
    "merged_at": "2013-12-31T21:47:04Z"
  },
  "body": "The `--dep-info` command line option allows a nice way to generate make-style dependencies, but it currently does so alongside building of the output binary. This isn't a problem for make, as it mixes dependency graph generation and actual building, but it is problematic for other tools (e.g. CMake) which keep them separate.\n\nTo play more nicely with those tools, I've moved the --dep-info output from phase 6 (linking) up to after phase 2 (expansion of macros). Also, since there was no prior option to do so, I added a command line switch (`--no-analysis`) to stop compilation just before phase 3 (type-checking) which speeds this up even further.\n\nHere's the beginning of a CMake function which is enabled by this change:\n\n``` cmake\nfunction(get_rust_deps root_file out_var)\n    execute_process(COMMAND rustc ${RUSTC_FLAGS} --no-analysis --dep-info \"${CMAKE_BINARY_DIR}/.deps\" \"${root_file}\")\n\n    # Read and parse the dependency information\n    file(READ \"${CMAKE_BINARY_DIR}/.deps\" crate_deps)\n    file(REMOVE \"${CMAKE_BINARY_DIR}/.deps\")\n    # parsing follows...\n```\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/11155/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/11155/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
