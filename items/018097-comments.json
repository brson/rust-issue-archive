[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59401014",
    "html_url": "https://github.com/rust-lang/rust/pull/18097#issuecomment-59401014",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18097",
    "id": 59401014,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NDAxMDE0",
    "user": {
      "login": "veddan",
      "id": 307180,
      "node_id": "MDQ6VXNlcjMwNzE4MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/307180?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/veddan",
      "html_url": "https://github.com/veddan",
      "followers_url": "https://api.github.com/users/veddan/followers",
      "following_url": "https://api.github.com/users/veddan/following{/other_user}",
      "gists_url": "https://api.github.com/users/veddan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/veddan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/veddan/subscriptions",
      "organizations_url": "https://api.github.com/users/veddan/orgs",
      "repos_url": "https://api.github.com/users/veddan/repos",
      "events_url": "https://api.github.com/users/veddan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/veddan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-16T17:45:54Z",
    "updated_at": "2014-10-16T17:45:54Z",
    "body": "## Benchmark code\n\n```\nextern crate test;\nuse test::Bencher;\n\n#[deriving(Clone)]\nstruct Foo { x: u8  }\n\nimpl Drop for Foo {\n    fn drop(&mut self) { }\n}\n\n#[bench]\nfn bench_no_drop(b: &mut Bencher) {\n    let v = Vec::from_elem(10000, 0u8);\n    b.iter(|| { let mut x = v.clone(); x.truncate(0); });\n}\n\n#[bench]\nfn bench_drop(b: &mut Bencher) {\n    let v = Vec::from_elem(10000, Foo { x: 0 });\n    b.iter(|| { let mut x = v.clone(); x.truncate(0); });\n}\n```\n\n## Results\n\n### Before, -O0\n\n```\ntest bench_drop    ... bench:    799459 ns/iter (+/- 33636)\ntest bench_no_drop ... bench:    667411 ns/iter (+/- 27678)\n```\n\n### After, -O0\n\n```\ntest bench_drop    ... bench:    791541 ns/iter (+/- 28567)\ntest bench_no_drop ... bench:    476229 ns/iter (+/- 19815)\n```\n\n### Before, -O1\n\n```\ntest bench_drop    ... bench:    394395 ns/iter (+/- 17525)\ntest bench_no_drop ... bench:    388002 ns/iter (+/- 21695)\n```\n\n### After, -O1\n\n```\ntest bench_drop    ... bench:    406982 ns/iter (+/- 30450)\ntest bench_no_drop ... bench:    288509 ns/iter (+/- 13999)\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59401014/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59402067",
    "html_url": "https://github.com/rust-lang/rust/pull/18097#issuecomment-59402067",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18097",
    "id": 59402067,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NDAyMDY3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-16T17:53:03Z",
    "updated_at": "2014-10-16T17:55:05Z",
    "body": "I don't like the idea of adding complexity to improve runtime performance without optimizations. I don't think a small constant factor slowdown for `--opt-level=1` is important. It could be fixed at `--opt-level=1` with careful application of `#[inline(always)]`. In the worst case, the lack of this specialization will double the constant factor for each paired initialization / destruction.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59402067/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60282671",
    "html_url": "https://github.com/rust-lang/rust/pull/18097#issuecomment-60282671",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18097",
    "id": 60282671,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMjgyNjcx",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-23T18:10:26Z",
    "updated_at": "2014-10-23T18:10:26Z",
    "body": "Agreed with @thestinger, closing. Many thanks for the patch, however :)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60282671/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
