[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70651200",
    "html_url": "https://github.com/rust-lang/rust/issues/21397#issuecomment-70651200",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21397",
    "id": 70651200,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjUxMjAw",
    "user": {
      "login": "nathantypanski",
      "id": 1385140,
      "node_id": "MDQ6VXNlcjEzODUxNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1385140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathantypanski",
      "html_url": "https://github.com/nathantypanski",
      "followers_url": "https://api.github.com/users/nathantypanski/followers",
      "following_url": "https://api.github.com/users/nathantypanski/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathantypanski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathantypanski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathantypanski/subscriptions",
      "organizations_url": "https://api.github.com/users/nathantypanski/orgs",
      "repos_url": "https://api.github.com/users/nathantypanski/repos",
      "events_url": "https://api.github.com/users/nathantypanski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathantypanski/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-20T13:15:41Z",
    "updated_at": "2015-01-20T13:15:41Z",
    "body": "This is falling through the match expression on [/src/librustc_trans/trans/consts.rs#L518-L521](https://github.com/rust-lang/rust/blob/2cdc86c180296ff2c929ec55fcf33a0f6b391b3a/src/librustc_trans/trans/consts.rs#L518-L521)\n\n`&'static str -> *const str` panics also:\n\n```\nice.rs:1:35: 1:51 error: internal compiler error: impossible case reached: bad combination of types for cast\nice.rs:1 pub static mut fail: *const str = \"\" as *const str;\n                                           ^~~~~~~~~~~~~~~~\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /home/nathan/prj/rust/rust/src/libsyntax/diagnostic.rs:126\n\nstack backtrace:\n   1:     0x7ffbb1e686d0 - sys::backtrace::write::hfb11ddfd0e7f0658eRt\n   2:     0x7ffbb1e8a5a0 - failure::on_fail::hbcb8cd329aec6ff6J4z\n   3:     0x7ffbb1df8e20 - rt::unwind::begin_unwind_inner::haafd3e91071bc3e1XJz\n   4:     0x7ffbaca18810 - rt::unwind::begin_unwind::h6185406380551317121\n   5:     0x7ffbaca187a0 - diagnostic::SpanHandler::span_bug::h6c67dceaab6289dcEpF\n   6:     0x7ffbb01eb3b0 - session::Session::impossible_case::h3d86ed69bec12c961fp\n   7:     0x7ffbb16033e0 - trans::consts::const_expr_unadjusted::h7bbb3fd0d30587f7ado\n   8:     0x7ffbb1601640 - trans::consts::const_expr::h62680ecd661789d2h2n\n   9:     0x7ffbb153bfe0 - trans::base::get_item_val::heeb56e6127c59fe8IYu\n  10:     0x7ffbb1608ce0 - trans::consts::trans_static::h24dedd3ba4c51141fHo\n  11:     0x7ffbb1539af0 - trans::base::trans_item::h386d32b9df74fe59iuu\n  12:     0x7ffbb1624ce0 - trans::base::trans_crate::h777b6fde95f212b0Lpv\n  13:     0x7ffbb23d2d40 - driver::phase_4_translate_to_llvm::he23925e56602061eTNa\n  14:     0x7ffbb23b2c30 - driver::compile_input::hb4efdf66e0f650f5Cba\n  15:     0x7ffbb247d9a0 - run_compiler::h9d3e14b442c4d365l9b\n  16:     0x7ffbb247c110 - thunk::F.Invoke<A, R>::invoke::h14209112065483412921\n  17:     0x7ffbb247b070 - rt::unwind::try::try_fn::h1021622462190646014\n  18:     0x7ffbb1efa120 - rust_try_inner\n  19:     0x7ffbb1efa110 - rust_try\n  20:     0x7ffbb247b320 - thunk::F.Invoke<A, R>::invoke::h14035172896832106325\n  21:     0x7ffbb1e78210 - sys::thread::thread_start::he2d36a2cbcaf629dzGw\n  22:     0x7ffbac233250 - start_thread\n  23:     0x7ffbb1aa9219 - clone\n  24:                0x0 - <unknown>\n```\n\nI believe the case happening here is `(expr::cast_integral, expr::cast_other)`, based on\na similar, but not quite equivalent, failure with the following code:\n\n```\nfn main() {\n    let mut fail: *const str = 0 as *const str;\n}\n```\n\n```\nerror: internal compiler error: translating unsupported cast: usize (cast_integral) -> *const str (cast_other)\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /home/nathan/prj/rust/rust/src/libsyntax/diagnostic.rs:185\n\nstack backtrace:\n   1:     0x7f373294c6d0 - sys::backtrace::write::hfb11ddfd0e7f0658eRt\n   2:     0x7f373296e5a0 - failure::on_fail::hbcb8cd329aec6ff6J4z\n   3:     0x7f37328dce20 - rt::unwind::begin_unwind_inner::haafd3e91071bc3e1XJz\n   4:     0x7f372d4fc810 - rt::unwind::begin_unwind::h6185406380551317121\n   5:     0x7f372d4fd0b0 - diagnostic::Handler::bug::h22dd58059bfb9b94EvF\n   6:     0x7f3730a00710 - session::Session::bug::ha3b9a2f7768518e0Ucp\n   7:     0x7f373209a930 - trans::expr::trans_imm_cast::h6237da60fefe9c376ek\n   8:     0x7f373207e5a0 - trans::expr::trans_unadjusted::he8968cac83a4541c4ii\n   9:     0x7f3732037ed0 - trans::expr::trans::h8455960f4e8fd42dCBh\n  10:     0x7f3732036d30 - trans::expr::trans_into::h83699b23dbd8bfcf8xh\n  11:     0x7f37321378a0 - trans::_match::mk_binding_alloca::h10237289352598662242\n  12:     0x7f37320363a0 - trans::base::init_local::h919eb93f221f2a7065s\n  13:     0x7f3732037330 - trans::controlflow::trans_block::h2d166cd595ca56b6Z2d\n  14:     0x7f3732101a70 - trans::base::trans_closure::h7bc248b8281c1222wWt\n  15:     0x7f3732022930 - trans::base::trans_fn::h79df99adfc5fa22276t\n  16:     0x7f373201daf0 - trans::base::trans_item::h386d32b9df74fe59iuu\n  17:     0x7f3732108ce0 - trans::base::trans_crate::h777b6fde95f212b0Lpv\n  18:     0x7f3732eb6d40 - driver::phase_4_translate_to_llvm::he23925e56602061eTNa\n  19:     0x7f3732e96c30 - driver::compile_input::hb4efdf66e0f650f5Cba\n  20:     0x7f3732f619a0 - run_compiler::h9d3e14b442c4d365l9b\n  21:     0x7f3732f60110 - thunk::F.Invoke<A, R>::invoke::h14209112065483412921\n  22:     0x7f3732f5f070 - rt::unwind::try::try_fn::h1021622462190646014\n  23:     0x7f37329de120 - rust_try_inner\n  24:     0x7f37329de110 - rust_try\n  25:     0x7f3732f5f320 - thunk::F.Invoke<A, R>::invoke::h14035172896832106325\n  26:     0x7f373295c210 - sys::thread::thread_start::he2d36a2cbcaf629dzGw\n  27:     0x7f372cd17250 - start_thread\n  28:     0x7f373258d219 - clone\n  29:                0x0 - <unknown>\n```\n\nThe above bugs out somewhere in [src/librustc_trans/trans/expr.rs#L2047-L2061](https://github.com/rust-lang/rust/blob/89c4e3792ddc5b45706ea0e919806a248f7a87c3/src/librustc_trans/trans/expr.rs#L2047-L2061)\n\nShould either of these casts actually succeed?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70651200/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74437583",
    "html_url": "https://github.com/rust-lang/rust/issues/21397#issuecomment-74437583",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21397",
    "id": 74437583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NDM3NTgz",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-15T21:18:34Z",
    "updated_at": "2015-02-15T21:18:34Z",
    "body": "Saw a similar case:\n\n``` rust\nstatic mut static_trait: *mut (Trait + 'static) = 0 as *mut _;\npub trait Trait {}\npub fn main() {}\n```\n\non `rustc 1.0.0-dev (342ab53bf 2015-02-15 12:20:31 +0000)`\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74437583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/94992503",
    "html_url": "https://github.com/rust-lang/rust/issues/21397#issuecomment-94992503",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21397",
    "id": 94992503,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk0OTkyNTAz",
    "user": {
      "login": "tamird",
      "id": 1535036,
      "node_id": "MDQ6VXNlcjE1MzUwMzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tamird",
      "html_url": "https://github.com/tamird",
      "followers_url": "https://api.github.com/users/tamird/followers",
      "following_url": "https://api.github.com/users/tamird/following{/other_user}",
      "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tamird/subscriptions",
      "organizations_url": "https://api.github.com/users/tamird/orgs",
      "repos_url": "https://api.github.com/users/tamird/repos",
      "events_url": "https://api.github.com/users/tamird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tamird/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-22T01:20:02Z",
    "updated_at": "2015-04-22T01:24:20Z",
    "body": "Triage: still ICEs.\n\n``` rust\nfn main() {\n    let mut fail: *const str = 0 as *const str;\n}\n```\n\nand\n\n``` rust\nstatic mut static_trait: *mut (Trait + 'static) = 0 as *mut _;\npub trait Trait {}\npub fn main() {}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/94992503/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
