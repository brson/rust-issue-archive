[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67999324",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-67999324",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 67999324,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3OTk5MzI0",
    "user": {
      "login": "pythonesque",
      "id": 923144,
      "node_id": "MDQ6VXNlcjkyMzE0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/923144?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pythonesque",
      "html_url": "https://github.com/pythonesque",
      "followers_url": "https://api.github.com/users/pythonesque/followers",
      "following_url": "https://api.github.com/users/pythonesque/following{/other_user}",
      "gists_url": "https://api.github.com/users/pythonesque/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pythonesque/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pythonesque/subscriptions",
      "organizations_url": "https://api.github.com/users/pythonesque/orgs",
      "repos_url": "https://api.github.com/users/pythonesque/repos",
      "events_url": "https://api.github.com/users/pythonesque/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pythonesque/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-23T21:15:31Z",
    "updated_at": "2014-12-23T21:16:52Z",
    "body": "How can this make the semantics of the `Mutex` API differ substantially?  You have a `&mut` borrow of the value protected by the Mutex, so even if the `Mutex` is reentrant I don't see how you could expose that through the API.  Or I guess the issue is that you _could_ get aliased `&mut`s by `clone()`ing a `Arc<Mutex<T>>` on Windows and unlocking both in the same thread?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67999324/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67999968",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-67999968",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 67999968,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3OTk5OTY4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-23T21:22:46Z",
    "updated_at": "2014-12-23T21:22:46Z",
    "body": "Unfortunately the `&mut` borrow is earned from the `MutexGuard` structure, not the `Mutex`, which allows you lock it twice. For example, if this code completed, it could exhibit memory unsafety (two `&mut`references):\n\n``` rust\nuse std::sync::Mutex;\nuse std::mem;\n\nfn main() {\n    let m = Mutex::new(4u);\n    let mut g1 = m.lock();\n    let mut g2 = m.lock();\n\n    let p1 = &mut *g1;\n    let p2 = &mut *g2;\n    mem::swap(p1, p2);\n}\n```\n\nOn unix that code deadlocks, but on windows it executes just fine.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67999968/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68000287",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68000287",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68000287,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDAwMjg3",
    "user": {
      "login": "pythonesque",
      "id": 923144,
      "node_id": "MDQ6VXNlcjkyMzE0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/923144?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pythonesque",
      "html_url": "https://github.com/pythonesque",
      "followers_url": "https://api.github.com/users/pythonesque/followers",
      "following_url": "https://api.github.com/users/pythonesque/following{/other_user}",
      "gists_url": "https://api.github.com/users/pythonesque/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pythonesque/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pythonesque/subscriptions",
      "organizations_url": "https://api.github.com/users/pythonesque/orgs",
      "repos_url": "https://api.github.com/users/pythonesque/repos",
      "events_url": "https://api.github.com/users/pythonesque/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pythonesque/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-23T21:26:32Z",
    "updated_at": "2014-12-23T21:26:40Z",
    "body": "Wait, `lock()` doesn't take a mutable reference to the `Mutex`?  Weird, isn't that guaranteed to deadlock on Unix?\n\nAnyway, since you could have aliased `Mutex`s in the same thread even if that were changed, I think Windows mutexes need an additional check for safety (Windows fast mutexes look like they have too many limitations to be a drop in replacement).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68000287/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68000764",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68000764",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68000764,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDAwNzY0",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-23T21:31:50Z",
    "updated_at": "2014-12-23T21:31:50Z",
    "body": "`lock` can't take `&mut self`. That'd be a guarantee that the caller has exclusive access to the mutex, which defeats the entire point.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68000764/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68001102",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68001102",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68001102,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDAxMTAy",
    "user": {
      "login": "pythonesque",
      "id": 923144,
      "node_id": "MDQ6VXNlcjkyMzE0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/923144?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pythonesque",
      "html_url": "https://github.com/pythonesque",
      "followers_url": "https://api.github.com/users/pythonesque/followers",
      "following_url": "https://api.github.com/users/pythonesque/following{/other_user}",
      "gists_url": "https://api.github.com/users/pythonesque/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pythonesque/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pythonesque/subscriptions",
      "organizations_url": "https://api.github.com/users/pythonesque/orgs",
      "repos_url": "https://api.github.com/users/pythonesque/repos",
      "events_url": "https://api.github.com/users/pythonesque/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pythonesque/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-23T21:35:54Z",
    "updated_at": "2014-12-23T21:35:54Z",
    "body": "Oh right, it has to be shared in the first place.  Heh.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68001102/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68346899",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68346899",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68346899,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MzQ2ODk5",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-30T10:44:43Z",
    "updated_at": "2014-12-30T10:44:43Z",
    "body": "What are the limitations of fast mutexes that prevent us from using them?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68346899/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68389997",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68389997",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68389997,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4Mzg5OTk3",
    "user": {
      "login": "pythonesque",
      "id": 923144,
      "node_id": "MDQ6VXNlcjkyMzE0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/923144?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pythonesque",
      "html_url": "https://github.com/pythonesque",
      "followers_url": "https://api.github.com/users/pythonesque/followers",
      "following_url": "https://api.github.com/users/pythonesque/following{/other_user}",
      "gists_url": "https://api.github.com/users/pythonesque/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pythonesque/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pythonesque/subscriptions",
      "organizations_url": "https://api.github.com/users/pythonesque/orgs",
      "repos_url": "https://api.github.com/users/pythonesque/repos",
      "events_url": "https://api.github.com/users/pythonesque/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pythonesque/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-30T19:44:09Z",
    "updated_at": "2014-12-30T19:44:09Z",
    "body": "@sivadeilra and I discussed this and he recommends just adding a flag and checking it manually on Windows.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68389997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68390454",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68390454",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68390454,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MzkwNDU0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-30T19:49:19Z",
    "updated_at": "2014-12-30T19:49:19Z",
    "body": "@retep998 I don't think there are any limitations (we're currently using them), this is just a surprising consequence of using them.\n\n@pythonesque yeah I suspect that `sys::mutex::Mutex` will have specific code on windows for a separate `UnsafeCell<uint>` which is inspected once the lock is acquired (using `GetCurrentThreadId`) and if the same thread acquires the mutex twice it just panics.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68390454/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68421207",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68421207",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68421207,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDIxMjA3",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T03:32:57Z",
    "updated_at": "2014-12-31T03:32:57Z",
    "body": "According to the current code we use Critical Sections for Mutexes on Windows.\nhttps://github.com/rust-lang/rust/blob/master/src/libstd/sys/windows/mutex.rs\nFast/Guarded mutexes are a separate thing entirely and will deadlock if you attempt to lock them twice on the same thread.\nhttp://msdn.microsoft.com/en-us/library/windows/hardware/ff545716%28v=vs.85%29.aspx\nThe MSVC C++ implementation for `std::mutex` checks if the locked thread is the current thread before even trying to lock it and throws an exception if it is.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68421207/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68421819",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68421819",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68421819,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDIxODE5",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T03:52:16Z",
    "updated_at": "2014-12-31T03:52:16Z",
    "body": "Whoa! I had no idea that \"fast mutexes\" was a thing. I thought there were only [inter-process mutexes](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684266%28v=vs.85%29.aspx) and [critical sections](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682530%28v=vs.85%29.aspx). \n\nIt looks like the \"fast mutexes\" or \"guarded mutexes\" are only for drivers, and maybe not for userland code? Or at least I couldn't figure out how to use them. Do you have pointers to the source for MSVC's implementation, or how to use them?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68421819/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68423227",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68423227",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68423227,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDIzMjI3",
    "user": {
      "login": "pythonesque",
      "id": 923144,
      "node_id": "MDQ6VXNlcjkyMzE0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/923144?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pythonesque",
      "html_url": "https://github.com/pythonesque",
      "followers_url": "https://api.github.com/users/pythonesque/followers",
      "following_url": "https://api.github.com/users/pythonesque/following{/other_user}",
      "gists_url": "https://api.github.com/users/pythonesque/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pythonesque/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pythonesque/subscriptions",
      "organizations_url": "https://api.github.com/users/pythonesque/orgs",
      "repos_url": "https://api.github.com/users/pythonesque/repos",
      "events_url": "https://api.github.com/users/pythonesque/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pythonesque/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T04:38:29Z",
    "updated_at": "2014-12-31T04:39:28Z",
    "body": "Yeah, the bits that made it seem like they were only for drivers was why I said we probably couldn't use them.  Apparently critical sections are the fastest userland ones you should use.  On a related note, it might be worth clarifying in the `Mutex` documentation that they aren't intended to be used between processes (maybe it's already there, but I don't recall seeing it).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68423227/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68423843",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68423843",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68423843,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDIzODQz",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T05:00:32Z",
    "updated_at": "2014-12-31T05:00:32Z",
    "body": "According to some debugging, on Windows 8.1 x64, MSVC uses `SRWLock` for `std::mutex` instead of `CriticalSection`. I'm going to do some benchmarking to determine their performance difference. As an added bonus, you can sleep a `ConditionVariable` on an `SRWLock` in Windows which Rust could provide as a platform specific extension trait.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68423843/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68424761",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68424761",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68424761,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDI0NzYx",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T05:36:45Z",
    "updated_at": "2014-12-31T05:49:13Z",
    "body": "And this is pretty conclusive. I did a test with two threads constantly locking and unlocking the same mutex. When I used `CriticalSection` it took about 260ns per lock+unlock. When I used `SRWLock` it took about 60ns per lock+unlock.\nhttp://puu.sh/dSHEP/c304111d25.txt\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68424761/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68425133",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68425133",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68425133,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDI1MTMz",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T05:52:01Z",
    "updated_at": "2014-12-31T05:52:45Z",
    "body": "On my beefy Win7 x64 gaming rig, I get a rock-solid 26ns for RW, and a fluctuating 70-80ns for Critical.\n\nFaster _and_ more reliable.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68425133/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68425776",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68425776",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68425776,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDI1Nzc2",
    "user": {
      "login": "pythonesque",
      "id": 923144,
      "node_id": "MDQ6VXNlcjkyMzE0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/923144?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pythonesque",
      "html_url": "https://github.com/pythonesque",
      "followers_url": "https://api.github.com/users/pythonesque/followers",
      "following_url": "https://api.github.com/users/pythonesque/following{/other_user}",
      "gists_url": "https://api.github.com/users/pythonesque/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pythonesque/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pythonesque/subscriptions",
      "organizations_url": "https://api.github.com/users/pythonesque/orgs",
      "repos_url": "https://api.github.com/users/pythonesque/repos",
      "events_url": "https://api.github.com/users/pythonesque/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pythonesque/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T06:15:08Z",
    "updated_at": "2014-12-31T06:15:18Z",
    "body": "Oh wow, and they can't be acquired recursively either, so we wouldn't even need to do anything different from the other platforms.  Good find!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68425776/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68426027",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68426027",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68426027,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDI2MDI3",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T06:24:11Z",
    "updated_at": "2014-12-31T06:24:11Z",
    "body": "@pythonesque - Yep just tried acquiring an `SRWLock` twice on the same thread and it has deadlocked.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68426027/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68426200",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68426200",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68426200,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDI2MjAw",
    "user": {
      "login": "pythonesque",
      "id": 923144,
      "node_id": "MDQ6VXNlcjkyMzE0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/923144?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pythonesque",
      "html_url": "https://github.com/pythonesque",
      "followers_url": "https://api.github.com/users/pythonesque/followers",
      "following_url": "https://api.github.com/users/pythonesque/following{/other_user}",
      "gists_url": "https://api.github.com/users/pythonesque/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pythonesque/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pythonesque/subscriptions",
      "organizations_url": "https://api.github.com/users/pythonesque/orgs",
      "repos_url": "https://api.github.com/users/pythonesque/repos",
      "events_url": "https://api.github.com/users/pythonesque/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pythonesque/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T06:28:04Z",
    "updated_at": "2014-12-31T06:28:04Z",
    "body": "Hm, they look like they have other problems though:\n\n> There is no guarantee about the order in which threads that request ownership will be granted ownership; SRW locks are neither fair nor FIFO.\n\nDefaulting to an unfair lock doesn't seem like a good idea (unless your only goal is to win benchmarks).  But if MSVC++ is doing it...\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68426200/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68426224",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68426224",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68426224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDI2MjI0",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T06:28:33Z",
    "updated_at": "2014-12-31T06:28:52Z",
    "body": "We already use `SRWLock` for `RWLock` in Rust anyway.\nhttps://github.com/rust-lang/rust/blob/master/src/libstd/sys/windows/rwlock.rs\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68426224/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68434566",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68434566",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68434566,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDM0NTY2",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T10:35:13Z",
    "updated_at": "2014-12-31T10:35:13Z",
    "body": "@thestinger, what's the simple solution you have in mind? (Storing an extra flag internally?)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68434566/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68435833",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68435833",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68435833,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDM1ODMz",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T11:03:04Z",
    "updated_at": "2014-12-31T11:04:30Z",
    "body": "Some quick tests show that `CriticalSection` is indeed fairer than `SRWLock`.\nCriticalSection:\n\n```\n34171   32087   34549   25067   0       0       0       0       0       0\n40418   27530   33882   30486   0       0       0       0       0       0\n13877   31742   28593   39065   24009   0       0       0       0       0\n30863   26029   29152   26382   25551   0       0       0       0       0\n24567   25217   23325   25580   23492   16435   0       0       0       0\n19113   21615   23606   18665   28300   27893   0       0       0       0\n24753   22568   22606   22561   16146   25420   9746    0       0       0\n18139   19727   17637   19984   25940   21281   12959   0       0       0\n14938   12694   24798   19116   14594   14405   18209   14920   0       0\n16073   23406   14504   23900   15294   13880   17375   13068   0       0\n15506   16711   20121   15031   18179   16284   20653   15558   0       0\n14872   13808   15967   18741   22169   12231   14982   12377   14076   0\n25134   15375   12654   19882   12849   13015   16348   13682   13203   0\n13403   13560   14045   15284   18013   16664   16047   19306   13425   0\n5448    12843   13179   14318   15326   10203   22727   19956   12746   12418\n15951   14074   11454   14648   17843   12552   14109   13494   12543   14056\n14332   12718   13949   15113   16568   13259   15926   12378   13147   16045\n9892    13519   14725   12129   13071   12111   20561   13575   12737   20391\n8007    15212   19330   20983   10905   15684   7332    16555   14948   5042\n18892   16922   11213   3885    15867   17002   19348   830     14227   20773\n12939   15018   14149   13247   14292   13719   15672   13052   13053   17209\n12889   12095   14208   13656   16628   13973   20397   14235   12888   12264\n12849   13143   11709   16143   13620   13213   10585   19450   15283   17067\n13880   14551   13568   13072   15539   13406   13064   11765   13458   16932\n17342   13698   12702   9005    16266   12308   16181   12967   14432   16617\n12551   12264   16975   17913   12432   17250   12927   14446   12467   14826\n16225   22543   7888    12447   12939   8439    21196   8263    20920   13451\n9912    16791   14213   14521   13237   13768   15750   16222   17729   12213\n19113   4052    15270   7882    18009   16244   15204   13262   13159   14812\n12327   13482   19490   14220   10289   15407   14474   13937   6609    20744\n10804   12756   16694   18448   10703   13008   17756   14632   20425   6601\n16523   15259   13954   6909    14970   15050   14145   14234   14847   16760\n17305   21514   13950   14038   11952   12102   12307   16863   14319   6489\n16156   13567   10291   10395   12499   13230   13304   13531   20497   16017\n14035   13232   13811   13629   13807   15228   12951   14227   15944   13567\n18192   14164   9099    13043   13349   13584   13496   15798   14292   13682\n19019   11688   13174   13547   12121   20478   13253   14991   14269   11777\n13737   20448   12508   14319   16930   16030   12510   12691   12427   13317\n16577   10328   17387   10455   8043    12292   23642   18685   13417   13693\n13393   9173    12092   17458   4567    13900   14887   12802   19120   19896\n```\n\nSRWLock:\n\n```\n14950   35673   41991   45097   0       0       0       0       0       0\n28474   14421   40287   51305   0       0       0       0       0       0\n44944   35323   27909   28776   3682    0       0       0       0       0\n24781   28759   16158   34098   37222   0       0       0       0       0\n31306   4890    35027   40664   30966   0       0       0       0       0\n42811   1266    41404   22654   32755   0       0       0       0       0\n8612    36366   42335   17029   37768   0       0       0       0       0\n30595   18802   41117   35020   13337   0       0       0       0       0\n22939   23370   29415   28797   31042   1       0       0       0       0\n21774   27659   27204   29719   29502   0       0       0       0       0\n30967   28935   17961   28625   29074   0       0       0       0       0\n29716   25411   34458   31635   8904    13450   0       0       0       0\n30110   25604   31467   28732   1959    26036   0       0       0       0\n43507   25897   6716    21962   14358   31232   0       0       0       0\n38802   34657   0       32641   0       36822   0       0       0       0\n22617   47039   17330   0       15787   30837   0       0       0       0\n12971   1485    52151   27650   25521   11465   6654    0       0       0\n12710   24073   16559   25993   12784   13395   34478   0       0       0\n26570   19995   13982   22040   11775   18991   27860   0       0       0\n39311   18948   20103   18997   624     18489   10668   0       0       0\n38075   38007   0       34453   0       29134   0       0       0       0\n32527   32189   0       20248   12985   36962   9146    0       0       0\n31850   31152   0       0       25346   27119   29781   0       0       0\n22822   26172   21435   12707   16757   7626    20010   12587   0       0\n15776   20214   21782   14139   23846   0       26534   23167   0       0\n2214    26299   24346   3598    18175   27459   18998   15545   0       0\n22838   0       13965   21927   23436   17270   25427   20284   0       0\n27481   0       26135   21903   2864    0       37421   28664   0       0\n15463   26165   15571   9990    10626   13514   12882   36975   0       0\n26058   9737    21616   9448    15814   18939   17433   22365   0       0\n17786   14293   19036   26162   14943   17528   19337   8553    0       0\n26767   16439   12661   22420   15464   23073   13523   14101   0       0\n0       28728   0       29137   34603   0       26967   25072   0       0\n0       32623   0       30177   30979   0       26777   22745   0       0\n0       12298   0       35904   38813   0       25011   29945   1       0\n22021   12500   20687   13388   12768   13407   12275   21295   13410   0\n15918   20539   4433    12478   13587   17859   20414   16040   24186   0\n20186   16709   12291   18128   22137   19764   16334   5697    13276   0\n25518   12516   0       25367   21217   12223   12754   21593   12731   0\n21410   8873    19218   21208   26954   0       7345    23886   7939    0\n```\n\nEach row is 100ms apart. CPU has 4 cores/threads.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68435833/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68436724",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68436724",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68436724,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDM2NzI0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T11:24:31Z",
    "updated_at": "2014-12-31T11:24:31Z",
    "body": "@huonw: If you write a semaphore on top of it and hard-wire the count at 1, it will deadlock. There is probably a better way to do it. I think the older mutex type is already non-recursive but I think it's missing the syscall free fast path.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68436724/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68436806",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68436806",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68436806,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDM2ODA2",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T11:26:24Z",
    "updated_at": "2014-12-31T11:26:24Z",
    "body": "As of Windows Server 2003 SP1, `CriticalSection` doesn't use FIFO, which means it doesn't actually guarantee fairness.\nIf we're going to provide fair mutexes then we need to provide a solid fairness guarantee otherwise we might as well just use whatever is fastest.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68436806/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68437226",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-68437226",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 68437226,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDM3MjI2",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T11:37:12Z",
    "updated_at": "2014-12-31T11:37:12Z",
    "body": "After some clarification on IRC I have realized that fairness means low priority threads won't steal mutex lock time from higher priority threads.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68437226/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69642518",
    "html_url": "https://github.com/rust-lang/rust/issues/19962#issuecomment-69642518",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19962",
    "id": 69642518,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NjQyNTE4",
    "user": {
      "login": "mzabaluev",
      "id": 1198919,
      "node_id": "MDQ6VXNlcjExOTg5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1198919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzabaluev",
      "html_url": "https://github.com/mzabaluev",
      "followers_url": "https://api.github.com/users/mzabaluev/followers",
      "following_url": "https://api.github.com/users/mzabaluev/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzabaluev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzabaluev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzabaluev/subscriptions",
      "organizations_url": "https://api.github.com/users/mzabaluev/orgs",
      "repos_url": "https://api.github.com/users/mzabaluev/repos",
      "events_url": "https://api.github.com/users/mzabaluev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzabaluev/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-12T20:45:27Z",
    "updated_at": "2015-01-12T20:45:50Z",
    "body": "Apparently [`Static`]`RwLock` is non-recursive on Linux too, and easy to deadlock:\n\n``` rust\n#![allow(unstable)]\n\nuse std::sync::{StaticRwLock, RW_LOCK_INIT};\n\nstatic LOCK: StaticRwLock = RW_LOCK_INIT;\n\nfn main() {\n    let _read = LOCK.read();\n    let _write = LOCK.write();\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69642518/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
