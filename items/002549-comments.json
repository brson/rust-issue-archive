[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6216715",
    "html_url": "https://github.com/rust-lang/rust/issues/2549#issuecomment-6216715",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2549",
    "id": 6216715,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMTY3MTU=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-06-09T03:06:18Z",
    "updated_at": "2012-06-09T03:06:36Z",
    "body": "a long time back I blogged about some [thoughts in this direction](http://smallcultfollowing.com/babysteps/blog/2011/12/06/coroutines-for-rust/).  I still think this makes sense; it seems like the use cases are a bit clearer now than they were then.  Interestingly, `vec::each()` and `uint::range()` don't seem like good examples, but things like the calls to `swap()` in dvec are much more troublesome.  \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6216715/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6334629",
    "html_url": "https://github.com/rust-lang/rust/issues/2549#issuecomment-6334629",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2549",
    "id": 6334629,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMzQ2Mjk=",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-06-14T17:08:42Z",
    "updated_at": "2012-06-14T17:08:42Z",
    "body": "Marking as RFC.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6334629/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7042262",
    "html_url": "https://github.com/rust-lang/rust/issues/2549#issuecomment-7042262",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2549",
    "id": 7042262,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDIyNjI=",
    "user": {
      "login": "eholk",
      "id": 105766,
      "node_id": "MDQ6VXNlcjEwNTc2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eholk",
      "html_url": "https://github.com/eholk",
      "followers_url": "https://api.github.com/users/eholk/followers",
      "following_url": "https://api.github.com/users/eholk/following{/other_user}",
      "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eholk/subscriptions",
      "organizations_url": "https://api.github.com/users/eholk/orgs",
      "repos_url": "https://api.github.com/users/eholk/repos",
      "events_url": "https://api.github.com/users/eholk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eholk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-17T17:14:24Z",
    "updated_at": "2012-07-17T17:14:24Z",
    "body": "We had some discussion about this a while ago and it seems like we might be able to do this with just the kinds on the closure. It will require some type system tweaks though.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7042262/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7569796",
    "html_url": "https://github.com/rust-lang/rust/issues/2549#issuecomment-7569796",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2549",
    "id": 7569796,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1Njk3OTY=",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-08-07T22:59:08Z",
    "updated_at": "2012-08-07T23:00:02Z",
    "body": "Can it be at most once, or does it have to be exactly once? I favour this - the call-exactly-once pattern is quite common.\n\nFor example, is this ok?\n\n```\nlet x = noncopyable();\ndo some_option.iter |maybe_value| {\n    ... move x ...\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7569796/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7569850",
    "html_url": "https://github.com/rust-lang/rust/issues/2549#issuecomment-7569850",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2549",
    "id": 7569850,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1Njk4NTA=",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-08-07T23:01:35Z",
    "updated_at": "2012-08-07T23:01:35Z",
    "body": "+1. GHC has a notion of \"one-shot lambdas\", too, fwiw.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7569850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7570955",
    "html_url": "https://github.com/rust-lang/rust/issues/2549#issuecomment-7570955",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2549",
    "id": 7570955,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NzA5NTU=",
    "user": {
      "login": "eholk",
      "id": 105766,
      "node_id": "MDQ6VXNlcjEwNTc2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eholk",
      "html_url": "https://github.com/eholk",
      "followers_url": "https://api.github.com/users/eholk/followers",
      "following_url": "https://api.github.com/users/eholk/following{/other_user}",
      "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eholk/subscriptions",
      "organizations_url": "https://api.github.com/users/eholk/orgs",
      "repos_url": "https://api.github.com/users/eholk/repos",
      "events_url": "https://api.github.com/users/eholk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eholk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-08-07T23:52:11Z",
    "updated_at": "2012-08-07T23:52:11Z",
    "body": "I think there's probably cases where we would want both \"at least once\" and \"at most once.\"\n\nAt least once:\n\n```\nlet mut x;\ndo some_option.iter |y| {\n    x = y;\n}\n```\n\nAt least once guarantees that `x` is initialized after the call to `some_option.iter`. (Obviously `option::iter` would not be able to use the \"at least once\" restriction)\n\nWith at most once, we gain the ability to move out of a closure during the function call.\n\nAlso, with both at most once and at least once we can have exactly once too.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7570955/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7572717",
    "html_url": "https://github.com/rust-lang/rust/issues/2549#issuecomment-7572717",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2549",
    "id": 7572717,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NzI3MTc=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-08-08T01:41:40Z",
    "updated_at": "2012-08-08T01:41:40Z",
    "body": "I think \"at least once\" is going to be somewhat tricky.  We have to think about what it means, e.g., to fail when you have not executed such a closure.  Our lack of recoverable exceptions should help here though.  I guess it means that the closure cannot be dropped except in the case of failure?  Still, it makes me nervous.  At most once seems much closer to what we have.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7572717/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16798308",
    "html_url": "https://github.com/rust-lang/rust/issues/2549#issuecomment-16798308",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2549",
    "id": 16798308,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2Nzk4MzA4",
    "user": {
      "login": "bstrie",
      "id": 865233,
      "node_id": "MDQ6VXNlcjg2NTIzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bstrie",
      "html_url": "https://github.com/bstrie",
      "followers_url": "https://api.github.com/users/bstrie/followers",
      "following_url": "https://api.github.com/users/bstrie/following{/other_user}",
      "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions",
      "organizations_url": "https://api.github.com/users/bstrie/orgs",
      "repos_url": "https://api.github.com/users/bstrie/repos",
      "events_url": "https://api.github.com/users/bstrie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bstrie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-04-22T16:20:05Z",
    "updated_at": "2013-04-22T16:20:05Z",
    "body": "Nominated so that Cell becomes less necessary.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16798308/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16800916",
    "html_url": "https://github.com/rust-lang/rust/issues/2549#issuecomment-16800916",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2549",
    "id": 16800916,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2ODAwOTE2",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-04-22T16:50:33Z",
    "updated_at": "2013-04-22T16:50:33Z",
    "body": "This is partly implemented. I believe the type system support is generally ok but there is no integration with liveness and trans. The most straight-forward way to update liveness is to modify it into a forward-propagating system (most of the infrastructure for which is being added for borrowck). Forward propagation means that it will be hard to emit existing warnings regarding dead assignments, unless we keep the existing liveness code around just for that purpose. In a meeting it was discussed moving to a control-flow graph for this purpose: I think this is a good long-term plan but I found the design constraints somewhat non-obvious so decided to defer until a first version of #5074 is done. (In particular, if we do a plain-jane CFG, we could probably use it for data-flow but not much else, whereas a somewhat more advanced CFG could simplify liveness, borrow checker, trans and numerous other passes by making explicit some of the implicit transformations that take place today such adjustments, for loop closures, etc)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16800916/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17028945",
    "html_url": "https://github.com/rust-lang/rust/issues/2549#issuecomment-17028945",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2549",
    "id": 17028945,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MDI4OTQ1",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-04-25T17:54:51Z",
    "updated_at": "2013-04-25T17:54:51Z",
    "body": "While this looks like \"just an addition\", it'll probably change all library APIs, so it's a backwards compatibility hazard.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17028945/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19421565",
    "html_url": "https://github.com/rust-lang/rust/issues/2549#issuecomment-19421565",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2549",
    "id": 19421565,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NDIxNTY1",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-13T20:07:18Z",
    "updated_at": "2013-06-13T20:07:18Z",
    "body": "I don't think it's a backwards compatibility hazard... a library with `once` on some of its argument closures would permit strictly more code to link against it than the same library without.\n\nThe only place `once` could be more restrictive is in a covariant position (in a 3rd-order, or any higher odd-numbered order, function). For example, if you had:\n\n```\nfn foo(arg: fn(callback: once fn())) {\n    let x = NonCopyable;\n    do arg { move_out_of(x); }; // requires arg's argument to be 1-shot, to move out\n}\n```\n\nThen you couldn't use it with:\n\n```\nfn bar() {\n    do foo |callback| {\n        callback();\n        callback();\n    }\n}\n```\n\nBut, if you ship rust-1.0 without `once`, then no such library function `foo` can exist that relies on the once-ness of its argument's argument.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19421565/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19421926",
    "html_url": "https://github.com/rust-lang/rust/issues/2549#issuecomment-19421926",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2549",
    "id": 19421926,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NDIxOTI2",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-13T20:13:13Z",
    "updated_at": "2013-06-13T20:14:12Z",
    "body": "By the way, what do y'all think of a compiler warning to warn when an argument closure is not declared `once`, but only called once? It could be off by default, but enabled for libstd and libextra, to make our libraries higher quality.\n\nThe possible problem would be if you had a function that currently only called a function once but didn't want to provide that guarantee to the caller. So there would have to be a way to squelch the warning without taking its suggestion.\n\ne.g.:\n\n```\nfn chain<T>(x: Option<T>, blk: fn(T) -> Option<T>) -> Option<T> {\n    match x { Some(x2) => blk(x2), None => None }\n}\n```\n\nwould produce something like `warning: argument closure is only called once; please write \"once fn\" or use #[allow(non_once_fn)]`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19421926/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19588158",
    "html_url": "https://github.com/rust-lang/rust/issues/2549#issuecomment-19588158",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2549",
    "id": 19588158,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NTg4MTU4",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-18T02:54:53Z",
    "updated_at": "2013-06-18T16:07:22Z",
    "body": "I went through the libraries and looked for use cases where one-shot closures would let us avoid using Cells specifically in the case of _stack_ closures, assuming heap closures get replaced by traits, in an attempt to motivate needing one-shot functions anyway. Results are as follows:\n\n```\nin scheduler:\n        Local::borrow::<Scheduler>() -- 11 once uses (19 total)\n        deschedule_running_task_and_then -- safety guarantee, plus 4 once uses (23 total)\nassorted libraries:\n        exclusive.with -- 3 uses\n        arc/semaphore/mutex/rwlock access() -- 3 uses\n        Finally's do ... finally ... pattern -- 1 once use (21 total)\n        task::unkillable -- 1 once use (27 total)\nin servo:\n        fn profile -- 2 once uses (11 total)\n        fn with_imm_text in AbstractNode -- 1 once use (2 total)\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19588158/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19847815",
    "html_url": "https://github.com/rust-lang/rust/issues/2549#issuecomment-19847815",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2549",
    "id": 19847815,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODQ3ODE1",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-22T00:44:31Z",
    "updated_at": "2013-06-22T00:44:31Z",
    "body": "When stack closures become noncopyable, `fn indent` in librustc wants this too.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19847815/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
