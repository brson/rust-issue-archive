[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6682641",
    "html_url": "https://github.com/rust-lang/rust/issues/2761#issuecomment-6682641",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2761",
    "id": 6682641,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODI2NDE=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-06-30T04:31:51Z",
    "updated_at": "2012-06-30T04:33:53Z",
    "body": "I like the macro idea. The error message could be optional. At that point we could remove `assert` from the language. If we used bang for macros then we write `assert ! condition` or `assert ! (condition, \"message\")`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6682641/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6682945",
    "html_url": "https://github.com/rust-lang/rust/issues/2761#issuecomment-6682945",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2761",
    "id": 6682945,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODI5NDU=",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-06-30T05:47:24Z",
    "updated_at": "2012-06-30T05:47:24Z",
    "body": "whoa, are you sure it's a good idea to have people write \"!condition\" to mean \"condition must hold\"? c.c\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6682945/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6683531",
    "html_url": "https://github.com/rust-lang/rust/issues/2761#issuecomment-6683531",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2761",
    "id": 6683531,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODM1MzE=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-06-30T07:40:36Z",
    "updated_at": "2012-06-30T07:40:36Z",
    "body": "I did think it was a good idea, but it is clearly not.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6683531/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6688126",
    "html_url": "https://github.com/rust-lang/rust/issues/2761#issuecomment-6688126",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2761",
    "id": 6688126,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODgxMjY=",
    "user": {
      "login": "eholk",
      "id": 105766,
      "node_id": "MDQ6VXNlcjEwNTc2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eholk",
      "html_url": "https://github.com/eholk",
      "followers_url": "https://api.github.com/users/eholk/followers",
      "following_url": "https://api.github.com/users/eholk/following{/other_user}",
      "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eholk/subscriptions",
      "organizations_url": "https://api.github.com/users/eholk/orgs",
      "repos_url": "https://api.github.com/users/eholk/repos",
      "events_url": "https://api.github.com/users/eholk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eholk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-06-30T20:10:04Z",
    "updated_at": "2012-06-30T20:10:04Z",
    "body": "I think we can already write this with the existing macro system. Does this work?\n\n```\n#macro[\n    [#assert[cond], if !(cond) { fail }],\n    [#assert[cond, message], if !(cond) { fail message }]\n];\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6688126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6688231",
    "html_url": "https://github.com/rust-lang/rust/issues/2761#issuecomment-6688231",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2761",
    "id": 6688231,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODgyMzE=",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-06-30T20:24:27Z",
    "updated_at": "2012-06-30T20:25:48Z",
    "body": "It should still also print the file and line number, and ideally also the containing function, in either case (with message or not).\n\n(this is me being demanding without knowing how to do macros on my own.)\n\nOh yeah, also the macro hygiene issue. It should be wrapped in whatever rust's equivalent of C's \"do { .. } while (0)\" is.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6688231/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6689107",
    "html_url": "https://github.com/rust-lang/rust/issues/2761#issuecomment-6689107",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2761",
    "id": 6689107,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODkxMDc=",
    "user": {
      "login": "eholk",
      "id": 105766,
      "node_id": "MDQ6VXNlcjEwNTc2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eholk",
      "html_url": "https://github.com/eholk",
      "followers_url": "https://api.github.com/users/eholk/followers",
      "following_url": "https://api.github.com/users/eholk/following{/other_user}",
      "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eholk/subscriptions",
      "organizations_url": "https://api.github.com/users/eholk/orgs",
      "repos_url": "https://api.github.com/users/eholk/repos",
      "events_url": "https://api.github.com/users/eholk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eholk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-06-30T22:35:57Z",
    "updated_at": "2012-06-30T22:35:57Z",
    "body": "This does most of what you want. Unfortunately, it shows you the line number where the macro was defined, rather than where the macro was invoked. There's a case to be made that this is wrong behavior for `#line`, or maybe we need `#invocation_line` instead.\n\n```\nfn macros() {\n    #macro[\n        [#assert[cond],\n         (#assert[cond, \"%s\", #stringify(cond)])],\n        [#assert[cond, message, args, ...],\n         {\n             if !(cond) { fail #fmt(\"Assertion failed at %s:%u: %s\",\n                                    #file(), #line(),\n                                    /* #stringify(cond) */\n                                   #fmt(message, args, ...)) }\n         }]\n    ];\n}\n\nfn main() {\n    #assert(true);\n    #assert(\"123\" == \"4 5 6\",\n            \"This was supposed to go wrong.\");\n    #assert(\"1\" == \"2\");\n    #assert(\"123\" == \"3 4 5\", \"This was supposed to go wrong\");\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6689107/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/9118712",
    "html_url": "https://github.com/rust-lang/rust/issues/2761#issuecomment-9118712",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2761",
    "id": 9118712,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkxMTg3MTI=",
    "user": {
      "login": "burg",
      "id": 70680,
      "node_id": "MDQ6VXNlcjcwNjgw",
      "avatar_url": "https://avatars.githubusercontent.com/u/70680?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/burg",
      "html_url": "https://github.com/burg",
      "followers_url": "https://api.github.com/users/burg/followers",
      "following_url": "https://api.github.com/users/burg/following{/other_user}",
      "gists_url": "https://api.github.com/users/burg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/burg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/burg/subscriptions",
      "organizations_url": "https://api.github.com/users/burg/orgs",
      "repos_url": "https://api.github.com/users/burg/repos",
      "events_url": "https://api.github.com/users/burg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/burg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-10-03T19:22:59Z",
    "updated_at": "2012-10-03T19:22:59Z",
    "body": "This macro has been added to Servo, btw. I was looking for an NS_ASSERT equivalent.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/9118712/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
