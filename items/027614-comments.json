[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129197304",
    "html_url": "https://github.com/rust-lang/rust/issues/27614#issuecomment-129197304",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27614",
    "id": 129197304,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTE5NzMwNA==",
    "user": {
      "login": "silene",
      "id": 1674458,
      "node_id": "MDQ6VXNlcjE2NzQ0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1674458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/silene",
      "html_url": "https://github.com/silene",
      "followers_url": "https://api.github.com/users/silene/followers",
      "following_url": "https://api.github.com/users/silene/following{/other_user}",
      "gists_url": "https://api.github.com/users/silene/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/silene/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/silene/subscriptions",
      "organizations_url": "https://api.github.com/users/silene/orgs",
      "repos_url": "https://api.github.com/users/silene/repos",
      "events_url": "https://api.github.com/users/silene/events{/privacy}",
      "received_events_url": "https://api.github.com/users/silene/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-09T15:10:13Z",
    "updated_at": "2015-08-09T15:10:13Z",
    "body": "For the sake of completeness, I should mention that adding a trivial let statement is sufficient for the loop to compile, but that should not be needed in a ideal world.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129197304/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129198587",
    "html_url": "https://github.com/rust-lang/rust/issues/27614#issuecomment-129198587",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27614",
    "id": 129198587,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTE5ODU4Nw==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-09T15:21:25Z",
    "updated_at": "2015-08-09T15:21:25Z",
    "body": "@silene \n\nThis is well-known. If `p` had a destructor, it would be unsafe too.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129198587/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129533748",
    "html_url": "https://github.com/rust-lang/rust/issues/27614#issuecomment-129533748",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27614",
    "id": 129533748,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTUzMzc0OA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-10T17:21:19Z",
    "updated_at": "2015-08-10T17:21:19Z",
    "body": "This can be worked around by doing something like `let tmp = p` at the top of the loop and then re-assigning to `p` later on through `tmp`. Otherwise this should be covered by https://github.com/rust-lang/rfcs/issues/811, so closing in favor of that.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129533748/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129736347",
    "html_url": "https://github.com/rust-lang/rust/issues/27614#issuecomment-129736347",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27614",
    "id": 129736347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTczNjM0Nw==",
    "user": {
      "login": "silene",
      "id": 1674458,
      "node_id": "MDQ6VXNlcjE2NzQ0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1674458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/silene",
      "html_url": "https://github.com/silene",
      "followers_url": "https://api.github.com/users/silene/followers",
      "following_url": "https://api.github.com/users/silene/following{/other_user}",
      "gists_url": "https://api.github.com/users/silene/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/silene/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/silene/subscriptions",
      "organizations_url": "https://api.github.com/users/silene/orgs",
      "repos_url": "https://api.github.com/users/silene/repos",
      "events_url": "https://api.github.com/users/silene/events{/privacy}",
      "received_events_url": "https://api.github.com/users/silene/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-11T07:13:18Z",
    "updated_at": "2015-08-11T07:13:18Z",
    "body": "Yes, `let tmp = p` is what I meant by \"adding a trivial let statement\".\n\nHowever, I somehow doubt rust-lang/rfcs#811 will be of any help here. Even if borrows were dataflow-sensitive, the example above would still not pass. Indeed, the issue is not with the None branch (the RFC would be helpful there), it is with the Some branch. The example really involves two `&mut` borrows on `p` at the same time.\n\nBelow is a less simplified example: insertion in a sorted list. Hopefully, one day, the five extra lines (and their associated runtime cost) will no longer be needed to make the borrow checker happy.\n\n```\nfn insert<T:Ord>(v: T, mut l: &mut List<T>) {\n  loop {\n    match *l {\n      None => break,\n      Some(ref mut m) => {\n        let m = &mut **m;\n        match v.cmp(&m.elem) {\n          std::cmp::Ordering::Less => break,\n          _ => {} // should have been: l = &mut m.next\n        }\n      }\n    };\n    // the 5 next lines are needed only to make the borrow checker happy\n    let m = l;\n    match *m {\n      None => panic!(),\n      Some(ref mut m) => l = &mut m.next\n    }\n  }\n  // do the insertion\n}\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129736347/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
