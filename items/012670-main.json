{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/12670",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/12670/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/12670/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/12670/events",
  "html_url": "https://github.com/rust-lang/rust/pull/12670",
  "id": 28617336,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTMxMTA3MTI=",
  "number": 12670,
  "title": "syntax: fixed ICEs and incorrect line nums when reporting Spans at the end of the file.",
  "user": {
    "login": "dmski",
    "id": 1293095,
    "node_id": "MDQ6VXNlcjEyOTMwOTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1293095?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dmski",
    "html_url": "https://github.com/dmski",
    "followers_url": "https://api.github.com/users/dmski/followers",
    "following_url": "https://api.github.com/users/dmski/following{/other_user}",
    "gists_url": "https://api.github.com/users/dmski/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dmski/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dmski/subscriptions",
    "organizations_url": "https://api.github.com/users/dmski/orgs",
    "repos_url": "https://api.github.com/users/dmski/repos",
    "events_url": "https://api.github.com/users/dmski/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dmski/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 12,
  "created_at": "2014-03-03T12:07:57Z",
  "updated_at": "2014-06-12T11:32:47Z",
  "closed_at": "2014-03-10T20:37:11Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/12670",
    "html_url": "https://github.com/rust-lang/rust/pull/12670",
    "diff_url": "https://github.com/rust-lang/rust/pull/12670.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/12670.patch",
    "merged_at": "2014-03-10T20:37:12Z"
  },
  "body": "CodeMap.span_to_\\* perform a lookup of a BytePos(sp.hi), which lands into the next filemap if the last byte of range denoted by Span is also the last byte of the filemap, which results in ICEs or incorrect error reports.\n\n``````\n    Example:\n        ````\n\n        pub fn main() {\n            let mut num = 3;\n            let refe = &mut num;\n            *refe = 5;\n            println!(\"{}\", num);\n        }````\n``````\n\n(note the empty line in the beginning and the absence of newline at the end)\n\nThe above would have caused ICE when trying to report where \"refe\" borrow ends.\nThe above without an empty line in the beginning would have reported borrow end to be the first line.\n\nMost probably, this is also responsible for (at least some occurrences of) issue #8256.\n\nThe issue is fixed by always adding a newline at the end of non-empty filemaps in case there isn't a new line there already.\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/12670/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/12670/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
