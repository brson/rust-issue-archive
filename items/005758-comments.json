[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16116315",
    "html_url": "https://github.com/rust-lang/rust/pull/5758#issuecomment-16116315",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/5758",
    "id": 16116315,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MTE2MzE1",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-04-09T14:38:30Z",
    "updated_at": "2013-04-09T14:38:30Z",
    "body": "This is good work but I think the approach isn't quite congruent with how we normally do things.  Whether or not a struct is packed is really a detail of its representation, and is not a concern of the type system, so I think we should not modify `ty_struct`.\n\nThere are two common patterns to this approach.\n\nOne is to add a side table in the type context (indexed by the struct's def-id) to indicate whether or not a struct is packed.  Typically, for things local to the crate, these side tables are populated during the \"collect\" phase of type check (i.e., `typeck/collect.rs`). For structs found in external crates, a bit of data is stuffed into the metadata and a new routine is added to `csearch`.  An example of this pattern is the `cx.supertraits` table, which is queried by `trait_supertraits`.\n\nHowever, a cache might be overkill, since the \"packed\" information is only relevant to `type_of` (I think?) and there is _already_ a cache in `type_of` to prevent us from processing the same struct over and over, so perhaps a better pattern to follow would be `provided_trait_methods()`, which avoids building up any data structure.  Instead, if the struct is defined within the current crate, the accessor could use the ast map and check the attributes.  If the struct is defined within another crate, the accessor would use `csearch` to decode the information out of the crate metadata. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16116315/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16149753",
    "html_url": "https://github.com/rust-lang/rust/pull/5758#issuecomment-16149753",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/5758",
    "id": 16149753,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MTQ5NzUz",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-04-10T01:01:08Z",
    "updated_at": "2013-04-10T01:01:08Z",
    "body": "Hm, thanks for the explanation. I'll try to fix that some time in the next week or so.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16149753/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
