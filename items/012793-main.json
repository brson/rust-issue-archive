{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/12793",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/12793/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/12793/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/12793/events",
  "html_url": "https://github.com/rust-lang/rust/pull/12793",
  "id": 29063413,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTMzNTQ2NTY=",
  "number": 12793,
  "title": "Binary installer tarballs",
  "user": {
    "login": "brson",
    "id": 147214,
    "node_id": "MDQ6VXNlcjE0NzIxNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brson",
    "html_url": "https://github.com/brson",
    "followers_url": "https://api.github.com/users/brson/followers",
    "following_url": "https://api.github.com/users/brson/following{/other_user}",
    "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
    "organizations_url": "https://api.github.com/users/brson/orgs",
    "repos_url": "https://api.github.com/users/brson/repos",
    "events_url": "https://api.github.com/users/brson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brson/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2014-03-09T21:40:49Z",
  "updated_at": "2014-06-13T11:16:58Z",
  "closed_at": "2014-03-11T06:52:03Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/12793",
    "html_url": "https://github.com/rust-lang/rust/pull/12793",
    "diff_url": "https://github.com/rust-lang/rust/pull/12793.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/12793.patch",
    "merged_at": "2014-03-11T06:52:04Z"
  },
  "body": "Work towards #9876.\n\nSeveral minor things here:\n- Fix the `need_ok` function in `configure`\n- Install man pages with non-executable permissions\n- Use the correct directory for man pages when installing (this was a recent regression)\n- Put all distributables in a new `dist/` directory in the build directory (there are soon to be significantly more of these)\n\nFinally, this also creates a new, more precise way to install and uninstall Rust's files, the `install.sh` script, and creates a build target (currently `dist-tar-bins`) that creates a binary tarball containing all the installable files, boilerplate and license docs, and `install.sh`.\n\nThis binary tarball is the lowest-common denominator way to install Rust on Unix. We'll use it as the default installer on Linux (OS X will use .pkg).\n## How `install.sh` works\n- First, the makefiles (`prepare.mk` and `dist.mk`) put all the stuff that needs to be installed in a new directory in `dist/`.\n- Then it puts `install.sh` in that same directory and a list of all the files to install at `rustlib/manifest`.\n- Then the directory can be packaged and distributed.\n- When `install.sh` runs it does some sanity checking then copies everything in the manifest to the install prefix, then copies the manifest as well.\n- When `install.sh` runs again in the future it first looks for the existing manifest at the install prefix, and if it exists deletes everything in it. This is how the core distribution is upgraded - cargo is responsible for the rest.\n- `install.sh --uninstall` will uninstall Rust\n## Future work:\n- Modify `install.sh` to accept `--man-dir` etc\n- Rewrite `install.mk` to delegate to `install.sh`\n- Investigate how `install.sh` does or doesn't work with .pkg on Mac\n- Modify `dist.mk` to create `.pkg` files for all hosts\n- Possibly use [makeself](http://www.megastep.org/makeself/) to create self-extracting installers\n- Modify dist-snap bots run on mac as well, uploading binary tarballs and .pkg files for the four combos of linux, mac, x86, and x86_64.\n- Adjust build system to be able to augment versions with '-nightly'\n- Adjust build system to name dist artifacts without version numbers e.g. `rust-nightly-...pkg`. This is so we don't leave a huge trail of old nightly binaries on S3 - they just get overwritten.\n- Create new dist-nightly builder\n- Give the build master a new cron job to push to dist-nightly every night\n- Add docs to distributables\n- Update README.md to reflect the new reality\n- Modernize the website to promote new installers\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/12793/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/12793/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
