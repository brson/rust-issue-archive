[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72559494",
    "html_url": "https://github.com/rust-lang/rust/issues/21875#issuecomment-72559494",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21875",
    "id": 72559494,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNTU5NDk0",
    "user": {
      "login": "sinistersnare",
      "id": 2153833,
      "node_id": "MDQ6VXNlcjIxNTM4MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2153833?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sinistersnare",
      "html_url": "https://github.com/sinistersnare",
      "followers_url": "https://api.github.com/users/sinistersnare/followers",
      "following_url": "https://api.github.com/users/sinistersnare/following{/other_user}",
      "gists_url": "https://api.github.com/users/sinistersnare/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sinistersnare/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sinistersnare/subscriptions",
      "organizations_url": "https://api.github.com/users/sinistersnare/orgs",
      "repos_url": "https://api.github.com/users/sinistersnare/repos",
      "events_url": "https://api.github.com/users/sinistersnare/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sinistersnare/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-02T23:14:39Z",
    "updated_at": "2015-02-02T23:17:29Z",
    "body": "[playpen link](http://is.gd/b1xVNg)\n\nThe error shows exactly what is wrong in black and white...\n\nThey may go out of scope at the same time, but the lifetime of `bar` is shorter than `foo`, and that is exactly what the error says. Maybe in the future this could work, but I feel like the error is perfectly clear in its message? \n\nI think this has to do with the fact that lifetimes are lexical, which is not always what we want, but it is the way it is currently.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72559494/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73390021",
    "html_url": "https://github.com/rust-lang/rust/issues/21875#issuecomment-73390021",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21875",
    "id": 73390021,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMzkwMDIx",
    "user": {
      "login": "jimblandy",
      "id": 751272,
      "node_id": "MDQ6VXNlcjc1MTI3Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/751272?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimblandy",
      "html_url": "https://github.com/jimblandy",
      "followers_url": "https://api.github.com/users/jimblandy/followers",
      "following_url": "https://api.github.com/users/jimblandy/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimblandy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimblandy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimblandy/subscriptions",
      "organizations_url": "https://api.github.com/users/jimblandy/orgs",
      "repos_url": "https://api.github.com/users/jimblandy/repos",
      "events_url": "https://api.github.com/users/jimblandy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimblandy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-08T00:11:54Z",
    "updated_at": "2015-02-08T00:11:54Z",
    "body": "The problem here is that the old code used to compile, as of a few weeks ago - the set of permitted programs shrank. It certainly would be nice if programs like this were allowed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73390021/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73947577",
    "html_url": "https://github.com/rust-lang/rust/issues/21875#issuecomment-73947577",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21875",
    "id": 73947577,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczOTQ3NTc3",
    "user": {
      "login": "aidanhs",
      "id": 1050652,
      "node_id": "MDQ6VXNlcjEwNTA2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1050652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aidanhs",
      "html_url": "https://github.com/aidanhs",
      "followers_url": "https://api.github.com/users/aidanhs/followers",
      "following_url": "https://api.github.com/users/aidanhs/following{/other_user}",
      "gists_url": "https://api.github.com/users/aidanhs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aidanhs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aidanhs/subscriptions",
      "organizations_url": "https://api.github.com/users/aidanhs/orgs",
      "repos_url": "https://api.github.com/users/aidanhs/repos",
      "events_url": "https://api.github.com/users/aidanhs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aidanhs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-11T19:31:17Z",
    "updated_at": "2015-02-11T19:36:20Z",
    "body": "> the lifetime of bar is shorter than foo, and that is exactly what the error says\n\nThe message \"does not live long enough\" (from an English-language point of view) strictly means \"the lifetime of the variable must be extended to cover more of the program\", which is fairly non-specific. Having used rust a little since mid-Dec, my interpretation is \"the extension of the lifetime should probably happen at the end, rust only complains when things don't live long enough\".\n\nI've honestly no idea how I'd pick up that foo starting earlier than bar is a deal breaker without googling the error and finding this issue and http://users.rust-lang.org/t/why-how-lifetime-works-has-changed/256\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73947577/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73976082",
    "html_url": "https://github.com/rust-lang/rust/issues/21875#issuecomment-73976082",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21875",
    "id": 73976082,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczOTc2MDgy",
    "user": {
      "login": "jimblandy",
      "id": 751272,
      "node_id": "MDQ6VXNlcjc1MTI3Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/751272?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimblandy",
      "html_url": "https://github.com/jimblandy",
      "followers_url": "https://api.github.com/users/jimblandy/followers",
      "following_url": "https://api.github.com/users/jimblandy/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimblandy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimblandy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimblandy/subscriptions",
      "organizations_url": "https://api.github.com/users/jimblandy/orgs",
      "repos_url": "https://api.github.com/users/jimblandy/repos",
      "events_url": "https://api.github.com/users/jimblandy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimblandy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-11T22:12:18Z",
    "updated_at": "2015-02-11T22:12:44Z",
    "body": "Okay; it seems like this is a consequence of #21657, as aidanhs's link suggests. I no longer think this is a bug; it seems that this is the way Rust must behave.\n\nIssue #21657 changes the compiler to track lifetimes more carefully. For example, in code like this:\n\n``` rust\n{\n    let x: i32;\n    let y: i32;\n    let z: i32;\n}\n```\n\nthe pre-change compiler would treat these all as having the same scope: the block that contains them. Post-change, Rust treats `z` as having a scope _nested within_ that of `y`, which is in turn nested within the scope of `x`.\n\nIn the case of `i32` values, this doesn't matter, but for `Drop` types, it matters a lot. Let's make things a bit more complicated:\n\n``` rust\nstruct Grr<'a> {\n    r: &'a Box<i32>\n}\n\nimpl<'a> Drop for Grr<'a> {\n    fn drop(&mut self) {\n        println!(\"dropping {}\", *self.r);\n    }\n}\n\n#[test]\nfn good_borrow01() {\n    let mut r;\n    let i = box 10i32;\n    r = Grr { r: &i };\n    assert_eq!(**r.r, 10);\n}\n```\n\nIn this program, `i` and its box go out of scope first, and then `r`'s `drop` will try to use the box's contents.\n\nNote that you must sprinkle #[unsafe_destructor] all over the place to make this code compile, which seems exactly right: if this behavior is permitted, the language is not memory-safe.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73976082/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74079944",
    "html_url": "https://github.com/rust-lang/rust/issues/21875#issuecomment-74079944",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21875",
    "id": 74079944,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MDc5OTQ0",
    "user": {
      "login": "main--",
      "id": 754850,
      "node_id": "MDQ6VXNlcjc1NDg1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/754850?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/main--",
      "html_url": "https://github.com/main--",
      "followers_url": "https://api.github.com/users/main--/followers",
      "following_url": "https://api.github.com/users/main--/following{/other_user}",
      "gists_url": "https://api.github.com/users/main--/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/main--/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/main--/subscriptions",
      "organizations_url": "https://api.github.com/users/main--/orgs",
      "repos_url": "https://api.github.com/users/main--/repos",
      "events_url": "https://api.github.com/users/main--/events{/privacy}",
      "received_events_url": "https://api.github.com/users/main--/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-12T14:34:39Z",
    "updated_at": "2015-02-12T14:34:39Z",
    "body": "Yes, this is definitely caused by #21657. The `HashMap` example in there is how I initially stumbled upon this issue.\n\nIf I understood it correctly, my premise is already wrong:\n\n> foo and bar go out of scope simultaneously\n\nBecause as @jimblandy mentions, they really don't. Instead, the code compiles like this:\n\n``` rust\nfn main() {\n    let foo;\n    {\n        let bar = 1337;\n        {\n            foo = &bar;\n        }\n    }\n}\n```\n\nAnd suddenly it all makes sense: Of course the `&bar` inside of `foo` outlives `bar`!\n\nI can think of several solutions:\n- Because `foo` and `bar` are (in the original code) in the same scope, the compiler could be allowed to reorder when they go out of scope. However, that would obviously mean that the order of destruction is now undefined (but safe). Since you can always create scopes manually if you really need determinism here, that doesn't feel like a huge sacrifice to me right now, but as [not even C++](https://stackoverflow.com/questions/14688285/c-local-variable-destruction-order) has this kind of undefined behavior, there's probably some additional badness associated with it that I can't think of right now.\n- There are no `drop` calls involved in this example, so reordering when `foo` and `bar` go out of scope **can't** have observable consequences. Therefore, the compiler could be allowed to reorder at least these trivial cases (and maybe additionally calls to \"pure destructors\" as [proposed](https://github.com/rust-lang/rust/pull/21657#issuecomment-72331622) over at #21657).\n- At least provide a more helpful error message. I imagine this can be quite hard to track down in bigger functions, especially because the compiler shows you two _identical_ block suffixes that differ only by their start. This is really confusing, as it _seems_ to suggest that the error is due to `bar` **not yet** being alive when `foo` is declared. It doesn't make sense at all on its own, but in the end, this really is what causes the error because #21657 forces `foo`'s scope to _enclose_ `bar`'s scope. So the block suffixes are indeed different, but rustc doesn't _show_ that.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74079944/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74081783",
    "html_url": "https://github.com/rust-lang/rust/issues/21875#issuecomment-74081783",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21875",
    "id": 74081783,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MDgxNzgz",
    "user": {
      "login": "main--",
      "id": 754850,
      "node_id": "MDQ6VXNlcjc1NDg1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/754850?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/main--",
      "html_url": "https://github.com/main--",
      "followers_url": "https://api.github.com/users/main--/followers",
      "following_url": "https://api.github.com/users/main--/following{/other_user}",
      "gists_url": "https://api.github.com/users/main--/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/main--/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/main--/subscriptions",
      "organizations_url": "https://api.github.com/users/main--/orgs",
      "repos_url": "https://api.github.com/users/main--/repos",
      "events_url": "https://api.github.com/users/main--/events{/privacy}",
      "received_events_url": "https://api.github.com/users/main--/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-12T14:45:59Z",
    "updated_at": "2015-02-12T14:45:59Z",
    "body": "Now things get [weird](http://is.gd/zQTpnr):\n\n``` rust\nfn main() {\n    let foo: Box<&i32>;\n    let bar = 1337;\n    foo = Box::new(&bar);\n    { foo; } // kill foo\n    foo; // error expected, foo was moved\n    bar; // no error, bar is still alive\n}\n```\n\nAs expected, `bar` is still alive in the last line and as expected, `foo` can no longer be accessed after the move. But I strongly doubt that the other error message should be there:\n\n```\n<anon>:4:21: 4:24 error: `bar` does not live long enough\n<anon>:4     foo = Box::new(&bar);\n                             ^~~\n<anon>:2:23: 8:2 note: reference must be valid for the block suffix following statement 0 at 2:22...\n<anon>:2     let foo: Box<&i32>;\n<anon>:3     let bar = 1337;\n<anon>:4     foo = Box::new(&bar);\n<anon>:5     { foo; } // kill foo\n<anon>:6     foo;\n<anon>:7     bar;\n         ...\n<anon>:3:19: 8:2 note: ...but borrowed value is only valid for the block suffix following statement 1 at 3:18\n<anon>:3     let bar = 1337;\n<anon>:4     foo = Box::new(&bar);\n<anon>:5     { foo; } // kill foo\n<anon>:6     foo;\n<anon>:7     bar;\n<anon>:8 }\n<anon>:6:5: 6:8 error: use of moved value: `foo`\n<anon>:6     foo;\n             ^~~\n<anon>:5:7: 5:10 note: `foo` moved here because it has type `Box<&i32>`, which is non-copyable\n<anon>:5     { foo; } // kill foo\n               ^~~\nerror: aborting due to 2 previous errors\n```\n\nIt's the same error again! However, the last two lines show that `bar` is alive when `foo` is no longer. With its output, rustc apparently contradicts itself.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74081783/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74134944",
    "html_url": "https://github.com/rust-lang/rust/issues/21875#issuecomment-74134944",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21875",
    "id": 74134944,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MTM0OTQ0",
    "user": {
      "login": "jimblandy",
      "id": 751272,
      "node_id": "MDQ6VXNlcjc1MTI3Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/751272?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimblandy",
      "html_url": "https://github.com/jimblandy",
      "followers_url": "https://api.github.com/users/jimblandy/followers",
      "following_url": "https://api.github.com/users/jimblandy/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimblandy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimblandy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimblandy/subscriptions",
      "organizations_url": "https://api.github.com/users/jimblandy/orgs",
      "repos_url": "https://api.github.com/users/jimblandy/repos",
      "events_url": "https://api.github.com/users/jimblandy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimblandy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-12T19:24:47Z",
    "updated_at": "2015-02-12T19:24:47Z",
    "body": "A variable being moved from is not the same as its going out of scope, though.\n\nIn any case, it looks to me as if this issue should be closed; the original behavior described is not a bug.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74134944/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74275518",
    "html_url": "https://github.com/rust-lang/rust/issues/21875#issuecomment-74275518",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21875",
    "id": 74275518,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0Mjc1NTE4",
    "user": {
      "login": "main--",
      "id": 754850,
      "node_id": "MDQ6VXNlcjc1NDg1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/754850?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/main--",
      "html_url": "https://github.com/main--",
      "followers_url": "https://api.github.com/users/main--/followers",
      "following_url": "https://api.github.com/users/main--/following{/other_user}",
      "gists_url": "https://api.github.com/users/main--/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/main--/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/main--/subscriptions",
      "organizations_url": "https://api.github.com/users/main--/orgs",
      "repos_url": "https://api.github.com/users/main--/repos",
      "events_url": "https://api.github.com/users/main--/events{/privacy}",
      "received_events_url": "https://api.github.com/users/main--/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-13T15:55:34Z",
    "updated_at": "2015-02-13T15:55:34Z",
    "body": "It might not be a bug, but it's still far from perfect and could (should, in my opinion) be improved, e.g. in one of the ways I suggested [above](https://github.com/rust-lang/rust/issues/21875#issuecomment-74079944).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74275518/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74365968",
    "html_url": "https://github.com/rust-lang/rust/issues/21875#issuecomment-74365968",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21875",
    "id": 74365968,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MzY1OTY4",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-14T07:48:00Z",
    "updated_at": "2015-02-14T07:48:00Z",
    "body": "Your example in  https://github.com/rust-lang/rust/issues/21875#issuecomment-74081783 _might_ get addressed eventually as part of https://github.com/rust-lang/rust/issues/6393 ; at least, that is the only way I can see us encoding the knowledge that `foo` does not actually survive to the end of its declared scope.\n\nAnd that change (#6393) may well happen at some point; but for now, we are coping with our more simplistic model of lifetimes.\n\n---\n\nI don't think we're going to automatically reorder bindings to satisfy `dropck` any time soon, maybe ever.\n\nPure destructors might happen, but I don't think they would actually address the example of  https://github.com/rust-lang/rust/issues/21875#issuecomment-74081783\n\nIn the end, I suspect the best way to approach this ticket is via improvements to the error messages, especially when it comes to the fallout from #21657 (but there are other places where borrowck error messages can be improved).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74365968/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74366285",
    "html_url": "https://github.com/rust-lang/rust/issues/21875#issuecomment-74366285",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21875",
    "id": 74366285,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MzY2Mjg1",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-14T08:00:55Z",
    "updated_at": "2015-02-14T08:00:55Z",
    "body": "cc #22321\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74366285/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/128273384",
    "html_url": "https://github.com/rust-lang/rust/issues/21875#issuecomment-128273384",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21875",
    "id": 128273384,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyODI3MzM4NA==",
    "user": {
      "login": "lastorset",
      "id": 464989,
      "node_id": "MDQ6VXNlcjQ2NDk4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/464989?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lastorset",
      "html_url": "https://github.com/lastorset",
      "followers_url": "https://api.github.com/users/lastorset/followers",
      "following_url": "https://api.github.com/users/lastorset/following{/other_user}",
      "gists_url": "https://api.github.com/users/lastorset/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lastorset/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lastorset/subscriptions",
      "organizations_url": "https://api.github.com/users/lastorset/orgs",
      "repos_url": "https://api.github.com/users/lastorset/repos",
      "events_url": "https://api.github.com/users/lastorset/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lastorset/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-06T07:13:07Z",
    "updated_at": "2015-08-06T07:13:07Z",
    "body": "It might be best to leave the precise error messages there: hearing about \"block suffixes\" gives an opportunity to learn the theory behind the borrow checking. But I agree more help is needed: for newcomers to Rust it's easy to misread the compiler's error, since they might not be thinking correctly about lifetimes. So I'd suggest adding a `help:` message tailored to the situation:\n\n```\nlifetime.rs:2 help: bind `bar` before `foo`\n```\n\nI'm only a beginner, so I might be overlooking cases of incorrect lifetimes where the solution is different.\n\nThe compiler already outputs similar messages for temporary variables, which is nice:\n\n```\n<anon>:4:5: 4:26 help: consider using a `let` binding to increase its lifetime\n<anon>:4     foo = &String::new();\n             ^~~~~~~~~~~~~~~~~~~~~\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/128273384/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/268813138",
    "html_url": "https://github.com/rust-lang/rust/issues/21875#issuecomment-268813138",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21875",
    "id": 268813138,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODgxMzEzOA==",
    "user": {
      "login": "Nemo157",
      "id": 81079,
      "node_id": "MDQ6VXNlcjgxMDc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/81079?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Nemo157",
      "html_url": "https://github.com/Nemo157",
      "followers_url": "https://api.github.com/users/Nemo157/followers",
      "following_url": "https://api.github.com/users/Nemo157/following{/other_user}",
      "gists_url": "https://api.github.com/users/Nemo157/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Nemo157/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Nemo157/subscriptions",
      "organizations_url": "https://api.github.com/users/Nemo157/orgs",
      "repos_url": "https://api.github.com/users/Nemo157/repos",
      "events_url": "https://api.github.com/users/Nemo157/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Nemo157/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-12-22T14:42:42Z",
    "updated_at": "2016-12-22T14:42:42Z",
    "body": "This appears to have been improved at some point, trying the original code on the playground gives\r\n\r\n```\r\nrustc 1.13.0 (2c6933acc 2016-11-07)\r\nerror: `bar` does not live long enough\r\n --> <anon>:4:12\r\n  |\r\n4 |     foo = &bar;\r\n  |            ^^^ does not live long enough\r\n5 | }\r\n  | - borrowed value dropped before borrower\r\n  |\r\n  = note: values in a scope are dropped in the opposite order they are created\r\n\r\nerror: aborting due to previous error\r\n```\r\n\r\nthe block suffix part of the message is gone and a `note` is added explaining why it does not live long enough in this specific case.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/268813138/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/302297967",
    "html_url": "https://github.com/rust-lang/rust/issues/21875#issuecomment-302297967",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21875",
    "id": 302297967,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjI5Nzk2Nw==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-18T04:34:22Z",
    "updated_at": "2017-05-18T04:34:22Z",
    "body": "I think the note is close enough that we can close this. Lifetime errors are always non-ideal and we have a lot of issues about improving them (I think, at least) and this one is specific enough that the note (values ... dropped in opposite order) solves it.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/302297967/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
