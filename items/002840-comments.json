[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6830829",
    "html_url": "https://github.com/rust-lang/rust/issues/2840#issuecomment-6830829",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2840",
    "id": 6830829,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MzA4Mjk=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-08T12:18:32Z",
    "updated_at": "2012-07-08T12:18:32Z",
    "body": "The for loop _is_ an implicit return expression (all rust statements are expressions, and for loops can return non-unit values if the method invoked returns a non-unit value).  The problem seems to be that constructors are being type checked with an expected return type of `apple`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6830829/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6831613",
    "html_url": "https://github.com/rust-lang/rust/issues/2840#issuecomment-6831613",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2840",
    "id": 6831613,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MzE2MTM=",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-08T14:24:11Z",
    "updated_at": "2012-07-08T14:24:11Z",
    "body": "That's not a problem -- the constructor's return type **is** `apple`. In this case, the error is the omitted semicolon after the `for` loop. But rustc is behaving correctly. Closing.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6831613/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6854810",
    "html_url": "https://github.com/rust-lang/rust/issues/2840#issuecomment-6854810",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2840",
    "id": 6854810,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTQ4MTA=",
    "user": {
      "login": "Dretch",
      "id": 1428731,
      "node_id": "MDQ6VXNlcjE0Mjg3MzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1428731?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Dretch",
      "html_url": "https://github.com/Dretch",
      "followers_url": "https://api.github.com/users/Dretch/followers",
      "following_url": "https://api.github.com/users/Dretch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Dretch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Dretch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Dretch/subscriptions",
      "organizations_url": "https://api.github.com/users/Dretch/orgs",
      "repos_url": "https://api.github.com/users/Dretch/repos",
      "events_url": "https://api.github.com/users/Dretch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Dretch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-09T18:14:05Z",
    "updated_at": "2012-07-09T18:14:05Z",
    "body": "So it looks like class constructors can optionally have explicit return values - the values explicitly returned must be instances of the class.\n\nDoes this serve any purpose? It is surprising to me that constructors behave this way - and like I discovered it means that `;`s are required after `if/for/while { ... }` expressions in tail position - unlike anywhere else in rust AFAIK.\n\nIt does mean you can write weird stuff like this, however :)\n\n```\nclass apple {\n    let one_field_is_required: int;\n\n    new(n:int) {\n        io::println(#fmt(\"apple(%d)\", n));\n        self.one_field_is_required = 0;\n        if n != 0 {\n            ret apple(n-1);\n        };\n    }\n}\n\nfn main() {\n    apple(5);\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6854810/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6866873",
    "html_url": "https://github.com/rust-lang/rust/issues/2840#issuecomment-6866873",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2840",
    "id": 6866873,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NjY4NzM=",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-10T04:45:53Z",
    "updated_at": "2012-07-10T04:45:53Z",
    "body": "@Dretch - you're right, but in the meantime a duplicate bug was opened -- see #2844.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6866873/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
