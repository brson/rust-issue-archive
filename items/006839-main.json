{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/6839",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/6839/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/6839/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/6839/events",
  "html_url": "https://github.com/rust-lang/rust/pull/6839",
  "id": 14959956,
  "node_id": "MDExOlB1bGxSZXF1ZXN0NjAyODMxNg==",
  "number": 6839,
  "title": "Scheduler multithreading",
  "user": {
    "login": "brson",
    "id": 147214,
    "node_id": "MDQ6VXNlcjE0NzIxNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brson",
    "html_url": "https://github.com/brson",
    "followers_url": "https://api.github.com/users/brson/followers",
    "following_url": "https://api.github.com/users/brson/following{/other_user}",
    "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
    "organizations_url": "https://api.github.com/users/brson/orgs",
    "repos_url": "https://api.github.com/users/brson/repos",
    "events_url": "https://api.github.com/users/brson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brson/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 8,
  "created_at": "2013-05-30T20:21:36Z",
  "updated_at": "2014-06-16T20:34:39Z",
  "closed_at": "2013-06-13T21:16:26Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/6839",
    "html_url": "https://github.com/rust-lang/rust/pull/6839",
    "diff_url": "https://github.com/rust-lang/rust/pull/6839.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/6839.patch",
    "merged_at": null
  },
  "body": "r? @nikomatsakis\n\nThis implements very basic multithreading in the new scheduler. This is only using a trivial scheduling strategy with a shared task queue. It adds three new concurrent types to the scheduler: `WorkQueue`, `MessageQueue`, and `SleeperList`. `WorkQueue` is temporarily just a basic queue; `MessageQueue` is a multiple-producer, singe-consumer queue for sending messages to schedulers; and `SleeperList` is a shared stack used for waking up sleeping schedulers. All three are intended to be lock free but for now are implemented naively with locks.\n\nThe main scheduling routine, which uses all three of these data structures is here: https://github.com/brson/rust/blob/io-upstream/src/libstd/rt/sched.rs#L156\n\nAn example of how the multithreaded scheduler is constructed: https://github.com/brson/rust/blob/io-upstream/src/libstd/rt/test.rs#L62\n#4419\n",
  "closed_by": {
    "login": "graydon",
    "id": 14097,
    "node_id": "MDQ6VXNlcjE0MDk3",
    "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/graydon",
    "html_url": "https://github.com/graydon",
    "followers_url": "https://api.github.com/users/graydon/followers",
    "following_url": "https://api.github.com/users/graydon/following{/other_user}",
    "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
    "organizations_url": "https://api.github.com/users/graydon/orgs",
    "repos_url": "https://api.github.com/users/graydon/repos",
    "events_url": "https://api.github.com/users/graydon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/graydon/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/6839/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/6839/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
