[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32129122",
    "html_url": "https://github.com/rust-lang/rust/pull/11500#issuecomment-32129122",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11500",
    "id": 32129122,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTI5MTIy",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-12T18:18:50Z",
    "updated_at": "2014-01-12T18:18:50Z",
    "body": "Hm, I'm a little uncomfortable committing this because this seems to me like a clear indication that rustpkg is duplicating functionality that it shouldn't. This has different behavior when finding duplicate rlibs and duplicate dylibs which seems surprising to me.\n\nCan you look into whether `rustc::metadata::loader` can be used for this?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32129122/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32131185",
    "html_url": "https://github.com/rust-lang/rust/pull/11500#issuecomment-32131185",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11500",
    "id": 32131185,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTMxMTg1",
    "user": {
      "login": "jhasse",
      "id": 80071,
      "node_id": "MDQ6VXNlcjgwMDcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/80071?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jhasse",
      "html_url": "https://github.com/jhasse",
      "followers_url": "https://api.github.com/users/jhasse/followers",
      "following_url": "https://api.github.com/users/jhasse/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhasse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jhasse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhasse/subscriptions",
      "organizations_url": "https://api.github.com/users/jhasse/orgs",
      "repos_url": "https://api.github.com/users/jhasse/repos",
      "events_url": "https://api.github.com/users/jhasse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jhasse/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-12T19:29:40Z",
    "updated_at": "2014-01-12T19:29:40Z",
    "body": "I thought exactly the same, but thought there must be a reason for this to be rewritten in rustpkg. I will look into it ;)\n\nbtw: There seems to be more places with duplicated functionality in rustpkg: #11502\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32131185/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32133214",
    "html_url": "https://github.com/rust-lang/rust/pull/11500#issuecomment-32133214",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11500",
    "id": 32133214,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTMzMjE0",
    "user": {
      "login": "jhasse",
      "id": 80071,
      "node_id": "MDQ6VXNlcjgwMDcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/80071?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jhasse",
      "html_url": "https://github.com/jhasse",
      "followers_url": "https://api.github.com/users/jhasse/followers",
      "following_url": "https://api.github.com/users/jhasse/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhasse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jhasse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhasse/subscriptions",
      "organizations_url": "https://api.github.com/users/jhasse/orgs",
      "repos_url": "https://api.github.com/users/jhasse/repos",
      "events_url": "https://api.github.com/users/jhasse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jhasse/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-12T20:38:52Z",
    "updated_at": "2014-01-12T20:38:52Z",
    "body": "Okay what I found so far: The function `metadata::loader::Context::find_library_crate` does _about_ the same as `library_in`. But it also does more, e.g. extracting the metadata. So using it in rustpkg doesn't look like a good idea to me, since then the same work will be done two times, the first time by rustpkg and the second by librustc. And extracting the metadata by rustpkg is unnecessary.\n\nA solution could be to use `library_in` in `find_library_crate` (and since rustc shouldn't depend on librustpkg move `library_in` to librustc). Still the file system search would then be performed two times.\n\nThe best solution would be to further integrate rustc's build process and rustpkg. E.g. when rustpkg finds the libraries it could already pass the `Library` struct to librustc's functions. Or rustpkg doesn't even look for libraries and let's rustc handle this.\n\nUnfortunately I don't see myself skilled enough in Rust to implement either solution (also lacking enough time to do it). Maybe merge this and see where rustpkg is going in the future anyway?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32133214/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32146720",
    "html_url": "https://github.com/rust-lang/rust/pull/11500#issuecomment-32146720",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11500",
    "id": 32146720,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTQ2NzIw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-13T05:47:07Z",
    "updated_at": "2014-01-13T05:47:07Z",
    "body": "I guess I'm a little unclear on _why_ rustpkg is trying to find libraries, do you know why? I would imagine that to be correct rustpkg must open and read the metadata to ensure that it has the right version, but it's not doing that?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32146720/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32146797",
    "html_url": "https://github.com/rust-lang/rust/pull/11500#issuecomment-32146797",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11500",
    "id": 32146797,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTQ2Nzk3",
    "user": {
      "login": "metajack",
      "id": 28357,
      "node_id": "MDQ6VXNlcjI4MzU3",
      "avatar_url": "https://avatars.githubusercontent.com/u/28357?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/metajack",
      "html_url": "https://github.com/metajack",
      "followers_url": "https://api.github.com/users/metajack/followers",
      "following_url": "https://api.github.com/users/metajack/following{/other_user}",
      "gists_url": "https://api.github.com/users/metajack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/metajack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/metajack/subscriptions",
      "organizations_url": "https://api.github.com/users/metajack/orgs",
      "repos_url": "https://api.github.com/users/metajack/repos",
      "events_url": "https://api.github.com/users/metajack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/metajack/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-13T05:49:32Z",
    "updated_at": "2014-01-13T05:49:32Z",
    "body": "It tries to search for outputs because it didn't use the logic to calculate the crate hash. That part can be easily fixed now.\n\nI'm not sure why it also searches inputs, but I suspect because rustc does not know about RUST_PATH and there might be many places to search. Perhaps @catamorphism remembers.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32146797/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32152218",
    "html_url": "https://github.com/rust-lang/rust/pull/11500#issuecomment-32152218",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11500",
    "id": 32152218,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTUyMjE4",
    "user": {
      "login": "klutzy",
      "id": 1589355,
      "node_id": "MDQ6VXNlcjE1ODkzNTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1589355?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klutzy",
      "html_url": "https://github.com/klutzy",
      "followers_url": "https://api.github.com/users/klutzy/followers",
      "following_url": "https://api.github.com/users/klutzy/following{/other_user}",
      "gists_url": "https://api.github.com/users/klutzy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klutzy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klutzy/subscriptions",
      "organizations_url": "https://api.github.com/users/klutzy/orgs",
      "repos_url": "https://api.github.com/users/klutzy/repos",
      "events_url": "https://api.github.com/users/klutzy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klutzy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-13T08:43:34Z",
    "updated_at": "2014-01-13T08:43:34Z",
    "body": "rustpkg doesn't compute hash because it was impossible before #10593, and rustpkg hasn't updated. (#11478 has a patch for the issue.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32152218/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
