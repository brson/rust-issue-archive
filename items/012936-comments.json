[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37778581",
    "html_url": "https://github.com/rust-lang/rust/pull/12936#issuecomment-37778581",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12936",
    "id": 37778581,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3Nzc4NTgx",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-17T01:28:00Z",
    "updated_at": "2014-03-17T01:28:00Z",
    "body": "I'm a little sad to see yet another encoder in the `json` module. I would expect there to be one encoder, not three. Two is already pushing it a little bit. I fear that the `json` modules needs to be thought out before tacking on more functionality.\n\nFrom what it looks like, the are three different representations that the `json` module deals with: rust values, strings, and values of type `Json`. The current module implements\n\n| from | to | implemented |\n| --- | --- | --- |\n| rust | json | no |\n| rust | string | yes (`Encoder`) |\n| json | string | yes (`Encoder`) |\n| json | rust | yes (`Decoder`) |\n| string | rust | no |\n| string | json | yes (`Parser`) |\n\nThis is a bit of a hefty matrix to deal with, and I fear the utility of the `Json` type is diminished due to how it's used. In the ideal world, I would expect the `json` module to contain:\n- One encoder, which is an implementation of the `Encoder` trait.\n- One decoder, which is an implementation of the `Decoder` trait.\n- A `Json` enum which implements encodable/decodable\n\nI would imagine that the decoder is what the parser is today, and that this intermediate format of `Json` isn't used that often. Instead it's only used if the format being deserialized isn't known ahead of time.\n\nWhat do you think of this?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37778581/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37782010",
    "html_url": "https://github.com/rust-lang/rust/pull/12936#issuecomment-37782010",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12936",
    "id": 37782010,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzgyMDEw",
    "user": {
      "login": "seanmonstar",
      "id": 51479,
      "node_id": "MDQ6VXNlcjUxNDc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/51479?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seanmonstar",
      "html_url": "https://github.com/seanmonstar",
      "followers_url": "https://api.github.com/users/seanmonstar/followers",
      "following_url": "https://api.github.com/users/seanmonstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/seanmonstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seanmonstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seanmonstar/subscriptions",
      "organizations_url": "https://api.github.com/users/seanmonstar/orgs",
      "repos_url": "https://api.github.com/users/seanmonstar/repos",
      "events_url": "https://api.github.com/users/seanmonstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seanmonstar/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-17T03:11:20Z",
    "updated_at": "2014-03-17T03:11:20Z",
    "body": "Personally, I was surprised to read in #8335 the need to turn a rust object into a `Json`, but not all the way to a string. Even the name of the trait, `ToJson`, gives me pause. I think of JSON as a string. Always. If it's not a string, it's something else. So, I assume `ToJson.to_json()` to return a string.\n\nI also think the `Encoder` and `PrettyEncoder` could be just one encoder, with a few `if`s in the methods. If that's preferred, I can clean up this module that way.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37782010/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37782264",
    "html_url": "https://github.com/rust-lang/rust/pull/12936#issuecomment-37782264",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12936",
    "id": 37782264,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzgyMjY0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-17T03:20:02Z",
    "updated_at": "2014-03-17T03:20:02Z",
    "body": "That sounds good to me! Here's a few things that I think would work well:\n- Merging Encoder and PrettyEncoder with a flag (as you suggested)\n- Removing ToJson\n- Delete Decoder and rename Parser to Decoder (folding all functionality into one another)\n- Keep the Json enum, implementing Encodable/Decodable for it\n\nThat way you use the Decoder to go from a string to a rust value and the Encoder to go from a rust value to a string. Conversion between rust values and a Json value would require going through a string. You can also always decode directly into a Json value if you need to inspect the object.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37782264/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37847068",
    "html_url": "https://github.com/rust-lang/rust/pull/12936#issuecomment-37847068",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12936",
    "id": 37847068,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODQ3MDY4",
    "user": {
      "login": "seanmonstar",
      "id": 51479,
      "node_id": "MDQ6VXNlcjUxNDc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/51479?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seanmonstar",
      "html_url": "https://github.com/seanmonstar",
      "followers_url": "https://api.github.com/users/seanmonstar/followers",
      "following_url": "https://api.github.com/users/seanmonstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/seanmonstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seanmonstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seanmonstar/subscriptions",
      "organizations_url": "https://api.github.com/users/seanmonstar/orgs",
      "repos_url": "https://api.github.com/users/seanmonstar/repos",
      "events_url": "https://api.github.com/users/seanmonstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seanmonstar/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-17T17:47:05Z",
    "updated_at": "2014-03-17T17:47:05Z",
    "body": "Why remove the Parser? Looking in `ebml`, theres a parser-like object, and the decoder is separate.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37847068/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37848093",
    "html_url": "https://github.com/rust-lang/rust/pull/12936#issuecomment-37848093",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12936",
    "id": 37848093,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODQ4MDkz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-17T17:54:26Z",
    "updated_at": "2014-03-17T17:54:26Z",
    "body": "`ebml` isn't necessarily the gold standard for libraries, and the `Parser`'s functionality would remain, it would just live under a new name.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37848093/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37874967",
    "html_url": "https://github.com/rust-lang/rust/pull/12936#issuecomment-37874967",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12936",
    "id": 37874967,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODc0OTY3",
    "user": {
      "login": "seanmonstar",
      "id": 51479,
      "node_id": "MDQ6VXNlcjUxNDc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/51479?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seanmonstar",
      "html_url": "https://github.com/seanmonstar",
      "followers_url": "https://api.github.com/users/seanmonstar/followers",
      "following_url": "https://api.github.com/users/seanmonstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/seanmonstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seanmonstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seanmonstar/subscriptions",
      "organizations_url": "https://api.github.com/users/seanmonstar/orgs",
      "repos_url": "https://api.github.com/users/seanmonstar/repos",
      "events_url": "https://api.github.com/users/seanmonstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seanmonstar/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-17T21:46:05Z",
    "updated_at": "2014-03-17T21:46:05Z",
    "body": "is there any need to keep the `Json` enum around? Why not decode straight from a string?\n\nIf it does stick around, I can't figure out how I would implement `Decodable` for `Json`. There doesn't seem to be any way to get a hint of the next value. Can I use some matching? Or use the `Any` trait somehow?:\n\n``` rust\nimpl<D: Decoder> Decodable<D> for Json {\n  fn (d: &mut D) -> Json {\n    // can i somehow match against types?\n    match Decodable::decode(d) {\n      f64 => Number,\n      // etc?\n    }\n  }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37874967/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37894334",
    "html_url": "https://github.com/rust-lang/rust/pull/12936#issuecomment-37894334",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12936",
    "id": 37894334,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODk0MzM0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-18T02:40:27Z",
    "updated_at": "2014-03-18T02:40:27Z",
    "body": "Keeping `Json` around seems useful because you can deserialize an arbitrary blob into it.\n\nYou don't need to implement `<D: Decoder> Decodable<D>`, you can implement `Decodable<JsonDecoder>`.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37894334/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37977011",
    "html_url": "https://github.com/rust-lang/rust/pull/12936#issuecomment-37977011",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12936",
    "id": 37977011,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTc3MDEx",
    "user": {
      "login": "seanmonstar",
      "id": 51479,
      "node_id": "MDQ6VXNlcjUxNDc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/51479?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/seanmonstar",
      "html_url": "https://github.com/seanmonstar",
      "followers_url": "https://api.github.com/users/seanmonstar/followers",
      "following_url": "https://api.github.com/users/seanmonstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/seanmonstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/seanmonstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/seanmonstar/subscriptions",
      "organizations_url": "https://api.github.com/users/seanmonstar/orgs",
      "repos_url": "https://api.github.com/users/seanmonstar/repos",
      "events_url": "https://api.github.com/users/seanmonstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/seanmonstar/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-18T19:27:30Z",
    "updated_at": "2014-03-18T19:27:30Z",
    "body": "I'll open a new PR of json cleanup. I've also found the error handler in Encoder's to unfun, so I might fix #12292 before.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37977011/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
