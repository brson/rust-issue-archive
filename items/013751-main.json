{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/13751",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/13751/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/13751/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/13751/events",
  "html_url": "https://github.com/rust-lang/rust/pull/13751",
  "id": 32251775,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTUxODE0MTk=",
  "number": 13751,
  "title": "std: Add close_{read,write}() methods to I/O",
  "user": {
    "login": "alexcrichton",
    "id": 64996,
    "node_id": "MDQ6VXNlcjY0OTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexcrichton",
    "html_url": "https://github.com/alexcrichton",
    "followers_url": "https://api.github.com/users/alexcrichton/followers",
    "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
    "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
    "repos_url": "https://api.github.com/users/alexcrichton/repos",
    "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 2,
  "created_at": "2014-04-25T17:35:46Z",
  "updated_at": "2014-06-17T03:45:12Z",
  "closed_at": "2014-05-08T02:36:37Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/13751",
    "html_url": "https://github.com/rust-lang/rust/pull/13751",
    "diff_url": "https://github.com/rust-lang/rust/pull/13751.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/13751.patch",
    "merged_at": "2014-05-08T02:36:38Z"
  },
  "body": "Two new methods were added to TcpStream and UnixStream:\n\n```\nfn close_read(&mut self) -> IoResult<()>;\nfn close_write(&mut self) -> IoResult<()>;\n```\n\nThese two methods map to shutdown()'s behavior (the system call on unix),\nclosing the reading or writing half of a duplex stream. These methods are\nprimarily added to allow waking up a pending read in another task. By closing\nthe reading half of a connection, all pending readers will be woken up and will\nreturn with EndOfFile. The close_write() method was added for symmetry with\nclose_read(), and I imagine that it will be quite useful at some point.\n\nImplementation-wise, librustuv got the short end of the stick this time. The\nnative versions just delegate to the shutdown() syscall (easy). The uv versions\ncan leverage uv_shutdown() for tcp/unix streams, but only for closing the\nwriting half. Closing the reading half is done through some careful dancing to\nwake up a pending reader.\n\nAs usual, windows likes to be different from unix. The windows implementation\nuses shutdown() for sockets, but shutdown() is not available for named pipes.\nInstead, CancelIoEx was used with same fancy synchronization to make sure\neveryone knows what's up.\n\ncc #11165\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/13751/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/13751/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
