[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47047264",
    "html_url": "https://github.com/rust-lang/rust/issues/13573#issuecomment-47047264",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13573",
    "id": 47047264,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MDQ3MjY0",
    "user": {
      "login": "jbclements",
      "id": 226617,
      "node_id": "MDQ6VXNlcjIyNjYxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/226617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbclements",
      "html_url": "https://github.com/jbclements",
      "followers_url": "https://api.github.com/users/jbclements/followers",
      "following_url": "https://api.github.com/users/jbclements/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbclements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbclements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbclements/subscriptions",
      "organizations_url": "https://api.github.com/users/jbclements/orgs",
      "repos_url": "https://api.github.com/users/jbclements/repos",
      "events_url": "https://api.github.com/users/jbclements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbclements/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-25T00:22:32Z",
    "updated_at": "2014-06-25T00:22:32Z",
    "body": "The problem here is generally that rustc --pretty doesn't respect hygiene. You can see this by expanding this program\n\n``` rust\n#![feature(macro_rules)]\n\nmacro_rules! dont_capture {($v:expr) => ({let _x = 13; $v})}\n\nfn main() -> (){\n    let _x = 2;\n    let y = dont_capture!(_x);\n    println!(\"2 = {}\",y);\n}\n```\n\nusing rustc --pretty expanded, which shows a program where the inner let should clearly capture the inner varref.\n\nAs far as I know, rustc --pretty doesn't claim to preserve semantics. I would argue that this is currently not a bug, or perhaps a change request.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47047264/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/178768007",
    "html_url": "https://github.com/rust-lang/rust/issues/13573#issuecomment-178768007",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13573",
    "id": 178768007,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3ODc2ODAwNw==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-02T19:18:46Z",
    "updated_at": "2016-02-02T19:18:46Z",
    "body": "Triage: no changes I'm aware of.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/178768007/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/298168571",
    "html_url": "https://github.com/rust-lang/rust/issues/13573#issuecomment-298168571",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13573",
    "id": 298168571,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODE2ODU3MQ==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-04-29T13:18:40Z",
    "updated_at": "2017-04-29T13:18:40Z",
    "body": "Loops are no longer expanded as suggested by this issue as far as I can tell. However, the macro example still doesn't work quite correctly in that `dont_capture!(_x)` is expanded to `let _x = 13; _x`,  not the more-proper `let _x_mangled = 13; _x`. Updating issue title to be more accurate.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/298168571/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424055285",
    "html_url": "https://github.com/rust-lang/rust/issues/13573#issuecomment-424055285",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13573",
    "id": 424055285,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDA1NTI4NQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-09-24T17:20:59Z",
    "updated_at": "2018-09-24T17:20:59Z",
    "body": "Triage: no change",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424055285/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/899221977",
    "html_url": "https://github.com/rust-lang/rust/issues/13573#issuecomment-899221977",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13573",
    "id": 899221977,
    "node_id": "IC_kwDOAAsO6M41mQnZ",
    "user": {
      "login": "jyn514",
      "id": 23638587,
      "node_id": "MDQ6VXNlcjIzNjM4NTg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jyn514",
      "html_url": "https://github.com/jyn514",
      "followers_url": "https://api.github.com/users/jyn514/followers",
      "following_url": "https://api.github.com/users/jyn514/following{/other_user}",
      "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions",
      "organizations_url": "https://api.github.com/users/jyn514/orgs",
      "repos_url": "https://api.github.com/users/jyn514/repos",
      "events_url": "https://api.github.com/users/jyn514/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jyn514/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-08-16T05:19:28Z",
    "updated_at": "2021-08-16T05:19:28Z",
    "body": "Triage: no change. However, there is a new option `-Zunpretty=expanded,hygiene`, which does distinguish the two (although it's quite verbose):\r\n```\r\nmacro_rules! dont_capture\r\n    /*\r\n    1348#0\r\n    */ {\r\n    ($v : expr) => ({ let _x = 13 ; $v })\r\n}\r\n\r\nfn main /* 691#0 */() -> () {\r\n    let _x /* 1350#0 */ = 2;\r\n    let y /* 1352#0 */ = { let _x /* 1350#3 */ = 13; _x /* 1350#0 */ };\r\n...\r\n```",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/899221977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
