[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76996655",
    "html_url": "https://github.com/rust-lang/rust/issues/22996#issuecomment-76996655",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22996",
    "id": 76996655,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2OTk2NjU1",
    "user": {
      "login": "edwardxie",
      "id": 1598744,
      "node_id": "MDQ6VXNlcjE1OTg3NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1598744?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/edwardxie",
      "html_url": "https://github.com/edwardxie",
      "followers_url": "https://api.github.com/users/edwardxie/followers",
      "following_url": "https://api.github.com/users/edwardxie/following{/other_user}",
      "gists_url": "https://api.github.com/users/edwardxie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edwardxie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edwardxie/subscriptions",
      "organizations_url": "https://api.github.com/users/edwardxie/orgs",
      "repos_url": "https://api.github.com/users/edwardxie/repos",
      "events_url": "https://api.github.com/users/edwardxie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edwardxie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-03T17:49:55Z",
    "updated_at": "2015-03-03T17:49:55Z",
    "body": "Box need prototype.\n\n```\n#![feature(box_syntax)]\nuse std::any::Any;\nfn main()\n{\n    fn h(x:i32) -> i32 {3*x};\n    fn g(x:i32) -> i32 {5*x + 3};\n\n    // That works with explicit typing\n    let mut vf:Vec<Box<Fn(i32)->i32>>=vec![];\n    vf.push(box h);\n    vf.push(box g);\n    println!(\"3X={:?} 5X+3={:?}\", vf[0](9), vf[1](3));\n\n    // The following fails at the second push : type mismatch looks strange\n    let mut vfnfer:Vec<Box<Any>> = vec![];\n    vfnfer.push(box h);\n    vfnfer.push(box g);\n    println!(\"3X={:?} 5X+3={:?}\", vf[0](9), vf[1](3));\n}\n```\n\nIf that's all you need..\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76996655/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/77121156",
    "html_url": "https://github.com/rust-lang/rust/issues/22996#issuecomment-77121156",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22996",
    "id": 77121156,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MTIxMTU2",
    "user": {
      "login": "yann-ledu",
      "id": 11094035,
      "node_id": "MDQ6VXNlcjExMDk0MDM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/11094035?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yann-ledu",
      "html_url": "https://github.com/yann-ledu",
      "followers_url": "https://api.github.com/users/yann-ledu/followers",
      "following_url": "https://api.github.com/users/yann-ledu/following{/other_user}",
      "gists_url": "https://api.github.com/users/yann-ledu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yann-ledu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yann-ledu/subscriptions",
      "organizations_url": "https://api.github.com/users/yann-ledu/orgs",
      "repos_url": "https://api.github.com/users/yann-ledu/repos",
      "events_url": "https://api.github.com/users/yann-ledu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yann-ledu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-04T09:13:28Z",
    "updated_at": "2015-03-04T09:13:28Z",
    "body": "Ok, but I think you meant to put vnfer in the last line, and not vf, and then it doesn't work. Apparently, Any doesn't get specialized to Fn. I can just carry on putting other stuff, like boxed integers. I didn't know about Any, thanks.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/77121156/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169911531",
    "html_url": "https://github.com/rust-lang/rust/issues/22996#issuecomment-169911531",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22996",
    "id": 169911531,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2OTkxMTUzMQ==",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-08T06:49:51Z",
    "updated_at": "2016-01-08T06:49:51Z",
    "body": "This would require being able to infer a _unique_ \"coercion supertype\" of a set of things: `box h` has some type `T` and `box g` has some type `U`. Seeing the two pushes, the compiler would see that the types don't match and then would have to try to compute some type that both `T` and `U` can be coerced to, e.g. for this case `Box<Fn(i32) -> i32>`. However, as @edwardxie demonstrates, the types in this case can also be coerced to `Box<Any>`, so the compiler would have to some how decide between those two trait objects, but there's not really a good way to decide that.\n\nThat is, this feature is extremely unlikely to happen, even if it could be done efficiently (I'm lead to believe that this sort of \"supertype\" inference is expensive/impossible-in-general), so I'm closing, but thanks for filing anyway!\n\nNB. One can avoid a full annotation by casting one of the `box ...`'s, e.g. `vfnfer.push(box h as Box<Fn(i32) -> i32>)`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169911531/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
