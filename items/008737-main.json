{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/8737",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/8737/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/8737/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/8737/events",
  "html_url": "https://github.com/rust-lang/rust/pull/8737",
  "id": 18507101,
  "node_id": "MDExOlB1bGxSZXF1ZXN0NzgzOTQyMQ==",
  "number": 8737,
  "title": "impl next_back() for CharSplitIterator, and methods .rsplit_iter(), .rsplitn_iter()",
  "user": {
    "login": "bluss",
    "id": 3209739,
    "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bluss",
    "html_url": "https://github.com/bluss",
    "followers_url": "https://api.github.com/users/bluss/followers",
    "following_url": "https://api.github.com/users/bluss/following{/other_user}",
    "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
    "organizations_url": "https://api.github.com/users/bluss/orgs",
    "repos_url": "https://api.github.com/users/bluss/repos",
    "events_url": "https://api.github.com/users/bluss/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bluss/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 3,
  "created_at": "2013-08-24T14:24:11Z",
  "updated_at": "2014-07-16T23:44:49Z",
  "closed_at": "2013-08-26T13:11:15Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/8737",
    "html_url": "https://github.com/rust-lang/rust/pull/8737",
    "diff_url": "https://github.com/rust-lang/rust/pull/8737.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/8737.patch",
    "merged_at": null
  },
  "body": "Make CharSplitIterator double-ended which is simple given that the operation is symmetric, once the split-N feature is factored out into its own adaptor.\n\n`.rsplitn_iter()` allows splitting `N` times from the back of a string, so it is a completely new feature. With the double-ended impl, `.split_iter()`, `.line_iter()`, `.word_iter()` all allow picking off elements from either end.\n\n`split_options_iter` is removed with the factoring of the split- and split-N- iterators, instead there is `split_terminator_iter`.\n\n---\n\nAdd benchmarks using `#[bench]` and tune CharSplitIterator a bit after Huon Wilson's suggestions\n\nBenchmarks 1-5 do the same split using different implementations of `CharEq`, all splitting an ascii string on ascii space. Benchmarks 6-7 split a unicode string on an ascii char.\n\nBefore this PR\ntest str::bench::split_iter_ascii ... bench: 166 ns/iter (+/- 2)\ntest str::bench::split_iter_closure ... bench: 113 ns/iter (+/- 1)\ntest str::bench::split_iter_extern_fn ... bench: 286 ns/iter (+/- 7)\ntest str::bench::split_iter_not_ascii ... bench: 114 ns/iter (+/- 4)\ntest str::bench::split_iter_slice ... bench: 220 ns/iter (+/- 12)\ntest str::bench::split_iter_unicode_ascii ... bench: 217 ns/iter (+/- 3)\ntest str::bench::split_iter_unicode_not_ascii ... bench: 248 ns/iter (+/- 3)\n\nPR, first commit\ntest str::bench::split_iter_ascii ... bench: 331 ns/iter (+/- 9)\ntest str::bench::split_iter_closure ... bench: 114 ns/iter (+/- 2)\ntest str::bench::split_iter_extern_fn ... bench: 314 ns/iter (+/- 6)\ntest str::bench::split_iter_not_ascii ... bench: 132 ns/iter (+/- 1)\ntest str::bench::split_iter_slice ... bench: 157 ns/iter (+/- 3)\ntest str::bench::split_iter_unicode_ascii ... bench: 502 ns/iter (+/- 64)\ntest str::bench::split_iter_unicode_not_ascii ... bench: 250 ns/iter (+/- 3)\n\nPR, final version\ntest str::bench::split_iter_ascii ... bench: 106 ns/iter (+/- 4)\ntest str::bench::split_iter_closure ... bench: 107 ns/iter (+/- 1)\ntest str::bench::split_iter_extern_fn ... bench: 267 ns/iter (+/- 6)\ntest str::bench::split_iter_not_ascii ... bench: 108 ns/iter (+/- 1)\ntest str::bench::split_iter_slice ... bench: 170 ns/iter (+/- 8)\ntest str::bench::split_iter_unicode_ascii ... bench: 128 ns/iter (+/- 5)\ntest str::bench::split_iter_unicode_not_ascii ... bench: 252 ns/iter (+/- 3)\n\n---\n\nThere are several ways to deal with `CharEq::only_ascii`. It is a performance optimization, so with that in mind, we allow passing bogus char (outside ascii) as long as they don't match. We use a byte value check to make sure we don't split on these (would split substrings in the middle of encoded char).  (A more principled way would be to only pass the ascii codepoints to the CharEq when it indicates only_ascii, but that undoes some of the performance optimization.)\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/8737/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/8737/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
