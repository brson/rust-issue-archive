[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47172886",
    "html_url": "https://github.com/rust-lang/rust/pull/15150#issuecomment-47172886",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15150",
    "id": 47172886,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MTcyODg2",
    "user": {
      "login": "schmee",
      "id": 3405586,
      "node_id": "MDQ6VXNlcjM0MDU1ODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3405586?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/schmee",
      "html_url": "https://github.com/schmee",
      "followers_url": "https://api.github.com/users/schmee/followers",
      "following_url": "https://api.github.com/users/schmee/following{/other_user}",
      "gists_url": "https://api.github.com/users/schmee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/schmee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/schmee/subscriptions",
      "organizations_url": "https://api.github.com/users/schmee/orgs",
      "repos_url": "https://api.github.com/users/schmee/repos",
      "events_url": "https://api.github.com/users/schmee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/schmee/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-25T23:44:37Z",
    "updated_at": "2014-06-25T23:44:37Z",
    "body": "Rebased on the new lint infrastructure and added and check for unused lifetimes in structs. This is sort of WIP, I'm going to look for any other places this lint can be applied (traits come to mind).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47172886/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47682565",
    "html_url": "https://github.com/rust-lang/rust/pull/15150#issuecomment-47682565",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15150",
    "id": 47682565,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NjgyNTY1",
    "user": {
      "login": "schmee",
      "id": 3405586,
      "node_id": "MDQ6VXNlcjM0MDU1ODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3405586?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/schmee",
      "html_url": "https://github.com/schmee",
      "followers_url": "https://api.github.com/users/schmee/followers",
      "following_url": "https://api.github.com/users/schmee/following{/other_user}",
      "gists_url": "https://api.github.com/users/schmee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/schmee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/schmee/subscriptions",
      "organizations_url": "https://api.github.com/users/schmee/orgs",
      "repos_url": "https://api.github.com/users/schmee/repos",
      "events_url": "https://api.github.com/users/schmee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/schmee/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-01T17:02:38Z",
    "updated_at": "2014-07-01T17:02:38Z",
    "body": "I think I'm done with this. @eddyb care to take a look?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47682565/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48084901",
    "html_url": "https://github.com/rust-lang/rust/pull/15150#issuecomment-48084901",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15150",
    "id": 48084901,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDg0OTAx",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-05T12:07:41Z",
    "updated_at": "2014-07-05T12:07:41Z",
    "body": "Does this handle:\n\n``` rust\nfn foo<'a>() {\n    fn inner<'a>(x: &'a int) {}\n}\n```\n\nThe outer should have a warning, the inner should not.\n\n(It is important that they have the same name: I think the `LifetimeCollector` visitor may be a little too eager, since it's traversing into sub-items. One way to address this may be overloading `visit_item` as a noop.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48084901/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48085887",
    "html_url": "https://github.com/rust-lang/rust/pull/15150#issuecomment-48085887",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15150",
    "id": 48085887,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDg1ODg3",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-05T12:56:40Z",
    "updated_at": "2014-07-05T12:56:40Z",
    "body": "Ok, I thought a little more and did some investigation: the bulletproof way to implement this is to hook into [`resolve_lifetime`](http://doc.rust-lang.org/master/rustc/middle/resolve_lifetime/), to essentially use its information to record when a lifetime parameter is not used. Anything else will essentially be a reimplementation of that pass, and thus prone to not matching.\n\nThat pass handles everything via the unique `NodeId` each lifetime is declared with, and so doesn't suffer from the naming problem I described above. One way to do this is to make `checked` a [`NodeMap`](http://doc.rust-lang.org/master/rustc/util/nodemap/index.html) (specifically, a `NodeMap<()>`), and to record uses like:\n\n``` rust\nmatch cx.tcx.named_region_map.find(&lifetime.id) {\n    None => cx.sess().span_bug(\"found unknown lifetime during linting\"),\n    Some(resolve_lifetime::DefStaticRegion) => { /* nothing to do */ }\n    Some(resolve_lifetime::DefEarlyBoundRegion(_, _, id)) |\n    Some(resolve_lifetime::DefLateBoundRegion(_, _, id)) |\n    Some(resolve_lifetime::DefFreeRegion(_,id)) => {\n        self.checked.insert(id)\n    }\n}\n```\n\n`check_unused_lifetimes` then checks `if !checked.contains(&lt.id)`.\n\n(I haven't compiled this, so I don't actually know if it's doing the right thing)\n\nTheoretically the `resolve_lifetime` pass could also be modified so that it records the usage of lifetimes as it goes (that is, it could record enough information so, at places where lifetime names are introduced, you know which of those lifetimes were used after finishing the subrecursion), and then use `sess.add_lint(lint::builtin::UNUSED_LIFETIME, lifetime.id, lifetime.span, \"unused lifetime\")` to have the lint pass emit the appropriate message.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48085887/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49038767",
    "html_url": "https://github.com/rust-lang/rust/pull/15150#issuecomment-49038767",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15150",
    "id": 49038767,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MDM4NzY3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-15T14:24:43Z",
    "updated_at": "2014-07-15T14:24:43Z",
    "body": "Closing due to inactivity, but feel free to reopen with a rebase!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49038767/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
