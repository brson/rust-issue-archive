{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/11448",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/11448/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/11448/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/11448/events",
  "html_url": "https://github.com/rust-lang/rust/pull/11448",
  "id": 25394993,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTE0MDAzMDU=",
  "number": 11448,
  "title": "Optimize u64_from_be_bytes()",
  "user": {
    "login": "c-a",
    "id": 804040,
    "node_id": "MDQ6VXNlcjgwNDA0MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/804040?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/c-a",
    "html_url": "https://github.com/c-a",
    "followers_url": "https://api.github.com/users/c-a/followers",
    "following_url": "https://api.github.com/users/c-a/following{/other_user}",
    "gists_url": "https://api.github.com/users/c-a/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/c-a/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/c-a/subscriptions",
    "organizations_url": "https://api.github.com/users/c-a/orgs",
    "repos_url": "https://api.github.com/users/c-a/repos",
    "events_url": "https://api.github.com/users/c-a/events{/privacy}",
    "received_events_url": "https://api.github.com/users/c-a/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 2,
  "created_at": "2014-01-10T13:36:10Z",
  "updated_at": "2014-06-27T07:00:45Z",
  "closed_at": "2014-01-10T23:31:39Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/11448",
    "html_url": "https://github.com/rust-lang/rust/pull/11448",
    "diff_url": "https://github.com/rust-lang/rust/pull/11448.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/11448.patch",
    "merged_at": "2014-01-10T23:31:41Z"
  },
  "body": "Instead of reading a byte at a time in a loop we hardcode how to read each size.\nWe also try to do as few reads as possible by reading as big primitive types as\npossible. For example if size is eight we do a single read of a u64 value and\nif size is seven we read it as [u32|u16|u8].\n\nTimings on a Intel(R) Core(TM) i5-3570K CPU @ 3.40GHz\n\n-- Before --\nrunning 7 tests\ntest io::extensions::test::test_u64_from_be_bytes ... ok\ntest io::extensions::bench::u64_from_be_bytes_4_aligned         ... bench:       386 ns/iter (+/- 5)\ntest io::extensions::bench::u64_from_be_bytes_4_unaligned       ... bench:       387 ns/iter (+/- 2)\ntest io::extensions::bench::u64_from_be_bytes_7_aligned         ... bench:       628 ns/iter (+/- 1)\ntest io::extensions::bench::u64_from_be_bytes_7_unaligned       ... bench:       637 ns/iter (+/- 3)\ntest io::extensions::bench::u64_from_be_bytes_8_aligned         ... bench:       727 ns/iter (+/- 18)\ntest io::extensions::bench::u64_from_be_bytes_8_unaligned       ... bench:       723 ns/iter (+/- 22)\n\ncallgrind rustc -S  rust/src/test/bench/sudoku.rs\n    u64_from_be_bytes self: 4.37%\n\n-- After --\nrunning 7 tests\ntest io::extensions::test::test_u64_from_be_bytes ... ok\ntest io::extensions::bench::u64_from_be_bytes_4_aligned         ... bench:       162 ns/iter (+/- 7)\ntest io::extensions::bench::u64_from_be_bytes_4_unaligned       ... bench:       164 ns/iter (+/- 7)\ntest io::extensions::bench::u64_from_be_bytes_7_aligned         ... bench:       201 ns/iter (+/- 7)\ntest io::extensions::bench::u64_from_be_bytes_7_unaligned       ... bench:       210 ns/iter (+/- 9)\ntest io::extensions::bench::u64_from_be_bytes_8_aligned         ... bench:       163 ns/iter (+/- 7)\ntest io::extensions::bench::u64_from_be_bytes_8_unaligned       ... bench:       163 ns/iter (+/- 10)\n\ncallgrind rustc -S  rust/src/test/bench/sudoku.rs\n    u64_from_be_bytes self: 1.78%\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/11448/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/11448/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
