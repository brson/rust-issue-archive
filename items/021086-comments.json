[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71666271",
    "html_url": "https://github.com/rust-lang/rust/issues/21086#issuecomment-71666271",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21086",
    "id": 71666271,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjY2Mjcx",
    "user": {
      "login": "jansegre",
      "id": 729870,
      "node_id": "MDQ6VXNlcjcyOTg3MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/729870?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jansegre",
      "html_url": "https://github.com/jansegre",
      "followers_url": "https://api.github.com/users/jansegre/followers",
      "following_url": "https://api.github.com/users/jansegre/following{/other_user}",
      "gists_url": "https://api.github.com/users/jansegre/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jansegre/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jansegre/subscriptions",
      "organizations_url": "https://api.github.com/users/jansegre/orgs",
      "repos_url": "https://api.github.com/users/jansegre/repos",
      "events_url": "https://api.github.com/users/jansegre/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jansegre/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-27T15:28:10Z",
    "updated_at": "2015-01-27T15:28:10Z",
    "body": "I'm getting the same issue, didn't use to have it a short before alpha, can't find out which rev I was when it worked.\n\nThat case seems simpler I had boiled mine down to:\n\n``` rust\n#[allow(unstable)]\nextern crate libc;\nuse libc::{c_void, c_int};\n\nstruct State;\n\ntrait Push {\n    fn push_to(state: &mut State, value: Self);\n}\n\ntype CFun = extern fn(s: *mut c_void) -> c_int;\nimpl Push for CFun {\n    fn push_to(_state: &mut State, _value: CFun) {\n        // do something\n    }\n}\n\nfn main() {\n    extern fn foo(_s: *mut c_void) -> c_int { 1 }\n    let mut st = State;\n    Push::push_to(&mut st, foo);  // error: trait `Push` not implemented for ...\n    Push::push_to(&mut st, foo as CFun);  // works!\n}\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71666271/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71672911",
    "html_url": "https://github.com/rust-lang/rust/issues/21086#issuecomment-71672911",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21086",
    "id": 71672911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjcyOTEx",
    "user": {
      "login": "Marwes",
      "id": 957312,
      "node_id": "MDQ6VXNlcjk1NzMxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/957312?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Marwes",
      "html_url": "https://github.com/Marwes",
      "followers_url": "https://api.github.com/users/Marwes/followers",
      "following_url": "https://api.github.com/users/Marwes/following{/other_user}",
      "gists_url": "https://api.github.com/users/Marwes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Marwes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Marwes/subscriptions",
      "organizations_url": "https://api.github.com/users/Marwes/orgs",
      "repos_url": "https://api.github.com/users/Marwes/repos",
      "events_url": "https://api.github.com/users/Marwes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Marwes/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-27T16:03:06Z",
    "updated_at": "2015-01-27T16:03:06Z",
    "body": "Link to the pull request where this changed: #19891.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71672911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71699237",
    "html_url": "https://github.com/rust-lang/rust/issues/21086#issuecomment-71699237",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21086",
    "id": 71699237,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjk5MjM3",
    "user": {
      "login": "jansegre",
      "id": 729870,
      "node_id": "MDQ6VXNlcjcyOTg3MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/729870?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jansegre",
      "html_url": "https://github.com/jansegre",
      "followers_url": "https://api.github.com/users/jansegre/followers",
      "following_url": "https://api.github.com/users/jansegre/following{/other_user}",
      "gists_url": "https://api.github.com/users/jansegre/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jansegre/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jansegre/subscriptions",
      "organizations_url": "https://api.github.com/users/jansegre/orgs",
      "repos_url": "https://api.github.com/users/jansegre/repos",
      "events_url": "https://api.github.com/users/jansegre/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jansegre/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-27T18:21:55Z",
    "updated_at": "2015-01-27T18:21:55Z",
    "body": "Oh, so this is intended, should be closed then.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71699237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71760163",
    "html_url": "https://github.com/rust-lang/rust/issues/21086#issuecomment-71760163",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21086",
    "id": 71760163,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNzYwMTYz",
    "user": {
      "login": "jansegre",
      "id": 729870,
      "node_id": "MDQ6VXNlcjcyOTg3MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/729870?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jansegre",
      "html_url": "https://github.com/jansegre",
      "followers_url": "https://api.github.com/users/jansegre/followers",
      "following_url": "https://api.github.com/users/jansegre/following{/other_user}",
      "gists_url": "https://api.github.com/users/jansegre/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jansegre/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jansegre/subscriptions",
      "organizations_url": "https://api.github.com/users/jansegre/orgs",
      "repos_url": "https://api.github.com/users/jansegre/repos",
      "events_url": "https://api.github.com/users/jansegre/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jansegre/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-28T00:43:12Z",
    "updated_at": "2015-01-28T00:43:12Z",
    "body": "This is a side effect of the [coercions rfc](https://github.com/rust-lang/rfcs/blob/master/text/0401-coercions.md) but I think it's terrible.\nI don't get why every function must have it's own type now, that reasoning is not on the rfc. I'm trying to hunt it down.\n\nEven though I think it should be possible for the coercion to be implicit.\n\nThe rationale is that it should be consistent with plain/primitive data types:\n\nThere are these traits: Int, Float, Fn, ..., and there are these concrete types for instance: i8, i32, f64, fn(), fn() -> i32, ...\nWhen you know the concrete type you can implement some functionality that takes into account the structure of the type\n- for instance you can take some i8 and store it compressed which can be decompressed to get the original i8 back\n- the same goes for fn() types, you know they're a concrete type and thus you can transmute it to a pointer store that pointer on a location and have an extern fn() reconstruct that pointer with the signature of the function (which you have) and call it, that works for dispatching functions from rust libraries to ffi libraries.\n\nNow, when your primary interface for functions are traits it gets a lot harder to do lower level stuff because you don't know the underlying structure for the function so your interaction with it is limited by what the traits let's you do, which is call the function, bah.\n\nI'm not saying Fn traits are bad, I think they're great, but it has gotten much more difficult to work with fn() types after they became unique for each function with apparently only a few coercions. I think it's fair for one to be able to implement a certain trait for a fn() but not for a Fn() because that certain impl depends on the concrete type, and the user should not have to coerce a regular function to fn() and the user should also be able to impl that certain trait for whatever type they want.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71760163/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74445095",
    "html_url": "https://github.com/rust-lang/rust/issues/21086#issuecomment-74445095",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21086",
    "id": 74445095,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NDQ1MDk1",
    "user": {
      "login": "SSheldon",
      "id": 478311,
      "node_id": "MDQ6VXNlcjQ3ODMxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/478311?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SSheldon",
      "html_url": "https://github.com/SSheldon",
      "followers_url": "https://api.github.com/users/SSheldon/followers",
      "following_url": "https://api.github.com/users/SSheldon/following{/other_user}",
      "gists_url": "https://api.github.com/users/SSheldon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SSheldon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SSheldon/subscriptions",
      "organizations_url": "https://api.github.com/users/SSheldon/orgs",
      "repos_url": "https://api.github.com/users/SSheldon/repos",
      "events_url": "https://api.github.com/users/SSheldon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SSheldon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-16T00:05:08Z",
    "updated_at": "2015-02-16T00:05:08Z",
    "body": "I think this could be considered a bug. Functions are coerced to pointers when there aren't generics:\n\n``` rust\nfn call(f: fn()) {\n    f()\n}\n\nfn foo() {\n    println!(\"foo\");\n}\n\nfn main() {\n    call(foo);\n}\n```\n\nBut if you use generics, they are no longer coerced:\n\n``` rust\ntrait Callable {\n    fn call(self);\n}\n\nimpl Callable for fn() {\n    fn call(self) {\n        self();\n    }\n}\n\nfn call<F: Callable>(f: F) {\n    f.call();\n}\n\nfn foo() {\n    println!(\"foo\");\n}\n\nfn main() {\n    call(foo); // error: the trait `Callable` is not implemented for the type `fn() {foo}`\n}\n```\n\n@nikomatsakis and @eddyb (since you've both worked on this previously), do you think this issue is something we could fix and should be reopened?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74445095/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
