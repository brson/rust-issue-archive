[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/112727423",
    "html_url": "https://github.com/rust-lang/rust/issues/26350#issuecomment-112727423",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26350",
    "id": 112727423,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMjcyNzQyMw==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-17T08:59:10Z",
    "updated_at": "2015-06-17T09:22:23Z",
    "body": "While I\u2019d like to see us move away from libm very much, glibc\u2019s libm has been tuned so much over time it would be very hard to provide comparably accurate, compliant and performant implementations.\n\nOn the other hand, there\u2019s also a bunch of functions that could easily be implemented in libcore but are currently bound in libstd. A few examples would be `abs`, `signum`, `min`, `max` and all the rounding functions.\n\nI\u2019m also really glad we do not bind more obscure functions as tgamma. I believe that they belong in a crate and not stdlib.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/112727423/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/112891158",
    "html_url": "https://github.com/rust-lang/rust/issues/26350#issuecomment-112891158",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26350",
    "id": 112891158,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMjg5MTE1OA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-17T17:53:34Z",
    "updated_at": "2015-06-17T17:53:34Z",
    "body": "Ah yes to be clear I don't think we should reimplement trigonometric functions for example, just perhaps deprecate the in-tree versions for an external set of bindings to libm. The stable usage of the standard library in theory does not need to depend on libm.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/112891158/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/163097828",
    "html_url": "https://github.com/rust-lang/rust/issues/26350#issuecomment-163097828",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26350",
    "id": 163097828,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MzA5NzgyOA==",
    "user": {
      "login": "Nashenas88",
      "id": 1673130,
      "node_id": "MDQ6VXNlcjE2NzMxMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1673130?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Nashenas88",
      "html_url": "https://github.com/Nashenas88",
      "followers_url": "https://api.github.com/users/Nashenas88/followers",
      "following_url": "https://api.github.com/users/Nashenas88/following{/other_user}",
      "gists_url": "https://api.github.com/users/Nashenas88/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Nashenas88/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Nashenas88/subscriptions",
      "organizations_url": "https://api.github.com/users/Nashenas88/orgs",
      "repos_url": "https://api.github.com/users/Nashenas88/repos",
      "events_url": "https://api.github.com/users/Nashenas88/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Nashenas88/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-09T04:03:44Z",
    "updated_at": "2015-12-09T04:03:44Z",
    "body": "Would it be beneficial to put a trait behind some of these? For example, `abs`, `min`, and `max`. `Abs` could be in `std::ops` and defined as `fn abs<T>(&self) -> T`, right? I had trouble with this trying to implement something. I wanted the function to work over all integral types, but there was no way to do this and use `abs` at the same time.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/163097828/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/434720741",
    "html_url": "https://github.com/rust-lang/rust/issues/26350#issuecomment-434720741",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26350",
    "id": 434720741,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDcyMDc0MQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-10-31T15:00:21Z",
    "updated_at": "2018-10-31T15:00:21Z",
    "body": "Triage: I know @japaric has been messing with various aspects of libm, but I don't think it's *directly* relevant to this issue.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/434720741/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1063368896",
    "html_url": "https://github.com/rust-lang/rust/issues/26350#issuecomment-1063368896",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26350",
    "id": 1063368896,
    "node_id": "IC_kwDOAAsO6M4_YbjA",
    "user": {
      "login": "workingjubilee",
      "id": 46493976,
      "node_id": "MDQ6VXNlcjQ2NDkzOTc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46493976?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/workingjubilee",
      "html_url": "https://github.com/workingjubilee",
      "followers_url": "https://api.github.com/users/workingjubilee/followers",
      "following_url": "https://api.github.com/users/workingjubilee/following{/other_user}",
      "gists_url": "https://api.github.com/users/workingjubilee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/workingjubilee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/workingjubilee/subscriptions",
      "organizations_url": "https://api.github.com/users/workingjubilee/orgs",
      "repos_url": "https://api.github.com/users/workingjubilee/repos",
      "events_url": "https://api.github.com/users/workingjubilee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/workingjubilee/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-03-09T21:03:45Z",
    "updated_at": "2022-03-09T21:03:45Z",
    "body": "For this matter, I do not believe that the GNU math.h is quite as overwhelmingly tuned for all our supported platforms as suggested, and we also have to consider e.g. inconsistency over musl, msvc, darwin, etc. Being able to have these methods be part of our own libm story is very useful, because it allows consistency across Rust and thus coherently const-evaluating these methods.\r\n\r\nIn addition, having to depend on an external libm at runtime for these means that we run into issues where e.g. we have a SIMD vector type and are forced to scalarize everything, breaking apart the vector into its components, calling the math.h on each component, and reassembling the vector. For those, we can gain significantly by providing not only libm, but equivalents to the much more niche and underdeveloped \"libmvec\". These are nuances of how Rust code interacts with floating point that runtimes written for C don't try to handle.\r\n\r\nThis was discussed last week by T-libs, and one of the concerns that was brought up that it is a lot of code to maintain, and it might be a bad idea to just wholesale add every single method from libm, especially for smaller platforms which might get punished by e.g. code size, and duplicate lookup tables for CORDIC or similar. So adopting any of these would only be a clear win if the overhead of calling a library function itself would be higher than the statically inlined code size. We don't necessarily want this, as a result, for big methods which might use huge tables like cos, sin, atan, etc.\r\n\r\nNonetheless, it might be that for certain comparatively \"well-behaved\" and easy to implement functions that this is acceptable, and T-libs expressed openness to seeing something happen. This is useful for both the aforementioned functions (abs, min, max) and also e.g. ceil, floor, and trunc, where the answer should be fairly obvious and relatively easy to implement.\r\n\r\nIt is quite probable we don't want to further expand our bindings to libm within std, however, not even for replacing it. As noted, `tgamma` is... rather \"specialty\", even in terms of numeric code.\r\n\r\nIn other words, the context for this issue includes issues like\r\n- https://github.com/rust-lang/rust/issues/10087\r\n- https://github.com/rust-lang/rust/issues/50145\r\n- https://github.com/rust-lang/rust/issues/55107\r\n- https://github.com/rust-lang/rust/issues/73920\r\n- https://github.com/rust-lang/portable-simd/issues/76\r\n- https://github.com/rust-lang/portable-simd/issues/109",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1063368896/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
