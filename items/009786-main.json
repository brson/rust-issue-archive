{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/9786",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/9786/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/9786/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/9786/events",
  "html_url": "https://github.com/rust-lang/rust/pull/9786",
  "id": 20774735,
  "node_id": "MDExOlB1bGxSZXF1ZXN0ODk3MTYwMg==",
  "number": 9786,
  "title": "add copy-on-write mutable borrowing to Rc and Arc",
  "user": {
    "login": "bill-myers",
    "id": 4647491,
    "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bill-myers",
    "html_url": "https://github.com/bill-myers",
    "followers_url": "https://api.github.com/users/bill-myers/followers",
    "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
    "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
    "organizations_url": "https://api.github.com/users/bill-myers/orgs",
    "repos_url": "https://api.github.com/users/bill-myers/repos",
    "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bill-myers/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 20,
  "created_at": "2013-10-09T22:04:59Z",
  "updated_at": "2014-06-12T05:20:36Z",
  "closed_at": "2013-12-02T18:07:44Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/9786",
    "html_url": "https://github.com/rust-lang/rust/pull/9786",
    "diff_url": "https://github.com/rust-lang/rust/pull/9786.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/9786.patch",
    "merged_at": null
  },
  "body": "This patch adds a copy-on-write mechanism to Rc and Arc of Clonable types that allows to mutably borrow the contents.\n\nIn the simplest case, if the reference count is 1, we can just give out a mutable reference since we are obviously the only user.\n\nIf the reference count is more than 1, we clone the contents, and we are back to the previous case.\n\nWith this change, Rc and Arc can be used as a variant of unique pointers with the advantage of O(1) time and space copy (as long as the contents are not mutated) but the disadvantage of requiring an extra machine branch and a bunch of machine code on every mutation.\n\nThis can be used for things like persistent functional data structures and in general data that starts being the same as parent data, but sometimes gets changed.\n",
  "closed_by": {
    "login": "alexcrichton",
    "id": 64996,
    "node_id": "MDQ6VXNlcjY0OTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexcrichton",
    "html_url": "https://github.com/alexcrichton",
    "followers_url": "https://api.github.com/users/alexcrichton/followers",
    "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
    "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
    "repos_url": "https://api.github.com/users/alexcrichton/repos",
    "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/9786/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/9786/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
