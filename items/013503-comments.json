[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40339106",
    "html_url": "https://github.com/rust-lang/rust/pull/13503#issuecomment-40339106",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13503",
    "id": 40339106,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMzM5MTA2",
    "user": {
      "login": "flaper87",
      "id": 13816,
      "node_id": "MDQ6VXNlcjEzODE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/13816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flaper87",
      "html_url": "https://github.com/flaper87",
      "followers_url": "https://api.github.com/users/flaper87/followers",
      "following_url": "https://api.github.com/users/flaper87/following{/other_user}",
      "gists_url": "https://api.github.com/users/flaper87/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flaper87/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flaper87/subscriptions",
      "organizations_url": "https://api.github.com/users/flaper87/orgs",
      "repos_url": "https://api.github.com/users/flaper87/repos",
      "events_url": "https://api.github.com/users/flaper87/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flaper87/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-14T07:23:03Z",
    "updated_at": "2014-04-14T07:23:03Z",
    "body": "cc @nikomatsakis \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40339106/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40501548",
    "html_url": "https://github.com/rust-lang/rust/pull/13503#issuecomment-40501548",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13503",
    "id": 40501548,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTAxNTQ4",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-15T16:14:19Z",
    "updated_at": "2014-04-15T16:14:19Z",
    "body": "This test does fail, though not with the error message I was expecting:\n\n```\n// Copyright 2012-2014 The Rust Project Developers. See the COPYRIGHT\n// file at the top-level directory of this distribution and at\n// http://rust-lang.org/COPYRIGHT.\n//\n// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n// option. This file may not be copied, modified, or distributed\n// except according to those terms.\n\n// Test that when instantiating trait default methods, typeck handles\n// lifetime parameters defined on the method bound correctly.\n\npub trait Foo {\n    fn bar<'a, I: Iterator<&'a ()>>(&self, it: I, f: |&'a int|) -> uint {\n        let mut xs = it.filter(|_| true);\n        xs.len()\n    }\n}\n\npub struct Baz;\n\nimpl Foo for Baz {\n    // When instantiating `Foo::bar` for `Baz` here, typeck used to\n    // ICE due to the lifetime parameter of `bar`.\n}\n\nfn main() {\n    let x = Baz;\n    let y = vec!((), (), ());\n    assert_eq!(x.bar(y.iter()), 3);\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40501548/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40501713",
    "html_url": "https://github.com/rust-lang/rust/pull/13503#issuecomment-40501713",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13503",
    "id": 40501713,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTAxNzEz",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-15T16:15:41Z",
    "updated_at": "2014-04-15T16:15:41Z",
    "body": "@edwardw let me re-read the code again and make sure I'm remembering what it is for properly. I may be confused.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40501713/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40503417",
    "html_url": "https://github.com/rust-lang/rust/pull/13503#issuecomment-40503417",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13503",
    "id": 40503417,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTAzNDE3",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-15T16:31:17Z",
    "updated_at": "2014-04-15T16:31:17Z",
    "body": "@edwardw I think I was confused. This is one of the very few cases in which it makes sense to substitute to a bound region. Hence, I think your patch is correct. I expect the test case failure I was seeing is just https://github.com/mozilla/rust/issues/12856. Though, now that I think of it, I'm a bit surprised that you didn't hit it in your example. That may be another bug.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40503417/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40504542",
    "html_url": "https://github.com/rust-lang/rust/pull/13503#issuecomment-40504542",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13503",
    "id": 40504542,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTA0NTQy",
    "user": {
      "login": "edwardw",
      "id": 454049,
      "node_id": "MDQ6VXNlcjQ1NDA0OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/454049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/edwardw",
      "html_url": "https://github.com/edwardw",
      "followers_url": "https://api.github.com/users/edwardw/followers",
      "following_url": "https://api.github.com/users/edwardw/following{/other_user}",
      "gists_url": "https://api.github.com/users/edwardw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edwardw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edwardw/subscriptions",
      "organizations_url": "https://api.github.com/users/edwardw/orgs",
      "repos_url": "https://api.github.com/users/edwardw/repos",
      "events_url": "https://api.github.com/users/edwardw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edwardw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-15T16:41:02Z",
    "updated_at": "2014-04-15T16:41:02Z",
    "body": "I see. I also revised the patch a little bit. Please review.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40504542/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40504996",
    "html_url": "https://github.com/rust-lang/rust/pull/13503#issuecomment-40504996",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13503",
    "id": 40504996,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTA0OTk2",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-15T16:45:14Z",
    "updated_at": "2014-04-15T16:45:14Z",
    "body": "So, I think the patch is _correct_ as written, but i'm still not happy about it, because it is repeating the knowledge about the index adjustment. This is of course what we do for types but that's not a great thing.\n\nTo make this more DRY, one option is to add the (adjusted) index into the RegionParameterDef -- that's certainly an improvement, but it still leaves knowledge distributed between the code in `collect` and `resolve_lifetimes`.\n\nA better approach is to have a routine that can compute the correct index from \"first principles\". This probably requires @pnkfelix's changes from https://github.com/mozilla/rust/pull/13261. The idea would be to walk up from the definition to examine the context in which it occurs. This same routine could then be used by both `resolve_lifetimes` and the code in coherence.\n\nI guess though that even if we do this, the result is still not totally DRY, since there is code that computes the combined substitution which currently concatenates vectors. So maybe it's not worth the effort to make the change I propose. I'd like to just remove this notion of concatenating vectors altogether in favor of something more obvious and less annoying, and that'd be the REAL right fix.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40504996/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40629497",
    "html_url": "https://github.com/rust-lang/rust/pull/13503#issuecomment-40629497",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13503",
    "id": 40629497,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjI5NDk3",
    "user": {
      "login": "edwardw",
      "id": 454049,
      "node_id": "MDQ6VXNlcjQ1NDA0OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/454049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/edwardw",
      "html_url": "https://github.com/edwardw",
      "followers_url": "https://api.github.com/users/edwardw/followers",
      "following_url": "https://api.github.com/users/edwardw/following{/other_user}",
      "gists_url": "https://api.github.com/users/edwardw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edwardw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edwardw/subscriptions",
      "organizations_url": "https://api.github.com/users/edwardw/orgs",
      "repos_url": "https://api.github.com/users/edwardw/repos",
      "events_url": "https://api.github.com/users/edwardw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edwardw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-16T17:45:37Z",
    "updated_at": "2014-04-16T17:45:48Z",
    "body": "Interesting challenge. I reckon the purpose of a monotonic index in `ty::ty_param` and `ty::ReEarlyBound` is to distinguish type and lifetime parameters originated from trait, implementation and method bounds; they may have same name so resolving by name won't work.\n\nSo, \n\n``` rust\npub struct substs {\n    pub self_ty: Option<ty::t>,\n    pub tps: DefIdMap<t>,    // instead of Vec<t>\n    pub regions: RegionSubsts,\n}\npub enum RegionSubsts {\n    ErasedRegions,\n    NonerasedRegions(NodeMap<Region>)    // instead of OwnedSlice<Region>\n}\n```\n\nmay work without vector concatenation at all. A little bit daunting to touch such a core data structure.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40629497/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
