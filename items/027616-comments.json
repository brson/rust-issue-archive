[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129592609",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-129592609",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 129592609,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTU5MjYwOQ==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-10T20:16:30Z",
    "updated_at": "2015-08-10T20:16:30Z",
    "body": "Maybe there should be a \"strict outlives\" requirement for reborrows for `&mut T`, effectively denying them for `&'static mut T`.\nI wonder if that would break any code.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129592609/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129618123",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-129618123",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 129618123,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTYxODEyMw==",
    "user": {
      "login": "alevy",
      "id": 4689,
      "node_id": "MDQ6VXNlcjQ2ODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4689?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alevy",
      "html_url": "https://github.com/alevy",
      "followers_url": "https://api.github.com/users/alevy/followers",
      "following_url": "https://api.github.com/users/alevy/following{/other_user}",
      "gists_url": "https://api.github.com/users/alevy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alevy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alevy/subscriptions",
      "organizations_url": "https://api.github.com/users/alevy/orgs",
      "repos_url": "https://api.github.com/users/alevy/repos",
      "events_url": "https://api.github.com/users/alevy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alevy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-10T21:38:22Z",
    "updated_at": "2015-08-10T21:38:22Z",
    "body": "I think there are two ways of looking at this issue:\n1. `leak` is not sound, because it mints a static reference to a value that is not actually statically allocate (i.e. it _can_ be freed).\n2. `leak` is fine in principal, but aliasing 'static borrows is not -- the attack @arielb1 points out seems to rely on aliasing, and tricking the compiler into thinking it's safe to `drop` the string's `Vec`, although _maybe_ it's not the only attack vector...\n\n@eddyb's suggestions seems reasonable as a general rule, but in this case, isn't the borrow happening from an unsafe pointer, which doesn't have a lifetime? How would it prevent @arielb1's attack?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129618123/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129619137",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-129619137",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 129619137,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTYxOTEzNw==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-10T21:40:40Z",
    "updated_at": "2015-08-10T21:41:07Z",
    "body": "@alevy \n\nYou can basically do that with every `&'static mut` pointer to a non-trivial type (you can alias them and then reborrow to a shorter lifetime).\n\nIt doesn't matter how you get them.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129619137/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129624364",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-129624364",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 129624364,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTYyNDM2NA==",
    "user": {
      "login": "alevy",
      "id": 4689,
      "node_id": "MDQ6VXNlcjQ2ODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4689?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alevy",
      "html_url": "https://github.com/alevy",
      "followers_url": "https://api.github.com/users/alevy/followers",
      "following_url": "https://api.github.com/users/alevy/following{/other_user}",
      "gists_url": "https://api.github.com/users/alevy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alevy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alevy/subscriptions",
      "organizations_url": "https://api.github.com/users/alevy/orgs",
      "repos_url": "https://api.github.com/users/alevy/repos",
      "events_url": "https://api.github.com/users/alevy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alevy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-10T21:54:02Z",
    "updated_at": "2015-08-10T21:54:02Z",
    "body": "@arielb1 Can you mount the attack on a variable that's _actually_ statically allocated? i.e.:\n\n``` rust\nstatic mut FOO : MyType = ...\n```\n\nIsn't this the reason static variables can't have `Drop`able types?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129624364/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129624630",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-129624630",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 129624630,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTYyNDYzMA==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-10T21:54:28Z",
    "updated_at": "2015-08-10T21:54:28Z",
    "body": "Note that this would also make a `thread_local` that doesn't require Sync unsafe (because of `RefCell`).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129624630/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129643052",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-129643052",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 129643052,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTY0MzA1Mg==",
    "user": {
      "login": "alevy",
      "id": 4689,
      "node_id": "MDQ6VXNlcjQ2ODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4689?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alevy",
      "html_url": "https://github.com/alevy",
      "followers_url": "https://api.github.com/users/alevy/followers",
      "following_url": "https://api.github.com/users/alevy/following{/other_user}",
      "gists_url": "https://api.github.com/users/alevy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alevy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alevy/subscriptions",
      "organizations_url": "https://api.github.com/users/alevy/orgs",
      "repos_url": "https://api.github.com/users/alevy/repos",
      "events_url": "https://api.github.com/users/alevy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alevy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-10T23:07:31Z",
    "updated_at": "2015-08-10T23:07:31Z",
    "body": "A counter example to my question/claim that @arielb1 came up with on IRC:\n\n``` rust\nuse std::cell::Cell;\nuse std::fmt::Debug;\n\nfn transmute<X, Y: Debug>(a: Y, dummy: X, x: &'static mut Result<X, Y>,\n                    y: &'static mut Result<X, Y>) -> &'static mut X {\n    *x = Ok(dummy);\n    let foo = x.as_mut().unwrap();\n    *y = Err(a);\n    return foo;\n}\n\nstatic mut FOO : Result<Option<&'static Cell<usize>>, usize> = Err(123);\n\nfn main() {\n    let baz : usize = 0xdeadbeef;\n\n    let myfoo = unsafe { &mut FOO };\n\n    let addr = &baz as *const usize as usize;\n    let oops = transmute(addr, None, myfoo, myfoo);\n    println!(\"Trying to print at address 0x{0:x}\", addr);\n    oops.map(|o| {\n        println!(\"0x{0:x}\", o.get());\n        o.set(0xabcdef);\n        println!(\"0x{0:x}\", baz);\n    });\n}\n```\n\nSo aliasing 'static references is just plain problematic, and clearly `leak` can't be done safely while aliasing is allowed. Does this raise a slightly broader question about whether 'static references should be aliasable from \"safe\" code? If aliasing 'static references is not allowed, can `leak` be safe?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129643052/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129687074",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-129687074",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 129687074,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTY4NzA3NA==",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-11T03:01:38Z",
    "updated_at": "2015-08-11T03:02:02Z",
    "body": "My intuition (and I suspect that of other people) was that global `static mut` items must be `unsafe` to access due to the combination of _two_ reasons: (a) `&mut` references must _always_ be unaliased, but (b) due to their global _scope_, it is impossible to enforce this for references created to `static mut` items. With a function like `Box::leak()`, however, (b) is not the case, so the usual move-only semantics of `&mut` _should_ be sufficient to ensure uniqueness... except it's currently not due to the handling of reborrowing which this issue is about.\n\n> `leak` is not sound, because it mints a static reference to a value that is not actually statically allocate (i.e. it can be freed).\n\nI believe `&'static` doesn't promise anything about how the referent was/is allocated, only that it will live forever, which is the case here. (It can't be freed according to the typesystem because there is no `fn free(&'static T)`.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129687074/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129693151",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-129693151",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 129693151,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTY5MzE1MQ==",
    "user": {
      "login": "Aatch",
      "id": 342416,
      "node_id": "MDQ6VXNlcjM0MjQxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aatch",
      "html_url": "https://github.com/Aatch",
      "followers_url": "https://api.github.com/users/Aatch/followers",
      "following_url": "https://api.github.com/users/Aatch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions",
      "organizations_url": "https://api.github.com/users/Aatch/orgs",
      "repos_url": "https://api.github.com/users/Aatch/repos",
      "events_url": "https://api.github.com/users/Aatch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aatch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-11T03:42:04Z",
    "updated_at": "2015-08-11T03:42:04Z",
    "body": "I agree with @eddyb that it's the re-borrow of `s` that's the issue. I guess that the `'static` lifetime on `alias` is what is throwing it off. It really should be moved, not reborrowed, in this case, as the borrow doesn't seem to prevent usage of `s` like it does with a non-static lifetime. If you wrap the `&'static mut String` in some struct so re-borrowing doesn't happen, the code fails to compile as expected.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129693151/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130000271",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-130000271",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 130000271,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDAwMDI3MQ==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-11T18:13:19Z",
    "updated_at": "2015-08-11T18:13:19Z",
    "body": "@Aatch \n\nThere's no problem with the reborrowing - it's just that borrowck ignores the borrow part of the reborrow for some reason - probably [this line](https://github.com/rust-lang/rust/blob/master/src/librustc_borrowck/borrowck/gather_loans/mod.rs#L365). \n\nIf no reborrow happens, the value is moved as it should.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130000271/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130004436",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-130004436",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 130004436,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDAwNDQzNg==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-11T18:28:02Z",
    "updated_at": "2015-08-11T18:28:02Z",
    "body": "@glaebhoerl \n\nThere is no `free(&'a mut T)` for _any_ `'a`. It's just that `'static` values are required to be valid for the rest of the program's execution.\n\n@alevy \n\n`static mut` is known to be unsafe. I am worried about using some kind of `Mutex`/`RefCell`/`IVar` turning a `&'static Mutex<T>` into a `&'static mut T`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130004436/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130008975",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-130008975",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 130008975,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDAwODk3NQ==",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-11T18:39:44Z",
    "updated_at": "2015-08-11T18:39:44Z",
    "body": "@arielb1 I know. I was trying to respond to @alevy's suspicion that the problem lies somewhere around the (purported) fact that these `&'static mut` values obtained by `leak()`ing \"can be freed\", unlike \"normal\" ones which are actually references to `static` items somewhere in the program.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130008975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130050872",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-130050872",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 130050872,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDA1MDg3Mg==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-11T20:15:50Z",
    "updated_at": "2015-08-11T20:15:50Z",
    "body": "@arielb1 My intuition was that the resulting `'static` lifetime carries no information that could associate it with a borrow, _unlike_ other kinds of lifetimes.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130050872/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130084404",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-130084404",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 130084404,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDA4NDQwNA==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-11T21:32:52Z",
    "updated_at": "2015-08-11T21:32:52Z",
    "body": "@eddyb \n\nYou can always borrow for the outermost function's lifetime - all borrows must intersect it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130084404/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130828703",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-130828703",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 130828703,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDgyODcwMw==",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-13T20:21:09Z",
    "updated_at": "2015-08-13T20:21:09Z",
    "body": "A example of the core problem is:\n\n``` rust\nfn foo(x: &'static mut i32) -> (&'static mut i32, &'static mut i32) {\n    (x, x)\n}\n```\n\ni.e. `&'static mut`s can be aliased.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130828703/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133155095",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-133155095",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 133155095,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzE1NTA5NQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-20T20:01:13Z",
    "updated_at": "2015-08-20T20:01:13Z",
    "body": "So the reason for this is clear enough. There is this code in `gather_loans/mod.rs`:\n\n``` rust\n                    ty::ReStatic => {\n                        // If we get here, an error must have been\n                        // reported in\n                        // `lifetime::guarantee_lifetime()`, because\n                        // the only legal ways to have a borrow with a\n                        // static lifetime should not require\n                        // restrictions. To avoid reporting derived\n                        // errors, we just return here without adding\n                        // any loans.\n                        return;\n                    }\n```\n\nI think the assumption here was that `&'static mut` could only occur with a `static mut`. Anyway this is false, particularly now. Should be easy enough to fix I believe.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133155095/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133187290",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-133187290",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 133187290,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzE4NzI5MA==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-20T21:44:51Z",
    "updated_at": "2015-08-20T21:44:51Z",
    "body": "@nikomatsakis I'm curious what the effects of removing that early return would be.\nWhat would get tracked? Would the resulting restrictions be enough?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133187290/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/139031497",
    "html_url": "https://github.com/rust-lang/rust/issues/27616#issuecomment-139031497",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27616",
    "id": 139031497,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzOTAzMTQ5Nw==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-09T20:06:55Z",
    "updated_at": "2015-09-09T20:06:55Z",
    "body": "@eddyb sorry for being slow to respond. The answer is that I think the resulting restrictions are enough, as long as we extend the loan out to the borders of the fn. I have a patch that does just this. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/139031497/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
