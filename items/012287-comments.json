[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35151295",
    "html_url": "https://github.com/rust-lang/rust/issues/12287#issuecomment-35151295",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12287",
    "id": 35151295,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTUxMjk1",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-15T09:18:48Z",
    "updated_at": "2014-02-15T09:18:48Z",
    "body": "Nominating.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35151295/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35161336",
    "html_url": "https://github.com/rust-lang/rust/issues/12287#issuecomment-35161336",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12287",
    "id": 35161336,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTYxMzM2",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-15T17:09:40Z",
    "updated_at": "2014-02-15T17:09:40Z",
    "body": "cc @alexcrichton \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35161336/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35169083",
    "html_url": "https://github.com/rust-lang/rust/issues/12287#issuecomment-35169083",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12287",
    "id": 35169083,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTY5MDgz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-15T21:51:20Z",
    "updated_at": "2014-02-15T21:51:20Z",
    "body": "I have worried about this in the past, and right now we use a `HashSet` for de-duping which explains the random orderings. I agree that we should do this in a much more structured manner.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35169083/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35178754",
    "html_url": "https://github.com/rust-lang/rust/issues/12287#issuecomment-35178754",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12287",
    "id": 35178754,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTc4NzU0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-16T06:48:20Z",
    "updated_at": "2014-02-16T06:48:20Z",
    "body": "Hm, I'm actually not sure that there is a bug here, but I'm not quite sure why. When passing libraries to the linker, we currently pass this ordering of arguments (left to right on the command line):\n- the LLVM-generated object file\n- the local crate's native libraries. Note that these are inserted in a _first seen_ order, so there is a defined ordering that you can control. \n- upstream rust crates. The order of these crates is nondeterministic\n- upstream native dependencies. Across crates the ordering is deterministic, but within a crate it's the same ordering as native libraries\n\nThis means that if you have a native library like `sqlite3` which depends on `libc` then you do this:\n\n``` rust\n#[link(name = \"sqlite3\")] // shows up first on the command line\n#[link(name = \"c\")] // shows up next\nextern {}\n```\n\nWith this, everything is ok. What I don't understand is how a nondeterministic ordering of upstream crates doesn't cause problems. For example, I have this setup:\n\n``` c\n// a.c\nvoid a() {}\n\n// b.c\nextern void a();\nvoid b() { a(); }\n\n// c.c\nextern void b();\nint main() { b(); }\n```\n\nWhen compiled, it yields problems:\n\n```\n$ gcc  -L. c.o -la -lb\n./libb.a(b.o): In function `b':\nb.c:(.text+0xa): undefined reference to `a'\ncollect2: error: ld returned 1 exit status\n```\n\nNaturally, `libb` depends on `liba`, but is mentioned in the wrong order on the command line. Now let's switch the situation to rust and see what happens\n\n``` rust\n// a.rs\nfn foo() {}\n\n// b.rs\nextern mod a;\nfn foo() { a::foo(); }\n\n// c.rs\nextern mod a;\nextern mod b;\nfn main() { b::foo(); }\n```\n\nNow when we compile, we get no errors!\n\n```\n$ rustc -L. c.rs -Z print-link-args                       \ncc link args: '-m64' '-L/usr/lib/rustlib/x86_64-unknown-linux-gnu/lib' '-o' 'c' 'c.o' '-Wl,--as-needed' '-L.' '-L/home/alex/test/.rust' '-L/home/alex/test' '/usr/lib/rustlib/x86_64-unknown-linux-gnu/lib/libstd-966edb7e-0.10-pre.rlib' '/usr/lib/rustlib/x86_64-unknown-linux-gnu/lib/libgreen-80d9e76a-0.10-pre.rlib' '/usr/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustuv-09e0b925-0.10-pre.rlib' 'liba-ca3f740d-0.0.rlib' 'libb-920859ee-0.0.rlib' '-ldl' '-lm' '-lpthread' '-lpthread' '-lrt' '-lmorestack' '-Wl,-rpath,$ORIGIN/../../../usr/lib/rustlib/x86_64-unknown-linux-gnu/lib' '-Wl,-rpath,/usr/lib/rustlib/x86_64-unknown-linux-gnu/lib'\n```\n\nNotice how `liba-*.rlib` is mentioned _before_ `libb-*.rlib`, yet `libb` depends on `liba` for a symbol. This seems to me to be the same situation as with C, but this appears to successfully compile.\n\nAll-in-all it looks like there is actually no bug today, although I don't understand why there isn't a bug?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35178754/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35825854",
    "html_url": "https://github.com/rust-lang/rust/issues/12287#issuecomment-35825854",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12287",
    "id": 35825854,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODI1ODU0",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-23T07:37:44Z",
    "updated_at": "2014-02-23T07:37:44Z",
    "body": "Related to #11124?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35825854/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36296400",
    "html_url": "https://github.com/rust-lang/rust/issues/12287#issuecomment-36296400",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12287",
    "id": 36296400,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2Mjk2NDAw",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-27T21:55:15Z",
    "updated_at": "2014-02-27T21:55:15Z",
    "body": "\"This is just a bug.\"  Assigning P-low, not assigning to 1.0 milestone.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36296400/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38633254",
    "html_url": "https://github.com/rust-lang/rust/issues/12287#issuecomment-38633254",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12287",
    "id": 38633254,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjMzMjU0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-25T23:15:35Z",
    "updated_at": "2014-03-25T23:15:35Z",
    "body": "I forgot to close this at the time, but this is closed by 17ad504fef35191fe53874bd2fe77ffd14d8e1b9\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38633254/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
