[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49632734",
    "html_url": "https://github.com/rust-lang/rust/issues/15861#issuecomment-49632734",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15861",
    "id": 49632734,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjMyNzM0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-21T16:52:05Z",
    "updated_at": "2014-07-21T16:52:05Z",
    "body": "Can you provide a smaller example and a more detailed description about how to reproduce?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49632734/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49634935",
    "html_url": "https://github.com/rust-lang/rust/issues/15861#issuecomment-49634935",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15861",
    "id": 49634935,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjM0OTM1",
    "user": {
      "login": "buster",
      "id": 151817,
      "node_id": "MDQ6VXNlcjE1MTgxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151817?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/buster",
      "html_url": "https://github.com/buster",
      "followers_url": "https://api.github.com/users/buster/followers",
      "following_url": "https://api.github.com/users/buster/following{/other_user}",
      "gists_url": "https://api.github.com/users/buster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/buster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/buster/subscriptions",
      "organizations_url": "https://api.github.com/users/buster/orgs",
      "repos_url": "https://api.github.com/users/buster/repos",
      "events_url": "https://api.github.com/users/buster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/buster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-21T17:08:54Z",
    "updated_at": "2014-07-21T17:08:54Z",
    "body": "Oops, i did copy&paste the wrong file... updated the first comment with a new gist, sorry.\nReproducing it on Debian:\n- start server\n- do \"netstat -plan | grep 8080\" and observe one listening socket\n- do \"telnet 0 8080\" -> client connects and disconnects immediatly\n- do \"netstat -plan | grep 8080\" and observe a listening socket and a client socket in TIME_WAIT\n\nrepeat for more idle sockets..\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49634935/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49636128",
    "html_url": "https://github.com/rust-lang/rust/issues/15861#issuecomment-49636128",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15861",
    "id": 49636128,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjM2MTI4",
    "user": {
      "login": "jfager",
      "id": 23755,
      "node_id": "MDQ6VXNlcjIzNzU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23755?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jfager",
      "html_url": "https://github.com/jfager",
      "followers_url": "https://api.github.com/users/jfager/followers",
      "following_url": "https://api.github.com/users/jfager/following{/other_user}",
      "gists_url": "https://api.github.com/users/jfager/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jfager/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jfager/subscriptions",
      "organizations_url": "https://api.github.com/users/jfager/orgs",
      "repos_url": "https://api.github.com/users/jfager/repos",
      "events_url": "https://api.github.com/users/jfager/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jfager/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-21T17:18:31Z",
    "updated_at": "2014-07-21T17:26:56Z",
    "body": "Doesn't sound like a bug; if the client closed the connection then the client socket going into TIME_WAIT is how it's supposed to work.  See the [unix socket faq](http://developerweb.net/viewtopic.php?id=2941) on the subject.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49636128/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49638507",
    "html_url": "https://github.com/rust-lang/rust/issues/15861#issuecomment-49638507",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15861",
    "id": 49638507,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjM4NTA3",
    "user": {
      "login": "buster",
      "id": 151817,
      "node_id": "MDQ6VXNlcjE1MTgxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151817?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/buster",
      "html_url": "https://github.com/buster",
      "followers_url": "https://api.github.com/users/buster/followers",
      "following_url": "https://api.github.com/users/buster/following{/other_user}",
      "gists_url": "https://api.github.com/users/buster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/buster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/buster/subscriptions",
      "organizations_url": "https://api.github.com/users/buster/orgs",
      "repos_url": "https://api.github.com/users/buster/repos",
      "events_url": "https://api.github.com/users/buster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/buster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-21T17:36:52Z",
    "updated_at": "2014-07-21T17:36:52Z",
    "body": "Well, according to telnet the connection is closed by the server:\n\n```\n# netstat  -plan | grep 8080\ntcp        0      0 127.0.0.1:8080          0.0.0.0:*               LISTEN      975/streamtest  \n# telnet 0 8080\nTrying 0.0.0.0...\nConnected to 0.\nEscape character is '^]'.\nConnection closed by foreign host.\n\n# netstat  -plan | grep 8080\ntcp        0      0 127.0.0.1:8080          0.0.0.0:*               LISTEN      975/streamtest  \ntcp        0      0 127.0.0.1:8080          127.0.0.1:38801         TIME_WAIT   -               \n```\n\nMaybe i am misunderstanding it, but my assumption was that, when the TcpStream goes out of scope, the Stream is destroyed and when it's destroyed it is properly closed. Is that not so? How to close it properly in this case? Call close_\\* explicitely?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49638507/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49646456",
    "html_url": "https://github.com/rust-lang/rust/issues/15861#issuecomment-49646456",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15861",
    "id": 49646456,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjQ2NDU2",
    "user": {
      "login": "jfager",
      "id": 23755,
      "node_id": "MDQ6VXNlcjIzNzU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23755?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jfager",
      "html_url": "https://github.com/jfager",
      "followers_url": "https://api.github.com/users/jfager/followers",
      "following_url": "https://api.github.com/users/jfager/following{/other_user}",
      "gists_url": "https://api.github.com/users/jfager/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jfager/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jfager/subscriptions",
      "organizations_url": "https://api.github.com/users/jfager/orgs",
      "repos_url": "https://api.github.com/users/jfager/repos",
      "events_url": "https://api.github.com/users/jfager/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jfager/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-21T18:36:58Z",
    "updated_at": "2014-07-21T18:36:58Z",
    "body": "Sorry, I misread your previous comment as stating it was the client initiating the close and the client socket ending up in TIME_WAIT.  \n\nWhichever side of the connection initiates the close is going to end up in TIME_WAIT.  That netstat output is saying it's the server socket that's in TIME_WAIT (you don't see the client socket b/c it's already torn down and gone by the time you run netstat).  This is correct behavior.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49646456/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49647987",
    "html_url": "https://github.com/rust-lang/rust/issues/15861#issuecomment-49647987",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15861",
    "id": 49647987,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjQ3OTg3",
    "user": {
      "login": "buster",
      "id": 151817,
      "node_id": "MDQ6VXNlcjE1MTgxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151817?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/buster",
      "html_url": "https://github.com/buster",
      "followers_url": "https://api.github.com/users/buster/followers",
      "following_url": "https://api.github.com/users/buster/following{/other_user}",
      "gists_url": "https://api.github.com/users/buster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/buster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/buster/subscriptions",
      "organizations_url": "https://api.github.com/users/buster/orgs",
      "repos_url": "https://api.github.com/users/buster/repos",
      "events_url": "https://api.github.com/users/buster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/buster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-21T18:48:28Z",
    "updated_at": "2014-07-21T18:48:28Z",
    "body": "Thanks, so it's correct... :)\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49647987/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
