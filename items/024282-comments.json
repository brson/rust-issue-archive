[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91609202",
    "html_url": "https://github.com/rust-lang/rust/pull/24282#issuecomment-91609202",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24282",
    "id": 91609202,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkxNjA5MjAy",
    "user": {
      "login": "rust-highfive",
      "id": 7378925,
      "node_id": "MDQ6VXNlcjczNzg5MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7378925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rust-highfive",
      "html_url": "https://github.com/rust-highfive",
      "followers_url": "https://api.github.com/users/rust-highfive/followers",
      "following_url": "https://api.github.com/users/rust-highfive/following{/other_user}",
      "gists_url": "https://api.github.com/users/rust-highfive/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rust-highfive/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rust-highfive/subscriptions",
      "organizations_url": "https://api.github.com/users/rust-highfive/orgs",
      "repos_url": "https://api.github.com/users/rust-highfive/repos",
      "events_url": "https://api.github.com/users/rust-highfive/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rust-highfive/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-10T16:31:19Z",
    "updated_at": "2015-04-10T16:31:19Z",
    "body": "Thanks for the pull request, and welcome! The Rust team is excited to review your changes, and you should hear from @brson (or someone else) soon.\n\nIf any changes to this PR are deemed necessary, please add them as extra commits. This ensures that the reviewer can see what has changed since they last reviewed the code. The way Github handles out-of-date commits, this should also make it reasonably obvious what issues have or haven't been addressed. Large or tricky changes may require several passes of review and changes.\n\nPlease see [CONTRIBUTING.md](https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md) for more information.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91609202/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91609256",
    "html_url": "https://github.com/rust-lang/rust/pull/24282#issuecomment-91609256",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24282",
    "id": 91609256,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkxNjA5MjU2",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-10T16:31:33Z",
    "updated_at": "2015-04-10T16:31:33Z",
    "body": "@bors r+ rollup\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91609256/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91609260",
    "html_url": "https://github.com/rust-lang/rust/pull/24282#issuecomment-91609260",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24282",
    "id": 91609260,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkxNjA5MjYw",
    "user": {
      "login": "bors",
      "id": 3372342,
      "node_id": "MDQ6VXNlcjMzNzIzNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bors",
      "html_url": "https://github.com/bors",
      "followers_url": "https://api.github.com/users/bors/followers",
      "following_url": "https://api.github.com/users/bors/following{/other_user}",
      "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
      "organizations_url": "https://api.github.com/users/bors/orgs",
      "repos_url": "https://api.github.com/users/bors/repos",
      "events_url": "https://api.github.com/users/bors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bors/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-10T16:31:34Z",
    "updated_at": "2015-04-10T16:31:34Z",
    "body": ":pushpin: Commit c2fa1f7 has been approved by `pnkfelix`\n\n<!-- @bors r=pnkfelix c2fa1f769da0847581f1b43df5dd03818d418fa3 -->\n",
    "author_association": "COLLABORATOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91609260/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/92046511",
    "html_url": "https://github.com/rust-lang/rust/pull/24282#issuecomment-92046511",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24282",
    "id": 92046511,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkyMDQ2NTEx",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-12T11:56:08Z",
    "updated_at": "2015-04-12T11:56:08Z",
    "body": "@pnkfelix, thinking about this a bit more, I was wondering if dropck really applied here or if unsoundess was still possible with `TypedArena`. After all, the lifetime of `&mut T` references returned by `TypedArena::alloc` are set artificially with `transmute`.\n\nSo I tried to see if I\u00a0could deliberately cause a use-after-free in safe code:\n\n``` rust\n#![feature(rustc_private)]\nextern crate arena;\n\nuse std::cell::Cell;\n\nstruct Foo<'a> {\n    data: Box<u32>,\n    other: Cell<Option<&'a Foo<'a>>>\n}\n\nimpl<'a> Drop for Foo<'a> {\n    fn drop(&mut self) {\n        let other = self.other.get().unwrap();\n        println!(\"Accessing other item\u2019s data = {}\", *other.data);  // Use after free?\n        println!(\"Dropping with data = {}\", *self.data);\n    }\n}\n\nfn main() {\n    let arena = arena::TypedArena::new();\n    // Create a reference cycle within the arena:\n    let a = arena.alloc(Foo {\n        data: Box::new(42),\n        other: Cell::new(None),\n    });\n    let b = arena.alloc(Foo {\n        data: Box::new(6),\n        other: Cell::new(None)\n    });\n    a.other.set(Some(b));\n    b.other.set(Some(a));\n}\n```\n\nThis fails to compile with `error: `arena` does not live long enough`, but compiles fine if I remove the `Drop` impl. So I assume this is dropck doing its job correctly, although the error message does not mention `Drop` at all. It looks like [my `arena-tree` crate](https://github.com/SimonSapin/rust-forest#arena-tree) only works because nodes (which have `&T` cycles within an arena) don\u2019t have a destructor.\n\nJust because I didn\u2019t manage to find a problem doesn\u2019t prove it doesn\u2019t exist, but I\u2019m slightly more confident about removing this warning now.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/92046511/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
