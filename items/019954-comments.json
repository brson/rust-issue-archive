[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68240298",
    "html_url": "https://github.com/rust-lang/rust/pull/19954#issuecomment-68240298",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19954",
    "id": 68240298,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjQwMjk4",
    "user": {
      "login": "michaelwoerister",
      "id": 1825894,
      "node_id": "MDQ6VXNlcjE4MjU4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelwoerister",
      "html_url": "https://github.com/michaelwoerister",
      "followers_url": "https://api.github.com/users/michaelwoerister/followers",
      "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelwoerister/orgs",
      "repos_url": "https://api.github.com/users/michaelwoerister/repos",
      "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelwoerister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-29T08:38:55Z",
    "updated_at": "2014-12-29T08:38:55Z",
    "body": "I've looked into this over the last few days and the problem is that the compiler doesn't like the inline assembly on Android. @luqmana already mentioned that he thought the assembly to look a bit flaky at the work week.\nI've been trying to implement adding the [.debug_gdb_scripts](https://sourceware.org/gdb/onlinedocs/gdb/dotdebug_005fgdb_005fscripts-section.html#dotdebug_005fgdb_005fscripts-section) in a more stable, platform independent way, which turned out to be more work than expected because the linker likes to through out 'unused' stuff. The most promising approach so far seems to be to go the `libmorestack`-route: Compile a small static library containing only the ELF section in question and then linking that with `--whole-archive`. I hope to have implemented this soon. Unfortunately this will mean some more specialized targets in the makefiles `:/`\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68240298/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68372701",
    "html_url": "https://github.com/rust-lang/rust/pull/19954#issuecomment-68372701",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19954",
    "id": 68372701,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MzcyNzAx",
    "user": {
      "login": "michaelwoerister",
      "id": 1825894,
      "node_id": "MDQ6VXNlcjE4MjU4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelwoerister",
      "html_url": "https://github.com/michaelwoerister",
      "followers_url": "https://api.github.com/users/michaelwoerister/followers",
      "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelwoerister/orgs",
      "repos_url": "https://api.github.com/users/michaelwoerister/repos",
      "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelwoerister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-30T16:45:40Z",
    "updated_at": "2014-12-30T16:45:40Z",
    "body": "OK, I've updated this and tested it on Windows, Linux, and OSX. Let's see how it fares on Android. I'm not using any assembly code anymore, just a global variable placed in a special section. I also modified the main-function shim to reference this global so that the linker doesn't kick it out. This turned out to be the only way of getting the section through the `--gc-sections` linker pass, which we enable for executables.\n\n@alexcrichton, you wanna take another look at this?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68372701/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68405856",
    "html_url": "https://github.com/rust-lang/rust/pull/19954#issuecomment-68405856",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19954",
    "id": 68405856,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDA1ODU2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-30T22:29:33Z",
    "updated_at": "2014-12-30T22:29:33Z",
    "body": "I thought we had a better way for keeping the section despite `--gc-sections` as metadata isn't stripped in dylibs somehow, but sadly [I was wrong](https://github.com/rust-lang/rust/blob/84f5ad8679c7fc454473ffbf389030f3e5fee379/src/librustc_trans/back/link.rs#L900-L903).\n\nThis seems like a pretty non-invasive solution, and we can always tinker with slightly more elegant methods later :)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68405856/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68432521",
    "html_url": "https://github.com/rust-lang/rust/pull/19954#issuecomment-68432521",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19954",
    "id": 68432521,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDMyNTIx",
    "user": {
      "login": "michaelwoerister",
      "id": 1825894,
      "node_id": "MDQ6VXNlcjE4MjU4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelwoerister",
      "html_url": "https://github.com/michaelwoerister",
      "followers_url": "https://api.github.com/users/michaelwoerister/followers",
      "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelwoerister/orgs",
      "repos_url": "https://api.github.com/users/michaelwoerister/repos",
      "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelwoerister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-31T09:43:44Z",
    "updated_at": "2014-12-31T09:43:44Z",
    "body": "Yes, the cleanest way to keep the section in is probably to use the [KEEP](http://stackoverflow.com/questions/9827157/what-does-keep-mean-in-a-linker-script) directive in the linker script. But since we don't use custom linker scripts, I didn't want to go down that road...\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68432521/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
