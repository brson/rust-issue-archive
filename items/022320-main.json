{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/22320",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/22320/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/22320/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/22320/events",
  "html_url": "https://github.com/rust-lang/rust/pull/22320",
  "id": 57685329,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MjkzMTczMzA=",
  "number": 22320,
  "title": "Tweaks to equality comparisons for slices/arrays/vectors",
  "user": {
    "login": "petrochenkov",
    "id": 5751617,
    "node_id": "MDQ6VXNlcjU3NTE2MTc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/petrochenkov",
    "html_url": "https://github.com/petrochenkov",
    "followers_url": "https://api.github.com/users/petrochenkov/followers",
    "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
    "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
    "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
    "repos_url": "https://api.github.com/users/petrochenkov/repos",
    "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "alexcrichton",
    "id": 64996,
    "node_id": "MDQ6VXNlcjY0OTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexcrichton",
    "html_url": "https://github.com/alexcrichton",
    "followers_url": "https://api.github.com/users/alexcrichton/followers",
    "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
    "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
    "repos_url": "https://api.github.com/users/alexcrichton/repos",
    "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 14,
  "created_at": "2015-02-14T07:43:23Z",
  "updated_at": "2015-05-09T11:58:45Z",
  "closed_at": "2015-02-23T23:09:46Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/22320",
    "html_url": "https://github.com/rust-lang/rust/pull/22320",
    "diff_url": "https://github.com/rust-lang/rust/pull/22320.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/22320.patch",
    "merged_at": "2015-02-23T23:09:46Z"
  },
  "body": "All types that are \"slices in disguise\" - `[T]`, `[T; N]`, `Vec<T>` etc and sometimes references to them (see #21725) should be equality comparable to each other.\nMany of them are already comparable, but some are not and this PR patches the holes in the impls of `PartialEq` for slice-like entities.\n\nIdeally, the problem could be solved by an impl roughly looking like\n\n```\nimpl<T, U, A, B> PartialEq<U> for T where T: BorrowSlice<A>,\n                  U: BorrowSlice<B>,\n                  A: PartialEq<B> {\n    fn eq(&self, other: &U) -> bool { self.borrow_slice() == other.borrow_slice() }\n    fn ne(&self, other: &U) -> bool { self.borrow_slice() != other.borrow_slice() }\n}\n```\n\n, but the type system would never allow such a simple and obvious solution.\nTherefore, the patch follows this approach, but implements it with macros and not generics.\n\nThe applied changes are conservative, in particular, the smart pointers aren't touched at all.\nBut the comparisons for `Box<[T]>`, `Rc<[T]>` and `Arc<[T]>` seem trivial to add. (Should I do it?)\n\nThis PR partially address #21725\n\nTechnically this is a [breaking-change], because the impls for fixed-size arrays are more conservative now.\n\nNote: There are blanket impls of `PartialEq` in libcore/cmp.rs (see https://github.com/rust-lang/rust/blob/master/src/libcore/cmp.rs#L432 and below), they strip an _equal_ number of references from both operands and then compare the remains. It would be much better to strip _all_ the references before the comparison in the blanket impls to reduce the number of concrete impls, but I haven't found a way to do it without specialization/negative bounds.\n\nr? @aturon \ncc @Gankro \n",
  "closed_by": {
    "login": "alexcrichton",
    "id": 64996,
    "node_id": "MDQ6VXNlcjY0OTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexcrichton",
    "html_url": "https://github.com/alexcrichton",
    "followers_url": "https://api.github.com/users/alexcrichton/followers",
    "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
    "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
    "repos_url": "https://api.github.com/users/alexcrichton/repos",
    "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/22320/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/22320/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
