[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154222055",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-154222055",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 154222055,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDIyMjA1NQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-05T22:55:46Z",
    "updated_at": "2015-11-05T22:55:46Z",
    "body": "I believe the semantics of this today are that the compiler will generate a function with the symbol `main` which calls the `#[start]` function, if present, in an executable. This skips the `#[lang = \"start\"]` implementation, if any, in an upstream library (the standard library provides this to set up the first `catch_panic` among a few other minor things).\n\nThe signature for this function is also `fn(isize, *const *const u8) -> isize`, where the `isize` may no longer be \"the most correct\". Additionally, the `*const *const u8` may not be the most appropriate option for Windows (although it works). I'm not 100% sure what \"the best\" signature on Windows is.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154222055/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155219439",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-155219439",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 155219439,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NTIxOTQzOQ==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-09T22:29:57Z",
    "updated_at": "2015-11-09T22:31:59Z",
    "body": "On Windows the executable entry point does not take any arguments. Currently we let the CRT act as the executable entry point which then calls our Rust entry wrapper which invokes the start function which is either `#[lang = \"start\"]` which then invokes the user's main function pointer provided to it or a user provided `#[start]` function. Which executable entry point the linker decides to use depends on the `/SUBSYSTEM` and which main function it can find (https://msdn.microsoft.com/en-us/library/f9t8842e.aspx). All information provided to the main function by the CRT can be obtained through alternative means. Note that if we eventually provide an option for `/SUBSYSTEM:Windows` that main function takes a very different set of (useless) arguments than the traditional main (https://msdn.microsoft.com/en-us/library/windows/desktop/ms633559%28v=vs.85%29.aspx).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155219439/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165802888",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-165802888",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 165802888,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTgwMjg4OA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-18T15:22:19Z",
    "updated_at": "2015-12-18T15:22:19Z",
    "body": "html5ever uses in an ugly hack that overrides the `main` function used by `cargo test` in order to generate thousands of tests dynamically. (Tests with the same code but parameterized on `(input, expected result)`.)\n\nThis would be better solved by some way to override the test harness used by `cargo test` (Is there an issue/RFC for that already?)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165802888/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165841010",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-165841010",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 165841010,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTg0MTAxMA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-18T17:06:00Z",
    "updated_at": "2015-12-18T17:06:00Z",
    "body": "@SimonSapin the use case for that with Cargo should in theory be `harness = false`, but I'm curious how that interacts with `#[start]`?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165841010/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165924912",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-165924912",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 165924912,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTkyNDkxMg==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-19T00:11:33Z",
    "updated_at": "2015-12-19T00:11:33Z",
    "body": "The `#[start]` trick doesn\u2019t work anymore, but it looked like this: https://github.com/servo/html5ever/commit/df8e749e697afd3398ef411a0bcba250d20a2697\n\nIs there a tracking issue for `harness = false`?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165924912/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165928020",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-165928020",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 165928020,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTkyODAyMA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-19T00:42:51Z",
    "updated_at": "2015-12-19T00:42:51Z",
    "body": "Oh that's already implemented today, if a test target is listed as `harness = false` then Cargo just won't pass `--test` when compiling it and expects it to be a binary.\n\n(this may be a bit off-topic from `#[start]` though so feel free to ping me on IRC)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165928020/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169797871",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-169797871",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 169797871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2OTc5Nzg3MQ==",
    "user": {
      "login": "mahkoh",
      "id": 1882250,
      "node_id": "MDQ6VXNlcjE4ODIyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1882250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahkoh",
      "html_url": "https://github.com/mahkoh",
      "followers_url": "https://api.github.com/users/mahkoh/followers",
      "following_url": "https://api.github.com/users/mahkoh/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahkoh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahkoh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahkoh/subscriptions",
      "organizations_url": "https://api.github.com/users/mahkoh/orgs",
      "repos_url": "https://api.github.com/users/mahkoh/repos",
      "events_url": "https://api.github.com/users/mahkoh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahkoh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-07T20:36:43Z",
    "updated_at": "2016-01-07T20:36:43Z",
    "body": "The current signature for the lang item is\n\n``` rust\nfn lang_start(main: *const u8, argc: isize, argv: *const *const u8) -> isize {\n```\n\nwhich is called by a generated main function. Instead, the signatures of both should be arbitrary and the symbols translate to `main` directly. This allows the `main` function to be platform dependent. A pointer to the user's main function can be obtained via an intrinsic.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169797871/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169803791",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-169803791",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 169803791,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2OTgwMzc5MQ==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-07T21:01:39Z",
    "updated_at": "2016-01-07T21:01:39Z",
    "body": "Note that on windows it really shouldn't always be `main`. If the user sets the subsystem to windows instead of console, then the CRT expects to find `WinMain` which results in a linker error because it wasn't defined.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169803791/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/224050679",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-224050679",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 224050679,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNDA1MDY3OQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-06T18:45:47Z",
    "updated_at": "2016-06-06T18:45:47Z",
    "body": "https://github.com/rust-lang/rust/issues/20064 suggests that the signature here is wrong, we should consider this before making this feature stable.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/224050679/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/224124889",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-224124889",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 224124889,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNDEyNDg4OQ==",
    "user": {
      "login": "comex",
      "id": 47517,
      "node_id": "MDQ6VXNlcjQ3NTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/comex",
      "html_url": "https://github.com/comex",
      "followers_url": "https://api.github.com/users/comex/followers",
      "following_url": "https://api.github.com/users/comex/following{/other_user}",
      "gists_url": "https://api.github.com/users/comex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/comex/subscriptions",
      "organizations_url": "https://api.github.com/users/comex/orgs",
      "repos_url": "https://api.github.com/users/comex/repos",
      "events_url": "https://api.github.com/users/comex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/comex/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-07T00:02:55Z",
    "updated_at": "2016-06-07T00:05:30Z",
    "body": "Just to clarify, it's not just a question of what signature `lang_start` should have; rustc currently generates C entry points (`main`) that only work \"by accident\" (because on 32-bit platforms `isize` = `c_int` and on 64-bit the calling conventions happen to work out).  On my Mac, I get:\n\n```\ndefine i64 @main(i64, i8**) unnamed_addr {\n```\n\nOf course this would be an easy fix.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/224124889/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/224135609",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-224135609",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 224135609,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNDEzNTYwOQ==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-07T01:18:40Z",
    "updated_at": "2016-06-07T01:18:40Z",
    "body": "Just don't stabilize this until consideration is taken for subsystems, which change the entry point completely from `main` to `WinMain` and are really important for Rust to support if it wants to be used in the Windows world (several people have spoken to me and said this is one of the issues getting in the way of them using Rust in production on Windows)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/224135609/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/224173310",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-224173310",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 224173310,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNDE3MzMxMA==",
    "user": {
      "login": "pravic",
      "id": 724639,
      "node_id": "MDQ6VXNlcjcyNDYzOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/724639?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pravic",
      "html_url": "https://github.com/pravic",
      "followers_url": "https://api.github.com/users/pravic/followers",
      "following_url": "https://api.github.com/users/pravic/following{/other_user}",
      "gists_url": "https://api.github.com/users/pravic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pravic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pravic/subscriptions",
      "organizations_url": "https://api.github.com/users/pravic/orgs",
      "repos_url": "https://api.github.com/users/pravic/repos",
      "events_url": "https://api.github.com/users/pravic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pravic/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-07T04:35:25Z",
    "updated_at": "2016-06-07T04:35:25Z",
    "body": "Entry point name is irrelevant for windows apps actually. Ability to specify subsystem is one of important things to create application, because most of them are gui with \"windows\" subsystem.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/224173310/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/355362315",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-355362315",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 355362315,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTM2MjMxNQ==",
    "user": {
      "login": "AndrewGaspar",
      "id": 2292643,
      "node_id": "MDQ6VXNlcjIyOTI2NDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2292643?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AndrewGaspar",
      "html_url": "https://github.com/AndrewGaspar",
      "followers_url": "https://api.github.com/users/AndrewGaspar/followers",
      "following_url": "https://api.github.com/users/AndrewGaspar/following{/other_user}",
      "gists_url": "https://api.github.com/users/AndrewGaspar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AndrewGaspar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AndrewGaspar/subscriptions",
      "organizations_url": "https://api.github.com/users/AndrewGaspar/orgs",
      "repos_url": "https://api.github.com/users/AndrewGaspar/repos",
      "events_url": "https://api.github.com/users/AndrewGaspar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AndrewGaspar/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-04T18:36:06Z",
    "updated_at": "2018-01-04T18:36:06Z",
    "body": "Pinging this thread since it seems inactive. I wanted to express interest in this feature being stabilized. I was really excited when I discovered that you _could_ replace the entry point in Rust, and then real bummed when I found out that you could only do it on nightly.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/355362315/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/369790165",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-369790165",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 369790165,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2OTc5MDE2NQ==",
    "user": {
      "login": "glandium",
      "id": 1038527,
      "node_id": "MDQ6VXNlcjEwMzg1Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1038527?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glandium",
      "html_url": "https://github.com/glandium",
      "followers_url": "https://api.github.com/users/glandium/followers",
      "following_url": "https://api.github.com/users/glandium/following{/other_user}",
      "gists_url": "https://api.github.com/users/glandium/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glandium/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glandium/subscriptions",
      "organizations_url": "https://api.github.com/users/glandium/orgs",
      "repos_url": "https://api.github.com/users/glandium/repos",
      "events_url": "https://api.github.com/users/glandium/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glandium/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-03-02T01:30:56Z",
    "updated_at": "2018-03-02T01:30:56Z",
    "body": "It's also necessary to write #![no_std] programs.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/369790165/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/369802569",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-369802569",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 369802569,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2OTgwMjU2OQ==",
    "user": {
      "login": "glandium",
      "id": 1038527,
      "node_id": "MDQ6VXNlcjEwMzg1Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1038527?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glandium",
      "html_url": "https://github.com/glandium",
      "followers_url": "https://api.github.com/users/glandium/followers",
      "following_url": "https://api.github.com/users/glandium/following{/other_user}",
      "gists_url": "https://api.github.com/users/glandium/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glandium/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glandium/subscriptions",
      "organizations_url": "https://api.github.com/users/glandium/orgs",
      "repos_url": "https://api.github.com/users/glandium/repos",
      "events_url": "https://api.github.com/users/glandium/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glandium/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-03-02T02:41:43Z",
    "updated_at": "2018-03-02T02:41:43Z",
    "body": "I would expect `#[start]` to pass the `/ENTRY` argument to `link.exe`, but it apparently doesn't. Although it's worth noting that the function signature for an entry point on Windows is different anyways, so one would need a different `#[start]` function there.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/369802569/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/370288037",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-370288037",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 370288037,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDI4ODAzNw==",
    "user": {
      "login": "clarfonthey",
      "id": 15850505,
      "node_id": "MDQ6VXNlcjE1ODUwNTA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/15850505?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/clarfonthey",
      "html_url": "https://github.com/clarfonthey",
      "followers_url": "https://api.github.com/users/clarfonthey/followers",
      "following_url": "https://api.github.com/users/clarfonthey/following{/other_user}",
      "gists_url": "https://api.github.com/users/clarfonthey/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/clarfonthey/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/clarfonthey/subscriptions",
      "organizations_url": "https://api.github.com/users/clarfonthey/orgs",
      "repos_url": "https://api.github.com/users/clarfonthey/repos",
      "events_url": "https://api.github.com/users/clarfonthey/events{/privacy}",
      "received_events_url": "https://api.github.com/users/clarfonthey/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-03-05T01:52:51Z",
    "updated_at": "2018-03-05T01:53:15Z",
    "body": "> It's also necessary to write #![no_std] programs.\r\n\r\nSpeaking of which\u2026 is there any reason for this? We could make a version of `Termination` for libcore and remove all of the system-specific stuff from the shim. We'd also want some form of `env::Args` for libcore, but I'd argue that this is reasonable, especially if it's very bare-bones.\r\n\r\nPersonally, instead of offering `#[start]`, I think that it makes more sense to be able to prune down the existing `start` shim by removing some of its guarantees. For example, aborting on panics, disallowing multithreading, and disabling stack protection would be enough.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/370288037/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/370544291",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-370544291",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 370544291,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDU0NDI5MQ==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-03-05T19:58:13Z",
    "updated_at": "2018-03-05T19:58:13Z",
    "body": "@glandium The binary entry point is completely different from `#[start]`. Unless you don't want to link to the CRT at all, you'll probably want the binary entry point to remain the `mainCRTStartup` provided by the CRT, otherwise the C RunTime won't be initialized!\r\n\r\n@clarcharr Adding some form of `env::Args` to libcore is a bad idea, as on Windows it requires calling system functions and heap allocating which is firmly in the realm of libstd. On the other hand, because it is only a system function, Windows users don't need to ask libcore/libstd for the args and can just go through winapi themselves. Unix users would still need to get argc/argv somehow...",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/370544291/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/370549234",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-370549234",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 370549234,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDU0OTIzNA==",
    "user": {
      "login": "Amanieu",
      "id": 278509,
      "node_id": "MDQ6VXNlcjI3ODUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amanieu",
      "html_url": "https://github.com/Amanieu",
      "followers_url": "https://api.github.com/users/Amanieu/followers",
      "following_url": "https://api.github.com/users/Amanieu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions",
      "organizations_url": "https://api.github.com/users/Amanieu/orgs",
      "repos_url": "https://api.github.com/users/Amanieu/repos",
      "events_url": "https://api.github.com/users/Amanieu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amanieu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-03-05T20:13:49Z",
    "updated_at": "2018-03-05T20:13:49Z",
    "body": "I've just been using `#[no_main]` in my `no_std` programs. This completely eliminates the default entry point logic.\r\n\r\nI just define my main function with `#[no_mangle]` and have it called by my initialization code.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/370549234/reactions",
      "total_count": 6,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 2,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/370561325",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-370561325",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 370561325,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDU2MTMyNQ==",
    "user": {
      "login": "clarfonthey",
      "id": 15850505,
      "node_id": "MDQ6VXNlcjE1ODUwNTA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/15850505?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/clarfonthey",
      "html_url": "https://github.com/clarfonthey",
      "followers_url": "https://api.github.com/users/clarfonthey/followers",
      "following_url": "https://api.github.com/users/clarfonthey/following{/other_user}",
      "gists_url": "https://api.github.com/users/clarfonthey/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/clarfonthey/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/clarfonthey/subscriptions",
      "organizations_url": "https://api.github.com/users/clarfonthey/orgs",
      "repos_url": "https://api.github.com/users/clarfonthey/repos",
      "events_url": "https://api.github.com/users/clarfonthey/events{/privacy}",
      "received_events_url": "https://api.github.com/users/clarfonthey/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-03-05T20:53:26Z",
    "updated_at": "2018-03-05T20:53:26Z",
    "body": "@retep998 Oh, I didn't know that. I think that in that case, it makes sense to simply have a `MainArgs` opaque struct which encapsulates `argc` and `argv` or nothing if they're not available.\r\n\r\nThat was initially the idea but I didn't realise how windows did things.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/370561325/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/373258715",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-373258715",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 373258715,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzI1ODcxNQ==",
    "user": {
      "login": "glandium",
      "id": 1038527,
      "node_id": "MDQ6VXNlcjEwMzg1Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1038527?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glandium",
      "html_url": "https://github.com/glandium",
      "followers_url": "https://api.github.com/users/glandium/followers",
      "following_url": "https://api.github.com/users/glandium/following{/other_user}",
      "gists_url": "https://api.github.com/users/glandium/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glandium/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glandium/subscriptions",
      "organizations_url": "https://api.github.com/users/glandium/orgs",
      "repos_url": "https://api.github.com/users/glandium/repos",
      "events_url": "https://api.github.com/users/glandium/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glandium/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-03-15T04:39:20Z",
    "updated_at": "2018-03-15T04:40:24Z",
    "body": "> I've just been using `#[no_main]` in my `no_std` programs. This completely eliminates the default entry point logic.\r\n\r\nIndeed, it surprisingly works on linux, mac and even windows, with a `#[no_mangle]`, `pub extern \"C\" fn main(...) -> isize`. (edit: maybe actually `i32`?)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/373258715/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/373361193",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-373361193",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 373361193,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzM2MTE5Mw==",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-03-15T12:36:13Z",
    "updated_at": "2018-03-15T12:36:13Z",
    "body": "`#[no_mangle]` is not type safe so I don't consider it a proper user facing way to set the entry point. It also doesn't require unsafe which makes it not obvious that it's extremely dangerous to get the type signature wrong. This is \"safe\" and segfaults:\r\n\r\n``` rust\r\n#![no_main]\r\n\r\n#[no_mangle]\r\npub fn main(args: Vec<String>) {\r\n    for arg in args {\r\n        println!(\"{}\", arg);\r\n    }\r\n}\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/373361193/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/433742295",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-433742295",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 433742295,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzc0MjI5NQ==",
    "user": {
      "login": "ketsuban",
      "id": 5253816,
      "node_id": "MDQ6VXNlcjUyNTM4MTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5253816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ketsuban",
      "html_url": "https://github.com/ketsuban",
      "followers_url": "https://api.github.com/users/ketsuban/followers",
      "following_url": "https://api.github.com/users/ketsuban/following{/other_user}",
      "gists_url": "https://api.github.com/users/ketsuban/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ketsuban/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ketsuban/subscriptions",
      "organizations_url": "https://api.github.com/users/ketsuban/orgs",
      "repos_url": "https://api.github.com/users/ketsuban/repos",
      "events_url": "https://api.github.com/users/ketsuban/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ketsuban/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-10-28T21:17:43Z",
    "updated_at": "2018-10-28T21:17:43Z",
    "body": "The current signature for `#[start]` functions isn't great in embedded contexts either. There's nothing to pass arguments to a Game Boy Advance game or read a return value\u2014the only way execution is going to end is if the player switches the game off.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/433742295/reactions",
      "total_count": 5,
      "+1": 5,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/567777268",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-567777268",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 567777268,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2Nzc3NzI2OA==",
    "user": {
      "login": "CJKay",
      "id": 1470499,
      "node_id": "MDQ6VXNlcjE0NzA0OTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1470499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CJKay",
      "html_url": "https://github.com/CJKay",
      "followers_url": "https://api.github.com/users/CJKay/followers",
      "following_url": "https://api.github.com/users/CJKay/following{/other_user}",
      "gists_url": "https://api.github.com/users/CJKay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CJKay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CJKay/subscriptions",
      "organizations_url": "https://api.github.com/users/CJKay/orgs",
      "repos_url": "https://api.github.com/users/CJKay/repos",
      "events_url": "https://api.github.com/users/CJKay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CJKay/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-12-20T03:54:48Z",
    "updated_at": "2019-12-20T03:54:48Z",
    "body": "> \r\n> \r\n> The current signature for `#[start]` functions isn't great in embedded contexts either. There's nothing to pass arguments to a Game Boy Advance game or read a return value\u2014the only way execution is going to end is if the player switches the game off.\r\n\r\nI wouldn't write it off so easily - it could provide a neat way to inject \"kernel\" arguments through interfaces like semihosting, which could prove very useful for doing automated testing of embedded software. You could always just `main(0, &[core::ptr::null()] as *const *const u8);` if you don't have a use for them.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/567777268/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/567788244",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-567788244",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 567788244,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2Nzc4ODI0NA==",
    "user": {
      "login": "comex",
      "id": 47517,
      "node_id": "MDQ6VXNlcjQ3NTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/comex",
      "html_url": "https://github.com/comex",
      "followers_url": "https://api.github.com/users/comex/followers",
      "following_url": "https://api.github.com/users/comex/following{/other_user}",
      "gists_url": "https://api.github.com/users/comex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/comex/subscriptions",
      "organizations_url": "https://api.github.com/users/comex/orgs",
      "repos_url": "https://api.github.com/users/comex/repos",
      "events_url": "https://api.github.com/users/comex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/comex/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-12-20T05:00:35Z",
    "updated_at": "2019-12-20T05:00:35Z",
    "body": "True, but even if you do want the entry point to have arguments, there's no reason to force it to have those exact argument types.  On the other hand, it *is* useful to diagnose when the user gets the type wrong by accident.  Perhaps having a `#[start]` of the \"wrong\" type should be a lint instead of a hard error?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/567788244/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/567830723",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-567830723",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 567830723,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NzgzMDcyMw==",
    "user": {
      "login": "Lokathor",
      "id": 5456384,
      "node_id": "MDQ6VXNlcjU0NTYzODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5456384?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Lokathor",
      "html_url": "https://github.com/Lokathor",
      "followers_url": "https://api.github.com/users/Lokathor/followers",
      "following_url": "https://api.github.com/users/Lokathor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Lokathor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Lokathor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Lokathor/subscriptions",
      "organizations_url": "https://api.github.com/users/Lokathor/orgs",
      "repos_url": "https://api.github.com/users/Lokathor/repos",
      "events_url": "https://api.github.com/users/Lokathor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Lokathor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-12-20T07:58:46Z",
    "updated_at": "2019-12-20T07:58:46Z",
    "body": "@CJKay I don't understand your point at all. No Rust code calls to `main` on the GBA, nor does Rust have any useful place to return to, so the signature should be `main() -> !`. That's not necessarily correct for all contexts, that's just what it should be for GBA. It probably varies by target, but we could probably narrow it to a handful of signatures to select from or just not limit the signature at all and leave it up to the user reading their platform's docs.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/567830723/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/569544554",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-569544554",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 569544554,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTU0NDU1NA==",
    "user": {
      "login": "CJKay",
      "id": 1470499,
      "node_id": "MDQ6VXNlcjE0NzA0OTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1470499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CJKay",
      "html_url": "https://github.com/CJKay",
      "followers_url": "https://api.github.com/users/CJKay/followers",
      "following_url": "https://api.github.com/users/CJKay/following{/other_user}",
      "gists_url": "https://api.github.com/users/CJKay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CJKay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CJKay/subscriptions",
      "organizations_url": "https://api.github.com/users/CJKay/orgs",
      "repos_url": "https://api.github.com/users/CJKay/repos",
      "events_url": "https://api.github.com/users/CJKay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CJKay/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-12-29T21:43:34Z",
    "updated_at": "2019-12-29T21:43:34Z",
    "body": "@comex Seems reasonable.\r\n\r\n@Lokathor I don't know the impact for GBA development, but for bare-metal Cortex-M style development it could prove useful to retain the ability for the runtime to send arguments to and return values from the main function.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/569544554/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/569545768",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-569545768",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 569545768,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTU0NTc2OA==",
    "user": {
      "login": "Lokathor",
      "id": 5456384,
      "node_id": "MDQ6VXNlcjU0NTYzODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5456384?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Lokathor",
      "html_url": "https://github.com/Lokathor",
      "followers_url": "https://api.github.com/users/Lokathor/followers",
      "following_url": "https://api.github.com/users/Lokathor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Lokathor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Lokathor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Lokathor/subscriptions",
      "organizations_url": "https://api.github.com/users/Lokathor/orgs",
      "repos_url": "https://api.github.com/users/Lokathor/repos",
      "events_url": "https://api.github.com/users/Lokathor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Lokathor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-12-29T22:01:34Z",
    "updated_at": "2019-12-29T22:01:34Z",
    "body": "But you said \"if there's no arguments to main then write `main(0, &[core::ptr::null()] as *const *const u8);`\", which is Rust code. And no Rust code runs before or after `main` on GBA. So your suggestion is nonsense.\r\n\r\nThat is why I said that each platform should just be allowed to just use a platform appropriate signature of its own devising.\r\n\r\nTo be as absolutely clear as possible: **one signature for all platforms is clearly the wrong decision and would be an improper design to eventually stabilize**",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/569545768/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/914106756",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-914106756",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 914106756,
    "node_id": "IC_kwDOAAsO6M42fCmE",
    "user": {
      "login": "nacaclanga",
      "id": 55027114,
      "node_id": "MDQ6VXNlcjU1MDI3MTE0",
      "avatar_url": "https://avatars.githubusercontent.com/u/55027114?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nacaclanga",
      "html_url": "https://github.com/nacaclanga",
      "followers_url": "https://api.github.com/users/nacaclanga/followers",
      "following_url": "https://api.github.com/users/nacaclanga/following{/other_user}",
      "gists_url": "https://api.github.com/users/nacaclanga/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nacaclanga/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nacaclanga/subscriptions",
      "organizations_url": "https://api.github.com/users/nacaclanga/orgs",
      "repos_url": "https://api.github.com/users/nacaclanga/repos",
      "events_url": "https://api.github.com/users/nacaclanga/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nacaclanga/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-09-07T08:37:05Z",
    "updated_at": "2021-09-07T08:37:05Z",
    "body": "On way to implement a plattform specific design is to have a `#[bin_entry = \"main\"]` attribute that must be attached to exactly one item in the dependency tree, for a crate to be compilable as bin (unless the `no_main` feature is also provided). The function signature can be arbitry, the uses is responsible for giving the right signature. When the crate is compiled as libary, it is ignored. When the crate is compiled as binary, it acts as a `#[link_name = \"main\"]` attribute. Rust main function is provided as an intrinsic so it can be called from the bin_entry function. A set implementation for this is given in `std` for common targets",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/914106756/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/952381464",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-952381464",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 952381464,
    "node_id": "IC_kwDOAAsO6M44xDAY",
    "user": {
      "login": "bitwalker",
      "id": 955793,
      "node_id": "MDQ6VXNlcjk1NTc5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/955793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bitwalker",
      "html_url": "https://github.com/bitwalker",
      "followers_url": "https://api.github.com/users/bitwalker/followers",
      "following_url": "https://api.github.com/users/bitwalker/following{/other_user}",
      "gists_url": "https://api.github.com/users/bitwalker/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bitwalker/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bitwalker/subscriptions",
      "organizations_url": "https://api.github.com/users/bitwalker/orgs",
      "repos_url": "https://api.github.com/users/bitwalker/repos",
      "events_url": "https://api.github.com/users/bitwalker/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bitwalker/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-10-26T22:37:58Z",
    "updated_at": "2021-10-26T22:44:56Z",
    "body": "I think this issue is the best place to discuss something I haven't really seen brought up anywhere, in fact @nacaclanga is the first person I've seen mention the idea of an intrinsic to initialize the runtime from a custom main function, which would certainly have solved an issue I've encountered.\r\n\r\nMy use case is in an ahead-of-time compiler, written in Rust, that compiles Erlang source code to a native executable (or if desired, to a static/dynamic lib), and links against a runtime, also written in Rust, that provides the \"real\" entry point of the executable. The compiler is based on LLVM, and its linker is largely based on the Rust linker. The issue I ran into relatively far into the implementation, was the question of how to link my Rust runtime to the executable generated by the compiler while ensuring that the Rust standard library runtime gets properly initialized. Put another way, I want the executable to start as if it was compiled by rustc with my runtime crate as the entry point. I found a way to make it work, but dear lord is it disgusting:\r\n\r\nNOTE: This is currently being compiled against a slightly older version of Rust, and I imagine there has been enough movement upstream that this no longer compiles as-is on the most recent nightly without a few changes, but the point is just to convey what I've had to do to handle this. I'm just getting back into it recently after having been away for most of this year.\r\n\r\n```rust\r\n///! This code is from the core runtime crate, it is linked in to compiled executables to act as the main entry point\r\n#![feature(main)]\r\n\r\nmod atoms;\r\nmod symbols;\r\n\r\nextern \"Rust\" {\r\n    /// We support linking against different high-level runtime implementations, they are required to\r\n    /// export an `rt_entry` function.\r\n    #[link_name = \"rt_entry\"]\r\n    fn rt_entry() -> i32;\r\n\r\n    /// The symbol `__rt_lang_start_internal` is generated by our compiler by first discovering the\r\n    /// name of the real Rust lang_start_internal symbol of the Rust toolchain it is built against, and then generating\r\n    /// code to act as a shim for calling that symbol, but exported with a consistent name\r\n    #[link_name = \"__rt_lang_start_internal\"]\r\n    fn lang_start(main: &dyn Fn() -> i32, argc: isize, argv: *const *const i8) -> isize;\r\n}\r\n\r\n#[no_mangle]\r\npub extern \"C\" fn main(argc: i32, argv: *const *const std::os::raw::c_char) -> i32 {\r\n    unsafe { lang_start(&move || main_internal(), argc as isize, argv) as i32 }\r\n}\r\n\r\n/// The primary entry point for our runtime\r\n///\r\n/// This function is responsible for setting up any core functionality required\r\n/// by the higher-level runtime, e.g. initializing the atom table. Once initialized,\r\n/// this function invokes the platform-specific entry point which handles starting\r\n/// up the scheduler and other high-level runtime functionality.\r\n#[main]\r\npub fn main_internal() -> i32 {\r\n    use crate::atoms::*;\r\n    use crate::symbols::*;\r\n\r\n    // Initialize atom table\r\n    if unsafe { InitializeAtomTable(ATOM_TABLE, NUM_ATOMS) } == false {\r\n        return 102;\r\n    }\r\n\r\n    // Initialize the dispatch table\r\n    if unsafe { InitializeDispatchTable(SYMBOL_TABLE, NUM_SYMBOLS) } == false {\r\n        return 103;\r\n    }\r\n\r\n    // Invoke platform-specific entry point\r\n    unsafe { rt_entry() }\r\n}\r\n```\r\n\r\nThis honestly isn't even the worst part, that award probably goes to what I do to extract the real `lang_start_internal` symbol name, or maybe the code generation to allow calling that function as `_rt_lang_start_internal`. It would be awesome if instead of having to do any of that, I could just call the lang start function directly from my own `main`.\r\n\r\nI'm a bit surprised this isn't a more commonly requested use case, particular for ahead-of-time compiler projects. I wouldn't be surprised if there are other situations in which you want to compile a Rust crate as a library that can be linked together with other code to form an executable while retaining the ability to properly initialize the standard library. I'm entirely unclear on how this can work at all today with Rust crates that are linked into C/C++ programs, perhaps it doesn't, or maybe the functionality used by those programs don't depend on standard library features that require initialization (is that even possible?). In my case, I rely on things like the ability to ask for args passed to the executable, the panic handler, the main thread setup + stack guard, etc., for my runtime.\r\n\r\nRight now (AIUI) the situation is basically all or nothing, you either compile your binary with `rustc` (obviously not an option for my project), or you completely opt out of using the standard library, i.e. compiling with `#[no_std]` and providing your own `main`, just like I've seen documented in the various embedded projects that do similar things. Since one has full control over startup in the latter case, I see no reason why I can't link in the standard library and invoke the lang start function directly just like rustc does (and which I'm effectively doing via the above gross hack), as long as the invariants are documented and upheld by callers. I'm absolutely fine with that always being feature-gated, or an unsafe intrinsic; I just want a less perverse way of doing something that, at least to me, seems pretty reasonable.\r\n\r\nI hope this is the right place for bringing this up, and that having an example of a concrete use case is helpful in further discussions of this type. If you have noticed something that I seem to be missing, definitely let me know, if I can do what I want to do within the bounds of currently supported features, I'm all ears. For now, I'm just crossing my fingers that my dirty hack continues to work until a more permanent solution becomes available.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/952381464/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/989082091",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-989082091",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 989082091,
    "node_id": "IC_kwDOAAsO6M469DHr",
    "user": {
      "login": "joshtriplett",
      "id": 162737,
      "node_id": "MDQ6VXNlcjE2MjczNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/162737?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshtriplett",
      "html_url": "https://github.com/joshtriplett",
      "followers_url": "https://api.github.com/users/joshtriplett/followers",
      "following_url": "https://api.github.com/users/joshtriplett/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshtriplett/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshtriplett/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshtriplett/subscriptions",
      "organizations_url": "https://api.github.com/users/joshtriplett/orgs",
      "repos_url": "https://api.github.com/users/joshtriplett/repos",
      "events_url": "https://api.github.com/users/joshtriplett/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshtriplett/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-12-08T18:39:25Z",
    "updated_at": "2021-12-08T18:39:25Z",
    "body": "We'd like to stabilize this, but we need to evaluate the function signature and what commitments we make for which parts of the standard library work.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/989082091/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1157618822",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-1157618822",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 1157618822,
    "node_id": "IC_kwDOAAsO6M5E_9yG",
    "user": {
      "login": "Ayush1325",
      "id": 22546812,
      "node_id": "MDQ6VXNlcjIyNTQ2ODEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/22546812?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ayush1325",
      "html_url": "https://github.com/Ayush1325",
      "followers_url": "https://api.github.com/users/Ayush1325/followers",
      "following_url": "https://api.github.com/users/Ayush1325/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ayush1325/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ayush1325/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ayush1325/subscriptions",
      "organizations_url": "https://api.github.com/users/Ayush1325/orgs",
      "repos_url": "https://api.github.com/users/Ayush1325/repos",
      "events_url": "https://api.github.com/users/Ayush1325/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ayush1325/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-06-16T12:45:27Z",
    "updated_at": "2022-06-16T12:45:27Z",
    "body": "I would also like to have a way to define a custom function that replaces the `crt0` and basically allows calling the `lang_start` after the platform stuff is done. \r\n\r\nI am currently trying to port the `std` to UEFI targets. It expects a function with the following signature:\r\n```rust\r\n#[export_name = \"efi_main\"]\r\npub extern \"C\" fn main(_h: efi::Handle, st: *mut efi::SystemTable) -> efi::Status {\r\n    ...\r\n}\r\n```\r\nI would like the users to be able to just use the normal `main()`. But since even `lang_start` has a predefined type signature, I need to run a function even before that to get the `SystemTable` and setup some stuff. At the same time, I would prefer that people using `std` at least do not have to do all this themselves.\r\n\r\nSo I do hope that we can get a standardised way to achieve this, since most of the firmware development probably doesn't care about the arguments passed/",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1157618822/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1159770644",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-1159770644",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 1159770644,
    "node_id": "IC_kwDOAAsO6M5FILIU",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-06-19T16:27:51Z",
    "updated_at": "2022-06-19T16:27:51Z",
    "body": "The following interesting testcase came up in https://github.com/rust-lang/rust/issues/97049 related to this feature:\r\n```rust\r\n#![feature(start)]\r\n\r\n#[start]\r\nfn start(_: isize, _: *const *const u8) -> isize { panic!(); }\r\n```\r\nI think this program has UB, since there is no Rust runtime here to catch the panic, meaning we are unwinding past the top of the stack. So this should be noted somewhere with the documentation of this feature.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1159770644/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1159771016",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-1159771016",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 1159771016,
    "node_id": "IC_kwDOAAsO6M5FILOI",
    "user": {
      "login": "Amanieu",
      "id": 278509,
      "node_id": "MDQ6VXNlcjI3ODUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amanieu",
      "html_url": "https://github.com/Amanieu",
      "followers_url": "https://api.github.com/users/Amanieu/followers",
      "following_url": "https://api.github.com/users/Amanieu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions",
      "organizations_url": "https://api.github.com/users/Amanieu/orgs",
      "repos_url": "https://api.github.com/users/Amanieu/repos",
      "events_url": "https://api.github.com/users/Amanieu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amanieu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-06-19T16:30:05Z",
    "updated_at": "2022-06-19T16:30:05Z",
    "body": "This can easily be solved by making the `#[start]` function nounwind like `extern \"C\"`.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1159771016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1159772109",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-1159772109",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 1159772109,
    "node_id": "IC_kwDOAAsO6M5FILfN",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-06-19T16:37:39Z",
    "updated_at": "2022-06-19T16:37:39Z",
    "body": "And then the automatic abort-on-unwind logic will kick in? Yeah, that makes sense --  but would also need documentation.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1159772109/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1496406244",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-1496406244",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 1496406244,
    "node_id": "IC_kwDOAAsO6M5ZMVjk",
    "user": {
      "login": "mikeleany",
      "id": 55358344,
      "node_id": "MDQ6VXNlcjU1MzU4MzQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/55358344?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeleany",
      "html_url": "https://github.com/mikeleany",
      "followers_url": "https://api.github.com/users/mikeleany/followers",
      "following_url": "https://api.github.com/users/mikeleany/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeleany/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeleany/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeleany/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeleany/orgs",
      "repos_url": "https://api.github.com/users/mikeleany/repos",
      "events_url": "https://api.github.com/users/mikeleany/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeleany/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-04-04T18:20:40Z",
    "updated_at": "2023-04-04T19:34:02Z",
    "body": "From the original post:\r\n> Tracking issue for `#[start]`, which indicates that a function should be used as the entry point, overriding the \"start\" language item. In general this forgoes a bit of runtime setup that's normally run before and after main.\r\n\r\nHas anyone actually used this successfully for the purpose stated above? From my testing (using bare-metal targets), it doesn't seem to define the entry point at all. It silences the following error: \"error: requires `start` lang_item\", but doesn't define an entry point.\r\n\r\nWhat advantage does this (as currently implemented) even provide over using `#![no_main]` and defining the entry point with `#[no_mangle]` or `#[export_name = \"_start\"]`?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1496406244/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1496650458",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-1496650458",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 1496650458,
    "node_id": "IC_kwDOAAsO6M5ZNRLa",
    "user": {
      "login": "bjorn3",
      "id": 17426603,
      "node_id": "MDQ6VXNlcjE3NDI2NjAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bjorn3",
      "html_url": "https://github.com/bjorn3",
      "followers_url": "https://api.github.com/users/bjorn3/followers",
      "following_url": "https://api.github.com/users/bjorn3/following{/other_user}",
      "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions",
      "organizations_url": "https://api.github.com/users/bjorn3/orgs",
      "repos_url": "https://api.github.com/users/bjorn3/repos",
      "events_url": "https://api.github.com/users/bjorn3/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bjorn3/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-04-04T21:53:19Z",
    "updated_at": "2023-04-04T21:53:19Z",
    "body": "> From my testing (using bare-metal targets), it doesn't seem to define the entry point at all.\r\n\r\nIt defines the `main` function. The CRT defines `_start` and is expected to call `main` after libc has been initialized. On bare metal targets there is no libc, so directly defining `_start` makes sense unless you need an assembly trampoline to setup eg the stack pointer. And even then you can use `#![no_main]` + `#[no_mangle]` to define the function that the trampoline will call.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1496650458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1496830934",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-1496830934",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 1496830934,
    "node_id": "IC_kwDOAAsO6M5ZN9PW",
    "user": {
      "login": "mikeleany",
      "id": 55358344,
      "node_id": "MDQ6VXNlcjU1MzU4MzQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/55358344?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeleany",
      "html_url": "https://github.com/mikeleany",
      "followers_url": "https://api.github.com/users/mikeleany/followers",
      "following_url": "https://api.github.com/users/mikeleany/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeleany/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeleany/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeleany/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeleany/orgs",
      "repos_url": "https://api.github.com/users/mikeleany/repos",
      "events_url": "https://api.github.com/users/mikeleany/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeleany/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-04-05T02:22:07Z",
    "updated_at": "2023-04-05T02:22:07Z",
    "body": "> > From my testing (using bare-metal targets), it doesn't seem to define the entry point at all.\r\n> \r\n> It defines the `main` function. The CRT defines `_start` and is expected to call `main` after libc has been initialized. On bare metal targets there is no libc, so directly defining `_start` makes sense unless you need an assembly trampoline to setup eg the stack pointer. And even then you can use `#![no_main]` + `#[no_mangle]` to define the function that the trampoline will call.\r\n\r\nSo, if I understand you correctly, you're saying that the description of this feature is wrong \u2014 that it was never intended to override the entry point at all, but to override the `main` function instead, on the assumption that you are linking to the C runtime (or something else that defines the entry point and calls a C-like `main` function).\r\n\r\nAlso, if it's meant to be called from the CRT, shouldn't it require an `extern \"C\"` function instead of requiring the Rust ABI as it currently does? I guess changing that would also solve the unwinding issue mentioned by @RalfJung.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1496830934/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1497047404",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-1497047404",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 1497047404,
    "node_id": "IC_kwDOAAsO6M5ZOyFs",
    "user": {
      "login": "bjorn3",
      "id": 17426603,
      "node_id": "MDQ6VXNlcjE3NDI2NjAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bjorn3",
      "html_url": "https://github.com/bjorn3",
      "followers_url": "https://api.github.com/users/bjorn3/followers",
      "following_url": "https://api.github.com/users/bjorn3/following{/other_user}",
      "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions",
      "organizations_url": "https://api.github.com/users/bjorn3/orgs",
      "repos_url": "https://api.github.com/users/bjorn3/repos",
      "events_url": "https://api.github.com/users/bjorn3/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bjorn3/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-04-05T07:30:57Z",
    "updated_at": "2023-04-05T07:30:57Z",
    "body": "> that it was never intended to override the entry point at all, but to override the main function instead, on the assumption that you are linking to the C runtime (or something else that defines the entry point and calls a C-like main function).\r\n\r\n`main` is the user facing entry point in C. `_start` is an implementation detail on ELF systems and doesn't exist on Windows at all.\r\n\r\n> Also, if it's meant to be called from the CRT, shouldn't it require an extern \"C\" function instead of requiring the Rust ABI as it currently does?\r\n\r\nRustc actually won't rename the function annotated with `#[start]` to `main`. Instead it generates a `main` function with `extern \"C\"` which calls this function. Also on some targets like UEFI it generates a differently named function with a different calling concention as appropriate when the entrypoint on that target has a different name and/or calling convention.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1497047404/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1497852231",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-1497852231",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 1497852231,
    "node_id": "IC_kwDOAAsO6M5ZR2lH",
    "user": {
      "login": "mikeleany",
      "id": 55358344,
      "node_id": "MDQ6VXNlcjU1MzU4MzQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/55358344?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeleany",
      "html_url": "https://github.com/mikeleany",
      "followers_url": "https://api.github.com/users/mikeleany/followers",
      "following_url": "https://api.github.com/users/mikeleany/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeleany/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeleany/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeleany/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeleany/orgs",
      "repos_url": "https://api.github.com/users/mikeleany/repos",
      "events_url": "https://api.github.com/users/mikeleany/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeleany/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-04-05T17:18:04Z",
    "updated_at": "2023-04-05T17:18:04Z",
    "body": "> `main` is the user facing entry point in C.\r\n\r\nThat still makes wording like \"indicates a function should be used as the entry point\" ambiguous at best, and very confusing (as can be seen in previous discussions in this tracking issue). My suggestion, now that I understand what this feature is really intended for, is simply that the description of this feature needs to be clarified.\r\n\r\n> `_start` is an implementation detail on ELF systems and doesn't exist on Windows at all.\r\n\r\nAs far as I understand, Windows still has an entry point equivalent to `_start`, but just names it differently. In fact, even when using ELF object files, the entry point doesn't have to be called `_start`, though that's the common default. But yes, the naming of such startup routines is just an implementation detail.\r\n\r\n> > Also, if it's meant to be called from the CRT, shouldn't it require an extern \"C\" function instead of requiring the Rust ABI as it currently does?\r\n> \r\n> Rustc actually won't rename the function annotated with `#[start]` to `main`. Instead it generates a `main` function with `extern \"C\"` which calls this function. Also on some targets like UEFI it generates a differently named function with a different calling concention as appropriate when the entrypoint on that target has a different name and/or calling convention.\r\n\r\nAh, I see.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1497852231/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2088596042",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2088596042",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2088596042,
    "node_id": "IC_kwDOAAsO6M58fXJK",
    "user": {
      "login": "Noratrieb",
      "id": 48135649,
      "node_id": "MDQ6VXNlcjQ4MTM1NjQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Noratrieb",
      "html_url": "https://github.com/Noratrieb",
      "followers_url": "https://api.github.com/users/Noratrieb/followers",
      "following_url": "https://api.github.com/users/Noratrieb/following{/other_user}",
      "gists_url": "https://api.github.com/users/Noratrieb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Noratrieb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Noratrieb/subscriptions",
      "organizations_url": "https://api.github.com/users/Noratrieb/orgs",
      "repos_url": "https://api.github.com/users/Noratrieb/repos",
      "events_url": "https://api.github.com/users/Noratrieb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Noratrieb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-05-01T15:01:24Z",
    "updated_at": "2024-05-04T11:13:32Z",
    "body": "I think this issue should be closed and `#[start]` should be deleted. It's nothing but an accidentally leaked implementation detail that's a not very useful mix between \"portable\" entrypoint logic and bad abstraction.\r\n\r\nI think the way the stable user-facing entrypoint should work (and works today on stable) is pretty simple:\r\n- `std`-using cross-platform programs should use `fn main()`. the compiler, together with `std`, will then ensure that code ends up at `main` (by having a platform-specific entrypoint that gets directed through `lang_start` in `std` to `main` - but that's just an implementation detail)\r\n- `no_std` platform-specific programs should use `#![no_main]` and define their own platform-specific entrypoint symbol with `#[no_mangle]`, like `main`, `_start`, `WinMain` or `my_embedded_platform_wants_to_start_here`. most of them only support a single platform anyways, and need cfg for the different platform's ways of passing arguments or other things *anyways*\r\n\r\n`#[start]` is in a super weird position of being neither of those two. It tries to pretend that it's cross-platform, but its signature is  a total lie. Those arguments are just stubbed out to zero on Windows, for example. It also only handles the platform-specific entrypoints for a few platforms that are supported by `std`, like Windows or Unix-likes. `my_embedded_platform_wants_to_start_here` can't use it, and neither could a libc-less Linux program.\r\nSo we have an attribute that only works in some cases anyways, that has a signature that's a total lie (and a signature that, as I might want to add, has changed recently, and that I definitely would not be comfortable giving *any* stability guarantees on), and where there's a pretty easy way to get things working without it in the first place.\r\n\r\nNote that this feature has **not** been RFCed in the first place.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2088596042/reactions",
      "total_count": 10,
      "+1": 10,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2088623948",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2088623948",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2088623948,
    "node_id": "IC_kwDOAAsO6M58fd9M",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-05-01T15:21:02Z",
    "updated_at": "2024-05-01T15:21:37Z",
    "body": "Miri currently relies on `#[start]` to support running no-std binaries, but that could fairly easily be switched to a different scheme like the one described [here](https://github.com/rust-lang/miri/issues/3498#issuecomment-2088560526). (I don't think I want to implement support for all the platform-specific start functions in Miri...)",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2088623948/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2088879596",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2088879596",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2088879596,
    "node_id": "IC_kwDOAAsO6M58gcXs",
    "user": {
      "login": "scottmcm",
      "id": 18526288,
      "node_id": "MDQ6VXNlcjE4NTI2Mjg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/18526288?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/scottmcm",
      "html_url": "https://github.com/scottmcm",
      "followers_url": "https://api.github.com/users/scottmcm/followers",
      "following_url": "https://api.github.com/users/scottmcm/following{/other_user}",
      "gists_url": "https://api.github.com/users/scottmcm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/scottmcm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/scottmcm/subscriptions",
      "organizations_url": "https://api.github.com/users/scottmcm/orgs",
      "repos_url": "https://api.github.com/users/scottmcm/repos",
      "events_url": "https://api.github.com/users/scottmcm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/scottmcm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-05-01T18:21:59Z",
    "updated_at": "2024-05-01T18:21:59Z",
    "body": "Lang-nominated for the proposal in https://github.com/rust-lang/rust/issues/29633#issuecomment-2088596042",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2088879596/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2089221345",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2089221345",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2089221345,
    "node_id": "IC_kwDOAAsO6M58hvzh",
    "user": {
      "login": "bitwalker",
      "id": 955793,
      "node_id": "MDQ6VXNlcjk1NTc5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/955793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bitwalker",
      "html_url": "https://github.com/bitwalker",
      "followers_url": "https://api.github.com/users/bitwalker/followers",
      "following_url": "https://api.github.com/users/bitwalker/following{/other_user}",
      "gists_url": "https://api.github.com/users/bitwalker/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bitwalker/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bitwalker/subscriptions",
      "organizations_url": "https://api.github.com/users/bitwalker/orgs",
      "repos_url": "https://api.github.com/users/bitwalker/repos",
      "events_url": "https://api.github.com/users/bitwalker/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bitwalker/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-05-01T22:12:53Z",
    "updated_at": "2024-07-23T15:52:26Z",
    "body": "@Nilstrieb how would you propose projects that need to initialize the Rust runtime as I described in https://github.com/rust-lang/rust/issues/29633#issuecomment-952381464 and subsequently raised by @Ayush1325? As far as I can tell, there is still no solution for this, and because much of what is handled by `lang_start` is also private implementation detail, there is no effective way to support use of the Rust standard library without it.\r\n\r\nI'm a bit surprised that there has been zero discussion around use cases like this, as rare as they may be, it is still something that someone providing their own crt0/`start` function _must_ do in order to play well with Rust code that builds against libstd. I'm not suggesting that `start` needs to exist, but I would like to have some \"official\" guidance on how the Rust runtime can be initialized when providing your own start function. The gross hack I described in my original comment is perhaps the only option, but it really seems like this is something that would be straightforward to support properly, but I'm sure there are aspects of this that I'm not considering.\r\n\r\nAnyhow, wanted to bring this up one last time before this thread effectively dies.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2089221345/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2089224873",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2089224873",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2089224873,
    "node_id": "IC_kwDOAAsO6M58hwqp",
    "user": {
      "login": "Lokathor",
      "id": 5456384,
      "node_id": "MDQ6VXNlcjU0NTYzODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5456384?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Lokathor",
      "html_url": "https://github.com/Lokathor",
      "followers_url": "https://api.github.com/users/Lokathor/followers",
      "following_url": "https://api.github.com/users/Lokathor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Lokathor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Lokathor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Lokathor/subscriptions",
      "organizations_url": "https://api.github.com/users/Lokathor/orgs",
      "repos_url": "https://api.github.com/users/Lokathor/repos",
      "events_url": "https://api.github.com/users/Lokathor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Lokathor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-05-01T22:16:51Z",
    "updated_at": "2024-07-23T15:52:30Z",
    "body": "That is probably best handled with a new RFC cycle to hammer out the details.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2089224873/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 2,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2089535536",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2089535536",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2089535536,
    "node_id": "IC_kwDOAAsO6M58i8gw",
    "user": {
      "login": "Noratrieb",
      "id": 48135649,
      "node_id": "MDQ6VXNlcjQ4MTM1NjQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Noratrieb",
      "html_url": "https://github.com/Noratrieb",
      "followers_url": "https://api.github.com/users/Noratrieb/followers",
      "following_url": "https://api.github.com/users/Noratrieb/following{/other_user}",
      "gists_url": "https://api.github.com/users/Noratrieb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Noratrieb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Noratrieb/subscriptions",
      "organizations_url": "https://api.github.com/users/Noratrieb/orgs",
      "repos_url": "https://api.github.com/users/Noratrieb/repos",
      "events_url": "https://api.github.com/users/Noratrieb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Noratrieb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-05-02T04:25:21Z",
    "updated_at": "2024-07-23T15:52:35Z",
    "body": "@bitwalker it you're an AOT compiler you can just hook C main by overriding it with your own and then calling the C main defined by Rust (with some trickery). No language feature required.\r\nI don't think removing this feature warrants an RFC, *it has never had one to be added either.*",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2089535536/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2089714621",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2089714621",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2089714621,
    "node_id": "IC_kwDOAAsO6M58joO9",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-05-02T06:31:41Z",
    "updated_at": "2024-07-23T15:52:39Z",
    "body": "Note that Rust also relies on linker section trickery to have some initializers called before even its own internal main function runs.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2089714621/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2243108457",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2243108457",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2243108457,
    "node_id": "IC_kwDOAAsO6M6Fsx5p",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-07-22T14:30:44Z",
    "updated_at": "2024-07-23T15:52:43Z",
    "body": "@bitwalker assuming you want std, you can write a Rust library like this\r\n```rust\r\nextern \"C\" {\r\n  fn erlang_rt_start(/* whatever you need */);\r\n}\r\n\r\nfn main() {\r\n  unsafe { erlang_rt_start() }\r\n}\r\n```\r\nThen for your project you generate an object file that exports an `erlang_rt_start`, and you link it all together with this Rust program. Now your `erlang_rt_start` will be called after the Rust runtime is initialized, without you having to hook into any terrible unstable implementation details.\r\n\r\nOr am I misunderstanding something about what you are trying to achieve? I'm not a linker expert, but with dynamic linking it is entirely possible to build a binary without having all the imported functions at hand, so I would expect that it is somehow possible to build a binary without having to give rustc an object file that contains `erlang_rt_start`. But maybe that needs some further flags to be exposed from rustc or so?\r\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2243108457/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2243398616",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2243398616",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2243398616,
    "node_id": "IC_kwDOAAsO6M6Ft4vY",
    "user": {
      "login": "bitwalker",
      "id": 955793,
      "node_id": "MDQ6VXNlcjk1NTc5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/955793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bitwalker",
      "html_url": "https://github.com/bitwalker",
      "followers_url": "https://api.github.com/users/bitwalker/followers",
      "following_url": "https://api.github.com/users/bitwalker/following{/other_user}",
      "gists_url": "https://api.github.com/users/bitwalker/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bitwalker/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bitwalker/subscriptions",
      "organizations_url": "https://api.github.com/users/bitwalker/orgs",
      "repos_url": "https://api.github.com/users/bitwalker/repos",
      "events_url": "https://api.github.com/users/bitwalker/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bitwalker/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-07-22T16:49:47Z",
    "updated_at": "2024-07-23T15:52:48Z",
    "body": "@RalfJung @Nilstrieb  the issue I have is not how to call _my_ runtime's entrypoint, but how to ensure that the Rust runtime is initialized first. To be clear, the thing producing the executable file in my case is _not_ `rustc`, or this wouldn't be an issue in the first place. What I need is the ability to, from my own `main` function (not written in Rust), ensure that the Rust runtime gets initialized before I call into any Rust code. To make this work, I basically hacked together a way to extract the symbol name of the lang_start function and call it, but that could break at any time (maybe it already is, I haven't checked recently), and it does not appear that there is any alternative available.\r\n\r\nTo further illustrate the sort of use case I'm talking about - imagine you have a compiler for some nice little language, that uses LLVM IR on the backend. You want to write some core parts of your language's runtime in Rust, so you do so, and compile that to a static archive. You then write all of the other code in your little language, and compile all of it together into an executable. Your language's compiler does this by emitting a `main` function in LLVM IR, in which the Rust runtime is initialized first, and then the entrypoint in your language is called. All of this gets compiled to object file(s) via LLVM, and is then assembled/linked (together with the Rust runtime library, and any other libraries/objects produced by the little language compiler) using the system toolchain.\r\n\r\nThe question is: for the scenario outlined above, how exactly do you ensure that the Rust runtime gets initialized properly? AFAICT, there is no currently supported way of doing this. Without it, at a minimum you lose the ability to access environment variables and command-line arguments via Rust - but the set of things performed by lang_start are unspecified, and can change at any time, _and_ are assumed to have been performed by the rest of libstd. Basically, the way things work today, the assumption is that if you aren't compiling an executable with `rustc`, you can't use libstd safely, because otherwise there are elements of libstd that may or may not be initialized properly. It may be the case that the way things are implemented, libstd handles the lack of initialization sanely (for example, the set of env vars or command-line arguments are just empty), but not only is that not guaranteed AFAICT, it makes it impossible to implement functionality using those APIs via Rust.\r\n\r\nAnyway, hopefully that provides enough clarity on the precise problem I'm attempting to solve. Happy to get into the weeds further if there are other details you think I've missed. I think I've mentioned this previously, but just to reiterate: I'm aware that this is an edge case, very much so, but I also think that's why this detail has been overlooked. Rust is a great language for writing both compilers and runtimes for new programming languages, but at the moment it doesn't feel like Rust properly supports building on top of libstd in the implementation of another language's runtime.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2243398616/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2243410931",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2243410931",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2243410931,
    "node_id": "IC_kwDOAAsO6M6Ft7vz",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-07-22T16:57:08Z",
    "updated_at": "2024-07-23T15:52:53Z",
    "body": "The way to ensure that the Rust runtime is fully initialized is to put your code inside Rust's `main` function. Then it will be invoked in a way that the Rust runtime is initialized. If you call your runtime's entrypoint from within Rust's `main`, then you are good. I'm not a linker expert but it seems to me like this ought to be possible.\r\n\r\nIf you want an `init_rust_runtime()` function to be exposed that does roughly the same thing as \"whatever happens before Rust's `main`\", then that's a new feature request, not something that is currently supported. But the approach I sketched above should get you very close, so there's a question of \"why do you need more than this?\". The only problem, I think, is that you couldn't initialize both the Rust runtime and some other runtime that also assumes to be \"global\" in the sense that it controls `_start`.\r\n\r\n> It may be the case that the way things are implemented, libstd handles the lack of initialization sanely, but not only is that not guaranteed AFAICT, it makes it impossible to implement functionality using those APIs via Rust.\r\n\r\nAFAIK this is guaranteed, it is needed e.g. for use of Rust code in a library with a C-like interface. If all you want to do is write some Rust code that is available behind a C ABI, then this issue here shouldn't affect you at all. Just build a `staticlib` or `cdylib`.\r\n\r\nIf there are things that don't work in such an environment that you think should work (like environment variables or program arguments), please file an issue. For environment variables I see no reason why that would be a problem. For program arguments, it depends on whether all platforms provide a way to get access to those arguments via some global function, and not just via main's arguments. Rust already uses such global functions on some targets (e.g. macOS), so using them on more targets where possible and useful seems like a reasonable request.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2243410931/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2243966625",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2243966625",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2243966625,
    "node_id": "IC_kwDOAAsO6M6FwDah",
    "user": {
      "login": "bitwalker",
      "id": 955793,
      "node_id": "MDQ6VXNlcjk1NTc5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/955793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bitwalker",
      "html_url": "https://github.com/bitwalker",
      "followers_url": "https://api.github.com/users/bitwalker/followers",
      "following_url": "https://api.github.com/users/bitwalker/following{/other_user}",
      "gists_url": "https://api.github.com/users/bitwalker/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bitwalker/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bitwalker/subscriptions",
      "organizations_url": "https://api.github.com/users/bitwalker/orgs",
      "repos_url": "https://api.github.com/users/bitwalker/repos",
      "events_url": "https://api.github.com/users/bitwalker/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bitwalker/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-07-22T23:15:19Z",
    "updated_at": "2024-07-23T15:52:58Z",
    "body": "> The way to ensure that the Rust runtime is fully initialized is to put your code inside Rust's main function.\r\n\r\nWell, that is precisely the issue - there is no Rust `main` function in the scenario I outlined. I'm a bit confused why this suggestion keeps getting made, because I've tried to make it clear in all of my responses that using a `rustc`-generated executable isn't an option here. The `main` function is generated by another language's (let's call it NotRust) compiler. It just so happens that the compiler in question is implemented in Rust, and that the runtime for NotRust is partially implemented in Rust, using Rust's standard library, because the author of NotRust likes Rust, and thinks it is a good fit for these components. _However_, NotRust produces its own executables, from its own backend, with a `main` that contains necessary lang_start-like initialization for NotRust itself. The goal here is to be able to invoke libstd's initialization code early during NotRust's generated `main` function, so that the Rust-implemented parts of the NotRust runtime can make use of the full breadth of libstd.\r\n\r\n> If you want an init_rust_runtime() function to be exposed that does roughly the same thing as \"whatever happens before Rust's main\", then that's a new feature request, not something that is currently supported. \r\n\r\nI'm fine with characterizing this as a feature request. This did feel like an appropriate venue to raise the issue though, since I consider a lot of these elements closely related. Assumptions baked in to Rust around who controls `_start`, etc., necessarily affect such a feature, and vice versa.\r\n\r\n> The only problem, I think, is that you couldn't initialize both the Rust runtime and some other runtime that also assumes to be \"global\" in the sense that it controls _start.\r\n\r\nThat more or less gets at the meat of it. The real problem (as I see it) is that there is seemingly no way for other compiler backends to generate executables that Rust can be hooked into, in such a way that it can continue to believe that it owns `_start`, even when that isn't strictly true. If my NotRust language has the core of its runtime implemented using Rust, then I may want that runtime to believe that it is being invoked from a `rustc`-generated executable, even though that isn't actually the case.\r\n\r\n> AFAIK this is guaranteed, it is needed e.g. for use of Rust code in a library with a C-like interface. If all you want to do is write some Rust code that is available behind a C ABI, then this issue here shouldn't affect you at all. Just build a staticlib or cdylib.\r\n\r\nInteresting, from what I've been able to gather from reading through `library/std/src/rt.rs` and various modules in `library/std/src/sys/pal/*`, there is quite a bit of setup stuff happening. It's definitely nice that it is guaranteed that libstd works without running any of that, I suppose I'll have to re-evaluate what specific things don't work without `lang_start` being invoked. It may be less of an issue now than it was in the past.\r\n\r\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2243966625/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2244312319",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2244312319",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2244312319,
    "node_id": "IC_kwDOAAsO6M6FxXz_",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-07-23T05:56:02Z",
    "updated_at": "2024-07-23T15:53:03Z",
    "body": "> Well, that is precisely the issue - there is no Rust main function in the scenario I outlined. I'm a bit confused why this suggestion keeps getting made, because I've tried to make it clear in all of my responses that using a rustc-generated executable isn't an option here.\r\n\r\nYou haven't explained why. :)\r\n\r\nThere's *a* main function generated by another language, sure, but that in no way contradicts rustc generating the executable. All you have to do is make it so that Rust's `main` calls your runtime's `main` calls the `main` generated by your own compiler. You said that you don't want to do this, but you haven't given any actual technical reasons as far as I can tell (or maybe I didn't understand them).\r\n\r\nAnyway all this seems increasingly off-topic here. The `start` feature is about generating Rust binaries that start their execution in a different way than normal. You don't even want a Rust binary, you want a Rust *library* being linked into anther binary, so it doesn't seem like this feature would help you at all, and removing this feature shouldn't affect you. Please open a new issue or RFC describing the motivation and technical reasons for why what Rust currently provides doesn't quite suffice and what a possible solution could look like.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2244312319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2245520838",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2245520838",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2245520838,
    "node_id": "IC_kwDOAAsO6M6F1-3G",
    "user": {
      "login": "bitwalker",
      "id": 955793,
      "node_id": "MDQ6VXNlcjk1NTc5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/955793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bitwalker",
      "html_url": "https://github.com/bitwalker",
      "followers_url": "https://api.github.com/users/bitwalker/followers",
      "following_url": "https://api.github.com/users/bitwalker/following{/other_user}",
      "gists_url": "https://api.github.com/users/bitwalker/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bitwalker/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bitwalker/subscriptions",
      "organizations_url": "https://api.github.com/users/bitwalker/orgs",
      "repos_url": "https://api.github.com/users/bitwalker/repos",
      "events_url": "https://api.github.com/users/bitwalker/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bitwalker/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-07-23T15:11:17Z",
    "updated_at": "2024-07-23T15:53:07Z",
    "body": "> Anyway all this seems increasingly off-topic here. \r\n\r\nSure, I'll open a new issue, and try to propose something more specific as a solution there.\r\n\r\n> You haven't explained why.\r\n\r\nI mean, I have, but I was assuming it is obvious on its face why a compiler for a completely different language wouldn't want to ship Rust alongside it, or require its users to install Rust, just to link executables so that parts of the runtime written in Rust would be properly initialized.\r\n\r\n> There's a main function generated by another language, sure, but that in no way contradicts rustc generating the executable. All you have to do is make it so that Rust's main calls your runtime's main calls the main generated by your own compiler. You said that you don't want to do this, but you haven't given any actual technical reasons as far as I can tell (or maybe I didn't understand them).\r\n\r\nI stated that a different compiler is the one linking executables, so suggesting that Rust do it instead isn't helpful - it isn't installed on systems where the other compiler will be run, and there is no desire to make the Rust toolchain a runtime dependency of that compiler. That doesn't require a technical explanation, it should be pretty self-evident why that isn't desirable.\r\n\r\nAnyway, apologies if I've derailed this issue, that was not my intent. Feel free to delete our thread of conversation if it is distracting.\r\n\r\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2245520838/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2245621028",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2245621028",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2245621028,
    "node_id": "IC_kwDOAAsO6M6F2XUk",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-07-23T15:51:51Z",
    "updated_at": "2024-07-23T15:53:12Z",
    "body": "I never intended to imply that you would ship a Rust compiler with your compiler. So there seems to be plenty of miscommunication here -- sorry for that.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2245621028/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2265231692",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2265231692",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2265231692,
    "node_id": "IC_kwDOAAsO6M6HBLFM",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-08-02T12:17:51Z",
    "updated_at": "2024-08-02T12:17:51Z",
    "body": "With https://github.com/rust-lang/miri/pull/3769, Miri now has a way to run no_std binaries that does not rely on this feature. So from our perspective it would be fine to remove this. :)",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2265231692/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2544761204",
    "html_url": "https://github.com/rust-lang/rust/issues/29633#issuecomment-2544761204",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29633",
    "id": 2544761204,
    "node_id": "IC_kwDOAAsO6M6Xrfl0",
    "user": {
      "login": "Noratrieb",
      "id": 48135649,
      "node_id": "MDQ6VXNlcjQ4MTM1NjQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Noratrieb",
      "html_url": "https://github.com/Noratrieb",
      "followers_url": "https://api.github.com/users/Noratrieb/followers",
      "following_url": "https://api.github.com/users/Noratrieb/following{/other_user}",
      "gists_url": "https://api.github.com/users/Noratrieb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Noratrieb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Noratrieb/subscriptions",
      "organizations_url": "https://api.github.com/users/Noratrieb/orgs",
      "repos_url": "https://api.github.com/users/Noratrieb/repos",
      "events_url": "https://api.github.com/users/Noratrieb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Noratrieb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-12-16T07:05:01Z",
    "updated_at": "2024-12-16T07:05:01Z",
    "body": "Ralf posted #134299 to remove it and nominated it, so removing the nomination here.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2544761204/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
