[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/729329",
    "html_url": "https://github.com/rust-lang/rust/pull/222#issuecomment-729329",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/222",
    "id": 729329,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyOTMyOQ==",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-02-01T17:36:25Z",
    "updated_at": "2011-02-01T17:36:25Z",
    "body": "I'm a bit torn on this. At very least you need to make the str an option.t[str] so we're not imbuing the empty string with extra meaning (native / non-native). In rustboot we initially had a whole parallel sub-AST for native modules and native items, then we backed off that and wound up just \"marking\" those modules and items that were native. But in practice this change wound up with a lot of implicit invariants that were non-obvious, because all the 'native-ness' was marked in a external tables and \"coincidental\" meanings like \"functions in native modules happen to have empty body-blocks and happen to be translated completely differently\".\n\nI think we might have done better with the split AST after all. Particularly given that modules are so very limited now. Part of the original motive for merging the native and non-native module handling in rustboot was that, at the time, we had no obj types, and modules were _very_ rich in functionality: they were first-class types that you could pass around, and they supported existential types, and so there was just a ton of duplicated machinery handling the native and non-native versions. Now modules are relatively simple and I'm not sure the machinery-duplication would hurt as much as it would clarify.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/729329/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/729337",
    "html_url": "https://github.com/rust-lang/rust/pull/222#issuecomment-729337",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/222",
    "id": 729337,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyOTMzNw==",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-02-01T17:38:57Z",
    "updated_at": "2011-02-01T17:38:57Z",
    "body": "Btw. if you do keep a single AST with optional decorations (also possible), at least make a native_mod_info record type, and store an option.t[native_mod_info] so that future additions (ABI / calling convention) will not require adding more fields to mod. Likewise for native fns, add a single option.t[native_fn_info] for some helper record type native_fn_info.\n\nThis might be enough to make matters explicit, and certainly will save some duplication. So if you want to take the quick way, do that. I'm really unsure whether the split-AST or optional-fields approach is better here.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/729337/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/732569",
    "html_url": "https://github.com/rust-lang/rust/pull/222#issuecomment-732569",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/222",
    "id": 732569,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMjU2OQ==",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-02-02T15:49:31Z",
    "updated_at": "2011-02-02T15:49:31Z",
    "body": "Obsolete with yesterday's changes (thanks!)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/732569/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
