[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28558668",
    "html_url": "https://github.com/rust-lang/rust/issues/10501#issuecomment-28558668",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10501",
    "id": 28558668,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTU4NjY4",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-15T10:05:45Z",
    "updated_at": "2013-11-15T10:05:45Z",
    "body": "cc @nikomatsakis, possibly related to #10153?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28558668/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28607077",
    "html_url": "https://github.com/rust-lang/rust/issues/10501#issuecomment-28607077",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10501",
    "id": 28607077,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjA3MDc3",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-15T22:00:51Z",
    "updated_at": "2013-11-15T22:00:51Z",
    "body": "Interesting. Not related to #10153 I don't think but probably to the fix for #4846 -- this has something to do with the code that computes GLB/LUB of fn types, I imagine.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28607077/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28607313",
    "html_url": "https://github.com/rust-lang/rust/issues/10501#issuecomment-28607313",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10501",
    "id": 28607313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjA3MzEz",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-15T22:04:30Z",
    "updated_at": "2013-11-15T22:04:30Z",
    "body": "Sorry, #10153 IS the fix for #4846. Anyway, yes, thanks @huonw \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28607313/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28609216",
    "html_url": "https://github.com/rust-lang/rust/issues/10501#issuecomment-28609216",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10501",
    "id": 28609216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjA5MjE2",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-15T22:34:13Z",
    "updated_at": "2013-11-15T22:34:13Z",
    "body": "Hmm. The error message is...horribly cryptic but the error seems legit. (Probably worth thinking, independently, on SOMETHING better to print out there, but I'm not sure what).\n\nI was wrong, not related to #10153. This is kind of a flaw in the way that the \"clone\" operation is defined over fn types, but I'm not actually sure how it can be fixed without modifying the compiler to introduce some special bounds.\n\nLet me elaborate a bit on the problem, as much for myself as anyone else (it's somewhat subtle). The definition of clone for fn pointers is roughly like:\n\n```\nimpl<A,R> Clone for fn(A) -> R {\n    fn clone(&self) -> fn(A) -> R { *self }\n}\n```\n\nWhat happens here is that the type in question is (written out fully explicitly) `<'a> fn(&'a int) -> ()`. In other words, it's a function that takes a borrowed `int` with any lifetime `'a`, and that lifetime can be specified at call time. The problem is that the clone impl cannot express the notion of \"a borrowed pointer with any lifetime\". The type variable `A` here must be bound to a borrowed pointer with some specific lifetime. So the call to \"f.clone()\" winds up producing a fn with a type like `fn(&'b int) -> ()` -- in other words, a function that takes a borrowed pointer with some lifetime `'b`. This new type is not as general as the old one, though, because it only accepts a single lifetime, not any lifetime, and hence you wind up with a type error.\n\nThis is hard to fix. I'm not 100% sure what the \"right\" fix would even be, actually. But one possible fix is to add a builtin bound to the compiler, let's call it `Simple`, for want of a better name. I envision that `Simple` matches \"simple\" types. To avoid this bug, `Simple` must include fn pointers. It could also include integers, borrowed pointers, and *T pointers -- basically things that are \"builtin types that are cloned just by copying their bits\" but excluding compound types like structs and tuples. Otherwise this def'n is very close to implicitly copyable and sort of close to POD.\n\nGiven this bound, we might have an impl for clone like:\n\n```\nimpl<T:Simple> Clone for T {\n    fn clone(&self) -> T { *self } // compiler knows this is a copy, not move, due to Simple bound\n}\n```\n\nthis avoids the problem by not binding type parameters to the individual argument types. It's also more general.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28609216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65268411",
    "html_url": "https://github.com/rust-lang/rust/issues/10501#issuecomment-65268411",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10501",
    "id": 65268411,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MjY4NDEx",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-02T17:22:57Z",
    "updated_at": "2014-12-02T17:22:57Z",
    "body": "This was never fixed, but the code got buggy.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65268411/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154639410",
    "html_url": "https://github.com/rust-lang/rust/issues/10501#issuecomment-154639410",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10501",
    "id": 154639410,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDYzOTQxMA==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-07T06:44:32Z",
    "updated_at": "2015-11-07T06:44:32Z",
    "body": "Today:\n\n```\npub type Foo = fn(&i32) -> ();\n\n#[derive(Copy, Clone)]\nenum Baz {\n    Bar(Foo)\n}\n\nfn main() {}\n```\n\nerror:\n\n```\nerror: the trait `core::clone::Clone` is not implemented for the type `fn(&i32)`\n```\n\n/cc @rust-lang/lang , I know that recently, we changed something related to `fn` and `Clone`, but I'm not sure if this is behavior we want today. The error message is way better now, at least.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154639410/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/293327075",
    "html_url": "https://github.com/rust-lang/rust/issues/10501#issuecomment-293327075",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10501",
    "id": 293327075,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzMyNzA3NQ==",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-04-11T16:55:58Z",
    "updated_at": "2017-04-11T16:55:58Z",
    "body": "Current error from @steveklabnik's code:\r\n\r\n```\r\n\r\n\r\nrustc 1.16.0 (30cf806ef 2017-03-10)\r\nerror[E0277]: the trait bound `fn(&i32): std::clone::Clone` is not satisfied\r\n --> <anon>:5:9\r\n  |\r\n5 |     Bar(Foo)\r\n  |         ^^^^ the trait `std::clone::Clone` is not implemented for `fn(&i32)`\r\n  |\r\n  = help: the following implementations were found:\r\n            <fn(A) -> Ret as std::clone::Clone>\r\n            <extern \"C\" fn(A) -> Ret as std::clone::Clone>\r\n            <extern \"C\" fn(A, ...) -> Ret as std::clone::Clone>\r\n            <unsafe fn(A) -> Ret as std::clone::Clone>\r\n          and 2 others\r\n  = note: required by `std::clone::AssertParamIsClone`\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/293327075/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/293327515",
    "html_url": "https://github.com/rust-lang/rust/issues/10501#issuecomment-293327515",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10501",
    "id": 293327515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzMyNzUxNQ==",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-04-11T16:57:25Z",
    "updated_at": "2017-04-11T16:57:25Z",
    "body": "Seems to work as designed.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/293327515/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/293328067",
    "html_url": "https://github.com/rust-lang/rust/issues/10501#issuecomment-293328067",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10501",
    "id": 293328067,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzMyODA2Nw==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-04-11T16:59:24Z",
    "updated_at": "2017-04-11T16:59:24Z",
    "body": "@nikomatsakis You may want to reopen this if you feel like there is a path to making it work.\r\n(Either by making the impls apply through some form of hopefully-sound HRTB capture or implementing `Clone` automatically for all `Copy` types, possibly through a future extension of specialization)",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/293328067/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
