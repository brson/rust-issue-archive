[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54523553",
    "html_url": "https://github.com/rust-lang/rust/issues/16989#issuecomment-54523553",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16989",
    "id": 54523553,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NTIzNTUz",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-04T18:33:04Z",
    "updated_at": "2014-09-04T18:35:13Z",
    "body": "Indeed! RE2's C++ implementation is extremely sophisticated. It has a DFA for very quickly finding matches and the location of an overall match. A full NFA simulation is used when you need submatches (and this is made more performant, I think, by running a DFA first to limit the range of text searched by the NFA). This includes doing wonderfully crazy things like reversing the regex itself. Also, I believe RE2/C++ uses parallelism over DFA states, but I'm not entirely sure how that works.\n\nThe Rust implementation uses a full NFA simulation. Full stop.\n\nThe `regex!` macro basically encodes that full NFA simulation, but without heap allocation for keeping track of captures (since it knows the total number of captures at compile time). There are other optimizations, but I suspect the elimination of most heap allocation is a big one.\n\nWith that said, the main NFA simulation (not the native code specialization) should be roughly on par with **Go**'s `regexp` package. (I say this because Go's `regexp` package only has a full NFA simulation and lacks a DFA.) However, Go's `regexp` package does have a special \"one pass\" NFA optimization that makes certain regexes faster. There are probably other optimizations in Go's implementation that I'm missing or have forgotten about.\n\nRE2 for Go and C++ were written by the same person (Russ Cox). The sophistication of Rust's `regex` crate is much more closely aligned with Go's `regexp` package than it is C++'s RE2 library.\n\nSo yes, Rust's regexes are going to be slower than RE2/C++'s regexes until its implementation becomes more sophisticated.\n\n(I've always tried to be very careful to say \"RE2/Go\" or \"RE2/C++\", but I'm sure that got lost in the kerfuffle. RE2 is more readily identified with the C++ library, and I don't think I've ever expected my implementation to be on par with it. RE2/Go? Yeah. On par, or close to it. When you add native regexes to the mix, Rust will outperform Go's implementation I think.)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54523553/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54537341",
    "html_url": "https://github.com/rust-lang/rust/issues/16989#issuecomment-54537341",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16989",
    "id": 54537341,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NTM3MzQx",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-04T20:12:38Z",
    "updated_at": "2014-09-04T20:12:38Z",
    "body": "Thanks for the explanation, @BurntSushi.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54537341/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54537468",
    "html_url": "https://github.com/rust-lang/rust/issues/16989#issuecomment-54537468",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16989",
    "id": 54537468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NTM3NDY4",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-04T20:13:27Z",
    "updated_at": "2014-09-04T20:13:27Z",
    "body": "IIRC those regexes are pretty simple. Maybe we can add some hacks to make them (and only them) fast?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54537468/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54574365",
    "html_url": "https://github.com/rust-lang/rust/issues/16989#issuecomment-54574365",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16989",
    "id": 54574365,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NTc0MzY1",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-05T02:21:34Z",
    "updated_at": "2014-09-05T02:21:34Z",
    "body": "@BurntSushi do you have a sense of the scope of a project to add the advanced optimizations from RE2/C++? For example, could a student do it in a month?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54574365/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54612080",
    "html_url": "https://github.com/rust-lang/rust/issues/16989#issuecomment-54612080",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16989",
    "id": 54612080,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NjEyMDgw",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-05T11:06:40Z",
    "updated_at": "2014-09-05T11:07:30Z",
    "body": "@brson I think it's possible. Another idea might be to start them with the \"one pass\" NFA optimization. Russ Cox briefly describes it here: http://swtch.com/~rsc/regexp/regexp3.html (Do a CTRL-F for `one-pass`). That could get them warmed up with the existing implementation before they start on the DFA stuff. But that's just an idea. (The one-pass optimization has two steps: analysis of the regex to determine whether it is a one-pass regex or not and then the actual optimization in the NFA simulation.)\n\nAlso, in general, Russ's regexp articles are required reading: http://swtch.com/~rsc/regexp/ --- Rust's regex implementation is based on them.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54612080/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70906624",
    "html_url": "https://github.com/rust-lang/rust/issues/16989#issuecomment-70906624",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16989",
    "id": 70906624,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwOTA2NjI0",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-21T19:39:44Z",
    "updated_at": "2015-01-21T19:39:44Z",
    "body": "I meant to move this to the regex crate :(\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70906624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70906960",
    "html_url": "https://github.com/rust-lang/rust/issues/16989#issuecomment-70906960",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16989",
    "id": 70906960,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwOTA2OTYw",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-21T19:41:31Z",
    "updated_at": "2015-01-21T19:41:31Z",
    "body": "I'm pulling a massive triage effort to get us ready for 1.0. As part of this, I'm moving stuff that's wishlist-like to the RFCs repo, as that's where major new things should get discussed/prioritized.\n\nThis issue has been moved to the RFCs repo: rust-lang/regex#24\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70906960/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
