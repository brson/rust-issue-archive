[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22064655",
    "html_url": "https://github.com/rust-lang/rust/issues/8277#issuecomment-22064655",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8277",
    "id": 22064655,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMDY0NjU1",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-04T00:39:16Z",
    "updated_at": "2013-08-04T00:39:16Z",
    "body": "I think we can accommodate these use cases reasonably easily with some more named generic sum types in the stdlib like Either. Maybe Any3, Any4, Any5, etc.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22064655/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22065083",
    "html_url": "https://github.com/rust-lang/rust/issues/8277#issuecomment-22065083",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8277",
    "id": 22065083,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMDY1MDgz",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-04T01:27:31Z",
    "updated_at": "2013-08-04T01:27:31Z",
    "body": "Or possibly there's just not much of a use case, Haskell seems to have gotten along with only `Either`. :)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22065083/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22124869",
    "html_url": "https://github.com/rust-lang/rust/issues/8277#issuecomment-22124869",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8277",
    "id": 22124869,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTI0ODY5",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-05T18:08:46Z",
    "updated_at": "2013-08-05T18:08:46Z",
    "body": "This (either anonymous or named-AnyN) would be good for the select interface:\n\n```\nfn select2<A, AP: SelectPort<A>, B, BP: SelectPort<B>>(AP, BP) -> Either<(A, BP), (AP, B)>\n```\n\nWould enable a natural extension without nesting Either types.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22124869/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35581566",
    "html_url": "https://github.com/rust-lang/rust/issues/8277#issuecomment-35581566",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8277",
    "id": 35581566,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTgxNTY2",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-20T02:50:37Z",
    "updated_at": "2014-02-20T02:50:37Z",
    "body": "With the removal of conditions, error handling this has become a more urgent need.\n\nFor example, at https://github.com/chris-morgan/diffbot-rust-client/blob/364ca8d978f669a278ac2d38804c3926d33f123d/src/diffbot/lib.rs#L233..L259 (code is out of date\u2014now with the removal of conditions `IoError` should be `IoError(IoError)`) I have to create a whole new enum for the error cases, allowing an API error, a JSON error or an I/O error. I would much prefer to simply be able to specify the return type in those methods as `Result<T, ApiError | json::Error | IoError>`.\n\nWe have `if_ok!`, but it only works if you keep the same type of `E`. So for such cases as these it's not able to be used.\n\nI would like to be able to use `ApiError | json::Error | IoError` as a type. I picture matching working in a manner similar to this:\n\n``` rust\nmatch err {\n    ApiError(_) => unimplemented!(),\n    json::Error(_) => unimplemented!(),\n    IoError(_) => unimplemented!(),\n}\n```\n\nBut assignation does _not_ require any form of wrapping, e.g.:\n\n``` rust\nfn x() -> Result<(), ApiError | json::Error | IoError {\n    write!(...)\n}\n```\n\nPut another way, sum types can be introduced silently; `A` can be silently cast to `A | B`.\n\n(I had a much longer writeup of the problems and solutions I saw, but lost it some time back. For now, I guess this will do.)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35581566/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35645488",
    "html_url": "https://github.com/rust-lang/rust/issues/8277#issuecomment-35645488",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8277",
    "id": 35645488,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NjQ1NDg4",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-20T17:19:10Z",
    "updated_at": "2014-02-20T17:19:10Z",
    "body": "@chris-morgan: This proposal feels more like `boost::variant` or OCaml's polymorphic variants than Rust's existing `enum` types. In particular these don't seem to be proper sum types: how would you handle a type like `int | int` (or heck `() | ()`)? It's not an accident that in my proposal in the OP, the semantics follow `enum`s and the syntax is modelled after tuples.\n\n(Which is not to say that something like `boost::variant` or OCaml's polymorphic variants couldn't have a place; right now I'm just pointing out the difference.)\n\n> I would much prefer to simply be able to specify the return type in those methods as `Result<T, ApiError | json::Error | IoError>`.\n\nOnly because of verbosity, or for other reasons too?\n\n(FWIW, under my proposal I think you might write `(T|ApiError|json::Error|IoError)`. Or I guess `(T|(ApiError|json::Error|IoError))` and `Result<T, (ApiError|json::Error|IoError)>` are also valid options if you want to keep the error cases separate from the success one. I don't know if we would want to keep `Result` if we had anonymous sum types; we don't have a `Pair` type either, and use tuples instead.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35645488/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35787481",
    "html_url": "https://github.com/rust-lang/rust/issues/8277#issuecomment-35787481",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8277",
    "id": 35787481,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1Nzg3NDgx",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-22T00:17:38Z",
    "updated_at": "2014-02-22T00:17:38Z",
    "body": "The scheme that I have proposed does have certain issues which would need to be resolved; a na\u00efve implementation would make some error handling more difficult as it arbitrary expansion of types. For example:\n\n``` rust\nlet mut a = 7i;\na = 5u;\n```\n\nAt present this is a nice simple thing: type error, `a` is `int`, so you can't put a `uint` in it. My scheme _could_ be used to make that legal: `a`'s type would be `int | uint`. This is probably not a good idea.\n\nProbably the best way around that is that the type inferrer be incapable of introducing sum types. Thus, the `int | uint` example above would fail to compile, as it does at present, only changing to compiling with `int | uint` with an explicit type specification, `let mut a: int | uint = 7i`. Functions have their return type specified, so there is no need for inference there, either.\n\n``` rust\nfn x() -> int | uint {\n    let out = 5i;\n    // Do something\n    out\n}\n```\n\nIn a case like that `out` would be inferred as `int | uint`, from the return type\u2014a sum type is being inferred, but not _introduced_.\n\n---\n\nBy the way, I also imagine sum types as automatically implementing all traits that all of their types implement\u2014this would make a type like `int | uint` genuinely usable for some things. It would still be prone to not doing everything people wanted, though; for example, an automatic implementation of `Add<T1 | T2, T1 | T2>` for `T1 | T2`  would require both `T1` and `T2` to have implementations of `Add<T1, [exactly one of T1 and T2 to avoid an implementation conflict]>` and `Add<T2, [T1 xor T2]>`. So you won't get `Add` working for `int | uint`.\n\nBut you would be able to have simpler ones like `Neg<T1 | T2>` for `T1 | T2`, which would require either {`impl Neg<T1> for T1` and `impl Neg<T2> for <T2>`} or {`impl Neg<T2> for T1` and `impl Neg<T1> for T2>`}.\n\nUnfortunately, all of these automatic trait implementation notions involve combinatorial explosion with generics.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35787481/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35790697",
    "html_url": "https://github.com/rust-lang/rust/issues/8277#issuecomment-35790697",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8277",
    "id": 35790697,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzkwNjk3",
    "user": {
      "login": "mneumann",
      "id": 34112,
      "node_id": "MDQ6VXNlcjM0MTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/34112?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mneumann",
      "html_url": "https://github.com/mneumann",
      "followers_url": "https://api.github.com/users/mneumann/followers",
      "following_url": "https://api.github.com/users/mneumann/following{/other_user}",
      "gists_url": "https://api.github.com/users/mneumann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mneumann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mneumann/subscriptions",
      "organizations_url": "https://api.github.com/users/mneumann/orgs",
      "repos_url": "https://api.github.com/users/mneumann/repos",
      "events_url": "https://api.github.com/users/mneumann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mneumann/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-22T01:33:22Z",
    "updated_at": "2014-02-22T01:33:22Z",
    "body": "@chris-morgan: We'd also need special match syntax to test whether it's a <code>int</code> or an <code>uint</code>, something like <code>Int(i)</code>, while enum types or structs can be pattern matched via their constructor.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35790697/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35792757",
    "html_url": "https://github.com/rust-lang/rust/issues/8277#issuecomment-35792757",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8277",
    "id": 35792757,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzkyNzU3",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-22T02:53:30Z",
    "updated_at": "2014-02-22T02:53:30Z",
    "body": "@mneumann my initial suggestion was using the type path, which would yield it `int(i)` and `uint(u)`. I think that would work and I do not believe it would have any problems.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35792757/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35793880",
    "html_url": "https://github.com/rust-lang/rust/issues/8277#issuecomment-35793880",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8277",
    "id": 35793880,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzkzODgw",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-22T03:58:19Z",
    "updated_at": "2014-02-22T04:01:22Z",
    "body": "@chris-morgan you haven't addressed how to handle `int | int`. (I personally like some variation on tuples, like in the main text.)\n\nIt would be good to collect some research and any prior art about languages with anonymous sum types (preferably, statically typed languages).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35793880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35795554",
    "html_url": "https://github.com/rust-lang/rust/issues/8277#issuecomment-35795554",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8277",
    "id": 35795554,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1Nzk1NTU0",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-22T05:47:28Z",
    "updated_at": "2014-02-22T09:51:39Z",
    "body": "@huonw You're right, I forgot that. OK, here we go:\n\n`T | T` should be illegal at the local level (there being no way of distinguishing between them in a match pattern), but the implementation must be able to model it, because of generics.\n\nI will define sum types as commutative (viz. `T1 | T2` and `T2 | T1` are equivalent) as I believe this to be a sound way of forming things.\n\nGiven a generic `T`, we might have `T | int` which at the global level would be `int | int`, or with a few degrees of recursion, the finite type `int | int | int | int | int | \u2026`. I do not believe that this is a problem. The internal implementation might have the anonymous variants sorted by type (using a stable sort), but I expect it would be more efficient not done that way (in the compiler; at runtime I would expect no difference). Either way, it is not difficult for the compiler to track the state, though it may be a little more complex than the types of the current type system (I'm not sure). At no level is any collision possible.\n\nTo clarify how generic matching would operate:\n\n``` rust\nfn x<T>(t: T | int) {\n    match t {\n         T(t) => unimplemented!(),\n         int(t) => unimplemented!(),\n    }\n}\n\nx(42u);  // Fine. T = uint\nx(42i);  // Not fine: T = <type error>\nx::<bool>(42i);  // Fine. T = bool\n```\n\nHmm\u2026 suddenly I started wondering about `T | ()`. That _could_ be used to replace `Option<T>`, though I wouldn't recommend it\u2026 but my suggestions thus far would indicate the pattern for matching the `()` would be `()(())` (presently illegal)! `()` _could_ be special cased as `()`, but that's probably not a good plan. Also compare tuple types with greater arity, such as with `(T1, T2) | (T3, T4)`; the matches there would, in this simple syntax, be `(T1, T2)(t1, t2)`. Perhaps not ideal.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35795554/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35799417",
    "html_url": "https://github.com/rust-lang/rust/issues/8277#issuecomment-35799417",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8277",
    "id": 35799417,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1Nzk5NDE3",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-22T10:16:27Z",
    "updated_at": "2014-02-22T10:16:27Z",
    "body": "I feel that the two proposals in mind have different use cases.\n\nThe first approach, `(T1|T2)`, is providing anonymous _enums_. They provide the full functionality of enums (except for struct variants), but carry many of their pains. Matching, for example, does not include the types that are being matched. Nor does it appear to me that these can be conveniently composed (i.e. turning `(T1|T2)` into `(T1|T2|T3)`), which is, to my mind, just about the main reason we _want_ anonymous sum types. In summary, I feel that that while they might ameliorate some pain, they still end up quite verbose (specifically I mean the creation of them, which means that things like `try!` would still not be usable) and do not elegantly solve the problem for the situations that I perceive the need of anonymous sum types in.\n\nThe second approach, my `T1 | T2`, permits what I will for no especial reason dub \"type inflation\": storing multiple types in one slot. These are similar to enums but do not provide the full power of the enum, as is epitomised in the `int | int` example, which is illegal. While they lack that power, I do not believe that that is a genuine problem. The cases where I perceive the need of anonymous sum types do not ever require this; I believe that an explicit enum is more appropriate for such cases. But `T1 | T2` makes up for it by a considerable improvement in ergonomics; things like `try!` would be correct in it, for example, and the types are explicit in matching.\n\nWell, I have demonstrated cases where my proposal would be useful in existing code. Can anyone come up with a case where `(~str|int|int)` (or any other such thing with `T|T`) would be genuinely useful and would not be better served by an enum? I really can't think of any, but I'm certainly open to being informed of cases.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35799417/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35801897",
    "html_url": "https://github.com/rust-lang/rust/issues/8277#issuecomment-35801897",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8277",
    "id": 35801897,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODAxODk3",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-22T12:53:01Z",
    "updated_at": "2014-02-22T12:54:31Z",
    "body": "@chris-morgan Indeed, the two are very different things with some superficial similarities, as I noted earlier. We should also clarify terminology. I don't think what you're describing can be accurately called \"anonymous sum types\", because they're not sum types. I'm not remotely an expert in this area, but it sounds much closer to something like union types (see [one](http://ceylon-lang.org/documentation/current/tour/types/), [two](http://cstheory.stackexchange.com/questions/20536/what-are-the-practical-issues-with-intersection-and-union-types)).\n\n(It might be worth discussing the two in separate issues? I don't mind having them both here, but it might help to reduce confusion.)\n\nW.r.t. anonymous sum types (my proposal), there's no _strongly_ motivating use case that I know of, it's just niceties and ergonomic things like:\n- Symmetry with anonymous product types, i.e. tuples.\n- When things return one of many options but they don't have a distinguished meaning, it's nicer than the alternatives of nesting `Either` (which we've removed) or introducing `Any2`, `Any3`, `Any4`, etc. See @bblum's example of `select` earlier.\n- It means that any type you could write as a combination of `struct`s and `enum`s, you can also write anonymously, which is a neat feature when talking about things abstractly. E.g. you get to say things like `(A, (B | C)) =~ ((A, B) | (A, C))`, which is the distributive law.\n- It's sometimes convenient not to have to introduce a new `enum` type for perhaps just a single function.\n\nArguably, any time you might want to use an anonymous sum, it would improve readability to introduce an explicit `enum` with names for the type and variants instead. _But_, I suspect you could make the exact same argument about tuples and `struct`s as well.\n\nYou haven't explicitly answered my question with regards to what the motivation for these union-ish types is. I get that you want to make error handling nicer, but could you precisely enumerate what bothers you about the current situation, what properties any solution should have (i.e. when could it be considered \"solved\"), and so forth? (For instance, is your problem primarily with syntactic verbosity or semantic expressiveness? If it's the former, introducing a potentially-far-reaching type system feature to deal with it might not be the most cost-effective solution.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35801897/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56625049",
    "html_url": "https://github.com/rust-lang/rust/issues/8277#issuecomment-56625049",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8277",
    "id": 56625049,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NjI1MDQ5",
    "user": {
      "login": "rust-highfive",
      "id": 7378925,
      "node_id": "MDQ6VXNlcjczNzg5MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7378925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rust-highfive",
      "html_url": "https://github.com/rust-highfive",
      "followers_url": "https://api.github.com/users/rust-highfive/followers",
      "following_url": "https://api.github.com/users/rust-highfive/following{/other_user}",
      "gists_url": "https://api.github.com/users/rust-highfive/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rust-highfive/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rust-highfive/subscriptions",
      "organizations_url": "https://api.github.com/users/rust-highfive/orgs",
      "repos_url": "https://api.github.com/users/rust-highfive/repos",
      "events_url": "https://api.github.com/users/rust-highfive/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rust-highfive/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-24T04:59:40Z",
    "updated_at": "2014-09-24T04:59:40Z",
    "body": "This issue has been moved to the RFCs repo: rust-lang/rfcs#294\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56625049/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
