[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75397313",
    "html_url": "https://github.com/rust-lang/rust/issues/22649#issuecomment-75397313",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22649",
    "id": 75397313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1Mzk3MzEz",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-21T22:44:56Z",
    "updated_at": "2015-02-21T22:44:56Z",
    "body": "cc @eddyb \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75397313/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75398604",
    "html_url": "https://github.com/rust-lang/rust/issues/22649#issuecomment-75398604",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22649",
    "id": 75398604,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1Mzk4NjA0",
    "user": {
      "login": "Valloric",
      "id": 919444,
      "node_id": "MDQ6VXNlcjkxOTQ0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/919444?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Valloric",
      "html_url": "https://github.com/Valloric",
      "followers_url": "https://api.github.com/users/Valloric/followers",
      "following_url": "https://api.github.com/users/Valloric/following{/other_user}",
      "gists_url": "https://api.github.com/users/Valloric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Valloric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Valloric/subscriptions",
      "organizations_url": "https://api.github.com/users/Valloric/orgs",
      "repos_url": "https://api.github.com/users/Valloric/repos",
      "events_url": "https://api.github.com/users/Valloric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Valloric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-21T23:13:55Z",
    "updated_at": "2015-02-21T23:13:55Z",
    "body": "Another example, with `Vector<T>` and `[T]`. This works:\n\n``` rust\nfn main() {\n  let x = vec![97u8];\n  assert_eq!(b\"a\", &x[..]);\n}\n```\n\nBut this fails to compile:\n\n``` rust\nfn main() {\n  let x = vec![97u8];\n  assert_eq!(b\"a\", &x);\n}\n```\n\nOutput:\n\n```\n<std macros>:5:10: 5:35 error: the trait `core::cmp::PartialEq<collections::vec::Vec<u8>>` is not implemented for the type `[u8]` [E0277]\n<std macros>:5 if ! ( ( * left_val == * right_val ) && ( * right_val == * left_val ) ) {\n                        ^~~~~~~~~~~~~~~~~~~~~~~~~\n<std macros>:1:1: 9:39 note: in expansion of assert_eq!\n<anon>:3:3: 3:24 note: expansion site\n<std macros>:5:43: 5:68 error: the trait `core::cmp::PartialEq<[u8]>` is not implemented for the type `collections::vec::Vec<u8>` [E0277]\n<std macros>:5 if ! ( ( * left_val == * right_val ) && ( * right_val == * left_val ) ) {\n                                                         ^~~~~~~~~~~~~~~~~~~~~~~~~\n<std macros>:1:1: 9:39 note: in expansion of assert_eq!\n<anon>:3:3: 3:24 note: expansion site\nerror: aborting due to 2 previous errors\nplaypen: application terminated with error code 101\n```\n\nI have tons of other examples in my codebase. Like, 30+.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75398604/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75399557",
    "html_url": "https://github.com/rust-lang/rust/issues/22649#issuecomment-75399557",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22649",
    "id": 75399557,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1Mzk5NTU3",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-21T23:35:49Z",
    "updated_at": "2015-02-21T23:35:49Z",
    "body": "(FWIW, that second example could be written as `assert_eq!(b\"a\", vec![97u8])` because `PartialEq` is implemented between `&[u8]` and `Vec<u8>`, no need for deref coercions nor slicing syntax)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75399557/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76175120",
    "html_url": "https://github.com/rust-lang/rust/issues/22649#issuecomment-76175120",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22649",
    "id": 76175120,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2MTc1MTIw",
    "user": {
      "login": "yann-ledu",
      "id": 11094035,
      "node_id": "MDQ6VXNlcjExMDk0MDM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/11094035?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yann-ledu",
      "html_url": "https://github.com/yann-ledu",
      "followers_url": "https://api.github.com/users/yann-ledu/followers",
      "following_url": "https://api.github.com/users/yann-ledu/following{/other_user}",
      "gists_url": "https://api.github.com/users/yann-ledu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yann-ledu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yann-ledu/subscriptions",
      "organizations_url": "https://api.github.com/users/yann-ledu/orgs",
      "repos_url": "https://api.github.com/users/yann-ledu/repos",
      "events_url": "https://api.github.com/users/yann-ledu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yann-ledu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-26T13:09:49Z",
    "updated_at": "2015-02-26T13:09:49Z",
    "body": "The problem also appears here:\n\n``` rust\nfn main()\n{\n    let rs = \"toto\";\n    let s = rs.to_string();\n\n    // That works as expected, &s coerces s to type &str\n    fn titi(s:&str) { assert_eq!(s,\"toto\");};\n    titi(&s);\n\n    // That also works, same coercion happens\n    let cs:&str = &s;\n    assert_eq!(cs,rs);\n\n    // The following expression fails to run, as though the coercion did not happen\n    let cs = &s;\n    assert_eq!(cs,rs);\n}\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76175120/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169910064",
    "html_url": "https://github.com/rust-lang/rust/issues/22649#issuecomment-169910064",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22649",
    "id": 169910064,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2OTkxMDA2NA==",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-08T06:35:29Z",
    "updated_at": "2016-01-08T06:35:37Z",
    "body": "This is somewhat similar to https://github.com/rust-lang/rust/issues/16864.\n\nI think @nrc was doing some work on coercions recently?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169910064/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/186716848",
    "html_url": "https://github.com/rust-lang/rust/issues/22649#issuecomment-186716848",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22649",
    "id": 186716848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NjcxNjg0OA==",
    "user": {
      "login": "Valloric",
      "id": 919444,
      "node_id": "MDQ6VXNlcjkxOTQ0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/919444?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Valloric",
      "html_url": "https://github.com/Valloric",
      "followers_url": "https://api.github.com/users/Valloric/followers",
      "following_url": "https://api.github.com/users/Valloric/following{/other_user}",
      "gists_url": "https://api.github.com/users/Valloric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Valloric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Valloric/subscriptions",
      "organizations_url": "https://api.github.com/users/Valloric/orgs",
      "repos_url": "https://api.github.com/users/Valloric/repos",
      "events_url": "https://api.github.com/users/Valloric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Valloric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-21T01:37:47Z",
    "updated_at": "2016-02-21T01:37:47Z",
    "body": "I can confirm the issue is still present on `rustc 1.8.0-nightly (57c357d89 2016-02-16)`. My testcase still repros.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/186716848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/186738437",
    "html_url": "https://github.com/rust-lang/rust/issues/22649#issuecomment-186738437",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22649",
    "id": 186738437,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NjczODQzNw==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-21T04:24:23Z",
    "updated_at": "2016-02-21T04:24:52Z",
    "body": "Both arrays and the expansion of `assert_eq` fail to trigger coercions.\nThe former is easier to fix, try changing [this call](https://github.com/rust-lang/rust/blob/c894ff6b1249fc59ce583054011cf5966c6fcc97/src/librustc_typeck/check/mod.rs#L3553) to be to `check_expr_coercable_to_type` instead.\nThat _should_ make it so the first array element with even a partially inferrable type triggers coercions on subsequent array elements.\nThe perfect solution would involve smarter unification such that `&String` followed by `&str` goes back and coerces the `&String` (or @nikomatsakis' order-independent type-checking).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/186738437/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/250951107",
    "html_url": "https://github.com/rust-lang/rust/issues/22649#issuecomment-250951107",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22649",
    "id": 250951107,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MDk1MTEwNw==",
    "user": {
      "login": "Valloric",
      "id": 919444,
      "node_id": "MDQ6VXNlcjkxOTQ0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/919444?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Valloric",
      "html_url": "https://github.com/Valloric",
      "followers_url": "https://api.github.com/users/Valloric/followers",
      "following_url": "https://api.github.com/users/Valloric/following{/other_user}",
      "gists_url": "https://api.github.com/users/Valloric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Valloric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Valloric/subscriptions",
      "organizations_url": "https://api.github.com/users/Valloric/orgs",
      "repos_url": "https://api.github.com/users/Valloric/repos",
      "events_url": "https://api.github.com/users/Valloric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Valloric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-02T03:16:37Z",
    "updated_at": "2016-10-02T03:16:37Z",
    "body": "Interesting developments: the first test case I posted now compiles fine.\n\n``` rust\nfn main() {\n  let x = \"a\".to_string();\n  // Doesn't work\n  let y: String = [\"b\", &x, \"c\"].concat();\n  println!(\"{}\", y);\n}\n```\n\nBut the second test case fails compilation:\n\n``` rust\nfn main() {\n  let x = vec![97u8];\n  assert_eq!(b\"a\", &x);\n}\n```\n\nHere's the error message:\n\n```\nerror[E0277]: the trait bound `[u8; 1]: std::cmp::PartialEq<std::vec::Vec<u8>>` is not satisfied\n --> <std macros>:5:6\n  |\n5 | if ! ( * left_val == * right_val ) {\n  |      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nfoo.rs:3:3: 3:24 note: in this expansion of assert_eq! (defined in <std macros>)\n  |\n  = help: the following implementations were found:\n  = help:   <[A; 0] as std::cmp::PartialEq<[B; 0]>>\n  = help:   <[A; 0] as std::cmp::PartialEq<[B]>>\n  = help:   <[B] as std::cmp::PartialEq<[A; 0]>>\n  = help:   <[A; 0] as std::cmp::PartialEq<&'b [B]>>\n  = help: and 228 others\n  = note: required because of the requirements on the impl of `std::cmp::PartialEq<&std::vec::Vec<u8>>` for `&[u8; 1]`\n\nerror: aborting due to previous error\n```\n\nrustc version: `rustc 1.12.0 (3191fbae9 2016-09-23)`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/250951107/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/250951732",
    "html_url": "https://github.com/rust-lang/rust/issues/22649#issuecomment-250951732",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22649",
    "id": 250951732,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MDk1MTczMg==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-02T03:38:43Z",
    "updated_at": "2016-10-02T03:38:43Z",
    "body": "> such that `&String` followed by `&str` goes back and coerces the `&String`\n\nFWIW this is what was implemented and why the array case works now.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/250951732/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/365564802",
    "html_url": "https://github.com/rust-lang/rust/issues/22649#issuecomment-365564802",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22649",
    "id": 365564802,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTU2NDgwMg==",
    "user": {
      "login": "PSeitz",
      "id": 1109503,
      "node_id": "MDQ6VXNlcjExMDk1MDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1109503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PSeitz",
      "html_url": "https://github.com/PSeitz",
      "followers_url": "https://api.github.com/users/PSeitz/followers",
      "following_url": "https://api.github.com/users/PSeitz/following{/other_user}",
      "gists_url": "https://api.github.com/users/PSeitz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PSeitz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PSeitz/subscriptions",
      "organizations_url": "https://api.github.com/users/PSeitz/orgs",
      "repos_url": "https://api.github.com/users/PSeitz/repos",
      "events_url": "https://api.github.com/users/PSeitz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PSeitz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-02-14T10:44:36Z",
    "updated_at": "2018-02-14T10:44:36Z",
    "body": "Here is another case with a trait, wich fails to compile:\r\n\r\n```\r\n\r\nfn main() {\r\n\r\n    concat(\"nice\", \"cooel\");\r\n    concat(\"nice\".to_string(), \"cooel\");\r\n    let yop = \"nice\".to_string();\r\n    concat(&yop, \"cooel\"); // need to add manually \"as &str\"\r\n    \r\n}\r\n\r\npub fn concat<S: Into<String>>(path: S, suffix: &str) -> String {\r\n    path.into() + suffix\r\n}\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/365564802/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/485287628",
    "html_url": "https://github.com/rust-lang/rust/issues/22649#issuecomment-485287628",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22649",
    "id": 485287628,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NTI4NzYyOA==",
    "user": {
      "login": "xixixao",
      "id": 1473433,
      "node_id": "MDQ6VXNlcjE0NzM0MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1473433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xixixao",
      "html_url": "https://github.com/xixixao",
      "followers_url": "https://api.github.com/users/xixixao/followers",
      "following_url": "https://api.github.com/users/xixixao/following{/other_user}",
      "gists_url": "https://api.github.com/users/xixixao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xixixao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xixixao/subscriptions",
      "organizations_url": "https://api.github.com/users/xixixao/orgs",
      "repos_url": "https://api.github.com/users/xixixao/repos",
      "events_url": "https://api.github.com/users/xixixao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xixixao/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-04-21T22:44:58Z",
    "updated_at": "2019-04-21T22:48:39Z",
    "body": "Also ran into this, in a very simple case:\r\n\r\nworks:\r\n```rust\r\nfn prompt_and_validate(msg: &str, options: &[&str]) {\r\n  let reply = prompt(msg);\r\n  let r: &str = &reply;\r\n  if options.contains(&r) {\r\n    \r\n  }\r\n}\r\n```\r\ndoesn't work:\r\n```rust\r\nfn prompt_and_validate(msg: &str, options: &[&str]) {\r\n  let reply = prompt(msg);\r\n  let r = &reply;\r\n  if options.contains(&r) {\r\n    \r\n  }\r\n}\r\n```\r\nor in other words, double deref is not working automatically:\r\n```rust\r\nfn prompt_and_validate(msg: &str, options: &[&str]) {\r\n  let reply = prompt(msg);\r\n  if options.contains(&&reply) {\r\n    \r\n  }\r\n}\r\n```\r\nwith\r\n```\r\nmismatched types\r\n\r\nexpected str, found struct `std::string::String`\r\n\r\nnote: expected type `&&str`\r\n         found type `&&std::string::String`\r\n```\r\n\r\n(workaround is `&reply.as_str()`)\r\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/485287628/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/922090325",
    "html_url": "https://github.com/rust-lang/rust/issues/22649#issuecomment-922090325",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22649",
    "id": 922090325,
    "node_id": "IC_kwDOAAsO6M429ftV",
    "user": {
      "login": "rsalmei",
      "id": 6652853,
      "node_id": "MDQ6VXNlcjY2NTI4NTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6652853?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rsalmei",
      "html_url": "https://github.com/rsalmei",
      "followers_url": "https://api.github.com/users/rsalmei/followers",
      "following_url": "https://api.github.com/users/rsalmei/following{/other_user}",
      "gists_url": "https://api.github.com/users/rsalmei/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rsalmei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rsalmei/subscriptions",
      "organizations_url": "https://api.github.com/users/rsalmei/orgs",
      "repos_url": "https://api.github.com/users/rsalmei/repos",
      "events_url": "https://api.github.com/users/rsalmei/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rsalmei/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-09-17T21:24:49Z",
    "updated_at": "2021-09-17T21:24:49Z",
    "body": "This still seems to fail today in Rust 1.55:\r\n\r\n```rust\r\nfn main() {\r\n    let cmd = \"some command\".split_whitespace().collect::<Vec<_>>();\r\n    match &cmd {\r\n        [\"some\", sub] => println!(\"some {}\", sub),\r\n        [\"quit\"] => println!(\"bye!\"),\r\n        _ => println!(\"oops\"),\r\n    }\r\n}\r\n```\r\n\r\nwith:\r\n```text\r\nerror[E0529]: expected an array or slice, found `Vec<&str>`\r\n  --> src/main.rs:13:9\r\n   |\r\n13 |         [\"some\", sub] => println!(\"some {}\", sub),\r\n   |         ^^^^^^^^^^^^^ pattern cannot match with input type `Vec<&str>`\r\n\r\nerror[E0529]: expected an array or slice, found `Vec<&str>`\r\n  --> src/main.rs:14:9\r\n   |\r\n14 |         [\"quit\"] => println!(\"bye!\"),\r\n   |         ^^^^^^^^ pattern cannot match with input type `Vec<&str>`\r\n\r\nFor more information about this error, try `rustc --explain E0529`.\r\nerror: could not compile `playground` due to 2 previous errors\r\n```\r\n\r\nExchanging `&cmd` for `&*cmd` or `&cmd[..]` makes it work.\r\nIs this intended or really a bug that the coercion does not trigger here?",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/922090325/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/923352277",
    "html_url": "https://github.com/rust-lang/rust/issues/22649#issuecomment-923352277",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22649",
    "id": 923352277,
    "node_id": "IC_kwDOAAsO6M43CTzV",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-09-20T21:53:14Z",
    "updated_at": "2021-09-20T21:53:14Z",
    "body": "It's a missing feature: we could try to figure out some kind of \"type skeleton\" from the patterns, before type-checking the expression being `match`ed, but we don't today.\n\nThat is, today the information flows only the other way around: from the expression to the patterns.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/923352277/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1698024201",
    "html_url": "https://github.com/rust-lang/rust/issues/22649#issuecomment-1698024201",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22649",
    "id": 1698024201,
    "node_id": "IC_kwDOAAsO6M5lNcsJ",
    "user": {
      "login": "pierwill",
      "id": 19642016,
      "node_id": "MDQ6VXNlcjE5NjQyMDE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/19642016?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pierwill",
      "html_url": "https://github.com/pierwill",
      "followers_url": "https://api.github.com/users/pierwill/followers",
      "following_url": "https://api.github.com/users/pierwill/following{/other_user}",
      "gists_url": "https://api.github.com/users/pierwill/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pierwill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pierwill/subscriptions",
      "organizations_url": "https://api.github.com/users/pierwill/orgs",
      "repos_url": "https://api.github.com/users/pierwill/repos",
      "events_url": "https://api.github.com/users/pierwill/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pierwill/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-08-29T19:38:45Z",
    "updated_at": "2023-08-29T19:38:45Z",
    "body": "> we could try to figure out some kind of \"type skeleton\" from the patterns, before type-checking the expression being matched, but we don't today\r\n\r\n@eddyb Is this still something we might want to do?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1698024201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
