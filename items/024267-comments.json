[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91558558",
    "html_url": "https://github.com/rust-lang/rust/issues/24267#issuecomment-91558558",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24267",
    "id": 91558558,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkxNTU4NTU4",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-10T13:31:19Z",
    "updated_at": "2015-04-10T13:31:19Z",
    "body": "Here is a vastly reduced test case:\n\nhttp://is.gd/EtaDNZ\n\n``` rust\nstruct Foo { n0: i32, n1: i32 }\n\nfn leak_1_brk() -> Foo {\n    let ret;\n    loop {\n        ret = Foo { n0: { break }, n1: 22 };\n    }\n    ret\n}\n\nfn main() { }\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91558558/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91558986",
    "html_url": "https://github.com/rust-lang/rust/issues/24267#issuecomment-91558986",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24267",
    "id": 91558986,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkxNTU4OTg2",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-10T13:32:40Z",
    "updated_at": "2015-04-10T13:32:40Z",
    "body": "triage: P-high (1.0)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91558986/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91584306",
    "html_url": "https://github.com/rust-lang/rust/issues/24267#issuecomment-91584306",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24267",
    "id": 91584306,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkxNTg0MzA2",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-10T14:59:21Z",
    "updated_at": "2015-04-10T14:59:21Z",
    "body": "An example not involving fields:\n\n``` rust\nfn consume(bar: Box<i32>) {\n    println!(\"{:?}\", x);\n}\n\nfn main() {\n    let mut foo = Box::new(1);\n    loop {\n        foo = { consume(foo); break };\n    }\n    consume(foo);\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91584306/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91585398",
    "html_url": "https://github.com/rust-lang/rust/issues/24267#issuecomment-91585398",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24267",
    "id": 91585398,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkxNTg1Mzk4",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-10T15:03:26Z",
    "updated_at": "2015-04-10T15:03:26Z",
    "body": "I've actually been exploiting this here: https://github.com/apasel422/tree/blob/master/src/node/mod.rs#L254-L269. It's only \"worked,\" apparently, because there is no implementation of `Drop` for the types involved, which are references.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91585398/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91713365",
    "html_url": "https://github.com/rust-lang/rust/issues/24267#issuecomment-91713365",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24267",
    "id": 91713365,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkxNzEzMzY1",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-10T23:09:45Z",
    "updated_at": "2015-04-10T23:14:48Z",
    "body": "Based on some cursory investigation, my current hypothesis is that there is a bug in `rustc::middle::dataflow`, or at least in the interaction between `rustc::middle::cfg` and `rustc::middle::dataflow`.\n\nIn particular, we have a method, `add_kills_from_flow_exits`, which is meant to gather all of the effects that need to occur due to a non-local control transfer (like that of `break`), based on the scopes that it pops through, and assign those effects to the transfer-function attached to the `break`.\n\nThe problem is that it does this by taking the union of all of the kill-effects for every node in the `exiting_scopes` associated with that edge in the control-flow graph, and even the _assignment_ expression is in the `exiting_scopes` list.  So we end up including the `kill`-effect of the assignment (which in this case I think kills the record that `foo` is in the \"moved-away\" set), and so we end up thinking that `foo` is initialized in the successor node of the `break` in the control-flow.\n\nIts possible the fix here may be simple.  Not sure yet.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91713365/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91719933",
    "html_url": "https://github.com/rust-lang/rust/issues/24267#issuecomment-91719933",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24267",
    "id": 91719933,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkxNzE5OTMz",
    "user": {
      "login": "ftxqxd",
      "id": 2055302,
      "node_id": "MDQ6VXNlcjIwNTUzMDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2055302?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ftxqxd",
      "html_url": "https://github.com/ftxqxd",
      "followers_url": "https://api.github.com/users/ftxqxd/followers",
      "following_url": "https://api.github.com/users/ftxqxd/following{/other_user}",
      "gists_url": "https://api.github.com/users/ftxqxd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ftxqxd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ftxqxd/subscriptions",
      "organizations_url": "https://api.github.com/users/ftxqxd/orgs",
      "repos_url": "https://api.github.com/users/ftxqxd/repos",
      "events_url": "https://api.github.com/users/ftxqxd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ftxqxd/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-10T23:47:36Z",
    "updated_at": "2015-04-10T23:47:36Z",
    "body": "Minimal:\n\n``` rust\nfn main() {\n    let x: i32;\n    loop {\n        x = break;\n    }\n    println!(\"{}\", x);\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91719933/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
