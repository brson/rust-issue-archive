[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36797800",
    "html_url": "https://github.com/rust-lang/rust/issues/12717#issuecomment-36797800",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12717",
    "id": 36797800,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2Nzk3ODAw",
    "user": {
      "login": "Aatch",
      "id": 342416,
      "node_id": "MDQ6VXNlcjM0MjQxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aatch",
      "html_url": "https://github.com/Aatch",
      "followers_url": "https://api.github.com/users/Aatch/followers",
      "following_url": "https://api.github.com/users/Aatch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions",
      "organizations_url": "https://api.github.com/users/Aatch/orgs",
      "repos_url": "https://api.github.com/users/Aatch/repos",
      "events_url": "https://api.github.com/users/Aatch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aatch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-05T21:44:34Z",
    "updated_at": "2014-03-05T21:44:34Z",
    "body": "From what I can tell, the anonymous lifetime assigned to the closure in the `new` call should cause the first example to fail with a similar error. However, I am not familiar enough with these specific rules to be sure.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36797800/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36798442",
    "html_url": "https://github.com/rust-lang/rust/issues/12717#issuecomment-36798442",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12717",
    "id": 36798442,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2Nzk4NDQy",
    "user": {
      "login": "bvssvni",
      "id": 1743862,
      "node_id": "MDQ6VXNlcjE3NDM4NjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1743862?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bvssvni",
      "html_url": "https://github.com/bvssvni",
      "followers_url": "https://api.github.com/users/bvssvni/followers",
      "following_url": "https://api.github.com/users/bvssvni/following{/other_user}",
      "gists_url": "https://api.github.com/users/bvssvni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bvssvni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bvssvni/subscriptions",
      "organizations_url": "https://api.github.com/users/bvssvni/orgs",
      "repos_url": "https://api.github.com/users/bvssvni/repos",
      "events_url": "https://api.github.com/users/bvssvni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bvssvni/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-05T21:50:00Z",
    "updated_at": "2014-03-05T21:50:54Z",
    "body": "If \"&'a ||\" always equals \"&'a 'a ||\" the second example should work, but neither do I know the specific rules. It is better to have both working or failing, because it is possible to define traits this way and get surprising errors in the impl.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36798442/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36800992",
    "html_url": "https://github.com/rust-lang/rust/issues/12717#issuecomment-36800992",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12717",
    "id": 36800992,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2ODAwOTky",
    "user": {
      "login": "bvssvni",
      "id": 1743862,
      "node_id": "MDQ6VXNlcjE3NDM4NjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1743862?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bvssvni",
      "html_url": "https://github.com/bvssvni",
      "followers_url": "https://api.github.com/users/bvssvni/followers",
      "following_url": "https://api.github.com/users/bvssvni/following{/other_user}",
      "gists_url": "https://api.github.com/users/bvssvni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bvssvni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bvssvni/subscriptions",
      "organizations_url": "https://api.github.com/users/bvssvni/orgs",
      "repos_url": "https://api.github.com/users/bvssvni/repos",
      "events_url": "https://api.github.com/users/bvssvni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bvssvni/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-05T22:14:01Z",
    "updated_at": "2014-03-05T22:14:01Z",
    "body": "This is the code where I discovered the bug:\n\nWhen I change to \"&'a 'a ||\" in the trait it gives me this lifetime error. If I change to \"&'a ||\" in the trait it gives me same error as the first example. Maybe these two bugs are related?\n\n``` rust\nrustc 0.10-pre (0a5138c 2014-03-04 13:16:41 -0800)\n\n\npub trait Expr<'a, T> {\n    fn then(&'a self, f: &'a 'a ||) -> T;\n}\n\nimpl<'a> Expr<'a, ()> for () {\n    fn then(&'a self, f: &'a 'a ||) -> () {\n        (*f)();\n    }\n}\n\npub struct Action<'a> {\n    f: Option<&'a 'a ||>,\n    next: Option<&'a Action<'a>>,\n}\n\nimpl<'a> Action<'a> {\n    pub fn new(f: &'a 'a ||) -> Action<'a> {\n        Action { f: Some(f), next: None }\n    }\n\n    pub fn run(&self) {\n        match self.next {\n            Some(action) => action.run(),\n            None => {},\n        }\n\n        match self.f {\n            None => {},\n            Some(f) => (*f)(),\n        };\n    }\n}\n\nimpl<'a> Expr<'a, Action<'a>> for Action<'a> {\n    fn then(&'a self, f: &'a 'a ||) -> Action<'a> {\n        Action { f: Some(f), next: Some(self) }\n    }\n}\n\npub fn main() {\n    let x = || println!(\"Hello!\");\n    let y = || println!(\"Again!\");\n    let z = || println!(\"So...\");\n\n    ().then(&x).then(&y).then(&z);\n\n    Action::new(&x).then(&y).then(&z).run();\n}\n\n\nCompiler error:\nimpl2.rs:46:2: 46:4 error: cannot infer an appropriate lifetime for region in type/impl due to conflicting requirements\nimpl2.rs:46     ().then(&x).then(&y).then(&z);\n                ^~\nimpl2.rs:48:2: 48:26 note: first, the lifetime must be contained by the method call at 48:1...\nimpl2.rs:48     Action::new(&x).then(&y).then(&z).run();\n                ^~~~~~~~~~~~~~~~~~~~~~~~\nimpl2.rs:48:2: 48:17 note: ...so that method receiver is valid for the method call\nimpl2.rs:48     Action::new(&x).then(&y).then(&z).run();\n                ^~~~~~~~~~~~~~~\nimpl2.rs:46:10: 46:12 note: but, the lifetime must also be contained by the expression at 46:9...\nimpl2.rs:46     ().then(&x).then(&y).then(&z);\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36800992/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37836911",
    "html_url": "https://github.com/rust-lang/rust/issues/12717#issuecomment-37836911",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12717",
    "id": 37836911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODM2OTEx",
    "user": {
      "login": "edwardw",
      "id": 454049,
      "node_id": "MDQ6VXNlcjQ1NDA0OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/454049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/edwardw",
      "html_url": "https://github.com/edwardw",
      "followers_url": "https://api.github.com/users/edwardw/followers",
      "following_url": "https://api.github.com/users/edwardw/following{/other_user}",
      "gists_url": "https://api.github.com/users/edwardw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edwardw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edwardw/subscriptions",
      "organizations_url": "https://api.github.com/users/edwardw/orgs",
      "repos_url": "https://api.github.com/users/edwardw/repos",
      "events_url": "https://api.github.com/users/edwardw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edwardw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-17T16:29:38Z",
    "updated_at": "2014-03-17T16:29:59Z",
    "body": "Interestingly, with #12828 both work. Maybe we can close this bug?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37836911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66962737",
    "html_url": "https://github.com/rust-lang/rust/issues/12717#issuecomment-66962737",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12717",
    "id": 66962737,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTYyNzM3",
    "user": {
      "login": "reem",
      "id": 4745181,
      "node_id": "MDQ6VXNlcjQ3NDUxODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4745181?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reem",
      "html_url": "https://github.com/reem",
      "followers_url": "https://api.github.com/users/reem/followers",
      "following_url": "https://api.github.com/users/reem/following{/other_user}",
      "gists_url": "https://api.github.com/users/reem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reem/subscriptions",
      "organizations_url": "https://api.github.com/users/reem/orgs",
      "repos_url": "https://api.github.com/users/reem/repos",
      "events_url": "https://api.github.com/users/reem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reem/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-15T08:34:14Z",
    "updated_at": "2014-12-15T08:34:14Z",
    "body": "Triage: both examples fail, but because of calling a closure through `&`, not due to any lifetimes. Should be closed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66962737/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
