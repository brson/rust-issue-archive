[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18379355",
    "html_url": "https://github.com/rust-lang/rust/issues/6659#issuecomment-18379355",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6659",
    "id": 18379355,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4Mzc5MzU1",
    "user": {
      "login": "Aatch",
      "id": 342416,
      "node_id": "MDQ6VXNlcjM0MjQxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aatch",
      "html_url": "https://github.com/Aatch",
      "followers_url": "https://api.github.com/users/Aatch/followers",
      "following_url": "https://api.github.com/users/Aatch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions",
      "organizations_url": "https://api.github.com/users/Aatch/orgs",
      "repos_url": "https://api.github.com/users/Aatch/repos",
      "events_url": "https://api.github.com/users/Aatch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aatch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-24T00:01:59Z",
    "updated_at": "2013-05-24T00:01:59Z",
    "body": "Hmm, I'm not sure if this is actually a error. Rust macros work on token-trees, not text. Since `c_int` is just a literal token for the string `c_int`, it won't match against a type token, which is what your `forward_callback!` produces.\n\nAs for a workaround, you could add another clause to `c_to_rust!` that matches any type.\n\nThe only thing I could see is maybe adding a bit of logic to allow specialisation on tokens. So you could say, \"match a type token that is `c_int`\".\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18379355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18407122",
    "html_url": "https://github.com/rust-lang/rust/issues/6659#issuecomment-18407122",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6659",
    "id": 18407122,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NDA3MTIy",
    "user": {
      "login": "zargony",
      "id": 5121,
      "node_id": "MDQ6VXNlcjUxMjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5121?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zargony",
      "html_url": "https://github.com/zargony",
      "followers_url": "https://api.github.com/users/zargony/followers",
      "following_url": "https://api.github.com/users/zargony/following{/other_user}",
      "gists_url": "https://api.github.com/users/zargony/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zargony/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zargony/subscriptions",
      "organizations_url": "https://api.github.com/users/zargony/orgs",
      "repos_url": "https://api.github.com/users/zargony/repos",
      "events_url": "https://api.github.com/users/zargony/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zargony/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-24T14:12:08Z",
    "updated_at": "2013-05-24T14:12:08Z",
    "body": "Yes, this is more like a feature request than a bug report :). In my case, it would have been nice to be able to match on types. I guess I tried to add some kind of polymorphism to the c_to_rust! macro with it (which I'd find useful to be supported)\n\nAdding a clause that matches any type wouldn't help since I needed different types to be handled differently. The only way I found to work around it is to define a trait `ToRust` and implement a `to_rust` function for every desired type - which ended way more lengthy than I thought it would be.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18407122/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/21099370",
    "html_url": "https://github.com/rust-lang/rust/issues/6659#issuecomment-21099370",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6659",
    "id": 21099370,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxMDk5Mzcw",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-07-17T08:40:18Z",
    "updated_at": "2013-07-17T08:40:18Z",
    "body": "@Aatch you raise an interesting point there: it seems like this is a place where the macro system is falling down.\n\nIn your suggestion to add logic for specialization on tokens, was there any particular syntax you were thinking of?  Off the top of my head, I was thinking perhaps something like:\n\n```\nmacro_rules! c_to_rust(\n  ($v:ident c_int:ty) => ($v);\n  ($v:ident $(*c_char):ty) => (str::raw::from_c_str($v));\n)\n```\n\nwhere the trailing `: $ty` is meant to be analogous to how the pattern bindings are assigned types, but now instead of having a pattern binding before the colon, it is instead a type expression that must be matched.  Though it seems like this particular idea might be fraught with usability perils, in terms of how far the \":ty\" might occur from the beginning of the left-hand-side...\n\nAnother idea for a syntax is:\n\n```\nmacro_rules! c_to_rust(\n  ($v:ident $t:ty) if $t match c_int => ($v);\n  ($v:ident $t:ty) if $t match *c_char => (str::raw::from_c_str($v));\n)\n```\n\nwhich might be an easier syntax to both use and also implement.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/21099370/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25393237",
    "html_url": "https://github.com/rust-lang/rust/issues/6659#issuecomment-25393237",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6659",
    "id": 25393237,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MzkzMjM3",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-30T19:00:49Z",
    "updated_at": "2013-09-30T19:00:49Z",
    "body": "(bug triage) No updates here.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25393237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70725764",
    "html_url": "https://github.com/rust-lang/rust/issues/6659#issuecomment-70725764",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6659",
    "id": 70725764,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNzI1NzY0",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-20T20:22:50Z",
    "updated_at": "2015-01-20T20:22:50Z",
    "body": "Triage: macro stuff has been stabilized, anything more would need an RFC. If this is worth porting over to an RFC repo issue, please let me know.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70725764/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
