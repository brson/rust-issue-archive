[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23519489",
    "html_url": "https://github.com/rust-lang/rust/issues/8647#issuecomment-23519489",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8647",
    "id": 23519489,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNTE5NDg5",
    "user": {
      "login": "basic-calculus",
      "id": 4070335,
      "node_id": "MDQ6VXNlcjQwNzAzMzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4070335?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/basic-calculus",
      "html_url": "https://github.com/basic-calculus",
      "followers_url": "https://api.github.com/users/basic-calculus/followers",
      "following_url": "https://api.github.com/users/basic-calculus/following{/other_user}",
      "gists_url": "https://api.github.com/users/basic-calculus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/basic-calculus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/basic-calculus/subscriptions",
      "organizations_url": "https://api.github.com/users/basic-calculus/orgs",
      "repos_url": "https://api.github.com/users/basic-calculus/repos",
      "events_url": "https://api.github.com/users/basic-calculus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/basic-calculus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-29T20:08:28Z",
    "updated_at": "2013-08-29T20:10:32Z",
    "body": "So I talked on IRC about this and the reason why this happens is because the metadata is stored in a .notes section and this section is garbage collected. The workaround is to run `ld -shared --gc-sections -shared in -o out` on one's libraries after they have been linked. This does suggest that it might be a good idea to have the linking metadata as separate from shared libraries though. On the other hand the type of people who would do this should probable just use static linking anyways.\n\nEdit: Nope this doesn't work. Still can't figure out a workaround.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23519489/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30891697",
    "html_url": "https://github.com/rust-lang/rust/issues/8647#issuecomment-30891697",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8647",
    "id": 30891697,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwODkxNjk3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-18T23:25:38Z",
    "updated_at": "2013-12-18T23:25:38Z",
    "body": "That is correct. When you gc sections in a rust library it will remove the metadata that rust reads and it will be unable to read the output dylib. The manpage explicitly mentions that this may break executables, and this is basically just an example of how things break. It is not a goal of the compiler to inspect link arguments and then process them accordingly, so I'm going to close this as working as intended.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30891697/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
