[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17400709",
    "html_url": "https://github.com/rust-lang/rust/issues/6163#issuecomment-17400709",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6163",
    "id": 17400709,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NDAwNzA5",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-03T15:30:46Z",
    "updated_at": "2013-05-04T02:27:03Z",
    "body": "FWIW a brief recap (and slight evolution) of my proposal:\n\n-2. Make it possible for a supervising task to intercept the argument its child task gives to `fail!()`\n-1. Make `try()` return that in the `Err` variant of `Result`\n0. Make `try()` have very low overhead\n1. I/O operations indicate errors by raising conditions, and if the error can't be repaired, `fail!()`ing with a description of the error\n2. The conditions are (logically) such that they allow for the handler to recover from the error\n3. The exception to 1+2 is `close()`, which consumes the argument `File` and returns a (potential-)error description directly\n\nBenefits:\n- Straight-line I/O code without error handling is straightforward and concise.\n- If the programmer wants to recover from an error and keep going, she can use a condition handler.\n- If the programmer wants to respond to an error in some other way, she can use `try()`.\n- `File`s, if they are in scope, are statically guaranteed to be open and in a good state. The programmer does not have to handle or care about the possibility that they might not be, similarly to non-nullable pointers.\n- If the programmer wants to have a `File` managed by the garbage collector that can nonetheless be closed early, she can use `@mut Option<File>`.\n\nOther possibilities:\n- Provide `impl<S: Stream> Stream for Option<S>` and/or `for Result<S, IoError>` (likewise `Reader`/`Writer`), which wraps calls to `try()` and indicates errors by writing `None`/`Err` into `self`. Not sure what to do in the case where the return value was supposed to be read from the stream, probably return a default.\n- Make the types also reflect readability/writability. So instead of just `File`, there would be `File`, `ROFile` and `WOFile`, of which the latter two would implement `Reader` but not `Writer` and vice versa. Correspondingly `open()` would bifurcate into `open()`, `open_ro()`, and `open_wo()`, and the `FileAccess` enum would disappear.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17400709/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17443413",
    "html_url": "https://github.com/rust-lang/rust/issues/6163#issuecomment-17443413",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6163",
    "id": 17443413,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NDQzNDEz",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-04T23:56:07Z",
    "updated_at": "2013-05-04T23:56:07Z",
    "body": "@glehel thanks for the comments.\n\nMaking `fail!` propagate it's argument is an idea I support. If it's to be used to handle arbitrary error types then it requires some sort of dynamic typing that we don't have yet.\n\nRelying on `try` for error handling in this case is viewed by some as too risky - it may never be fast enough. They would like to be able to recover without crossing the task boundary.\n\nBeing able to recover from a close error is a good argument for the `close` method.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17443413/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17443572",
    "html_url": "https://github.com/rust-lang/rust/issues/6163#issuecomment-17443572",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6163",
    "id": 17443572,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NDQzNTcy",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-05T00:11:02Z",
    "updated_at": "2013-05-05T00:11:02Z",
    "body": "On Sat, May 4, 2013 at 7:56 PM, Brian Anderson notifications@github.comwrote:\n\n> @glehel https://github.com/glehel thanks for the comments.\n> \n> Making fail! propagate it's argument is an idea I support. If it's to be\n> used to handle arbitrary error types then it requires some sort of dynamic\n> typing that we don't have yet.\n> \n> Relying on try for error handling in this case is viewed by some as too\n> risky - it may never be fast enough. They would like to be able to recover\n> without crossing the task boundary.\n> \n> Being able to recover from a close error is a good argument for the closemethod.\n\nAFAIK, you can check for any errors that would happen on `close` with a\n`flush` method on all the platforms Rust runs on.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17443572/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17450315",
    "html_url": "https://github.com/rust-lang/rust/issues/6163#issuecomment-17450315",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6163",
    "id": 17450315,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NDUwMzE1",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-05T11:22:27Z",
    "updated_at": "2013-05-05T11:22:27Z",
    "body": "@brson right, making `try()` fast enough is a precondition for the whole thing (hence \"0.\"). If it can't be done then that's that, need a different plan.\n\n..._although_. If the `Reader`/`Writer`/`Stream` impls for `Result` (as I conjectured under \"Other possibilities\") could be implemented _not_ by wrapping `try()`, but instead directly/natively, then perhaps the whole thing could still be salvaged with most of the benefits intact? In that case the performant way to handle errors (without crossing the task boundary) would just be to use `Result<File, IoError>` rather than `File`. (And then if `try()` does become fast enough at some later point, so much the better.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17450315/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19733234",
    "html_url": "https://github.com/rust-lang/rust/issues/6163#issuecomment-19733234",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6163",
    "id": 19733234,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzMzMjM0",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-20T06:34:27Z",
    "updated_at": "2013-06-20T06:34:27Z",
    "body": "Won't be done for 0.7\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19733234/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24169069",
    "html_url": "https://github.com/rust-lang/rust/issues/6163#issuecomment-24169069",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6163",
    "id": 24169069,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MTY5MDY5",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-10T15:22:10Z",
    "updated_at": "2013-09-10T15:22:10Z",
    "body": "Triage: nothing particularly to say, although the new `std::rt::io` uses conditions more than the old one; I believe the exact arrangement is still fluid so I can only assume this bug is still relevant.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24169069/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
