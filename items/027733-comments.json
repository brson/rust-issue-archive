[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/140978092",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-140978092",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 140978092,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MDk3ODA5Mg==",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-17T06:11:54Z",
    "updated_at": "2015-09-17T06:11:54Z",
    "body": "I believe @nikomatsakis has mentioned that he's found a use for these methods at some point, but I can't remember what those uses were off the top of my head.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/140978092/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141078391",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-141078391",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 141078391,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MTA3ODM5MQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-17T13:11:15Z",
    "updated_at": "2015-09-17T13:11:15Z",
    "body": "I've never used this pattern in Rust, but in previous lives I've been in the situation where I had a graph that was supposed to be acyclic. I was walking the graph, acquiring locks on the nodes as I went. This _should_ not result in deadlock. The problem was that the graph was constructed from untrusted user input, and hence a deadlock was _possible_ if the input was in error. This was neatly solved by using a 'try lock' structure, such that whenever we failed to acquire a lock, we could infer that the graph was potentially cyclic (and, if so, report an error). I can easily imagine a similar scenario arising with `RefCell`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141078391/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/142960216",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-142960216",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 142960216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0Mjk2MDIxNg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-24T15:18:56Z",
    "updated_at": "2015-09-24T15:18:56Z",
    "body": "This issue is now entering its cycle-long FCP for stabilization in 1.5\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/142960216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150050105",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-150050105",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 150050105,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MDA1MDEwNQ==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-21T23:11:06Z",
    "updated_at": "2015-10-21T23:11:06Z",
    "body": "I argued in the meeting today that we should instead opt to break the fallible/infallible convention and just have `try_` versions of the borrow methods.\n\nGeneral ambivalence about this problem. This will remain unstable for at least one more release.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150050105/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150058212",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-150058212",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 150058212,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MDA1ODIxMg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-22T00:05:33Z",
    "updated_at": "2015-10-22T00:05:33Z",
    "body": "The libs team discussed this during triage today and the decision was to punt to a future FCP.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150058212/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150269681",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-150269681",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 150269681,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MDI2OTY4MQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-22T15:54:30Z",
    "updated_at": "2015-10-22T15:54:30Z",
    "body": "I find the \"borrow-state\" version rather annoying to use in practice. For\nexample, the other day I was writing a `Debug` impl and I wanted to grab a\nrefcell for reading -- but it's just a `Debug` impl, so I didn't want to\ncause a panic by doing so. Checking against `borrow_state` was annoying\nenough to write that I decided to just call `borrow` instead because I\ndidn't think it likely to cause a problem. `try_borrow` would have been\njust what I wanted.\n\nOn Wed, Oct 21, 2015 at 5:06 PM, Alex Crichton notifications@github.com\nwrote:\n\n> The libs team discussed this during triage today and the decision was to\n> punt to a future FCP.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/rust-lang/rust/issues/27733#issuecomment-150058212.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150269681/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150501365",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-150501365",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 150501365,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MDUwMTM2NQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-23T08:00:04Z",
    "updated_at": "2015-10-23T08:00:04Z",
    "body": "+1 for one method returning `Option<T>` instead of two methods returning `bool` and `T`. It is generally an idiomatic pattern. (`BorrowState` is slightly more than `bool`, but the same idea applies.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150501365/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150558328",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-150558328",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 150558328,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MDU1ODMyOA==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-23T12:26:37Z",
    "updated_at": "2015-10-23T12:26:37Z",
    "body": "So to be clear here, the issue at hand is that we long ago settled on a simple convention to avoid combinatoric bloat:\n\n> Either you expose a panicking version, or you expose a checked version. Not both.\n\nThis stance is strongly championed by @alexcrichton and @aturon, and for good reason! I don't want to live in a world with Vec::try_insert, try_remove, try_swap_remove, ...etc.\n\n_However_ I maintain that all good conventions exist to be broken! Most obviously, we break this convention with indexing ([and soon, slicing!](https://github.com/rust-lang/rfcs/pull/1325)). Part of this is that indexing and slicing are _so_ fundamental that they deserve several ways to do them. Indexing in particular has 4:\n- get_unchecked\n- get\n- `[ ]`\n- iter\n\nAt the heart of this convention is \"decide if this is panicky or should be checked\". For most interfaces we deem that it should be checked, because that's the strictly more general operation. There are two reasons to use panciky ops:\n- The property to uphold can be trivially checked in a pinch.\n- Everyone expects the op to always succeed and/or would have nothing to do if it didn't. (it would just always be `unwrap`'d)\n\nIndex-based ops like insert/remove have _both_ of these properties, and are therefore a great candidate for panicky ops.\n\nRefCell only has the second condition. It would be an ergonomic nightmare to have to unwrap ever borrow, so we went for panicky. However there's no way to introspect its state to check in a pinch.\n\nIn deference to The Convention, the original solution was to make it so it _could_ be trivially checked, but the problem here is that _checking is totally useless unless you're about to `get`_ (unlike looking at the len of an array). Therefore, I believe it makes the most sense to break convention and just provide a checked version of the op. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150558328/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150600957",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-150600957",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 150600957,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MDYwMDk1Nw==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-23T15:03:46Z",
    "updated_at": "2015-10-23T15:03:46Z",
    "body": "@gankro I definitely think `try` variants would be preferable to `borrow_state`. In general, I think that the decision to \"expose the state you need to check whether an operation is legal\" versus offering \"try\" variants is a tricky one (if there was one main take-away from our attempts to make a rule about panic-vs-check, it is that there is no one rule that really works in all cases). Exposing state has a lot of downsides:\n1. It doesn't always work (e.g., locks and channels, where the check must be performed concurrently with the operation itself).\n2. It is not very DRY. The caller has to \"re-code\" the logic as to when the operation is legal. e.g., I have to write `borrow_state() != BorrowState::Write` instead of `try_read`, and thus I wind up encoding that \"the Write state is the only way to fail to read\".\n3. For the same reason, it is not efficient, as the check must be repeated both outside and inside the operation.\n4. Again for the same reason, it can be less forward compatible, as it exposes internal state that might otherwise be opaque (like the state of the `RefCell`).\n5. Ergonomically, it is often just less good. It's nice to be able to do things like `if let Some(value) = cell.try_read()`, for example.\n\nThe downside of \"try\" variants, of course, is just that you need to have one per function, typically, whereas you only need one method to expose the state.\n\nI wanted to expand on point 4, about forwards compatibility. I could imagine wanting to extend `RefCell` in the future with new states: for example, we might want to add a `take` method that lets you swap the value out (I have frequently wanted this; I know you can do it with `RefCell<Option<T>>` but it's annoying and inefficient). In that case, there would be a new state (`Taken`), but that would be a breaking change, so it is ruled out. In contrast, if we just had `try_read`, there'd be no problem.\n\nAnother way to address concerns 2 and 4 (but not 3) by making the borrow-state opaque and have it offer methods like `can_read`, `can_write`, etc. That'd also improve ergonomics, as `if cell.borrow_state().can_read()` is better than what we have today (no imports required!). But it just seems like putting principle over practical, as you still need one method per operation, and returning `Option` is strictly better imo.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150600957/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150634453",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-150634453",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 150634453,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MDYzNDQ1Mw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-23T17:03:33Z",
    "updated_at": "2015-10-23T17:03:33Z",
    "body": "To be clear, I'm not advocating that borrow_state is _more ergonomic_ than `try_borrow`, to me that's not the issue at hand. I would far prefer to have an ironclad convention that `foo` and `try_foo` are never provided for situations like this. This sort of convention means you _never_ need to ask yourself \"do I have both?\", it's simply always a matter of \"which do I choose?\" The answer to that question is the result-returning version 99% of the time as well because it's quite rare to have a case like `RefCell` where it's only expected to fail in terms of a programmer error. These simple conventions, though, (and sticking to them), I personally believe is far more of a gain over a slightly-more-ergonomic alternative here which is incredibly rarely called.\n\nI see @Gankro's slicing/indexing examples above as separate because they all deal with `Index`, which is documented as \"panicking\" (e.g. the implementation on maps). All methods related to indexing never panic.\n\n@nikomatsakis I definitely agree with many of your points, and it's why this is an extreme case for `RefCell`. When \"check the state\" doesn't always work (like with channels), nothing panics and it all instead returns a result. I would be surprised if optimized code were actually less efficient, certainly the codegen is not as good, but the key part to remember is that the \"panic by default\" convention is only chosen if it's expected to be the 99.9% of the time use case. If you only call the \"try borrow\" 0.1% of the time it probably doesn't matter that much that it's the most optimized thing in the world.\n\nI also disagree that it's a cliff in terms of ergnomics, e.g. compare:\n\n``` rust\nif let Some(borrow) = cell.try_borrow_mut() {\n    // ...\n}\n```\n\nand\n\n``` rust\nif let BorrowState::None = cell.borrow_state() {\n   // .. work with cell.borrow_mut()\n}\n```\n\nAgain, though, I'm not claiming it to be more ergonomic, I just want to point out that it's not necessarily the end of the world. This is especially compounded by the fact that we're talking about the 0.1% use case, if it were expected to be called quite a bit then we'd of course choose the more ergonomic version. I think your suggestion about method accessors would also be fine as it'd even reduce the number of imports!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150634453/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150653965",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-150653965",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 150653965,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MDY1Mzk2NQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-23T18:21:31Z",
    "updated_at": "2015-10-26T16:22:15Z",
    "body": "I think the real comparison is:\n\n``` rust\nif let Some(borrow) = cell.try_borrow_mut() {\n}\n```\n\nand\n\n``` rust\nuse std::cell::BorrowState;\n...\nif BorrowState::None == cell.borrow_state() {\n    let borrow = cell.borrow_mut();\n    ..\n}\n```\n\nI certainly agree it's not the end of the world, but I still think it kind\nof sucks. I think ultimately I just don't value ironclad rules as much as\nyou do. Certainly we should strive to return `Option` or `Result` whenever\nwe can. But if we choose to violate purity in favor of ergonomics, why not\ngo all the way?\n\nI also disagree that this use case is 0.1%. I agree that detecting a cycle,\nas I first subjected, is unusual. But I think that wanting to dump out the\ncontents of a `RefCell` in a `Debug` impl, or some other case where you\ncan't really tell what it's state is, is less unusual. Maybe as much as\n0.2%!\n\nHowever, ultimately, I would perhaps be mollified if we removed the borrow\nstate enum and replaced it with something opaque that just features\n`can_read`, `can_write` methods. This way we can still extend `RefCell` to\nhave more states in the future. I think the current `BorrowState` is too\nlimiting.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150653965/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/176618866",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-176618866",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 176618866,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NjYxODg2Ng==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-29T07:26:31Z",
    "updated_at": "2016-01-29T07:26:31Z",
    "body": "Although I nominated this for stabilization in 1.8, the libs team decided against it due to the double-check on the borrow flag. We'd instead like to explore methods like `try_borrow`\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/176618866/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/256701491",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-256701491",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 256701491,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NjcwMTQ5MQ==",
    "user": {
      "login": "cbreeden",
      "id": 12069845,
      "node_id": "MDQ6VXNlcjEyMDY5ODQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/12069845?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cbreeden",
      "html_url": "https://github.com/cbreeden",
      "followers_url": "https://api.github.com/users/cbreeden/followers",
      "following_url": "https://api.github.com/users/cbreeden/following{/other_user}",
      "gists_url": "https://api.github.com/users/cbreeden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cbreeden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cbreeden/subscriptions",
      "organizations_url": "https://api.github.com/users/cbreeden/orgs",
      "repos_url": "https://api.github.com/users/cbreeden/repos",
      "events_url": "https://api.github.com/users/cbreeden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cbreeden/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-27T16:44:09Z",
    "updated_at": "2016-10-27T16:44:09Z",
    "body": "Isn't this code a race condition, in that it still may panic?\n\n```\nuse std::cell::BorrowState;\n\nif BorrowState::None == cell.borrow_state() {\n    let borrow = cell.borrow_mut();\n    /* use borrow */\n}\n```\n\nI'm not saying that `BorrowState` isn't useful, but I'm not sure if it would be useful for this case.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/256701491/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/256705597",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-256705597",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 256705597,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NjcwNTU5Nw==",
    "user": {
      "login": "jonas-schievink",
      "id": 1786438,
      "node_id": "MDQ6VXNlcjE3ODY0Mzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonas-schievink",
      "html_url": "https://github.com/jonas-schievink",
      "followers_url": "https://api.github.com/users/jonas-schievink/followers",
      "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions",
      "organizations_url": "https://api.github.com/users/jonas-schievink/orgs",
      "repos_url": "https://api.github.com/users/jonas-schievink/repos",
      "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonas-schievink/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-27T16:58:17Z",
    "updated_at": "2016-10-27T16:58:17Z",
    "body": "@cbreeden `RefCell` can't be accessed by multiple threads at the same time though (it doesn't implement `Sync`)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/256705597/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/256705895",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-256705895",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 256705895,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NjcwNTg5NQ==",
    "user": {
      "login": "cbreeden",
      "id": 12069845,
      "node_id": "MDQ6VXNlcjEyMDY5ODQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/12069845?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cbreeden",
      "html_url": "https://github.com/cbreeden",
      "followers_url": "https://api.github.com/users/cbreeden/followers",
      "following_url": "https://api.github.com/users/cbreeden/following{/other_user}",
      "gists_url": "https://api.github.com/users/cbreeden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cbreeden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cbreeden/subscriptions",
      "organizations_url": "https://api.github.com/users/cbreeden/orgs",
      "repos_url": "https://api.github.com/users/cbreeden/repos",
      "events_url": "https://api.github.com/users/cbreeden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cbreeden/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-27T16:59:26Z",
    "updated_at": "2016-10-27T16:59:26Z",
    "body": "oh right, thanks for clarifying that :)\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/256705895/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257726466",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-257726466",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 257726466,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NzcyNjQ2Ng==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-01T23:10:34Z",
    "updated_at": "2016-11-01T23:10:34Z",
    "body": "@rfcbot fcp close\n\nWe've added/stabilized `try_borrow` and `try_borrow_mut`, these should no longer be needed\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257726466/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257733203",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-257733203",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 257733203,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NzczMzIwMw==",
    "user": {
      "login": "rfcbot",
      "id": 20760818,
      "node_id": "MDQ6VXNlcjIwNzYwODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20760818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rfcbot",
      "html_url": "https://github.com/rfcbot",
      "followers_url": "https://api.github.com/users/rfcbot/followers",
      "following_url": "https://api.github.com/users/rfcbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/rfcbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rfcbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rfcbot/subscriptions",
      "organizations_url": "https://api.github.com/users/rfcbot/orgs",
      "repos_url": "https://api.github.com/users/rfcbot/repos",
      "events_url": "https://api.github.com/users/rfcbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rfcbot/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-01T23:48:52Z",
    "updated_at": "2016-11-12T01:11:23Z",
    "body": "Team member @alexcrichton has proposed to close this. The next step is review by the rest of the tagged teams:\n- [x] @BurntSushi\n- [x] @Kimundi\n- [x] @alexcrichton\n- [x] @aturon\n- [x] @brson\n- [x] @sfackler\n\nNo concerns currently listed.\n\nOnce these reviewers reach consensus, this will enter its final comment period. If you spot a major issue that hasn't been raised at any point in this process, please speak up!\n\nSee [this document](https://github.com/dikaiosune/rust-dashboard/blob/master/RFCBOT.md) for info about what commands tagged team members can give me.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257733203/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257967969",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-257967969",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 257967969,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1Nzk2Nzk2OQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-02T19:07:58Z",
    "updated_at": "2016-11-02T19:07:58Z",
    "body": "\ud83d\udc4d from me to removing in favor of `try_borrow` and `try_borrow_mut`\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257967969/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/260090717",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-260090717",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 260090717,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDA5MDcxNw==",
    "user": {
      "login": "rfcbot",
      "id": 20760818,
      "node_id": "MDQ6VXNlcjIwNzYwODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20760818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rfcbot",
      "html_url": "https://github.com/rfcbot",
      "followers_url": "https://api.github.com/users/rfcbot/followers",
      "following_url": "https://api.github.com/users/rfcbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/rfcbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rfcbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rfcbot/subscriptions",
      "organizations_url": "https://api.github.com/users/rfcbot/orgs",
      "repos_url": "https://api.github.com/users/rfcbot/repos",
      "events_url": "https://api.github.com/users/rfcbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rfcbot/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-12T01:11:23Z",
    "updated_at": "2016-11-12T01:11:23Z",
    "body": ":bell: **This is now entering its final comment period**, as per the [review above](https://github.com/rust-lang/rust/issues/27733#issuecomment-257733203). :bell:\n\n_psst @alexcrichton, I wasn't able to add the `final-comment-period` label, please do so._\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/260090717/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/262122680",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-262122680",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 262122680,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjEyMjY4MA==",
    "user": {
      "login": "rfcbot",
      "id": 20760818,
      "node_id": "MDQ6VXNlcjIwNzYwODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20760818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rfcbot",
      "html_url": "https://github.com/rfcbot",
      "followers_url": "https://api.github.com/users/rfcbot/followers",
      "following_url": "https://api.github.com/users/rfcbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/rfcbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rfcbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rfcbot/subscriptions",
      "organizations_url": "https://api.github.com/users/rfcbot/orgs",
      "repos_url": "https://api.github.com/users/rfcbot/repos",
      "events_url": "https://api.github.com/users/rfcbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rfcbot/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-22T01:38:49Z",
    "updated_at": "2016-11-22T01:38:49Z",
    "body": "The final comment period is now complete.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/262122680/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/473238229",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-473238229",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 473238229,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MzIzODIyOQ==",
    "user": {
      "login": "nox",
      "id": 123095,
      "node_id": "MDQ6VXNlcjEyMzA5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/123095?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nox",
      "html_url": "https://github.com/nox",
      "followers_url": "https://api.github.com/users/nox/followers",
      "following_url": "https://api.github.com/users/nox/following{/other_user}",
      "gists_url": "https://api.github.com/users/nox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nox/subscriptions",
      "organizations_url": "https://api.github.com/users/nox/orgs",
      "repos_url": "https://api.github.com/users/nox/repos",
      "events_url": "https://api.github.com/users/nox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nox/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-15T10:39:30Z",
    "updated_at": "2019-03-15T10:39:30Z",
    "body": "It turns out I actually have a use case in Servo where I can't use `try_borrow` or `try_borrow_mut` but still need to know the refcell's borrow state. What would be the way to go to try to reintroduce it here? Make a PR adding it back?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/473238229/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/481954817",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-481954817",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 481954817,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MTk1NDgxNw==",
    "user": {
      "login": "KodrAus",
      "id": 6721458,
      "node_id": "MDQ6VXNlcjY3MjE0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6721458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/KodrAus",
      "html_url": "https://github.com/KodrAus",
      "followers_url": "https://api.github.com/users/KodrAus/followers",
      "following_url": "https://api.github.com/users/KodrAus/following{/other_user}",
      "gists_url": "https://api.github.com/users/KodrAus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/KodrAus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KodrAus/subscriptions",
      "organizations_url": "https://api.github.com/users/KodrAus/orgs",
      "repos_url": "https://api.github.com/users/KodrAus/repos",
      "events_url": "https://api.github.com/users/KodrAus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/KodrAus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-04-11T03:51:23Z",
    "updated_at": "2019-04-11T04:09:40Z",
    "body": "We've re-introduced this API as the unstable `try_borrow_unguarded` method in #59211 so I'll re-open this issue.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/481954817/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/492586722",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-492586722",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 492586722,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MjU4NjcyMg==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-05-15T09:50:33Z",
    "updated_at": "2019-05-15T09:50:33Z",
    "body": "Servo has been using this since https://github.com/servo/servo/pull/23196 to add a runtime check to some unsafe code, as discussed in PR https://github.com/rust-lang/rust/pull/59211. Stabilizing would help do more of the same in libraries that also have users on Stable.\r\n\r\n@rfcbot fcp merge",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/492586722/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/492589457",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-492589457",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 492589457,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MjU4OTQ1Nw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-05-15T09:58:23Z",
    "updated_at": "2019-05-15T09:58:23Z",
    "body": "It looks like rfcbot doesn\u2019t want to do FCP again in the same thread, even after removing labels. I\u2019ve proposed FCP in a stabilization PR: https://github.com/rust-lang/rust/pull/60850",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/492589457/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/520791800",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-520791800",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 520791800,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDc5MTgwMA==",
    "user": {
      "login": "jonas-schievink",
      "id": 1786438,
      "node_id": "MDQ6VXNlcjE3ODY0Mzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonas-schievink",
      "html_url": "https://github.com/jonas-schievink",
      "followers_url": "https://api.github.com/users/jonas-schievink/followers",
      "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions",
      "organizations_url": "https://api.github.com/users/jonas-schievink/orgs",
      "repos_url": "https://api.github.com/users/jonas-schievink/repos",
      "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonas-schievink/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-08-13T11:10:06Z",
    "updated_at": "2019-08-13T11:10:06Z",
    "body": "> Add a concrete, motivating example to the documentation\r\n\r\nIt looks like this has not yet been addressed, but all the features discussed here are already stabilized.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/520791800/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/520799175",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-520799175",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 520799175,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDc5OTE3NQ==",
    "user": {
      "login": "nox",
      "id": 123095,
      "node_id": "MDQ6VXNlcjEyMzA5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/123095?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nox",
      "html_url": "https://github.com/nox",
      "followers_url": "https://api.github.com/users/nox/followers",
      "following_url": "https://api.github.com/users/nox/following{/other_user}",
      "gists_url": "https://api.github.com/users/nox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nox/subscriptions",
      "organizations_url": "https://api.github.com/users/nox/orgs",
      "repos_url": "https://api.github.com/users/nox/repos",
      "events_url": "https://api.github.com/users/nox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nox/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-08-13T11:36:44Z",
    "updated_at": "2019-08-13T11:36:44Z",
    "body": "> It looks like this has not yet been addressed, but all the features discussed here are already stabilized.\r\n\r\nI'm not a technical writer and I don't see how to reduce the main use case into something smaller than how we are using this in Servo.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/520799175/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/520988549",
    "html_url": "https://github.com/rust-lang/rust/issues/27733#issuecomment-520988549",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27733",
    "id": 520988549,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDk4ODU0OQ==",
    "user": {
      "login": "jonas-schievink",
      "id": 1786438,
      "node_id": "MDQ6VXNlcjE3ODY0Mzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonas-schievink",
      "html_url": "https://github.com/jonas-schievink",
      "followers_url": "https://api.github.com/users/jonas-schievink/followers",
      "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions",
      "organizations_url": "https://api.github.com/users/jonas-schievink/orgs",
      "repos_url": "https://api.github.com/users/jonas-schievink/repos",
      "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonas-schievink/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-08-13T20:06:51Z",
    "updated_at": "2019-08-13T20:06:51Z",
    "body": "Sure, no problem. Just noting the inconsistency. I guess it's fine to close this tracking issue though, since everything tracked is now stable.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/520988549/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
