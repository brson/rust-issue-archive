[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/78091389",
    "html_url": "https://github.com/rust-lang/rust/issues/23233#issuecomment-78091389",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23233",
    "id": 78091389,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MDkxMzg5",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-10T16:30:50Z",
    "updated_at": "2015-03-10T16:30:50Z",
    "body": "The symptoms here are a bit of a red herring, if you take a look at the `strace` output the file descriptor 3 in the child process is not the file descriptor of the `File` in the parent process. Instead, it is:\n\n```\n[pid  6521] openat(AT_FDCWD, \"/dev/fd\", O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) = 3\n[pid  6521] getdents(3, /* 6 entries */, 32768) = 144\n[pid  6521] getdents(3, /* 0 entries */, 32768) = 0\n[pid  6521] close(3)                    = 0\n[pid  6521] fstat(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 24), ...}) = 0\n[pid  6521] mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f64121c1000\n[pid  6521] write(1, \"0  1  2  3\\n\", 110  1  2  3\n) = 11\n```\n\nWe [have specific code](https://github.com/rust-lang/rust/blob/5f47c0613ed4eb46fca3633c1297364c09e5e451/src/libstd/sys/unix/process2.rs#L303-L308) to prevent leaking file descriptors, and it is [known to not be bullet proof](https://github.com/rust-lang/rust/issues/12148) and is [being tracked](https://github.com/rust-lang/rfcs/issues/941). In light of this information I'm going to close this in favor of the [RFC tracking issue](https://github.com/rust-lang/rfcs/issues/941). Thanks for the report though!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/78091389/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/78122696",
    "html_url": "https://github.com/rust-lang/rust/issues/23233#issuecomment-78122696",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23233",
    "id": 78122696,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MTIyNjk2",
    "user": {
      "login": "DemiMarie",
      "id": 6395399,
      "node_id": "MDQ6VXNlcjYzOTUzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6395399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DemiMarie",
      "html_url": "https://github.com/DemiMarie",
      "followers_url": "https://api.github.com/users/DemiMarie/followers",
      "following_url": "https://api.github.com/users/DemiMarie/following{/other_user}",
      "gists_url": "https://api.github.com/users/DemiMarie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DemiMarie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DemiMarie/subscriptions",
      "organizations_url": "https://api.github.com/users/DemiMarie/orgs",
      "repos_url": "https://api.github.com/users/DemiMarie/repos",
      "events_url": "https://api.github.com/users/DemiMarie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DemiMarie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-10T18:56:47Z",
    "updated_at": "2015-03-10T18:56:47Z",
    "body": "Alex Crichton notifications@github.com writes:\n\n> The symptoms here are a bit of a red herring, if you take a look at the strace output the file descriptor 3 in the child process is not the file descriptor of the File in the parent\n> process. Instead, it is:\n> \n> [pid  6521] openat(AT_FDCWD, \"/dev/fd\", O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) = 3\n> [pid  6521] getdents(3, /\\* 6 entries _/, 32768) = 144\n> [pid  6521] getdents(3, /_ 0 entries */, 32768) = 0\n> [pid  6521] close(3)                    = 0\n> [pid  6521] fstat(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 24), ...}) = 0\n> [pid  6521] mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f64121c1000\n> [pid  6521] write(1, \"0  1  2  3\\n\", 110  1  2  3\n> ) = 11\n> \n> We have specific code to prevent leaking file descriptors, and it is known to not be bullet proof and is being tracked. In light of this information I'm going to close this in favor of\n> the RFC tracking issue. Thanks for the report though!\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.*\n> I knew that this FD was the FD of the `/dev/fd` directory.  I was just\n> checking to make sure that there is no regression.\n\nSorry for the confusion.  I knew about a nasty FD leak to child\nprocesses in Firefox and wanted to make sure that Rust is safe.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/78122696/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/78136152",
    "html_url": "https://github.com/rust-lang/rust/issues/23233#issuecomment-78136152",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23233",
    "id": 78136152,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MTM2MTUy",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-10T20:04:27Z",
    "updated_at": "2015-03-10T20:04:27Z",
    "body": "No problem!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/78136152/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
