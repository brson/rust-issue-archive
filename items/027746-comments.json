[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130405774",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-130405774",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 130405774,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDQwNTc3NA==",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-12T18:34:48Z",
    "updated_at": "2015-08-12T18:34:48Z",
    "body": "cc @SimonSapin \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130405774/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130816702",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-130816702",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 130816702,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDgxNjcwMg==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-13T19:40:46Z",
    "updated_at": "2015-08-13T19:40:46Z",
    "body": "This is the kind of thing (unlike say `ref_slice` #27774) that is impossible to do reasonably outside of `std`. (Where \u201cunreasonable\u201d is guessing struct layout to access private fields.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130816702/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130818278",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-130818278",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 130818278,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDgxODI3OA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-13T19:46:27Z",
    "updated_at": "2015-08-13T19:46:27Z",
    "body": "(Ok, thinking a bit more about it, this may not be true. Something like https://github.com/Kimundi/owning-ref-rs/ could, using `(Ref<'a, T>, *const U)` and `unsafe` code to dereference the raw pointer, have equivalent functionality with a different API (separate type) and 3 words instead of 2 per reference.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130818278/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162957412",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-162957412",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 162957412,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2Mjk1NzQxMg==",
    "user": {
      "login": "mbrt",
      "id": 405934,
      "node_id": "MDQ6VXNlcjQwNTkzNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/405934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mbrt",
      "html_url": "https://github.com/mbrt",
      "followers_url": "https://api.github.com/users/mbrt/followers",
      "following_url": "https://api.github.com/users/mbrt/following{/other_user}",
      "gists_url": "https://api.github.com/users/mbrt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mbrt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mbrt/subscriptions",
      "organizations_url": "https://api.github.com/users/mbrt/orgs",
      "repos_url": "https://api.github.com/users/mbrt/repos",
      "events_url": "https://api.github.com/users/mbrt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mbrt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-08T17:41:40Z",
    "updated_at": "2015-12-08T17:41:40Z",
    "body": "What about making `RefCell::map` stable? It has good use cases and it is clearly usable as-is.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162957412/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172883632",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-172883632",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 172883632,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3Mjg4MzYzMg==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-19T15:13:53Z",
    "updated_at": "2016-01-19T15:13:53Z",
    "body": "I\u2019d like to nominate at least `Ref::map` and `RefMut::map` for stabilization.\n\n`filter_map`\u2019s functionality can be safely built on top of it with a performance cost (testing the presence of the mapped thing twice). For example:\n\n``` rust\nfn borrow_get<'a>(hashmap: &'a RefCell<HashMap<String, String>>, key: &str) \n                  -> Option<Ref<'a String>> {\n    let hashmap: = hashmap.borrow();\n    if hashmap:.contains_key(key) {  // Duplicated hash table lookup.\n        Some(Ref::map(|hashmap| {\n            hashmap[key]  // panic!() for missing key unlikely to be optimized away\n        }))\n    } else {\n        None\n    }\n}\n```\n\nIt\u2019s probably possible to do it unsafely without the run-time cost with raw pointers. (But still less risky than guessing the memory layout of `Ref` or `RefMut`.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172883632/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172899746",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-172899746",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 172899746,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3Mjg5OTc0Ng==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-19T16:03:56Z",
    "updated_at": "2016-01-19T16:03:56Z",
    "body": "For future reference, here is fully generic `filter_map` built on top of `map` using raw pointers. I\u2019m fairly confident that it\u2019s safe.\n\n``` rust\nuse std::cell::{Ref, RefMut};\n\npub fn ref_filter_map<\n    T: ?Sized,\n    U: ?Sized,\n    F: FnOnce(&T) -> Option<&U>\n>(orig: Ref<T>, f: F) -> Option<Ref<U>> {\n    f(&orig)\n        .map(|new| new as *const U)\n        .map(|raw| Ref::map(orig, |_| unsafe { &*raw }))\n}\n\npub fn ref_mut_filter_map<\n    T: ?Sized,\n    U: ?Sized,\n    F: FnOnce(&mut T) -> Option<&mut U>\n>(mut orig: RefMut<T>, f: F) -> Option<RefMut<U>> {\n    f(&mut orig)\n        .map(|new| new as *mut U)\n        .map(|raw| RefMut::map(orig, |_| unsafe { &mut *raw }))\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172899746/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/176619021",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-176619021",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 176619021,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NjYxOTAyMQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-29T07:27:14Z",
    "updated_at": "2016-01-29T07:27:14Z",
    "body": ":bell: This issue is now entering its cycle **final comment period** to be handled in 1.8 :bell:\n\nWe're specifically considering stabilizing `map` and deprecating `filter_map`. We're also willing to stabilize `map` on the lock-related guards as well so long as they land soon.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/176619021/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/180284718",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-180284718",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 180284718,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MDI4NDcxOA==",
    "user": {
      "login": "reem",
      "id": 4745181,
      "node_id": "MDQ6VXNlcjQ3NDUxODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4745181?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reem",
      "html_url": "https://github.com/reem",
      "followers_url": "https://api.github.com/users/reem/followers",
      "following_url": "https://api.github.com/users/reem/following{/other_user}",
      "gists_url": "https://api.github.com/users/reem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reem/subscriptions",
      "organizations_url": "https://api.github.com/users/reem/orgs",
      "repos_url": "https://api.github.com/users/reem/repos",
      "events_url": "https://api.github.com/users/reem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reem/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-05T10:19:43Z",
    "updated_at": "2016-02-05T10:19:43Z",
    "body": "As just noted in #30834:\n\nI've discovered a safety hole in `MutexGuard::map` - it is not safe in combination with `Condvar`, since the \"inner\" borrow can be invalidated by another thread taking the lock during a `Condvar::wait` see: http://is.gd/RM038X.\n\nThis is not a problem with the `RwLock` guard methods, since the `RwLock` guards cannot be used with a `Condvar`.\n\nIt would be possible to provide a similar, but safe, API by defining a separate type for \"mapped\" mutex guards that can't be used with a `Condvar`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/180284718/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/180458770",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-180458770",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 180458770,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MDQ1ODc3MA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-05T17:37:14Z",
    "updated_at": "2016-02-05T17:37:14Z",
    "body": "With `MutexGuard::map` being removed in #31428, we may wish to _also_ remove the `RwLock*Guard::map` functions even though they're not used with `CondVar` at this time. Windows actually has the ability to wait on condvars with rwlocks via [`SleepConditionVariableSRW`](https://msdn.microsoft.com/en-us/library/windows/desktop/ms686304%28v=vs.85%29.aspx), which we also use internally. That seems like it would be a viable platform-specific extension, and perhaps even an extension we could support via other trickery. (I think C++ has something like `condition_variable_any`?)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/180458770/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/180461094",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-180461094",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 180461094,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MDQ2MTA5NA==",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-05T17:41:29Z",
    "updated_at": "2016-02-05T17:41:29Z",
    "body": "@alexcrichton Certainly we shouldn't stabilize them, and I tend to agree that we should probably remove them and do this in a more considered way.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/180461094/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/180502098",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-180502098",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 180502098,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MDUwMjA5OA==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-05T19:02:43Z",
    "updated_at": "2016-02-05T19:02:43Z",
    "body": "If you decide to keep these functions (or at least the one on RwLock I guess), the lifetimes should be removed from the closure like in `Ref::map`, or at least not made the same as the underlying container. By using the same lifetime as the container, the reference can escape from the closure. See: https://github.com/rust-lang/rust/pull/25747#issuecomment-105175235\n\nhttp://is.gd/vUbM4D (the example in the link above modified for RwLock currently results in use-after-free).\nhttp://is.gd/f0AtWL (using a function with the signature changed fails to compile)\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/180502098/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/180642799",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-180642799",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 180642799,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MDY0Mjc5OQ==",
    "user": {
      "login": "reem",
      "id": 4745181,
      "node_id": "MDQ6VXNlcjQ3NDUxODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4745181?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reem",
      "html_url": "https://github.com/reem",
      "followers_url": "https://api.github.com/users/reem/followers",
      "following_url": "https://api.github.com/users/reem/following{/other_user}",
      "gists_url": "https://api.github.com/users/reem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reem/subscriptions",
      "organizations_url": "https://api.github.com/users/reem/orgs",
      "repos_url": "https://api.github.com/users/reem/repos",
      "events_url": "https://api.github.com/users/reem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reem/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-06T01:04:34Z",
    "updated_at": "2016-02-06T01:14:39Z",
    "body": "I need a `RwLock` that can be waited on for other reasons, so I implemented an equivalent to C++17s `std::shared_mutex` which is a fair reader-writer lock implemented using a mutex and two condvars.\n\nI went ahead and also demoed a (I believe) safe API for `map`/`option_map`/`result_map` in the same crate based on having a different type for mappable and waitable guards. I think we could apply the same strategy to both `RwLock` and `Mutex` in std.\n\nCode: https://github.com/reem/rust-shared-mutex\nMappable Guards: https://github.com/reem/rust-shared-mutex/blob/6dca082c864df3d46fa952ff89f7c813aa7b2012/src/lib.rs#L379-L504\n\nEDIT: Also submitted #31440 to fix the safety hole noted by @whataloadofwhat and update the `unstable` reason to include a note about a possible bad interaction with `Condvar`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/180642799/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/189028758",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-189028758",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 189028758,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4OTAyODc1OA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-25T23:14:27Z",
    "updated_at": "2016-02-25T23:14:27Z",
    "body": "The libs team discussed this during triage yesterday and the decision was to:\n- Stabilize `Ref::map` and `RefMut::map`\n- Deprecate everything else (if it still exists), including `filter_map`\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/189028758/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221916579",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-221916579",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 221916579,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTkxNjU3OQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-26T16:05:03Z",
    "updated_at": "2016-05-26T16:05:03Z",
    "body": "Reopening as apparently `Ref::clone` is still under this umbrella.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221916579/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221916693",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-221916693",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 221916693,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTkxNjY5Mw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-26T16:05:26Z",
    "updated_at": "2016-05-26T16:05:26Z",
    "body": "Also cc https://github.com/rust-lang/rust/issues/33880, possible unsoundness with that method.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221916693/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257726587",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-257726587",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 257726587,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NzcyNjU4Nw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-01T23:11:15Z",
    "updated_at": "2016-11-01T23:11:15Z",
    "body": "@rfcbot fcp merge\n\nSounds like `Ref::clone` is ready for stabilizing\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257726587/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257733205",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-257733205",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 257733205,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NzczMzIwNQ==",
    "user": {
      "login": "rfcbot",
      "id": 20760818,
      "node_id": "MDQ6VXNlcjIwNzYwODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20760818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rfcbot",
      "html_url": "https://github.com/rfcbot",
      "followers_url": "https://api.github.com/users/rfcbot/followers",
      "following_url": "https://api.github.com/users/rfcbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/rfcbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rfcbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rfcbot/subscriptions",
      "organizations_url": "https://api.github.com/users/rfcbot/orgs",
      "repos_url": "https://api.github.com/users/rfcbot/repos",
      "events_url": "https://api.github.com/users/rfcbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rfcbot/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-01T23:48:53Z",
    "updated_at": "2016-11-12T01:11:23Z",
    "body": "Team member @alexcrichton has proposed to merge this. The next step is review by the rest of the tagged teams:\n- [x] @BurntSushi\n- [x] @Kimundi\n- [x] @alexcrichton\n- [x] @aturon\n- [x] @brson\n- [x] @sfackler\n\nNo concerns currently listed.\n\nOnce these reviewers reach consensus, this will enter its final comment period. If you spot a major issue that hasn't been raised at any point in this process, please speak up!\n\nSee [this document](https://github.com/dikaiosune/rust-dashboard/blob/master/RFCBOT.md) for info about what commands tagged team members can give me.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257733205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/260090718",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-260090718",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 260090718,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDA5MDcxOA==",
    "user": {
      "login": "rfcbot",
      "id": 20760818,
      "node_id": "MDQ6VXNlcjIwNzYwODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20760818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rfcbot",
      "html_url": "https://github.com/rfcbot",
      "followers_url": "https://api.github.com/users/rfcbot/followers",
      "following_url": "https://api.github.com/users/rfcbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/rfcbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rfcbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rfcbot/subscriptions",
      "organizations_url": "https://api.github.com/users/rfcbot/orgs",
      "repos_url": "https://api.github.com/users/rfcbot/repos",
      "events_url": "https://api.github.com/users/rfcbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rfcbot/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-12T01:11:23Z",
    "updated_at": "2016-11-12T01:11:23Z",
    "body": ":bell: **This is now entering its final comment period**, as per the [review above](https://github.com/rust-lang/rust/issues/27746#issuecomment-257733205). :bell:\n\n_psst @alexcrichton, I wasn't able to add the `final-comment-period` label, please do so._\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/260090718/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/262122681",
    "html_url": "https://github.com/rust-lang/rust/issues/27746#issuecomment-262122681",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27746",
    "id": 262122681,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjEyMjY4MQ==",
    "user": {
      "login": "rfcbot",
      "id": 20760818,
      "node_id": "MDQ6VXNlcjIwNzYwODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20760818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rfcbot",
      "html_url": "https://github.com/rfcbot",
      "followers_url": "https://api.github.com/users/rfcbot/followers",
      "following_url": "https://api.github.com/users/rfcbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/rfcbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rfcbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rfcbot/subscriptions",
      "organizations_url": "https://api.github.com/users/rfcbot/orgs",
      "repos_url": "https://api.github.com/users/rfcbot/repos",
      "events_url": "https://api.github.com/users/rfcbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rfcbot/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-22T01:38:49Z",
    "updated_at": "2016-11-22T01:38:49Z",
    "body": "The final comment period is now complete.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/262122681/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
