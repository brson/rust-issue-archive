{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/19898",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/19898/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/19898/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/19898/events",
  "html_url": "https://github.com/rust-lang/rust/pull/19898",
  "id": 52055583,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MjYxMTIyOTQ=",
  "number": 19898,
  "title": "Use control-flow information to improve handling of returns",
  "user": {
    "login": "Aatch",
    "id": 342416,
    "node_id": "MDQ6VXNlcjM0MjQxNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Aatch",
    "html_url": "https://github.com/Aatch",
    "followers_url": "https://api.github.com/users/Aatch/followers",
    "following_url": "https://api.github.com/users/Aatch/following{/other_user}",
    "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions",
    "organizations_url": "https://api.github.com/users/Aatch/orgs",
    "repos_url": "https://api.github.com/users/Aatch/repos",
    "events_url": "https://api.github.com/users/Aatch/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Aatch/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 13,
  "created_at": "2014-12-15T23:52:04Z",
  "updated_at": "2014-12-22T02:55:17Z",
  "closed_at": "2014-12-22T02:53:09Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/19898",
    "html_url": "https://github.com/rust-lang/rust/pull/19898",
    "diff_url": "https://github.com/rust-lang/rust/pull/19898.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/19898.patch",
    "merged_at": "2014-12-22T02:53:09Z"
  },
  "body": "#16081 fixed an issue where a nested return statement would cause incorrect behaviour due to the inner return writing over the return stack slot that had already been written too. However, the check was very broad and picked many cases that wouldn't ever be affected by this issue.\n\nAs a result, the number of allocas increased dramatically and therefore stack-size increased. LLVM is not able to remove all of the extraneous allocas. Any code that had multiple return values in a compound expression at the end of a function (including loops) would be hit by the issue.\n\nThe check now uses a control-flow graph to only consider the case when the inner return is executed conditionally. By itself, this narrowed definition causes #15763 to return, so the control-flow graph is also used to avoid passing the return slot as a destination when the result won't be used.\n\nThis change allows the stack-size of the main rustc task to be reduced to 8MB from 32MB.\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/19898/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/19898/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
