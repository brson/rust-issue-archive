[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7043041",
    "html_url": "https://github.com/rust-lang/rust/issues/2941#issuecomment-7043041",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2941",
    "id": 7043041,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDMwNDE=",
    "user": {
      "login": "eholk",
      "id": 105766,
      "node_id": "MDQ6VXNlcjEwNTc2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eholk",
      "html_url": "https://github.com/eholk",
      "followers_url": "https://api.github.com/users/eholk/followers",
      "following_url": "https://api.github.com/users/eholk/following{/other_user}",
      "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eholk/subscriptions",
      "organizations_url": "https://api.github.com/users/eholk/orgs",
      "repos_url": "https://api.github.com/users/eholk/repos",
      "events_url": "https://api.github.com/users/eholk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eholk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-17T17:41:24Z",
    "updated_at": "2012-07-17T17:41:24Z",
    "body": "@graydon suggests calling it `const` as an expression.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7043041/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7043101",
    "html_url": "https://github.com/rust-lang/rust/issues/2941#issuecomment-7043101",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2941",
    "id": 7043101,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDMxMDE=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-17T17:43:03Z",
    "updated_at": "2012-07-17T18:03:54Z",
    "body": "My current thoughts on this are that freezing and thawing are kind of unnecessary, but we need to make a few changes to mutability and unique ptrs to make this all work.  Right now, mutability for default fields (those without an explicit `mut` qualifier) is inherited from the container.  So if you write:\n\n```\nlet mut v = {x: 3, y: 4};\n```\n\nYou can indeed mutate `v.x` and `v.y` even though the fields are not declared mutable.  This seems surprising at first but is a logical consequence of the variable `v` being mutable; after all, if I wanted to do `v.x = x1` I could always write `v = {x: x1 with v}`.  However, if you write:\n\n```\nlet mut v = ~{x: 3, y: 4};\n```\n\nthen, currently, `x` and `y` are truly immutable.  This is true despite the fact that `v` is a unique box, and hence I can write something like `v = ~{x: x1 with *v}` which is basically the same as what we saw before in effect.  At some point, \n@pcwalton and I both independently came to the conclusion that we ought to \"inherit\" mutability through unique pointers in the same way.\n\nWe also already have the rule that borrowck allows you to borrow the contents of a mutable unique ptr as immutable.  That is, we can do something like this:\n\n```\nlet x: ~mut int = ~mut 5;\nlet y: &int = &*x;       // *Immutable* int\n```\n\nThis works because borrowck will detect and prevent any attempt to modify `*x` while `y` is live.\n\nAnyway, if we did this, then properly designed data structures can be \"frozen\" and \"thawed\" in a rather automatic way, just by borrowing and moving them.  At least I think they can.  I'll write up an example in a gist and post it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7043101/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7043748",
    "html_url": "https://github.com/rust-lang/rust/issues/2941#issuecomment-7043748",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2941",
    "id": 7043748,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDM3NDg=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-17T18:03:31Z",
    "updated_at": "2012-07-17T18:03:31Z",
    "body": "Here is a gist explaining the idea in a bit more detail: https://gist.github.com/3130874\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7043748/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7485653",
    "html_url": "https://github.com/rust-lang/rust/issues/2941#issuecomment-7485653",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2941",
    "id": 7485653,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0ODU2NTM=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-08-03T15:06:51Z",
    "updated_at": "2012-08-03T15:06:51Z",
    "body": "The `send_map` module shows how this can work now.  Fixed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7485653/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
