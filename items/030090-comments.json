[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160242654",
    "html_url": "https://github.com/rust-lang/rust/issues/30090#issuecomment-160242654",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30090",
    "id": 160242654,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDI0MjY1NA==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-28T02:54:28Z",
    "updated_at": "2015-11-28T02:54:28Z",
    "body": "There's a slight difference here in that lines returns slices, from which you can retrieve the offset by address introspection. This is not possible with chars.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160242654/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160242967",
    "html_url": "https://github.com/rust-lang/rust/issues/30090#issuecomment-160242967",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30090",
    "id": 160242967,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDI0Mjk2Nw==",
    "user": {
      "login": "Aatch",
      "id": 342416,
      "node_id": "MDQ6VXNlcjM0MjQxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aatch",
      "html_url": "https://github.com/Aatch",
      "followers_url": "https://api.github.com/users/Aatch/followers",
      "following_url": "https://api.github.com/users/Aatch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions",
      "organizations_url": "https://api.github.com/users/Aatch/orgs",
      "repos_url": "https://api.github.com/users/Aatch/repos",
      "events_url": "https://api.github.com/users/Aatch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aatch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-28T03:06:51Z",
    "updated_at": "2015-11-28T03:06:51Z",
    "body": "Hmm, I agree this is useful, but I'm wondering if it's useful enough to warrant inclusion into the standard library. It seems like a fairly specific use-case, since even similar cases might be able to just use the slices directly.\n\n/cc @rust-lang/libs \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160242967/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160270914",
    "html_url": "https://github.com/rust-lang/rust/issues/30090#issuecomment-160270914",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30090",
    "id": 160270914,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDI3MDkxNA==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-28T10:04:30Z",
    "updated_at": "2015-11-28T10:04:30Z",
    "body": "Ascii char and single-byte string searches have yet to be using `memchr`, which could improve the performance of for example a \\n-searching split iterator.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160270914/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160296761",
    "html_url": "https://github.com/rust-lang/rust/issues/30090#issuecomment-160296761",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30090",
    "id": 160296761,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDI5Njc2MQ==",
    "user": {
      "login": "Kimundi",
      "id": 2903206,
      "node_id": "MDQ6VXNlcjI5MDMyMDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2903206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kimundi",
      "html_url": "https://github.com/Kimundi",
      "followers_url": "https://api.github.com/users/Kimundi/followers",
      "following_url": "https://api.github.com/users/Kimundi/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kimundi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kimundi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kimundi/subscriptions",
      "organizations_url": "https://api.github.com/users/Kimundi/orgs",
      "repos_url": "https://api.github.com/users/Kimundi/repos",
      "events_url": "https://api.github.com/users/Kimundi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kimundi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-28T13:46:58Z",
    "updated_at": "2015-11-28T13:46:58Z",
    "body": "To actually be consistent with `char_indices()` it would have to yield `(usize, &str)` like `match_indices()`.\n\nWe could just expose a `LinesPattern` type that matches on `\\n` and `\\r\\n`, then `x.line_indices()` would be expressible as `x.match_indices(LinesPattern)`\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160296761/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160300844",
    "html_url": "https://github.com/rust-lang/rust/issues/30090#issuecomment-160300844",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30090",
    "id": 160300844,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDMwMDg0NA==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-28T14:10:54Z",
    "updated_at": "2015-11-28T14:10:54Z",
    "body": "With a regex (and the pattern feature gate), it should already be possible to do the LinesPattern and use it with `match_indices`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160300844/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345175862",
    "html_url": "https://github.com/rust-lang/rust/issues/30090#issuecomment-345175862",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30090",
    "id": 345175862,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTE3NTg2Mg==",
    "user": {
      "login": "dtolnay",
      "id": 1940490,
      "node_id": "MDQ6VXNlcjE5NDA0OTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dtolnay",
      "html_url": "https://github.com/dtolnay",
      "followers_url": "https://api.github.com/users/dtolnay/followers",
      "following_url": "https://api.github.com/users/dtolnay/following{/other_user}",
      "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions",
      "organizations_url": "https://api.github.com/users/dtolnay/orgs",
      "repos_url": "https://api.github.com/users/dtolnay/repos",
      "events_url": "https://api.github.com/users/dtolnay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dtolnay/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-17T08:19:54Z",
    "updated_at": "2017-11-17T08:19:54Z",
    "body": "I agree that this feels too specific to be useful in the standard library. Here is what this might look like with a loop that looks for line breaks:\r\n\r\n```rust\r\nextern crate regex;\r\nuse regex::Regex;\r\n\r\nfn main() {\r\n    let input = \"aaa\\r\\nbbb\\n\\nccc\\n\";\r\n    let linebreak = Regex::new(r\"\\r?\\n\").unwrap();\r\n    let mut prev = 0;\r\n    for m in linebreak.find_iter(input) {\r\n        println!(\"{}..{} {:?}\", prev, m.start(), &input[prev..m.start()]);\r\n        prev = m.end();\r\n    }\r\n    if prev < input.len() {\r\n        println!(\"{}..{} {:?}\", prev, input.len(), &input[prev..]);\r\n    }\r\n}\r\n```",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345175862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1712156276",
    "html_url": "https://github.com/rust-lang/rust/issues/30090#issuecomment-1712156276",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30090",
    "id": 1712156276,
    "node_id": "IC_kwDOAAsO6M5mDW50",
    "user": {
      "login": "9999years",
      "id": 15312184,
      "node_id": "MDQ6VXNlcjE1MzEyMTg0",
      "avatar_url": "https://avatars.githubusercontent.com/u/15312184?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/9999years",
      "html_url": "https://github.com/9999years",
      "followers_url": "https://api.github.com/users/9999years/followers",
      "following_url": "https://api.github.com/users/9999years/following{/other_user}",
      "gists_url": "https://api.github.com/users/9999years/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/9999years/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/9999years/subscriptions",
      "organizations_url": "https://api.github.com/users/9999years/orgs",
      "repos_url": "https://api.github.com/users/9999years/repos",
      "events_url": "https://api.github.com/users/9999years/events{/privacy}",
      "received_events_url": "https://api.github.com/users/9999years/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-09-08T19:54:37Z",
    "updated_at": "2023-09-08T19:54:37Z",
    "body": "For future visitors, [the `line_span` crate](https://docs.rs/line-span/latest/line_span/) provides a rather nice API for this:\r\n\r\n> ```rust\r\n> use line_span::LineSpanExt;\r\n> \r\n> let text = \"foo\\nbar\\r\\nbaz\";\r\n> \r\n> for span in text.line_spans() {\r\n>     println!(\r\n>         \"{:>2?}: {:?} {:?} {:?}\",\r\n>         span.range(),\r\n>         span.as_str(),\r\n>         span.as_str_with_ending(),\r\n>         span.ending_str(),\r\n>     );\r\n> }\r\n> ```\r\n> \r\n> This will output the following:\r\n> \r\n> (Manually aligned for better readability)\r\n> \r\n> ```\r\n> 0.. 3: \"foo\" \"foo\\n\"   \"\\n\"\r\n> 4.. 7: \"bar\" \"bar\\r\\n\" \"\\r\\n\"\r\n> 9..12: \"baz\" \"baz\"     \"\"\r\n> ```\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1712156276/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
