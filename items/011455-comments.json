[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32099339",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32099339",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32099339,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDk5MzM5",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-11T15:53:07Z",
    "updated_at": "2014-01-11T15:53:07Z",
    "body": "I like this proposal but I think I would want more syntax for the return type. It's impossible to tell a trait apart from any other type just by looking at it, so it might get confusing. I don't have any particularly good ideas around this. The first that comes to mind is `fn foo() => Iterator<T>`\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32099339/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32100571",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32100571",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32100571,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTAwNTcx",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-11T16:44:59Z",
    "updated_at": "2014-01-11T17:55:01Z",
    "body": "Yeah, that occurred to me too. There's no other legal meaning a trait in that position could possibly have, so it's not ambiguous in that sense, and it _is_ very similar in terms of behaviour to a trait object (even if it's not quite the same thing), where the same concern applies and we don't seem to mind so much, so I'm not sure it's that bad.\n\nI could also see having different syntax though. My usual tactic in these cases is to take a look at the list of Rust keywords: in this case the two that look like they might have any kind of potential are `as` and `trait`. `=>` isn't bad either, though we don't use that syntax for function-like things anywhere else. Another option I thought of which gets the meaning across but I think is a bit ugly is `-> _: Trait`.\n\nSo the options (so far) are:\n1. `fn my_iter() -> Iterator<T> { ... }`\n2. `fn my_iter() => Iterator<T> { ... }`\n3. `fn my_iter() -> as Iterator<T> { ... }`\n4. `fn my_iter() -> trait Iterator<T> { ... }`\n5. `fn my_iter() -> _: Iterator<T> { ... }`\n\nI still like 1., but I'm not overly attached to it. Edit: actually, assuming of course that we implement this at all, maybe we should do 5., which is more precise and explicit, and reserve the option to introduce 1. as sugar for it at some later point. Edit again: yeah, I guess I'm basically in favor of 5. now. Conveying the meaning accurately is more important than appealing syntax.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32100571/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32100927",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32100927",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32100927,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTAwOTI3",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-11T16:57:51Z",
    "updated_at": "2014-01-11T16:57:51Z",
    "body": "(It's not ambiguous, but if we have separate typing rules for the return\nvalue of one of these functions, I don't really want it using the same\nsyntax.)\n\nOn Sat, Jan 11, 2014 at 11:45 AM, G\u00e1bor Lehel notifications@github.comwrote:\n\n> Yeah, that occurred to me too. There's no other legal meaning a trait in\n> that position could possibly have, so it's not ambiguous in that sense, and\n> it _is_ very similar in terms of behaviour to a trait object (even if\n> it's not quite the same thing), where the same concern applies and we don't\n> seem to mind so much, so I'm not sure it's that bad.\n> \n> I could also see having different syntax though. My usual tactic in these\n> cases is to take a look at the list of Rust keywords: in this case the two\n> that look like they might have any kind of potential are as and trait. =>isn't bad either, though we don't use that syntax for function-like things\n> anywhere else. Another option I thought of which gets the meaning across\n> but I think is a bit ugly is -> _: Trait.\n> \n> So the options (so far) are:\n> 1. fn my_iter() -> Iterator<T> { ... }\n> 2. fn my_iter() => Iterator<T> { ... }\n> 3. fn my_iter() -> as Iterator<T> { ... }\n> 4. fn my_iter() -> trait Iterator<T> { ... }\n> 5. fn my_iter() -> _: Iterator<T> { ... }\n> \n> I still like 1., but I'm not overly attached to it.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/mozilla/rust/issues/11455#issuecomment-32100571\n> .\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32100927/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32102141",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32102141",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32102141,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTAyMTQx",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-11T17:45:14Z",
    "updated_at": "2014-01-11T17:45:14Z",
    "body": "cc @nikomatsakis @pcwalton @brson \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32102141/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32102799",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32102799",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32102799,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTAyNzk5",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-11T18:10:39Z",
    "updated_at": "2014-01-11T18:10:39Z",
    "body": "I would personally not be in favor of this. I find it incredibly important that all typechecking and borrowchecking related problems are all completely local to a function. I as a programmer can very easily know exactly what's going in because I have a very small world that I need to analyze (just this function).\n\nIf you don't explicitly name the return type, what if it has lifetime parameters that I need to know about? What if I then need to pass it to another function? I agree that it's really annoying trying to type out all the iterator nested traits when returning one, but I _really_ don't want to break the mental model of completely local inference.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32102799/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32103287",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32103287",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32103287,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTAzMjg3",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-11T18:32:16Z",
    "updated_at": "2014-01-11T18:32:16Z",
    "body": "That's a good point, I hadn't considered lifetime parameters.\n\nOn Sat, Jan 11, 2014 at 1:11 PM, Alex Crichton notifications@github.comwrote:\n\n> I would personally not be in favor of this. I find it incredibly important\n> that all typechecking and borrowchecking related problems are all\n> completely local to a function. I as a programmer can very easily know\n> exactly what's going in because I have a very small world that I need to\n> analyze (just this function).\n> \n> If you don't explicitly name the return type, what if it has lifetime\n> parameters that I need to know about? What if I then need to pass it to\n> another function? I agree that it's really annoying trying to type out all\n> the iterator nested traits when returning one, but I _really_ don't want\n> to break the mental model of completely local inference.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/mozilla/rust/issues/11455#issuecomment-32102799\n> .\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32103287/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32103774",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32103774",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32103774,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTAzNzc0",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-11T18:52:30Z",
    "updated_at": "2014-01-11T19:09:16Z",
    "body": "@alexcrichton I think you're partly misunderstanding how it would work (but the issue you raise wrt lifetimes is still very valid). The caller of a function with an inferred return type would _not_ know anything about the type that is returned (and hence would not be able to depend on it), except that it impls the trait. They would only see it as \"some anonymous type\".\n\nTherefore\n\n> What if I then need to pass it to another function?\n\nyou would only be able to pass it to another function if it's a generic one that accepts any `I: Iterator<T>` (or of course a completely generic function without even the `Iterator` bound). \n\n> If you don't explicitly name the return type, what if it has lifetime parameters that I need to know about?\n\nThis one is hurting my brain. If I'm thinking straight, substituting a dummy/placeholder/anonymous type for a type that has lifetime parameters _would_ break type safety. Consider for example:\n\n```\nfn this_is_evil<T, Iter: Iterator<T>>(iter: Iter) -> _: Iterator<T> {\n    iter\n}\n\nfn this_is_bad() -> ~Iterator<int>{\n    // lifetime is this function\n    let a = &[1, 2, 3];\n\n    // the return type is an unknown type that impls `Iterator`,\n    // so this is accepted, and now the trait object we return\n    // points into invalid memory\n    ~this_is_evil(a.iter().map(|i| *i))\n    // at entry to `this_is_evil` the lifetime information is present,\n    // but when it comes back out it is lost\n}\n```\n\nJust as with trait objects, we would have to forbid erasing lifetime information in this way. I'm not sure how significantly this would impact the usefulness of the feature.\n\n@alexcrichton Does this address your concerns? Do you see any other problems?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32103774/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32104043",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32104043",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32104043,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTA0MDQz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-11T19:03:46Z",
    "updated_at": "2014-01-11T19:03:46Z",
    "body": "This is still very different from returning a trait. For example if I return a `PeekIterator` then my code will compile but should the compiler allow me to call `peek`? The return type said nothing about a peek iterator, so are we also going to erase all extra methods that aren't on the trait? It seems to me like both decisions here (yes/no) are unexpected.\n\nI'm still very concerned about this and its effects on a programmer's mental model. I can come up with a few cases here and there about where I personally would be confused, but this will always come back to the basic problem that reasoning about a function is no longer local to the function itself.\n\nI don't think that a feature like this is impossible, but we would need to very carefully approach it. Another idea off the top of my head is `fn foo<T: Iterator<int>>() -> T` (I don't think that's allowed today), but I'm still afraid about the cognitive burden of not understanding the return value.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32104043/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32104723",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32104723",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32104723,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTA0NzIz",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-11T19:32:35Z",
    "updated_at": "2014-01-11T20:22:22Z",
    "body": "With regards to the lifetimes issue, trying out my previous example, except using a trait object:\n\n```\nfn evil<T, Iter: Iterator<T>>(iter: Iter) -> ~Iterator:<T> {\n    ~iter as ~Iterator:<T>\n}\n```\n\nI get the error: `error: value may contain borrowed pointers; add 'static bound`, so I think this is the same thing that we would have to do for this proposal.\n\n> For example if I return a PeekIterator then my code will compile but should the compiler allow me to call peek?\n\nNo.\n\n> The return type said nothing about a peek iterator, so are we also going to erase all extra methods that aren't on the trait?\n\nYes. Any information you want to convey to the outside world has to be in the signature. If you want the rest of the program to know that it's a PeekIterator, then you need to write `-> PeekIterator`.\n\n> It seems to me like both decisions here (yes/no) are unexpected.\n\nNot to me. The same thing happens with trait objects. Why is this more surprising?\n\n> I'm still very concerned about this and its effects on a programmer's mental model.\n\nIt shouldn't have any more effect than trait objects do. Just like with trait objects, you get an unknown type that you can call trait methods on. The only differences from a type system perspective are that (a) the caller can assume that the same type is returned every time (while not knowing anything _about_ the type) (whereas with trait objects, the type \"inside\" can be different each time), and correspondingly (b) all returns from the function have to infer to the same type.\n\n> Another idea off the top of my head is `fn foo<T: Iterator<int>>() -> T` (I don't think that's allowed today)\n\nYou can write that today, but the meaning is very different. That type says that you have to be able to return any iterator type of the _caller's_ choice. In other words, you won't be able to implement it. What we want is a return type chosen by the callee, with the details of _what_ type that is (apart from what is present in the signature, i.e. the trait) being hidden from the caller.\n\nEDIT: Basically these concerns about non-local reasoning are _exactly_ what this proposal was designed to address.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32104723/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32129264",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32129264",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32129264,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTI5MjY0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-12T18:23:44Z",
    "updated_at": "2014-01-12T18:23:44Z",
    "body": "Cool, so from what you said this sounds more palatable to me. I remain concerned about the idea, however, because this sounds exactly like a trait object, except that you're able to return one by value. From a compiler standpoint I guess this will infer what the return value actually is, but why won't we start inferring these arguments everywhere else? If you can do this for return values, why not for argument values or struct values?\n\nI fear that this is addressing a very specific problem without addressing the problem at large. I don't _think_ that DST will fix this, but perhaps it will?\n\nI'm sorry if I sound so negative here, I don't want to deter an awesome feature while it's brewing! I'm just concerned about adding a very specific feature to the language instead of \"getting our bang for our buck\" from some other feature.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32129264/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32131739",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32131739",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32131739,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTMxNzM5",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-12T19:49:22Z",
    "updated_at": "2014-01-12T21:11:13Z",
    "body": "> If you can do this for return values, why not for argument values or struct values?\n\nWell, let's try looking at it case by case. For functions we can break it down on two axes: argument vs. return, in other words caller provides value vs. callee provides value, and caller chooses type vs. callee chooses type.\n- _Caller provides value, caller chooses type_: this is generics as we know it (or parametric polymorphism, universal quantification in other contexts). The caller provides a value of any type, which is abstract to the callee except for the traits that it implements.\n- _Caller provides value, callee chooses type_: in other words, the caller passes in a polymorphic value which the callee may instantiate at any types they choose. This is what's known as higher-rank types, or what would be \"pointer to a function template\" in C++ (and isn't possible). It's not currently possible in Rust either. Let's try applying the same trick as with return type inference: given a function `fn foo(iter: Iterator<int>)`, the callee may instantiate `iter` at any _single_ type that implements `Iterator<int>`. This type is inferred, and substituted back into the signature (but unknown to the caller). The caller will only be able to provide an argument for this parameter, where they are expected to provide a value of a type which is unknown to them, if they have access to a polymorphic value, or a function with a completely polymorphic output (as in the bullet point below this one). These are few and far between, but if we add polymorphic numeric literals like Haskell has, that would be one example. So I guess this isn't a totally unreasonable idea, but I don't see much utility in it right now (what problem it would solve).\n- _Callee provides value, caller chooses type_: this is generics again, except this time applied to the return type (the `fn foo<T: Iterator<int>>() -> T` example from earlier).\n- _Callee provides value, callee chooses type_: this is the proposal under discussion. The callee provides a value of any type, which is abstract to the caller except for the traits that it implements (so the inverse of the first point).\n\nStruct values: in other words, this would be `struct Foo { a: int, b: _ }` where the person creating the struct chooses the type for `b`. But then `Foo` doesn't have a fixed representation. Applying our \"usual trick\" would imply something like all sites which create a `Foo` having to infer to the same type for `b`, but that's pretty crazy. So I don't think this makes any sense. The case where `Foo` _can_ be represented because it's hidden behind a pointer is the sort of thing that DST handles.\n\n> I fear that this is addressing a very specific problem without addressing the problem at large. \n\nWhat would you say is \"the problem at large\"?\n\n>  I don't think that DST will fix this, but perhaps it will?\n\nWhen I first started thinking about this, I thought it might be closely related to DST as well (after all it's _sort of_ like an unboxed existential, while DST deals with boxed existentials), but after thinking about it more, I reached the conclusion that the two don't actually have much to do with each other, and that this is better thought of as (restricted) return type inference (for instance, because unboxed existentials are impossible, and return type inference is possible).\n\n> I'm sorry if I sound so negative here, I don't want to deter an awesome feature while it's brewing! I'm just concerned about adding a very specific feature to the language instead of \"getting our bang for our buck\" from some other feature.\n\nNo problem at all, or rather: thank you. You've already pointed out one very important issue (lifetimes), and made me consider another possibility I hadn't before (the analogous case for function arguments, from above), even if I don't think there's much of a use case for it at present. And \"generalize, generalize, generalize\" is basically my mantra as well, so we're in agreement there. I don't see any general thing at the moment that this feature could be a specific case of. The only axis I can think of to generalize it on would be the potential to return something where an _inner_ type is inferred, e.g. `foo(...) -> Option<Iterator<T>>`, and I did think of that, but the bang-for-buck ratio seems considerably lower, and I'm not sure if it doesn't raise other issues (and in any case, the mechanism could be extended later if there's demand).\n\nI think we might be on the same page in the end? That trait-restricted return type inference is preferable to having to use trait objects (because performance), and preferable to unrestricted return type inference (because local reasoning), and preferable to always having to write out the type (because unboxed closures won't have one). And that if there's some more general mechanism, then that would be even more preferable: I just don't happen to know of any.\n\n(And apologies if I might be a little too comprehensive in my responses!)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32131739/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32147704",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32147704",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32147704,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTQ3NzA0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-13T06:24:53Z",
    "updated_at": "2014-01-13T06:24:53Z",
    "body": "So as I read this it's getting more and more palatable to me. I'd certainly want to discuss this in at least a meeting if not a larger forum. It doesn't make sense to me to store a value like this in structs or things like that, but your `Option<Iterator<T>>` is a good example of a snag we could hit.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32147704/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32208269",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32208269",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32208269,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjA4MjY5",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-13T20:32:31Z",
    "updated_at": "2014-01-13T20:32:31Z",
    "body": "Sure, there's no rush. It's a backwards compatible feature and we don't even have unboxed closures yet (and it's not like I have a PR ready to go).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32208269/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32244249",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32244249",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32244249,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjQ0MjQ5",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-14T07:39:04Z",
    "updated_at": "2014-01-14T07:39:04Z",
    "body": "Maybe we should merge (or at least link) #11196 and this issue, they both deal with using traits as types.\n\nAnd I found an example where you can't just use the trait name as the return type, but maybe it's a bit convoluted:\n\n``` rust\nimpl<A, B, C, F: |A| -> B, G: |B| -> C, FG: |A| -> C> Mul<G, FG> for F {\n    fn mul(&self, g: &G) -> FG {\n        |a| g(self(a))\n    }\n}\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32244249/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32244381",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32244381",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32244381,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjQ0Mzgx",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-14T07:42:18Z",
    "updated_at": "2014-01-14T07:42:18Z",
    "body": "@eddyb where would you want to use a trait as return type in that example?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32244381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32244646",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32244646",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32244646,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjQ0NjQ2",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-14T07:48:43Z",
    "updated_at": "2014-01-14T07:49:31Z",
    "body": "@glaebhoerl sorry if it wasn't obvious, `FG` is the return type, an unboxed closure, but it needs to show up in the trait's type parameters - `Mul<G, FG>`. This is how it could look outside an `impl` (assuming only unboxed closures, as in #11196):\n\n``` rust\nfn compose<A, B, C>(f: |A| -> B, g: |B| -> C) -> |A| -> C {\n    |a| g(f(a))\n}\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32244646/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32245013",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32245013",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32245013,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjQ1MDEz",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-14T07:56:55Z",
    "updated_at": "2014-01-14T07:56:55Z",
    "body": "@eddyb I realized that it's function composition :), what I don't see is what you would _want_ to write. One of the main motivations for this feature is that you can't write the type of an unboxed closure. But in that example you don't have to -- it's already generic.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32245013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32246319",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32246319",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32246319,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjQ2MzE5",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-14T08:27:36Z",
    "updated_at": "2014-01-14T08:27:36Z",
    "body": "It's generic over a constant inner anonymous type - maybe I should try to make this clearer. Suppose we have an `Iterable<T, Iter: Iterator<T>>` trait with a `fn iter(&self) -> Iter;` - how do you implement that for an `Iter` type you can't name? With your proposal:\n\n``` rust\nimpl Iterable<int, ???> for int { // Always returns the same number.\n    fn iter(&self) -> Iterator<int> {\n        // Pretend this is an anonymous type that can't be constructed\n        // outside of the iter method.\n        struct Foo {x: int};\n        impl Iterator<int> for Foo {\n            fn next(&self) -> Option<int> {\n                Some(self.x)\n            }\n        }\n        Foo {x: *self}\n    }\n}\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32246319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32249545",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32249545",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32249545,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjQ5NTQ1",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-14T09:24:46Z",
    "updated_at": "2014-01-14T09:24:46Z",
    "body": "Ah, I see what you're saying finally. Well, I don't have any ideas. Do you?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32249545/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32457065",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32457065",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32457065,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDU3MDY1",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-16T10:23:09Z",
    "updated_at": "2014-01-16T10:23:09Z",
    "body": "@glaebhoerl well, the implementation looks complicated enough to warrant using an explicit type and impl `Fn` on that type. I'd be happy even if only the small function was allowed.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32457065/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32461358",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-32461358",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 32461358,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDYxMzU4",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-16T11:31:29Z",
    "updated_at": "2014-01-16T11:31:29Z",
    "body": "That's pretty much what I was going to suggest as well.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32461358/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38780498",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-38780498",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 38780498,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzgwNDk4",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-27T09:00:05Z",
    "updated_at": "2014-03-27T09:00:05Z",
    "body": "I've sketched out the details of implementing this, if anyone wants to try it. There could be some issues with variance, but nothing we can't solve.\nShould this move to the dedicated RFC process?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38780498/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38787991",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-38787991",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 38787991,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Nzg3OTkx",
    "user": {
      "login": "flaper87",
      "id": 13816,
      "node_id": "MDQ6VXNlcjEzODE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/13816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flaper87",
      "html_url": "https://github.com/flaper87",
      "followers_url": "https://api.github.com/users/flaper87/followers",
      "following_url": "https://api.github.com/users/flaper87/following{/other_user}",
      "gists_url": "https://api.github.com/users/flaper87/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flaper87/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flaper87/subscriptions",
      "organizations_url": "https://api.github.com/users/flaper87/orgs",
      "repos_url": "https://api.github.com/users/flaper87/repos",
      "events_url": "https://api.github.com/users/flaper87/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flaper87/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-27T10:35:29Z",
    "updated_at": "2014-03-27T10:35:29Z",
    "body": "@eddyb yup, it should. @glaebhoerl  Are you planning to write one? or @eddyb ? If so, pls link it here too.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38787991/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43356327",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-43356327",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 43356327,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzU2MzI3",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T17:14:56Z",
    "updated_at": "2014-05-16T17:16:12Z",
    "body": "I definitely think there's a gap in the language here, and something like this proposal could be a good starting point.\n\nFor the moment, though, I want to mention that there's a reasonable workaround using newtypes. Where you'd like to write something like\n\n```\nfn my_transform<T, Iter: Iterator<T>>(iter: Iter) -> Iterator<T> { ... }\n```\n\nin your proposal, you can instead introduce a newtype with a private field:\n\n```\nstruct MyTransformResult<T>(SomeConcreteType<T>);\nimpl<T> Iterator<T> for MyTransformResult<T> { ... }\n\nfn my_transform<T, Iter: Iterator<T>>(iter: Iter) -> MyTransformResult<T> { ... }\n```\n\nBy following this pattern, you hide the concrete type `SomeConcreteType<T>` of the result, revealing only the trait bound `Iterator<T>`, while avoiding trait objects. Although you've given a name, `MyTransformResult`, to the return type, you can freely change the underlying representation (e.g., choice of iterator) without breaking client code.\n\nThat said, I do think in the long run we'll want a more convenient way to hide concrete return types without using trait objects.\n\ncc @nikomatsakis \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43356327/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43421175",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-43421175",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 43421175,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDIxMTc1",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-17T19:07:30Z",
    "updated_at": "2014-05-17T19:07:38Z",
    "body": "@aturon sure, but this proposal is mainly useful for returning types _unspeakable_ outside the function body (or not even within the function body).\nRight now the only such types would be the ones declared within the function body.\nHowever, if we get unboxed closures, each closure expression would have its own anonymous type, and returning it would require a feature such as the one proposed here.\n\nI should mention that the `ty_anon` implementation detail I have in mind could work for any node, be it a function declaration (specifying its return type. or maybe it could be attached to the return `ast::Type` itself?) or an unboxed closure expression, so it might be beneficial to implement it as part of unboxed closures (which do need some way of storing such an anonymous type).\ncc @thestinger\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43421175/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43424706",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-43424706",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 43424706,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDI0NzA2",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-17T21:30:58Z",
    "updated_at": "2014-05-17T21:30:58Z",
    "body": "@aturon This proposal would also serve to insulate the function from the details of the various iterators it's employing. It's extremely awkward to try to return a `Chain<Map<'a, (int, u8), u16, Enumerate<Filter<'a, u8, vec::MoveItems<u8>>>>, SkipWhile<'a, u16, Map<'a, &u16, u16, slice::Items<u16>>>>`. And of course any change to how the implementation works requires updating this ridiculous type.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43424706/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43583167",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-43583167",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 43583167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTgzMTY3",
    "user": {
      "login": "nrc",
      "id": 762626,
      "node_id": "MDQ6VXNlcjc2MjYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nrc",
      "html_url": "https://github.com/nrc",
      "followers_url": "https://api.github.com/users/nrc/followers",
      "following_url": "https://api.github.com/users/nrc/following{/other_user}",
      "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nrc/subscriptions",
      "organizations_url": "https://api.github.com/users/nrc/orgs",
      "repos_url": "https://api.github.com/users/nrc/repos",
      "events_url": "https://api.github.com/users/nrc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nrc/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-20T03:30:59Z",
    "updated_at": "2014-05-20T03:30:59Z",
    "body": "How would you know the size of such a type? Or would you monomorphise the caller or something?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43583167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43583876",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-43583876",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 43583876,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTgzODc2",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-20T03:49:49Z",
    "updated_at": "2014-05-20T03:51:12Z",
    "body": "@nick29581 As far as I understand the proposal, the idea is to monomorphize the callers, as you say. \n\n[@glaebhoerl's comment above](https://github.com/mozilla/rust/issues/11455#issuecomment-32131739) makes clear that return types are missing the abilities we have with argument types. We can take trait-bounded arguments via generics (static dispatch) or as objects (dynamic dispatch), in either case keeping the actual type abstract. But there's no similar choice for return types: you either return a _concrete_ type or a trait object (forcing the client into dynamic dispatch). \n\nThis is a real problem for things like iterators, where static dispatch is essential for performance, but you'd rather not reveal exactly how the iterator is built.\n\nAs things currently stand, you can always use newtypes to return a \"concrete\" type while hiding everything but its trait bounds, [as I proposed above](https://github.com/mozilla/rust/issues/11455#issuecomment-43356327). This is a pain. But I think it will work even for at least some proposed versions of unboxed closures, provided that you can implement the proposed closure trait directly -- at the cost of not being able to use closure sugar when you want to return a closure.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43583876/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43585347",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-43585347",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 43585347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTg1MzQ3",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-20T04:27:37Z",
    "updated_at": "2014-05-20T04:27:37Z",
    "body": "To my understanding, it requires no monomorphization. The caller doesn't\nchoose the type. The function returns exactly one type, but that type is\nopaque except for the trait that it's marked as returning.\n\nOn Mon, May 19, 2014 at 8:49 PM, Aaron Turon notifications@github.comwrote:\n\n> @nick29581 https://github.com/nick29581 As far as I understand the\n> proposal, the idea is to monomorphize the callers, as you say.\n> \n> @glaebhoerl's comment abovehttps://github.com/mozilla/rust/issues/11455#issuecomment-32131739makes clear that return types are missing the abilities we have with\n> argument types. We can take trait-bounded arguments via generics (static\n> dispatch) or as objects (dynamic dispatch), in either case keeping the\n> actual type abstract. But there's no similar choice for return types: you\n> either return a _concrete_ type or a trait object (forcing the client\n> into dynamic dispatch).\n> \n> This is a real problem for things like iterators, where static dispatch is\n> essential for performance.\n> \n> As things currently stand, you can always use newtypes to return a\n> \"concrete\" type while hiding everything but its trait bounds, as I\n> proposed abovehttps://github.com/mozilla/rust/issues/11455#issuecomment-43356327.\n> This is a pain. But I think it will work even for at least some proposed\n> versions of unboxed closures, provided that you can implement the proposed\n> closure trait directly -- at the cost of not being able to use closure\n> sugar when you want to return a closure.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/mozilla/rust/issues/11455#issuecomment-43583876\n> .\n\n## \n\nhttp://octayn.net/\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43585347/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43585740",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-43585740",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 43585740,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTg1NzQw",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-20T04:37:46Z",
    "updated_at": "2014-05-20T04:38:10Z",
    "body": "@cmr  Agreed, the function chooses the type -- it's the _caller_ that's monomorphized. The caller expects _some_ type `T: Trait` (e.g., `T: Iterator<A>`). You can think of this as the caller being generic over `T`. The compiler would specialize the caller to whatever the actual type is, just as it specializes the callee when generics are instantiated.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43585740/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45032545",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-45032545",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 45032545,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDMyNTQ1",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-03T23:16:01Z",
    "updated_at": "2014-06-03T23:16:01Z",
    "body": "I've now written a formal RFC on something like this proposal: https://github.com/rust-lang/rfcs/pull/105\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45032545/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56131906",
    "html_url": "https://github.com/rust-lang/rust/issues/11455#issuecomment-56131906",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11455",
    "id": 56131906,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MTMxOTA2",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-19T03:38:45Z",
    "updated_at": "2014-09-19T03:39:09Z",
    "body": "Keeping around an issue here isn't necessary because this isn't backwards incompatible or actionable. A proposal needs to be accepted through the RFC process.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56131906/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
