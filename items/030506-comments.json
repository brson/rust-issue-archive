[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166215760",
    "html_url": "https://github.com/rust-lang/rust/issues/30506#issuecomment-166215760",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30506",
    "id": 166215760,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NjIxNTc2MA==",
    "user": {
      "login": "durka",
      "id": 47007,
      "node_id": "MDQ6VXNlcjQ3MDA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47007?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/durka",
      "html_url": "https://github.com/durka",
      "followers_url": "https://api.github.com/users/durka/followers",
      "following_url": "https://api.github.com/users/durka/following{/other_user}",
      "gists_url": "https://api.github.com/users/durka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/durka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/durka/subscriptions",
      "organizations_url": "https://api.github.com/users/durka/orgs",
      "repos_url": "https://api.github.com/users/durka/repos",
      "events_url": "https://api.github.com/users/durka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/durka/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-21T06:40:51Z",
    "updated_at": "2015-12-21T06:40:51Z",
    "body": "Hmm what do you mean by \"an error about `fasdfas`\"? Definitely the macro backtrace adds a lot of noise to the error message, but isn't the macro free to reinterpret `fasdfas` in various ways so how is the compiler supposed to know whether `foo!` is relevant or not?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166215760/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166224913",
    "html_url": "https://github.com/rust-lang/rust/issues/30506#issuecomment-166224913",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30506",
    "id": 166224913,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NjIyNDkxMw==",
    "user": {
      "login": "nrc",
      "id": 762626,
      "node_id": "MDQ6VXNlcjc2MjYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nrc",
      "html_url": "https://github.com/nrc",
      "followers_url": "https://api.github.com/users/nrc/followers",
      "following_url": "https://api.github.com/users/nrc/following{/other_user}",
      "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nrc/subscriptions",
      "organizations_url": "https://api.github.com/users/nrc/orgs",
      "repos_url": "https://api.github.com/users/nrc/repos",
      "events_url": "https://api.github.com/users/nrc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nrc/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-21T07:45:52Z",
    "updated_at": "2015-12-21T07:58:36Z",
    "body": "The compiler sees things somewhat backwards - it sees the post-expansion AST and an expansion trace. Errors in generated code, can come from three places - straight from the macro, straight from the input, or some combination of the two. For the first and third cases if there is an error, we can't do much better than giving the whole instantiation (e.g., `foo!(fasdfas)`) and hopefully some part of the macro definition (in some cases, perhaps only the whole macro definition, I'm not sure). However, in the middle case, the expansion trace shows that the macro is just copying and pasting it's input into somewhere in the macro. The compiler should be able to tell easily if that is the case from the expansion trace (and @DanielJCampbell has been doing some work improving these traces in any case), and then skip informing the user about the macro stuff, since it doesn't matter too much (we might still note that a macro was involved and reference it, but show less detail than we do at the moment).\n\nedited for clarity\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166224913/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166227595",
    "html_url": "https://github.com/rust-lang/rust/issues/30506#issuecomment-166227595",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30506",
    "id": 166227595,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NjIyNzU5NQ==",
    "user": {
      "login": "nrc",
      "id": 762626,
      "node_id": "MDQ6VXNlcjc2MjYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nrc",
      "html_url": "https://github.com/nrc",
      "followers_url": "https://api.github.com/users/nrc/followers",
      "following_url": "https://api.github.com/users/nrc/following{/other_user}",
      "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nrc/subscriptions",
      "organizations_url": "https://api.github.com/users/nrc/orgs",
      "repos_url": "https://api.github.com/users/nrc/repos",
      "events_url": "https://api.github.com/users/nrc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nrc/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-21T07:57:54Z",
    "updated_at": "2015-12-21T07:57:54Z",
    "body": "Actually, we seem to be doing much better than we used - we don't have the annoying `note: expansion site` notes any more.\n\nI still think we should consider dropping any mention of the macro - after all if there is a problem with a sub-expression in a function call, we don't mention the function.\n\nExamples:\n\n```\nmacro_rules! foo{\n    ($x: expr) => {$x}\n}\n\nfn main() {\n    foo!(bar());\n}\n```\n\nwould give just\n\n```\n<anon>:6:10: 6:13 error: unresolved name `bar` [E0425]\n<anon>:6     foo!(bar());\n                  ^~~\n<anon>:6:10: 6:13 help: see the detailed explanation for E0425\n```\n\nlosing (because it is not useful)\n\n```\n<anon>:6:5: 6:17 note: in this expansion of foo! (defined in <anon>)\n```\n\nbut\n\n```\nmacro_rules! foo{\n    ($x: expr) => {$x.bar()}\n}\n\nfn main() {\n    foo!(42);\n}\n```\n\nwould stay as it is:\n\n```\n<anon>:2:23: 2:28 error: no method named `bar` found for type `_` in the current scope\n<anon>:2     ($x: expr) => {$x.bar()}\n                               ^~~~~\n<anon>:6:5: 6:14 note: in this expansion of foo! (defined in <anon>)\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/166227595/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290358930",
    "html_url": "https://github.com/rust-lang/rust/issues/30506#issuecomment-290358930",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30506",
    "id": 290358930,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDM1ODkzMA==",
    "user": {
      "login": "jseyfried",
      "id": 8652869,
      "node_id": "MDQ6VXNlcjg2NTI4Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8652869?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jseyfried",
      "html_url": "https://github.com/jseyfried",
      "followers_url": "https://api.github.com/users/jseyfried/followers",
      "following_url": "https://api.github.com/users/jseyfried/following{/other_user}",
      "gists_url": "https://api.github.com/users/jseyfried/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jseyfried/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jseyfried/subscriptions",
      "organizations_url": "https://api.github.com/users/jseyfried/orgs",
      "repos_url": "https://api.github.com/users/jseyfried/repos",
      "events_url": "https://api.github.com/users/jseyfried/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jseyfried/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-30T09:45:58Z",
    "updated_at": "2017-03-30T09:45:58Z",
    "body": "Fixed in #40597.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290358930/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
