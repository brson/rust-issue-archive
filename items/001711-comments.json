[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3733201",
    "html_url": "https://github.com/rust-lang/rust/issues/1711#issuecomment-3733201",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1711",
    "id": 3733201,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzMyMDE=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-01-31T03:53:15Z",
    "updated_at": "2012-01-31T04:28:01Z",
    "body": "This is pretty confounding. The only way this should happen is if the `readlink` call on `/proc/self/exe` fails, and I don't know under what situation that might happen. I'll note that on this system the entire rust build completed successfully. It is only when trying to use the installed rustc that this happened. Also, it was installed using an Arch package.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3733201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3733233",
    "html_url": "https://github.com/rust-lang/rust/issues/1711#issuecomment-3733233",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1711",
    "id": 3733233,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzMyMzM=",
    "user": {
      "login": "lht",
      "id": 19508,
      "node_id": "MDQ6VXNlcjE5NTA4",
      "avatar_url": "https://avatars.githubusercontent.com/u/19508?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lht",
      "html_url": "https://github.com/lht",
      "followers_url": "https://api.github.com/users/lht/followers",
      "following_url": "https://api.github.com/users/lht/following{/other_user}",
      "gists_url": "https://api.github.com/users/lht/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lht/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lht/subscriptions",
      "organizations_url": "https://api.github.com/users/lht/orgs",
      "repos_url": "https://api.github.com/users/lht/repos",
      "events_url": "https://api.github.com/users/lht/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lht/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-01-31T03:57:49Z",
    "updated_at": "2012-01-31T03:58:50Z",
    "body": "Maybe you can try to use perror to get more information about what went wrong? Like patch below:\n\n``` diff\ndiff --git a/src/libstd/linux_os.rs b/src/libstd/linux_os.rs\nindex 82b1197..d7a71d0 100644\n--- a/src/libstd/linux_os.rs\n+++ b/src/libstd/linux_os.rs\n@@ -57,6 +57,7 @@ native mod libc {\n     fn pipe(buf: *mutable fd_t) -> c_int;\n     fn waitpid(pid: pid_t, &status: c_int, options: c_int) -> pid_t;\n     fn readlink(path: str::sbuf, buf: str::sbuf, bufsize: size_t) -> ssize_t;\n+    fn perror(msg: str::sbuf);\n     fn mkdir(path: str::sbuf, mode: c_int) -> c_int;\n     fn rmdir(path: str::sbuf) -> c_int;\n     fn chdir(path: str::sbuf) -> c_int;\n@@ -132,6 +133,7 @@ fn get_exe_path() -> option::t<fs::path> {\n             if libc::readlink(proc_self_buf, path_buf, bufsize) != -1 {\n                 option::some(fs::dirname(path) + fs::path_sep())\n             } else {\n+                libc::perror(proc_path_buf);\n                 option::none\n             }\n         })\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3733233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/4630753",
    "html_url": "https://github.com/rust-lang/rust/issues/1711#issuecomment-4630753",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1711",
    "id": 4630753,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MzA3NTM=",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-03-22T01:06:57Z",
    "updated_at": "2012-03-22T01:06:57Z",
    "body": "Pinging original reporter, can you try the diagnostic lht posted here? Insert it into `libcore/os.rs`\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/4630753/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5102526",
    "html_url": "https://github.com/rust-lang/rust/issues/1711#issuecomment-5102526",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1711",
    "id": 5102526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDI1MjY=",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-04-12T22:55:19Z",
    "updated_at": "2012-04-12T22:55:19Z",
    "body": "No response from @manveru => closing. But please reopen if necessary.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5102526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/9009378",
    "html_url": "https://github.com/rust-lang/rust/issues/1711#issuecomment-9009378",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1711",
    "id": 9009378,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkwMDkzNzg=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-09-29T23:46:14Z",
    "updated_at": "2012-09-29T23:46:14Z",
    "body": "I've heard more reports of this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/9009378/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18164729",
    "html_url": "https://github.com/rust-lang/rust/issues/1711#issuecomment-18164729",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1711",
    "id": 18164729,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MTY0NzI5",
    "user": {
      "login": "bstrie",
      "id": 865233,
      "node_id": "MDQ6VXNlcjg2NTIzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bstrie",
      "html_url": "https://github.com/bstrie",
      "followers_url": "https://api.github.com/users/bstrie/followers",
      "following_url": "https://api.github.com/users/bstrie/following{/other_user}",
      "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions",
      "organizations_url": "https://api.github.com/users/bstrie/orgs",
      "repos_url": "https://api.github.com/users/bstrie/repos",
      "events_url": "https://api.github.com/users/bstrie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bstrie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-20T18:42:55Z",
    "updated_at": "2013-05-20T18:42:55Z",
    "body": "@brson Were those reports also using the same Arch package, or is it more widespread?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18164729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19376388",
    "html_url": "https://github.com/rust-lang/rust/issues/1711#issuecomment-19376388",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1711",
    "id": 19376388,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5Mzc2Mzg4",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-13T07:30:51Z",
    "updated_at": "2013-06-13T07:31:09Z",
    "body": "The only way I can reproduce this is not having `/proc` mounted in a `chroot` (Arch Linux x86_64), so I'm going to close this. If someone can reproduce this, just leave a comment.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19376388/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/188786882",
    "html_url": "https://github.com/rust-lang/rust/issues/1711#issuecomment-188786882",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1711",
    "id": 188786882,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4ODc4Njg4Mg==",
    "user": {
      "login": "apaprocki",
      "id": 767372,
      "node_id": "MDQ6VXNlcjc2NzM3Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/767372?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apaprocki",
      "html_url": "https://github.com/apaprocki",
      "followers_url": "https://api.github.com/users/apaprocki/followers",
      "following_url": "https://api.github.com/users/apaprocki/following{/other_user}",
      "gists_url": "https://api.github.com/users/apaprocki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apaprocki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apaprocki/subscriptions",
      "organizations_url": "https://api.github.com/users/apaprocki/orgs",
      "repos_url": "https://api.github.com/users/apaprocki/repos",
      "events_url": "https://api.github.com/users/apaprocki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apaprocki/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-25T13:33:47Z",
    "updated_at": "2016-02-25T13:33:47Z",
    "body": "@thestinger I recently just hit this -- the issue comes up inside of packaging systems. I am trying to package `rustc` in a Debian-like dpkg system and there is no `/proc` available, so it fails when `stage0` reaches this code. Ideally (what we have done with other products), is that if `/proc` is missing, it will look at the 0th argument ($0) and if that contains a fully qualified pathname, that pathname will be used instead. We guarantee that inside the `chroot`, the executables will be invoked via the fully qualified path.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/188786882/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/289921827",
    "html_url": "https://github.com/rust-lang/rust/issues/1711#issuecomment-289921827",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1711",
    "id": 289921827,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTkyMTgyNw==",
    "user": {
      "login": "burz",
      "id": 1555326,
      "node_id": "MDQ6VXNlcjE1NTUzMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1555326?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/burz",
      "html_url": "https://github.com/burz",
      "followers_url": "https://api.github.com/users/burz/followers",
      "following_url": "https://api.github.com/users/burz/following{/other_user}",
      "gists_url": "https://api.github.com/users/burz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/burz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/burz/subscriptions",
      "organizations_url": "https://api.github.com/users/burz/orgs",
      "repos_url": "https://api.github.com/users/burz/repos",
      "events_url": "https://api.github.com/users/burz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/burz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-28T22:16:30Z",
    "updated_at": "2017-03-28T22:16:30Z",
    "body": "It seems like bad practice to attempt to determine the sysroot with `/proc`. Is there really no other way to determine this without having to resort to inspect the `rustc`'s `/proc` information itself on Unix-based systems?\r\n\r\nThis is a common issue with the Java infrastructure where many tools use `/proc` seemingly for no other reason other than the fact that it usually \"just works\". I hope rust doesn't follow Java down this path as well.\r\n\r\nAs @apaprocki mentions, this is a massive pain for package managers.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/289921827/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/328115713",
    "html_url": "https://github.com/rust-lang/rust/issues/1711#issuecomment-328115713",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1711",
    "id": 328115713,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyODExNTcxMw==",
    "user": {
      "login": "Sjord",
      "id": 113030,
      "node_id": "MDQ6VXNlcjExMzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/113030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjord",
      "html_url": "https://github.com/Sjord",
      "followers_url": "https://api.github.com/users/Sjord/followers",
      "following_url": "https://api.github.com/users/Sjord/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjord/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjord/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjord/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjord/orgs",
      "repos_url": "https://api.github.com/users/Sjord/repos",
      "events_url": "https://api.github.com/users/Sjord/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjord/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-09-08T14:18:55Z",
    "updated_at": "2017-09-08T14:18:55Z",
    "body": "I also got this error. This happened because I was in a chroot without proc mounted. After mounting a proc directory (`mount proc proc -t proc`) it worked as expected.\r\n\r\n```\r\n# cargo install debcargo --verbose\r\n    Updating registry `https://github.com/rust-lang/crates.io-index`\r\n  Installing debcargo v1.3.0\r\nerror: failed to compile `debcargo v1.3.0`, intermediate artifacts can be found at `/tmp/cargo-install.euHYP8eHfK7K`\r\n\r\nCaused by:\r\n  failed to run `rustc` to learn about target-specific information\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc - --crate-name ___ --print=file-names --crate-type bin --crate-type rlib --target x86_64-unknown-linux-gnu` (exit code: 101)\r\n--- stderr\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nthread 'rustc' panicked at 'src/librustc/session/filesearch.rs:164: can't determine value for sysroot', src/librustc/session/mod.rs:839\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n\r\n```",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/328115713/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
