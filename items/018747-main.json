{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/18747",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/18747/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/18747/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/18747/events",
  "html_url": "https://github.com/rust-lang/rust/pull/18747",
  "id": 48128325,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MjQwODA3OTQ=",
  "number": 18747,
  "title": "Ringbuf remove option<T>",
  "user": {
    "login": "ghost",
    "id": 10137,
    "node_id": "MDQ6VXNlcjEwMTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ghost",
    "html_url": "https://github.com/ghost",
    "followers_url": "https://api.github.com/users/ghost/followers",
    "following_url": "https://api.github.com/users/ghost/following{/other_user}",
    "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
    "organizations_url": "https://api.github.com/users/ghost/orgs",
    "repos_url": "https://api.github.com/users/ghost/repos",
    "events_url": "https://api.github.com/users/ghost/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ghost/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 29,
  "created_at": "2014-11-07T20:41:27Z",
  "updated_at": "2014-11-17T00:51:11Z",
  "closed_at": "2014-11-17T00:16:43Z",
  "author_association": "NONE",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/18747",
    "html_url": "https://github.com/rust-lang/rust/pull/18747",
    "diff_url": "https://github.com/rust-lang/rust/pull/18747.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/18747.patch",
    "merged_at": "2014-11-17T00:16:48Z"
  },
  "body": "Fix for task in Metabug #18009 (Rebased version of https://github.com/rust-lang/rust/pull/18170)\n\nThis changes much of about how RingBuf functions. `lo`, `nelts` are replaced by a more traditional `head` and`tail`. The `Vec<Option<T>>` is replaced by a bare pointer that is managed by the `RingBuf` itself. This also expects the ring buffer to always be size that is a power of 2.\n\nThis change also includes a number of new tests to cover the some areas that could be of concern with manual memory management.\n\nThe benchmarks have been reworked since the old ones were benchmarking of the Ring buffers growth rather then the actual test.\n\nThe unit test suite have been expanded, and exposed some bugs in `fn get()` and `fn get_mut()`\n## Benchmark\n\n**Before:**\n\n```\ntest ring_buf::tests::bench_grow_1025                      ... bench:      8919 ns/iter (+/- 87)\ntest ring_buf::tests::bench_iter_1000                      ... bench:       924 ns/iter (+/- 28)\ntest ring_buf::tests::bench_mut_iter_1000                  ... bench:       918 ns/iter (+/- 6)\ntest ring_buf::tests::bench_new                            ... bench:        15 ns/iter (+/- 0)\ntest ring_buf::tests::bench_pop_100                        ... bench:       294 ns/iter (+/- 9)\ntest ring_buf::tests::bench_pop_front_100                  ... bench:       948 ns/iter (+/- 32)\ntest ring_buf::tests::bench_push_back_100                  ... bench:       291 ns/iter (+/- 16)\ntest ring_buf::tests::bench_push_front_100                 ... bench:       311 ns/iter (+/- 27\n```\n\n**After:**\n\n```\ntest ring_buf::tests::bench_grow_1025                      ... bench:      2209 ns/iter (+/- 169)\ntest ring_buf::tests::bench_iter_1000                      ... bench:       534 ns/iter (+/- 27)\ntest ring_buf::tests::bench_mut_iter_1000                  ... bench:       515 ns/iter (+/- 28)\ntest ring_buf::tests::bench_new                            ... bench:        11 ns/iter (+/- 0)\ntest ring_buf::tests::bench_pop_100                        ... bench:       170 ns/iter (+/- 5)\ntest ring_buf::tests::bench_pop_front_100                  ... bench:       171 ns/iter (+/- 11)\ntest ring_buf::tests::bench_push_back_100                  ... bench:       172 ns/iter (+/- 13)\ntest ring_buf::tests::bench_push_front_100                 ... bench:       158 ns/iter (+/- 12)\n\n```\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/18747/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/18747/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
