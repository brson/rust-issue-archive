[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12033593",
    "html_url": "https://github.com/rust-lang/rust/issues/4395#issuecomment-12033593",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4395",
    "id": 12033593,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMDMzNTkz",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-01-09T06:48:39Z",
    "updated_at": "2013-01-09T06:48:39Z",
    "body": "Sounds good to me. I guess this would discard the module path, so you can define a `#[no_mangle]` function anywhere?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12033593/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12048914",
    "html_url": "https://github.com/rust-lang/rust/issues/4395#issuecomment-12048914",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4395",
    "id": 12048914,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMDQ4OTE0",
    "user": {
      "login": "alexrp",
      "id": 44076,
      "node_id": "MDQ6VXNlcjQ0MDc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/44076?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexrp",
      "html_url": "https://github.com/alexrp",
      "followers_url": "https://api.github.com/users/alexrp/followers",
      "following_url": "https://api.github.com/users/alexrp/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexrp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexrp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexrp/subscriptions",
      "organizations_url": "https://api.github.com/users/alexrp/orgs",
      "repos_url": "https://api.github.com/users/alexrp/repos",
      "events_url": "https://api.github.com/users/alexrp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexrp/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-01-09T15:25:55Z",
    "updated_at": "2013-01-09T15:25:55Z",
    "body": "(I'm not entirely up to date on the state of Rust's FFI, so take this comment with a grain of salt.)\n\nI think mangling should be implied by the ABI of a function. Most calling conventions (on x86) carry particular mangling requirements - it just so happens that `cdecl` on most platforms means \"no mangling\". I think it will very rarely be useful to have a function be mangled in a particular way (or not at all) while having some arbitrary calling convention.\n\nIn D land, for example, marking a function `extern (C)` means that it will follow the calling convention and mangling rules of the target platform. There is no way to control mangling separately. I think that's a good thing since it encourages portable code.\n\nTo give a concrete example: If you created an `SDL_main` function, marked it as `no_mangle`, and tried to access it as `extern void SDL_main(...);` from C, it would work fine on Linux, but not on OS X since OS X's C ABI implicitly prefixes symbols with `_`.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12048914/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12053074",
    "html_url": "https://github.com/rust-lang/rust/issues/4395#issuecomment-12053074",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4395",
    "id": 12053074,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMDUzMDc0",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-01-09T16:41:06Z",
    "updated_at": "2013-01-09T16:42:26Z",
    "body": "@alexrp What about the case of a callback you want to be executed by C (so it must have the C ABI), but you don't care about its name, because you're passing the function by pointer? This is the case with every single callback we've defined up to now, so this isn't a \"very rare\" thing at all.\n\nI'm concerned here about multiple crates defining a one-off callback with C ABI to hand to a C function and calling it, say, `callback`, and then having trouble at link time. Whereas if the functions named `callback` were mangled, everything would work fine.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12053074/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12054451",
    "html_url": "https://github.com/rust-lang/rust/issues/4395#issuecomment-12054451",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4395",
    "id": 12054451,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMDU0NDUx",
    "user": {
      "login": "alexrp",
      "id": 44076,
      "node_id": "MDQ6VXNlcjQ0MDc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/44076?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexrp",
      "html_url": "https://github.com/alexrp",
      "followers_url": "https://api.github.com/users/alexrp/followers",
      "following_url": "https://api.github.com/users/alexrp/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexrp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexrp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexrp/subscriptions",
      "organizations_url": "https://api.github.com/users/alexrp/orgs",
      "repos_url": "https://api.github.com/users/alexrp/repos",
      "events_url": "https://api.github.com/users/alexrp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexrp/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-01-09T17:01:03Z",
    "updated_at": "2013-01-09T17:01:03Z",
    "body": "> This is the case with every single callback we've defined up to now, so this isn't a \"very rare\" thing at all.\n\nOK. I just went by my own experience and what I've seen in D land in particular (a lot of people seem to interface back and forth between C and D code). This may well be different in Rust land.\n\n> I'm concerned here about multiple crates defining a one-off callback with C ABI to hand to a C function and calling it, say, callback, and then having trouble at link time. Whereas if the functions named callback were mangled, everything would work fine.\n\nThat's a reasonable concern... maybe non-Rust-linkage symbols could have their name set to `full_module_name_actual_symbol_name` or something along those lines, e.g. a function `foo` in `bar::baz` would become `bar_baz_foo` (it would still be subject to ABI quirks such as a `_` prefix and so on). Then you'd have to try very, very hard to get a collision. I think it even makes a lot of sense to prefix symbols with their module name.\n\nWith such an approach, you could then have a `#[no_module_prefix]` or so that makes the aforementioned `foo` function just `foo` if really needed (and still subject to ABI quirks - I still think having a raw \"no mangling at all\" attribute is a bad idea).\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12054451/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12061303",
    "html_url": "https://github.com/rust-lang/rust/issues/4395#issuecomment-12061303",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4395",
    "id": 12061303,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMDYxMzAz",
    "user": {
      "login": "eholk",
      "id": 105766,
      "node_id": "MDQ6VXNlcjEwNTc2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eholk",
      "html_url": "https://github.com/eholk",
      "followers_url": "https://api.github.com/users/eholk/followers",
      "following_url": "https://api.github.com/users/eholk/following{/other_user}",
      "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eholk/subscriptions",
      "organizations_url": "https://api.github.com/users/eholk/orgs",
      "repos_url": "https://api.github.com/users/eholk/repos",
      "events_url": "https://api.github.com/users/eholk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eholk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-01-09T19:10:21Z",
    "updated_at": "2013-01-09T19:10:21Z",
    "body": "`#[no_mangle]` would be helpful in our Rust-on-GPU project, although there are probably better ways to solve our particular problem.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12061303/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12061692",
    "html_url": "https://github.com/rust-lang/rust/issues/4395#issuecomment-12061692",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4395",
    "id": 12061692,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMDYxNjky",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-01-09T19:19:10Z",
    "updated_at": "2013-01-09T19:19:10Z",
    "body": "Is adding the `_` prefix on OS X something we have to do explicitly in rustc or does llvm do it? I am imagining that this is done at the LLVM level.\n\nI would basically expect `#[no_mangle]` to follow the platform's C conventions, so I am partially persuaded by @alexrp's argument. But I also agree with concerns that not mangling so many symbols will interfere with symbol-level versioning.\n\nWe could alternately have a `#[symbol_name = \"\"]` attribute.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/12061692/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/14789547",
    "html_url": "https://github.com/rust-lang/rust/issues/4395#issuecomment-14789547",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4395",
    "id": 14789547,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0Nzg5NTQ3",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-03-12T17:23:23Z",
    "updated_at": "2013-03-12T17:23:23Z",
    "body": "Doing it one-symbol-at-a-time risks the following:\n\n```\n#[symbol_name=\"foo\"] extern fn foo() { ... }\n#[symbol_name=\"bar\"] extern fn bar() { ... }\n#[symbol_name=\"baz\"] extern fn baz() { ... }\n```\n\nwhich I can see getting a bit chatty for someone doing a library in rust that they intend to have a lot of C callers-of. Possibly combine with an attribute `#[symbol_names=\"style\"]` that inherits through modules (so you can just write it once at a module level) and provides a few options: \"simple\", \"qualified\", \"mangled\"?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/14789547/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16872591",
    "html_url": "https://github.com/rust-lang/rust/issues/4395#issuecomment-16872591",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4395",
    "id": 16872591,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2ODcyNTkx",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-04-23T17:17:27Z",
    "updated_at": "2013-04-23T17:17:27Z",
    "body": "This is implemented now.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16872591/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
