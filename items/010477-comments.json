[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28466436",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-28466436",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 28466436,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDY2NDM2",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-14T08:18:21Z",
    "updated_at": "2013-11-14T08:18:21Z",
    "body": "@ktt3ja Great! I'll take a look at this in the morning.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28466436/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28468673",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-28468673",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 28468673,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDY4Njcz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-14T09:02:18Z",
    "updated_at": "2013-11-14T09:02:18Z",
    "body": "This seems like it copies a fair bit of code from `middle::reachable` (include the `XXX(pcwalton)` comment), which seems unfortunate. I'd much rather see this functionality refactored into a common location, or possibly have one of these compiler passes propagate information to the other pass.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28468673/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28471698",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-28471698",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 28471698,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDcxNjk4",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-14T09:57:50Z",
    "updated_at": "2013-11-14T10:13:37Z",
    "body": "Some test-case ideas:\n- all the types of entry points are handled correctly, i.e. files with `#[main] fn something_thats_not_main() {}`, and `#[start] fn start(_: int, _: **u8) -> int { 0 }`.\n- using/not using methods, functions, enums, structs (etc) doesn't warn/warns as appropriate.\n- groups of items which are only used amongst themselves warn, i.e. everything other than `main` should be warned about:\n  \n  ``` rust\n  struct Foo;\n  impl Foo { fn foo(&self) { bar() } }\n  fn bar() {\n     fn baz() {}\n  \n     Foo.foo();\n     baz();\n  }\n  \n  fn main() {}\n  ```\n- A group of items that call each other where only a few are directly used (e.g. the above with `fn main() { bar() }` should warn about nothing)\n- Unused inner items are warned about (e.g. `baz` above)\n- Similar things with libraries, along with:\n  -  `pub` items that aren't called anywhere aren't warned about (i.e. exported but not used)\n  - otherwise private things that are reexported with `pub use` aren't warned about, e.g.\n    \n    ``` rust\n    #[crate_type=\"lib\"];\n    pub use foo::Bar;\n    mod foo {\n        pub struct Bar; // not externally visible without the `pub use`\n    }\n    ```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28471698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28507575",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-28507575",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 28507575,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTA3NTc1",
    "user": {
      "login": "ktt3ja",
      "id": 1735399,
      "node_id": "MDQ6VXNlcjE3MzUzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1735399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ktt3ja",
      "html_url": "https://github.com/ktt3ja",
      "followers_url": "https://api.github.com/users/ktt3ja/followers",
      "following_url": "https://api.github.com/users/ktt3ja/following{/other_user}",
      "gists_url": "https://api.github.com/users/ktt3ja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ktt3ja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ktt3ja/subscriptions",
      "organizations_url": "https://api.github.com/users/ktt3ja/orgs",
      "repos_url": "https://api.github.com/users/ktt3ja/repos",
      "events_url": "https://api.github.com/users/ktt3ja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ktt3ja/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-14T18:08:17Z",
    "updated_at": "2013-11-14T18:08:17Z",
    "body": "@alexcrichton: I wanted to see how the final code would take shape before thinking of refactoring. If it turns out that the propagation logic does not need to change at all, then I think it would be as simple as modifying reachable::ReachableContext to take in a visitor and then pass in my own visitor. (that would require making reachable::ReachableContext pub, though, which I'm not sure would be fine)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28507575/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28508397",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-28508397",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 28508397,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTA4Mzk3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-14T18:18:18Z",
    "updated_at": "2013-11-14T18:18:18Z",
    "body": "Certainly! That sounds like a good strategy to me (thanks!)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28508397/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28549460",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-28549460",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 28549460,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTQ5NDYw",
    "user": {
      "login": "ktt3ja",
      "id": 1735399,
      "node_id": "MDQ6VXNlcjE3MzUzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1735399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ktt3ja",
      "html_url": "https://github.com/ktt3ja",
      "followers_url": "https://api.github.com/users/ktt3ja/followers",
      "following_url": "https://api.github.com/users/ktt3ja/following{/other_user}",
      "gists_url": "https://api.github.com/users/ktt3ja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ktt3ja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ktt3ja/subscriptions",
      "organizations_url": "https://api.github.com/users/ktt3ja/orgs",
      "repos_url": "https://api.github.com/users/ktt3ja/repos",
      "events_url": "https://api.github.com/users/ktt3ja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ktt3ja/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-15T06:07:45Z",
    "updated_at": "2013-11-15T21:53:46Z",
    "body": "@alexcrichton: It looks like I have to change ReachableContext a bit more to make dead-code warning pass works. In particular, I need to replace the lines\n\n``` rust\nfor method in methods.iter() {\n    self.worklist.push(method.id);\n}\n```\n\nin [reachable](https://github.com/mozilla/rust/blob/master/src/librustc/middle/reachable.rs#L295-L297) with\n\n``` rust\nfor method in methods.iter() {\n    match method.vis {\n        ast::public => {\n            self.worklist.push(method.id);\n        }\n        _ => (),\n    }\n}\n```\n\nHowever, I'm not sure if it's going to break something, so I would like you to give comment on that (I tried to run `make check` to be sure, but my own dead-code warning pass prevent it from finishing; it gave error on [this](https://github.com/mozilla/rust/blob/master/src/librustpkg/lib.rs#L193-L195) and [this](https://github.com/mozilla/rust/blob/master/src/librustpkg/lib.rs#L930-L937). EDIT: I ran `make check` and there was no error; should I be sufficiently confident that it works?). Anyway, from what I understand about reachable.rs, for the following code\n\n``` rust\npub struct Foo;\nimpl Foo { fn baz(); }\n```\n\nthe method `baz` would be reachable. I'm not sure if `baz` is supposed to be reachable, but I know that it should dead.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28549460/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28619597",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-28619597",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 28619597,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjE5NTk3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-16T04:34:39Z",
    "updated_at": "2013-11-16T04:34:39Z",
    "body": "I'm fairly confident that it's possible to do that without breaking things, but I would rather not have anything look at privacy after the privacy pass. That should be possible by checking if the method is within the `exported_items` array I believe.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28619597/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28625153",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-28625153",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 28625153,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjI1MTUz",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-16T11:56:15Z",
    "updated_at": "2013-11-16T11:56:15Z",
    "body": "I was thinking test6 would be\n\n``` rust\n#[crate_type=\"lib\"];\npub use foo::Bar;\nmod foo {\n    pub struct Bar;\n}\n```\n\nand so it shouldn't warn. (Although, the one you have there should warn, I would think.)\n\nBTW, you should add these test cases to `src/test/compile-fail`, `lint-dead-code-1.rs` etc, you can see `lint-unused-mut-variables.rs` for an example (or any of the files there really). [Note testsuite](https://github.com/mozilla/rust/wiki/Note-testsuite#language-and-compiler-tests) describes some how they work.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28625153/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28625233",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-28625233",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 28625233,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjI1MjMz",
    "user": {
      "login": "ktt3ja",
      "id": 1735399,
      "node_id": "MDQ6VXNlcjE3MzUzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1735399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ktt3ja",
      "html_url": "https://github.com/ktt3ja",
      "followers_url": "https://api.github.com/users/ktt3ja/followers",
      "following_url": "https://api.github.com/users/ktt3ja/following{/other_user}",
      "gists_url": "https://api.github.com/users/ktt3ja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ktt3ja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ktt3ja/subscriptions",
      "organizations_url": "https://api.github.com/users/ktt3ja/orgs",
      "repos_url": "https://api.github.com/users/ktt3ja/repos",
      "events_url": "https://api.github.com/users/ktt3ja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ktt3ja/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-16T12:01:35Z",
    "updated_at": "2013-11-16T12:05:02Z",
    "body": "Ah, I'm sorry. I deleted the comment since I was going to fix something first before notifying you. Here's the comment that huonw responded to (that I modified a bit at the end):\n\n@huonw: With the latest commit, here's my current progress: the code from original post produces the same error message. Here are test2.rs and its warning:\n\n``` rust\nfn dead_fn() {\n}\n\nfn used_fn() {\n}\n\n#[main]\nfn this_is_main() {\n    used_fn();\n}\n\n// this is not main\nfn main() {\n    dead_fn();\n}\n```\n\n``` rust\n/home/ktt3ja/dead-code-test/test2.rs:1:0: 2:1 warning: code is never used: `dead_fn`, #[warn(dead_code)] on by default\n/home/ktt3ja/dead-code-test/test2.rs:1 fn dead_fn() {\n/home/ktt3ja/dead-code-test/test2.rs:2 }\n/home/ktt3ja/dead-code-test/test2.rs:13:0: 1:0 warning: code is never used: `main`, #[warn(dead_code)] on by default\n```\n\ntest3.rs:\n\n``` rust\nfn dead_fn() {\n}\n\n#[main]\nfn dead_fn2() {\n} \n\nfn used_fn() {\n}\n\n#[start]\nfn start(_: int, _: **u8) -> int {\n    used_fn();\n    0\n}\n\n// this is not main\nfn main() {\n    dead_fn();\n    dead_fn2();\n}\n```\n\n``` rust\n/home/ktt3ja/dead-code-test/test3.rs:1:0: 2:1 warning: code is never used: `dead_fn`, #[warn(dead_code)] on by default\n/home/ktt3ja/dead-code-test/test3.rs:1 fn dead_fn() {\n/home/ktt3ja/dead-code-test/test3.rs:2 }\n/home/ktt3ja/dead-code-test/test3.rs:5:0: 6:1 warning: code is never used: `dead_fn2`, #[warn(dead_code)] on by default\n/home/ktt3ja/dead-code-test/test3.rs:5 fn dead_fn2() {\n/home/ktt3ja/dead-code-test/test3.rs:6 } \n/home/ktt3ja/dead-code-test/test3.rs:18:0: 1:0 warning: code is never used: `main`, #[warn(dead_code)] on by default\n```\n\ntest4.rs\n\n``` rust\nstruct Foo;\nimpl Foo { fn foo(&self) { bar() } }\nfn bar() {\n   fn baz() {}\n\n   Foo.foo();\n   baz();\n}\n\nfn main() {}\n\n\nstruct Foo2;\nimpl Foo2 { fn foo2(&self) { bar2() } }\nfn bar2() {\n   fn baz2() {}\n\n   Foo2.foo2();\n   baz2();\n}\n\npub fn pub_fn() {\n    let foo2_struct = Foo2;\n    foo2_struct.foo2();\n}\n```\n\n``` rust\n/home/ktt3ja/dead-code-test/test4.rs:1:0: 1:11 warning: code is never used: `Foo`, #[warn(dead_code)] on by default\n/home/ktt3ja/dead-code-test/test4.rs:1 struct Foo;\n                                       ^~~~~~~~~~~\n/home/ktt3ja/dead-code-test/test4.rs:2:11: 2:34 warning: code is never used: `foo`, #[warn(dead_code)] on by default\n/home/ktt3ja/dead-code-test/test4.rs:2 impl Foo { fn foo(&self) { bar() } }\n                                                  ^~~~~~~~~~~~~~~~~~~~~~~\n/home/ktt3ja/dead-code-test/test4.rs:3:0: 8:1 warning: code is never used: `bar`, #[warn(dead_code)] on by default\n/home/ktt3ja/dead-code-test/test4.rs:3 fn bar() {\n/home/ktt3ja/dead-code-test/test4.rs:4    fn baz() {}\n/home/ktt3ja/dead-code-test/test4.rs:5 \n/home/ktt3ja/dead-code-test/test4.rs:6    Foo.foo();\n/home/ktt3ja/dead-code-test/test4.rs:7    baz();\n/home/ktt3ja/dead-code-test/test4.rs:8 }\n/home/ktt3ja/dead-code-test/test4.rs:4:3: 4:14 warning: code is never used: `baz`, #[warn(dead_code)] on by default\n/home/ktt3ja/dead-code-test/test4.rs:4    fn baz() {}\n                                          ^~~~~~~~~~~\n```\n\ntest5.rs\n\n``` rust\nstruct Foo;\n\nimpl Foo {\n    pub fn foo1() {}\n    fn foo2() {}\n}\n\nfn main() {\n\n}\n```\n\n``` rust\n/home/ktt3ja/dead-code-test/test5.rs:1:0: 1:11 warning: code is never used: `Foo`, #[warn(dead_code)] on by default\n/home/ktt3ja/dead-code-test/test5.rs:1 struct Foo;\n                                       ^~~~~~~~~~~\n/home/ktt3ja/dead-code-test/test5.rs:5:1: 5:13 warning: code is never used: `foo2`, #[warn(dead_code)] on by default\n/home/ktt3ja/dead-code-test/test5.rs:5  fn foo2() {}\n                                        ^~~~~~~~~~~~\n```\n\nand test6.rs\n\n``` rust\n#[crate_type=\"lib\"];\nmod foo {\n    pub struct Bar; // not externally visible without the `pub use`\n}\n```\n\nproduces no dead-code warning.\n\nI think that covers almost everything. Perhaps the `foo1` method in test5 and the `Bar` struct in test6 should be warned. The problem is that they come from `exported_items`, which get seeded into the worklist initially. I can handle the `foo1` case by checking that the item is a method, but I'm not sure how to handle the `Bar` case.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28625233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29564531",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-29564531",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 29564531,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NTY0NTMx",
    "user": {
      "login": "ktt3ja",
      "id": 1735399,
      "node_id": "MDQ6VXNlcjE3MzUzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1735399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ktt3ja",
      "html_url": "https://github.com/ktt3ja",
      "followers_url": "https://api.github.com/users/ktt3ja/followers",
      "following_url": "https://api.github.com/users/ktt3ja/following{/other_user}",
      "gists_url": "https://api.github.com/users/ktt3ja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ktt3ja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ktt3ja/subscriptions",
      "organizations_url": "https://api.github.com/users/ktt3ja/orgs",
      "repos_url": "https://api.github.com/users/ktt3ja/repos",
      "events_url": "https://api.github.com/users/ktt3ja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ktt3ja/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-01T00:34:42Z",
    "updated_at": "2013-12-01T00:34:42Z",
    "body": "r? @alexcrichton and @huonw \n\nA few things that need mentioning:\n- I have modified reachable more than I had hoped. It now may be too cluttered with the `dead_code_pass` boolean.\n- As indicated in `MarkTraitMethodVisitor`, I mark all implemented methods of a trait as live. I figured that due to dynamic dispatch, we can never be sure such methods are alive or not, and so this is a desirable behavior.\n- When I was removing dead codes, I would search around to see if they were used or not. I removed them in most of the cases. In some cases, I added, e.g., `#[cfg(windows)]`. The codes that are not currently in used but may be useful if they remain visible are commented out (see `libstd/num/f32.rs`; in this respect, I'm not sure if it was right to remove instead of comment out the static items from, e.g., `libextra/flate.rs`). I put `#[allow(dead_code)];` in places I'm unsure about (`libextra/btree.rs`) or places I _guess_ to be undergoing a lot of changes (`libstd/rt/*`).\n- The dead-code pass that I used to check for dead codes is slightly different from the one that you see now. It used to warn differently depending on whether the crate is built as library or as bin (it essentially uses the check inside `ReachableContext::propagate_node`). However, since it didn't pass the test on `try` buildbot, I changed it so that the warning is the same always. The old behavior is probably too confusing anyway, and it may be better to leverage it to some kind of flag instead.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29564531/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29567647",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-29567647",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 29567647,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NTY3NjQ3",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-01T05:17:37Z",
    "updated_at": "2013-12-01T05:17:37Z",
    "body": "It seems ok to me, and the tests look good; but I don't have enough familiarity with these parts of rustc to r+.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29567647/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29568106",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-29568106",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 29568106,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NTY4MTA2",
    "user": {
      "login": "ktt3ja",
      "id": 1735399,
      "node_id": "MDQ6VXNlcjE3MzUzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1735399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ktt3ja",
      "html_url": "https://github.com/ktt3ja",
      "followers_url": "https://api.github.com/users/ktt3ja/followers",
      "following_url": "https://api.github.com/users/ktt3ja/following{/other_user}",
      "gists_url": "https://api.github.com/users/ktt3ja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ktt3ja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ktt3ja/subscriptions",
      "organizations_url": "https://api.github.com/users/ktt3ja/orgs",
      "repos_url": "https://api.github.com/users/ktt3ja/repos",
      "events_url": "https://api.github.com/users/ktt3ja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ktt3ja/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-01T06:04:46Z",
    "updated_at": "2013-12-01T06:04:46Z",
    "body": "Forgot to mention: it's still missing a test with `extern {}` block, but I don't know how to put one in there that does not cause linking error.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29568106/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29571638",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-29571638",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 29571638,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NTcxNjM4",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-01T11:10:54Z",
    "updated_at": "2013-12-01T11:10:54Z",
    "body": "Something like\n\n``` rust\nextern { fn abort() -> !; }\n```\n\nwhich imports a symbol from libc should be ok, or, if it's not, using a compiler-internal `rust-intrinsic`:\n\n``` rust\nextern \"rust-intrinsic\" { fn transmute<A,B>(x: A) -> B; }\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29571638/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29651255",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-29651255",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 29651255,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjUxMjU1",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-02T19:52:32Z",
    "updated_at": "2013-12-02T19:52:32Z",
    "body": "Two more high-level comments:\n- I agree that reachability and deadness are getting a little special cased, so it looks like the dead code pass may just want to be its own standalone pass (how much does it still share with reachability?)\n- There is a much larger use of `allow(dead_code)` than I would expect throughout the codebase. I think this may be a sign that this should be an allow-by-default lint. It appears there are a large number of cases in which dead code isn't really a bad thing. On the other hand, periodically running the dead code lint looks like it can be amazingly useful! You certainly found _a lot_ of code that has long since been dead.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29651255/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29668507",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-29668507",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 29668507,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjY4NTA3",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-02T23:16:45Z",
    "updated_at": "2013-12-02T23:16:45Z",
    "body": "> There is a much larger use of allow(dead_code) than I would expect throughout the codebase. I think this may be a sign that this should be an allow-by-default lint. It appears there are a large number of cases in which dead code isn't really a bad thing. On the other hand, periodically running the dead code lint looks like it can be amazingly useful! You certainly found a lot of code that has long since been dead.\n\nI think this is mostly just because making the decisions about whether something is supposed to be removed or not is hard for someone who's just starting out with the Rust code base (i.e. @ktt3ja), _and_ it gets fairly tiresome. (This is me voting for warn by default.)\n\n(That is, people who are familiar with the various areas can go through and progressively remove the dead code, and adjust the code that's not supposed to be dead.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29668507/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29670604",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-29670604",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 29670604,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjcwNjA0",
    "user": {
      "login": "ktt3ja",
      "id": 1735399,
      "node_id": "MDQ6VXNlcjE3MzUzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1735399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ktt3ja",
      "html_url": "https://github.com/ktt3ja",
      "followers_url": "https://api.github.com/users/ktt3ja/followers",
      "following_url": "https://api.github.com/users/ktt3ja/following{/other_user}",
      "gists_url": "https://api.github.com/users/ktt3ja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ktt3ja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ktt3ja/subscriptions",
      "organizations_url": "https://api.github.com/users/ktt3ja/orgs",
      "repos_url": "https://api.github.com/users/ktt3ja/repos",
      "events_url": "https://api.github.com/users/ktt3ja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ktt3ja/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-02T23:49:13Z",
    "updated_at": "2013-12-02T23:53:11Z",
    "body": "huonw is right about why there are so many `allow(dead_code)`. For the most part, I just estimated and prayed that nothing break.\n\n> I agree that reachability and deadness are getting a little special cased, so it looks like the dead code pass may just want to be its own standalone pass (how much does it still share with reachability?)\n\nThe dead-code pass is already a standalone pass. The differences between them are:\n1. When seeding the worklist at the beginning, dead-code pass also seeds the entry point and implemented trait methods\n2. Dead-code pass propagates more and is more lenient when propagating, as seen by the changes in `ReachableContext::propagate_inner`\n3. Dead-code pass's `MarkSymbolVisitor` also visit type, as such there's a need to handle the `ast::DefPrimTy` case when looking up for `def_id`; also, when seeing an enum variant, dead-code pass inserts the enum's DefId to the live symbols set, whereas reachable pass inserts the variant's DefId to the reachable symbols set.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29670604/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29687847",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-29687847",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 29687847,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5Njg3ODQ3",
    "user": {
      "login": "ktt3ja",
      "id": 1735399,
      "node_id": "MDQ6VXNlcjE3MzUzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1735399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ktt3ja",
      "html_url": "https://github.com/ktt3ja",
      "followers_url": "https://api.github.com/users/ktt3ja/followers",
      "following_url": "https://api.github.com/users/ktt3ja/following{/other_user}",
      "gists_url": "https://api.github.com/users/ktt3ja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ktt3ja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ktt3ja/subscriptions",
      "organizations_url": "https://api.github.com/users/ktt3ja/orgs",
      "repos_url": "https://api.github.com/users/ktt3ja/repos",
      "events_url": "https://api.github.com/users/ktt3ja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ktt3ja/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-03T07:07:33Z",
    "updated_at": "2013-12-03T07:07:33Z",
    "body": "@alexcrichton: hm, it looks like github removed all the comments you made on my old commits and my responses to them. Anyway, I just updated my commits to reduce the amount of code duplication. Unfortunately, it involves littering `dead_code_pass` boolean throughout `middle::reachable` and does not look pretty. I also included the changes to reachable from PR https://github.com/mozilla/rust/pull/10777. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29687847/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30047602",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-30047602",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 30047602,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDQ3NjAy",
    "user": {
      "login": "ktt3ja",
      "id": 1735399,
      "node_id": "MDQ6VXNlcjE3MzUzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1735399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ktt3ja",
      "html_url": "https://github.com/ktt3ja",
      "followers_url": "https://api.github.com/users/ktt3ja/followers",
      "following_url": "https://api.github.com/users/ktt3ja/following{/other_user}",
      "gists_url": "https://api.github.com/users/ktt3ja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ktt3ja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ktt3ja/subscriptions",
      "organizations_url": "https://api.github.com/users/ktt3ja/orgs",
      "repos_url": "https://api.github.com/users/ktt3ja/repos",
      "events_url": "https://api.github.com/users/ktt3ja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ktt3ja/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-07T04:37:08Z",
    "updated_at": "2013-12-07T04:37:08Z",
    "body": "alexcrichton's comments on an older commit (that got deleted by github):\n\n> After reading this, I feel that trying to use a `middle::reachable` backend for both `middle::reachable` and `middle::dead` is not the right way to do this. These two passes are loosely based around propagation of reachability from an initial worklist, but they are distinct in their own separate ways:\n> - Reachability stops at all non-generic boundaries. The purpose of this pass is find _linker reachable_ code in the sense that downstream crates will attempt to link to particular symbols or items.\n> - Dead code stops at _no_ boundaries. The purpose of this pass is to find _all reachable_ code. \n> \n> These two passes to me are fundamentally different, and the code for propagation should not all get mixed together. There may be a need for a 'propagation' abstraction, but it honestly looks like the dead code pass should just look like:\n> \n> ```\n> while !worklist.empty()\n>    visit(worklist.pop());\n> ```\n> \n> The reachability pass has so many different special cases for dealing with monmorphization boundaries, that I think it's just the wrong direction to attempt to use all of that code.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30047602/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30047673",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-30047673",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 30047673,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDQ3Njcz",
    "user": {
      "login": "ktt3ja",
      "id": 1735399,
      "node_id": "MDQ6VXNlcjE3MzUzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1735399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ktt3ja",
      "html_url": "https://github.com/ktt3ja",
      "followers_url": "https://api.github.com/users/ktt3ja/followers",
      "following_url": "https://api.github.com/users/ktt3ja/following{/other_user}",
      "gists_url": "https://api.github.com/users/ktt3ja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ktt3ja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ktt3ja/subscriptions",
      "organizations_url": "https://api.github.com/users/ktt3ja/orgs",
      "repos_url": "https://api.github.com/users/ktt3ja/repos",
      "events_url": "https://api.github.com/users/ktt3ja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ktt3ja/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-07T04:43:04Z",
    "updated_at": "2013-12-07T04:43:04Z",
    "body": "@alexcrichton: r?\n\nI just updated my commit to separate out `middle::dead` and `middle::reachable`. There are some duplications between them again, but I don't think that's avoidable. However, now `middle::dead` seeds the worklist initially with reachable symbols rather than exported symbols, so any future changes to `middle::reachable` should reach `middle::dead`, and thus there's no danger of it reporting any reachable thing as dead.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30047673/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30048118",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-30048118",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 30048118,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDQ4MTE4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-07T05:17:06Z",
    "updated_at": "2013-12-07T05:17:06Z",
    "body": "Awesome work! Just ping me when my comments have been addressed, and I think this is good to go!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30048118/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30049068",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-30049068",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 30049068,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDQ5MDY4",
    "user": {
      "login": "ktt3ja",
      "id": 1735399,
      "node_id": "MDQ6VXNlcjE3MzUzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1735399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ktt3ja",
      "html_url": "https://github.com/ktt3ja",
      "followers_url": "https://api.github.com/users/ktt3ja/followers",
      "following_url": "https://api.github.com/users/ktt3ja/following{/other_user}",
      "gists_url": "https://api.github.com/users/ktt3ja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ktt3ja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ktt3ja/subscriptions",
      "organizations_url": "https://api.github.com/users/ktt3ja/orgs",
      "repos_url": "https://api.github.com/users/ktt3ja/repos",
      "events_url": "https://api.github.com/users/ktt3ja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ktt3ja/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-07T06:33:30Z",
    "updated_at": "2013-12-07T06:33:30Z",
    "body": "I'm going to repost one of your comments and respond to it here in case it gets deleted the next time I force push:\n\n> I'm not sure that you want to only recurse into modules. I can definitely imagine trait implementations inside of functions to be reachable (if rare). I'm not entirely certain why trait methods are all not dead (although I can guess as to why it's a tricky situation).\n> \n> I'm guessing though that you know why all trait methods are seeded, so do you know how trait implementations inside functions work into that reasoning?\n\nIt just didn't occur to me that you could implement trait inside function, that's why I only traversed module.\n\nI mark all trait methods as live because it seems to be the easiest course of action. I don't have sufficient understanding of static/dynamic dispatch (and how they are implemented), nor do I a solid enough model in my head to tackle this problem in a more detailed-oriented manner. Perhaps a stricter analysis would be something like this:\n1. If the trait is exported, then it follows that all the trait methods are live.\n2. If the trait is not exported, we would go see which trait methods are used throughout. Then we would go through all implementations and mark the implementation of all such trait methods as live. The other trait methods are considered dead.\n\nHowever, I think a justification to the current behavior is that traits define an interface, and defining an interface is ultimately a matter of design. I think usually someone would remove a required method from a trait definition if they are convinced that it wouldn't be useful, and conversely they would want to keep it if they feel that the method is fitting and will be used eventually. It would be awkward to warn dead code on a trait method implementation, then for someone to remove it they would have to remove the method from the trait definition and all the other trait implementations.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30049068/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30049136",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-30049136",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 30049136,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDQ5MTM2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-07T06:37:48Z",
    "updated_at": "2013-12-07T06:37:48Z",
    "body": "I think that assuming all trait implementations are \"live code\" is certainly ok for now. I'd just recommend recursing into inner functions as well.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30049136/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30071422",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-30071422",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 30071422,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDcxNDIy",
    "user": {
      "login": "ktt3ja",
      "id": 1735399,
      "node_id": "MDQ6VXNlcjE3MzUzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1735399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ktt3ja",
      "html_url": "https://github.com/ktt3ja",
      "followers_url": "https://api.github.com/users/ktt3ja/followers",
      "following_url": "https://api.github.com/users/ktt3ja/following{/other_user}",
      "gists_url": "https://api.github.com/users/ktt3ja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ktt3ja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ktt3ja/subscriptions",
      "organizations_url": "https://api.github.com/users/ktt3ja/orgs",
      "repos_url": "https://api.github.com/users/ktt3ja/repos",
      "events_url": "https://api.github.com/users/ktt3ja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ktt3ja/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-08T00:20:20Z",
    "updated_at": "2013-12-08T02:55:27Z",
    "body": "@alexcrichton: r+?\n\nMy previous changes (re-)introduced some problems that made bors fail to build. I have fixed them by:\n- Do not warn methods inside trait definition.\n- Seed the worklist with exported items to make warning more consistent. (otherwise, some items that are live when crate is built as library are then warned as dead when it's built as binary, and bors errors out)\n- Do not warn dead codes in doc.\n\nHere's the diff between my last commit and this one:\n\n``` diff\ndiff --git a/src/etc/extract-tests.py b/src/etc/extract-tests.py\nindex 5904e10..ab2556f 100644\n--- a/src/etc/extract-tests.py\n+++ b/src/etc/extract-tests.py\n@@ -64,6 +64,7 @@ while cur < len(lines):\n #[ allow(dead_assignment) ];\\n\n #[ allow(unused_mut) ];\\n\n #[ allow(attribute_usage) ];\\n\n+#[ allow(dead_code) ];\\n\n #[ feature(macro_rules, globs, struct_variant, managed_boxes) ];\\n\n \"\"\" + block\n             if xfail:\ndiff --git a/src/librustc/driver/driver.rs b/src/librustc/driver/driver.rs\nindex f07887c..e08726a 100644\n--- a/src/librustc/driver/driver.rs\n+++ b/src/librustc/driver/driver.rs\n@@ -312,7 +312,7 @@ pub fn phase_3_run_analysis_passes(sess: Session,\n\n     time(time_passes, \"death checking\", (), |_|\n          middle::dead::check_crate(ty_cx, method_map,\n-                                   reachable_map, crate));\n+                                   &exported_items, reachable_map, crate));\n\n     time(time_passes, \"lint checking\", (), |_|\n          lint::check_crate(ty_cx, &exported_items, crate));\ndiff --git a/src/librustc/middle/dead.rs b/src/librustc/middle/dead.rs\nindex 88b0a35..332b706 100644\n--- a/src/librustc/middle/dead.rs\n+++ b/src/librustc/middle/dead.rs\n@@ -196,31 +196,46 @@ impl Visitor<()> for TraitMethodSeeder {\n }\n\n fn create_and_seed_worklist(tcx: ty::ctxt,\n+                            exported_items: &privacy::ExportedItems,\n                             reachable_symbols: &HashSet<ast::NodeId>,\n                             crate: &ast::Crate) -> ~[ast::NodeId] {\n     let mut worklist = ~[];\n\n+    // Preferably, we would only need to seed the worklist with reachable\n+    // symbols. However, since the set of reachable symbols differs\n+    // depending on whether a crate is built as bin or lib, and we want\n+    // the warning to be consistent, we also seed the worklist with\n+    // exported symbols.\n+    for &id in exported_items.iter() {\n+        worklist.push(id);\n+    }\n     for &id in reachable_symbols.iter() {\n         worklist.push(id);\n     }\n+\n+    // Seed entry point\n     match *tcx.sess.entry_fn {\n         Some((id, _)) => worklist.push(id),\n         None => ()\n     }\n-    let mut trait_method_visitor = TraitMethodSeeder {\n+\n+    // Seed implemeneted trait methods\n+    let mut trait_method_seeder = TraitMethodSeeder {\n         worklist: worklist\n     };\n-    visit::walk_crate(&mut trait_method_visitor, crate, ());\n+    visit::walk_crate(&mut trait_method_seeder, crate, ());\n\n-    return trait_method_visitor.worklist;\n+    return trait_method_seeder.worklist;\n }\n\n fn find_live(tcx: ty::ctxt,\n              method_map: typeck::method_map,\n+             exported_items: &privacy::ExportedItems,\n              reachable_symbols: &HashSet<ast::NodeId>,\n              crate: &ast::Crate)\n              -> ~HashSet<ast::NodeId> {\n-    let worklist = create_and_seed_worklist(tcx, reachable_symbols, crate);\n+    let worklist = create_and_seed_worklist(tcx, exported_items,\n+                                            reachable_symbols, crate);\n     let mut symbol_visitor = MarkSymbolVisitor::new(tcx, method_map, worklist);\n     symbol_visitor.mark_live_symbols();\n     symbol_visitor.live_symbols\n@@ -315,13 +330,19 @@ impl Visitor<()> for DeadVisitor {\n         }\n         visit::walk_block(self, block, ());\n     }\n+\n+    fn visit_trait_method(&mut self, _ :&ast::trait_method, _: ()) {\n+        // Don't warn on trait method\n+    }\n }\n\n pub fn check_crate(tcx: ty::ctxt,\n                    method_map: typeck::method_map,\n                    exported_items: &privacy::ExportedItems,\n+                   reachable_symbols: &HashSet<ast::NodeId>,\n                    crate: &ast::Crate) {\n-    let live_symbols = find_live(tcx, method_map, exported_items, crate);\n+    let live_symbols = find_live(tcx, method_map, exported_items,\n+                                 reachable_symbols, crate);\n     let mut visitor = DeadVisitor { tcx: tcx, live_symbols: live_symbols };\n     visit::walk_crate(&mut visitor, crate, ());\n }\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30071422/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30077067",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-30077067",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 30077067,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDc3MDY3",
    "user": {
      "login": "ktt3ja",
      "id": 1735399,
      "node_id": "MDQ6VXNlcjE3MzUzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1735399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ktt3ja",
      "html_url": "https://github.com/ktt3ja",
      "followers_url": "https://api.github.com/users/ktt3ja/followers",
      "following_url": "https://api.github.com/users/ktt3ja/following{/other_user}",
      "gists_url": "https://api.github.com/users/ktt3ja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ktt3ja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ktt3ja/subscriptions",
      "organizations_url": "https://api.github.com/users/ktt3ja/orgs",
      "repos_url": "https://api.github.com/users/ktt3ja/repos",
      "events_url": "https://api.github.com/users/ktt3ja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ktt3ja/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-08T08:02:14Z",
    "updated_at": "2013-12-08T08:02:14Z",
    "body": "> This not only doesn't warn about trait methods, but this also doesn't recurse into trait methods at all. This means there could be lots of dead code in a trait method is ignored. I think that this should skip checking the trait method itself and then continue with the recursion. Either that, or you could set a temporary flag to get unset in visit_fn, but regardless I think that this shouldn't halt recursion entirely.\n\n@alexcrichton: sorry, I keep missing these small details. :(  Now I have it walk the body of a trait method. Is it okay now?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30077067/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30095637",
    "html_url": "https://github.com/rust-lang/rust/pull/10477#issuecomment-30095637",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10477",
    "id": 30095637,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDk1NjM3",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-08T22:58:57Z",
    "updated_at": "2013-12-08T22:58:57Z",
    "body": "\\o/\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30095637/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
