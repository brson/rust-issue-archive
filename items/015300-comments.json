[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47649459",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-47649459",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 47649459,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NjQ5NDU5",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-01T12:27:39Z",
    "updated_at": "2014-07-01T12:27:55Z",
    "body": "@chris-morgan's investigation on that SO question turned up this:\n\n``` rust\nfn foo(_: (), x: int) -> int {\n    x\n}\n\nfn main() {\n    let mut a = 1;\n    {\n        a * foo(a = 3, a)\n    };\n}\n```\n\nThe block evaluates to `9`, while I was expecting `3` with a ltr evaluation order.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47649459/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47650840",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-47650840",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 47650840,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NjUwODQw",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-01T12:43:15Z",
    "updated_at": "2014-07-01T12:43:15Z",
    "body": "For reference, some playing around with things: http://is.gd/ynMTY7\n\n``` rust\ntrait Actually {\n    fn actually<U: ::std::fmt::Show>(self, U) -> U;\n}\n\nimpl<T: ::std::fmt::Show> Actually for T {\n    fn actually<U: ::std::fmt::Show>(self, u: U) -> U {\n        println!(\"{} actually {}\", self, u);\n        u\n    }\n}\n\nfn main() {\n    let mut a;\n    // -13, 5, -13, 5, -23, 5, -23, 5, -8, 5.\n    println!(\"{}\", {a = 2i; a} - {a = 3; a} * {a = 5; a});\n    println!(\"{}\", a);\n    println!(\"{}\", (a = 2i).actually(a) - (a = 3).actually(a) * (a = 5).actually(a));\n    println!(\"{}\", a);\n    println!(\"{}\", {a = 2i; a} - a * {a = 5; a});\n    println!(\"{}\", a);\n    println!(\"{}\", (a = 2i).actually(a) - a * (a = 5).actually(a));\n    println!(\"{}\", a);\n    println!(\"{}\", (a = 2i).actually(a) - ().actually(a) * (a = 5).actually(a));\n    println!(\"{}\", a);\n\n    let mut a;\n    // These ones always end up as `false`\n    println!(\"{}\", {a = true; a} && {a = false; a});\n    println!(\"{}\", a);\n    println!(\"{}\", {a = false; a} && {a = true; a});\n    println!(\"{}\", a);\n    println!(\"{}\", (a = true).actually(a) && (a = false).actually(a));\n    println!(\"{}\", a);\n    println!(\"{}\", (a = false).actually(a) && (a = true).actually(a));\n    println!(\"{}\", a);\n\n    // These ones always end up as `true`\n    println!(\"{}\", {a = true; a} || {a = false; a});\n    println!(\"{}\", a);\n    println!(\"{}\", {a = false; a} || {a = true; a});\n    println!(\"{}\", a);\n    println!(\"{}\", (a = true).actually(a) || (a = false).actually(a));\n    println!(\"{}\", a);\n    println!(\"{}\", (a = false).actually(a) || (a = true).actually(a));\n    println!(\"{}\", a);\n}\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47650840/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47653746",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-47653746",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 47653746,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NjUzNzQ2",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-01T13:12:53Z",
    "updated_at": "2014-07-01T13:13:16Z",
    "body": "Ok, to expand on my comment above (inspired by the last two expressions in the numeric part of @chris-morgan's example), these two differ in evaluation order, even though the only difference is the introduction of the noop `foo((), ...)` around the `a` on the LHS:\n\n``` rust\nfn foo(_: (), x: int) -> int { x }\n\nfn main() {\n    let mut a = 2i;\n    println!(\"{}\", a * foo(a = 5, a)); // 25\n    a = 2i;\n    println!(\"{}\", foo((), a) * foo(a = 5, a)); // 10\n}\n```\n\nhttp://is.gd/zVdDoh\n\nNominating.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47653746/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47667442",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-47667442",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 47667442,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NjY3NDQy",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-01T15:03:57Z",
    "updated_at": "2014-07-01T15:03:57Z",
    "body": "cc me\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47667442/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47761458",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-47761458",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 47761458,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NzYxNDU4",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-02T10:45:03Z",
    "updated_at": "2014-07-02T10:45:03Z",
    "body": "While experimenting with evaluation order I (author of SO question) noticed some strange interaction with borrow checker. Consider the next code:\n\n```\nfn my_add(lhs : &int, rhs : &int) -> int { *lhs + *rhs }; // the same as built-in add\n\nlet mut a = 1i;\nlet b1 = my_add({a = 10; &mut a}, {a = 100; &mut a}); // custom add, does't compile, borrow checker is not pleased\nlet b2 = *{a = 10; &mut a} + *{a = 100; &mut a}; // built-in add, suspiciously compiles, modifying and borrowing \"a\" while already borrowed\n```\n\nBut built-in add is supposed to behave as if it was a function call to the corresponding method of Add trait, right?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47761458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47763524",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-47763524",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 47763524,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NzYzNTI0",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-02T11:11:29Z",
    "updated_at": "2014-07-02T11:13:30Z",
    "body": "@petrochenkov I suspect the reason for the discrepancy you are observing is two-fold.\n\nFirst, I do not think you are 100% correctly translating the infix-+ to a direct call to the function, at least in terms of how the compiler internally sees it.  I think the correct translation probably looks more like this:\n\n``` rust\n    let b3 = {\n        let tmp1 = *{a = 10; &mut a};\n        let tmp2 = *{a = 100; &mut a};\n        my_add(&tmp1, &tmp2)\n    };\n```\n\n(Or at least, the above does correspond to to the `*{a = 10; &mut a} + *{a = 100; &mut a}` in my head, and it successfully compiles in `rustc`.)\n\nNote in particular that I am dereferencing the `&mut a` and then reborrowing it immutably in the bindings of `tmp1` and `tmp2`; this is because I have just taken the input expressions you fed into your infix-add (which had derefence operations) and then explicitly added the borrows that the infix-add will put on itself when converting to the calls to the `fn add` method.\n\n---\n\nSecond, one _might_ think, \"okay, if what Felix said above works, then why didn't he write the desugaring this way:\"\n\n``` rust\n    let b4 = my_add(&*{a = 10; &mut a}, &*{a = 100; &mut a});\n```\n\nAnd indeed, I did sidestep that possible desugaring.  Or rather, I did that one first, myself, but it did not compile.  That might be related to the problem documented in #6268.  (Or it might not be; I thought it was at first, but on further examination I am not sure if it is or should be.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47763524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47765841",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-47765841",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 47765841,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NzY1ODQx",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-02T11:43:03Z",
    "updated_at": "2014-07-02T11:46:09Z",
    "body": "> > I think the correct translation probably looks more like this:\n> > let b3 = {\n> >        let tmp1 = *{a = 10; &mut a};\n> >        let tmp2 = *{a = 100; &mut a};\n> >        my_add(&tmp1, &tmp2)\n> >    };\n\nAha, it means that built-in add does \"lvalue to rvalue conversion\" (in C++ terms), then borrow checker is correct. But in this case built-in add doesn't implement Add trait, but something slightly different:\nfn add<int, int>(self, rhs: int) -> int; // arguments by value\ni.e. the same distinction between built-in and overloaded operators as in C++ takes place. Correct?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47765841/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47768143",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-47768143",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 47768143,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NzY4MTQz",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-02T12:12:28Z",
    "updated_at": "2014-07-02T12:14:23Z",
    "body": "@petrochenkov no, the infix-+ operator definitely implements the `Add` trait as specified.  (There is an on-going discussion about _changing_ the definition of `Add` so that it takes its inputs by value instead of by reference, but that is not the current state of things.)\n\nThe difference is that the infix-+ operator automatically adds the `&` to the inputs that you feed it, which is part of what I was trying to show you in my desugaring: note that I added `&` to each of the two input arguments when I passed them as `tmp1` and `tmp2`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47768143/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47768869",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-47768869",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 47768869,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NzY4ODY5",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-02T12:21:30Z",
    "updated_at": "2014-07-02T12:21:30Z",
    "body": "@petrochenkov Let me put this a different way: Whatever you do to translate `<A> + <B>` to `my_add(<C>, <D>)`, the expression `<A>` should appear directly within `<C>`, and likewise `<B>` should appear directly within `<D>`.\n\nBut in your in your original comparison, you had something that looked like:\n\n``` rust\nlet b1 = my_add(E1, E2);\nlet b2 = *E1 + *E2;\n```\n\nNote that `*E1` (the `<A>`) does not appear within `E1` (the `<C>`), and likewise `*E2` does not appear within `E2`.\n\nThis is why I re-wrote your example instead as something similar to:\n\n``` rust\nlet b3 = my_add(&*E1, &*E2);\n```\n\nso that now the `*E1` _does_ appear directly within `&*E1`.  And likewise `*E2` within `&*E2`.\n\nThis may seem like a minor detail, but the difference between `{ &mut foo }` and `&*{ &mut foo }` is quite significant.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47768869/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47776049",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-47776049",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 47776049,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3Nzc2MDQ5",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-02T13:35:14Z",
    "updated_at": "2014-07-03T06:54:03Z",
    "body": "@pnkfelix \n\n> > the difference between { &mut foo } and &*{ &mut foo } is quite significant.\n\nI understand - the mutability is different. But I'm still not convinced :)\nI'll try to follow the abstract evaluation step by step as I understand it. My assumptions are:\n- all the evaluations are sequenced, including built-in operations\n- int behaves as if it implemented Add trait exactly\n\n1) `my_add({a = 10; &mut a}, {a = 100; &mut a});`\na) the expression `{a = 10; &mut a}` (first argument) is evaluated, the result has type `&mut int` (let's cal it `b`)\nb) `b` is implicitly converted to `&int` (`c`), because my_add has `&int` as a first parameter\nc) `c` is saved to be later passed to my_add, i.e. `a` is borrowed as immutable now\nd) we can't evaluate `{a = 100; &mut a}`, because `a` is borrowed as immutable\n\n2) `*{a = 10; &mut a} + *{a = 100; &mut a}`\na) the expression *{a = 10; &mut a} is evaluated, the result is a mutable lvalue of type `int` (`b`)\nb) operator + under the cover apply operator & to `b`, the result is of type `&int` (`c`)\nc) `c` is already has type `&int` as required by Add::add, so no implicit conversion happens\nd) `c` is saved to be later passed to Add::add, i.e. `a` is borrowed as immutable now\ne) we can't evaluate `{a = 100; &mut a}`, because `a` is borrowed as immutable... wait, we can!?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47776049/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47986448",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-47986448",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 47986448,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTg2NDQ4",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-03T21:23:18Z",
    "updated_at": "2014-07-03T21:23:18Z",
    "body": "We are not going to attempt to do this exercise of formally defining the evaluation order for 1.0.  Therefore, not assigning this to the 1.0 milestone.\n\nSpecific suprises that are currently exhibited by the rustc compiler should be filed as their own bugs.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47986448/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47986556",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-47986556",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 47986556,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTg2NTU2",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-03T21:24:25Z",
    "updated_at": "2014-07-03T21:24:25Z",
    "body": "Having said the above ...\n\nHaving the evaluation order actually written up and specified _is_ something that someone should do eventually.  Therefore, we will keep this bug open.\n\nTagging as P-low, (not 1.0 milestone).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47986556/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47993631",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-47993631",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 47993631,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTkzNjMx",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-03T22:58:48Z",
    "updated_at": "2014-07-03T22:58:48Z",
    "body": "But does that not mean that we have undefined behaviour? I thought fixing that sort of thing was deemed important for 1.0.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47993631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47994885",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-47994885",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 47994885,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTk0ODg1",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-03T23:20:09Z",
    "updated_at": "2014-07-03T23:20:09Z",
    "body": "@chris-morgan I think the underlying claim here is that there _is_ a defined, deterministic order of evaluation.  It just is currently only specified via the rustc compiler, but we hope to actually write it down somewhere concretely eventually, and _not_ have it just be something that is \"implementation dependant.\"\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47994885/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48000084",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-48000084",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 48000084,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDAwMDg0",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-04T01:05:04Z",
    "updated_at": "2014-07-04T01:05:04Z",
    "body": "@pnkfelix I retract my claim of undefined behaviour. But what if, when it is finally addressed, it is realised that what is there was inconsistent and undesirable (as appears may be the case), possibly even buggy? Then we will not be able to alter it until the next major release.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48000084/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48032913",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-48032913",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 48032913,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDMyOTEz",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-04T11:25:25Z",
    "updated_at": "2014-07-04T11:25:25Z",
    "body": "@chris-morgan First off, I agree that what you describe is an undesirable scenario.  I certainly do not like the semantics of order-of-evaluation that is present in @huonw 's examples above.\n\nBut, under the assumption that we will not be able to be 100% validate our current implementation before 1.0, I'm not sure we have a better option available than what you describe.  After all, if we are going to claim that code in the 1.x series will enjoy some sort of backwards-compatibility guarantee, but we also attempt to fix such \"bugs\" during the 1.x series, then we would need to support those clients who inadvertently end up relying on the \"bad\" order-of-evaluation.  (By \"support\", I mean provide a really pain-free way to keep one's code compiling and runnning the same way in the presence of \"fixes\" to the order of evaluation; perhaps via an attribute with a Rust version number that one attaches to one's module, fn, or closure body.)\n\nBut maybe you have a suggestion for a different path?  (Keep in mind that I do not expect to be able to validate the implementation against a spec, so merely specifying the order of evaluation separately helps little here, except in identified bugs that still would not be fixed unless you want to solve the problem I outlined above.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48032913/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48044716",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-48044716",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 48044716,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDQ0NzE2",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-04T13:39:50Z",
    "updated_at": "2014-07-04T13:39:50Z",
    "body": "I have no better suggestions.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48044716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/83293379",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-83293379",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 83293379,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMjkzMzc5",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-19T03:21:58Z",
    "updated_at": "2015-03-19T03:21:58Z",
    "body": "cc @steveklabnik, could this move to the RFCs repo?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/83293379/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85976443",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-85976443",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 85976443,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1OTc2NDQz",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-25T10:38:07Z",
    "updated_at": "2015-03-25T10:38:07Z",
    "body": "Wouldn't it force more readable code if such constructs were forbidden? I mean, the borrow checker already forbids simultaneous mutable and immutable references. Why not also forbid simultaneous mutable and immutable usage?\n\nI have to carefully lay out the steps happening in my mind, even if the eval-order is specified. I don't think anyone considers the following to be readable.\n\n``` rust\nfn main() {\n    let mut a = 5;\n    let b = (a, a = 6, a, a * (a, a = 7).0);\n    println!(\"{:?}\", b);\n}\n```\n\nor logical (even the compiler is confused about what's going on...):\n\n```\n<anon>:3:35: 3:36 warning: value assigned to `a` is never read, #[warn(unused_assignments)] on by default\n<anon>:3     let b = (a, a = 6, a, a * (a, a = 7).0);\n                                           ^\n(5, (), 6, 42)\n```\n\nSequence points are a major issue in c/c++, not just because they cause undefined behavior, but also because not everyone is an expert on the evaluation order. If you give a piece of code to a group of non-experts on sequence points, you get a quite a number of different suggestions of what the outcome should be. There won't be less confusion just because the evaluation order is defined. Most likely there'll just be a number of \"good practices\" about how to write readable expressions.\n\nThings like `v.truncate(v.len() - 1)` are a different issue, as that is hierarchical an therefor there cannot be a confusion about the order.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85976443/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/118958497",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-118958497",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 118958497,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExODk1ODQ5Nw==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-06T18:58:03Z",
    "updated_at": "2015-07-06T18:58:03Z",
    "body": "After talking with @nikomatsakis , we're not quite ready to define these things yet. Given that that will take a lot of work, I'm going to be giving this issue a close, as it's really more of an RFC type of thing, but \n\n> I think we will be I think we will be nailing down pretty precisely as part of the MIR construction work,\n> nailing down pretty precisely as part of the MIR construction work,\n\nand so documenting all that would fall under that work anyway.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/118958497/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/136733400",
    "html_url": "https://github.com/rust-lang/rust/issues/15300#issuecomment-136733400",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15300",
    "id": 136733400,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNjczMzQwMA==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-01T14:06:41Z",
    "updated_at": "2015-09-01T14:07:49Z",
    "body": "The borrow checker thinks it's left to right:\n\n``` rust\nlet mut data = vec![1, 2, 3];\n\nanyfunction(data.remove(0), &mut data);  // Ok\nanyfunction(&mut data, data.remove(0));  // Not Ok\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/136733400/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
