[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45052367",
    "html_url": "https://github.com/rust-lang/rust/issues/14029#issuecomment-45052367",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14029",
    "id": 45052367,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDUyMzY3",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-04T05:15:18Z",
    "updated_at": "2014-06-04T05:15:18Z",
    "body": "Here's the [expanded code](https://gist.github.com/anonymous/ae7e62370939803eaab4) I'm seeing with `rustc --pretty expanded scratch.rs`. Output of `rustc --version`:\n\n```\nrustc 0.11.0-pre (2ec3eea 2014-06-03 14:06:42 -0700)\nhost: x86_64-unknown-linux-gnu\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45052367/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45052699",
    "html_url": "https://github.com/rust-lang/rust/issues/14029#issuecomment-45052699",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14029",
    "id": 45052699,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDUyNjk5",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-04T05:24:31Z",
    "updated_at": "2014-06-04T05:24:55Z",
    "body": "I'm having trouble identifying where you're seeing heap allocation. I only see it for the return value.\n\nHow much juice you want to squeeze really depends on how much analysis you want to do on the regex and how many implementations of a matching algorithm you want to write. For example, the current algorithm accounts for simple matching, the position of a match and the location of submatches. To get a tighter function, you might want to split these three cases out into their own separate matching algorithms.\n\nThis is also complicated by the fact that we're trying to guarantee `O(mn)` worst case time, which is why the generated code is so big (it's an entire Pike VM). To get a tight loop like you want, I suspect you'll need to do analysis on the regex to identify special cases. RE2 uses a \"one pass NFA simulation\" for certain types of regexes. Here's what [Russ Cox](http://swtch.com/~rsc/regexp/regexp3.html) has to say about it:\n\n> Let's define a \u201cone-pass regular expression\u201d to be a regular expression with the property that at each input byte during an anchored match, there is only one alternative that makes sense for a given input byte. For example, x_yx_ is one-pass: you read x's until a y, then you read the y, then you keep reading x's. At no point do you have to guess what to do or back up and try a different guess. On the other hand, x_x is not one-pass: when you're looking at an input x, it's not clear whether you should use it to extend the x_ or as the final x. More examples: ([^x]_)x(._) is one-pass; (._)x(._) is not. (\\d+)-(\\d+) is one-pass; (\\d+).(\\d+) is not.\n> \n> A simple intuition for identifying one-pass regular expressions is that it's always immediately obvious when a repetition ends. It must also be immediately obvious which branch of an | to take: x(y|z) is one-pass, but (xy|xz) is not.\n> \n> Because there's only one possible next choice, the one-pass NFA implementation never needs to make a copy of the submatch boundary set. The one-pass engine executes in two halves. During compilation, the one-pass code analyzes the compiled form of the program to determine whether it is one-pass. If so, the engine computes a data structure recording what to do at each possible state and input byte. Then at execution the one-pass engine can fly through the string, finding the match (or not) in, well, one pass.\n\nThe other direction we could go in is building a DFA.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45052699/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71391402",
    "html_url": "https://github.com/rust-lang/rust/issues/14029#issuecomment-71391402",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14029",
    "id": 71391402,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzkxNDAy",
    "user": {
      "login": "frewsxcv",
      "id": 416575,
      "node_id": "MDQ6VXNlcjQxNjU3NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/416575?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frewsxcv",
      "html_url": "https://github.com/frewsxcv",
      "followers_url": "https://api.github.com/users/frewsxcv/followers",
      "following_url": "https://api.github.com/users/frewsxcv/following{/other_user}",
      "gists_url": "https://api.github.com/users/frewsxcv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frewsxcv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frewsxcv/subscriptions",
      "organizations_url": "https://api.github.com/users/frewsxcv/orgs",
      "repos_url": "https://api.github.com/users/frewsxcv/repos",
      "events_url": "https://api.github.com/users/frewsxcv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frewsxcv/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-25T20:27:01Z",
    "updated_at": "2015-01-25T20:27:01Z",
    "body": "In-tree regex was removed in https://github.com/rust-lang/rust/pull/21458 . This should probably be moved to https://github.com/rust-lang/regex\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71391402/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71392001",
    "html_url": "https://github.com/rust-lang/rust/issues/14029#issuecomment-71392001",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14029",
    "id": 71392001,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzkyMDAx",
    "user": {
      "login": "rust-highfive",
      "id": 7378925,
      "node_id": "MDQ6VXNlcjczNzg5MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7378925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rust-highfive",
      "html_url": "https://github.com/rust-highfive",
      "followers_url": "https://api.github.com/users/rust-highfive/followers",
      "following_url": "https://api.github.com/users/rust-highfive/following{/other_user}",
      "gists_url": "https://api.github.com/users/rust-highfive/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rust-highfive/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rust-highfive/subscriptions",
      "organizations_url": "https://api.github.com/users/rust-highfive/orgs",
      "repos_url": "https://api.github.com/users/rust-highfive/repos",
      "events_url": "https://api.github.com/users/rust-highfive/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rust-highfive/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-25T20:37:53Z",
    "updated_at": "2015-01-25T20:38:55Z",
    "body": "This issue has been moved to the regex repo: rust-lang/regex#26\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71392001/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
