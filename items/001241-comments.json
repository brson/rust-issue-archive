[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/4337111",
    "html_url": "https://github.com/rust-lang/rust/issues/1241#issuecomment-4337111",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1241",
    "id": 4337111,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzcxMTE=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-03-06T03:04:55Z",
    "updated_at": "2012-03-06T03:04:55Z",
    "body": "We could also just allow native function declarations in regular modules. We could even eliminate native mods altogether and just give regular mods some attributes to use by default for native functions, like:\n\n```\n#[native(name = \"libc\")]\n#[native(abi = \"stdcall\")]\nmod {\n    native fn printf(...);\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/4337111/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5238125",
    "html_url": "https://github.com/rust-lang/rust/issues/1241#issuecomment-5238125",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1241",
    "id": 5238125,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzgxMjU=",
    "user": {
      "login": "jsternberg",
      "id": 1212129,
      "node_id": "MDQ6VXNlcjEyMTIxMjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1212129?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jsternberg",
      "html_url": "https://github.com/jsternberg",
      "followers_url": "https://api.github.com/users/jsternberg/followers",
      "following_url": "https://api.github.com/users/jsternberg/following{/other_user}",
      "gists_url": "https://api.github.com/users/jsternberg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jsternberg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jsternberg/subscriptions",
      "organizations_url": "https://api.github.com/users/jsternberg/orgs",
      "repos_url": "https://api.github.com/users/jsternberg/repos",
      "events_url": "https://api.github.com/users/jsternberg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jsternberg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-04-20T05:32:22Z",
    "updated_at": "2012-04-20T05:32:22Z",
    "body": "Just chiming in, I like the idea of having `native` act on a specific function instead of on a module. I don't like the syntax presented in the brson's comment though. Instead of a native macro acting on a module, maybe the native macro should be a crate definition similar to the link macro?\n\nFor example, for linking to something like sqlite3.\n\n```\n// sqlite3.rc\n// probably name this something different, only specifies what to link against\n// (instead of searching for a rust library, searches for a normal shared lib)\n#[native(name=\"sqlite3\")];\n#[link(name=\"sqlite3\", vers=\"3.0\", ...)];\n\nmod sqlite3;\n\n// sqlite3.rs\nmod unsafe {\n    // specify the abi\n    #[native(abi=\"stdcall\")] fn printf(...);\n    // default to stdcall\n    #[native] fn fprintf(...);\n}\n\n// would also work for tagging an entire module as native\n#[native]\nmod nativestuff {\n    fn foobar();\n}\n```\n\nThat way, link definitions are kept in the crate file (which is already used to determine compilation anyway) and the information doesn't have to be repeated for every native module. The native macro would essentially be the equivalent of `extern \"C\"`. It's also easily extended to working on modules.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5238125/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8140247",
    "html_url": "https://github.com/rust-lang/rust/issues/1241#issuecomment-8140247",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1241",
    "id": 8140247,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNDAyNDc=",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-08-29T20:40:07Z",
    "updated_at": "2012-08-29T20:40:07Z",
    "body": "I think between export globbing and the reforms planned on extern, this can safely be put to rest. We'll be able to declare extern functions one-by-one, and permitting multiple fragments of a module seems like .. a plausible way to address this space, but probably a redundant one, given all the other options. Closing.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8140247/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
