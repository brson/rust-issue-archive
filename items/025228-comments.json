[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100671104",
    "html_url": "https://github.com/rust-lang/rust/issues/25228#issuecomment-100671104",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25228",
    "id": 100671104,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMDY3MTEwNA==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-10T17:22:16Z",
    "updated_at": "2015-05-10T17:22:31Z",
    "body": "> It is obvious here that the function foo does not return values for all control paths.\n\nIt does, actually. `if` is an expression, and if you don't have an `else`, always evaluates to `()`. That's why you get this error, as you've noticed.\n\nI personally think this is too much of a special case for an error, but someone else might feel differently.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100671104/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/103663514",
    "html_url": "https://github.com/rust-lang/rust/issues/25228#issuecomment-103663514",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25228",
    "id": 103663514,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMzY2MzUxNA==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-19T20:46:59Z",
    "updated_at": "2015-05-19T20:47:09Z",
    "body": "In addition to what @steveklabnik said, I should add we already have a special diagnostic for `if` expressions with no `else` clause:\n\n``` rust\nfn main() {\n    if true {\n        0\n    } else if false {\n        1\n    };\n}\n```\n\n```\n<anon>:4:12: 6:6 error: if may be missing an else clause:\n expected `()`,\n    found `_`\n(expected (),\n    found integral variable) [E0308]\n<anon>:4     } else if false {\n<anon>:5         1\n<anon>:6     };\nerror: aborting due to previous error\nplaypen: application terminated with error code 101\n```\n\nBut it doesn't kick in if you drop the trailing `;`. That's probably what we should fix here\u2026\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/103663514/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/263690681",
    "html_url": "https://github.com/rust-lang/rust/issues/25228#issuecomment-263690681",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25228",
    "id": 263690681,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzY5MDY4MQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-29T20:35:00Z",
    "updated_at": "2016-11-29T20:35:00Z",
    "body": "Triage: no change",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/263690681/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/305326309",
    "html_url": "https://github.com/rust-lang/rust/issues/25228#issuecomment-305326309",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25228",
    "id": 305326309,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTMyNjMwOQ==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-31T21:42:58Z",
    "updated_at": "2017-05-31T21:42:58Z",
    "body": "With a single `if`, we now state that it might be missing an else clause. However, other control-flow statements don't have any help regarding a missing return statement, as shown by the second error below. I think the best thing we can do here is probably to add a note that not all control flow paths return `usize` (since that's the return type annotated on the function definition), and possibly point a span at the first \"exit point\" if possible.\r\n\r\n```\r\nerror[E0317]: if may be missing an else clause\r\n --> test.rs:2:5\r\n  |\r\n2 | /     if bar % 5 == 0 {\r\n3 | |         return 1;\r\n4 | |     }\r\n  | |_____^ expected (), found usize\r\n  |\r\n  = note: expected type `()`\r\n             found type `usize`\r\n\r\nerror: aborting due to previous error(s)\r\n```\r\n\r\n```\r\nerror[E0308]: mismatched types\r\n --> test.rs:2:5\r\n  |\r\n2 | /     for x in &[0, 10] {\r\n3 | |         return 1;\r\n4 | |     }\r\n  | |_____^ expected usize, found ()\r\n  |\r\n  = note: expected type `usize`\r\n             found type `()`\r\n\r\nerror: aborting due to previous error(s)\r\n```",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/305326309/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/412977160",
    "html_url": "https://github.com/rust-lang/rust/issues/25228#issuecomment-412977160",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25228",
    "id": 412977160,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjk3NzE2MA==",
    "user": {
      "login": "estebank",
      "id": 1606434,
      "node_id": "MDQ6VXNlcjE2MDY0MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/estebank",
      "html_url": "https://github.com/estebank",
      "followers_url": "https://api.github.com/users/estebank/followers",
      "following_url": "https://api.github.com/users/estebank/following{/other_user}",
      "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/estebank/subscriptions",
      "organizations_url": "https://api.github.com/users/estebank/orgs",
      "repos_url": "https://api.github.com/users/estebank/repos",
      "events_url": "https://api.github.com/users/estebank/events{/privacy}",
      "received_events_url": "https://api.github.com/users/estebank/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-08-14T18:49:22Z",
    "updated_at": "2018-08-14T18:49:22Z",
    "body": "[Current output](http://play.rust-lang.org/?gist=c87d274bef1e1fac670edc8898865347&version=stable&mode=debug&edition=2015) for the last case presented:\r\n\r\n```\r\nerror[E0308]: mismatched types\r\n --> src/main.rs:2:5\r\n  |\r\n1 |   fn foo(bar: usize) -> usize {\r\n  |                         ----- expected `usize` because of return type\r\n2 | /     for i in 0..1 {\r\n3 | |         return 1;\r\n4 | |     }\r\n  | |_____^ expected usize, found ()\r\n  |\r\n  = note: expected type `usize`\r\n             found type `()`\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/412977160/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/470361180",
    "html_url": "https://github.com/rust-lang/rust/issues/25228#issuecomment-470361180",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25228",
    "id": 470361180,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MDM2MTE4MA==",
    "user": {
      "login": "estebank",
      "id": 1606434,
      "node_id": "MDQ6VXNlcjE2MDY0MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/estebank",
      "html_url": "https://github.com/estebank",
      "followers_url": "https://api.github.com/users/estebank/followers",
      "following_url": "https://api.github.com/users/estebank/following{/other_user}",
      "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/estebank/subscriptions",
      "organizations_url": "https://api.github.com/users/estebank/orgs",
      "repos_url": "https://api.github.com/users/estebank/repos",
      "events_url": "https://api.github.com/users/estebank/events{/privacy}",
      "received_events_url": "https://api.github.com/users/estebank/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-07T02:40:36Z",
    "updated_at": "2019-03-07T02:40:36Z",
    "body": "#58981 will provide the similar output for the original case as we already do for the prior comment:\r\n\r\n```\r\nerror[E0317]: if may be missing an else clause\r\n  --> $DIR/if-without-else-as-fn-expr.rs:2:5\r\n   |\r\nLL |   fn foo(bar: usize) -> usize {\r\n   |                         ----- found `usize` because of this return type\r\nLL | /     if bar % 5 == 0 {\r\nLL | |         return 3;\r\nLL | |     }\r\n   | |_____^ expected (), found usize\r\n   |\r\n   = note: expected type `()`\r\n              found type `usize`\r\n   = note: `if` expressions without `else` must evaluate to `()`\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/470361180/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
