{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/8182",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/8182/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/8182/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/8182/events",
  "html_url": "https://github.com/rust-lang/rust/pull/8182",
  "id": 17493651,
  "node_id": "MDExOlB1bGxSZXF1ZXN0NzMxNDg1NA==",
  "number": 8182,
  "title": "Add initial support for a new formatting syntax",
  "user": {
    "login": "alexcrichton",
    "id": 64996,
    "node_id": "MDQ6VXNlcjY0OTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexcrichton",
    "html_url": "https://github.com/alexcrichton",
    "followers_url": "https://api.github.com/users/alexcrichton/followers",
    "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
    "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
    "repos_url": "https://api.github.com/users/alexcrichton/repos",
    "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 7,
  "created_at": "2013-08-01T07:15:56Z",
  "updated_at": "2014-06-17T01:47:26Z",
  "closed_at": "2013-08-02T18:30:30Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/8182",
    "html_url": "https://github.com/rust-lang/rust/pull/8182",
    "diff_url": "https://github.com/rust-lang/rust/pull/8182.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/8182.patch",
    "merged_at": null
  },
  "body": "This pull request is the initial framework necessary for the advent of a new\nstring formatting system which will eventually replace `fmt!`. There's certainly\na lot of stuff going on here, so here's a bit of a summary:\n\nThis entire implementation is based off of the discussions had on the mailing\nlists at:\n- https://mail.mozilla.org/pipermail/rust-dev/2013-July/004961.html\n- https://mail.mozilla.org/pipermail/rust-dev/2013-July/004999.html\n\nIt should be noted that this is not ready to actually replace the `fmt!` macro.\nThis request simply lays all of the groundwork to implement this new system.\nThe largest missing component is that all formatting specifiers are ignored.\nAdditionally, I'd like to take some time to bikeshed the format modifier syntax\nafter researching it a bit more.\n\nSome notable points of the implementation\n- The [parser](https://github.com/alexcrichton/rust/blob/4a428d89423a43e7f46eac4cf16cd23c6dcd4b1a/src/libstd/fmt/ct.rs) is non-trivial\n  - it attempted to use conditions, but then #8179 struck\n- The [sprintf function](https://github.com/alexcrichton/rust/blob/4a428d89423a43e7f46eac4cf16cd23c6dcd4b1a/src/libstd/fmt/mod.rs) is still flagged as `unsafe`\n- The [syntax extension](https://github.com/alexcrichton/rust/blob/4a428d89423a43e7f46eac4cf16cd23c6dcd4b1a/src/libsyntax/ext/ifmt.rs) was written from scratch and has all of the compile-time checks the parser can't have\n- A [new pass was added](https://github.com/alexcrichton/rust/blob/4a428d89423a43e7f46eac4cf16cd23c6dcd4b1a/src/librustc/middle/fmt.rs) to collect format traits into a local map\n- The list of format traits are emitted to libraries so they [can be loaded](https://github.com/alexcrichton/rust/blob/4a428d89423a43e7f46eac4cf16cd23c6dcd4b1a/src/librustc/metadata/decoder.rs#L490) later on\n- A [new expression](https://github.com/alexcrichton/rust/blob/4a428d89423a43e7f46eac4cf16cd23c6dcd4b1a/src/libsyntax/ast.rs#L509-L510) was added. The reasoning behind this is that macro expansion happens before crate resolution, and the list of formatting traits aren't known until after external crate resolution.\n\nTesting wise, I've included\n- parser unit tests\n- runtime unit tests\n- run-pass tests for all the new functionality\n- lots of compile-fail tests\n\nNote that all of the code links will become stale as I rebase, but I don't\nthink that anything major will be changing at this point. The best examples can\nbe found in the run-pass test, although there's probably a number of cases that\nI've missed!\n\nI also realize that this is very large, although I couldn't figure out a really\ngood way of splitting it up. If there are suggestions of how to make this a bit\nmore manageable, than I'd definitely take the time to split things up.\n",
  "closed_by": {
    "login": "alexcrichton",
    "id": 64996,
    "node_id": "MDQ6VXNlcjY0OTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexcrichton",
    "html_url": "https://github.com/alexcrichton",
    "followers_url": "https://api.github.com/users/alexcrichton/followers",
    "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
    "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
    "repos_url": "https://api.github.com/users/alexcrichton/repos",
    "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/8182/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/8182/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
