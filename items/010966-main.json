{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/10966",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/10966/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/10966/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/10966/events",
  "html_url": "https://github.com/rust-lang/rust/pull/10966",
  "id": 24290528,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTA4MzAxOTg=",
  "number": 10966,
  "title": "debuginfo: Improvements for stepping experience in GDB",
  "user": {
    "login": "michaelwoerister",
    "id": 1825894,
    "node_id": "MDQ6VXNlcjE4MjU4OTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelwoerister",
    "html_url": "https://github.com/michaelwoerister",
    "followers_url": "https://api.github.com/users/michaelwoerister/followers",
    "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelwoerister/orgs",
    "repos_url": "https://api.github.com/users/michaelwoerister/repos",
    "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelwoerister/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 7,
  "created_at": "2013-12-14T11:56:41Z",
  "updated_at": "2022-02-07T09:28:10Z",
  "closed_at": "2013-12-16T15:16:37Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/10966",
    "html_url": "https://github.com/rust-lang/rust/pull/10966",
    "diff_url": "https://github.com/rust-lang/rust/pull/10966.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/10966.patch",
    "merged_at": "2013-12-16T15:16:37Z"
  },
  "body": "This PR improves the stepping experience in GDB. It contains some fine tuning of line information and makes _rustc_ produce nearly the same IR/DWARF as Clang. The focus of the changes is function prologue handling which has caused some problems in the past (https://github.com/mozilla/rust/issues/9641).\n\nIt seems that GDB does not properly handle function prologues when the function uses segmented stacks, i.e. it does not recognize that the `__morestack` check is part of the prologue. When setting a breakpoint like `break foo` it will set the break point before the arguments of `foo()` have been loaded and still contain bogus values. For function with the #[no_split_stack] attribute this problem has never occurred for me so I'm pretty sure that segmented stacks are the cause of the problem. @jdm mentioned that segmented stack won't be completely abandoned after all. I'd be grateful if you could tell me about what the future might bring in this regard (@brson, @cmr).\n\nAnyway, this PR should alleviate this problem at least in the case when setting breakpoints using line numbers and also make it less confusing when setting them via function names because then GDB will break _before_ the first statement where one could conceivably argue that arguments need not be initialized yet.\n\nAlso, a koala: :koala:\n\nCheers,\nMichael\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/10966/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/10966/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
