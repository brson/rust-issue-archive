[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56062807",
    "html_url": "https://github.com/rust-lang/rust/issues/17257#issuecomment-56062807",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17257",
    "id": 56062807,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MDYyODA3",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-18T16:12:28Z",
    "updated_at": "2014-09-18T16:12:28Z",
    "body": "Ran into this assertion while compiling https://github.com/retep998/ftb-rs/commit/27ce2aa9024858e64d24d600273e9d9ddf5e2890 on win64.\n\n```\nThis application has requested the Runtime to terminate it in an unusual way.\nPlease contact the application's support team for more information.\nAssertion failed!\n\nProgram: A:\\rust64\\bin\\rustc.exe\nFile: A:/msys64/home/retep998/rust/src/llvm/lib/IR/Instructions.cpp, Line 1085\n\nExpression: getOperand(0)->getType() == cast<PointerType>(getOperand(1)->getType())->getElementType() && \"Ptr must be a pointer to Val type!\"\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56062807/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57819260",
    "html_url": "https://github.com/rust-lang/rust/issues/17257#issuecomment-57819260",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17257",
    "id": 57819260,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3ODE5MjYw",
    "user": {
      "login": "pnathan",
      "id": 761056,
      "node_id": "MDQ6VXNlcjc2MTA1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/761056?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnathan",
      "html_url": "https://github.com/pnathan",
      "followers_url": "https://api.github.com/users/pnathan/followers",
      "following_url": "https://api.github.com/users/pnathan/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnathan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnathan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnathan/subscriptions",
      "organizations_url": "https://api.github.com/users/pnathan/orgs",
      "repos_url": "https://api.github.com/users/pnathan/repos",
      "events_url": "https://api.github.com/users/pnathan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnathan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-03T16:25:24Z",
    "updated_at": "2014-10-03T16:25:24Z",
    "body": "This will engender the bug as well:\n\n```\nfn read_file(path : String) -> Box<[u8]> {\n    return box []\n}\n\n\nfn main() {\n}\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57819260/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59848379",
    "html_url": "https://github.com/rust-lang/rust/issues/17257#issuecomment-59848379",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17257",
    "id": 59848379,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5ODQ4Mzc5",
    "user": {
      "login": "mdup",
      "id": 1169915,
      "node_id": "MDQ6VXNlcjExNjk5MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1169915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mdup",
      "html_url": "https://github.com/mdup",
      "followers_url": "https://api.github.com/users/mdup/followers",
      "following_url": "https://api.github.com/users/mdup/following{/other_user}",
      "gists_url": "https://api.github.com/users/mdup/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mdup/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mdup/subscriptions",
      "organizations_url": "https://api.github.com/users/mdup/orgs",
      "repos_url": "https://api.github.com/users/mdup/repos",
      "events_url": "https://api.github.com/users/mdup/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mdup/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-20T22:11:30Z",
    "updated_at": "2014-10-20T22:11:30Z",
    "body": "This example crashes on the same assert.\n\n```\ntrait Vehicle { }\nstruct Car;\nimpl Vehicle for Car { }\n\nfn build_car<'a>() -> Box<Vehicle + 'a> {\n    loop {\n        return box Car;\n    }\n}\n\nfn main() { }\n```\n\nInterestingly, it does not fail to compile when `return box Car;` is moved out of the `loop`:\n\n```\nstruct Car;\ntrait Vehicle { }\nimpl Vehicle for Car { }\n\nfn build_car<'a>() -> Box<Vehicle + 'a> {\n    return box Car;\n}\n\nfn main() { }\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59848379/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65247113",
    "html_url": "https://github.com/rust-lang/rust/issues/17257#issuecomment-65247113",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17257",
    "id": 65247113,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MjQ3MTEz",
    "user": {
      "login": "wackywendell",
      "id": 245071,
      "node_id": "MDQ6VXNlcjI0NTA3MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/245071?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wackywendell",
      "html_url": "https://github.com/wackywendell",
      "followers_url": "https://api.github.com/users/wackywendell/followers",
      "following_url": "https://api.github.com/users/wackywendell/following{/other_user}",
      "gists_url": "https://api.github.com/users/wackywendell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wackywendell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wackywendell/subscriptions",
      "organizations_url": "https://api.github.com/users/wackywendell/orgs",
      "repos_url": "https://api.github.com/users/wackywendell/repos",
      "events_url": "https://api.github.com/users/wackywendell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wackywendell/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-02T15:25:35Z",
    "updated_at": "2014-12-02T15:25:35Z",
    "body": "I also see this for [this minimal version of this project](https://github.com/wackywendell/makeiter/tree/minimal). `cargo build` works fine, but `cargo test` has the same error.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65247113/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65344294",
    "html_url": "https://github.com/rust-lang/rust/issues/17257#issuecomment-65344294",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17257",
    "id": 65344294,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MzQ0Mjk0",
    "user": {
      "login": "tomjakubowski",
      "id": 667901,
      "node_id": "MDQ6VXNlcjY2NzkwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/667901?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tomjakubowski",
      "html_url": "https://github.com/tomjakubowski",
      "followers_url": "https://api.github.com/users/tomjakubowski/followers",
      "following_url": "https://api.github.com/users/tomjakubowski/following{/other_user}",
      "gists_url": "https://api.github.com/users/tomjakubowski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tomjakubowski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tomjakubowski/subscriptions",
      "organizations_url": "https://api.github.com/users/tomjakubowski/orgs",
      "repos_url": "https://api.github.com/users/tomjakubowski/repos",
      "events_url": "https://api.github.com/users/tomjakubowski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tomjakubowski/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-03T02:38:32Z",
    "updated_at": "2014-12-03T02:41:59Z",
    "body": "Another (as minimal as I could get it) reproduction  on `rustc 0.13.0-dev (8d8f41b75 2014-11-29 21:51:34 +0000`:\n\n``` rust\nextern \"C\" fn foo(_: Blah) { }\n\nstruct Blah {\n    _ptr: extern \"C\" fn(Blah)\n}\n\nfn main() {\n    Blah { _ptr: foo };\n}\n```\n\n```\nrustc: /build/rust-git/src/rust/src/llvm/lib/IR/Instructions.cpp:1086: void llvm::StoreInst::AssertOK(): Assertion `getOperand(0)->getType() == cast<PointerType>(getOperand(1)->getType())->getElementType() && \"Ptr must be a pointer to Val type!\"' failed.\nAborted (core dumped)\n```\n\nNote that there is no assertion failure without the `extern \"C\"`. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65344294/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65355254",
    "html_url": "https://github.com/rust-lang/rust/issues/17257#issuecomment-65355254",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17257",
    "id": 65355254,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MzU1MjU0",
    "user": {
      "login": "ftxqxd",
      "id": 2055302,
      "node_id": "MDQ6VXNlcjIwNTUzMDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2055302?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ftxqxd",
      "html_url": "https://github.com/ftxqxd",
      "followers_url": "https://api.github.com/users/ftxqxd/followers",
      "following_url": "https://api.github.com/users/ftxqxd/following{/other_user}",
      "gists_url": "https://api.github.com/users/ftxqxd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ftxqxd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ftxqxd/subscriptions",
      "organizations_url": "https://api.github.com/users/ftxqxd/orgs",
      "repos_url": "https://api.github.com/users/ftxqxd/repos",
      "events_url": "https://api.github.com/users/ftxqxd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ftxqxd/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-03T04:45:49Z",
    "updated_at": "2014-12-03T04:45:49Z",
    "body": "Another case that causes the same error (but for all I know could have a completely different cause):\n\n``` rust\nstruct Foo<Sized? T> {\n    x: u8,\n    y: T,\n}\n\nfn main() {\n    let foo: &Foo<[int]> = &Foo { x: 1, y: [1i, 2, 3] };\n    match *foo {\n        Foo { x, ref y } => {},\n    }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65355254/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65504469",
    "html_url": "https://github.com/rust-lang/rust/issues/17257#issuecomment-65504469",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17257",
    "id": 65504469,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NTA0NDY5",
    "user": {
      "login": "tomassedovic",
      "id": 104339,
      "node_id": "MDQ6VXNlcjEwNDMzOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/104339?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tomassedovic",
      "html_url": "https://github.com/tomassedovic",
      "followers_url": "https://api.github.com/users/tomassedovic/followers",
      "following_url": "https://api.github.com/users/tomassedovic/following{/other_user}",
      "gists_url": "https://api.github.com/users/tomassedovic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tomassedovic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tomassedovic/subscriptions",
      "organizations_url": "https://api.github.com/users/tomassedovic/orgs",
      "repos_url": "https://api.github.com/users/tomassedovic/repos",
      "events_url": "https://api.github.com/users/tomassedovic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tomassedovic/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-03T22:36:59Z",
    "updated_at": "2014-12-03T22:36:59Z",
    "body": "Here's a shorter example for unboxed closures:\n\n``` rust\n#![feature(unboxed_closures)]\n\nfn main() {\n    let i = 0i;\n    let some_closure = |&: | {\n        let _capture = i;\n    };\n}\n```\n\nCompiling with `rustc --debuginfo 2 repro.rs`:\n\n```\nrustc: /home/rustbuild/src/rust-buildbot/slave/nightly-linux/build/src/llvm/lib/IR/Instructions.cpp:1086: void llvm::StoreInst::AssertOK(): Assertion `getOperand(0)->getType() == cast<PointerType>(getOperand(1)->getType())->getElementType() && \"Ptr must be a pointer to Val type!\"' failed.\nAborted\n\n```\n\nIf you specify `--debuginfo 1` or no debuginfo at all, it compiles fine.\n\nIt also compiles correctly if don't capture anything from within the closure.\n\nReproduced on:\n\n```\n$ rustc --version verbose\nrustc 0.13.0-nightly (5484d6f6d 2014-12-02 00:22:00 +0000)\nbinary: rustc\ncommit-hash: 5484d6f6d2844e9c52d42db52a1ba94739e10996\ncommit-date: 2014-12-02 00:22:00 +0000\nhost: x86_64-unknown-linux-gnu\nrelease: 0.13.0-nightly\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65504469/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65717137",
    "html_url": "https://github.com/rust-lang/rust/issues/17257#issuecomment-65717137",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17257",
    "id": 65717137,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NzE3MTM3",
    "user": {
      "login": "hugwijst",
      "id": 600107,
      "node_id": "MDQ6VXNlcjYwMDEwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/600107?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hugwijst",
      "html_url": "https://github.com/hugwijst",
      "followers_url": "https://api.github.com/users/hugwijst/followers",
      "following_url": "https://api.github.com/users/hugwijst/following{/other_user}",
      "gists_url": "https://api.github.com/users/hugwijst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hugwijst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hugwijst/subscriptions",
      "organizations_url": "https://api.github.com/users/hugwijst/orgs",
      "repos_url": "https://api.github.com/users/hugwijst/repos",
      "events_url": "https://api.github.com/users/hugwijst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hugwijst/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-04T22:42:12Z",
    "updated_at": "2014-12-04T22:42:12Z",
    "body": "A few variations on the example from @mdup that do and don't compile.\nTL;DR A workaround for this issue is to cast the box to the function return type, eg. `box Car as Box<Vehicle>`.\n\nImplicit return: no failure\n\n``` rust\nfn build_car<'a>() -> Box<Vehicle + 'a> {\n    box Car\n}\n```\n\nExplicit return, no closing semicolon: failure\n\n``` rust\nfn build_car<'a>() -> Box<Vehicle + 'a> {\n    return box Car\n}\n```\n\nExplicit return, closing semicolon: no failure\n\n``` rust\nfn build_car<'a>() -> Box<Vehicle + 'a> {\n    return box Car;\n}\n```\n\nExplicit return, cast, both closing and no closing semicolon: no failure\n\n``` rust\nfn build_car<'a>() -> Box<Vehicle + 'a> {\n    return box Car as Box<Vehicle>;\n}\n```\n\nIn loop, explicit return, both closing and no closing semicolon: failure\n\n``` rust\nfn build_car<'a>() -> Box<Vehicle + 'a> {\n    loop {\n        return box Car;\n    }\n}\n```\n\nIn loop, explicit return, cast, both closing and no closing semicolon: no failure\n\n``` rust\nfn build_car<'a>() -> Box<Vehicle + 'a> {\n    loop {\n        return box Car as Box<Vehicle>;\n    }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65717137/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87469018",
    "html_url": "https://github.com/rust-lang/rust/issues/17257#issuecomment-87469018",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17257",
    "id": 87469018,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDY5MDE4",
    "user": {
      "login": "JustAPerson",
      "id": 789308,
      "node_id": "MDQ6VXNlcjc4OTMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/789308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JustAPerson",
      "html_url": "https://github.com/JustAPerson",
      "followers_url": "https://api.github.com/users/JustAPerson/followers",
      "following_url": "https://api.github.com/users/JustAPerson/following{/other_user}",
      "gists_url": "https://api.github.com/users/JustAPerson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JustAPerson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JustAPerson/subscriptions",
      "organizations_url": "https://api.github.com/users/JustAPerson/orgs",
      "repos_url": "https://api.github.com/users/JustAPerson/repos",
      "events_url": "https://api.github.com/users/JustAPerson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JustAPerson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-29T20:19:47Z",
    "updated_at": "2015-03-29T20:19:47Z",
    "body": "Updating for current Rust (on playpen):\n**tl;dr**: _only @P1start example is still broken_ (See below for updated syntax).\n\nI was unsure how to update @rozaliev's example because of object safety errors.\n\n@pnathan's example _compiles fine_:\n\n``` rust\nfn read_file(path : String) -> Box<[u8]> {\n    return Box::new([])\n}\n\n\nfn main() {\n}\n```\n\n@mdup's example _compiles fine_:\n\n``` rust\ntrait Vehicle { fn stuff(&self) {} }\nstruct Car;\nimpl Vehicle for Car { }\n\nfn build_car<'a>() -> Box<Vehicle + 'a> {\n    loop {\n        return Box::new(Car);\n    }\n}\n\nfn main() { }\n```\n\n@tomjakubowski's example _compiles fine_ as is.\n\n@P1start's example is _still broken_ and causes a coredump:\n\n``` rust\nstruct Foo<T: ?Sized> {\n    x: u8,\n    y: T,\n}\n\nfn main() {\n    let foo: &Foo<[isize]> = &Foo { x: 1, y: [1, 2, 3] };\n    match *foo {\n        Foo { x, ref y } => {},\n    }\n}\n```\n\n@tomassedovic's example _compiles fine_ even with `rustc -C debuginfo=2`\n\n``` rust\n#![feature(unboxed_closures)]\n\nfn main() {\n    let i: isize = 0;\n    let some_closure = || {\n        let _capture = i;\n    };\n}\n```\n\nAll of @hugwijst's variants now _compile fine_.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87469018/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/109798437",
    "html_url": "https://github.com/rust-lang/rust/issues/17257#issuecomment-109798437",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17257",
    "id": 109798437,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwOTc5ODQzNw==",
    "user": {
      "login": "randomPoison",
      "id": 1900829,
      "node_id": "MDQ6VXNlcjE5MDA4Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1900829?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/randomPoison",
      "html_url": "https://github.com/randomPoison",
      "followers_url": "https://api.github.com/users/randomPoison/followers",
      "following_url": "https://api.github.com/users/randomPoison/following{/other_user}",
      "gists_url": "https://api.github.com/users/randomPoison/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/randomPoison/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/randomPoison/subscriptions",
      "organizations_url": "https://api.github.com/users/randomPoison/orgs",
      "repos_url": "https://api.github.com/users/randomPoison/repos",
      "events_url": "https://api.github.com/users/randomPoison/events{/privacy}",
      "received_events_url": "https://api.github.com/users/randomPoison/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-07T20:45:01Z",
    "updated_at": "2015-06-07T20:45:01Z",
    "body": "I ran into this issue on the latest nightly with the following example:\n\n```\ntype EngineInit = extern fn (Box<Window>) -> Box<Engine>;\ntype EngineUpdateAndRender = extern fn (&mut Engine);\n\nfn main() {\n    // Open the game as a dynamic library;\n    let lib = DynamicLibrary::open(Some(Path::new(\"gunship-24517baeade73325.dll\"))).unwrap();\n\n    let engine_init = unsafe {\n        mem::transmute::<*mut EngineInit, EngineInit>(lib.symbol(\"engine_init\").unwrap())\n    };\n\n    let engine_update_and_render = unsafe {\n        mem::transmute::<*mut EngineUpdateAndRender, EngineUpdateAndRender>(lib.symbol(\"engine_update_and_render\").unwrap())\n    };\n\n    let mut window = Window::new(\"Game Window\");\n    let mut engine = engine_init(window);\n    engine_update_and_render(&mut engine);\n}\n```\n\nIf I change the first line to\n\n```\ntype EngineInit = extern fn (Box<Window>) -> Engine;\n```\n\nIt compiles fine.\n\nThe error I get:\n\n![](http://i.imgur.com/tB83w6Y.png)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/109798437/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113206852",
    "html_url": "https://github.com/rust-lang/rust/issues/17257#issuecomment-113206852",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17257",
    "id": 113206852,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzIwNjg1Mg==",
    "user": {
      "login": "pmarcelll",
      "id": 1909968,
      "node_id": "MDQ6VXNlcjE5MDk5Njg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1909968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pmarcelll",
      "html_url": "https://github.com/pmarcelll",
      "followers_url": "https://api.github.com/users/pmarcelll/followers",
      "following_url": "https://api.github.com/users/pmarcelll/following{/other_user}",
      "gists_url": "https://api.github.com/users/pmarcelll/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pmarcelll/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pmarcelll/subscriptions",
      "organizations_url": "https://api.github.com/users/pmarcelll/orgs",
      "repos_url": "https://api.github.com/users/pmarcelll/repos",
      "events_url": "https://api.github.com/users/pmarcelll/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pmarcelll/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-18T16:19:05Z",
    "updated_at": "2015-06-18T16:31:33Z",
    "body": "@JustAPerson, I couldn't trigger an ICE with any of the code it this issue, but I found something interesting: as you said, this compiles fine:\n\n``` rust\nfn read_file(path : String) -> Box<[u8]> {\n    return Box::new([])\n}\n\nfn main() {\n}\n```\n\nBut I think, it shouldn't. I've never seen return without a semicolon mentioned as valid Rust code.\n\nEDIT: I didn't find an open issue for this. If it's a bug, we should open a new one, but if it's a feature, it should be documented.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113206852/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113517832",
    "html_url": "https://github.com/rust-lang/rust/issues/17257#issuecomment-113517832",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17257",
    "id": 113517832,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzUxNzgzMg==",
    "user": {
      "login": "pmarcelll",
      "id": 1909968,
      "node_id": "MDQ6VXNlcjE5MDk5Njg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1909968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pmarcelll",
      "html_url": "https://github.com/pmarcelll",
      "followers_url": "https://api.github.com/users/pmarcelll/followers",
      "following_url": "https://api.github.com/users/pmarcelll/following{/other_user}",
      "gists_url": "https://api.github.com/users/pmarcelll/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pmarcelll/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pmarcelll/subscriptions",
      "organizations_url": "https://api.github.com/users/pmarcelll/orgs",
      "repos_url": "https://api.github.com/users/pmarcelll/repos",
      "events_url": "https://api.github.com/users/pmarcelll/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pmarcelll/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-19T13:40:38Z",
    "updated_at": "2015-06-19T13:40:38Z",
    "body": "Ok, it turned out to be valid syntax (https://github.com/rust-lang/rust/issues/26425) and I still can't reproduce the ICE :+1: \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113517832/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113565338",
    "html_url": "https://github.com/rust-lang/rust/issues/17257#issuecomment-113565338",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17257",
    "id": 113565338,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMzU2NTMzOA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-19T16:26:34Z",
    "updated_at": "2015-06-19T16:26:34Z",
    "body": "Thanks @pmarcelll!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/113565338/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
