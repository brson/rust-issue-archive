[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75444094",
    "html_url": "https://github.com/rust-lang/rust/issues/22675#issuecomment-75444094",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22675",
    "id": 75444094,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDQ0MDk0",
    "user": {
      "login": "knz",
      "id": 642886,
      "node_id": "MDQ6VXNlcjY0Mjg4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/642886?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/knz",
      "html_url": "https://github.com/knz",
      "followers_url": "https://api.github.com/users/knz/followers",
      "following_url": "https://api.github.com/users/knz/following{/other_user}",
      "gists_url": "https://api.github.com/users/knz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/knz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/knz/subscriptions",
      "organizations_url": "https://api.github.com/users/knz/orgs",
      "repos_url": "https://api.github.com/users/knz/repos",
      "events_url": "https://api.github.com/users/knz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/knz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-22T16:41:27Z",
    "updated_at": "2015-02-22T16:41:27Z",
    "body": "Example desired use in program:\n\n```\nstruct Option_;\nimpl<T> TTrans<T> for Option_ { type O = Option<T>; }\nimpl<T> Other<Option_> for Option<T> {\n  type E = T;\n  fn ap2<R, F : Fn(T)->R>(self, f : F) -> Option<R> {\n    match self {\n      None => None,\n      Some(x) => Some(f(x))\n    }\n  }\n}\nfn main() {\n  let x : Option<isize> = Some(3);\n  let v : Option<isize> = x.ap(|x| { x + 3 });  // must use the generic ap -> ap2 adapter\n  match v {\n    None => {},\n    Some(y) => { println!(\"{}\", y); }\n  }\n}\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75444094/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75445603",
    "html_url": "https://github.com/rust-lang/rust/issues/22675#issuecomment-75445603",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22675",
    "id": 75445603,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDQ1NjAz",
    "user": {
      "login": "edwardw",
      "id": 454049,
      "node_id": "MDQ6VXNlcjQ1NDA0OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/454049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/edwardw",
      "html_url": "https://github.com/edwardw",
      "followers_url": "https://api.github.com/users/edwardw/followers",
      "following_url": "https://api.github.com/users/edwardw/following{/other_user}",
      "gists_url": "https://api.github.com/users/edwardw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edwardw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edwardw/subscriptions",
      "organizations_url": "https://api.github.com/users/edwardw/orgs",
      "repos_url": "https://api.github.com/users/edwardw/repos",
      "events_url": "https://api.github.com/users/edwardw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edwardw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-22T17:12:38Z",
    "updated_at": "2015-02-22T17:13:59Z",
    "body": "I believe this is a non-issue.\n\nIn the given example, the first two are traits, `rustc` merely cares what relationships you want to express. As for whether there's really an implementation `TTrans<R>` for `H`, it doesn't matter there. The third one, however, it is a concrete implementation. So if there's no `TTrans<R>` for `H`, you can not possibly create an instance of it. It is an error.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75445603/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75446525",
    "html_url": "https://github.com/rust-lang/rust/issues/22675#issuecomment-75446525",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22675",
    "id": 75446525,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDQ2NTI1",
    "user": {
      "login": "knz",
      "id": 642886,
      "node_id": "MDQ6VXNlcjY0Mjg4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/642886?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/knz",
      "html_url": "https://github.com/knz",
      "followers_url": "https://api.github.com/users/knz/followers",
      "following_url": "https://api.github.com/users/knz/following{/other_user}",
      "gists_url": "https://api.github.com/users/knz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/knz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/knz/subscriptions",
      "organizations_url": "https://api.github.com/users/knz/orgs",
      "repos_url": "https://api.github.com/users/knz/repos",
      "events_url": "https://api.github.com/users/knz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/knz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-22T17:29:50Z",
    "updated_at": "2015-02-22T17:29:50Z",
    "body": "Ok but then any suggestion as to how to express that `H` must implement `TTrans<A>` for all `A` in the following:\n\n```\n  impl<H,T> Reusable<H> for T where T : Other<H> , H : TTrans<???> { ...       \n                                                             ^^ here\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75446525/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75447860",
    "html_url": "https://github.com/rust-lang/rust/issues/22675#issuecomment-75447860",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22675",
    "id": 75447860,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDQ3ODYw",
    "user": {
      "login": "edwardw",
      "id": 454049,
      "node_id": "MDQ6VXNlcjQ1NDA0OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/454049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/edwardw",
      "html_url": "https://github.com/edwardw",
      "followers_url": "https://api.github.com/users/edwardw/followers",
      "following_url": "https://api.github.com/users/edwardw/following{/other_user}",
      "gists_url": "https://api.github.com/users/edwardw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edwardw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edwardw/subscriptions",
      "organizations_url": "https://api.github.com/users/edwardw/orgs",
      "repos_url": "https://api.github.com/users/edwardw/repos",
      "events_url": "https://api.github.com/users/edwardw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edwardw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-22T17:54:45Z",
    "updated_at": "2015-02-22T17:55:05Z",
    "body": "One thing I don't understand about your design is why `TTrans` needs that phantom parameter in the first place? It probably can be removed all together. The following compiles if that's what you intended:\n\n``` rust\nuse std::marker::PhantomFn;\ntrait TTrans : PhantomFn<(Self)> { type O; }\ntype ApplyT<T> = <T as TTrans>::O;\n\ntrait Reusable<H> {\n  type E;\n  fn ap<R, F : Fn(Self::E)->R>(self, f : F) -> ApplyT<H>;\n}\n\ntrait Other<H>    {\n  type E;\n  fn ap2<R, F : Fn(Self::E)->R>(self, f : F) -> ApplyT<H>;\n}\n\nimpl<H,T> Reusable<H> for T where T : Other<H> , H : TTrans {\n  type E = <Self as Other<H> >::E;\n  fn ap<R, F : Fn(<Self as Other<H>>::E)->R>(self, f : F) -> ApplyT<H> {\n    self.ap2(f)\n  }\n}\n\nfn main() {}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75447860/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75465301",
    "html_url": "https://github.com/rust-lang/rust/issues/22675#issuecomment-75465301",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22675",
    "id": 75465301,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDY1MzAx",
    "user": {
      "login": "knz",
      "id": 642886,
      "node_id": "MDQ6VXNlcjY0Mjg4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/642886?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/knz",
      "html_url": "https://github.com/knz",
      "followers_url": "https://api.github.com/users/knz/followers",
      "following_url": "https://api.github.com/users/knz/following{/other_user}",
      "gists_url": "https://api.github.com/users/knz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/knz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/knz/subscriptions",
      "organizations_url": "https://api.github.com/users/knz/orgs",
      "repos_url": "https://api.github.com/users/knz/repos",
      "events_url": "https://api.github.com/users/knz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/knz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-22T22:00:37Z",
    "updated_at": "2015-02-22T22:00:37Z",
    "body": "Thanks Edward for taking the time to look at this.\nYou see, your proposed solution won't do because simply using `ApplyT<H>` loses the type information for R.  If you look at my example code in the 1st comment, you will see that the use case calls for the _actual_ return type of `ap` (and `ap2`) to select the alternative instance `Option<R>`, which would not be possible unless `ApplyT` also gets `R` as parameter.\n\nI believe that the idea to pass the handle to the trait as parameter (`H` in the example) would provide this desired genericity, but this crucially requires to either defer the validity of the instantiation of `ApplyT` to the moment the actual parameters are known, or an appropriate extra constraint on `H` that it implements `TTrans`. It seems to me that the current behavior of the type system is overly restrictive.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75465301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75491232",
    "html_url": "https://github.com/rust-lang/rust/issues/22675#issuecomment-75491232",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22675",
    "id": 75491232,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDkxMjMy",
    "user": {
      "login": "edwardw",
      "id": 454049,
      "node_id": "MDQ6VXNlcjQ1NDA0OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/454049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/edwardw",
      "html_url": "https://github.com/edwardw",
      "followers_url": "https://api.github.com/users/edwardw/followers",
      "following_url": "https://api.github.com/users/edwardw/following{/other_user}",
      "gists_url": "https://api.github.com/users/edwardw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edwardw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edwardw/subscriptions",
      "organizations_url": "https://api.github.com/users/edwardw/orgs",
      "repos_url": "https://api.github.com/users/edwardw/repos",
      "events_url": "https://api.github.com/users/edwardw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edwardw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-23T05:25:59Z",
    "updated_at": "2015-02-23T05:27:14Z",
    "body": "Well, you could let `Option_` carry that extra type parameter:\n\n``` rust\nstruct Option_<T> { _marker: PhantomData<T> }\n```\n\nAnyway, I don't think a ticket is the right place to continue this discussion. You may want to try http://internals.rust-lang.org/ instead.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75491232/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221393659",
    "html_url": "https://github.com/rust-lang/rust/issues/22675#issuecomment-221393659",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22675",
    "id": 221393659,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTM5MzY1OQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-24T20:36:46Z",
    "updated_at": "2016-05-24T20:36:46Z",
    "body": "Triage: it seems that the original filing here was more of a feature request than a bug, or rather, it's not clear that it's a bug. `PhantomFn` does not even exist anymore. Given these factors, and the lack of an update in over a year, I'm going to give this a close. I would suggest opening a thread on internals, as @edwardw mentioned, to continue any discussion.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221393659/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
