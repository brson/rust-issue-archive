[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/99570163",
    "html_url": "https://github.com/rust-lang/rust/pull/25158#issuecomment-99570163",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25158",
    "id": 99570163,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk5NTcwMTYz",
    "user": {
      "login": "rust-highfive",
      "id": 7378925,
      "node_id": "MDQ6VXNlcjczNzg5MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7378925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rust-highfive",
      "html_url": "https://github.com/rust-highfive",
      "followers_url": "https://api.github.com/users/rust-highfive/followers",
      "following_url": "https://api.github.com/users/rust-highfive/following{/other_user}",
      "gists_url": "https://api.github.com/users/rust-highfive/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rust-highfive/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rust-highfive/subscriptions",
      "organizations_url": "https://api.github.com/users/rust-highfive/orgs",
      "repos_url": "https://api.github.com/users/rust-highfive/repos",
      "events_url": "https://api.github.com/users/rust-highfive/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rust-highfive/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-06T18:43:53Z",
    "updated_at": "2015-05-06T18:43:53Z",
    "body": "Thanks for the pull request, and welcome! The Rust team is excited to review your changes, and you should hear from @huonw (or someone else) soon.\n\nIf any changes to this PR are deemed necessary, please add them as extra commits. This ensures that the reviewer can see what has changed since they last reviewed the code. The way Github handles out-of-date commits, this should also make it reasonably obvious what issues have or haven't been addressed. Large or tricky changes may require several passes of review and changes.\n\nPlease see [CONTRIBUTING.md](https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md) for more information.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/99570163/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/99637626",
    "html_url": "https://github.com/rust-lang/rust/pull/25158#issuecomment-99637626",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25158",
    "id": 99637626,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk5NjM3NjI2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-06T23:02:16Z",
    "updated_at": "2015-05-06T23:02:16Z",
    "body": "Are you sure that all of these are necessary? In general we try to not provide hints where they're not necessary. For example the implementations that have no generics (e.g. `AsRef<str> for str`) will never be inlined unless they're tagged, but the generic implementations should always be available for inlining.\n\nAlso, can this just use `#[inline]` instead of `#[inline(always)]`? It's likely that we just want to enable LLVM to inline it, not necessary force it to in all cases.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/99637626/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/99714986",
    "html_url": "https://github.com/rust-lang/rust/pull/25158#issuecomment-99714986",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25158",
    "id": 99714986,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk5NzE0OTg2",
    "user": {
      "login": "koute",
      "id": 246574,
      "node_id": "MDQ6VXNlcjI0NjU3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/246574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/koute",
      "html_url": "https://github.com/koute",
      "followers_url": "https://api.github.com/users/koute/followers",
      "following_url": "https://api.github.com/users/koute/following{/other_user}",
      "gists_url": "https://api.github.com/users/koute/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/koute/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/koute/subscriptions",
      "organizations_url": "https://api.github.com/users/koute/orgs",
      "repos_url": "https://api.github.com/users/koute/repos",
      "events_url": "https://api.github.com/users/koute/events{/privacy}",
      "received_events_url": "https://api.github.com/users/koute/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-07T04:45:12Z",
    "updated_at": "2015-05-07T04:45:12Z",
    "body": "In general I would agree that one should use #[inline] instead, however in this case I can't think of a single case when you wouldn't want those inlined. Since these methods are so tiny a function call is always going to be more expensive _both_ time and size wise, and if not inlined you can incur a huge performance hit (as I did) since it will also prevent other optimizations from running.\n\nNot all of them may be necessary, but I don't think it's a bad idea to mark that we want those always inlined, if only to be explicit about it and consistent.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/99714986/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/99931878",
    "html_url": "https://github.com/rust-lang/rust/pull/25158#issuecomment-99931878",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25158",
    "id": 99931878,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk5OTMxODc4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-07T16:35:20Z",
    "updated_at": "2015-05-07T16:35:20Z",
    "body": "@koute we generally prefer to rely on LLVM to make optimization deductions rather than going with what we feel is the best option, and that normally involves avoiding `#[inline(always)]` and instead just using `#[inline]`. The reason LLVM doesn't inline these function calls is that it cannot do so today, but with `#[inline]` it's possible to do so and it's highly likely that it will decide itself to inline these functions.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/99931878/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/99959360",
    "html_url": "https://github.com/rust-lang/rust/pull/25158#issuecomment-99959360",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25158",
    "id": 99959360,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk5OTU5MzYw",
    "user": {
      "login": "koute",
      "id": 246574,
      "node_id": "MDQ6VXNlcjI0NjU3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/246574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/koute",
      "html_url": "https://github.com/koute",
      "followers_url": "https://api.github.com/users/koute/followers",
      "following_url": "https://api.github.com/users/koute/following{/other_user}",
      "gists_url": "https://api.github.com/users/koute/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/koute/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/koute/subscriptions",
      "organizations_url": "https://api.github.com/users/koute/orgs",
      "repos_url": "https://api.github.com/users/koute/repos",
      "events_url": "https://api.github.com/users/koute/events{/privacy}",
      "received_events_url": "https://api.github.com/users/koute/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-07T17:52:48Z",
    "updated_at": "2015-05-07T17:53:32Z",
    "body": "Yes, I'm perfectly aware of that.\n\nWell, okay, I can change those to `#[inline]` (and remove the annotations on the generic methods) if that's what's going to take to get this merged (since the performance hit is _really_ crippling me), but, again, I literally see no point whatsoever in leaving this decision to LLVM precisely because you **never** want those to be **not** inlined. This is one of those zero-cost abstractions that we so boast about in the \"featuring\" section on the rust-lang.org, and with an `#[inline(always)]` we communicate to the user that \"yes, we **guarantee** that those methods that literally do nothing but return self are zero cost\". If we're not going to use `#[inline(always)]` in obvious cases where we basically have only functions of type `fn func( &self ) { return self; }` then what's even the point of having `#[inline(always)]` in the language?\n\nAlso, `#[inline]` and `#[inline(always)]` have different behavior when compiling **without** optimizations - LLVM won't inline anything with only an #[inline] in a non-optimized build, but it will always inline things marked with `#[inline(always)]`, so we're only going to pointlessly bloat the debug builds. There are actually some real cases (e.g. realtime simulations and such) in the C++ world where people **can't** use debug builds **at all** because they are too slow.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/99959360/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100012559",
    "html_url": "https://github.com/rust-lang/rust/pull/25158#issuecomment-100012559",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25158",
    "id": 100012559,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMDAxMjU1OQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-07T20:41:20Z",
    "updated_at": "2015-05-07T20:41:20Z",
    "body": "> since the performance hit is really crippling me\n\nDo keep in mind that this is one of the reasons that the compiler supports LTO, to sidestep this problem altogether.\n\n> I literally see no point whatsoever in leaving this decision to LLVM precisely because you never want those to be not inlined\n\nI am personally much less confident about making an assertion such as this. We've seen it unfortunately too liberally applied in the past, causing huge compile-time (and perf) hits. The rule of thumb should be \"stick to `#[inline]` if necessary\" and resort to `#[inline(always)]` only as a last resort. Along those lines unless there's number showing that `#[inline(always)]` is _required_ for perf wins, then we should stick to the rule of thumb.\n\n> If we're not going to use #[inline(always)] in obvious cases where we basically have only functions of type fn func( &self ) { return self; } then what's even the point of having #[inline(always)] in the language?\n\nThere are often legitimate technical reasons why a function should always be inlined, not necessarily for performance. For example, see [this comment](https://github.com/rust-lang/rust/blob/a39d4fc68472ed7a512a7de93f422d7697d92e06/src/libstd/sys/common/stack.rs#L134-L137)\n\n> Also, #[inline] and #[inline(always)] have different behavior when compiling without optimizations - LLVM won't inline anything with only an #[inline] in a non-optimized build, but it will always inline things marked with #[inline(always)], so we're only going to pointlessly bloat the debug builds. There are actually some real cases (e.g. realtime simulations and such) in the C++ world where people can't use debug builds at all because they are too slow.\n\nDo remember though that this needs to be taken with a grain of salt. There's a lot of tradeoffs at play here and there's not really an opportunity to make a blanket statement here. For example:\n- Using `#[inline]` will cause compile-times in debug builds to be higher as the code must be re-translated into the target compilation unit.\n- Using `#[inline(always)]` will cause compile-times in debug builds to be higher as the code must be re-translated _and_ inlined.\n- This specific feature is unlikely to drastically speed up debug builds via `#[inline(always)]`, this sort of improvement would need a comprehensive solution outside of just deciding what to do about `#[inline]`\n\nOverall I would like to establish a convention for when and where to apply `#[inline]` and `#[inline(always)]`, and our current usage is to use `#[inline]` unless otherwise necessary.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100012559/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100632780",
    "html_url": "https://github.com/rust-lang/rust/pull/25158#issuecomment-100632780",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25158",
    "id": 100632780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMDYzMjc4MA==",
    "user": {
      "login": "koute",
      "id": 246574,
      "node_id": "MDQ6VXNlcjI0NjU3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/246574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/koute",
      "html_url": "https://github.com/koute",
      "followers_url": "https://api.github.com/users/koute/followers",
      "following_url": "https://api.github.com/users/koute/following{/other_user}",
      "gists_url": "https://api.github.com/users/koute/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/koute/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/koute/subscriptions",
      "organizations_url": "https://api.github.com/users/koute/orgs",
      "repos_url": "https://api.github.com/users/koute/repos",
      "events_url": "https://api.github.com/users/koute/events{/privacy}",
      "received_events_url": "https://api.github.com/users/koute/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-10T12:12:51Z",
    "updated_at": "2015-05-10T12:12:51Z",
    "body": "Okay, I've removed the annotations from methods with generics and removed `always`.\n\nI can certainly see where you're coming from; I'll keep it in mind with any future pull requests, I still don't agree with it though. (:\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100632780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100673813",
    "html_url": "https://github.com/rust-lang/rust/pull/25158#issuecomment-100673813",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25158",
    "id": 100673813,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMDY3MzgxMw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-10T17:34:39Z",
    "updated_at": "2015-05-10T17:34:39Z",
    "body": "@bors: r+ a168dbad15e108fce02a996fc8f72803460b7a55 rollup\n\nThanks!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100673813/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
