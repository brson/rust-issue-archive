[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32445868",
    "html_url": "https://github.com/rust-lang/rust/issues/11594#issuecomment-32445868",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11594",
    "id": 32445868,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDQ1ODY4",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-16T06:46:42Z",
    "updated_at": "2014-01-16T06:46:59Z",
    "body": "@erickt When pushing anything onto a verbatim path, we explicitly normalize the pushed argument first. When pushing onto a non-verbatim path, we concatenate them and normalize the result. The idea here is that we're pushing _paths_, not arbitrary strings. `p.push(s)` should behave identically to `p.push(Path::new(s))`. In most cases, there's no difference, but verbatim paths are kind of wonky.\n\nThis makes for an argument that we should have another method `.push_component()`, which treats the argument as a mere path component instead of a path in its own right, doing things such as skipping any parsing of the path prefix and skipping any normalization when pushing onto a verbatim path. The only difference in PosixPath is that `p.push_component(\"/foo\")` would presumably ignore the leading `/` and treat it the same as `p.push(\"foo\")`. This is in addition to the use-case we talked about on IRC, where you want to be able to split up a path by its .components() and then re-create it and get the same path back (which should work today for all paths except for verbatim windows paths).\n\nHowever, I am leery about the idea of adding 4 more API methods (`.push_component()`, `.join_component()`, `.push_many_components()`, `.join_many_components()`).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32445868/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32614119",
    "html_url": "https://github.com/rust-lang/rust/issues/11594#issuecomment-32614119",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11594",
    "id": 32614119,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjE0MTE5",
    "user": {
      "login": "erickt",
      "id": 84711,
      "node_id": "MDQ6VXNlcjg0NzEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erickt",
      "html_url": "https://github.com/erickt",
      "followers_url": "https://api.github.com/users/erickt/followers",
      "following_url": "https://api.github.com/users/erickt/following{/other_user}",
      "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erickt/subscriptions",
      "organizations_url": "https://api.github.com/users/erickt/orgs",
      "repos_url": "https://api.github.com/users/erickt/repos",
      "events_url": "https://api.github.com/users/erickt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erickt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-17T15:19:48Z",
    "updated_at": "2014-01-17T15:19:48Z",
    "body": "Yeah, I don't love the idea of adding more API methods either. What do you think about changing how normalization is done? If we didn't normalize by default, the end user could decide that they didn't want to run normalization on a verbatim path.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32614119/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32642729",
    "html_url": "https://github.com/rust-lang/rust/issues/11594#issuecomment-32642729",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11594",
    "id": 32642729,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjQyNzI5",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-17T20:19:30Z",
    "updated_at": "2014-01-17T20:19:30Z",
    "body": "@erickt We need to normalize. The entire way the path module is implemented assumes that all `Path` instances are normalized internally. The only quirk here is that, when pushing onto a verbatim path, you may not want to normalize the pushed component (but the resulting path would still need to be a \"normalized\" verbatim path, for the certain value of normalization that verbatim paths have [e.g. no double-backslashes in between components]).\n\nAnother option is to add a `Component` type that wraps a `&[u8]` and implements `BytesContainer`, which will allow it to be pushed. Then we can detect if it's a `Component` and skip the pre-normalization when pushing onto a verbatim path. But I'm not thrilled with this idea either, because it means adding yet another specialized type-detection method `.is_component()` to `BytesContainer`, and is just generally kind of awkward. And it means `.components()` would probably want to return this `Component` value (but then what about `.str_components()`? Do we make `Component` into an enum with `ByteComponent` and `StrComponent`, or just live with string components not being able to opt into this behavior without converting back to `&[u8]`?)\n\nThere's a third option which might solve your specific use-case, which is a `.parent_iter()` that yields successive paths starting from the root and adding each component dir in turn, until it yields the parent of the original path (if the original path is the root folder already, it would yield nothing). Then you could use `.path_relative_from()` to construct the other half of the path, for your pair. However, this is a somewhat specialized use-case.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32642729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
