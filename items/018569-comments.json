[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61487426",
    "html_url": "https://github.com/rust-lang/rust/issues/18569#issuecomment-61487426",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18569",
    "id": 61487426,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNDg3NDI2",
    "user": {
      "login": "mprobinson",
      "id": 2033019,
      "node_id": "MDQ6VXNlcjIwMzMwMTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2033019?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mprobinson",
      "html_url": "https://github.com/mprobinson",
      "followers_url": "https://api.github.com/users/mprobinson/followers",
      "following_url": "https://api.github.com/users/mprobinson/following{/other_user}",
      "gists_url": "https://api.github.com/users/mprobinson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mprobinson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mprobinson/subscriptions",
      "organizations_url": "https://api.github.com/users/mprobinson/orgs",
      "repos_url": "https://api.github.com/users/mprobinson/repos",
      "events_url": "https://api.github.com/users/mprobinson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mprobinson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-03T14:46:03Z",
    "updated_at": "2014-11-03T14:46:03Z",
    "body": "This looks very similar to #18541 , although worse because the linker version script workaround does not work in this case.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61487426/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61551115",
    "html_url": "https://github.com/rust-lang/rust/issues/18569#issuecomment-61551115",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18569",
    "id": 61551115,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNTUxMTE1",
    "user": {
      "login": "alexchandel",
      "id": 637714,
      "node_id": "MDQ6VXNlcjYzNzcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/637714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexchandel",
      "html_url": "https://github.com/alexchandel",
      "followers_url": "https://api.github.com/users/alexchandel/followers",
      "following_url": "https://api.github.com/users/alexchandel/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexchandel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexchandel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexchandel/subscriptions",
      "organizations_url": "https://api.github.com/users/alexchandel/orgs",
      "repos_url": "https://api.github.com/users/alexchandel/repos",
      "events_url": "https://api.github.com/users/alexchandel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexchandel/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-03T21:23:53Z",
    "updated_at": "2014-11-03T21:23:53Z",
    "body": "I don't think this is the same issue as #18541.\n\nIn this case, compiling this on OS X x86_64 with `rustc --emit obj small.rs` produces a 4KB Mach-O object file, the smallest possible. There are only 5 symbols: `_rust_stack_exhausted`, `__ZN15stack_exhausted10__rust_abiE`, `_rust_eh_personality`, `__ZN14eh_personality10__rust_abiE`, `_rust_begin_unwind`.\n\nBut compiling with `rustc small.rs` and emitting a static library causes libcompiler-rt, libmorestack, and libcore to be included in the archive. libcompiler-rt and libcore each add about 600K.\n\nIt's worth noting that in the equivalent bare-bones executable, none of that is included, and the final binary is 8K (on OS X).\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61551115/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72983960",
    "html_url": "https://github.com/rust-lang/rust/issues/18569#issuecomment-72983960",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18569",
    "id": 72983960,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyOTgzOTYw",
    "user": {
      "login": "alexchandel",
      "id": 637714,
      "node_id": "MDQ6VXNlcjYzNzcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/637714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexchandel",
      "html_url": "https://github.com/alexchandel",
      "followers_url": "https://api.github.com/users/alexchandel/followers",
      "following_url": "https://api.github.com/users/alexchandel/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexchandel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexchandel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexchandel/subscriptions",
      "organizations_url": "https://api.github.com/users/alexchandel/orgs",
      "repos_url": "https://api.github.com/users/alexchandel/repos",
      "events_url": "https://api.github.com/users/alexchandel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexchandel/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-05T02:34:28Z",
    "updated_at": "2015-02-05T02:34:28Z",
    "body": "On the other hand, compiling a small stdlib program like\n\n``` rust\nfn main() {std::io::stdio::stdout_raw().write_all(b\"Hi\\n\");}\n```\n\neven with `-O -C lto -C no-stack-check -Z no-landing-pads` emits a massive 292K executable on OS X, as of alpha. The equivalent C program is 4K (the smallest normal executable size on OS X) and most of that is 0's. So Rust does have a bloat problem.\n\n By instruction count, at least two thirds of that rust executable is jemalloc.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72983960/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72987232",
    "html_url": "https://github.com/rust-lang/rust/issues/18569#issuecomment-72987232",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18569",
    "id": 72987232,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyOTg3MjMy",
    "user": {
      "login": "alexchandel",
      "id": 637714,
      "node_id": "MDQ6VXNlcjYzNzcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/637714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexchandel",
      "html_url": "https://github.com/alexchandel",
      "followers_url": "https://api.github.com/users/alexchandel/followers",
      "following_url": "https://api.github.com/users/alexchandel/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexchandel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexchandel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexchandel/subscriptions",
      "organizations_url": "https://api.github.com/users/alexchandel/orgs",
      "repos_url": "https://api.github.com/users/alexchandel/repos",
      "events_url": "https://api.github.com/users/alexchandel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexchandel/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-05T03:13:23Z",
    "updated_at": "2015-02-05T03:13:23Z",
    "body": "It seems like the allocations performed in [the lang_start](https://github.com/rust-lang/rust/blob/master/src/libstd/rt/mod.rs#L64) drag jemalloc in. There should be a way to do this without allocation right? It would shave off 200K+ from the minimal executable size.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72987232/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72987729",
    "html_url": "https://github.com/rust-lang/rust/issues/18569#issuecomment-72987729",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18569",
    "id": 72987729,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyOTg3NzI5",
    "user": {
      "login": "alexchandel",
      "id": 637714,
      "node_id": "MDQ6VXNlcjYzNzcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/637714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexchandel",
      "html_url": "https://github.com/alexchandel",
      "followers_url": "https://api.github.com/users/alexchandel/followers",
      "following_url": "https://api.github.com/users/alexchandel/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexchandel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexchandel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexchandel/subscriptions",
      "organizations_url": "https://api.github.com/users/alexchandel/orgs",
      "repos_url": "https://api.github.com/users/alexchandel/repos",
      "events_url": "https://api.github.com/users/alexchandel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexchandel/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-05T03:19:59Z",
    "updated_at": "2015-02-05T03:19:59Z",
    "body": "In fact, I think it's just one allocation:\n\n``` rust\nlet thread: Thread = NewThread::new(Some(\"<main>\".to_string()));\n```\n\nNewThread should be rewritten to take `&'static str` alternatively!\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72987729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75015197",
    "html_url": "https://github.com/rust-lang/rust/issues/18569#issuecomment-75015197",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18569",
    "id": 75015197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MDE1MTk3",
    "user": {
      "login": "rprichard",
      "id": 1572855,
      "node_id": "MDQ6VXNlcjE1NzI4NTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1572855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rprichard",
      "html_url": "https://github.com/rprichard",
      "followers_url": "https://api.github.com/users/rprichard/followers",
      "following_url": "https://api.github.com/users/rprichard/following{/other_user}",
      "gists_url": "https://api.github.com/users/rprichard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rprichard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rprichard/subscriptions",
      "organizations_url": "https://api.github.com/users/rprichard/orgs",
      "repos_url": "https://api.github.com/users/rprichard/repos",
      "events_url": "https://api.github.com/users/rprichard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rprichard/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-19T08:38:48Z",
    "updated_at": "2015-02-19T08:38:48Z",
    "body": "I just opened issue #22525.  It might be related.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75015197/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75390603",
    "html_url": "https://github.com/rust-lang/rust/issues/18569#issuecomment-75390603",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18569",
    "id": 75390603,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MzkwNjAz",
    "user": {
      "login": "alexchandel",
      "id": 637714,
      "node_id": "MDQ6VXNlcjYzNzcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/637714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexchandel",
      "html_url": "https://github.com/alexchandel",
      "followers_url": "https://api.github.com/users/alexchandel/followers",
      "following_url": "https://api.github.com/users/alexchandel/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexchandel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexchandel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexchandel/subscriptions",
      "organizations_url": "https://api.github.com/users/alexchandel/orgs",
      "repos_url": "https://api.github.com/users/alexchandel/repos",
      "events_url": "https://api.github.com/users/alexchandel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexchandel/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-21T20:17:36Z",
    "updated_at": "2015-02-21T20:17:36Z",
    "body": "@rprichard My minimal stdlib program, compiled above with `rustc -C opt-level=2 -C lto -C no-stack-check -Z no-landing-pads test.rs` or `rustc -C opt-level=3 -C lto -C no-stack-check -Z no-landing-pads test.rs`, is 276kB. An improvement, but still bloated.\n\nI also checked the instruction usage, and literally **70.6%** of the executable is jemalloc.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75390603/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75485096",
    "html_url": "https://github.com/rust-lang/rust/issues/18569#issuecomment-75485096",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18569",
    "id": 75485096,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDg1MDk2",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-23T03:29:17Z",
    "updated_at": "2015-02-23T03:29:17Z",
    "body": "On Windows, at least half of the executable size appears to be due to jemalloc's debug into.\n`rustc -Clto -Copt-level=3 hello.rs` gives me a 822K executable.   Adding `-Clink-args=-Wl,-strip-all` brings that down to 437K..\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75485096/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75689132",
    "html_url": "https://github.com/rust-lang/rust/issues/18569#issuecomment-75689132",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18569",
    "id": 75689132,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1Njg5MTMy",
    "user": {
      "login": "alexchandel",
      "id": 637714,
      "node_id": "MDQ6VXNlcjYzNzcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/637714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexchandel",
      "html_url": "https://github.com/alexchandel",
      "followers_url": "https://api.github.com/users/alexchandel/followers",
      "following_url": "https://api.github.com/users/alexchandel/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexchandel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexchandel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexchandel/subscriptions",
      "organizations_url": "https://api.github.com/users/alexchandel/orgs",
      "repos_url": "https://api.github.com/users/alexchandel/repos",
      "events_url": "https://api.github.com/users/alexchandel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexchandel/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-24T02:50:05Z",
    "updated_at": "2015-02-24T02:51:02Z",
    "body": "FYI, Rust's branch of LLVM [just](https://github.com/rust-lang/rust/issues/22159) [learned](https://github.com/rust-lang/llvm/pull/37) about `je_mallocx`, so this may see some improvement. I doubt it though, since the `NewThread` is so low-level.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75689132/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
