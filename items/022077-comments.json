[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73397524",
    "html_url": "https://github.com/rust-lang/rust/issues/22077#issuecomment-73397524",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22077",
    "id": 73397524,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMzk3NTI0",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-08T05:13:23Z",
    "updated_at": "2015-02-08T05:15:08Z",
    "body": "This seems to be a problem with associated types, converting `Fun` to `Fun<Output>` correctly fails to compile:\n\n``` rust\ntrait Fun<Output> {\n    fn call<'x>(&'x self) -> Output;\n}\n\nstruct Holder { x: String }\n\nimpl<'a> Fun<&'a str> for Holder {\n    fn call<'b>(&'b self) -> &'b str {\n        &self.x[]\n    }\n}\n```\n\n```\n<anon>:8:5: 10:6 error: method `call` has an incompatible type for trait: expected bound lifetime parameter 'x, found concrete lifetime [E0053]\n<anon>:8     fn call<'b>(&'b self) -> &'b str {\n<anon>:9         &self.x[]\n<anon>:10     }\n```\n\ncc @nikomatsakis \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73397524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73412697",
    "html_url": "https://github.com/rust-lang/rust/issues/22077#issuecomment-73412697",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22077",
    "id": 73412697,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDEyNjk3",
    "user": {
      "login": "edwardw",
      "id": 454049,
      "node_id": "MDQ6VXNlcjQ1NDA0OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/454049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/edwardw",
      "html_url": "https://github.com/edwardw",
      "followers_url": "https://api.github.com/users/edwardw/followers",
      "following_url": "https://api.github.com/users/edwardw/following{/other_user}",
      "gists_url": "https://api.github.com/users/edwardw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edwardw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edwardw/subscriptions",
      "organizations_url": "https://api.github.com/users/edwardw/orgs",
      "repos_url": "https://api.github.com/users/edwardw/repos",
      "events_url": "https://api.github.com/users/edwardw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edwardw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-08T14:21:31Z",
    "updated_at": "2015-02-08T14:25:12Z",
    "body": "cc me. It feels very closely related to #21750, although on the surface they are quite the opposite. Also, @nikomatsakis may have something in the making for #21974.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73412697/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74157535",
    "html_url": "https://github.com/rust-lang/rust/issues/22077#issuecomment-74157535",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22077",
    "id": 74157535,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MTU3NTM1",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-12T21:34:01Z",
    "updated_at": "2015-02-12T21:34:01Z",
    "body": "P-backcompat-lang, 1.0 beta.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74157535/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74207733",
    "html_url": "https://github.com/rust-lang/rust/issues/22077#issuecomment-74207733",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22077",
    "id": 74207733,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MjA3NzMz",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-13T05:36:49Z",
    "updated_at": "2015-02-13T05:36:49Z",
    "body": "Possibly related to https://github.com/rust-lang/rust/issues/21259.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74207733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74396675",
    "html_url": "https://github.com/rust-lang/rust/issues/22077#issuecomment-74396675",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22077",
    "id": 74396675,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0Mzk2Njc1",
    "user": {
      "login": "edwardw",
      "id": 454049,
      "node_id": "MDQ6VXNlcjQ1NDA0OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/454049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/edwardw",
      "html_url": "https://github.com/edwardw",
      "followers_url": "https://api.github.com/users/edwardw/followers",
      "following_url": "https://api.github.com/users/edwardw/following{/other_user}",
      "gists_url": "https://api.github.com/users/edwardw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edwardw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edwardw/subscriptions",
      "organizations_url": "https://api.github.com/users/edwardw/orgs",
      "repos_url": "https://api.github.com/users/edwardw/repos",
      "events_url": "https://api.github.com/users/edwardw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edwardw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-14T23:29:44Z",
    "updated_at": "2015-02-15T00:24:33Z",
    "body": "Have an fix in the same vein of #22338. But, it also reports an error\n\n> error: method `index_mut` has an incompatible type for trait: expected type parameter, found a different type parameter [E0053]\n\nfor [libstd/collections/hash/map.rs](https://github.com/rust-lang/rust/blob/master/src/libstd/collections/hash/map.rs#L1249-L1274):\n\n``` rust\nimpl<K, Q: ?Sized, V, S, H> Index<Q> for HashMap<K, V, S>\n    where K: Eq + Hash<H>,\n          Q: Eq + Hash<H> + BorrowFrom<K>,\n          S: HashState<Hasher=H>,\n          H: hash::Hasher<Output=u64>\n{\n    type Output = V;\n\n    #[inline]\n    fn index<'a>(&'a self, index: &Q) -> &'a V {\n        self.get(index).expect(\"no entry found for key\")\n    }\n}\n\nimpl<K, V, S, H, Q: ?Sized> IndexMut<Q> for HashMap<K, V, S>\n    where K: Eq + Hash<H>,\n          Q: Eq + Hash<H> + BorrowFrom<K>,\n          S: HashState<Hasher=H>,\n          H: hash::Hasher<Output=u64>\n{\n    #[inline]\n    fn index_mut<'a>(&'a mut self, index: &Q) -> &'a mut V {\n        self.get_mut(index).expect(\"no entry found for key\")\n    }\n}\n```\n\nNotice, the order of the type parameters is different. So is the error legit or does the fix simply have a regression?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74396675/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75771803",
    "html_url": "https://github.com/rust-lang/rust/issues/22077#issuecomment-75771803",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22077",
    "id": 75771803,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NzcxODAz",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-24T15:00:38Z",
    "updated_at": "2015-02-24T15:00:38Z",
    "body": "Ah, I see. The problem is that the `'a` variable on the impl is unconstrained. That is, this impl promises that it can make an `Output` for _any_ `'a`, but `'a` does no appear in the input type nor in the trait reference. I decided to allow such \"unused\" lifetimes even though, probably, they ought to be prohibited by [RFC 447](https://github.com/rust-lang/rfcs/blob/master/text/0447-no-unused-impl-parameters.md) because it wasn't clear to me what harm they could do. Given only methods, I don't think they really _can_ do harm, though they are kind of pointless. In particular, if the lifetime does not appear in the trait reference, it cannot appear in the signature of any of the methods that the trait defines, so when someone calls fns defined in the trait, they can use any lifetime they want for that impl parameter without affecting the signature they see.\n\nBut this logic does not hold with associated types. They allow us to create links between a projected type and the return type of a method. In that case, it is harmful if there are lifetimes that are not constrained by the trait reference or the input types, since every instantiation of `Self::Output` is then free to choose a distinct `'a` with no constraints. Even this is not bad, except that when we call a trait fn, we assume that every use of `<X as Trait>::Output` will be the same type if the inputs to the trait (`X`, in this case) are the same, but that is not the case here.\n\nWe should prohibit these unconstrainted lifetime parameters, either completely, or at minimum from appearing in the value of an associated type.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75771803/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/78122975",
    "html_url": "https://github.com/rust-lang/rust/issues/22077#issuecomment-78122975",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22077",
    "id": 78122975,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MTIyOTc1",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-10T18:58:06Z",
    "updated_at": "2015-03-10T18:58:06Z",
    "body": "Example illustrating soundness hole:\n\n``` rust\n\n\nstruct Foo<'a> {\n    inner: &'a mut [u8]\n}\n\nimpl<'a, 'b> Iterator for Foo<'a> {\n    type Item = &'b mut u8;\n\n    fn next(&mut self) -> Option<&mut u8> {\n        Some(&mut self.inner[0])\n    }\n}\n\nfn main() {\n    let mut fun = [1,2,3,4,5];\n    let mut foo = Foo {\n        inner: &mut fun\n    };\n    {\n        let a = foo.next().unwrap();\n        let b = foo.next().unwrap();\n        *a = 1;\n        *b = 2;\n        println!(\"{}\", a);\n    }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/78122975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86729160",
    "html_url": "https://github.com/rust-lang/rust/issues/22077#issuecomment-86729160",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22077",
    "id": 86729160,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NzI5MTYw",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-26T21:40:31Z",
    "updated_at": "2015-03-26T21:40:31Z",
    "body": "This is \"just a bug\", but one we would really like to fix.\n\nNonetheless, not a beta-blocker.  But we want to fix for 1.0; so reclassifying as such.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/86729160/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
