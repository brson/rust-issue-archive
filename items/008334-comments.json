[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22175909",
    "html_url": "https://github.com/rust-lang/rust/issues/8334#issuecomment-22175909",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8334",
    "id": 22175909,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTc1OTA5",
    "user": {
      "login": "bstrie",
      "id": 865233,
      "node_id": "MDQ6VXNlcjg2NTIzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bstrie",
      "html_url": "https://github.com/bstrie",
      "followers_url": "https://api.github.com/users/bstrie/followers",
      "following_url": "https://api.github.com/users/bstrie/following{/other_user}",
      "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions",
      "organizations_url": "https://api.github.com/users/bstrie/orgs",
      "repos_url": "https://api.github.com/users/bstrie/repos",
      "events_url": "https://api.github.com/users/bstrie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bstrie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-06T12:43:35Z",
    "updated_at": "2013-08-06T12:43:35Z",
    "body": "I also spy a `movss` that's present in the generic version, but not in the normal version.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22175909/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22425548",
    "html_url": "https://github.com/rust-lang/rust/issues/8334#issuecomment-22425548",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8334",
    "id": 22425548,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNDI1NTQ4",
    "user": {
      "login": "Florob",
      "id": 133684,
      "node_id": "MDQ6VXNlcjEzMzY4NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/133684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Florob",
      "html_url": "https://github.com/Florob",
      "followers_url": "https://api.github.com/users/Florob/followers",
      "following_url": "https://api.github.com/users/Florob/following{/other_user}",
      "gists_url": "https://api.github.com/users/Florob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Florob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Florob/subscriptions",
      "organizations_url": "https://api.github.com/users/Florob/orgs",
      "repos_url": "https://api.github.com/users/Florob/repos",
      "events_url": "https://api.github.com/users/Florob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Florob/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-09T21:56:58Z",
    "updated_at": "2013-08-09T21:57:31Z",
    "body": "I was curious about the amount of NOPs appearing in some code today, so I had a look around trying to deteremine where they originate. It turns out that the preferred alignment (on x86_64) for loop bodies is 16 Byte, so padding is introduced before loop bodies to ensure this. That is also what is happening here. The reason it's not aligned in the generic version is the additional `movss`. With current master I don't actually see that additional `movss` any more, so this is likely \"fixed\".\nI do wonder why (unlike clang) we get a lot of 1 Byte NOPs instead of a multi-byte NOP though...\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22425548/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23136457",
    "html_url": "https://github.com/rust-lang/rust/issues/8334#issuecomment-23136457",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8334",
    "id": 23136457,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMTM2NDU3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-23T00:33:39Z",
    "updated_at": "2013-08-23T00:34:03Z",
    "body": "@Florob: I think it's because we're doing target info wrong. @alexcrichton has some work in-progress that may fix that.\n\nI'm going to close this issue since I can't duplicate it on master.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23136457/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23142815",
    "html_url": "https://github.com/rust-lang/rust/issues/8334#issuecomment-23142815",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8334",
    "id": 23142815,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMTQyODE1",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-23T04:29:21Z",
    "updated_at": "2013-08-23T04:29:21Z",
    "body": "@thestinger, are you sure you can't reproduce? If so, perhaps this is an OSX-specific problem because I was able to reproduce the extra nops on master.\n\nAdditionally, #8700 doesn't fix this :(\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23142815/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23143185",
    "html_url": "https://github.com/rust-lang/rust/issues/8334#issuecomment-23143185",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8334",
    "id": 23143185,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMTQzMTg1",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-23T04:44:48Z",
    "updated_at": "2013-08-23T04:44:48Z",
    "body": "What about `-Z no-monomorphic-collapse`?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23143185/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23145180",
    "html_url": "https://github.com/rust-lang/rust/issues/8334#issuecomment-23145180",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8334",
    "id": 23145180,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMTQ1MTgw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-23T06:07:27Z",
    "updated_at": "2013-08-23T06:07:27Z",
    "body": "I still see the nops :(\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23145180/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23150215",
    "html_url": "https://github.com/rust-lang/rust/issues/8334#issuecomment-23150215",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8334",
    "id": 23150215,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMTUwMjE1",
    "user": {
      "login": "Florob",
      "id": 133684,
      "node_id": "MDQ6VXNlcjEzMzY4NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/133684?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Florob",
      "html_url": "https://github.com/Florob",
      "followers_url": "https://api.github.com/users/Florob/followers",
      "following_url": "https://api.github.com/users/Florob/following{/other_user}",
      "gists_url": "https://api.github.com/users/Florob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Florob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Florob/subscriptions",
      "organizations_url": "https://api.github.com/users/Florob/orgs",
      "repos_url": "https://api.github.com/users/Florob/repos",
      "events_url": "https://api.github.com/users/Florob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Florob/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-23T08:29:58Z",
    "updated_at": "2013-08-23T08:29:58Z",
    "body": "@alexcrichton What code are you using exactly (i.e. how and how often do you call `doit()`)?\nIt seems to me that rustc is \"clever\" here and instantiates `doit()` not for f32 in general, but for the specific argument you call it with. This adds the additional `movss` to get that argument into `xmm0`. Once that `movss` is there the `nop`s are expected for alignment.\nIf I call `doit()` twice, with different arguments, or compile using `--lib` the `movss` (and `nop`s) vanishes for me.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23150215/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23174460",
    "html_url": "https://github.com/rust-lang/rust/issues/8334#issuecomment-23174460",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8334",
    "id": 23174460,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMTc0NDYw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-23T16:21:48Z",
    "updated_at": "2013-08-23T16:21:48Z",
    "body": "Oh interesting, I using this code:\n\n``` rust\n#[inline(never)]\nfn doit_not_generic(a: f32) -> f32 {\n    let mut a = a;\n    do 1000000000.times {\n        a = a * a;\n    }\n\n    a\n}\n\n#[inline(never)]\nfn doit<N: Mul<N, N>>(a: N) -> N {\n    let mut a = a;\n    do 1000000000.times {\n        a = a * a;\n    }\n\n    a\n}\n\n\nfn main() {\n    assert!(doit_not_generic(2.0f32) == doit(2.0f32));\n}\n```\n\nYou are correct though that if I later call it with a different argument, the two codegens are the same. I'm a little surprised these aren't merged via the `mergefunc` pass, but that's for a  later day!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23174460/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
