[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/122964350",
    "html_url": "https://github.com/rust-lang/rust/pull/27159#issuecomment-122964350",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27159",
    "id": 122964350,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMjk2NDM1MA==",
    "user": {
      "login": "rust-highfive",
      "id": 7378925,
      "node_id": "MDQ6VXNlcjczNzg5MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7378925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rust-highfive",
      "html_url": "https://github.com/rust-highfive",
      "followers_url": "https://api.github.com/users/rust-highfive/followers",
      "following_url": "https://api.github.com/users/rust-highfive/following{/other_user}",
      "gists_url": "https://api.github.com/users/rust-highfive/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rust-highfive/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rust-highfive/subscriptions",
      "organizations_url": "https://api.github.com/users/rust-highfive/orgs",
      "repos_url": "https://api.github.com/users/rust-highfive/repos",
      "events_url": "https://api.github.com/users/rust-highfive/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rust-highfive/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-20T17:41:54Z",
    "updated_at": "2015-07-20T17:41:54Z",
    "body": "r? @huonw\n\n(rust_highfive has picked a reviewer for you, use r? to override)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/122964350/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/122989729",
    "html_url": "https://github.com/rust-lang/rust/pull/27159#issuecomment-122989729",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27159",
    "id": 122989729,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMjk4OTcyOQ==",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-20T19:01:50Z",
    "updated_at": "2015-07-20T19:01:50Z",
    "body": "r? @alexcrichton\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/122989729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123038113",
    "html_url": "https://github.com/rust-lang/rust/pull/27159#issuecomment-123038113",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27159",
    "id": 123038113,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzAzODExMw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-20T21:03:52Z",
    "updated_at": "2015-07-20T21:03:52Z",
    "body": "I feel like this is becoming too magical of an implementation. We already do the right thing in using any pre-allocated space in the vector to issue fewer reads, so I think this kind of optimization should be left up to the caller of `read_to_end`. Mixing multiple I/O calls in such a core function can be quite surprising, especially if you're expecting `read_to_end` to _only_ call `read`. An example where this needs to be guaranteed is for syscall whitelists.\n\nAdditionally, I wouldn't be confident in saying that all situations everywhere would succeed in a call to `stat` _if and only if_ `read` would also succeed. Put another way there may be situations where `stat` fails and a further `read` will succeed.\n\nThis also seems like an easy enough (and perhaps not necessarily ubiquitously needed) optimization to applications individually, so I'm not totally inclined to merge.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123038113/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123041691",
    "html_url": "https://github.com/rust-lang/rust/pull/27159#issuecomment-123041691",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27159",
    "id": 123041691,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzA0MTY5MQ==",
    "user": {
      "login": "AlisdairO",
      "id": 6296622,
      "node_id": "MDQ6VXNlcjYyOTY2MjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6296622?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlisdairO",
      "html_url": "https://github.com/AlisdairO",
      "followers_url": "https://api.github.com/users/AlisdairO/followers",
      "following_url": "https://api.github.com/users/AlisdairO/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlisdairO/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlisdairO/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlisdairO/subscriptions",
      "organizations_url": "https://api.github.com/users/AlisdairO/orgs",
      "repos_url": "https://api.github.com/users/AlisdairO/repos",
      "events_url": "https://api.github.com/users/AlisdairO/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlisdairO/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-20T21:14:25Z",
    "updated_at": "2015-07-20T21:14:25Z",
    "body": "I can see the argument regarding syscall whitelists.  On the other hand, I'm not so sure I agree on it being surprising that read_to_end might make other calls - it's a higher-level convenience function after all.\n\nOne option might be to change the code such that if the stat call fails, it continues but doesn't provide a size hint - I don't know if that would make this implementation more acceptable?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123041691/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123044950",
    "html_url": "https://github.com/rust-lang/rust/pull/27159#issuecomment-123044950",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27159",
    "id": 123044950,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzA0NDk1MA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-20T21:22:01Z",
    "updated_at": "2015-07-20T21:22:01Z",
    "body": "Unfortunately I don't think that's sufficient, you can see https://github.com/rust-lang/rust/issues/22879 for some more info. Syscalls that aren't expected need to be avoided entirely as they don't always return an error and sometimes trigger termination of the entire process.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123044950/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123045375",
    "html_url": "https://github.com/rust-lang/rust/pull/27159#issuecomment-123045375",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27159",
    "id": 123045375,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzA0NTM3NQ==",
    "user": {
      "login": "bors",
      "id": 3372342,
      "node_id": "MDQ6VXNlcjMzNzIzNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bors",
      "html_url": "https://github.com/bors",
      "followers_url": "https://api.github.com/users/bors/followers",
      "following_url": "https://api.github.com/users/bors/following{/other_user}",
      "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
      "organizations_url": "https://api.github.com/users/bors/orgs",
      "repos_url": "https://api.github.com/users/bors/repos",
      "events_url": "https://api.github.com/users/bors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bors/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-20T21:22:42Z",
    "updated_at": "2015-07-20T21:22:42Z",
    "body": ":umbrella: The latest upstream changes (presumably #26831) made this pull request unmergeable. Please resolve the merge conflicts.\n",
    "author_association": "COLLABORATOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123045375/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123050006",
    "html_url": "https://github.com/rust-lang/rust/pull/27159#issuecomment-123050006",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27159",
    "id": 123050006,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzA1MDAwNg==",
    "user": {
      "login": "AlisdairO",
      "id": 6296622,
      "node_id": "MDQ6VXNlcjYyOTY2MjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6296622?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlisdairO",
      "html_url": "https://github.com/AlisdairO",
      "followers_url": "https://api.github.com/users/AlisdairO/followers",
      "following_url": "https://api.github.com/users/AlisdairO/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlisdairO/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlisdairO/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlisdairO/subscriptions",
      "organizations_url": "https://api.github.com/users/AlisdairO/orgs",
      "repos_url": "https://api.github.com/users/AlisdairO/repos",
      "events_url": "https://api.github.com/users/AlisdairO/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlisdairO/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-20T21:33:33Z",
    "updated_at": "2015-07-20T21:33:33Z",
    "body": "Fair enough - it seems like a bit of a shame to give up such a simple performance win for non-user-optimised code, but if it won't work it won't work!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123050006/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/241103103",
    "html_url": "https://github.com/rust-lang/rust/pull/27159#issuecomment-241103103",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27159",
    "id": 241103103,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MTEwMzEwMw==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-08-19T18:49:33Z",
    "updated_at": "2016-08-19T18:49:33Z",
    "body": "> Fair enough - it seems like a bit of a shame to give up such a simple performance win for non-user-optimised code, but if it won't work it won't work!\n\nThere has been some talk of adding a convenience `fs::read_file(path)` method which would be another way to solve this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/241103103/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  }
]
