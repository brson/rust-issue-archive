[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69404923",
    "html_url": "https://github.com/rust-lang/rust/issues/19950#issuecomment-69404923",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19950",
    "id": 69404923,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NDA0OTIz",
    "user": {
      "login": "mzabaluev",
      "id": 1198919,
      "node_id": "MDQ6VXNlcjExOTg5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1198919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzabaluev",
      "html_url": "https://github.com/mzabaluev",
      "followers_url": "https://api.github.com/users/mzabaluev/followers",
      "following_url": "https://api.github.com/users/mzabaluev/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzabaluev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzabaluev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzabaluev/subscriptions",
      "organizations_url": "https://api.github.com/users/mzabaluev/orgs",
      "repos_url": "https://api.github.com/users/mzabaluev/repos",
      "events_url": "https://api.github.com/users/mzabaluev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzabaluev/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-09T21:49:45Z",
    "updated_at": "2015-01-09T21:49:45Z",
    "body": "It can be much worse for closures:\n\n``` rust\nuse std::ptr;\nuse std::thread::Thread;\n\nmod obscure {\n    struct Obscure {\n        ptr: *const ()\n    }\n}\n\nstruct A {\n    inner: obscure::Obscure\n}\n\nimpl A {\n    fn new() -> A {\n        A { inner: obscure::Obscure { ptr: ptr::null() } }\n    }\n}\n\nfn main() {\n    let me_bad = A::new();\n    let me_ok = 0i32;\n    Thread::spawn(|| {\n        let _guess_where_it_is = (me_bad, me_ok);\n    });\n}\n```\n\nFails compilation with:\n\n```\n<anon>:23:5: 23:18 error: the trait `core::marker::Send` is not implemented for the type `*const ()`\n<anon>:23     Thread::spawn(|| {\n              ^~~~~~~~~~~~~\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69404923/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/101818918",
    "html_url": "https://github.com/rust-lang/rust/issues/19950#issuecomment-101818918",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19950",
    "id": 101818918,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMTgxODkxOA==",
    "user": {
      "login": "nham",
      "id": 546409,
      "node_id": "MDQ6VXNlcjU0NjQwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/546409?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nham",
      "html_url": "https://github.com/nham",
      "followers_url": "https://api.github.com/users/nham/followers",
      "following_url": "https://api.github.com/users/nham/following{/other_user}",
      "gists_url": "https://api.github.com/users/nham/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nham/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nham/subscriptions",
      "organizations_url": "https://api.github.com/users/nham/orgs",
      "repos_url": "https://api.github.com/users/nham/repos",
      "events_url": "https://api.github.com/users/nham/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nham/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-13T21:19:25Z",
    "updated_at": "2015-05-13T21:20:19Z",
    "body": "Triage: The error message seems much better. This code:\n\n``` rust\nstruct NoCopy;\n\nenum Test {\n    MyVariant(NoCopy)\n}\n\nimpl Copy for Test {}\n\nfn main() {}\n```\n\nresults in (on `rustc 1.1.0-nightly (4b88e8f63 2015-05-11) (built 2015-05-12)`):\n\n```\niss_19950.rs:7:1: 7:22 error: the trait `Copy` may not be implemented for this type; variant `MyVariant` does not implement `Copy` [E0205]\niss_19950.rs:7 impl Copy for Test {}\n               ^~~~~~~~~~~~~~~~~~~~~\niss_19950.rs:7:1: 7:22 error: the trait `core::clone::Clone` is not implemented for the type `Test` [E0277]\niss_19950.rs:7 impl Copy for Test {}\n               ^~~~~~~~~~~~~~~~~~~~~\nerror: aborting due to 2 previous errors\n```\n\nHowever, there may still be room for improvement for @mzabaluev 's example. The updated code seems to be:\n\n``` rust\nuse std::ptr;\nuse std::thread;\n\nmod obscure {\n    struct Obscure {\n        ptr: *const ()\n    }\n}\n\nstruct A {\n    inner: obscure::Obscure\n}\n\nimpl A {\n    fn new() -> A {\n        A { inner: obscure::Obscure { ptr: ptr::null() } }\n    }\n}\n\nfn main() {\n    let me_bad = A::new();\n    let me_ok = 0i32;\n    thread::spawn(|| {\n        let _guess_where_it_is = (me_bad, me_ok);\n    });\n}\n```\n\nand the error message is now:\n\n```\niss_19950_2.rs:23:5: 23:18 error: the trait `core::marker::Send` is not implemented for the type `*const ()` [E0277]\niss_19950_2.rs:23     thread::spawn(|| {\n                      ^~~~~~~~~~~~~\niss_19950_2.rs:23:5: 23:18 note: `*const ()` cannot be sent between threads safely\niss_19950_2.rs:23     thread::spawn(|| {\n                      ^~~~~~~~~~~~~\nerror: aborting due to previous error\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/101818918/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/143257331",
    "html_url": "https://github.com/rust-lang/rust/issues/19950#issuecomment-143257331",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19950",
    "id": 143257331,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MzI1NzMzMQ==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-25T15:44:32Z",
    "updated_at": "2015-09-25T15:44:32Z",
    "body": "The closure example currently reports\n\n```\n<anon>:23:5: 23:18 error: the trait `core::marker::Send` is not implemented for the type `*const ()` [E0277]\n<anon>:23     thread::spawn(|| {\n              ^~~~~~~~~~~~~\n<anon>:23:5: 23:18 help: see the detailed explanation for E0277\n<anon>:23:5: 23:18 note: `*const ()` cannot be sent between threads safely\n<anon>:23:5: 23:18 note: required because it appears within the type `obscure::Obscure`\n<anon>:23:5: 23:18 note: required because it appears within the type `A`\n<anon>:23:5: 23:18 note: required because it appears within the type `[closure@<anon>:23:19: 25:6 me_bad:A, me_ok:&i32]`\n<anon>:23:5: 23:18 note: required by `std::thread::spawn`\nerror: aborting due to previous error\n```\n\nSo I think this it is solved (we _could_ improve this by adding the upvar name, but it seems clear enough).\n\n`Copy` could note the field name, however.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/143257331/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/270707770",
    "html_url": "https://github.com/rust-lang/rust/issues/19950#issuecomment-270707770",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19950",
    "id": 270707770,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDcwNzc3MA==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-01-05T17:43:49Z",
    "updated_at": "2017-01-05T17:43:49Z",
    "body": "The `Copy` case is fixed by #38152 with a test.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/270707770/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
