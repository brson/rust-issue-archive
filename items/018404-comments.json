[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60815873",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-60815873",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 60815873,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwODE1ODcz",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-28T19:24:22Z",
    "updated_at": "2014-10-28T19:24:22Z",
    "body": "It also allocates a lot of memory (128 bytes minimum) even for small / empty strings.\n\nhttps://github.com/rust-lang/rust/issues/16415\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60815873/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65221705",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-65221705",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 65221705,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MjIxNzA1",
    "user": {
      "login": "reem",
      "id": 4745181,
      "node_id": "MDQ6VXNlcjQ3NDUxODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4745181?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reem",
      "html_url": "https://github.com/reem",
      "followers_url": "https://api.github.com/users/reem/followers",
      "following_url": "https://api.github.com/users/reem/following{/other_user}",
      "gists_url": "https://api.github.com/users/reem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reem/subscriptions",
      "organizations_url": "https://api.github.com/users/reem/orgs",
      "repos_url": "https://api.github.com/users/reem/repos",
      "events_url": "https://api.github.com/users/reem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reem/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-02T12:07:02Z",
    "updated_at": "2014-12-02T12:07:10Z",
    "body": "This appears to be fixed. `\"\".to_string().capacity() == 0`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/65221705/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66912315",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-66912315",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 66912315,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTEyMzE1",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-14T12:55:38Z",
    "updated_at": "2014-12-14T12:55:38Z",
    "body": "Only the capacity part of it. The code that creates the String instance is still awful. Apparently there's more inlining going on now, so the code for `to_string` from an old rustc (0.13.0-dev (7e43f419c 2014-11-15 13:22:24 +0000)) and from a current one (0.13.0-dev (3a9305ce8 2014-12-14 09:22:24 +0000) isn't really comparable, but it's far far off from what you get from either `String::from_str(\"\")` or `String::new()` (those two produce the same asm).\n\n``` rust\npub fn from_str() -> String {\n    String::from_str(\"\")\n}\n```\n\n``` asm\n    .section    .text._ZN8from_str20h167891935c11e273laaE,\"ax\",@progbits\n    .globl  _ZN8from_str20h167891935c11e273laaE\n    .align  16, 0x90\n    .type   _ZN8from_str20h167891935c11e273laaE,@function\n_ZN8from_str20h167891935c11e273laaE:\n    .cfi_startproc\n    movq    $1, (%rdi)\n    movq    $0, 16(%rdi)\n    movq    $0, 8(%rdi)\n    movq    %rdi, %rax\n    retq\n.Ltmp44:\n    .size   _ZN8from_str20h167891935c11e273laaE, .Ltmp44-_ZN8from_str20h167891935c11e273laaE\n    .cfi_endproc\n```\n\nOTOH, this\n\n``` rust\npub fn to_string() -> String {\n    \"\".to_string()\n}\n```\n\ngives you almost 200 lines of asm (including labels), and that still calls into `fmt()`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66912315/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66914778",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-66914778",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 66914778,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTE0Nzc4",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-14T14:25:49Z",
    "updated_at": "2014-12-14T14:25:49Z",
    "body": "``` rust\nextern crate test;\n\nuse test::{Bencher, black_box};\n\n#[bench]\npub fn to_string(b: &mut Bencher) {\n    b.iter(|| {\n        black_box(\"\".to_string());\n    });\n}\n\n#[bench]\npub fn from_str(b: &mut Bencher) {\n    b.iter(|| {\n        black_box(String::from_str(\"\"));\n    });\n}\n```\n\n```\nrunning 2 tests\ntest from_str  ... bench:         0 ns/iter (+/- 1)\ntest to_string ... bench:        35 ns/iter (+/- 3)\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 2 measured\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66914778/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66919519",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-66919519",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 66919519,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTE5NTE5",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-14T16:56:38Z",
    "updated_at": "2014-12-14T16:56:38Z",
    "body": "A naive micro-benchmark won't be measuring the cost of reallocations. In the real world, it will rarely have room to expand in-place every time.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66919519/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66919704",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-66919704",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 66919704,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTE5NzA0",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-14T17:01:58Z",
    "updated_at": "2014-12-14T17:01:58Z",
    "body": "Neither of those should allocate. You get a String without any allocated capacity in both cases.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66919704/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66919950",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-66919950",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 66919950,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTE5OTUw",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-14T17:08:04Z",
    "updated_at": "2014-12-14T17:08:04Z",
    "body": "I'm aware. I'm pointing it out in advance so it can be done properly, because I'm sure measuring the cost of the repeated reallocations is going to be done too.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66919950/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70656783",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-70656783",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 70656783,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjU2Nzgz",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-20T13:59:43Z",
    "updated_at": "2015-01-20T13:59:43Z",
    "body": "What is the preferred way to do this these days? https://github.com/servo/servo/pull/4682 is changing Servo to use `to_owned`, but it implies importing the `ToOwned` trait all over the place. Such imports for such a common operation should really be in the prelude.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70656783/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71806683",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-71806683",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 71806683,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxODA2Njgz",
    "user": {
      "login": "lambda-fairy",
      "id": 1572323,
      "node_id": "MDQ6VXNlcjE1NzIzMjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1572323?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lambda-fairy",
      "html_url": "https://github.com/lambda-fairy",
      "followers_url": "https://api.github.com/users/lambda-fairy/followers",
      "following_url": "https://api.github.com/users/lambda-fairy/following{/other_user}",
      "gists_url": "https://api.github.com/users/lambda-fairy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lambda-fairy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lambda-fairy/subscriptions",
      "organizations_url": "https://api.github.com/users/lambda-fairy/orgs",
      "repos_url": "https://api.github.com/users/lambda-fairy/repos",
      "events_url": "https://api.github.com/users/lambda-fairy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lambda-fairy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-28T09:45:49Z",
    "updated_at": "2015-01-29T04:08:07Z",
    "body": "Note that we can't just special case `ToString` for `str`, since that would lead to an overlapping instance.\n\nI have another idea though. How about we implement `to_string()` in `std::fmt` instead? By putting it in `std::fmt` we can deal with the internal `Formatter` directly, cutting out all that indirection.\n\nThat won't solve the problem of allocating too much, but it might lessen the code bloat a bit.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71806683/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71962087",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-71962087",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 71962087,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxOTYyMDg3",
    "user": {
      "login": "lambda-fairy",
      "id": 1572323,
      "node_id": "MDQ6VXNlcjE1NzIzMjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1572323?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lambda-fairy",
      "html_url": "https://github.com/lambda-fairy",
      "followers_url": "https://api.github.com/users/lambda-fairy/followers",
      "following_url": "https://api.github.com/users/lambda-fairy/following{/other_user}",
      "gists_url": "https://api.github.com/users/lambda-fairy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lambda-fairy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lambda-fairy/subscriptions",
      "organizations_url": "https://api.github.com/users/lambda-fairy/orgs",
      "repos_url": "https://api.github.com/users/lambda-fairy/repos",
      "events_url": "https://api.github.com/users/lambda-fairy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lambda-fairy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-29T03:12:35Z",
    "updated_at": "2015-01-29T03:12:35Z",
    "body": "After some thought, I came up with another, simpler, idea.\n\nFirst, add a method to `Display`:\n\n``` rust\npub trait Display {\n    // ...\n    #[inline]\n    fn as_str_slice(&self) -> Option<&str> { None }\n}\n```\n\nThis method will return `None` for all types except `str`, where it returns `Some(self)`:\n\n``` rust\nimpl Display for str {\n    // ...\n    #[inline]\n    fn as_str_slice(&self) -> Option<&str> { Some(self) }\n}\n```\n\nNow, here's where the magic lies. In `ToString`, before invoking the format machinery we check `as_str_slice` first. If this returns `Some`, we simply copy the slice, skipping the machinery altogether:\n\n``` rust\nimpl<T: Display + ?Sized> ToString for T {\n    fn to_string(&self) -> String {\n        match self.as_str_slice() {\n            Some(s) => s.to_owned(),\n            None => // as before\n        }\n    }\n}\n```\n\nSince `.as_str_slice()` is inlined, the branch should be optimized out (I'm not an expert on this, so correct me if I'm wrong). So it'll work the same as before for non-string types, but for `str` it'll use the fast `.to_owned()`.\n\nThoughts? I guess it's a bit icky having an extra method there, but if we hide it from the docs it should be unobtrusive enough.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71962087/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72134903",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-72134903",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 72134903,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMTM0OTAz",
    "user": {
      "login": "lambda-fairy",
      "id": 1572323,
      "node_id": "MDQ6VXNlcjE1NzIzMjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1572323?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lambda-fairy",
      "html_url": "https://github.com/lambda-fairy",
      "followers_url": "https://api.github.com/users/lambda-fairy/followers",
      "following_url": "https://api.github.com/users/lambda-fairy/following{/other_user}",
      "gists_url": "https://api.github.com/users/lambda-fairy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lambda-fairy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lambda-fairy/subscriptions",
      "organizations_url": "https://api.github.com/users/lambda-fairy/orgs",
      "repos_url": "https://api.github.com/users/lambda-fairy/repos",
      "events_url": "https://api.github.com/users/lambda-fairy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lambda-fairy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-30T00:50:33Z",
    "updated_at": "2015-01-30T00:52:05Z",
    "body": "Okay, so I [prototyped my idea](https://github.com/lfairy/rust/compare/faster-to-string). Initial benchmarks look very promising, with `\"\".to_string()` optimizing down to single call to `.to_owned()`, and `123.to_string()` almost unaffected by the change.\n\nThere's a problem though with smart pointer types, specifically `Arc<T>`. `Arc` implements `Display`, which gives it a `ToString` instance via the blanket impl. Problem is, if `T` is not a string, then `.to_string()` will now borrow the `Arc` _twice_: once when calling `.as_str_slice()`, and once when calling `format!()`. The compiler may be able to optimize that out, but it still feels icky.\n\nThis decision should really be made on the type level, using either associated types or negative bounds. Unfortunately the associated types solution doesn't work yet (#20400), and negative bounds are still in the pipeline (rust-lang/rfcs#586).\n\nSo I guess we'll have to wait.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72134903/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72136837",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-72136837",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 72136837,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMTM2ODM3",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-30T01:09:30Z",
    "updated_at": "2015-01-30T01:09:30Z",
    "body": "> Problem is, if T is not a string, then .to_string() will now borrow the Arc twice: once when calling .as_str_slice(), and once when calling format!().\n\nBorrowing a pointer out of an `Arc` is very cheap (only a pointer offset compared to a plain `Box` or `&`); the expensive part is construction/copying (`.clone()`) and destruction when the reference counts are modified atomically.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72136837/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72147962",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-72147962",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 72147962,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMTQ3OTYy",
    "user": {
      "login": "lambda-fairy",
      "id": 1572323,
      "node_id": "MDQ6VXNlcjE1NzIzMjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1572323?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lambda-fairy",
      "html_url": "https://github.com/lambda-fairy",
      "followers_url": "https://api.github.com/users/lambda-fairy/followers",
      "following_url": "https://api.github.com/users/lambda-fairy/following{/other_user}",
      "gists_url": "https://api.github.com/users/lambda-fairy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lambda-fairy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lambda-fairy/subscriptions",
      "organizations_url": "https://api.github.com/users/lambda-fairy/orgs",
      "repos_url": "https://api.github.com/users/lambda-fairy/repos",
      "events_url": "https://api.github.com/users/lambda-fairy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lambda-fairy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-30T03:19:17Z",
    "updated_at": "2015-01-30T03:19:17Z",
    "body": "> Borrowing a pointer out of an `Arc` is very cheap (only a pointer offset compared to a plain `Box` or `&`); the expensive part is construction/copying (`.clone()`) and destruction when the reference counts are modified atomically.\n\nAh, I stand corrected! That makes my solution practical, though it still feels like a hack.\n\nI guess if we treat this as a temporary solution, to be removed when negative bounds land, it should be okay.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/72147962/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/173763157",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-173763157",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 173763157,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3Mzc2MzE1Nw==",
    "user": {
      "login": "ranma42",
      "id": 1506030,
      "node_id": "MDQ6VXNlcjE1MDYwMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1506030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ranma42",
      "html_url": "https://github.com/ranma42",
      "followers_url": "https://api.github.com/users/ranma42/followers",
      "following_url": "https://api.github.com/users/ranma42/following{/other_user}",
      "gists_url": "https://api.github.com/users/ranma42/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ranma42/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ranma42/subscriptions",
      "organizations_url": "https://api.github.com/users/ranma42/orgs",
      "repos_url": "https://api.github.com/users/ranma42/repos",
      "events_url": "https://api.github.com/users/ranma42/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ranma42/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-22T00:46:38Z",
    "updated_at": "2016-01-22T00:46:38Z",
    "body": "cc me\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/173763157/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/190914872",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-190914872",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 190914872,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MDkxNDg3Mg==",
    "user": {
      "login": "ahmedcharles",
      "id": 3112514,
      "node_id": "MDQ6VXNlcjMxMTI1MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3112514?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahmedcharles",
      "html_url": "https://github.com/ahmedcharles",
      "followers_url": "https://api.github.com/users/ahmedcharles/followers",
      "following_url": "https://api.github.com/users/ahmedcharles/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahmedcharles/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahmedcharles/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahmedcharles/subscriptions",
      "organizations_url": "https://api.github.com/users/ahmedcharles/orgs",
      "repos_url": "https://api.github.com/users/ahmedcharles/repos",
      "events_url": "https://api.github.com/users/ahmedcharles/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahmedcharles/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-01T21:34:03Z",
    "updated_at": "2016-03-01T21:34:03Z",
    "body": "Is this still relevant/reproducible?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/190914872/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/203170544",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-203170544",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 203170544,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMzE3MDU0NA==",
    "user": {
      "login": "frewsxcv",
      "id": 416575,
      "node_id": "MDQ6VXNlcjQxNjU3NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/416575?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frewsxcv",
      "html_url": "https://github.com/frewsxcv",
      "followers_url": "https://api.github.com/users/frewsxcv/followers",
      "following_url": "https://api.github.com/users/frewsxcv/following{/other_user}",
      "gists_url": "https://api.github.com/users/frewsxcv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frewsxcv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frewsxcv/subscriptions",
      "organizations_url": "https://api.github.com/users/frewsxcv/orgs",
      "repos_url": "https://api.github.com/users/frewsxcv/repos",
      "events_url": "https://api.github.com/users/frewsxcv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frewsxcv/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-30T00:41:01Z",
    "updated_at": "2016-03-30T00:41:01Z",
    "body": "Specialization has landed. This can be worked on now?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/203170544/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/203173304",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-203173304",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 203173304,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMzE3MzMwNA==",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-30T00:49:04Z",
    "updated_at": "2016-03-30T00:49:04Z",
    "body": "@frewsxcv there's already a PR: #32586\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/203173304/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/209064666",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-209064666",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 209064666,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwOTA2NDY2Ng==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-12T19:27:40Z",
    "updated_at": "2016-04-12T19:27:40Z",
    "body": "Was this effectively fixed by #32586?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/209064666/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/209066063",
    "html_url": "https://github.com/rust-lang/rust/issues/18404#issuecomment-209066063",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18404",
    "id": 209066063,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwOTA2NjA2Mw==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-12T19:30:08Z",
    "updated_at": "2016-04-12T19:30:08Z",
    "body": "It should have been, yes!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/209066063/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
