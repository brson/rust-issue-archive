[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69109812",
    "html_url": "https://github.com/rust-lang/rust/issues/20678#issuecomment-69109812",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20678",
    "id": 69109812,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MTA5ODEy",
    "user": {
      "login": "andrewyli",
      "id": 4760228,
      "node_id": "MDQ6VXNlcjQ3NjAyMjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4760228?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/andrewyli",
      "html_url": "https://github.com/andrewyli",
      "followers_url": "https://api.github.com/users/andrewyli/followers",
      "following_url": "https://api.github.com/users/andrewyli/following{/other_user}",
      "gists_url": "https://api.github.com/users/andrewyli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/andrewyli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andrewyli/subscriptions",
      "organizations_url": "https://api.github.com/users/andrewyli/orgs",
      "repos_url": "https://api.github.com/users/andrewyli/repos",
      "events_url": "https://api.github.com/users/andrewyli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/andrewyli/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-07T23:12:29Z",
    "updated_at": "2015-01-07T23:12:29Z",
    "body": "@MichaelGG I'm a little confused. Are you saying the problem is with combine _and_ with consume?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69109812/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69110214",
    "html_url": "https://github.com/rust-lang/rust/issues/20678#issuecomment-69110214",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20678",
    "id": 69110214,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MTEwMjE0",
    "user": {
      "login": "MichaelGG",
      "id": 429031,
      "node_id": "MDQ6VXNlcjQyOTAzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/429031?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MichaelGG",
      "html_url": "https://github.com/MichaelGG",
      "followers_url": "https://api.github.com/users/MichaelGG/followers",
      "following_url": "https://api.github.com/users/MichaelGG/following{/other_user}",
      "gists_url": "https://api.github.com/users/MichaelGG/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MichaelGG/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MichaelGG/subscriptions",
      "organizations_url": "https://api.github.com/users/MichaelGG/orgs",
      "repos_url": "https://api.github.com/users/MichaelGG/repos",
      "events_url": "https://api.github.com/users/MichaelGG/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MichaelGG/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-07T23:16:12Z",
    "updated_at": "2015-01-07T23:16:12Z",
    "body": "Combine casts uint to i64, causing an overflow. But to get the uints into that range, you need to actually be using something in that file (Mem/Buf Reader/Writer) that's gonna get that high, which is unlikely in most scenarios.\n\nHowever, you can trigger the bug without using 2^63 bytes by calling MemReader.consume, which will increment it's position freely. \n\nAdditionally, with the new overflow semantics, it seems that \"uint as i64\" may be an undefined value when uint exceeds i64.MAX.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69110214/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74373179",
    "html_url": "https://github.com/rust-lang/rust/issues/20678#issuecomment-74373179",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20678",
    "id": 74373179,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MzczMTc5",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-14T12:26:56Z",
    "updated_at": "2015-02-14T12:26:56Z",
    "body": "https://github.com/rust-lang/rfcs/blob/94109f02eab0c3767617f24cba3664da4d5b1ffd/text/0517-io-os-reform.md replaces memreader with Cursor:\n\n```\nuse std::io::{Cursor,Seek,SeekFrom,BufRead};\nfn main() {\n        let mut mr = Cursor::new(vec![]);\n            mr.consume((1u64 << 63) as usize);\n                println!(\"{:?}\", mr.seek(SeekFrom::Current(0)));\n}\n```\n\ngives\n\n```\nErr(Error { repr: Custom(Custom { kind: InvalidInput, desc: \"invalid seek to a negative position\", detail: None }) })\n```\n\ntoday.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74373179/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74630252",
    "html_url": "https://github.com/rust-lang/rust/issues/20678#issuecomment-74630252",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20678",
    "id": 74630252,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NjMwMjUy",
    "user": {
      "login": "MichaelGG",
      "id": 429031,
      "node_id": "MDQ6VXNlcjQyOTAzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/429031?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MichaelGG",
      "html_url": "https://github.com/MichaelGG",
      "followers_url": "https://api.github.com/users/MichaelGG/followers",
      "following_url": "https://api.github.com/users/MichaelGG/following{/other_user}",
      "gists_url": "https://api.github.com/users/MichaelGG/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MichaelGG/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MichaelGG/subscriptions",
      "organizations_url": "https://api.github.com/users/MichaelGG/orgs",
      "repos_url": "https://api.github.com/users/MichaelGG/repos",
      "events_url": "https://api.github.com/users/MichaelGG/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MichaelGG/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-17T08:01:41Z",
    "updated_at": "2015-02-17T08:01:41Z",
    "body": "The combine function seems to now be macro_rules! seek: https://github.com/rust-lang/rust/blob/master/src/libstd/io/cursor.rs#L65 \n\nIt still casts usize to i64 and can overflow, for example by consuming to std::i64::MAX, then seeking Current(1). But even with --cfg ndebug I don't get any errors on i64 overflow yet. I suppose after https://github.com/rust-lang/rfcs/pull/560 lands then this will be slightly more serious since it'd panic?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74630252/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/192440942",
    "html_url": "https://github.com/rust-lang/rust/issues/20678#issuecomment-192440942",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20678",
    "id": 192440942,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MjQ0MDk0Mg==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-04T19:59:52Z",
    "updated_at": "2016-03-04T19:59:52Z",
    "body": "Triage: no change today.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/192440942/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/308610483",
    "html_url": "https://github.com/rust-lang/rust/issues/20678#issuecomment-308610483",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20678",
    "id": 308610483,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwODYxMDQ4Mw==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-06-15T02:24:45Z",
    "updated_at": "2017-06-15T02:24:45Z",
    "body": "I believe this has been fixed in https://github.com/rust-lang/rust/pull/39874, closing.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/308610483/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
