[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60256807",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-60256807",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 60256807,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMjU2ODA3",
    "user": {
      "login": "klutzy",
      "id": 1589355,
      "node_id": "MDQ6VXNlcjE1ODkzNTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1589355?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klutzy",
      "html_url": "https://github.com/klutzy",
      "followers_url": "https://api.github.com/users/klutzy/followers",
      "following_url": "https://api.github.com/users/klutzy/following{/other_user}",
      "gists_url": "https://api.github.com/users/klutzy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klutzy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klutzy/subscriptions",
      "organizations_url": "https://api.github.com/users/klutzy/orgs",
      "repos_url": "https://api.github.com/users/klutzy/repos",
      "events_url": "https://api.github.com/users/klutzy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klutzy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-23T15:27:58Z",
    "updated_at": "2014-10-23T15:27:58Z",
    "body": "All dllexport'ed functions are usually \"mangled\" in that way. It's not rust-specific; gcc does same and I think msvc link.exe does too.\nIt's usually not an issue, but it becomes an issue when [you want to use `GetProcAddress` or want to provide platform-agnostic symbol names](http://blogs.msdn.com/b/oldnewthing/archive/2004/01/12/57833.aspx).\nIn this case, you have to create `.def` file then pass it to linker. See [this example](https://github.com/rust-lang/rust/issues/14559#issuecomment-44925308).\nHowever there is a bug: dllexport doesn't work well [if there is \"explicit\" dllexport](https://github.com/rust-lang/rust/issues/7196#issuecomment-44361212).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60256807/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/62665527",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-62665527",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 62665527,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjY1NTI3",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-12T03:34:41Z",
    "updated_at": "2014-11-12T03:34:41Z",
    "body": "This is a LLVM issue - it mangles stdcall symbols so that the `@N` suffix reflects the correct number of bytes in arguments (for MSVC compatibility, I guess).   It is however possible to bypass mangling by starting symbol name with `\\x01`.   Try this:\n\n```\n#[export_name=\"\\x01_stdcall_export\"]\npub extern \"stdcall\" fn stdcall_exportname() {\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/62665527/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/168235989",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-168235989",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 168235989,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2ODIzNTk4OQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-31T19:10:29Z",
    "updated_at": "2015-12-31T19:50:57Z",
    "body": "An updated command line, `--crate-type`, gives\n\n```\n$ nm libhello.so | grep stdcall\n0000000000086630 T stdcall_export\n0000000000086610 T stdcall_nomangle\n0000000000086620 t _ZN16stdcall_nomangle10__rust_abiE\n0000000000086640 t _ZN18stdcall_exportname10__rust_abiE\n0000000000086600 t _ZN7stdcall10__rust_abiE\n00000000000865f0 T _ZN7stdcall20h92816bbf6494be08eaaE\n```\n\nI am not an expert on stdcall, but it would seem that the `@` stuff is gone now. I guess this got fixed/modified upstream in the last year?\n\nEDIT: Also, I did do this on Linux, as I assumed that the ABI is the important part here, not Windows specifically. That could be a wrong assumption, I am terrible at Windows stuff :(\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/168235989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/198513052",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-198513052",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 198513052,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODUxMzA1Mg==",
    "user": {
      "login": "bbigras",
      "id": 24027,
      "node_id": "MDQ6VXNlcjI0MDI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/24027?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bbigras",
      "html_url": "https://github.com/bbigras",
      "followers_url": "https://api.github.com/users/bbigras/followers",
      "following_url": "https://api.github.com/users/bbigras/following{/other_user}",
      "gists_url": "https://api.github.com/users/bbigras/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bbigras/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bbigras/subscriptions",
      "organizations_url": "https://api.github.com/users/bbigras/orgs",
      "repos_url": "https://api.github.com/users/bbigras/repos",
      "events_url": "https://api.github.com/users/bbigras/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bbigras/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-18T19:36:30Z",
    "updated_at": "2016-03-18T19:36:30Z",
    "body": "> I am not an expert on stdcall, but it would seem that the @ stuff is gone now.\n\nThe `@` stuff seems still there for me with `rustc 1.7.0 (a5d1e7a59 2016-02-29)` on Windows. @vadimcn's `\\x01` trick worked.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/198513052/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228631774",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-228631774",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 228631774,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODYzMTc3NA==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-27T00:11:33Z",
    "updated_at": "2016-06-27T00:11:33Z",
    "body": "What would be cool is if, for the `cdylib` crate type, Rust would automatically generate a `.def` file that mapped from the decorated versions to the undecorated versions so the import library would have the decorated versions as the linker expects, while the DLL itself has the undecorated versions making `GetProcAddress` easy.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228631774/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/248901392",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-248901392",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 248901392,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0ODkwMTM5Mg==",
    "user": {
      "login": "bozaro",
      "id": 2458138,
      "node_id": "MDQ6VXNlcjI0NTgxMzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2458138?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bozaro",
      "html_url": "https://github.com/bozaro",
      "followers_url": "https://api.github.com/users/bozaro/followers",
      "following_url": "https://api.github.com/users/bozaro/following{/other_user}",
      "gists_url": "https://api.github.com/users/bozaro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bozaro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bozaro/subscriptions",
      "organizations_url": "https://api.github.com/users/bozaro/orgs",
      "repos_url": "https://api.github.com/users/bozaro/repos",
      "events_url": "https://api.github.com/users/bozaro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bozaro/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-22T13:20:49Z",
    "updated_at": "2016-09-22T13:21:03Z",
    "body": "I have inverse problem: I try to set exported name with \"@\" symbol.\nIn my case I want to export function with name: \"_AbortCompilerPass@4\" on x86 and \"AbortCompilerPass\" on amd64.\n\nSo, with gnu toolchain I create fork like:\n\n```\n#[cfg(target_pointer_width = \"32\")]\n#[export_name = \"_AbortCompilerPass\"]\npub extern \"stdcall\" fn abort_compiler_pass_extern(how: winapi::DWORD) { abort_compiler_pass(how)}\n#[cfg(target_pointer_width = \"64\")]\n#[export_name = \"AbortCompilerPass\"]\npub extern \"stdcall\" fn abort_compiler_pass_extern(how: winapi::DWORD) { abort_compiler_pass(how)}\n```\n\nAnd it works correctly. This code also works with msvc amd64 toolchain.\n\nBut on msvc x86 toolchain I can't find way to get exported name like \"_AbortCompilerPass@4\".\n\nI try to use:\n- #[export_name = \"_AbortCompilerPass@4\"]\n- #[link_args = \"/EXPORT:_AbortCompilerPass@4=_AbortCompilerPass\"]\n\nBut MS linker ignored all @4 in all variants :(\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/248901392/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/248906445",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-248906445",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 248906445,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0ODkwNjQ0NQ==",
    "user": {
      "login": "bozaro",
      "id": 2458138,
      "node_id": "MDQ6VXNlcjI0NTgxMzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2458138?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bozaro",
      "html_url": "https://github.com/bozaro",
      "followers_url": "https://api.github.com/users/bozaro/followers",
      "following_url": "https://api.github.com/users/bozaro/following{/other_user}",
      "gists_url": "https://api.github.com/users/bozaro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bozaro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bozaro/subscriptions",
      "organizations_url": "https://api.github.com/users/bozaro/orgs",
      "repos_url": "https://api.github.com/users/bozaro/repos",
      "events_url": "https://api.github.com/users/bozaro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bozaro/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-22T13:41:21Z",
    "updated_at": "2016-09-22T13:41:21Z",
    "body": "I created simple example with my issue: https://github.com/bozaro/rust-msvcdll\nIt also contains test, so you can run:\n\n```\ncargo test\n```\n\nFor toolchains:\n- stable-i686-pc-windows-msvc - FAIL\n- stable-i686-pc-windows-gnu - OK\n- stable-x86_64-pc-windows-msvc - OK\n- stable-x86_64-pc-windows-gnu - OK\n\nI try to implement wrapper for Visual Studio compiler plugin: `%VS120COMNTOOLS%\\..\\..\\VC\\bin\\c2.dll`\n\nAlso looks like removing `@4` is much simple, then adding:\n- `link /dll test.obj /export:\"_foobar=_foo@4\"` - add export `_foo@4` as `_foobar`\n- `link /dll test.obj /export:\"_foobar@4=_foo@4\"` - add export `_foo@4` as `_foobar@4`\n- `link /dll test.obj /export:\"_foo@4=_foobar\"` - add export `_foobar` as `_foo` (without `@4`)\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/248906445/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/248913373",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-248913373",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 248913373,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0ODkxMzM3Mw==",
    "user": {
      "login": "bozaro",
      "id": 2458138,
      "node_id": "MDQ6VXNlcjI0NTgxMzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2458138?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bozaro",
      "html_url": "https://github.com/bozaro",
      "followers_url": "https://api.github.com/users/bozaro/followers",
      "following_url": "https://api.github.com/users/bozaro/following{/other_user}",
      "gists_url": "https://api.github.com/users/bozaro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bozaro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bozaro/subscriptions",
      "organizations_url": "https://api.github.com/users/bozaro/orgs",
      "repos_url": "https://api.github.com/users/bozaro/repos",
      "events_url": "https://api.github.com/users/bozaro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bozaro/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-22T14:06:15Z",
    "updated_at": "2016-09-22T14:30:05Z",
    "body": "Also in ideal world I want one of two options:\n- Set base name in export_name (like: `#[export_name = \"AbortCompilerPass\"]`) and it works as expected on all toolchains (on x86_64 and i686);\n- Set exactly full name in export_name (like: `#[export_name = \"_AbortCompilerPass@4\"]`) for x86_64 and i686 separately without dark magic.\n\nAt this moment:\n- I can't set correct export name on msvc i686 toolchain because I can't set full name to `export_name` option;\n- I need set before-`@` prefix \"_AbortCompilerPass\" for i686 platform instead base function name.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/248913373/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/249694854",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-249694854",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 249694854,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0OTY5NDg1NA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-26T20:55:28Z",
    "updated_at": "2016-09-26T20:55:28Z",
    "body": "@bozaro I think the `@4` is added by LLVM automatically (or maybe the linker?). To work around this you could try:\n\n``` rust\n#[export_name = \"\\x01AbortCompilerPass\"]\n```\n\nThe leading \"1 byte\" tells LLVM to disable all name mangling.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/249694854/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/249697028",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-249697028",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 249697028,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0OTY5NzAyOA==",
    "user": {
      "login": "slonopotamus",
      "id": 92637,
      "node_id": "MDQ6VXNlcjkyNjM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/92637?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/slonopotamus",
      "html_url": "https://github.com/slonopotamus",
      "followers_url": "https://api.github.com/users/slonopotamus/followers",
      "following_url": "https://api.github.com/users/slonopotamus/following{/other_user}",
      "gists_url": "https://api.github.com/users/slonopotamus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/slonopotamus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/slonopotamus/subscriptions",
      "organizations_url": "https://api.github.com/users/slonopotamus/orgs",
      "repos_url": "https://api.github.com/users/slonopotamus/repos",
      "events_url": "https://api.github.com/users/slonopotamus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/slonopotamus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-26T21:04:12Z",
    "updated_at": "2016-09-26T21:04:45Z",
    "body": "@alexcrichton: @bozaro problem is _the opposite_. Currently (rust 1.11) `@N` is _not_ added by `stable-i686-pc-windows-msvc` toolchain, though 32-bit stdcall calling convention expects it.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/249697028/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/249704245",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-249704245",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 249704245,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0OTcwNDI0NQ==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-26T21:33:08Z",
    "updated_at": "2016-09-26T21:34:28Z",
    "body": "Here's an update on what the current situation is for the example in the original post using `i686-pc-windows-msvc`.\nThis is the resulting import library:\n\n```\n  Version      : 0\n  Machine      : 14C (x86)\n  TimeDateStamp: 57E9902F Mon Sep 26 17:16:31 2016\n  SizeOfData   : 00000015\n  DLL name     : cdylib.dll\n  Symbol name  : _c_export\n  Type         : code\n  Name type    : no prefix\n  Hint         : 9\n  Name         : c_export\n\n  Version      : 0\n  Machine      : 14C (x86)\n  TimeDateStamp: 57E9902F Mon Sep 26 17:16:31 2016\n  SizeOfData   : 00000017\n  DLL name     : cdylib.dll\n  Symbol name  : _c_nomangle\n  Type         : code\n  Name type    : no prefix\n  Hint         : 10\n  Name         : c_nomangle\n\n  Version      : 0\n  Machine      : 14C (x86)\n  TimeDateStamp: 57E9902F Mon Sep 26 17:16:31 2016\n  SizeOfData   : 0000001D\n  DLL name     : cdylib.dll\n  Symbol name  : _stdcall_export@0\n  Type         : code\n  Name type    : undecorate\n  Hint         : 11\n  Name         : stdcall_export\n\n  Version      : 0\n  Machine      : 14C (x86)\n  TimeDateStamp: 57E9902F Mon Sep 26 17:16:31 2016\n  SizeOfData   : 0000001F\n  DLL name     : cdylib.dll\n  Symbol name  : _stdcall_nomangle@0\n  Type         : code\n  Name type    : undecorate\n  Hint         : 12\n  Name         : stdcall_nomangle\n```\n\nThis is what is exported from the DLL itself:\n![](http://i.imgur.com/k5IM7rK.png)\nThis looks like the correct behavior to me, aside from those `__rust` functions which really shouldn't be exported. The original issue as stated has been fixed.\n\nNow in @bozaro 's case, `c2.dll` _does_ have a decorated name, and I'm not really sure how to make it work.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/249704245/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/249737221",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-249737221",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 249737221,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0OTczNzIyMQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-27T00:40:29Z",
    "updated_at": "2016-09-27T00:40:29Z",
    "body": "Oh! Sorry I misinterpreted this issue totally. This is probably because we don't use `dllexport` but instead [pass a list of symbols](https://github.com/rust-lang/rust/blob/8ccfc695b56c102a2e7e95719b398bfa0a5e8af1/src/librustc_trans/back/linker.rs#L409-L443) to the linker that need to get exported. In that list we don't include anything with `@N`, and we may need to do that to get these symbols exported.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/249737221/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/249738664",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-249738664",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 249738664,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0OTczODY2NA==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-27T00:51:53Z",
    "updated_at": "2016-09-27T00:53:00Z",
    "body": "@alexcrichton If we want to do this properly, we'll need to distinguish between the name exported from the import library and the name exported from the DLL itself, and unfortunately `#[export_name]` is only a single attribute (and I don't really have any faith in Rust doing things properly). I'd argue our current situation where we pass a DEF file to the linker with undecorated symbols is the best default as it results in decorated names in the import library for linking purposes while the DLL itself exports undecorated names to make `GetProcAddress` easy.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/249738664/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/333318711",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-333318711",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 333318711,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzMxODcxMQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-09-30T16:14:01Z",
    "updated_at": "2017-09-30T16:14:01Z",
    "body": "Triage: no changes I'm aware of",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/333318711/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/398235505",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-398235505",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 398235505,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODIzNTUwNQ==",
    "user": {
      "login": "devsnek",
      "id": 5952481,
      "node_id": "MDQ6VXNlcjU5NTI0ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5952481?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/devsnek",
      "html_url": "https://github.com/devsnek",
      "followers_url": "https://api.github.com/users/devsnek/followers",
      "following_url": "https://api.github.com/users/devsnek/following{/other_user}",
      "gists_url": "https://api.github.com/users/devsnek/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/devsnek/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/devsnek/subscriptions",
      "organizations_url": "https://api.github.com/users/devsnek/orgs",
      "repos_url": "https://api.github.com/users/devsnek/repos",
      "events_url": "https://api.github.com/users/devsnek/events{/privacy}",
      "received_events_url": "https://api.github.com/users/devsnek/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-06-19T00:21:31Z",
    "updated_at": "2018-06-19T00:21:31Z",
    "body": "was this ever fixed?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/398235505/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/398239036",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-398239036",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 398239036,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODIzOTAzNg==",
    "user": {
      "login": "Ahriana",
      "id": 28003629,
      "node_id": "MDQ6VXNlcjI4MDAzNjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/28003629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ahriana",
      "html_url": "https://github.com/Ahriana",
      "followers_url": "https://api.github.com/users/Ahriana/followers",
      "following_url": "https://api.github.com/users/Ahriana/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ahriana/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ahriana/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ahriana/subscriptions",
      "organizations_url": "https://api.github.com/users/Ahriana/orgs",
      "repos_url": "https://api.github.com/users/Ahriana/repos",
      "events_url": "https://api.github.com/users/Ahriana/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ahriana/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-06-19T00:45:34Z",
    "updated_at": "2018-06-19T00:45:34Z",
    "body": "^ having this issue and cant find a working workaround, tried everything from renaming to using \\x01\r\nam at a loss spent too long on this ;-;",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/398239036/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/426422059",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-426422059",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 426422059,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjQyMjA1OQ==",
    "user": {
      "login": "norru",
      "id": 889291,
      "node_id": "MDQ6VXNlcjg4OTI5MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/889291?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/norru",
      "html_url": "https://github.com/norru",
      "followers_url": "https://api.github.com/users/norru/followers",
      "following_url": "https://api.github.com/users/norru/following{/other_user}",
      "gists_url": "https://api.github.com/users/norru/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/norru/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/norru/subscriptions",
      "organizations_url": "https://api.github.com/users/norru/orgs",
      "repos_url": "https://api.github.com/users/norru/repos",
      "events_url": "https://api.github.com/users/norru/events{/privacy}",
      "received_events_url": "https://api.github.com/users/norru/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-10-02T20:40:27Z",
    "updated_at": "2018-10-02T20:40:27Z",
    "body": "Just got bitten by this.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/426422059/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/658990420",
    "html_url": "https://github.com/rust-lang/rust/issues/17806#issuecomment-658990420",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17806",
    "id": 658990420,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1ODk5MDQyMA==",
    "user": {
      "login": "Spoffy",
      "id": 4805393,
      "node_id": "MDQ6VXNlcjQ4MDUzOTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4805393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Spoffy",
      "html_url": "https://github.com/Spoffy",
      "followers_url": "https://api.github.com/users/Spoffy/followers",
      "following_url": "https://api.github.com/users/Spoffy/following{/other_user}",
      "gists_url": "https://api.github.com/users/Spoffy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Spoffy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Spoffy/subscriptions",
      "organizations_url": "https://api.github.com/users/Spoffy/orgs",
      "repos_url": "https://api.github.com/users/Spoffy/repos",
      "events_url": "https://api.github.com/users/Spoffy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Spoffy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-07-15T20:25:10Z",
    "updated_at": "2020-07-15T20:26:18Z",
    "body": "If you need to do some very specific renaming (adding the \"@12\", etc), you can use this workaround in `.cargo/config`\r\n\r\nIf overrides the `.def` file that rustc generates with a custom one (see https://docs.microsoft.com/en-us/cpp/build/exporting-from-a-dll-using-def-files?view=vs-2019). \r\n\r\nThis isn't without downsides: It'll override any transitive exports from dependencies your library has, unless you explicitly re-add them. As such, this might not work for every use case. **This is undoubtedly an unstable hack around the problem**. It also only works with MSVC\r\n\r\n```TOML\r\n[target.i686-pc-windows-msvc]\r\nrustflags = [\r\n    # Allows us to export the correct stdcall symbol names for Windows 32-bit binaries.\r\n    # Rust has no way to explicitly export a symbol named \"_RVExtension@12\", it cuts off the @12.\r\n    # This overrides the linker's /DEF argument, to force it to export the symbols we want.\r\n    \"-Clink-arg=/DEF:Win32.def\",\r\n    # Generate a map file so we can see what symbols exist, and what we're exporting. (NOT REQUIRED)\r\n    \"-Clink-arg=/MAP:SymbolInfo.map\",\r\n    # Add exported symbol info to the map file (NOT REQUIRED)\r\n    \"-Clink-arg=/MAPINFO:EXPORTS\"\r\n]\r\n```\r\n\r\nContents of Win32.def are exports which exactly match the private symbols rustc produced (visible in that map file that gets dumped)\r\n```\r\nLIBRARY\r\nEXPORTS\r\n    _RVExtensionVersion@8\r\n    _RVExtension@12\r\n    _RVExtensionArgs@20\r\n```",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/658990420/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
