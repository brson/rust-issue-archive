[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69519179",
    "html_url": "https://github.com/rust-lang/rust/issues/20974#issuecomment-69519179",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20974",
    "id": 69519179,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTE5MTc5",
    "user": {
      "login": "reem",
      "id": 4745181,
      "node_id": "MDQ6VXNlcjQ3NDUxODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4745181?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reem",
      "html_url": "https://github.com/reem",
      "followers_url": "https://api.github.com/users/reem/followers",
      "following_url": "https://api.github.com/users/reem/following{/other_user}",
      "gists_url": "https://api.github.com/users/reem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reem/subscriptions",
      "organizations_url": "https://api.github.com/users/reem/orgs",
      "repos_url": "https://api.github.com/users/reem/repos",
      "events_url": "https://api.github.com/users/reem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reem/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-12T00:14:46Z",
    "updated_at": "2015-01-12T00:14:46Z",
    "body": "One possible transformation of this would be to instead change the trait `Modifier` to `Modifiable`, changing the order of type parameters such that the impls are `impl Modifiable<Status> for Response { .. }`.\n\nHowever, this just moves the problem elsewhere, as it becomes impossible to define modifiers for `Response` outside of Iron, which is a primary use case for using Modifiers instead of regular methods. As a result, this is not a satisfactory transformation.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69519179/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69520669",
    "html_url": "https://github.com/rust-lang/rust/issues/20974#issuecomment-69520669",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20974",
    "id": 69520669,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTIwNjY5",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-12T00:54:19Z",
    "updated_at": "2015-01-12T00:54:19Z",
    "body": "@reem Leaving aside the issue of coherence, I describe a pattern [here](https://github.com/rust-lang/rust/issues/20749#issuecomment-69508852) that I think might adapted for this situation. It's not very pretty, although as I mention in that thread it could be cleaned up a bit once equality constraints land.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69520669/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69524986",
    "html_url": "https://github.com/rust-lang/rust/issues/20974#issuecomment-69524986",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20974",
    "id": 69524986,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTI0OTg2",
    "user": {
      "login": "reem",
      "id": 4745181,
      "node_id": "MDQ6VXNlcjQ3NDUxODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4745181?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reem",
      "html_url": "https://github.com/reem",
      "followers_url": "https://api.github.com/users/reem/followers",
      "following_url": "https://api.github.com/users/reem/following{/other_user}",
      "gists_url": "https://api.github.com/users/reem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reem/subscriptions",
      "organizations_url": "https://api.github.com/users/reem/orgs",
      "repos_url": "https://api.github.com/users/reem/repos",
      "events_url": "https://api.github.com/users/reem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reem/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-12T02:43:52Z",
    "updated_at": "2015-01-12T03:46:53Z",
    "body": "@darinmorrison Ugh, I guess that works but it is certainly not pretty and not something I could really readily adopt for a framework like Iron where implementing modifiers is going to be an extremely common task.\n\n---\n\nFWIW this blocks building Iron on nightly/1.0-alpha.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69524986/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69585905",
    "html_url": "https://github.com/rust-lang/rust/issues/20974#issuecomment-69585905",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20974",
    "id": 69585905,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTg1OTA1",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-12T15:25:09Z",
    "updated_at": "2015-01-12T15:25:09Z",
    "body": "cc me\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69585905/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69586156",
    "html_url": "https://github.com/rust-lang/rust/issues/20974#issuecomment-69586156",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20974",
    "id": 69586156,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTg2MTU2",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-12T15:26:36Z",
    "updated_at": "2015-01-12T15:26:36Z",
    "body": "@reem and I had a [discussion about this on IRC](https://botbot.me/mozilla/rust-internals/2015-01-12/?msg=29307137&page=7) today that covered much of the justification for the current rules (in brief, anyway) as well as some ideas for how to resolve it.. I'll try to write up my current thinking into a blog post or something, since reading IRC logs is a pain.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69586156/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69815409",
    "html_url": "https://github.com/rust-lang/rust/issues/20974#issuecomment-69815409",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20974",
    "id": 69815409,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5ODE1NDA5",
    "user": {
      "login": "Ogeon",
      "id": 225229,
      "node_id": "MDQ6VXNlcjIyNTIyOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/225229?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ogeon",
      "html_url": "https://github.com/Ogeon",
      "followers_url": "https://api.github.com/users/Ogeon/followers",
      "following_url": "https://api.github.com/users/Ogeon/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ogeon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ogeon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ogeon/subscriptions",
      "organizations_url": "https://api.github.com/users/Ogeon/orgs",
      "repos_url": "https://api.github.com/users/Ogeon/repos",
      "events_url": "https://api.github.com/users/Ogeon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ogeon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-13T20:38:44Z",
    "updated_at": "2015-01-13T20:38:56Z",
    "body": "This is a different situation, but still... I noticed that it's not possible to implement a local trait for something implementing Fn with a generic type, like the handlers in rustful:\n\n``` Rust\nimpl<C: Cache, F: Fn(Context<C>, Response)> Handler for F {\n    type Cache = C;\n\n    fn handle_request(&self, context: Context<C>, response: Response) {\n        (*self)(context, response);\n    }\n}\n```\n\n`Cache`, `Context` `Response` and `Handler` are local. I can imagine that it has something to to with `C` being generic, since it works if I substitutes it for `&Cache`, but what I find interesting is that this seems to be fine:\n\n``` Rust\nimpl<C: Cache> Handler for fn(Context<C>, Response) {\n    type Cache = C;\n\n    fn handle_request(&self, context: Context<C>, response: Response) {\n        (*self)(context, response);\n    }\n}\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69815409/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69977772",
    "html_url": "https://github.com/rust-lang/rust/issues/20974#issuecomment-69977772",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20974",
    "id": 69977772,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTc3Nzcy",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-14T19:41:19Z",
    "updated_at": "2015-01-14T19:41:19Z",
    "body": "See discuss thread http://discuss.rust-lang.org/t/orphan-rules/1322 and blog post http://smallcultfollowing.com/babysteps/blog/2015/01/14/little-orphan-impls/\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69977772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70296824",
    "html_url": "https://github.com/rust-lang/rust/issues/20974#issuecomment-70296824",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20974",
    "id": 70296824,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjk2ODI0",
    "user": {
      "login": "aidancully",
      "id": 503301,
      "node_id": "MDQ6VXNlcjUwMzMwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/503301?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aidancully",
      "html_url": "https://github.com/aidancully",
      "followers_url": "https://api.github.com/users/aidancully/followers",
      "following_url": "https://api.github.com/users/aidancully/following{/other_user}",
      "gists_url": "https://api.github.com/users/aidancully/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aidancully/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aidancully/subscriptions",
      "organizations_url": "https://api.github.com/users/aidancully/orgs",
      "repos_url": "https://api.github.com/users/aidancully/repos",
      "events_url": "https://api.github.com/users/aidancully/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aidancully/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-16T18:17:05Z",
    "updated_at": "2015-01-16T18:17:05Z",
    "body": "If I understand the issue, I'm not sure the Iron code can work with the coherence model rust seems to want? Consider this (which is not what Iron does, I know, but for the sake of argument):\n\n``` rust\n// crate 1\npub enum Status { .. };\n// crate 2\ntrait Modifier<M>;\nimpl<T> Modifier<T> for Status { .. } // ***\n// crate 3\nstruct Response { };\nimpl Modifier<Response> for Status { .. }\n```\n\nIt seems like, under any proposed coherence scheme, crate 2 would always have the option of adding the marked implementation (if the library author decides to do so at some point in the future), which would then become incoherent with crate 3. Is that right? Is that something the coherence rules are intended to prevent?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70296824/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70326765",
    "html_url": "https://github.com/rust-lang/rust/issues/20974#issuecomment-70326765",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20974",
    "id": 70326765,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzI2NzY1",
    "user": {
      "login": "reem",
      "id": 4745181,
      "node_id": "MDQ6VXNlcjQ3NDUxODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4745181?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reem",
      "html_url": "https://github.com/reem",
      "followers_url": "https://api.github.com/users/reem/followers",
      "following_url": "https://api.github.com/users/reem/following{/other_user}",
      "gists_url": "https://api.github.com/users/reem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reem/subscriptions",
      "organizations_url": "https://api.github.com/users/reem/orgs",
      "repos_url": "https://api.github.com/users/reem/repos",
      "events_url": "https://api.github.com/users/reem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reem/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-16T21:40:18Z",
    "updated_at": "2015-01-16T21:40:18Z",
    "body": "The above case will fail with a conflicting implementation (different than\na lack of coherence, since crate 2 defines the trait) when crate 3 tries to\nadd its impl. This is fine, since adding an implementation like that is\n(and is intended to be) a breaking change of crate 2.\nOn Fri, Jan 16, 2015 at 7:17 PM Aidan Cully notifications@github.com\nwrote:\n\n> If I understand the issue, I'm not sure the Iron code can work with the\n> coherence model rust seems to want? Consider this (which is not what Iron\n> does, I know, but for the sake of argument):\n> \n> // crate 1pub enum Status { .. };// crate 2trait Modifier<M>;impl<T> Modifier<T> for Status { .. } // ***// crate 3struct Response { };impl Modifier<Response> for Status { .. }\n> \n> It seems like, under any proposed coherence scheme, crate 2 would always\n> have the option of adding the marked implementation (if the library author\n> decides to do so at some point in the future), which would then become\n> incoherent with crate 3. Is that right? Is that something the coherence\n> rules are intended to prevent?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/rust-lang/rust/issues/20974#issuecomment-70296824.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70326765/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70343884",
    "html_url": "https://github.com/rust-lang/rust/issues/20974#issuecomment-70343884",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20974",
    "id": 70343884,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzQzODg0",
    "user": {
      "login": "aidancully",
      "id": 503301,
      "node_id": "MDQ6VXNlcjUwMzMwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/503301?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aidancully",
      "html_url": "https://github.com/aidancully",
      "followers_url": "https://api.github.com/users/aidancully/followers",
      "following_url": "https://api.github.com/users/aidancully/following{/other_user}",
      "gists_url": "https://api.github.com/users/aidancully/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aidancully/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aidancully/subscriptions",
      "organizations_url": "https://api.github.com/users/aidancully/orgs",
      "repos_url": "https://api.github.com/users/aidancully/repos",
      "events_url": "https://api.github.com/users/aidancully/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aidancully/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-17T00:21:38Z",
    "updated_at": "2015-01-17T00:21:38Z",
    "body": "OK, got it. Thanks.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70343884/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
