[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/192338035",
    "html_url": "https://github.com/rust-lang/rust/issues/14962#issuecomment-192338035",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14962",
    "id": 192338035,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MjMzODAzNQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-04T16:11:31Z",
    "updated_at": "2016-03-04T16:11:31Z",
    "body": "I think this has just worked out? A small diff:\n\n``` diff\n#[cfg(any(not(target_arch = \"x86\"), not(target_arch = \"x86_64\")))]\npub fn main() {}\n```\n\ntranscript:\n\n``` bash\nsteve@warmachine:~/tmp$ rustc asm-flow.rs --cfg overwrite_in_both_with_liveness && ./asm-flow\nasm-flow.rs:6:10: 6:25 warning: unknown lint: `dead_assignment`, #[warn(unknown_lints)] on by default\nasm-flow.rs:6 #![allow(dead_assignment)]\n                       ^~~~~~~~~~~~~~~\nsteve@warmachine:~/tmp$ rustc asm-flow.rs --cfg augment_in_input && ./asm-flow  \nasm-flow.rs:6:10: 6:25 warning: unknown lint: `dead_assignment`, #[warn(unknown_lints)] on by default\nasm-flow.rs:6 #![allow(dead_assignment)]\n                       ^~~~~~~~~~~~~~~\nsteve@warmachine:~/tmp$ rustc asm-flow.rs --cfg augment_in_output && ./asm-flow \nasm-flow.rs:6:10: 6:25 warning: unknown lint: `dead_assignment`, #[warn(unknown_lints)] on by default\nasm-flow.rs:6 #![allow(dead_assignment)]\n                       ^~~~~~~~~~~~~~~\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/192338035/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/298262998",
    "html_url": "https://github.com/rust-lang/rust/issues/14962#issuecomment-298262998",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14962",
    "id": 298262998,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODI2Mjk5OA==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-04-30T22:58:38Z",
    "updated_at": "2017-04-30T22:58:38Z",
    "body": "I'm seeing the following. All (compilable) asserts pass. The unused_assignments lint appears incorrect though. I've included some annotated code samples below drawn from the original issue which still represent incorrect behavior. Those that appear to have been fixed are no longer included.\r\n\r\nAs far as I can tell, we do now correctly detect when reading undefined memory -- so there has been progress. I'm uncertain if we've regressed since @steveklabnik's example above, but it does look like it...\r\n\r\n```rust\r\n#![feature(asm)]\r\n\r\nfn main() {\r\n    let mut x: isize = 0;\r\n    let y: isize = 1;\r\n    let mut z: isize;\r\n\r\n    unsafe {\r\n        asm!(\"mov ($1), $0\"\r\n                 : \"=r\"(*{z=2; &mut x})\r\n                 : \"r\"(&{z=3; y}));\r\n                 // ^ value assigned to `z` is never read -- this is wrong\r\n    }\r\n\r\n     assert_eq!(z, 3); // Passes\r\n}\r\n```\r\n\r\n```rust\r\n#![feature(asm)]\r\n\r\nfn main() {\r\n    let mut x: isize = 0;\r\n    let y: isize = 1;\r\n    let mut z: isize;\r\n\r\n    unsafe {\r\n        asm!(\"mov ($1), $0\"\r\n             : \"=r\"(*{z=2; &mut x})\r\n             : \"r\"(&{z+=3; y}));\r\n             // ^ value assigned is never read -- wrong\r\n    }\r\n    assert_eq!(z, 5); // Passes\r\n}\r\n```\r\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/298262998/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/459352395",
    "html_url": "https://github.com/rust-lang/rust/issues/14962#issuecomment-459352395",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14962",
    "id": 459352395,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1OTM1MjM5NQ==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-01-31T13:55:42Z",
    "updated_at": "2019-01-31T13:56:03Z",
    "body": "Yes it looks like the main item remaining here is the incorrect control flow model of the `unused_assignments` lint's treatment of `asm!`.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/459352395/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/633049171",
    "html_url": "https://github.com/rust-lang/rust/issues/14962#issuecomment-633049171",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14962",
    "id": 633049171,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMzA0OTE3MQ==",
    "user": {
      "login": "Amanieu",
      "id": 278509,
      "node_id": "MDQ6VXNlcjI3ODUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amanieu",
      "html_url": "https://github.com/Amanieu",
      "followers_url": "https://api.github.com/users/Amanieu/followers",
      "following_url": "https://api.github.com/users/Amanieu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions",
      "organizations_url": "https://api.github.com/users/Amanieu/orgs",
      "repos_url": "https://api.github.com/users/Amanieu/repos",
      "events_url": "https://api.github.com/users/Amanieu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amanieu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-05-23T13:02:45Z",
    "updated_at": "2020-05-23T13:02:45Z",
    "body": "This is fixed with the new `asm!` implementation. However for some reason the warning is emitted twice: https://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=29264c7da298b07df0e441ddbd05d228",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/633049171/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/633231223",
    "html_url": "https://github.com/rust-lang/rust/issues/14962#issuecomment-633231223",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14962",
    "id": 633231223,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMzIzMTIyMw==",
    "user": {
      "login": "Amanieu",
      "id": 278509,
      "node_id": "MDQ6VXNlcjI3ODUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amanieu",
      "html_url": "https://github.com/Amanieu",
      "followers_url": "https://api.github.com/users/Amanieu/followers",
      "following_url": "https://api.github.com/users/Amanieu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions",
      "organizations_url": "https://api.github.com/users/Amanieu/orgs",
      "repos_url": "https://api.github.com/users/Amanieu/repos",
      "events_url": "https://api.github.com/users/Amanieu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amanieu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-05-24T13:29:39Z",
    "updated_at": "2020-05-24T13:29:39Z",
    "body": "The double warning is fixed by #72537, so I'm going to close this issue.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/633231223/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
