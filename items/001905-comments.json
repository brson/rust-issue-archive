[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/4183473",
    "html_url": "https://github.com/rust-lang/rust/issues/1905#issuecomment-4183473",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1905",
    "id": 4183473,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxODM0NzM=",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-02-26T18:54:08Z",
    "updated_at": "2012-02-26T18:54:08Z",
    "body": "This is a limitation of typestate -- the compiler doesn't know that the while loop in yes_no_prompt is infinite, because it doesn't treat the literal `true` specially. The path that doesn't return is the path where the loop condition (after some number of iterations, possibly 0) is false, and then you fall off the end of the function.\n\nI have argued before (and I wasn't the only one) that this is a case for adding an infinite-loop construct so you could write `forever { ... }` instead of `while(true) { ... }` -- that way typestate would know that there is no way to exit the loop except through a break or return. The alternative would be to special-case knowledge about `true` as a loop condition into typestate, but I'm hesistant to add special cases since it seems like a slippery slope.\n\nI'm going to close this issue, but open a new RFC for the infinite-loop construct.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/4183473/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/4183516",
    "html_url": "https://github.com/rust-lang/rust/issues/1905#issuecomment-4183516",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1905",
    "id": 4183516,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxODM1MTY=",
    "user": {
      "login": "jsternberg",
      "id": 1212129,
      "node_id": "MDQ6VXNlcjEyMTIxMjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1212129?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jsternberg",
      "html_url": "https://github.com/jsternberg",
      "followers_url": "https://api.github.com/users/jsternberg/followers",
      "following_url": "https://api.github.com/users/jsternberg/following{/other_user}",
      "gists_url": "https://api.github.com/users/jsternberg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jsternberg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jsternberg/subscriptions",
      "organizations_url": "https://api.github.com/users/jsternberg/orgs",
      "repos_url": "https://api.github.com/users/jsternberg/repos",
      "events_url": "https://api.github.com/users/jsternberg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jsternberg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-02-26T18:58:52Z",
    "updated_at": "2012-02-26T18:58:52Z",
    "body": "That works. I believe gcc has a similar problem with this construct, but I've seen C/C++ compilers that are able to handle this (which has caused problems when one compiler requires the return value, and one didn't). If you could post the RFC here after making it so I can keep track of it, that would be great.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/4183516/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/4183536",
    "html_url": "https://github.com/rust-lang/rust/issues/1905#issuecomment-4183536",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1905",
    "id": 4183536,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxODM1MzY=",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-02-26T19:00:56Z",
    "updated_at": "2012-02-26T19:00:56Z",
    "body": "Yup, the RFC is #1906 -- I believe that some Java compilers also special-case `true`, but again, to me that just seems uglier than adding a `forever` construct to let you say what you mean.\n\nAlso, perhaps obvious, but the workaround for this (requiring no changes to the compiler) is to put either a `fail`, or a call to `std::util::unreachable()` (which also fails, that just makes the code a little clearer) after the loop body.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/4183536/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
