[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64097501",
    "html_url": "https://github.com/rust-lang/rust/pull/19220#issuecomment-64097501",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19220",
    "id": 64097501,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDk3NTAx",
    "user": {
      "login": "rust-highfive",
      "id": 7378925,
      "node_id": "MDQ6VXNlcjczNzg5MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7378925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rust-highfive",
      "html_url": "https://github.com/rust-highfive",
      "followers_url": "https://api.github.com/users/rust-highfive/followers",
      "following_url": "https://api.github.com/users/rust-highfive/following{/other_user}",
      "gists_url": "https://api.github.com/users/rust-highfive/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rust-highfive/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rust-highfive/subscriptions",
      "organizations_url": "https://api.github.com/users/rust-highfive/orgs",
      "repos_url": "https://api.github.com/users/rust-highfive/repos",
      "events_url": "https://api.github.com/users/rust-highfive/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rust-highfive/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T22:10:10Z",
    "updated_at": "2014-11-22T22:10:10Z",
    "body": "<img src=\"http://www.joshmatthews.net/warning.svg\" alt=\"warning\" height=20> **Warning** <img src=\"http://www.joshmatthews.net/warning.svg\" alt=\"warning\" height=20>\n- These commits modify **unsafe code**. Please review it carefully!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64097501/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64097520",
    "html_url": "https://github.com/rust-lang/rust/pull/19220#issuecomment-64097520",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19220",
    "id": 64097520,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDk3NTIw",
    "user": {
      "login": "tbu-",
      "id": 6666593,
      "node_id": "MDQ6VXNlcjY2NjY1OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6666593?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tbu-",
      "html_url": "https://github.com/tbu-",
      "followers_url": "https://api.github.com/users/tbu-/followers",
      "following_url": "https://api.github.com/users/tbu-/following{/other_user}",
      "gists_url": "https://api.github.com/users/tbu-/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tbu-/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tbu-/subscriptions",
      "organizations_url": "https://api.github.com/users/tbu-/orgs",
      "repos_url": "https://api.github.com/users/tbu-/repos",
      "events_url": "https://api.github.com/users/tbu-/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tbu-/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T22:11:04Z",
    "updated_at": "2014-11-22T22:53:20Z",
    "body": "This pull request would change the semantics of `RefCell`, so I included the fixes for the standard library and `rustc` as an example.\n\nFeedback would be appreciated! :)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64097520/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64140407",
    "html_url": "https://github.com/rust-lang/rust/pull/19220#issuecomment-64140407",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19220",
    "id": 64140407,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTQwNDA3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-23T23:33:39Z",
    "updated_at": "2014-11-23T23:33:39Z",
    "body": "The `Cell` and `RefCell` types are quite core abstractions in the standard library, so modifying them shouldn't be taken lightly. Could you please elaborate as to why you have modified the semantics, as well as precisely how the semantics have changed? It's difficult to see what has changed with this new `map` function as well as what this means for users of `RefCell` without deeply understanding the patch itself.\n\nI would recommend a description in lines with our [breaking changes policy](https://mail.mozilla.org/pipermail/rust-dev/2014-April/009543.html) or perhaps a mini-RFC-style description.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64140407/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64383977",
    "html_url": "https://github.com/rust-lang/rust/pull/19220#issuecomment-64383977",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19220",
    "id": 64383977,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MzgzOTc3",
    "user": {
      "login": "tbu-",
      "id": 6666593,
      "node_id": "MDQ6VXNlcjY2NjY1OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6666593?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tbu-",
      "html_url": "https://github.com/tbu-",
      "followers_url": "https://api.github.com/users/tbu-/followers",
      "following_url": "https://api.github.com/users/tbu-/following{/other_user}",
      "gists_url": "https://api.github.com/users/tbu-/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tbu-/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tbu-/subscriptions",
      "organizations_url": "https://api.github.com/users/tbu-/orgs",
      "repos_url": "https://api.github.com/users/tbu-/repos",
      "events_url": "https://api.github.com/users/tbu-/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tbu-/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-25T11:03:40Z",
    "updated_at": "2014-11-25T11:03:40Z",
    "body": "# Motivation\n\nPreviously, you were unable to return a reference to something non-trivial inside of a `RefCell`. Consider you have this struct:\n\n```\nstruct ContainsVector {\n    vec: RefCell<Vec<u32>>,\n}\n```\n\nThen you're currently unable to return a reference an element of the vector, despite this having somewhat clear semantics (it would keep the `RefCell` borrowed).\n\n# Proposed changes\n\nThis proposal changes the direct usage semantics of the `Ref`s and `RefMut`s into a `RefCell`, although it doesn't change the actual representation: If you borrow a `RefCell`, you now get a `Ref<&T>` out of it, instead of a `Ref<T>`, which means that it needs a double-dereference (`**`) to access the actual value. This enables changing the interior of such a references via the `map` function, which takes a closure |T| -> U (both types bound by lifetime) and transforms a `Ref<T>` to a `Ref<U>`.\n\n# Advantages\n\nThis should be the most simple change in order to properly return references to inner members of `RefCell`s, by reusing the existing `Ref` type and changing the usage semantics slightly. The changed usage semantics do not change the assembly output:\n\nBefore (approximation):\n\n```\nstruct Ref<T> { val: &T }\nlet ref: Ref<T>;\nref = ref;\n*ref = *ref.val;\n```\n\nAfter:\n\n```\nstruct Ref<T> { val: &T }\nlet ref: Ref<T>;\nref = ref;\n*ref = ref.val;\n**ref = *ref.val;\n```\n\n(So the assembly output still just contains one dereference.)\n\n# Disadvantages\n\nUsage sites that do not benefit from auto-derefencing need to be changed. This includes e. g.\n\n```\n*refcell.borrow_mut() = value;\n```\n\nto\n\n```\n**refcell.borrow_mut() = value;\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64383977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64384147",
    "html_url": "https://github.com/rust-lang/rust/pull/19220#issuecomment-64384147",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19220",
    "id": 64384147,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0Mzg0MTQ3",
    "user": {
      "login": "tbu-",
      "id": 6666593,
      "node_id": "MDQ6VXNlcjY2NjY1OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6666593?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tbu-",
      "html_url": "https://github.com/tbu-",
      "followers_url": "https://api.github.com/users/tbu-/followers",
      "following_url": "https://api.github.com/users/tbu-/following{/other_user}",
      "gists_url": "https://api.github.com/users/tbu-/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tbu-/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tbu-/subscriptions",
      "organizations_url": "https://api.github.com/users/tbu-/orgs",
      "repos_url": "https://api.github.com/users/tbu-/repos",
      "events_url": "https://api.github.com/users/tbu-/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tbu-/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-25T11:05:02Z",
    "updated_at": "2014-11-25T11:05:02Z",
    "body": "@alexcrichton I believe the biggest argument against this change is that it changes a core type \u2013 however since we're still pre-1.0 it might be a bigger concern to get it right than to maintain backward-compatiblity.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64384147/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64435291",
    "html_url": "https://github.com/rust-lang/rust/pull/19220#issuecomment-64435291",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19220",
    "id": 64435291,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDM1Mjkx",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-25T17:11:54Z",
    "updated_at": "2014-11-25T17:11:54Z",
    "body": "I don't think that this is safe, I checked this out and this code compiles (when it shouldn't)\n\n``` rust\nfn main() {                         \n    let rc = RefCell::new(1u);\n\n    let b: &uint = {                \n        let a = rc.borrow();        \n        *a                          \n    };                              \n    let mut c = rc.borrow_mut();    \n    **c = 3;                        \n    println!(\"{}\", *b);             \n}                                   \n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64435291/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64443089",
    "html_url": "https://github.com/rust-lang/rust/pull/19220#issuecomment-64443089",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19220",
    "id": 64443089,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDQzMDg5",
    "user": {
      "login": "tbu-",
      "id": 6666593,
      "node_id": "MDQ6VXNlcjY2NjY1OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6666593?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tbu-",
      "html_url": "https://github.com/tbu-",
      "followers_url": "https://api.github.com/users/tbu-/followers",
      "following_url": "https://api.github.com/users/tbu-/following{/other_user}",
      "gists_url": "https://api.github.com/users/tbu-/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tbu-/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tbu-/subscriptions",
      "organizations_url": "https://api.github.com/users/tbu-/orgs",
      "repos_url": "https://api.github.com/users/tbu-/repos",
      "events_url": "https://api.github.com/users/tbu-/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tbu-/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-25T18:00:35Z",
    "updated_at": "2014-11-25T18:00:35Z",
    "body": "You're right, this is wrong. I'll look into this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64443089/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105224220",
    "html_url": "https://github.com/rust-lang/rust/pull/19220#issuecomment-105224220",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19220",
    "id": 105224220,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTIyNDIyMA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-25T12:21:02Z",
    "updated_at": "2015-05-25T12:21:02Z",
    "body": "I\u2019m making another attempt at this in #25747.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105224220/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
