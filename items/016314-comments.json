[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51544932",
    "html_url": "https://github.com/rust-lang/rust/pull/16314#issuecomment-51544932",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16314",
    "id": 51544932,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNTQ0OTMy",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-07T23:13:09Z",
    "updated_at": "2014-08-07T23:13:09Z",
    "body": "I don't see what the bug was. It was requesting to reserve a particular size, which means the vec will definitely reserve at least that much, so it looks like the worst that should have happened was that excess capacity was wasted. What was actually happening to cause a bug?\n\nExtending the ringbuf to whatever capacity the vector decided to create seems like it could affect the ringbuf algorithm in subtle ways. Does the ringbuf care about growing in exact sizes of two?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51544932/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51545119",
    "html_url": "https://github.com/rust-lang/rust/pull/16314#issuecomment-51545119",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16314",
    "id": 51545119,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNTQ1MTE5",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-07T23:15:20Z",
    "updated_at": "2014-08-07T23:18:23Z",
    "body": "> Does the ringbuf care about growing in exact sizes of two?\n\nIf it guarantees that it is always a power of two, it can be more efficient by using shifts/bitmasking instead of divisions/remainders for computing the wrapped-around indexes (etc.).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51545119/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51545698",
    "html_url": "https://github.com/rust-lang/rust/pull/16314#issuecomment-51545698",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16314",
    "id": 51545698,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNTQ1Njk4",
    "user": {
      "login": "Ryman",
      "id": 994978,
      "node_id": "MDQ6VXNlcjk5NDk3OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/994978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ryman",
      "html_url": "https://github.com/Ryman",
      "followers_url": "https://api.github.com/users/Ryman/followers",
      "following_url": "https://api.github.com/users/Ryman/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ryman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ryman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ryman/subscriptions",
      "organizations_url": "https://api.github.com/users/Ryman/orgs",
      "repos_url": "https://api.github.com/users/Ryman/repos",
      "events_url": "https://api.github.com/users/Ryman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ryman/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-07T23:22:48Z",
    "updated_at": "2014-08-07T23:22:48Z",
    "body": "@brson The RingBuf itself doesn't seem to care about power of two currently, but it was making assumptions about the growth of the underlying vector which lead to indexing being wrong.\n\nE.g. `grow` requests a new length of 6 (3*2), it gets a capacity of 8 (vec grows by power of two) but does all its move calculations based on 6 which leaves gaps in the underlying vector so the `lo` counter doesn't wrap before it meets a `None` value, which then fails.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51545698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51671680",
    "html_url": "https://github.com/rust-lang/rust/pull/16314#issuecomment-51671680",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16314",
    "id": 51671680,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNjcxNjgw",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-09T00:37:39Z",
    "updated_at": "2014-08-09T00:37:39Z",
    "body": "@huonw It doesn't seem to be doing that. I don't see any power-of-two assumptions in the code.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51671680/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51672236",
    "html_url": "https://github.com/rust-lang/rust/pull/16314#issuecomment-51672236",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16314",
    "id": 51672236,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNjcyMjM2",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-09T00:52:33Z",
    "updated_at": "2014-08-09T00:53:48Z",
    "body": "@brson The rest of the `grow()` function, that doesn't show up in the diff, uses `newlen` as if it were the capacity of the vector. If the vector reserved more space than was requested, this left a bunch of `None`s at the end of the vector, after the elements that were supposed to be attached to the end.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51672236/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51672453",
    "html_url": "https://github.com/rust-lang/rust/pull/16314#issuecomment-51672453",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16314",
    "id": 51672453,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNjcyNDUz",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-09T00:59:54Z",
    "updated_at": "2014-08-09T00:59:54Z",
    "body": "@brson yes, it's not currently doing that, it was merely a related possible optimisation.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51672453/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
