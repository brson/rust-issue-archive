{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/13080",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/13080/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/13080/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/13080/events",
  "html_url": "https://github.com/rust-lang/rust/pull/13080",
  "id": 29965403,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTM4Njk2NzI=",
  "number": 13080,
  "title": "native: Fix a possible deadlock in spawn",
  "user": {
    "login": "alexcrichton",
    "id": 64996,
    "node_id": "MDQ6VXNlcjY0OTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexcrichton",
    "html_url": "https://github.com/alexcrichton",
    "followers_url": "https://api.github.com/users/alexcrichton/followers",
    "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
    "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
    "repos_url": "https://api.github.com/users/alexcrichton/repos",
    "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 1,
  "created_at": "2014-03-22T16:36:16Z",
  "updated_at": "2014-07-03T02:38:53Z",
  "closed_at": "2014-03-24T23:31:54Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/13080",
    "html_url": "https://github.com/rust-lang/rust/pull/13080",
    "diff_url": "https://github.com/rust-lang/rust/pull/13080.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/13080.patch",
    "merged_at": "2014-03-24T23:31:55Z"
  },
  "body": "The OSX bots have been deadlocking recently in the rustdoc tests. I have only\nbeen able to rarely reproduce the deadlock on my local setup. When reproduced,\nit looks like the child process is spinning on the malloc mutex, which I\npresume is locked with no other threads to unlock it.\n\nI'm not convinced that this is what's happening, because OSX should protect\nagainst this with pthread_atfork by default. Regardless, running as little code\nas possible in the child after fork() is normally a good idea anyway, so this\ncommit moves all allocation to the parent process to run before the child\nexecutes.\n\nAfter running 6k iterations of rustdoc tests, this deadlocked twice before, and\nafter 20k iterations afterwards, it never deadlocked. I draw the conclusion that\nthis is either sweeping the bug under the rug, or it did indeed fix the\nunderlying problem.\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/13080/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/13080/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
