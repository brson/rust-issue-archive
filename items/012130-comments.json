[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34583413",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-34583413",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 34583413,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTgzNDEz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-09T19:29:58Z",
    "updated_at": "2014-02-09T19:29:58Z",
    "body": "Closing as intended behavior.\n\nThe `if_ok!` macro is supposed to be a _convenience_, not a one-stop-shop to error handling. The `main` function returns `()` instead of an error, so you cannot use the `if_ok!()` macro in the main function.\n\nTwo other options you have are:\n- `unwrap()` - not that great of an error message\n- `match` + `fail!()` - better error message, slightly more verbose.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34583413/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34591207",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-34591207",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 34591207,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTkxMjA3",
    "user": {
      "login": "jfager",
      "id": 23755,
      "node_id": "MDQ6VXNlcjIzNzU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23755?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jfager",
      "html_url": "https://github.com/jfager",
      "followers_url": "https://api.github.com/users/jfager/followers",
      "following_url": "https://api.github.com/users/jfager/following{/other_user}",
      "gists_url": "https://api.github.com/users/jfager/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jfager/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jfager/subscriptions",
      "organizations_url": "https://api.github.com/users/jfager/orgs",
      "repos_url": "https://api.github.com/users/jfager/repos",
      "events_url": "https://api.github.com/users/jfager/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jfager/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-09T23:28:42Z",
    "updated_at": "2014-02-09T23:28:42Z",
    "body": "IO directly in main is common in small scripts and utilities, where you're most interested in convenience.  unwrap() is probably fine for these use cases, but it's frustrating that if_ok! falls over here given that it's blessed enough to be a globally available macro, it's likely going to be common in example code, and it's not apparent from the name what it's doing under the covers.\n\nThis is kind of a nebulous complaint, I know.  I'm not asking for if_ok! as currently conceived to start working in main.  But I think at the very least it's a ding against if_ok! being promoted widely as an alternative to verbose IO error handling, because limitations like this are going to bite people and just generally be irritating.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34591207/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34592719",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-34592719",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 34592719,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTkyNzE5",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-10T00:22:39Z",
    "updated_at": "2014-02-10T00:22:39Z",
    "body": "> IO directly in main is common in small scripts and utilities, where you're most interested in convenience\n\nIf you're willing to write `if_ok!`, how much different is it from `unwrap`? You can also always write your own version of `if_ok` which fails by default.\n\n> and it's not apparent from the name what it's doing under the covers\n\nThat's the subject of #12037. The macro itself is quite simple, and that is an explicit goal of the macro to stay that way.\n\n>  But I think at the very least it's a ding against if_ok! being promoted widely as an alternative to verbose IO error handling\n\nI disagree. I think that there is no one solution for error handling and you need to understand the primitives that are available to you and make the right choice based on that. The `if_ok!` macro is simply not designed to handle errors in `main`, it defers to utilities such as custom macros, `unwrap`, or an explicit `match`.\n\n> because limitations like this are going to bite people and just generally be irritating\n\nI/O errors in general are a little irritating. Robustly handling errors is fairly uncommon and the standard library shouldn't be helping you sweep errors under the rug. You should know exactly where all errors can happen and then as a consumer of a library you decide what to do about it. The libraries give you the tools necessary to handle these errors.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34592719/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34597688",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-34597688",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 34597688,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTk3Njg4",
    "user": {
      "login": "jfager",
      "id": 23755,
      "node_id": "MDQ6VXNlcjIzNzU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23755?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jfager",
      "html_url": "https://github.com/jfager",
      "followers_url": "https://api.github.com/users/jfager/followers",
      "following_url": "https://api.github.com/users/jfager/following{/other_user}",
      "gists_url": "https://api.github.com/users/jfager/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jfager/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jfager/subscriptions",
      "organizations_url": "https://api.github.com/users/jfager/orgs",
      "repos_url": "https://api.github.com/users/jfager/repos",
      "events_url": "https://api.github.com/users/jfager/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jfager/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-10T03:05:22Z",
    "updated_at": "2014-02-10T03:05:22Z",
    "body": "I'm not trying to help anyone \"sweep errors under the rug\", I'm saying that if_ok! in its current form has limitations that are annoying for a blessed global macro that's going to be frequently highlighted as the best way to make otherwise verbose IO handling tolerable (see, for instance, the final edit on [this post](https://bitbucket.org/olivier_renaud/rust-id3v1/wiki/io_error_impressions) from Reddit today). \n\nIf the official position is for people to be casual about writing their own alternate macros, why provide if_ok! at all?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34597688/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34602685",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-34602685",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 34602685,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NjAyNjg1",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-10T05:52:22Z",
    "updated_at": "2014-02-10T05:52:22Z",
    "body": "> if_ok! in its current form has limitations that are annoying for a blessed global macro\n\nThis is where I think our understanding of this macro diverges. The `if_ok!` macro is not _the_ error handling strategy, it is _a_ strategy. I have yet to be convinced that there is \"one strategy to rule them all\", and approaching any solution expecting it to be the \"one strategy\" I think is the wrong approach.\n\nThe `if_ok!` macro is provided by default for a few reasons. Primarily it is meant to be one of the most common things you reach for when handling errors, so there's no need to define it slightly different in all crates. Another reason is that `macro_rules` is gated by default, while macro usage is not. We do not want to force all crates to opt-in to macro rules just to get nice error handling, that would defeat the purpose of the feature gate.\n\nThe `main` function is where everything in rust must be handled. You know that the `main` function is the last possible thing which could be dealing with the error, and that needs to be taken into account with how to deal with it. Continuing to punt the error up the stack is simply not an option, and that's the whole purpose of the `if_ok!` macros, so it's fundamentally not designed for this use case.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34602685/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34632397",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-34632397",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 34632397,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NjMyMzk3",
    "user": {
      "login": "jfager",
      "id": 23755,
      "node_id": "MDQ6VXNlcjIzNzU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23755?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jfager",
      "html_url": "https://github.com/jfager",
      "followers_url": "https://api.github.com/users/jfager/followers",
      "following_url": "https://api.github.com/users/jfager/following{/other_user}",
      "gists_url": "https://api.github.com/users/jfager/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jfager/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jfager/subscriptions",
      "organizations_url": "https://api.github.com/users/jfager/orgs",
      "repos_url": "https://api.github.com/users/jfager/repos",
      "events_url": "https://api.github.com/users/jfager/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jfager/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-10T13:44:07Z",
    "updated_at": "2014-02-10T13:44:07Z",
    "body": "It's frustrating that you're putting words in my mouth.  I don't want to sweep errors under the rug and I'm not thinking of `if_ok!` as the \"one strategy\" for error handling.  I'm saying that people are going to reach for it first because it's a blessed macro that's going to show up widely in example code.  Wanting the experience of using a prominent feature to be smooth is not the same thing as wanting a magic cure for all possible IO error handling difficulties.  \n\nWhat benefit does the user get from `if_ok!` not working in `main` that pays for the cost of having to bang their head against the error?  \n\nI've heard two candidate benefits in this thread:  \n1. It's simple, and providing it means users won't have to define it themselves.  I appreciate that, but as a user I'd prefer the std lib to give me something that sweats the details a little more.  The simplicity is primarily of _implementation_; the simplicity of _use_ hits snags like this that don't seem otherwise beneficial.\n2. `main` is the last opportunity to clean up and the limitation prevents you from forgetting that.  But what does this actually mean?  There's no similar restriction against using `unwrap`, which is going to fail with an error message pointing to the bowels of `Result` but otherwise have the same practical effect you'd naively expect 'punt the error up the stack' to have from `main`.  If I just want to bail at the point of an error in `main`, what extra benefit do I get by failing over early return?  In both cases the rest of the function doesn't execute and outstanding destructors get run, right?\n\nI don't know what the answer is.  Maybe it's revisiting `if_ok!`.  Maybe it's changing how `main` works so that it fails when you try to return an error out of it.  Or maybe it's just living with having to explain how `if_ok!` is actually implemented on the mailing list and StackOverflow every so often.  Anyways, I'm not going to keep harping on it, I'm just frustrated at what feel like mischaracterizations of what I'm saying.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34632397/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34658461",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-34658461",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 34658461,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NjU4NDYx",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-10T17:34:09Z",
    "updated_at": "2014-02-10T17:34:09Z",
    "body": "I'm sorry if I sounded like I was putting words in your mouth, I definitely didn't want to do that. I was just trying to interpret what you're thinking is. I think something that would be helpful to me is a suggestion of a solution to this problem. Do you have on in mind already?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34658461/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34670073",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-34670073",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 34670073,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NjcwMDcz",
    "user": {
      "login": "jfager",
      "id": 23755,
      "node_id": "MDQ6VXNlcjIzNzU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23755?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jfager",
      "html_url": "https://github.com/jfager",
      "followers_url": "https://api.github.com/users/jfager/followers",
      "following_url": "https://api.github.com/users/jfager/following{/other_user}",
      "gists_url": "https://api.github.com/users/jfager/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jfager/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jfager/subscriptions",
      "organizations_url": "https://api.github.com/users/jfager/orgs",
      "repos_url": "https://api.github.com/users/jfager/repos",
      "events_url": "https://api.github.com/users/jfager/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jfager/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-10T19:22:46Z",
    "updated_at": "2014-02-10T19:22:46Z",
    "body": "Thank you, and apologies if I came across as overly defensive.  I do feel bad raising the concern when I don't have a great answer in mind, but a few thoughts are:\n1.  Magic `main`:  `main` handles returns of a certain set of blessed errors by failing rather than as a compilation error.  Not great - magic's inherently bad, violates principle of least surprise, etc.\n2.  `ExitCode` trait:  Instead of having to return (), `main` could be allowed to return types that implement a trait for spitting out exit codes.  `Result` could implement it as `Ok(_) => 0, Err(_) => 1` or whatever.  \n3.  Some handwavy 'do' expression:  You would use it similarly to how you call a function that uses `if_ok!` internally now, i.e. the result of the expression is a Result.  The main difference is that it doesn't immediately return from its defining function (just like other expressions, if you leave the semicolon off the end it _could_ be the returned value, but it doesn't have to be), and you wouldn't have to wrap every IO invocation inside it with a macro call, the early exit would be implicit inside the expression block.  I like the imaginary promise of this one the best but it's obviously not fully thought out and would probably involve the most work to do it right.  It might be roughly prototypable as a macro, though, I'll try to put something together this week.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34670073/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34725745",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-34725745",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 34725745,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzI1NzQ1",
    "user": {
      "login": "jakerr",
      "id": 322861,
      "node_id": "MDQ6VXNlcjMyMjg2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/322861?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakerr",
      "html_url": "https://github.com/jakerr",
      "followers_url": "https://api.github.com/users/jakerr/followers",
      "following_url": "https://api.github.com/users/jakerr/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakerr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakerr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakerr/subscriptions",
      "organizations_url": "https://api.github.com/users/jakerr/orgs",
      "repos_url": "https://api.github.com/users/jakerr/repos",
      "events_url": "https://api.github.com/users/jakerr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakerr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-11T04:32:42Z",
    "updated_at": "2014-02-11T04:32:42Z",
    "body": "Can a procedural macro look at the context in which it's invoked such that `if_ok!` could look at the return value of the function it is expanded into and could `fail!` on `Err` if the return value is not of type `Result`?\n\nWhen the return type of expansion context is not `Result` could it also add a warning span: ''Result error is not handled\", if the function is not tagged with some attribute such as '#[ignores_result_errors]'.\n\nI'm not sure if either of the two above are possible. That is looking at context of expansion, and adding warning spans, from within a procedural macro.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34725745/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35486980",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-35486980",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 35486980,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDg2OTgw",
    "user": {
      "login": "buster",
      "id": 151817,
      "node_id": "MDQ6VXNlcjE1MTgxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151817?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/buster",
      "html_url": "https://github.com/buster",
      "followers_url": "https://api.github.com/users/buster/followers",
      "following_url": "https://api.github.com/users/buster/following{/other_user}",
      "gists_url": "https://api.github.com/users/buster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/buster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/buster/subscriptions",
      "organizations_url": "https://api.github.com/users/buster/orgs",
      "repos_url": "https://api.github.com/users/buster/repos",
      "events_url": "https://api.github.com/users/buster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/buster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-19T10:59:22Z",
    "updated_at": "2014-02-19T10:59:22Z",
    "body": "How about unwrap!  ? \n\n```\nextern mod std;\n\nuse std::io::IoResult;\n\nfn something() -> IoResult<bool> {\n    Ok(true)\n}\n\nfn main() {\n    let a = unwrap!(something());\n    println!(\"{}\", a);\n}\n\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35486980/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35487224",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-35487224",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 35487224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDg3MjI0",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-19T11:02:35Z",
    "updated_at": "2014-02-19T11:02:42Z",
    "body": "What would a macro do that the method doesn't?\n\n``` rust\nlet a = something.unwrap();\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35487224/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35498672",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-35498672",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 35498672,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDk4Njcy",
    "user": {
      "login": "buster",
      "id": 151817,
      "node_id": "MDQ6VXNlcjE1MTgxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151817?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/buster",
      "html_url": "https://github.com/buster",
      "followers_url": "https://api.github.com/users/buster/followers",
      "following_url": "https://api.github.com/users/buster/following{/other_user}",
      "gists_url": "https://api.github.com/users/buster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/buster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/buster/subscriptions",
      "organizations_url": "https://api.github.com/users/buster/orgs",
      "repos_url": "https://api.github.com/users/buster/repos",
      "events_url": "https://api.github.com/users/buster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/buster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-19T13:32:02Z",
    "updated_at": "2014-02-19T13:33:06Z",
    "body": "It's not exactly clear to me what `if_ok!` is supposed to solve, but that's maybe because the example here doesn't show other cases.\n\nIn the code\n\n```\nextern mod std;\n\nuse std::io::IoResult;\n\nfn something() -> IoResult<bool> {\n    Ok(true)\n}\n\nfn main() {\n    let a = if_ok!(something());\n    println!(\"{}\", a);\n}\n```\n\nFor the non-error case the line `let a = if_ok!(something());` is completely replacable by `let a = something().unwrap();`, isn't it? It gives me zero advantage in the case something() returns Ok().\n\nWhen i change the example code to return an error, what is supposed to happen? The if_ok!() will then return some Err()... Am i to handle that case with some match statement anyway? It's back to `unwrap()` and friends then..\n\nI have not much experience with Rust so i suppose i am missing something, but my thought probably gives some insight from a rust beginner/python convert what may be confusing for other people as well...\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35498672/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35523369",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-35523369",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 35523369,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTIzMzY5",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-19T17:18:54Z",
    "updated_at": "2014-02-19T17:20:03Z",
    "body": "@buster `if_ok!` is designed to help bubble IO errors up the chain. For example, you could have some wire protocol and have a method like this:\n\n``` rust\nstruct Event {\n    id: i32,\n    sender: ~str,\n}\n\nfn read_event<R: Reader>(r: &mut R) -> IoResult<Event> {\n    let id = if_ok!(r.read_be_i32());\n    let sender_len = if_ok!(r.read_be_u32());\n    let sender = if_ok!(r.read_bytes(sender_len as uint));\n    Ok(Event {\n        id: id,\n        sender: str::from_utf8_owned(sender),\n    })\n}\n```\n\nIt is not designed to be a general purpose \"wrap this around anything that gives you an unused result warning\" solution.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35523369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36466756",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-36466756",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 36466756,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDY2NzU2",
    "user": {
      "login": "jfager",
      "id": 23755,
      "node_id": "MDQ6VXNlcjIzNzU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23755?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jfager",
      "html_url": "https://github.com/jfager",
      "followers_url": "https://api.github.com/users/jfager/followers",
      "following_url": "https://api.github.com/users/jfager/following{/other_user}",
      "gists_url": "https://api.github.com/users/jfager/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jfager/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jfager/subscriptions",
      "organizations_url": "https://api.github.com/users/jfager/orgs",
      "repos_url": "https://api.github.com/users/jfager/repos",
      "events_url": "https://api.github.com/users/jfager/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jfager/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-02T21:04:38Z",
    "updated_at": "2014-03-02T21:04:38Z",
    "body": "Another [reddit thread](http://www.reddit.com/r/rust/comments/1zdabb/what_should_i_do_with_unused_result_which_must_be/) about the sort of thing I'm saying is going to be very common.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36466756/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36470090",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-36470090",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 36470090,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDcwMDkw",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-02T22:38:08Z",
    "updated_at": "2014-03-02T22:38:08Z",
    "body": "@jfager I don't think allowing `try!` in main would address that at all; they seem to want to silently ignore errors and if we did allow `try!` in main I would fight tooth-and-nail against an \"uncaught\" IO error being swept under the rug. (I regard return IO errors from main as essentially identical to an uncaught exception.)\n\nThere are multiple error handling strategies:\n- manual `match`; the most basic and most flexible.\n- using a macro around a `match` (or one of the other methods here) if the same strategy is used repeatedly (see the `return_on_err!` and `unwrap_or_break!` macros suggested in that reddit thread)\n- `let _ = io_operation();` to ignore errors entirely\n- `io_operation().unwrap()` to fail on errors\n- `io_operation().ok().unwrap_or(~\"foo\")` to substitute a replacement value for an error\n- `try!` to bubble-up IO errors (same as just not catching an exception) [as loath as I am to suggest renaming it again, maybe it could be called `bubble_up` or `pass_up`.)\n\nAnd anything else defined to work with `IoResult` or `Result`.\n\n> Magic main: main handles returns of a certain set of blessed errors by failing rather than as a compilation error. Not great - magic's inherently bad, violates principle of least surprise, etc.\n\nThe `IoResult` type and its use is _entirely_ in libraries, the compiler knows nothing about it. I guess we could have a `#[legal_main_return_type]` annotation to tell the compiler you're allowed to return it from main, but this is ugly.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36470090/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36474511",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-36474511",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 36474511,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDc0NTEx",
    "user": {
      "login": "jfager",
      "id": 23755,
      "node_id": "MDQ6VXNlcjIzNzU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23755?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jfager",
      "html_url": "https://github.com/jfager",
      "followers_url": "https://api.github.com/users/jfager/followers",
      "following_url": "https://api.github.com/users/jfager/following{/other_user}",
      "gists_url": "https://api.github.com/users/jfager/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jfager/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jfager/subscriptions",
      "organizations_url": "https://api.github.com/users/jfager/orgs",
      "repos_url": "https://api.github.com/users/jfager/repos",
      "events_url": "https://api.github.com/users/jfager/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jfager/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-03T01:08:19Z",
    "updated_at": "2014-03-03T01:08:19Z",
    "body": "They're trying to learn how to do I/O idiomatically and without a bunch of ugliness. I point it out because it's an instance of someone reaching for `try!` as the std-blessed I/O macro that shows up in a lot of example code and getting bit by its limitations.\n\nPart of what they're hitting is using `try!` in a `spawn` proc, which isn't exactly the same issue as `try!` in `main`, but it's close:  the reason you can't do it is that the required return type for the proc is `()`, just like `main`.  \n\nAgain, this is not an argument for sweeping anything under the rug.  It is an argument that `try!`'s prominence and limitations cause pointless headaches when there is no 'up the stack' that could deal with a returned IoResult.  Wanting `try!` to fail in these specific contexts is totally reasonable (confirmed by the advice to \"use `unwrap` instead\"); the fact that it doesn't feels more like hitting the limit of the interaction of specific implementation details than a solid solution to the problem it's trying to solve.\n\nI'm sorry I mentioned magic main.  I wasn't advocating for it, I just threw it out as something that would remove the immediate problem, but of course it would lead to new ones of its own.  Please ignore the suggestion.  My current hand-wavy hope is that `do` comes back as something that can eliminate the need for `try!` altogether. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36474511/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36590371",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-36590371",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 36590371,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTkwMzcx",
    "user": {
      "login": "jfager",
      "id": 23755,
      "node_id": "MDQ6VXNlcjIzNzU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23755?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jfager",
      "html_url": "https://github.com/jfager",
      "followers_url": "https://api.github.com/users/jfager/followers",
      "following_url": "https://api.github.com/users/jfager/following{/other_user}",
      "gists_url": "https://api.github.com/users/jfager/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jfager/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jfager/subscriptions",
      "organizations_url": "https://api.github.com/users/jfager/orgs",
      "repos_url": "https://api.github.com/users/jfager/repos",
      "events_url": "https://api.github.com/users/jfager/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jfager/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-04T04:07:00Z",
    "updated_at": "2014-03-04T04:07:00Z",
    "body": "Superseding with #12676, as I don't actually think the problem is just that `try!` doesn't work in main.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36590371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378195590",
    "html_url": "https://github.com/rust-lang/rust/issues/12130#issuecomment-378195590",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12130",
    "id": 378195590,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODE5NTU5MA==",
    "user": {
      "login": "kornelski",
      "id": 72159,
      "node_id": "MDQ6VXNlcjcyMTU5",
      "avatar_url": "https://avatars.githubusercontent.com/u/72159?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kornelski",
      "html_url": "https://github.com/kornelski",
      "followers_url": "https://api.github.com/users/kornelski/followers",
      "following_url": "https://api.github.com/users/kornelski/following{/other_user}",
      "gists_url": "https://api.github.com/users/kornelski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kornelski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kornelski/subscriptions",
      "organizations_url": "https://api.github.com/users/kornelski/orgs",
      "repos_url": "https://api.github.com/users/kornelski/repos",
      "events_url": "https://api.github.com/users/kornelski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kornelski/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-03T09:56:34Z",
    "updated_at": "2018-04-03T09:56:34Z",
    "body": "This is fixed in #43301",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378195590/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
