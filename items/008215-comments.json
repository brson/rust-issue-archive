[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22373669",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-22373669",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 22373669,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMzczNjY5",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-09T03:34:00Z",
    "updated_at": "2013-08-09T03:34:00Z",
    "body": "I stated my preference in #3505 but will restate here. I would like there to be a rule: \"pub items in a non-pub mod are visible to the rest of the crate, but not visible to users outside the crate\". This is necessary to finally seal the leakiness of the select trait abstraction, cf #5160.\n\nAIUI condition 2 listed above would imply this rule.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22373669/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22374437",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-22374437",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 22374437,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMzc0NDM3",
    "user": {
      "login": "Aatch",
      "id": 342416,
      "node_id": "MDQ6VXNlcjM0MjQxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aatch",
      "html_url": "https://github.com/Aatch",
      "followers_url": "https://api.github.com/users/Aatch/followers",
      "following_url": "https://api.github.com/users/Aatch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions",
      "organizations_url": "https://api.github.com/users/Aatch/orgs",
      "repos_url": "https://api.github.com/users/Aatch/repos",
      "events_url": "https://api.github.com/users/Aatch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aatch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-09T04:10:13Z",
    "updated_at": "2013-08-09T04:10:13Z",
    "body": "Ok, to give a concrete (if contrived example), lets say I have this:\n\n``` rust\npub mod inner_api_a {\n   use super::inner_common_impl;\n   pub fn api1() {\n       inner_common_impl::common1()\n   }\n   pub fn api2() {\n       inner_common_impl::common2()\n   }\n}\n\npub mod inner_api_a {\n   use super::inner_common_impl;\n   pub fn api1() {\n       inner_common_impl::common3()\n   }\n   pub fn api2() {\n       inner_common_impl::common4()\n   }\n}\n\nmod inner_common_impl {\n    fn common1() { }\n    fn common2() { }\n    fn common3() { }\n    fn common4() { }\n}\n```\n\nIn this example, `inner_common_impl` is just some common, internal routines shared by multiple, otherwise-unrelated modules inside the crate. These internal routines have complex preconditions and are not suitable for public consumption.\n\nThe above will not compile, as `inner_common_impl` is not public, so the `use` statements fail, also telling me that `inner_common_impl` is private.\n\nIf I mark it as public (so now it is visible cross-crate) it still won't compile because none of the functions are marked public. The only solution there is marking the function as public, thus making it visible to the outside world.\n\nThere are some convolutions you can do regarding using `pub use` and similar, but none of them play well with the implicit mapping to files/folders, as you'd end up adding extra layers to your directory structure or putting `#[path]` attributes everywhere. Additionally, if you aren't in a position where you can justifiably re-structure the crate, then you are even more stuck (eg, `libstd`).\n\nThe thing is, internal to the crate, the visibility rules are fine, and that's what matters while compiling _that_ crate. When it comes to users of the library, it only matters that they can't link against the symbol you want. This suggests an alternative mechanism for controlling \"link-time\" visibility might be in order.\n\nBy keeping the current visibility rules regarding `pub`/`priv` as existing in isolation, and adding an attribute-based system for controlling visibility for external users, it should keep the system simple and understandable.\n\nFor comparison, in C, everything in a library is exported by default, unless the function/variable is marked static, in which case it doesn't even escape the object it's in. This is similar to rust's `pub`/`priv` at the moment. However, both GCC and clang implement extensions that allow you to control the visibility at a library level, via attributes.\n\nI'm proposing a `#[visibility(<value>)]` attribute, that is applied recursively. This would control the \"link-time\" visibility of items. For example, adding `#[visibility(internal)]` to a `pub mod foo;` would make that module public, but not actually exported from the crate. This would essentially make everything after resolution/privacy checking act as if it's private.\n\nAnother potential advantage is one that C++ benefits from the same system. Not exporting mountains of monomorphised symbols.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22374437/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22522134",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-22522134",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 22522134,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNTIyMTM0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-12T20:19:26Z",
    "updated_at": "2013-08-12T20:19:26Z",
    "body": "Sub-bug of #6143\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22522134/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24339893",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-24339893",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 24339893,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzM5ODkz",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-12T17:30:11Z",
    "updated_at": "2013-09-12T17:30:11Z",
    "body": "Meta-bug is milestoned. Denominating this one.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24339893/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24761146",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-24761146",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 24761146,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NzYxMTQ2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-19T18:13:58Z",
    "updated_at": "2013-09-19T18:13:58Z",
    "body": "Nominating for the \"priority\" label and also to de-milestone the metabug while milestoning this one instead.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24761146/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24762188",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-24762188",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 24762188,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NzYyMTg4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-19T18:28:17Z",
    "updated_at": "2013-09-19T18:28:17Z",
    "body": "I just closed a few issues that I believe will be wontfix or fixed as determined by the outcome of this issue. After reviewing the various use-cases, I'm not entirely sure that my previous set of rules is actually the best thing to follow. Especially with @bblum's and @aatch's comments, I would actually be in favor of @bblum's suggestion, written down as:\n1. All items are private by default, with the exception of struct fields. To flag an item as public, you use pub. Also pub is not allowed on impl or extern (visibility is determined by each item individually).\n2. For a path which is a cross-crate reference, it is only valid if every item in the path is marked as pub (including modules)\n3. Inside a crate, you can use any member from any location if the destination is flagged as `pub` (regardless of intermediate visibility).\n4. Inside a module, you can use anything within that module (regardless of being public or private).\n\nI am coming to prefer these rules because not only are they simple to implement, but they are simpler to understand and also work with. If this set of rules is agreed upon, I will update the issue text at the top to avoid later confusion over what should get implemented.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24762188/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24797044",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-24797044",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 24797044,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0Nzk3MDQ0",
    "user": {
      "login": "Kimundi",
      "id": 2903206,
      "node_id": "MDQ6VXNlcjI5MDMyMDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2903206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kimundi",
      "html_url": "https://github.com/Kimundi",
      "followers_url": "https://api.github.com/users/Kimundi/followers",
      "following_url": "https://api.github.com/users/Kimundi/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kimundi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kimundi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kimundi/subscriptions",
      "organizations_url": "https://api.github.com/users/Kimundi/orgs",
      "repos_url": "https://api.github.com/users/Kimundi/repos",
      "events_url": "https://api.github.com/users/Kimundi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kimundi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-20T08:45:45Z",
    "updated_at": "2013-09-20T08:45:45Z",
    "body": "1+ for those rules.\n- Is it public? - Reachable anywhere in the crate\n- Is every item on it's path public? - Reachable anywhere outside the crate.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24797044/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24849763",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-24849763",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 24849763,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0ODQ5NzYz",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-21T00:00:17Z",
    "updated_at": "2013-09-21T00:00:17Z",
    "body": "Also +1 for those new rules. Much simpler than the initial ruleset, and makes it easy to express exactly what I want.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24849763/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25015355",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-25015355",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 25015355,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MDE1MzU1",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-24T15:30:59Z",
    "updated_at": "2013-09-24T15:30:59Z",
    "body": "I think there are some more edge cases here (especially from the view of generating documentation). Currently:\n- `pub use` allows one to reexport things that are otherwise inaccessible\n- a public function can return a private struct (and this can even have public fields that are accessible externally)\n\ne.g.\n\n``` rust\n// other.rs\npub use self::bar::baz;\n\npub mod foo {\n\n    struct Foo { x: int }\n    pub fn mk_foo() -> Foo { Foo { x: 1 } }\n\n}\n\nmod bar { pub fn baz() { println(\"escaped!!\") } }\n```\n\n``` rust\nextern mod other;\n\nfn main() {\n    // other::baz(); // fails with a link-time error, *not* a compile time one\n    println!(\"{}\", other::foo::mk_foo().x);\n}\n```\n\nI imagine that tightening these would be required too.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25015355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25020687",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-25020687",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 25020687,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MDIwNjg3",
    "user": {
      "login": "Kimundi",
      "id": 2903206,
      "node_id": "MDQ6VXNlcjI5MDMyMDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2903206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kimundi",
      "html_url": "https://github.com/Kimundi",
      "followers_url": "https://api.github.com/users/Kimundi/followers",
      "following_url": "https://api.github.com/users/Kimundi/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kimundi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kimundi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kimundi/subscriptions",
      "organizations_url": "https://api.github.com/users/Kimundi/orgs",
      "repos_url": "https://api.github.com/users/Kimundi/repos",
      "events_url": "https://api.github.com/users/Kimundi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kimundi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-24T16:33:02Z",
    "updated_at": "2013-09-24T16:41:37Z",
    "body": "Hm, in case of documentation I see basically two cases:\n- The type returned from a function/ `pub use`d is also externally visibly over its canonical path.  \n  Then both should link to the doc page of the type in the crate it lives in (might mean linking to docs of a different crate)\n- The type returned from a function/ `pub use`d is not externally visible over its canonical path.  \n  Then the doc tool should emit a \"orphan\" page for that type, only accessible from the `pub use` or function return value links. This page should not contain any mention of the canonical path of the type, because as far as the public api is designed, it doesn't have on, only explicit or implicit aliases to it. (This also means not encoding the path in the url)\n\nOf course, the question is if we should allow returning not-externally-public types from externally-public functions at all.\n\nIf yes, then I claim the same rules should apply as if it where `pub use`d or regularly public: All neccessary symbols get exported as public, things need to be documented if the lint is set for that, etc, you'd just not be able to refer to them with their canonical path, as not all layers in it would be public.\n\nAlso note that you might get the type of an return value with an hypothetical `typeof` operator in the future. (That's what this operator usually is for, right?)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25020687/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25185325",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-25185325",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 25185325,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MTg1MzI1",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-26T17:10:06Z",
    "updated_at": "2013-09-26T17:10:06Z",
    "body": "Accepted for well-defined\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25185325/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25291308",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-25291308",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 25291308,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjkxMzA4",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-28T05:45:18Z",
    "updated_at": "2013-09-28T05:45:18Z",
    "body": "@alexcrichton I like the rules, but it's worth noting that these proposed rules means a `mod tests` cannot include unit tests for private items. Similarly, a module cannot privately provide common functionality to its sub-modules.\n\nI seem to recall an earlier proposal was that a module had access to all of its direct parent's priv items as well. This would solve these concerns, though I don't know if it's worth the complexity.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25291308/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25307731",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-25307731",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 25307731,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MzA3NzMx",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-28T20:24:58Z",
    "updated_at": "2013-09-30T09:40:10Z",
    "body": "As an update on this, I was talking with @nikomatsakis and he's enlightened me as to what the intended privacy rules actually should be. The idea behind the intended rules were:\n1. You can use anything `pub` from the top to the desired item.\n2. You can use any `priv` item of yourself and your ancestors.\n\nThe first rule is fairly obvious, but the second rule is a little bit more subtle. What this means is that you can use any number of \"helper modules\" in your ancestry. It doesn't mean that you can use _anything_ in a helper module, it just means that you can look into your ancestor's private modules. At that point anything you use must be `pub` all the way down.\n\nThis encompasses the `mod test` case because the relevant module you're testing is in your ancestry and you can access anything private from it. It also encompasses the \"helper module\" use case because the helper module is in the ancestry of all common modules.\n\nI've got a branch-in-progress to refine the current system. My idea was to completely rip out privacy from resolve and put it all in the privacy passes. This should yield better error messages and be more maintainable in the future. I'm mostly doing this as a guinea-pig type situation to make sure that this works out.\n\nI've come to like the second rule, though, as it makes sense to me and it seems to encompass almost all use cases.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25307731/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25398265",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-25398265",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 25398265,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1Mzk4MjY1",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-30T19:48:18Z",
    "updated_at": "2013-09-30T19:48:18Z",
    "body": "This might fall under item 2. already, but I just noticed that if you do something like:\n\nquux/lib.rs:\n\n```\nmod foo;\n```\n\nquux/foo.rs:\n\n```\nimpl Bar {\n    pub fn whatever() // ...\n}\n```\n\nand then in a different crate `foo`, if you write:\n\n```\nextern mod quux;\n\n...x.whatever()...\n```\n\nThis will successfully compile, when it shouldn't. But if you run the executable compiled with `foo`, you get a dynamic link error since the symbol `whatever` isn't known. Instead, it should be a compile-type error saying that `quux`'s `foo` module is private.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25398265/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25420622",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-25420622",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 25420622,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NDIwNjIy",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-01T01:48:08Z",
    "updated_at": "2013-10-01T01:48:08Z",
    "body": "@catamorphism why do you say that `x.whatever()` should not work? I at least expect `pub` methods to be available from any module -- they don't fall under the same lexical scope rules (note that you don't have to import them either)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25420622/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25422010",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-25422010",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 25422010,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NDIyMDEw",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-01T02:34:46Z",
    "updated_at": "2013-10-01T02:34:46Z",
    "body": "@nikomatsakis That seems weird to me (I would expect that nothing declared in a private module would be visible from another crate), but I wouldn't object to it. In that case, of course, the result should run without a dynamic loader error :-)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25422010/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25437492",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-25437492",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 25437492,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NDM3NDky",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-01T09:58:10Z",
    "updated_at": "2013-10-01T09:58:10Z",
    "body": "@catamorphism yes, certainly. As for the matter of priv vs pub, I can certainly see your reasoning, it's an interesting difference between methods and items I hadn't thought too about before. From the standpoint of the *module that declares the method/item, there is little difference: `priv` means \"only usable from code within this module or submodules\" and `pub` means \"usable by outside code\". But from the POV of some outer module, the visibility of items can be further controlled, whereas methods can not. I'm not sure if this is a bad thing, but in any case I don't know if anything can be done about it -- since methods are not imported, so there is no obvious \"path\" to the private module that we can check (it might, for example, be exported via a `pub use` etc). \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25437492/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/135078541",
    "html_url": "https://github.com/rust-lang/rust/issues/8215#issuecomment-135078541",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8215",
    "id": 135078541,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNTA3ODU0MQ==",
    "user": {
      "login": "lilith",
      "id": 107935,
      "node_id": "MDQ6VXNlcjEwNzkzNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/107935?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilith",
      "html_url": "https://github.com/lilith",
      "followers_url": "https://api.github.com/users/lilith/followers",
      "following_url": "https://api.github.com/users/lilith/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilith/subscriptions",
      "organizations_url": "https://api.github.com/users/lilith/orgs",
      "repos_url": "https://api.github.com/users/lilith/repos",
      "events_url": "https://api.github.com/users/lilith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilith/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-26T15:57:10Z",
    "updated_at": "2015-08-26T15:57:10Z",
    "body": "So is it correct that if you implement a public function on a private struct, and call the function from an external crate, the compiler tells you that the function is private? Or should the compiler clarify that the struct is private?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/135078541/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
