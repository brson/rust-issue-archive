{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/14014",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/14014/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/14014/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/14014/events",
  "html_url": "https://github.com/rust-lang/rust/pull/14014",
  "id": 32978424,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTU1OTEyNDI=",
  "number": 14014,
  "title": "Fix `make check-stage2` by fixing deps of exported syntax cfail tests.",
  "user": {
    "login": "pnkfelix",
    "id": 173127,
    "node_id": "MDQ6VXNlcjE3MzEyNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pnkfelix",
    "html_url": "https://github.com/pnkfelix",
    "followers_url": "https://api.github.com/users/pnkfelix/followers",
    "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
    "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
    "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
    "repos_url": "https://api.github.com/users/pnkfelix/repos",
    "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 4,
  "created_at": "2014-05-07T11:59:30Z",
  "updated_at": "2014-07-15T03:58:51Z",
  "closed_at": "2014-05-07T15:27:45Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/14014",
    "html_url": "https://github.com/rust-lang/rust/pull/14014",
    "diff_url": "https://github.com/rust-lang/rust/pull/14014.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/14014.patch",
    "merged_at": null
  },
  "body": "Our `make check-stageN` for all N (including N=2) was not working,\nbecause there is an unspecified dependence from the cfail tests on\ncertain crates that export syntax.\n\nWe need to encode that dependence in some manner.  The quick hack is\nto add `$$(CSREQ$(1)_T_$(3)_H_$(3)) $$(SREQ$(1)_T_$(2)_H_$(3))` to the\ndependency list for _all_ of the cfail tests.  But I would prefer to\nnot force the make logic to build all of the external crates before it\ngets to exercise the cfail tests.\n\nSo, here is how this PR fixes the problem more properly:\n- Add `CTEST_DEPS_cfail-full` that, analogous to\n  `CTEST_DEPS_rpass-full`, has a dependency on\n  `$$(CSREQ$(1)_T_$(3)_H_$(3)) $$(SREQ$(1)_T_$(2)_H_$(3))`.\n  `CTEST_DEPS_cfail` is left unchanged (and thus continues to\n  match the structure of `CTEST_DEPS_rpass`).\n- Added all of the other ingredients for `cfail-full` family of make\n  logic.\n- moved cfail tests that rely on macros in separate crates to\n  separate compile-fail-fulldeps/ directory.\n\n---\n\n(Landing this may or not be a prerequisite for landing PR #14000.  In\nany case, this is a pretty isolated change and a net improvement in\nthe overall structure for the tests, IMO, at least given what we\ncurrently have in the makefiles.)\n",
  "closed_by": {
    "login": "pnkfelix",
    "id": 173127,
    "node_id": "MDQ6VXNlcjE3MzEyNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pnkfelix",
    "html_url": "https://github.com/pnkfelix",
    "followers_url": "https://api.github.com/users/pnkfelix/followers",
    "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
    "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
    "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
    "repos_url": "https://api.github.com/users/pnkfelix/repos",
    "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/14014/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/14014/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
