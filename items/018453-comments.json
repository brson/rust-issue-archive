[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61056725",
    "html_url": "https://github.com/rust-lang/rust/issues/18453#issuecomment-61056725",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18453",
    "id": 61056725,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMDU2NzI1",
    "user": {
      "login": "carllerche",
      "id": 6180,
      "node_id": "MDQ6VXNlcjYxODA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6180?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carllerche",
      "html_url": "https://github.com/carllerche",
      "followers_url": "https://api.github.com/users/carllerche/followers",
      "following_url": "https://api.github.com/users/carllerche/following{/other_user}",
      "gists_url": "https://api.github.com/users/carllerche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carllerche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carllerche/subscriptions",
      "organizations_url": "https://api.github.com/users/carllerche/orgs",
      "repos_url": "https://api.github.com/users/carllerche/repos",
      "events_url": "https://api.github.com/users/carllerche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carllerche/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-30T08:03:28Z",
    "updated_at": "2014-10-30T08:03:28Z",
    "body": "For what it is worth, I was wondering if the Sync requirement was the problem, but it did not seem to be. The following produces the same error. Note the addition of UnsafeCell and the removal of the Sync bound.\n\n``` rust\n#![feature(unboxed_closures)]\n\nuse std::cell::UnsafeCell;\nuse std::sync::Arc;\n\npub trait Foo<M: Send> : Send {\n    fn foo(&mut self, msg: M);\n}\n\nimpl<M: Send, F: Send + FnMut(M)> Foo<M> for F {\n    fn foo(&mut self, msg: M) {\n        self.call_mut((msg,));\n    }\n}\n\npub struct Both<M, F> {\n    inner: Arc<UnsafeCell<(M, F)>>,\n}\n\nimpl<M: Send, F: Foo<M>> Clone for Both<M, F> {\n    fn clone(&self) -> Both<M, F> {\n        Both { inner: self.inner.clone() }\n    }\n}\n\nfn repro1<M: Send, F: Foo<M>>(_both: Both<M, F>) {\n}\n\nfn repro2<M: Send, F: Foo<M>>(msg: M, foo: F) {\n    let both = Both { inner: Arc::new(UnsafeCell::new((msg, foo))) };\n    repro1(both.clone()); // <--- This clone causes problem\n}\n\npub fn main() {\n    println!(\"hello\");\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61056725/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61117090",
    "html_url": "https://github.com/rust-lang/rust/issues/18453#issuecomment-61117090",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18453",
    "id": 61117090,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTE3MDkw",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-30T15:58:00Z",
    "updated_at": "2014-10-30T15:58:00Z",
    "body": "Maybe a dup of https://github.com/rust-lang/rust/issues/16929\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61117090/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61117199",
    "html_url": "https://github.com/rust-lang/rust/issues/18453#issuecomment-61117199",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18453",
    "id": 61117199,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTE3MTk5",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-30T15:58:35Z",
    "updated_at": "2014-10-30T15:58:35Z",
    "body": "or maybe not\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61117199/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61117865",
    "html_url": "https://github.com/rust-lang/rust/issues/18453#issuecomment-61117865",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18453",
    "id": 61117865,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTE3ODY1",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-30T16:02:12Z",
    "updated_at": "2014-10-30T16:02:12Z",
    "body": "cc me -- not clear to me that this is related to unboxed closures, though it might have to do with the semi-special treatment that `FnMut` receives in trait matching\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61117865/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61118026",
    "html_url": "https://github.com/rust-lang/rust/issues/18453#issuecomment-61118026",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18453",
    "id": 61118026,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTE4MDI2",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-30T16:03:06Z",
    "updated_at": "2014-10-30T16:03:06Z",
    "body": "I suspect what's happening is that the trait matching logic that chooses impls over where clauses is making an incorrect choice here.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61118026/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61418277",
    "html_url": "https://github.com/rust-lang/rust/issues/18453#issuecomment-61418277",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18453",
    "id": 61418277,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNDE4Mjc3",
    "user": {
      "login": "carllerche",
      "id": 6180,
      "node_id": "MDQ6VXNlcjYxODA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6180?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carllerche",
      "html_url": "https://github.com/carllerche",
      "followers_url": "https://api.github.com/users/carllerche/followers",
      "following_url": "https://api.github.com/users/carllerche/following{/other_user}",
      "gists_url": "https://api.github.com/users/carllerche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carllerche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carllerche/subscriptions",
      "organizations_url": "https://api.github.com/users/carllerche/orgs",
      "repos_url": "https://api.github.com/users/carllerche/repos",
      "events_url": "https://api.github.com/users/carllerche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carllerche/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-02T18:48:53Z",
    "updated_at": "2014-11-02T18:48:53Z",
    "body": "Just so that I can find it again, PR #18388 adds blanket impls to allow the various Fn traits to be interconverted.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61418277/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
