[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/163973296",
    "html_url": "https://github.com/rust-lang/rust/issues/28308#issuecomment-163973296",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28308",
    "id": 163973296,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2Mzk3MzI5Ng==",
    "user": {
      "login": "jld",
      "id": 254973,
      "node_id": "MDQ6VXNlcjI1NDk3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/254973?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jld",
      "html_url": "https://github.com/jld",
      "followers_url": "https://api.github.com/users/jld/followers",
      "following_url": "https://api.github.com/users/jld/following{/other_user}",
      "gists_url": "https://api.github.com/users/jld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jld/subscriptions",
      "organizations_url": "https://api.github.com/users/jld/orgs",
      "repos_url": "https://api.github.com/users/jld/repos",
      "events_url": "https://api.github.com/users/jld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jld/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-11T15:56:24Z",
    "updated_at": "2015-12-11T15:56:24Z",
    "body": "I ran into this by accidentally typing `assert!` instead of `assert_eq!` too early in the morning, so I did some `git grep` and experimenting, and I think I know what's happening here: this is a `SpanLinesError::DistinctSources`, because `assert!` expands to `if !$cond { ... }`, so the compiler wants to complain about `!$cond`, and it sees that that expression starts at the `!` in `libcore/macros.rs` and ends at the end of\u2026 the expression given as the `$cond` argument to the macro in the code being compiled.\n\nThere's an easier way to see this:\n\n``` Rust\n#![allow(unused_parens)]\nmacro_rules! my_assert1 { ($e:expr) => { if !$e { panic!() } } }\nmacro_rules! my_assert2 { ($e:expr) => { if !($e) { panic!() } } }\n// Meaningless text goes here\n// And some more meaningless text\nfn main() {\n   my_assert2!(\"test\");\n}\n```\n\nThis fails nicely:\n\n```\nissue28308.rs:3:45: 3:50 error: cannot apply unary operator `!` to type `&'static str`\nissue28308.rs:3 macro_rules! my_assert2 { ($e:expr) => { if !($e) { panic!() } } }\n                                                            ^~~~~\nissue28308.rs:7:4: 7:24 note: in this expansion of my_assert2! (defined in issue28308.rs)\n```\n\nBut change the last part to `my_assert1!`:\n\n```\nissue28308.rs:2:45: 7:22 error: cannot apply unary operator `!` to type `&'static str`\nissue28308.rs:2 macro_rules! my_assert1 { ($e:expr) => { if !$e { panic!() } } }\nissue28308.rs:3 macro_rules! my_assert2 { ($e:expr) => { if !($e) { panic!() } } }\nissue28308.rs:4 // Meaningless text goes here\nissue28308.rs:5 // And some more meaningless text\nissue28308.rs:6 fn main() {\nissue28308.rs:7    my_assert1!(\"test\");\nissue28308.rs:7:4: 7:24 note: in this expansion of my_assert1! (defined in issue28308.rs)\n```\n\nAlternately, with a macro variable at the start of an offending expression, like this:\n\n``` Rust\nmacro_rules! as_isize { ($e:expr) => { $e as isize } }\nfn main() { as_isize!(\"test\"); }\n```\n\n\u2026we get the other kind of unprintable span, where the beginning is after the end:\n\n```\nissue28308alt.rs:2:23: 1:51 error: casting `&'static str` as `isize` is invalid\n(internal compiler error: unprintable span)\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/163973296/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/163976041",
    "html_url": "https://github.com/rust-lang/rust/issues/28308#issuecomment-163976041",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28308",
    "id": 163976041,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2Mzk3NjA0MQ==",
    "user": {
      "login": "jld",
      "id": 254973,
      "node_id": "MDQ6VXNlcjI1NDk3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/254973?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jld",
      "html_url": "https://github.com/jld",
      "followers_url": "https://api.github.com/users/jld/followers",
      "following_url": "https://api.github.com/users/jld/following{/other_user}",
      "gists_url": "https://api.github.com/users/jld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jld/subscriptions",
      "organizations_url": "https://api.github.com/users/jld/orgs",
      "repos_url": "https://api.github.com/users/jld/repos",
      "events_url": "https://api.github.com/users/jld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jld/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-11T16:07:49Z",
    "updated_at": "2015-12-11T16:07:49Z",
    "body": "It looks like #25385 already discovered that last one.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/163976041/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
