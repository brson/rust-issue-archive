[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68267722",
    "html_url": "https://github.com/rust-lang/rust/issues/20174#issuecomment-68267722",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20174",
    "id": 68267722,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjY3NzIy",
    "user": {
      "login": "pfalabella",
      "id": 1331706,
      "node_id": "MDQ6VXNlcjEzMzE3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1331706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pfalabella",
      "html_url": "https://github.com/pfalabella",
      "followers_url": "https://api.github.com/users/pfalabella/followers",
      "following_url": "https://api.github.com/users/pfalabella/following{/other_user}",
      "gists_url": "https://api.github.com/users/pfalabella/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pfalabella/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pfalabella/subscriptions",
      "organizations_url": "https://api.github.com/users/pfalabella/orgs",
      "repos_url": "https://api.github.com/users/pfalabella/repos",
      "events_url": "https://api.github.com/users/pfalabella/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pfalabella/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-29T15:42:45Z",
    "updated_at": "2014-12-29T15:42:45Z",
    "body": "I thought this was due to what @japaric says in [this comment](https://github.com/rust-lang/rust/issues/20193#issuecomment-68050790), but it's not.\nEven changing the declaration of the closure to use |&: |, to make sure the compiler sees it as an unboxed closure, like this:\n\n``` rust\n#![feature(unboxed_closures)]\nstruct GradFn<F: Fn() -> uint>(F);\n\nfn main() {\n    let g = GradFn(|&:| 2u);\n    let GradFn(f) = g; // LLVM error\n    println!(\"{}\", f.call(()));\n}\n```\n\nI get the same LLVM error.\nNote that a struct with one named element, instead of the newtype, works as expected:\n\n``` rust\n#![feature(unboxed_closures)]\nstruct GradFn<F: Fn() -> uint> {f: F} // just named the element\n\nfn main() {\n    let g = GradFn{f: |&:| 2u };\n    let GradFn { f } = g; // destructuring instead of accessing the element by name\n                                   // to keep code as similar as possible as the previous one \n    println!(\"{}\", f.call(())); // compiles and prints 2   \n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68267722/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73421149",
    "html_url": "https://github.com/rust-lang/rust/issues/20174#issuecomment-73421149",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20174",
    "id": 73421149,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDIxMTQ5",
    "user": {
      "login": "zslayton",
      "id": 611616,
      "node_id": "MDQ6VXNlcjYxMTYxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/611616?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zslayton",
      "html_url": "https://github.com/zslayton",
      "followers_url": "https://api.github.com/users/zslayton/followers",
      "following_url": "https://api.github.com/users/zslayton/following{/other_user}",
      "gists_url": "https://api.github.com/users/zslayton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zslayton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zslayton/subscriptions",
      "organizations_url": "https://api.github.com/users/zslayton/orgs",
      "repos_url": "https://api.github.com/users/zslayton/repos",
      "events_url": "https://api.github.com/users/zslayton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zslayton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-08T17:31:10Z",
    "updated_at": "2015-02-08T17:31:10Z",
    "body": "I'm running into this issue as well. As an additional data point, I wanted to mention that the destructuring appears to work fine if the closure that's supplied to the struct is declared in advance.\n\nFor example:\n\n``` rust\nstruct GradFn<F: Fn() -> usize>(F);\n\nfn main() {\n    let grad_fn = || -> usize { 2us };\n    let GradFn(x_squared) : GradFn<_> = GradFn(grad_fn);\n    let _  = x_squared();\n}\n```\n\n[Playpen](http://is.gd/rWpAC3)\n\nVersion information:\n\n```\n$ rustc --version --verbose\nrustc 1.0.0-nightly (74b874071 2015-02-08 00:24:03 +0000)\nbinary: rustc\ncommit-hash: 74b8740719c1b427f79b67d6bc51e9d448dd9c49\ncommit-date: 2015-02-08 00:24:03 +0000\nhost: x86_64-unknown-linux-gnu\nrelease: 1.0.0-nightly\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73421149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75992165",
    "html_url": "https://github.com/rust-lang/rust/issues/20174#issuecomment-75992165",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20174",
    "id": 75992165,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1OTkyMTY1",
    "user": {
      "login": "pfalabella",
      "id": 1331706,
      "node_id": "MDQ6VXNlcjEzMzE3MDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1331706?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pfalabella",
      "html_url": "https://github.com/pfalabella",
      "followers_url": "https://api.github.com/users/pfalabella/followers",
      "following_url": "https://api.github.com/users/pfalabella/following{/other_user}",
      "gists_url": "https://api.github.com/users/pfalabella/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pfalabella/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pfalabella/subscriptions",
      "organizations_url": "https://api.github.com/users/pfalabella/orgs",
      "repos_url": "https://api.github.com/users/pfalabella/repos",
      "events_url": "https://api.github.com/users/pfalabella/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pfalabella/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-25T16:25:57Z",
    "updated_at": "2015-02-25T16:25:57Z",
    "body": "this is now working correctly for me (on c4fe7d6ae 2015-02-23)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/75992165/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/96104069",
    "html_url": "https://github.com/rust-lang/rust/issues/20174#issuecomment-96104069",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20174",
    "id": 96104069,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk2MTA0MDY5",
    "user": {
      "login": "frewsxcv",
      "id": 416575,
      "node_id": "MDQ6VXNlcjQxNjU3NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/416575?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frewsxcv",
      "html_url": "https://github.com/frewsxcv",
      "followers_url": "https://api.github.com/users/frewsxcv/followers",
      "following_url": "https://api.github.com/users/frewsxcv/following{/other_user}",
      "gists_url": "https://api.github.com/users/frewsxcv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frewsxcv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frewsxcv/subscriptions",
      "organizations_url": "https://api.github.com/users/frewsxcv/orgs",
      "repos_url": "https://api.github.com/users/frewsxcv/repos",
      "events_url": "https://api.github.com/users/frewsxcv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frewsxcv/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-25T00:06:03Z",
    "updated_at": "2015-04-25T00:06:03Z",
    "body": "All of the codeblocks in this issue are working for me with 1.0 beta2. Can this be closed?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/96104069/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
