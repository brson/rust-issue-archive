[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51361609",
    "html_url": "https://github.com/rust-lang/rust/issues/13623#issuecomment-51361609",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13623",
    "id": 51361609,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzYxNjA5",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-06T16:38:45Z",
    "updated_at": "2014-08-06T16:38:45Z",
    "body": "Note that a lot of the notes in the bug description above may be out-of-date since the `deriving` code generation strategy has changed in #15503\n\n(However, the strategy from #15503 was only addressing an asymptotic performance issue, not micro-optimization of the resulting code in the manner outlined in the bug described here.  Basically someone should go through and check how bad the code generation is now, and look over the follow-on bugs linked from #15503 to see if the other changes that we should consider making could also help in this specific case.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51361609/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51455694",
    "html_url": "https://github.com/rust-lang/rust/issues/13623#issuecomment-51455694",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13623",
    "id": 51455694,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDU1Njk0",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-07T10:35:53Z",
    "updated_at": "2014-08-07T10:35:53Z",
    "body": "IR and asm results are pretty much the same. The only thing that got better is related to bool-as-i1, the zero-extending is gone.\n\nExpanded code:\n\n``` rust\npub enum Foo { A1, A2, A3, }\n#[automatically_derived]\nimpl ::std::cmp::PartialEq for Foo {\n    #[inline]\n    fn eq(&self, __arg_0: &Foo) -> ::bool {\n        match (&*self, &*__arg_0) {\n            (&A1, &A1) => true,\n            (&A2, &A2) => true,\n            (&A3, &A3) => true,\n            _ => {\n                let __self_vi =\n                    match *self { A1(..) => 0u, A2(..) => 1u, A3(..) => 2u, };\n                let __arg_1_vi =\n                    match *__arg_0 {\n                        A1(..) => 0u,\n                        A2(..) => 1u,\n                        A3(..) => 2u,\n                    };\n                false\n            }\n        }\n    }\n    #[inline]\n    fn ne(&self, __arg_0: &Foo) -> ::bool {\n        match (&*self, &*__arg_0) {\n            (&A1, &A1) => false,\n            (&A2, &A2) => false,\n            (&A3, &A3) => false,\n            _ => {\n                let __self_vi =\n                    match *self { A1(..) => 0u, A2(..) => 1u, A3(..) => 2u, };\n                let __arg_1_vi =\n                    match *__arg_0 {\n                        A1(..) => 0u,\n                        A2(..) => 1u,\n                        A3(..) => 2u,\n                    };\n                true\n            }\n        }\n    }\n}\n```\n\nOptimized IR for `eq`:\n\n``` llvm\ndefine zeroext i1 @_ZN25Foo...std..cmp..PartialEq2eq20h0918b2157c9512e2laaE(i8* noalias nocapture readonly dereferenceable(1), i8* noalias nocapture readonly dereferenceable(1)) unnamed_addr #0 {\nentry-block:\n  %2 = load i8* %0, align 1, !range !0\n  switch i8 %2, label %case_body3 [\n    i8 0, label %match_case\n    i8 1, label %match_case6\n    i8 2, label %match_case9\n  ]\n\ncase_body3:                                       ; preds = %match_case9, %match_case6, %match_case, %entry-block\n  br label %join25\n\nmatch_case:                                       ; preds = %entry-block\n  %3 = load i8* %1, align 1, !range !0\n  %cond27 = icmp eq i8 %3, 0\n  br i1 %cond27, label %join25, label %case_body3\n\nmatch_case6:                                      ; preds = %entry-block\n  %4 = load i8* %1, align 1, !range !0\n  %cond26 = icmp eq i8 %4, 1\n  br i1 %cond26, label %join25, label %case_body3\n\nmatch_case9:                                      ; preds = %entry-block\n  %5 = load i8* %1, align 1, !range !0\n  %cond = icmp eq i8 %5, 2\n  br i1 %cond, label %join25, label %case_body3\n\njoin25:                                           ; preds = %match_case9, %match_case6, %match_case, %case_body3\n  %__make_return_pointer.0 = phi i1 [ false, %case_body3 ], [ true, %match_case ], [ true, %match_case6 ], [ true, %match_case9 ]\n  ret i1 %__make_return_pointer.0\n}\n```\n\nOptimized assembler for `eq`:\n\n``` asm\n    .section    .text._ZN25Foo...std..cmp..PartialEq2eq20h0918b2157c9512e2laaE,\"ax\",@progbits\n    .globl  _ZN25Foo...std..cmp..PartialEq2eq20h0918b2157c9512e2laaE\n    .align  16, 0x90\n    .type   _ZN25Foo...std..cmp..PartialEq2eq20h0918b2157c9512e2laaE,@function\n_ZN25Foo...std..cmp..PartialEq2eq20h0918b2157c9512e2laaE:\n    .cfi_startproc\n    movb    (%rdi), %al\n    testb   %al, %al\n    je  .LBB0_4\n    movzbl  %al, %eax\n    cmpl    $1, %eax\n    jne .LBB0_2\n    movzbl  (%rsi), %ecx\n    movb    $1, %al\n    cmpl    $1, %ecx\n    jne .LBB0_3\n    jmp .LBB0_7\n.LBB0_4:\n    movb    $1, %al\n    cmpb    $0, (%rsi)\n    jne .LBB0_3\n    jmp .LBB0_7\n.LBB0_2:\n    cmpl    $2, %eax\n    jne .LBB0_3\n    movb    $1, %al\n    movzbl  (%rsi), %ecx\n    cmpl    $2, %ecx\n    jne .LBB0_3\n.LBB0_7:\n    retq\n.LBB0_3:\n    xorl    %eax, %eax\n    retq\n.Ltmp0:\n    .size   _ZN25Foo...std..cmp..PartialEq2eq20h0918b2157c9512e2laaE, .Ltmp0-_ZN25Foo...std..cmp..PartialEq2eq20h0918b2157c9512e2laaE\n    .cfi_endproc\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51455694/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97965142",
    "html_url": "https://github.com/rust-lang/rust/issues/13623#issuecomment-97965142",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13623",
    "id": 97965142,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk3OTY1MTQy",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-30T21:01:12Z",
    "updated_at": "2015-04-30T21:01:12Z",
    "body": "Triage: I am an llvm-ir noob, but \n\n```\n$ rustc hello.rs --pretty=expanded -Z unstable-options\n#![feature(no_std)]\n#![no_std]\n#[prelude_import]\nuse std::prelude::v1::*;\n#[macro_use]\nextern crate std as std;\npub enum Foo { A1, A2, A3, }\n#[automatically_derived]\nimpl ::std::cmp::Eq for Foo {\n    #[inline]\n    #[doc(hidden)]\n    fn assert_receiver_is_total_eq(&self) -> () {\n        match (&*self,) {\n            (&Foo::A1,) => { }\n            (&Foo::A2,) => { }\n            (&Foo::A3,) => { }\n        }\n    }\n}\n#[automatically_derived]\nimpl ::std::cmp::PartialEq for Foo {\n    #[inline]\n    fn eq(&self, __arg_0: &Foo) -> bool {\n        match (&*self, &*__arg_0) {\n            (&Foo::A1, &Foo::A1) => true,\n            (&Foo::A2, &Foo::A2) => true,\n            (&Foo::A3, &Foo::A3) => true,\n            _ => {\n                let __self_vi =\n                    unsafe { ::std::intrinsics::discriminant_value(&*self) }\n                        as i32;\n                let __arg_1_vi =\n                    unsafe {\n                        ::std::intrinsics::discriminant_value(&*__arg_0)\n                    } as i32;\n                false\n            }\n        }\n    }\n    #[inline]\n    fn ne(&self, __arg_0: &Foo) -> bool {\n        match (&*self, &*__arg_0) {\n            (&Foo::A1, &Foo::A1) => false,\n            (&Foo::A2, &Foo::A2) => false,\n            (&Foo::A3, &Foo::A3) => false,\n            _ => {\n                let __self_vi =\n                    unsafe { ::std::intrinsics::discriminant_value(&*self) }\n                        as i32;\n                let __arg_1_vi =\n                    unsafe {\n                        ::std::intrinsics::discriminant_value(&*__arg_0)\n                    } as i32;\n                true\n            }\n        }\n    }\n}\n\nfn main() { }\n```\n\nWe're now using the `discriminant_value` intrinsic. So maybe this ticket should be closed?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97965142/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97973519",
    "html_url": "https://github.com/rust-lang/rust/issues/13623#issuecomment-97973519",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13623",
    "id": 97973519,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk3OTczNTE5",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-30T21:26:44Z",
    "updated_at": "2015-04-30T21:26:44Z",
    "body": "No, this still generates awful IR/asm. LLVM can only make use of the extra information if the comparison using the intrinsic happens before the match, which is not the case.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97973519/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97986143",
    "html_url": "https://github.com/rust-lang/rust/issues/13623#issuecomment-97986143",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13623",
    "id": 97986143,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk3OTg2MTQz",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-30T22:15:19Z",
    "updated_at": "2015-04-30T22:15:19Z",
    "body": "I bet we can revise the deriving code to extract those discriminant values more eagerly.\n\nEven [my original proposal](https://github.com/rust-lang/rust/issues/15375#issuecomment-47994007) indicated that we should do\n\n``` rust\nlet discrim_self = ...;\nlet discrim_arg_0 = ...;\n```\n\nat the outset, before the `match`.\n\nThe current code isn't doing that, largely due to historical artifacts (i.e. I was trying to land the fix for quadratic blowup long before we had approved the addition of the discriminant value intrinsic).  But I bet it might not be too hard to make it start doing it now.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97986143/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97987219",
    "html_url": "https://github.com/rust-lang/rust/issues/13623#issuecomment-97987219",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13623",
    "id": 97987219,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk3OTg3MjE5",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-30T22:17:24Z",
    "updated_at": "2015-04-30T22:18:36Z",
    "body": "and also ... what the heck is going on in that code that @steveklabnik posted?  Are we really extracting the discriminant value but then never using it?  what the ...\n\nUpdate: Oh, right: that's an artifact of how the `deriving` implementation uses the same code generator for many (all?) of the derived forms: so even though we do not us the extracted discriminant value in `Eq`, we _do_ use it e.g. for `Ord`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97987219/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/136700526",
    "html_url": "https://github.com/rust-lang/rust/issues/13623#issuecomment-136700526",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13623",
    "id": 136700526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNjcwMDUyNg==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-01T12:38:23Z",
    "updated_at": "2015-09-01T12:38:23Z",
    "body": "C-like enums optimize well now, but others still generate sub-optimal code, especially at the IR leve.\n\nExample:\n\n``` rust\n#[derive(PartialEq)]\nenum E {\n  A(i32),\n  B(i32),\n  C(i32),\n  D(i32),\n  A1(i32),\n  B1(i32),\n  C1(i32),\n  D1(i32),\n}\n```\n\nIR:\n\n``` llvm\ndefine zeroext i1 @_ZN23E...std..cmp..PartialEq2eq20h8d48eb51e9008df6FaaE(%E* noalias nocapture readonly dereferenceable(8), %E* noalias nocapture readonly dereferenceable(8)) unnamed_addr #0 {\nentry-block:\n  %2 = getelementptr inbounds %E, %E* %0, i64 0, i32 0\n  %3 = load i32, i32* %2, align 4\n  %4 = getelementptr inbounds %E, %E* %1, i64 0, i32 0\n  %5 = load i32, i32* %4, align 4, !range !0\n  %6 = icmp eq i32 %3, %5\n  br i1 %6, label %then-block-74-, label %join63\n\nthen-block-74-:                                   ; preds = %entry-block\n  switch i32 %3, label %match_else [\n    i32 0, label %match_case\n    i32 1, label %match_case25\n    i32 2, label %match_case28\n    i32 3, label %match_case31\n    i32 4, label %match_case34\n    i32 5, label %match_case37\n    i32 6, label %match_case40\n    i32 7, label %match_case43\n  ]\n\nmatch_else:                                       ; preds = %then-block-74-\n  unreachable\n\nmatch_case:                                       ; preds = %then-block-74-\n  %7 = getelementptr inbounds %E, %E* %1, i64 0, i32 2, i64 0\n  %8 = getelementptr inbounds %E, %E* %0, i64 0, i32 2, i64 0\n  %9 = load i32, i32* %8, align 4\n  %10 = load i32, i32* %7, align 4\n  %11 = icmp eq i32 %9, %10\n  %12 = zext i1 %11 to i8\n  br label %join63\n\nmatch_case25:                                     ; preds = %then-block-74-\n  %13 = getelementptr inbounds %E, %E* %1, i64 0, i32 2, i64 0\n  %14 = getelementptr inbounds %E, %E* %0, i64 0, i32 2, i64 0\n  %15 = load i32, i32* %14, align 4\n  %16 = load i32, i32* %13, align 4\n  %17 = icmp eq i32 %15, %16\n  %18 = zext i1 %17 to i8\n  br label %join63\n\nmatch_case28:                                     ; preds = %then-block-74-\n  %19 = getelementptr inbounds %E, %E* %1, i64 0, i32 2, i64 0\n  %20 = getelementptr inbounds %E, %E* %0, i64 0, i32 2, i64 0\n  %21 = load i32, i32* %20, align 4\n  %22 = load i32, i32* %19, align 4\n  %23 = icmp eq i32 %21, %22\n  %24 = zext i1 %23 to i8\n  br label %join63\n\nmatch_case31:                                     ; preds = %then-block-74-\n  %25 = getelementptr inbounds %E, %E* %1, i64 0, i32 2, i64 0\n  %26 = getelementptr inbounds %E, %E* %0, i64 0, i32 2, i64 0\n  %27 = load i32, i32* %26, align 4\n  %28 = load i32, i32* %25, align 4\n  %29 = icmp eq i32 %27, %28\n  %30 = zext i1 %29 to i8\n  br label %join63\n\nmatch_case34:                                     ; preds = %then-block-74-\n  %31 = getelementptr inbounds %E, %E* %1, i64 0, i32 2, i64 0\n  %32 = getelementptr inbounds %E, %E* %0, i64 0, i32 2, i64 0\n  %33 = load i32, i32* %32, align 4\n  %34 = load i32, i32* %31, align 4\n  %35 = icmp eq i32 %33, %34\n  %36 = zext i1 %35 to i8\n  br label %join63\n\nmatch_case37:                                     ; preds = %then-block-74-\n  %37 = getelementptr inbounds %E, %E* %1, i64 0, i32 2, i64 0\n  %38 = getelementptr inbounds %E, %E* %0, i64 0, i32 2, i64 0\n  %39 = load i32, i32* %38, align 4\n  %40 = load i32, i32* %37, align 4\n  %41 = icmp eq i32 %39, %40\n  %42 = zext i1 %41 to i8\n  br label %join63\n\nmatch_case40:                                     ; preds = %then-block-74-\n  %43 = getelementptr inbounds %E, %E* %1, i64 0, i32 2, i64 0\n  %44 = getelementptr inbounds %E, %E* %0, i64 0, i32 2, i64 0\n  %45 = load i32, i32* %44, align 4\n  %46 = load i32, i32* %43, align 4\n  %47 = icmp eq i32 %45, %46\n  %48 = zext i1 %47 to i8\n  br label %join63\n\nmatch_case43:                                     ; preds = %then-block-74-\n  %49 = getelementptr inbounds %E, %E* %1, i64 0, i32 2, i64 0\n  %50 = getelementptr inbounds %E, %E* %0, i64 0, i32 2, i64 0\n  %51 = load i32, i32* %50, align 4\n  %52 = load i32, i32* %49, align 4\n  %53 = icmp eq i32 %51, %52\n  %54 = zext i1 %53 to i8\n  br label %join63\n\njoin63:                                           ; preds = %entry-block, %match_case, %match_case25, %match_case28, %match_case31, %match_case34, %match_case37, %match_case40, %match_case43\n  %sret_slot.1 = phi i8 [ %54, %match_case43 ], [ %48, %match_case40 ], [ %42, %match_case37 ], [ %36, %match_case34 ], [ %30, %match_case31 ], [ %24, %match_case28 ], [ %18, %match_case25 ], [ %12, %match_case ], [ 0, %entry-block ]\n  %55 = icmp ne i8 %sret_slot.1, 0\n  ret i1 %55\n}\n```\n\nASM\n\n``` asm\n.type   _ZN23E...std..cmp..PartialEq2eq20h8d48eb51e9008df6FaaE,@function\n_ZN23E...std..cmp..PartialEq2eq20h8d48eb51e9008df6FaaE:\n    .cfi_startproc\n    movl    (%rdi), %eax\n    cmpl    (%rsi), %eax\n    jne .LBB0_1\n    decl    %eax\n    cmpl    $6, %eax\n    jbe .LBB0_3\n.LBB0_4:\n    movl    4(%rdi), %eax\n    cmpl    4(%rsi), %eax\n    sete    %al\n    retq\n.LBB0_1:\n    xorl    %eax, %eax\n    retq\n.LBB0_3:\n    leaq    .LJTI0_0(%rip), %rcx\n    movslq  (%rcx,%rax,4), %rax\n    addq    %rcx, %rax\n    jmpq    *%rax\n.Lfunc_end0:\n    .size   _ZN23E...std..cmp..PartialEq2eq20h8d48eb51e9008df6FaaE, .Lfunc_end0-_ZN23E...std..cmp..PartialEq2eq20h8d48eb51e9008df6FaaE\n    .cfi_endproc\n    .section    .rodata._ZN23E...std..cmp..PartialEq2eq20h8d48eb51e9008df6FaaE,\"a\",@progbits\n    .align  4\n.LJTI0_0:\n    .long   .LBB0_4-.LJTI0_0\n    .long   .LBB0_4-.LJTI0_0\n    .long   .LBB0_4-.LJTI0_0\n    .long   .LBB0_4-.LJTI0_0\n    .long   .LBB0_4-.LJTI0_0\n    .long   .LBB0_4-.LJTI0_0\n    .long   .LBB0_4-.LJTI0_0\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/136700526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/136702371",
    "html_url": "https://github.com/rust-lang/rust/issues/13623#issuecomment-136702371",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13623",
    "id": 136702371,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNjcwMjM3MQ==",
    "user": {
      "login": "ranma42",
      "id": 1506030,
      "node_id": "MDQ6VXNlcjE1MDYwMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1506030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ranma42",
      "html_url": "https://github.com/ranma42",
      "followers_url": "https://api.github.com/users/ranma42/followers",
      "following_url": "https://api.github.com/users/ranma42/following{/other_user}",
      "gists_url": "https://api.github.com/users/ranma42/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ranma42/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ranma42/subscriptions",
      "organizations_url": "https://api.github.com/users/ranma42/orgs",
      "repos_url": "https://api.github.com/users/ranma42/repos",
      "events_url": "https://api.github.com/users/ranma42/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ranma42/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-01T12:42:09Z",
    "updated_at": "2015-09-01T12:42:09Z",
    "body": "cc @ranma42\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/136702371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285423091",
    "html_url": "https://github.com/rust-lang/rust/issues/13623#issuecomment-285423091",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13623",
    "id": 285423091,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTQyMzA5MQ==",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-09T17:36:30Z",
    "updated_at": "2017-03-09T17:36:30Z",
    "body": "Enums have changed a lot, so closing this old issue. If this is still an issue, do repro and reopen.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285423091/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
