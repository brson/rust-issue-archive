{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/17853",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/17853/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/17853/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/17853/events",
  "html_url": "https://github.com/rust-lang/rust/pull/17853",
  "id": 45139555,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MjIzNzE0Nzk=",
  "number": 17853,
  "title": "rustc: Add `const` globals to the language",
  "user": {
    "login": "alexcrichton",
    "id": 64996,
    "node_id": "MDQ6VXNlcjY0OTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexcrichton",
    "html_url": "https://github.com/alexcrichton",
    "followers_url": "https://api.github.com/users/alexcrichton/followers",
    "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
    "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
    "repos_url": "https://api.github.com/users/alexcrichton/repos",
    "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "pcwalton",
    "id": 157897,
    "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pcwalton",
    "html_url": "https://github.com/pcwalton",
    "followers_url": "https://api.github.com/users/pcwalton/followers",
    "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
    "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
    "organizations_url": "https://api.github.com/users/pcwalton/orgs",
    "repos_url": "https://api.github.com/users/pcwalton/repos",
    "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pcwalton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2014-10-07T18:01:53Z",
  "updated_at": "2014-10-10T01:58:16Z",
  "closed_at": "2014-10-10T01:57:02Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/17853",
    "html_url": "https://github.com/rust-lang/rust/pull/17853",
    "diff_url": "https://github.com/rust-lang/rust/pull/17853.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/17853.patch",
    "merged_at": "2014-10-10T01:57:10Z"
  },
  "body": "This change is an implementation of [RFC 69](https://github.com/rust-lang/rfcs/pull/246) which adds a third kind of\nglobal to the language, `const`. This global is most similar to what the old\n`static` was, and if you're unsure about what to use then you should use a\n`const`.\n\nThe semantics of these three kinds of globals are:\n- A `const` does not represent a memory location, but only a value. Constants\n  are translated as rvalues, which means that their values are directly inlined\n  at usage location (similar to a #define in C/C++). Constant values are, well,\n  constant, and can not be modified. Any \"modification\" is actually a\n  modification to a local value on the stack rather than the actual constant\n  itself.\n  \n  Almost all values are allowed inside constants, whether they have interior\n  mutability or not. There are a few minor restrictions listed in the RFC, but\n  they should in general not come up too often.\n- A `static` now always represents a memory location (unconditionally). Any\n  references to the same `static` are actually a reference to the same memory\n  location. Only values whose types ascribe to `Sync` are allowed in a `static`.\n  This restriction is in place because many threads may access a `static`\n  concurrently. Lifting this restriction (and allowing unsafe access) is a\n  future extension not implemented at this time.\n- A `static mut` continues to always represent a memory location. All references\n  to a `static mut` continue to be `unsafe`.\n\nThis is a large breaking change, and many programs will need to be updated\naccordingly. A summary of the breaking changes is:\n- Statics may no longer be used in patterns. Statics now always represent a\n  memory location, which can sometimes be modified. To fix code, repurpose the\n  matched-on-`static` to a `const`.\n  \n  ```\n  static FOO: uint = 4;\n  match n {\n      FOO => { /* ... */ }\n      _ => { /* ... */ }\n  }\n  ```\n  \n  change this code to:\n  \n  ```\n  const FOO: uint = 4;\n  match n {\n      FOO => { /* ... */ }\n      _ => { /* ... */ }\n  }\n  ```\n- Statics may no longer refer to other statics by value. Due to statics being\n  able to change at runtime, allowing them to reference one another could\n  possibly lead to confusing semantics. If you are in this situation, use a\n  constant initializer instead. Note, however, that statics may reference other\n  statics by address, however.\n- Statics may no longer be used in constant expressions, such as array lengths.\n  This is due to the same restrictions as listed above. Use a `const` instead.\n\n[breaking-change]\nCloses #17718 \n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/17853/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/17853/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
