[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27737918",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-27737918",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 27737918,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzM3OTE4",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-05T00:46:49Z",
    "updated_at": "2013-11-05T00:46:49Z",
    "body": "It should be updated to implement `std::container::MutableSet` at the very least.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27737918/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27738148",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-27738148",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 27738148,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzM4MTQ4",
    "user": {
      "login": "martindemello",
      "id": 16215,
      "node_id": "MDQ6VXNlcjE2MjE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/16215?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martindemello",
      "html_url": "https://github.com/martindemello",
      "followers_url": "https://api.github.com/users/martindemello/followers",
      "following_url": "https://api.github.com/users/martindemello/following{/other_user}",
      "gists_url": "https://api.github.com/users/martindemello/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/martindemello/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/martindemello/subscriptions",
      "organizations_url": "https://api.github.com/users/martindemello/orgs",
      "repos_url": "https://api.github.com/users/martindemello/repos",
      "events_url": "https://api.github.com/users/martindemello/events{/privacy}",
      "received_events_url": "https://api.github.com/users/martindemello/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-05T00:51:42Z",
    "updated_at": "2013-11-05T00:51:42Z",
    "body": "I'm interested in taking this one on (assuming @nikomatsakis would not rather do it himself, of course)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27738148/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27738474",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-27738474",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 27738474,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzM4NDc0",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-05T00:59:18Z",
    "updated_at": "2013-11-05T00:59:18Z",
    "body": "@martindemello be my guest. :) The main reason I did not move it to std in the first place was that I didn't want to invest a lot of energy in making it have a nice interface -- but also because we didn't have the deriving modes that would make it usable with `unsafe::transmute`. I think that last part is no longer true, not sure if it's been properly integrated with those modes and so forth yet (not even sure what those traits are called). I think it's useful enough to warrant inclusion though if done right.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27738474/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27738548",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-27738548",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 27738548,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzM4NTQ4",
    "user": {
      "login": "martindemello",
      "id": 16215,
      "node_id": "MDQ6VXNlcjE2MjE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/16215?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martindemello",
      "html_url": "https://github.com/martindemello",
      "followers_url": "https://api.github.com/users/martindemello/followers",
      "following_url": "https://api.github.com/users/martindemello/following{/other_user}",
      "gists_url": "https://api.github.com/users/martindemello/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/martindemello/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/martindemello/subscriptions",
      "organizations_url": "https://api.github.com/users/martindemello/orgs",
      "repos_url": "https://api.github.com/users/martindemello/repos",
      "events_url": "https://api.github.com/users/martindemello/events{/privacy}",
      "received_events_url": "https://api.github.com/users/martindemello/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-05T01:00:41Z",
    "updated_at": "2013-11-05T01:00:41Z",
    "body": "okay, great :) i'll start figuring out a nice interface for it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27738548/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27738978",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-27738978",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 27738978,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzM4OTc4",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-05T01:09:52Z",
    "updated_at": "2013-11-05T01:09:52Z",
    "body": "The relevant traits are `ToPrimitive` and `FromPrimitive`.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27738978/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28142718",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-28142718",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 28142718,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MTQyNzE4",
    "user": {
      "login": "martindemello",
      "id": 16215,
      "node_id": "MDQ6VXNlcjE2MjE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/16215?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martindemello",
      "html_url": "https://github.com/martindemello",
      "followers_url": "https://api.github.com/users/martindemello/followers",
      "following_url": "https://api.github.com/users/martindemello/following{/other_user}",
      "gists_url": "https://api.github.com/users/martindemello/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/martindemello/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/martindemello/subscriptions",
      "organizations_url": "https://api.github.com/users/martindemello/orgs",
      "repos_url": "https://api.github.com/users/martindemello/repos",
      "events_url": "https://api.github.com/users/martindemello/events{/privacy}",
      "received_events_url": "https://api.github.com/users/martindemello/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-10T02:49:02Z",
    "updated_at": "2013-11-10T02:49:02Z",
    "body": "@sfackler Why `ToPrimitive` and `FromPrimitive`? They seem overly general to me; I think it would make more sense to implement `CLike`, provide a transparent `to_uint` that simply returns the underlying `uint`, and a somewhat more problematic `from_uint` that could either silently zero out any bit that does not correspond to an enum value, or raise a runtime error if one exist. In the unlikely case that someone wants the value as something other than a uint, they can call to_uint and then cast it themselves.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28142718/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28142748",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-28142748",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 28142748,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MTQyNzQ4",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-10T02:51:22Z",
    "updated_at": "2013-11-10T02:51:22Z",
    "body": "They are more general than needed, but they can be automatically derived and `CLike` (I think?) can't.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28142748/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28143137",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-28143137",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 28143137,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MTQzMTM3",
    "user": {
      "login": "martindemello",
      "id": 16215,
      "node_id": "MDQ6VXNlcjE2MjE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/16215?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martindemello",
      "html_url": "https://github.com/martindemello",
      "followers_url": "https://api.github.com/users/martindemello/followers",
      "following_url": "https://api.github.com/users/martindemello/following{/other_user}",
      "gists_url": "https://api.github.com/users/martindemello/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/martindemello/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/martindemello/subscriptions",
      "organizations_url": "https://api.github.com/users/martindemello/orgs",
      "repos_url": "https://api.github.com/users/martindemello/repos",
      "events_url": "https://api.github.com/users/martindemello/events{/privacy}",
      "received_events_url": "https://api.github.com/users/martindemello/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-10T03:22:36Z",
    "updated_at": "2013-11-10T03:22:36Z",
    "body": "oh, i see. yeah, that's a good point. it looks like FromPrimitive is derivable but ToPrimitive is not, though, and furthermore that FromPrimitive cannot be derived for structs (though that might be worth changing in the special case of a struct holding a single primitive field).\n\ni am unconvinced that there is a sufficient use case for this anyway, versus just calling to_uint when you hit the boundary with C code - at least, the way i am envisioning this being used is to maintain a set of flags in a typesafe way in rust code, and \"emit\" a uint when needed to pass to a C function. i guess the C function could theoretically want a mutable flagset that the caller is expected to preserve changes to, but i would still do that via an explicit to_uint and from_uint personally. is there some good case for this i'm missing?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28143137/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28476416",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-28476416",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 28476416,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDc2NDE2",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-14T11:19:44Z",
    "updated_at": "2013-11-14T11:19:44Z",
    "body": "I personally have come to the conclusion that `FromPrimitive` and `ToPrimitive` are the wrong basis for `EnumSet`. The right basis is a trait that guarantees it converts from each enum variant into an integer between `0` and `n-1` and which can tell you what `n` is. One way of doing that -- and the way the deriving mode should use -- is to return the index of the variant in the list, which is often but not always the same as the discriminant. If you need a more stable version that doesn't change as the enum variants are reshuffled than you can implement the trait yourself, though I personally think that in that event you are doing it wrong (that basically implies you are serializing a bit set as an integer, which I think you should not do if you want the data to be forwards compatible).\n\nHere is a (slightly modified) excerpt from an e-mail that I wrote to @martindemello:\n\nI think we really need to decide what we are optimizing for. My\noriginal intention with EnumSet was to handle the following use case:\n\n```\n#[deriving(CLike)]\nenum MyFlag { Flag1, Flag2, Flag3 }\n\ntype MyFlags = EnumSet<MyFlag>;    \n```\n\nThat is, a user who wants to declare an enum indicating a set of\nflags, and then work with a set of those flags. I wasn't really\nthinking about C compatibility and I'm not overly concerned with binary\ncompatibility of EnumSets or anything else. I'm not even sure if the\nAPI should expose a way to get the underlying bits, since by keeping\nthem private you make the matter of whether we use the index or some\nother discriminant inobservable.\n\nHowever, I do think that trying to make it nicer to work with C\ncode that uses flags is a legitimate use case, naturally. It might\nbe that we need a different type for it (CEnumSet or something).\nNote though that there are multiple ways of encoding bits into\ndiscriminants. One way is to write C code like the following:\n\n```\nenum Flags {\n    Flag1 = 1 << 0,\n    Flag2 = 1 << 1,\n    Flag3 = 1 << 2,\n};\nbool hasFlag(unsigned u, Flags f) {\n     return !!(u & f);\n}\n```\n\nThough it is not unheard of to do something like this as well:\n\n```\nenum Flags { Flag1, Flag2, Flag3 };\n#define TO_BIT(F) (1 << (F))\nbool hasFlag(unsigned u, Flags f) {\n     return !!(u & TO_BIT(f));\n}\n```\n\nThe latter is convenient because you do not need to label\nevery individual enum with a bit, and it makes it easier\nto shuffle the order around and so forth. Note that the\nsame EnumSet class cannot work with both approaches, because\nin one case it must shift the discriminants and in one case\nit doesn't have to.\n- Using indices:\n  - Guarantees tightly packed indices from 0..n-1\n    with no duplicates.  \n  - Makes it easy to know the maximum number of bits,\n    permitting `EnumSet::<T>::all()`.\n  - Works invisibly with ANY enum, regardless of discriminants\n    or other flags.\n- Using the discriminant:\n  - Potentially gives compatibility with C (modulo the usual\n    concerns about the unpredictability of the representation\n    of enums in the C ABI)\n  - Allows users to convert an EnumSet into a uint and back again\n    in a backwards compatible way:\n    - i.e., if they change the order of things in the enum, they\n      can theoretically update the discriminants to maintain  \n      the same bits\n\nNote though that using explicit discriminants in place of indices\ncarries some real _disadvantages_, particularly if those indices\nare bits:\n- Users must label every variant, and if they forget to do\n  so the EnumSet breaks in horrible ways  \n- Matching against such an enum is inefficient\n- You cannot use the discriminant to index into a table\n\nIn my opinion the tradeoff is clear. Using indices makes EnumSet\nconvenient for Rust code and much more bullet proof. C users can just\na uint, or we could possibly make a second type specialized to that\nuse case. This does imply though a new trait and deriving mode for it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28476416/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28620835",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-28620835",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 28620835,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjIwODM1",
    "user": {
      "login": "martindemello",
      "id": 16215,
      "node_id": "MDQ6VXNlcjE2MjE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/16215?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martindemello",
      "html_url": "https://github.com/martindemello",
      "followers_url": "https://api.github.com/users/martindemello/followers",
      "following_url": "https://api.github.com/users/martindemello/following{/other_user}",
      "gists_url": "https://api.github.com/users/martindemello/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/martindemello/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/martindemello/subscriptions",
      "organizations_url": "https://api.github.com/users/martindemello/orgs",
      "repos_url": "https://api.github.com/users/martindemello/repos",
      "events_url": "https://api.github.com/users/martindemello/events{/privacy}",
      "received_events_url": "https://api.github.com/users/martindemello/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-16T06:28:26Z",
    "updated_at": "2013-11-16T06:28:26Z",
    "body": "Agreed. I think the correct progression, then, is\n1. Define a derivable trait, Ordinal\n2. Have EnumSet take an Ordinal rather than a CLike\n3. Have a separate CLike trait, not necessarily derivable, and possibly a separate CFlagSet analogue of EnumSet meant to convert to/from C uints stored as `or`ed collections of flags.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28620835/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28632618",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-28632618",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 28632618,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjMyNjE4",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-16T18:30:19Z",
    "updated_at": "2013-11-16T18:30:19Z",
    "body": "That sounds correct.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/28632618/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/41432824",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-41432824",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 41432824,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDMyODI0",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-25T19:52:55Z",
    "updated_at": "2014-04-25T19:52:55Z",
    "body": "If EnumSet is being redesigned, #13756 is kinda related. My use case in Servo is unrelated to C. I just want a bunch of named bits, and I don\u2019t care about the underlying enum (it only exists for EnumSet.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/41432824/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/41449940",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-41449940",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 41449940,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDQ5OTQw",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-25T23:52:41Z",
    "updated_at": "2014-04-25T23:52:41Z",
    "body": "To make some progress on this issue (and the related #6085 which is blocked on it), I'm thinking of doing the following:\n- Introduce `CFlagSet` with `CLike` trait that uses the discriminants directly (rather than indices), _and allows conversion to uint_ (unlike `EnumSet`); use the current `EnumSet` implementation as a basis\n- Rename `CLike` to `Ordinal` in `EnumSet`\n- Reimplement `EnumSet` as a wrapper around `CFlagSet` by transforming indices from `Ordinal` to discriminants for `CLike` (just as the `bit` function in `EnumSet` currently does)\n- Add `MutableSet` implementations for both\n- Put this all in libstd\n\nThis would unblock #6085 by giving us C-compatible flag sets, without duplicating the `EnumSet` implementation -- but would also give us the freedom to change the representation/implementation of `EnumSet` later on if desired.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/41449940/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/41935794",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-41935794",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 41935794,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTM1Nzk0",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-01T17:53:21Z",
    "updated_at": "2014-05-01T17:53:21Z",
    "body": "Update on this issue: the bitflags! macro has been [merged](https://github.com/mozilla/rust/pull/13072), as part of `libstd`, so that is now the preferred way to construct C-compatible, type-safe APIs.\n\nAs per @nikomatsakis above, there is still a potential role for `EnumSet`. We are evaluating a few possibilities, in part by moving existing uses of C-style enums to use `bitflags!` (and thereby perhaps enabling a language simplification).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/41935794/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57065128",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-57065128",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 57065128,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MDY1MTI4",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-27T20:44:32Z",
    "updated_at": "2014-09-27T20:44:32Z",
    "body": "Any developments on this? What is the fate of EnumSet?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57065128/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68933004",
    "html_url": "https://github.com/rust-lang/rust/issues/10272#issuecomment-68933004",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10272",
    "id": 68933004,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTMzMDA0",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-06T21:02:13Z",
    "updated_at": "2015-01-06T21:02:13Z",
    "body": "EnumSet is no longer part of the public API. It is currently hosted in libcollections but not re-exported, so that the compiler can use it. It may reasonably be removed if the compiler stops using it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68933004/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
