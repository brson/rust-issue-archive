[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/94968978",
    "html_url": "https://github.com/rust-lang/rust/issues/21216#issuecomment-94968978",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21216",
    "id": 94968978,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk0OTY4OTc4",
    "user": {
      "login": "tamird",
      "id": 1535036,
      "node_id": "MDQ6VXNlcjE1MzUwMzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tamird",
      "html_url": "https://github.com/tamird",
      "followers_url": "https://api.github.com/users/tamird/followers",
      "following_url": "https://api.github.com/users/tamird/following{/other_user}",
      "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tamird/subscriptions",
      "organizations_url": "https://api.github.com/users/tamird/orgs",
      "repos_url": "https://api.github.com/users/tamird/repos",
      "events_url": "https://api.github.com/users/tamird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tamird/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-21T23:13:54Z",
    "updated_at": "2015-04-21T23:13:54Z",
    "body": "@alexchandel could you reduce this to a self-contained test case?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/94968978/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97465111",
    "html_url": "https://github.com/rust-lang/rust/issues/21216#issuecomment-97465111",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21216",
    "id": 97465111,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk3NDY1MTEx",
    "user": {
      "login": "alexchandel",
      "id": 637714,
      "node_id": "MDQ6VXNlcjYzNzcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/637714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexchandel",
      "html_url": "https://github.com/alexchandel",
      "followers_url": "https://api.github.com/users/alexchandel/followers",
      "following_url": "https://api.github.com/users/alexchandel/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexchandel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexchandel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexchandel/subscriptions",
      "organizations_url": "https://api.github.com/users/alexchandel/orgs",
      "repos_url": "https://api.github.com/users/alexchandel/repos",
      "events_url": "https://api.github.com/users/alexchandel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexchandel/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-29T15:19:14Z",
    "updated_at": "2015-04-29T15:19:14Z",
    "body": "No idea, it occurred deep in the conrod example, which has been extensively refactored since then. If you're capable of Boxing a non-moving FnMut that modifies its environment, and passing it to a function that takes a Box, at least 5 times in one function, then it may have been fixed in rustc since then.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97465111/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97548812",
    "html_url": "https://github.com/rust-lang/rust/issues/21216#issuecomment-97548812",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21216",
    "id": 97548812,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk3NTQ4ODEy",
    "user": {
      "login": "tamird",
      "id": 1535036,
      "node_id": "MDQ6VXNlcjE1MzUwMzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tamird",
      "html_url": "https://github.com/tamird",
      "followers_url": "https://api.github.com/users/tamird/followers",
      "following_url": "https://api.github.com/users/tamird/following{/other_user}",
      "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tamird/subscriptions",
      "organizations_url": "https://api.github.com/users/tamird/orgs",
      "repos_url": "https://api.github.com/users/tamird/repos",
      "events_url": "https://api.github.com/users/tamird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tamird/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-29T19:16:41Z",
    "updated_at": "2015-04-29T19:16:41Z",
    "body": "Something like this?\n\n``` rust\nfn invoke_fn<F>(f: &mut Box<&mut F>) where F: FnMut() {\n  (*f)()\n}\n\nfn main() {\n  let mut option = None;\n  let mut fn_mut = || {\n    option = Some(7)\n  };\n  let mut boxed_fn = Box::new(&mut fn_mut);\n\n  invoke_fn(&mut boxed_fn);\n  invoke_fn(&mut boxed_fn);\n}\n```\n\nThis compiles without error.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97548812/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97551143",
    "html_url": "https://github.com/rust-lang/rust/issues/21216#issuecomment-97551143",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21216",
    "id": 97551143,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk3NTUxMTQz",
    "user": {
      "login": "tamird",
      "id": 1535036,
      "node_id": "MDQ6VXNlcjE1MzUwMzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tamird",
      "html_url": "https://github.com/tamird",
      "followers_url": "https://api.github.com/users/tamird/followers",
      "following_url": "https://api.github.com/users/tamird/following{/other_user}",
      "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tamird/subscriptions",
      "organizations_url": "https://api.github.com/users/tamird/orgs",
      "repos_url": "https://api.github.com/users/tamird/repos",
      "events_url": "https://api.github.com/users/tamird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tamird/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-29T19:25:11Z",
    "updated_at": "2015-04-29T19:25:11Z",
    "body": "Alternatively:\n\n``` rust\nfn attach_fn(opt_fn: &mut Box<FnMut()>) {\n  let mut option = None;\n  *opt_fn = Box::new(|| { option = Some(7) });\n}\n\nfn main() {\n  let mut optional_fn = Box::new(|| {});\n  attach_fn(&mut optional_fn);\n}\n```\n\nAttempts to leak an environment-mutating closure out of its closure, and fails without ICE:\n\n```\n$ rustc main.rs\nmain.rs:8:13: 8:29 error: mismatched types:\n expected `&mut Box<core::ops::FnMut()>`,\n    found `&mut Box<[closure main.rs:7:34: 7:39]>`\n(expected trait core::ops::FnMut,\n    found closure) [E0308]\nmain.rs:8   attach_fn(&mut optional_fn);\n                      ^~~~~~~~~~~~~~~~\nerror: aborting due to previous error\n```\n\nI think this issue should be closed; it's unlikely to yield anything actionable. @steveklabnik?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97551143/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/119731805",
    "html_url": "https://github.com/rust-lang/rust/issues/21216#issuecomment-119731805",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21216",
    "id": 119731805,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExOTczMTgwNQ==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-08T21:09:59Z",
    "updated_at": "2015-07-08T21:09:59Z",
    "body": "Seems like a duplicate of #21390, and unlikely to be reproduced. Closing.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/119731805/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
