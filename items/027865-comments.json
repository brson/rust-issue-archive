[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131887579",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-131887579",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 131887579,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTg4NzU3OQ==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-17T16:51:54Z",
    "updated_at": "2015-08-17T16:51:54Z",
    "body": "All nodes are boxed, so this is trivially true?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131887579/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131887993",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-131887993",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 131887993,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTg4Nzk5Mw==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-17T16:53:48Z",
    "updated_at": "2015-08-17T16:53:48Z",
    "body": "[`BTreeMap` directly contains a `Node`](https://github.com/rust-lang/rust/blob/master/src/libcollections/btree/map.rs#L71), and actually no nodes are boxed. They have fields for the allocated keys/vals/edges instead of being boxed themselves.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131887993/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131888741",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-131888741",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 131888741,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTg4ODc0MQ==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-17T16:57:22Z",
    "updated_at": "2015-08-17T16:57:22Z",
    "body": "Well, the root node definitely isn't boxed. I guess the non-root ones _do_ have a stable address, though, because their parent nodes' allocations never change (as far as I can tell).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131888741/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131892862",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-131892862",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 131892862,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTg5Mjg2Mg==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-17T17:12:19Z",
    "updated_at": "2015-08-17T17:12:19Z",
    "body": "Oh whoops, yes you're right. I forgot that we did that.\n\nI fear that without ManuallyDrop we're going to have to go Full HashMap and manage all of our allocations/destructing.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131892862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131893836",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-131893836",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 131893836,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTg5MzgzNg==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-17T17:16:54Z",
    "updated_at": "2015-08-17T17:16:54Z",
    "body": "Oh wait no we're 90% of the way to Full HashMap anyway. I'm remembering the good ol' days...\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131893836/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131907151",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-131907151",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 131907151,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTkwNzE1MQ==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-17T17:49:22Z",
    "updated_at": "2015-08-17T17:57:16Z",
    "body": "Auuuugh all of this is coming back to me.\n\nBasically it seems to me that you \"want\"\n\n```\nNode {\n  len: u8,\n  parent_idx: u8,\n  is_leaf: bool,\n  parent: *mut Node,\n  keys: ManuallyDrop<[K; n]>\n  vals: ManuallyDrop<[V; n]>\n  edges: ManuallyDrop<[Box<Node>; n + 1]> \n}\n\nMap {\n  root: Option<Box<Node>>\n}\n```\n\nBut this design forbids you from not allocating space for your edges in your leaves. This is why we currently have (effectively): \n\n```\nNode {\n    len: u8,\n    // Actually just Uniques that we manually allocate and manage\n    keys: Box<ManuallyDrop<[K; n]>>,\n    vals: Box<ManuallyDrop<[V; n]>>,\n    edges: Option<Box<ManuallyDrop<[Node; n + 1]>>>,\n}\n```\n\nWhich enables the edges to not be allocated (doubling as is_leaf). We then also abuse this fact to keep the root inline, and avoid an extra allocation/indirection.\n\nWe could also consider a hybrid:\n\n```\nNode {\n    len: u8,\n    keys: [K; n],\n    vals: [V; n],\n    edges: Option<Box<ManuallyDrop<[Node; n + 1]>>>,\n}\n```\n\nBut this has the negative side-effect of making the edges array _enormous_.\n\nI think google's btree does the following:\n\n```\nstruct BaseNode {\n   is_leaf: bool,\n   keys: ManuallyDrop<[K; n]>\n   vals: ManuallyDrop<[V; n]>\n   // and other common stuff like parent pointers\n}\n\n// Inherit from BaseNode\nstruct InternalNode: BaseNode {\n   edges: ManuallyDrop<[Unique<BaseNode>; n+1]>\n}\n```\n\nAnd then based on the value of is_leaf, may cast the BaseNode to an InternalNode.\n\nThis works because a Leaf never becomes Internal or vice-versa. So leaves only allocate the space they need, and internal nodes allocate more but get type-erased to \"only\" leaves. And then blah blah figure out deallocation yourself whatever.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131907151/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131940431",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-131940431",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 131940431,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTk0MDQzMQ==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-17T19:45:33Z",
    "updated_at": "2015-08-17T19:45:33Z",
    "body": "The type-erasure approach seems best, but as I understand it, it's technically undefined behavior for us to transmute between the two struct types, right?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131940431/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131955957",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-131955957",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 131955957,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTk1NTk1Nw==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-17T20:42:12Z",
    "updated_at": "2015-08-17T20:42:12Z",
    "body": "Not if they're repr(C) and one is a prefix of the other. You would be transmuting the pointers, of course.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131955957/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131969705",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-131969705",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 131969705,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTk2OTcwNQ==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-17T21:39:19Z",
    "updated_at": "2015-08-17T21:39:19Z",
    "body": "OK, I got a prototype working with type-erasure and parent-pointer insertion, though it's not using the existing BTree code. I need to play around with it more in isolation before attempting a PR.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131969705/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132235652",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-132235652",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 132235652,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMjIzNTY1Mg==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-18T14:42:05Z",
    "updated_at": "2015-08-18T14:42:05Z",
    "body": "How important is it to keep the ability to specify `b`? It seems like we're waiting for type-level integers (or associated constants) to land before stabilizing that functionality anyway.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132235652/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132306069",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-132306069",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 132306069,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMjMwNjA2OQ==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-18T18:18:29Z",
    "updated_at": "2015-08-18T18:18:29Z",
    "body": "I'm leaning toward the following representation:\n\n``` rust\nconst T: usize = 6;\n\npub struct BTreeMap<K, V> {\n    root: Option<Box<Node<K, V>>>,\n    ...\n}\n\n#[repr(C)]\nstruct Node<K, V> {\n    keys: [K; 2 * T - 1],\n    vals: [V: 2 * T - 1],\n    parent: *mut InternalNode<K, V>,\n    len: u16,\n    idx: u16,\n    is_leaf: bool,\n}\n\n#[repr(C)]\nstruct InternalNode<K, V> {\n    node: Node<K, V>,\n    edges: [*mut Node<K, V>; 2 * T],\n}\n```\n\nWe don't need `ManuallyDrop` right now, because we can just `take` the root and `mem::forget` the node after running the key and value destructors and recursively dropping any edges. We should be able to easily replace the `T` const with an integer parameter when those are ready.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132306069/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132308234",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-132308234",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 132308234,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMjMwODIzNA==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-18T18:26:42Z",
    "updated_at": "2015-08-18T18:26:49Z",
    "body": "Being able to specify B is totally unimportant and is slated to be deprecated.\n\nAlso this layout wastes an extra ptr of space over using a u8 for len and idx on 32-bit (no effect on 64bit).\n\nAs a minor bikeshed I'd maybe call idx \"parent_idx\" or whatever.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132308234/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132308693",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-132308693",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 132308693,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMjMwODY5Mw==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-18T18:28:16Z",
    "updated_at": "2015-08-18T18:28:16Z",
    "body": "Oh but otherwise :+1: this is basically what I had in mind.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132308693/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132309568",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-132309568",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 132309568,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMjMwOTU2OA==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-18T18:30:20Z",
    "updated_at": "2015-08-18T18:30:20Z",
    "body": "I was aware of the waste, but unsure whether we wanted to support `B > 255`. `u8` should suffice, though. (In a future Rust, we might even be able to determine how big to make `{len, parent_idx}` based on `B`.)\n\nWhat do we have to be aware of with zero-sized types here?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132309568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132313591",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-132313591",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 132313591,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMjMxMzU5MQ==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-18T18:41:33Z",
    "updated_at": "2015-08-18T18:41:33Z",
    "body": "Zero-sized types should Just Work in this case. Particularly the parent pointer ensures a nice minimum alignment.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132313591/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132613571",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-132613571",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 132613571,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMjYxMzU3MQ==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-19T14:14:59Z",
    "updated_at": "2015-08-19T14:14:59Z",
    "body": "Here are some preliminary benchmarks for just insertion:\n\n```\ntest rand_100000_parent ... bench:         172 ns/iter (+/- 9)\ntest rand_100000_std    ... bench:         208 ns/iter (+/- 14)\ntest rand_10000_parent  ... bench:         109 ns/iter (+/- 8)\ntest rand_10000_std     ... bench:         146 ns/iter (+/- 8)\ntest rand_100_parent    ... bench:          63 ns/iter (+/- 10)\ntest rand_100_std       ... bench:          84 ns/iter (+/- 17)\ntest seq_100000_parent  ... bench:          73 ns/iter (+/- 5)\ntest seq_100000_std     ... bench:         115 ns/iter (+/- 7)\ntest seq_10000_parent   ... bench:          58 ns/iter (+/- 3)\ntest seq_10000_std      ... bench:          84 ns/iter (+/- 14)\ntest seq_100_parent     ... bench:          21 ns/iter (+/- 2)\ntest seq_100_std        ... bench:          44 ns/iter (+/- 5)\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132613571/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132643199",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-132643199",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 132643199,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMjY0MzE5OQ==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-19T15:42:14Z",
    "updated_at": "2015-08-19T15:42:14Z",
    "body": "Fantastic!!!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132643199/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132643912",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-132643912",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 132643912,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMjY0MzkxMg==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-19T15:44:35Z",
    "updated_at": "2015-08-19T15:44:35Z",
    "body": "The problem is patching the new stuff into the existing code; it's likely easier to just rewrite the entire module than change things piece by piece.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132643912/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132684436",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-132684436",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 132684436,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMjY4NDQzNg==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-19T16:29:32Z",
    "updated_at": "2015-08-19T16:29:32Z",
    "body": "I have no problem with that, as long as you're down to do it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132684436/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133166564",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133166564",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133166564,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzE2NjU2NA==",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-20T20:48:21Z",
    "updated_at": "2015-08-20T20:48:21Z",
    "body": "Woa, impressive gains!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133166564/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133238611",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133238611",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133238611,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzIzODYxMQ==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-21T01:32:20Z",
    "updated_at": "2015-08-21T01:32:20Z",
    "body": "I will be implementing this as a standalone library before attempting a patch: https://github.com/apasel422/btree (currently empty)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133238611/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133483906",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133483906",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133483906,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzQ4MzkwNg==",
    "user": {
      "login": "gereeter",
      "id": 2328242,
      "node_id": "MDQ6VXNlcjIzMjgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2328242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gereeter",
      "html_url": "https://github.com/gereeter",
      "followers_url": "https://api.github.com/users/gereeter/followers",
      "following_url": "https://api.github.com/users/gereeter/following{/other_user}",
      "gists_url": "https://api.github.com/users/gereeter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gereeter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gereeter/subscriptions",
      "organizations_url": "https://api.github.com/users/gereeter/orgs",
      "repos_url": "https://api.github.com/users/gereeter/repos",
      "events_url": "https://api.github.com/users/gereeter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gereeter/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-21T16:33:41Z",
    "updated_at": "2015-08-21T16:33:41Z",
    "body": "An alternative to the `#[repr(C)]` trick would be to store the `is_leaf` information a level up, with the edges, as follows:\n\n``` rust\nconst T: usize = 6;\n\npub struct BTreeMap<K, V> {\n    root: Option<Box<Node<K, V>>>,\n    ...\n}\n\nstruct Node<K, V> {\n    keys: [K; 2 * T - 1],\n    vals: [V: 2 * T - 1],\n    parent: *mut InternalNode<K, V>,\n    len: u16,\n    idx: u16,\n}\n\nstruct InternalNode<K, V> {\n    node: Node<K, V>,\n    edges: EdgeData<K, V>,\n}\n\nenum EdgeData<K, V> {\n    Leaves([Box<Node<K, V>>; 2 * T]),\n    Internals([Box<InternalNode<K, V>>; 2 * T]),\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133483906/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133496600",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133496600",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133496600,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzQ5NjYwMA==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-21T17:07:16Z",
    "updated_at": "2015-08-21T17:07:16Z",
    "body": "@gereeter But can't each of the sub-nodes be either a leaf or an internal node?\nOne nice trick here would be to use the lowest bit to indicate whether a node is internal or a leaf, though you can't do it in entirely safe code just yet (it's not even an optimization you can do without opting out of being able to take references to a `Box<Node>` field).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133496600/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133507039",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133507039",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133507039,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzUwNzAzOQ==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-21T17:40:34Z",
    "updated_at": "2015-08-21T17:40:34Z",
    "body": "@gereeter In your example, given an `&Node<K, V>`, how do you know if it's internal or a leaf?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133507039/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133517929",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133517929",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133517929,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzUxNzkyOQ==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-21T18:12:08Z",
    "updated_at": "2015-08-21T18:12:08Z",
    "body": "@eddyb does that actually accomplish anything? We have a bunch of extra bytes in the node struct anyway.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133517929/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133521129",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133521129",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133521129,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzUyMTEyOQ==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-21T18:19:47Z",
    "updated_at": "2015-08-21T18:19:47Z",
    "body": "@eddyb All leaves are at the same depth in a b-tree\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133521129/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133521216",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133521216",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133521216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzUyMTIxNg==",
    "user": {
      "login": "gereeter",
      "id": 2328242,
      "node_id": "MDQ6VXNlcjIzMjgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2328242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gereeter",
      "html_url": "https://github.com/gereeter",
      "followers_url": "https://api.github.com/users/gereeter/followers",
      "following_url": "https://api.github.com/users/gereeter/following{/other_user}",
      "gists_url": "https://api.github.com/users/gereeter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gereeter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gereeter/subscriptions",
      "organizations_url": "https://api.github.com/users/gereeter/orgs",
      "repos_url": "https://api.github.com/users/gereeter/repos",
      "events_url": "https://api.github.com/users/gereeter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gereeter/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-21T18:20:03Z",
    "updated_at": "2015-08-21T18:20:03Z",
    "body": "@apasel422 You can't figure it out. However, you could have `NodeRef` types that keep track of that information.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133521216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133521966",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133521966",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133521966,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzUyMTk2Ng==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-21T18:22:30Z",
    "updated_at": "2015-08-21T18:22:30Z",
    "body": "@gereeter What I mean is, how would you use that to perform an insertion? The root in your example is a `Node`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133521966/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133522390",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133522390",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133522390,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzUyMjM5MA==",
    "user": {
      "login": "gereeter",
      "id": 2328242,
      "node_id": "MDQ6VXNlcjIzMjgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2328242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gereeter",
      "html_url": "https://github.com/gereeter",
      "followers_url": "https://api.github.com/users/gereeter/followers",
      "following_url": "https://api.github.com/users/gereeter/following{/other_user}",
      "gists_url": "https://api.github.com/users/gereeter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gereeter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gereeter/subscriptions",
      "organizations_url": "https://api.github.com/users/gereeter/orgs",
      "repos_url": "https://api.github.com/users/gereeter/repos",
      "events_url": "https://api.github.com/users/gereeter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gereeter/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-21T18:23:31Z",
    "updated_at": "2015-08-21T18:23:31Z",
    "body": "@apasel422 Oh, whoops. You would need to do the same sort of branching at the root instead of just storing a `Node`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133522390/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133525369",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133525369",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133525369,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzUyNTM2OQ==",
    "user": {
      "login": "gereeter",
      "id": 2328242,
      "node_id": "MDQ6VXNlcjIzMjgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2328242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gereeter",
      "html_url": "https://github.com/gereeter",
      "followers_url": "https://api.github.com/users/gereeter/followers",
      "following_url": "https://api.github.com/users/gereeter/following{/other_user}",
      "gists_url": "https://api.github.com/users/gereeter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gereeter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gereeter/subscriptions",
      "organizations_url": "https://api.github.com/users/gereeter/orgs",
      "repos_url": "https://api.github.com/users/gereeter/repos",
      "events_url": "https://api.github.com/users/gereeter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gereeter/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-21T18:32:30Z",
    "updated_at": "2015-08-21T18:34:02Z",
    "body": "Note: I think that the ideal representation, in pseudo-Rust, is the following.\n\n``` rust\nstruct BTreeMap<K, V> {\n    height: usize,\n    root: Option<Box<Node<K, V, height>>>\n}\n\nstruct Node<K, V, height: usize> {\n    keys: [K; 2 * T - 1],\n    vals: [V; 2 * T - 1],\n    edges: if height > 0 {\n        [Box<Node<K, V, height - 1>>; 2 * T]\n    } else { () }\n    parent: *mut Node<K, V, height + 1>,\n    len: u16,\n    idx: u16,\n}\n```\n\nEssentially, we don't store `is_leaf` information anywhere except for the root and simply infer this information everwhere from the root. I'm trying to write an implementation that uses this representation, but it is difficult to keep the unsafety under control.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133525369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133528145",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133528145",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133528145,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzUyODE0NQ==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-21T18:45:46Z",
    "updated_at": "2015-08-21T18:45:46Z",
    "body": "@gereeter Is it possible that DSTs could help there, since nodes will have to be behind a pointer anyway?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133528145/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133529149",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133529149",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133529149,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzUyOTE0OQ==",
    "user": {
      "login": "gereeter",
      "id": 2328242,
      "node_id": "MDQ6VXNlcjIzMjgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2328242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gereeter",
      "html_url": "https://github.com/gereeter",
      "followers_url": "https://api.github.com/users/gereeter/followers",
      "following_url": "https://api.github.com/users/gereeter/following{/other_user}",
      "gists_url": "https://api.github.com/users/gereeter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gereeter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gereeter/subscriptions",
      "organizations_url": "https://api.github.com/users/gereeter/orgs",
      "repos_url": "https://api.github.com/users/gereeter/repos",
      "events_url": "https://api.github.com/users/gereeter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gereeter/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-21T18:50:57Z",
    "updated_at": "2015-08-21T18:50:57Z",
    "body": "@apasel422 You could use `edges: [Box<Node<K, V>>]` and check the length of that array to see if you are in a leaf or not. However, I'm not sure that this is the greatest idea, as it uses a whole `usize`-worth of space for every `is_leaf` flag. Additionally, it would make allocation a pain. With the current state of DSTs, I don't see a way to use them to actually reduce the amount of extra space used.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133529149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133580307",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133580307",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133580307,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzU4MDMwNw==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-21T22:32:43Z",
    "updated_at": "2015-08-21T22:32:43Z",
    "body": "Preliminary forward by-ref iteration benches:\n\n```\ntest iter_100000_parent ... bench:     381,227 ns/iter (+/- 24,162)\ntest iter_100000_std    ... bench:   1,246,445 ns/iter (+/- 24,031)\ntest iter_1000_parent   ... bench:       2,950 ns/iter (+/- 612)\ntest iter_1000_std      ... bench:      12,452 ns/iter (+/- 1,868)\ntest iter_20_parent     ... bench:          54 ns/iter (+/- 14)\ntest iter_20_std        ... bench:         284 ns/iter (+/- 23)\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133580307/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133589291",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133589291",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133589291,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzU4OTI5MQ==",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-21T23:33:33Z",
    "updated_at": "2015-08-21T23:33:33Z",
    "body": "Huge gains!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133589291/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133897163",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133897163",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133897163,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzg5NzE2Mw==",
    "user": {
      "login": "gereeter",
      "id": 2328242,
      "node_id": "MDQ6VXNlcjIzMjgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2328242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gereeter",
      "html_url": "https://github.com/gereeter",
      "followers_url": "https://api.github.com/users/gereeter/followers",
      "following_url": "https://api.github.com/users/gereeter/following{/other_user}",
      "gists_url": "https://api.github.com/users/gereeter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gereeter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gereeter/subscriptions",
      "organizations_url": "https://api.github.com/users/gereeter/orgs",
      "repos_url": "https://api.github.com/users/gereeter/repos",
      "events_url": "https://api.github.com/users/gereeter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gereeter/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-23T18:50:30Z",
    "updated_at": "2015-08-23T18:50:30Z",
    "body": "Preliminary results from my code that doesn't use `is_leaf` flags:\n\n```\ntest rand_1000000_apasel ... bench:         425 ns/iter (+/- 31)\ntest rand_1000000_parent ... bench:         343 ns/iter (+/- 29)\ntest rand_1000000_std    ... bench:         472 ns/iter (+/- 31)\ntest rand_100000_apasel  ... bench:         260 ns/iter (+/- 11)\ntest rand_100000_parent  ... bench:         282 ns/iter (+/- 21)\ntest rand_100000_std     ... bench:         298 ns/iter (+/- 22)\ntest rand_10000_apasel   ... bench:         196 ns/iter (+/- 9)\ntest rand_10000_parent   ... bench:         242 ns/iter (+/- 9)\ntest rand_10000_std      ... bench:         210 ns/iter (+/- 9)\ntest rand_100_apasel     ... bench:         108 ns/iter (+/- 7)\ntest rand_100_parent     ... bench:          99 ns/iter (+/- 6)\ntest rand_100_std        ... bench:         121 ns/iter (+/- 11)\ntest seq_1000000_apasel  ... bench:         181 ns/iter (+/- 4)\ntest seq_1000000_parent  ... bench:         168 ns/iter (+/- 8)\ntest seq_1000000_std     ... bench:         205 ns/iter (+/- 26)\ntest seq_100000_apasel   ... bench:         174 ns/iter (+/- 0)\ntest seq_100000_parent   ... bench:         174 ns/iter (+/- 5)\ntest seq_100000_std      ... bench:         177 ns/iter (+/- 8)\ntest seq_10000_apasel    ... bench:         121 ns/iter (+/- 0)\ntest seq_10000_parent    ... bench:          91 ns/iter (+/- 1)\ntest seq_10000_std       ... bench:         125 ns/iter (+/- 0)\ntest seq_100_apasel      ... bench:          69 ns/iter (+/- 0)\ntest seq_100_parent      ... bench:          46 ns/iter (+/- 3)\ntest seq_100_std         ... bench:          80 ns/iter (+/- 7)\n```\n\nTo be honest, I'm not exactly sure what to make of this:\n- Most of the results look very promising, but, e.g., `rand_10000` has a runtime significantly worse that `std`.\n- The results from @apasel422's branch are worse (in comparison to `std`) than what he was getting on his computer.\n- Many of the results for my branch and `std` got significantly _worse_ after I implemented `Drop`, while @apasel422's results stayed pretty stable. This implies that for some reason `std` was benefitting from a memory leak.\n- My branch, due to the inherent safety issues of not using is_leaf flags, is significantly more compilated than @apasel422's implementation. As a quick check of just the syntactic overhead, my implementation has ~35% more lines than @apasel422's despite not implmenting iteration.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133897163/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133897228",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-133897228",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 133897228,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMzg5NzIyOA==",
    "user": {
      "login": "gereeter",
      "id": 2328242,
      "node_id": "MDQ6VXNlcjIzMjgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2328242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gereeter",
      "html_url": "https://github.com/gereeter",
      "followers_url": "https://api.github.com/users/gereeter/followers",
      "following_url": "https://api.github.com/users/gereeter/following{/other_user}",
      "gists_url": "https://api.github.com/users/gereeter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gereeter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gereeter/subscriptions",
      "organizations_url": "https://api.github.com/users/gereeter/orgs",
      "repos_url": "https://api.github.com/users/gereeter/repos",
      "events_url": "https://api.github.com/users/gereeter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gereeter/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-23T18:51:56Z",
    "updated_at": "2015-08-23T18:51:56Z",
    "body": "My WIP implementation is at https://github.com/gereeter/btree-rewrite.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/133897228/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/134384233",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-134384233",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 134384233,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNDM4NDIzMw==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-24T21:21:39Z",
    "updated_at": "2015-08-24T21:21:39Z",
    "body": "@gereeter Perhaps we can combine forces to tackle this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/134384233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/135194720",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-135194720",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 135194720,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNTE5NDcyMA==",
    "user": {
      "login": "gereeter",
      "id": 2328242,
      "node_id": "MDQ6VXNlcjIzMjgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2328242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gereeter",
      "html_url": "https://github.com/gereeter",
      "followers_url": "https://api.github.com/users/gereeter/followers",
      "following_url": "https://api.github.com/users/gereeter/following{/other_user}",
      "gists_url": "https://api.github.com/users/gereeter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gereeter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gereeter/subscriptions",
      "organizations_url": "https://api.github.com/users/gereeter/orgs",
      "repos_url": "https://api.github.com/users/gereeter/repos",
      "events_url": "https://api.github.com/users/gereeter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gereeter/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-26T22:20:43Z",
    "updated_at": "2015-08-26T22:20:43Z",
    "body": "@apasel422 Yes, that would be a good idea. However, I'm not sure which approach should be used, and unfortunately I don't see any good way of combining our codebases because of all the mechanisms I use to control unsafety that simply aren't necessary in your codebase.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/135194720/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155114293",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-155114293",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 155114293,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NTExNDI5Mw==",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-09T16:27:39Z",
    "updated_at": "2015-11-09T16:27:39Z",
    "body": "Sorry to nag, but it looks like progress halted in all fronts. Is anyone still working on this?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155114293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155121530",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-155121530",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 155121530,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NTEyMTUzMA==",
    "user": {
      "login": "gereeter",
      "id": 2328242,
      "node_id": "MDQ6VXNlcjIzMjgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2328242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gereeter",
      "html_url": "https://github.com/gereeter",
      "followers_url": "https://api.github.com/users/gereeter/followers",
      "following_url": "https://api.github.com/users/gereeter/following{/other_user}",
      "gists_url": "https://api.github.com/users/gereeter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gereeter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gereeter/subscriptions",
      "organizations_url": "https://api.github.com/users/gereeter/orgs",
      "repos_url": "https://api.github.com/users/gereeter/repos",
      "events_url": "https://api.github.com/users/gereeter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gereeter/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-09T16:53:50Z",
    "updated_at": "2015-11-09T16:53:50Z",
    "body": "Sorry for the stagnation. I was (and still am) fairly near completion, just needing to finish removal, but unfortunately schoolwork has been keeping me very busy and I haven't been thinking about this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155121530/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155129740",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-155129740",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 155129740,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NTEyOTc0MA==",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-09T17:17:46Z",
    "updated_at": "2015-11-09T17:17:46Z",
    "body": "@gereeter nice to hear that, did you and @apasel422 figure out the best model for the leaves? \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155129740/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155837409",
    "html_url": "https://github.com/rust-lang/rust/issues/27865#issuecomment-155837409",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27865",
    "id": 155837409,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NTgzNzQwOQ==",
    "user": {
      "login": "gereeter",
      "id": 2328242,
      "node_id": "MDQ6VXNlcjIzMjgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2328242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gereeter",
      "html_url": "https://github.com/gereeter",
      "followers_url": "https://api.github.com/users/gereeter/followers",
      "following_url": "https://api.github.com/users/gereeter/following{/other_user}",
      "gists_url": "https://api.github.com/users/gereeter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gereeter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gereeter/subscriptions",
      "organizations_url": "https://api.github.com/users/gereeter/orgs",
      "repos_url": "https://api.github.com/users/gereeter/repos",
      "events_url": "https://api.github.com/users/gereeter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gereeter/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-11T16:36:20Z",
    "updated_at": "2015-11-11T16:36:20Z",
    "body": "My benchmarks seemed to rule in favor of not using `is_leaf` flags and just tracking what depth you are at.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155837409/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
