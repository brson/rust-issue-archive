[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38215481",
    "html_url": "https://github.com/rust-lang/rust/issues/12876#issuecomment-38215481",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12876",
    "id": 38215481,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjE1NDgx",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-20T20:13:47Z",
    "updated_at": "2014-03-20T20:13:47Z",
    "body": "it seems like this issue description is saying that changing the public API of a crate is a backwards-incompatible change.\n\nThis is true, but it is not clear what action items are actually being suggested here.\n\nClosing as not-a-bug.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38215481/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38217868",
    "html_url": "https://github.com/rust-lang/rust/issues/12876#issuecomment-38217868",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12876",
    "id": 38217868,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjE3ODY4",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-20T20:36:33Z",
    "updated_at": "2014-03-20T20:38:33Z",
    "body": "> it seems like this issue description is saying that changing the public API of a crate is a backwards-incompatible change.\n> \n> This is true, but it is not clear what action items are actually being suggested here.\n\nThat's not what I said at all. I stated that _splitting_ crates is a backwards compatibility hazard and went into details about why, and what should be done about it. The crate hierarchy is part of the public API, not an implementation detail as it is currently treated. If networking is going to be in a module, then _all_ of the networking support should be there. If there's a module for synchronization, then _all_ of the synchronization support should be there.\n\n> There should be support in the compiler and a policy for library development to provide a well-designed, stable API where types are exported where users will expect them. For example, `UnsafeArc` would be expected to exist in the `libsync` module as a basis for new concurrent data structures like a concurrent hash table or LRU cache. It's immaterial whether the standard library makes use of it internally (or `Arc`/`MutexArc`/`RWArc`) when it comes to API design.\n\nOtherwise, the public API is just being determined based on the current needs of the standard library. These needs will continue to change over time. The standard library can have these available internally whether or not users see them as being located elsewhere.\n\n> For example, one of the map implementations may be used in the standard library in the future. It could continue to be export as a public API in the collections module to maintain backwards compatibility. However, if it is public in the standard library too, then it cannot ever move out of the standard library if the dependency is dropped.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38217868/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38218717",
    "html_url": "https://github.com/rust-lang/rust/issues/12876#issuecomment-38218717",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12876",
    "id": 38218717,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjE4NzE3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-20T20:44:06Z",
    "updated_at": "2014-03-20T20:44:06Z",
    "body": "I don't really feel like debating this, so I guess I'm fine with just saying \"I told you so\" down the road when many APIs need to be broken and/or there need to be re-exports in multiple locations for legacy paths.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38218717/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38231658",
    "html_url": "https://github.com/rust-lang/rust/issues/12876#issuecomment-38231658",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12876",
    "id": 38231658,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjMxNjU4",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-20T23:03:39Z",
    "updated_at": "2014-03-20T23:03:39Z",
    "body": "Does the core team have a plan for how to address the concerns raised here, even if this specific issue is considered too vague?\n\nSome concrete examples that I would like concrete guidance about (the use of `sync` and `std` isn't important, I'm sure there will be many other instances of crates _A_ and _B_, where _B_ depends on _A_, but _A_ needs one or two things from _B_):\n- `std` no longer uses `UnsafeArc` (all the functionality that uses it has either moved to `sync` or crates that can depend on `sync`):\n  - Does `std`'s `UnsafeArc` remain in `std` forever?\n  - Or do we mark `std`s `UnsafeArc` deprecated and move it to `sync`? In this case, what happens when `std` regains a use of `UnsafeArc`, does `std`'s `UnsafeArc` then become undeprecated?\n- `std` gains a dependency on `sync::one::Once`. This pulls in the static mutex too.\n  - Do we mark `sync::one::Once` and the static mutex as deprecated in favour of using the `std` versions? (And the same question about what happens when `std` no longer needs `Once`: will it be forced to stay in `std` forever?)\n  - If not, why is there this inconsistency between things that are used by `std`? Some (e.g. `UnsafeArc` and the various atomics) have a canonical path pointing into `std` and others (`Once`) have a canonical path pointing into `sync`.\n\nUnder the naive policy, where we just move things internal implementation details in and out of `std` and expose them publically from `std`, we will end up with a `std` that is the union of _all_ the things that have ever been used by `std` (some with `deprecated` markings, some without): i.e. the public API will be continually bloated by historical cruft.\n\nUnder the policy this issue suggests, we can have the implementations in `std`, but not export them as part of the stable API and then re-export them in the actual crate in which they are relevant. This means that we are then free to remove the implementations in `std` once they are no longer required there. (https://github.com/mozilla/rust/issues/13045 is required for making the documentation sane.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38231658/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38234045",
    "html_url": "https://github.com/rust-lang/rust/issues/12876#issuecomment-38234045",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12876",
    "id": 38234045,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjM0MDQ1",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-20T23:39:48Z",
    "updated_at": "2014-03-20T23:39:48Z",
    "body": "There was some discussion on IRC https://botbot.me/mozilla/rust-internals/msg/12379146/\n\nThe summary something like:\n\nOnly APIs marked #[stable] and above need to be static, and marking things #[stable] is a reasonably large step. Also, the policy for these re-exportation scenarios is still being settled on. As is the design of `std` etc.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/38234045/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
