[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22896896",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-22896896",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 22896896,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODk2ODk2",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-19T19:14:09Z",
    "updated_at": "2013-08-19T19:14:09Z",
    "body": "This is not necessarily related to #6308 -- closure types are not considered dynamically sized in the latest plans. It is certainly related to the idea of replacing closures with traits. Basically goes all the way, removing also `&` closures. The main obstacle here is the need to generalize bound lifetimes, which currently only occur in closure types, to something that can occur in any trait reference.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22896896/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22918707",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-22918707",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 22918707,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTE4NzA3",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-20T02:28:15Z",
    "updated_at": "2013-08-20T02:28:15Z",
    "body": "Not until Rust 2.0\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22918707/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22919037",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-22919037",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 22919037,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTE5MDM3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-20T02:39:13Z",
    "updated_at": "2013-08-20T03:22:37Z",
    "body": "The ability to modify the environment with `&fn` is a backwards compatibility issue since a trait would require `&mut fn` as far as I can tell. I opened a sub-bug for the backwards compatibility hazard. If we did decide to do this, it would make sense to implement that relatively minor change for 1.0.\n\nThe distinction would be marginally useful in the current system because `&fn` would be copyable.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22919037/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22919611",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-22919611",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 22919611,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTE5NjEx",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-20T03:00:01Z",
    "updated_at": "2013-08-20T03:03:05Z",
    "body": "I think this would remove the need for function bounds, since you would just take `T: Send + fn(int, int)` or do `trait Foo: Clone + (fn(int, int) -> bool)`. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22919611/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22992094",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-22992094",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 22992094,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTkyMDk0",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-21T02:39:03Z",
    "updated_at": "2013-08-21T02:50:59Z",
    "body": "I really, really like this idea. (But I'm not a dev or anything.)\n\nBut a problem is that if `&mut fn` can be borrowed to `&fn`, `&fn` can be copied, `&fn` can be called, and `fn` can mutate (with DST you can't prevent the first two), then you can break soundness (in the usual way). The principled solution would be to separately track whether a closure can mutate from mutability of references to it (so `fn` and `fn mut` plus `&` and `&mut`), and adopt the same ownership/aliasing rules for calling mutating closures (through references) as for mutating mutable variables (through references). So\n\n```\n+----------------------------------------------------------+\n|             | Can be called | Can be copied | Can mutate |\n|-------------+---------------+---------------+------------|\n| &fn         |      Yes      |      Yes      |     No     |\n|-------------+---------------+---------------+------------|\n| &fn mut     |      No       |      Yes      |     N/A    |\n|-------------+---------------+---------------+------------|\n| &mut fn     |      Yes      |      No       |     No     |\n|-------------+---------------+---------------+------------|\n| &mut fn mut |      Yes      |      No       |     Yes    |\n+----------------------------------------------------------+\n```\n\n(Again these are the same rules as if you were to substitute `&T` and `&mut T` in place of `fn` and `fn mut`.)\n\nUnfortunately this means that if you want a reference to a mutating closure that you can actually call, you have to write `&mut fn mut` which is somewhat onerous. I'd personally much rather sacrifice a little syntax for nice semantics than the other way around (we already require annotating the possibility of mutation everywhere else!), but again IANAD.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22992094/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22992442",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-22992442",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 22992442,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTkyNDQy",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-21T02:52:39Z",
    "updated_at": "2013-08-21T02:56:12Z",
    "body": "A `fn` would only be mutable if you had it stored in a mutable location, and you wouldn't be able to get one out of `&fn` or `&mut fn` unless the environment (the closure) could be cloned. I think the same guarantees applying to other types would work for it, as long as the environment's lifetime was preserved.\n\nYou wouldn't be able to mutate through an `&mut` captured in the environment if you didn't have either `&mut fn` or an unboxed `fn` in a mutable location without any loans.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22992442/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22992770",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-22992770",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 22992770,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTkyNzcw",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-21T03:06:09Z",
    "updated_at": "2013-08-21T03:06:09Z",
    "body": "If you're referring to the \"[if ...] and `fn` can mutate\" part from above, the problem is not calling a bare `fn` and having it mutate, but calling one through a copyable reference and having it mutate. If `&fn` is callable, copyable, and can mutate, then you can write the code from [nikomatsakis's blog post a few months ago](http://smallcultfollowing.com/babysteps/blog/2013/04/30/the-case-of-the-recurring-closure/).\n\n> You wouldn't be able to mutate through an `&mut` captured in the environment if you didn't have either `&mut fn`\n\nBut if you have `&mut fn` you can get (any number of) `&fn`. Would `&fn` be non-callable?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22992770/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22992798",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-22992798",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 22992798,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTkyNzk4",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-21T03:07:26Z",
    "updated_at": "2013-08-21T03:09:02Z",
    "body": "You wouldn't be able to mutate the environment of `&fn`, it would follow the regular borrowed pointer rules. The current `&fn` would become `&mut fn`. A closure would really _only_ represent the environment, with the unique type of the unboxed closure or the trait function pointer making it actually callable (just like other traits).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22992798/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22993311",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-22993311",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 22993311,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTkzMzEx",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-21T03:28:06Z",
    "updated_at": "2013-08-21T03:28:06Z",
    "body": "I think that @glehel's point is the current rules allow `&mut T` to be borrowed as `&T`, but this is the opposite: `&fn` can become `&mut fn` freely, but not vice versa.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22993311/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22993393",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-22993393",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 22993393,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTkzMzkz",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-21T03:30:40Z",
    "updated_at": "2013-08-21T03:35:09Z",
    "body": "When I say:\n\n> The current &fn would become &mut fn.\n\nI mean the current definition of `&fn` would be identical to the new definition of `&mut fn`.\n\nYou couldn't convert an `&fn` to `&mut fn` - it would have the exact same rules as a borrowed pointer, since they would be trait objects. The proposed `&fn` (same rules as normal borrowed pointers) doesn't exist in the type system today. The ability to call the function is semantically equivalent to the ability to call a method on any normal object.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22993393/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22993540",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-22993540",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 22993540,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTkzNTQw",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-21T03:36:38Z",
    "updated_at": "2013-08-21T03:36:38Z",
    "body": "(Re: your previous comment) I understand that (and like it). I'm assuming here that the DST proposal is also in effect. Are you?\n\n> The current `&fn` would become `&mut fn`.\n\nRight, and there would be a \"new\" `&fn` (really just the composition of `&` and `fn` - an immutable trait object) which is copyable but can't mutate. So far so good. But what happens when you borrow `&mut fn` to `&fn`? Again, DST says that `&mut T` (and likewise `&T`) behaves the same for all `T`, so you can't prevent it.\n\nTo follow the trait analogy, restricting ourselves to single argument functions, consider the possible desugarings of `fn`:\n\n```\ntrait Fn<Arg, Ret> {\n    fn call(&self, Arg) -> Ret; // `self` is the environment\n}\n\ntrait FnMut<Arg, Ret> {\n    fn call(&mut self, Arg) -> Ret;\n}\n```\n\nWhich one would `fn(Arg) -> Ret` desugar to? If it's the first, then it can't mutate the environment. If it's the second, then `&fn` isn't callable (`self` is by `&mut`, but self is immutable). In my earlier post `fn` corresponds to `Fn` and `fn mut` corresponds to `FnMut`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22993540/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22993848",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-22993848",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 22993848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTkzODQ4",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-21T03:47:32Z",
    "updated_at": "2013-08-21T03:48:52Z",
    "body": "The ability to call an object would require compiler support, and wouldn't de-sugar to a method call. The closure trait bound would be special-cased to support the call syntax, and only give you a mutable environment when the object is mutable.\n\nI haven't really considered the ability to implement arbitrary callable objects as part of this - it's a magical capability like indexing on vectors or `Send`. There are no variadic functions so I don't think you could ever implement a normal trait.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22993848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22994332",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-22994332",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 22994332,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTk0MzMy",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-21T04:10:17Z",
    "updated_at": "2013-08-21T04:10:17Z",
    "body": "Right the trait desugaring was only intended as an analogy (and why I restricted it to single-argument).\n\nPossibly I'm being dense. Which part of the following would be illegal?\n\n```\nstruct R<'self> {\n    c: &'self fn(&R)\n}\n\nfn innocent_looking_victim() {\n    let mut vec = ~[1, 2, 3];\n    conspirator(|f| {\n        if vec.len() < 100 {\n            vec.push(4);\n            for vec.each |i| {\n                f.c(&f)\n            }\n        }\n    })\n}\n\n// only this part is different\nfn conspirator(f: &mut fn(&R)) {\n    conspirator_impl(f);\n}\n\nfn conspirator_impl(f: &fn(&R)) {\n    let r = R {c: f};\n    f(&r)\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22994332/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22994416",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-22994416",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 22994416,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTk0NDE2",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-21T04:13:24Z",
    "updated_at": "2013-08-21T04:13:24Z",
    "body": "@glehel: ah, nevermind, I see what you've been saying now\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22994416/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24450064",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-24450064",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 24450064,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDUwMDY0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-14T16:18:29Z",
    "updated_at": "2013-09-14T16:20:19Z",
    "body": "Another way to do this would be representing a stack closure as `fn<T>(...) -> ...` where the `T` is a tuple of the captures. For example, a stack closure might be `fn<(int, &'a u8)>(int) -> bool` and you could take one as a parameter on a generic function like `fn foo<T>(x: fn<T>(int, int) -> bool)`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24450064/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29528307",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-29528307",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 29528307,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NTI4MzA3",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-29T17:14:01Z",
    "updated_at": "2013-11-29T17:14:01Z",
    "body": "cc me\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29528307/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43293338",
    "html_url": "https://github.com/rust-lang/rust/issues/8622#issuecomment-43293338",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8622",
    "id": 43293338,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjkzMzM4",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-16T03:43:42Z",
    "updated_at": "2014-05-16T03:43:42Z",
    "body": "I'm going to close this as obsoleted by the https://github.com/rust-lang/rfcs/pull/77 proposal. If this or something along these lines is accepted, a new bug can be opened for implementing it without the now irrelevant discussion based on the Rust of nearly a year ago.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43293338/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
