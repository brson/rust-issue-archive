[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66829174",
    "html_url": "https://github.com/rust-lang/rust/issues/18895#issuecomment-66829174",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18895",
    "id": 66829174,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODI5MTc0",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-12T20:20:23Z",
    "updated_at": "2014-12-12T20:20:23Z",
    "body": "This behavior changed in cf672850df05a05e8bb5785228c408a24e102d32 with the ability to concurrently build crates in multiple compilation units.\nThe output file is now generated in src/librustc_trans/back/write.rs:639:\n\n``` rust\n 639     let copy_if_one_unit = |ext: &str, output_type: config::OutputType, keep_numbered: bool| {\n 640         // Three cases:\n 641         if sess.opts.cg.codegen_units == 1 {\n 642             // 1) Only one codegen unit.  In this case it's no difficulty\n 643             //    to copy `foo.0.x` to `foo.x`.\n 644             fs::copy(&crate_output.with_extension(ext),\n 645                      &crate_output.path(output_type)).unwrap();\n 646             if !sess.opts.cg.save_temps && !keep_numbered {\n 647                 // The user just wants `foo.x`, not `foo.0.x`.\n 648                 remove(sess, &crate_output.with_extension(ext));\n 649             }\n 650         } else {\n 651             if crate_output.single_output_file.is_some() {\n 652                 // 2) Multiple codegen units, with `-o some_name`.  We have\n 653                 //    no good solution for this case, so warn the user.\n 654                 sess.warn(format!(\"ignoring -o because multiple .{} files were produced\",\n 655                                   ext).as_slice());\n 656             } else {\n 657                 // 3) Multiple codegen units, but no `-o some_name`.  We\n 658                 //    just leave the `foo.0.x` files in place.\n 659                 // (We don't have to do any work in this case.)\n 660             }\n 661         }\n 662     };\n```\n\nIn the first case above, i.e. when there is only one compilation unit, it should be easy to redirect the output to stdout.\nIn the second case (multiple compilations unit) `-o` is currently ignored.\n\nI am not quite sure what other use cases there might be for `-o -` apart from the vim ftplugin and obviously printing to stdout for manual inspection of the generated code.\nSo, do you think it would be sufficient to handle `-` in the first case, or would it make sense to also find a better solution for the second one?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66829174/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/168234694",
    "html_url": "https://github.com/rust-lang/rust/issues/18895#issuecomment-168234694",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18895",
    "id": 168234694,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2ODIzNDY5NA==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-31T18:54:01Z",
    "updated_at": "2015-12-31T18:54:01Z",
    "body": "Triage: with a `t.rs` containing `main() {}`, and the command-line above, this is still happening.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/168234694/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424066200",
    "html_url": "https://github.com/rust-lang/rust/issues/18895#issuecomment-424066200",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18895",
    "id": 424066200,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDA2NjIwMA==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-09-24T17:54:53Z",
    "updated_at": "2018-09-24T17:54:53Z",
    "body": "Triage: no change since my last comment",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424066200/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/621945765",
    "html_url": "https://github.com/rust-lang/rust/issues/18895#issuecomment-621945765",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18895",
    "id": 621945765,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMTk0NTc2NQ==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-04-30T16:00:41Z",
    "updated_at": "2020-04-30T16:00:41Z",
    "body": "I think it's pretty rare that we actually want to direct output to stdout and generally most compilation will create temporary files for linking and such, so I'm going to go ahead and close this.\r\n\r\nAFAICT, fwiw, gcc has the same behavior at least.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/621945765/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/855197450",
    "html_url": "https://github.com/rust-lang/rust/issues/18895#issuecomment-855197450",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18895",
    "id": 855197450,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1NTE5NzQ1MA==",
    "user": {
      "login": "duckinator",
      "id": 39698,
      "node_id": "MDQ6VXNlcjM5Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/39698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/duckinator",
      "html_url": "https://github.com/duckinator",
      "followers_url": "https://api.github.com/users/duckinator/followers",
      "following_url": "https://api.github.com/users/duckinator/following{/other_user}",
      "gists_url": "https://api.github.com/users/duckinator/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/duckinator/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/duckinator/subscriptions",
      "organizations_url": "https://api.github.com/users/duckinator/orgs",
      "repos_url": "https://api.github.com/users/duckinator/repos",
      "events_url": "https://api.github.com/users/duckinator/events{/privacy}",
      "received_events_url": "https://api.github.com/users/duckinator/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-06-05T07:15:08Z",
    "updated_at": "2021-06-05T07:15:08Z",
    "body": "I just ran into this problem today -- tried `rust --emit asm test.rs -o -` and it wrote it to the file `./-`.\r\n\r\nMy usual workaround when programs don't special-case that is to try using `/dev/stdout` directly &mdash; but that just results in this:\r\n\r\n```shellsession\r\n$ rustc --emit asm test.rs -o /dev/stdout\r\nerror: could not write output to /dev/stdout.test.7rcbfp3g-cgu.0.rcgu.s: Operation not supported\r\n\r\nerror: aborting due to previous error\r\n\r\n$\r\n```",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/855197450/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
