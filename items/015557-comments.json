[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48536489",
    "html_url": "https://github.com/rust-lang/rust/issues/15557#issuecomment-48536489",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15557",
    "id": 48536489,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NTM2NDg5",
    "user": {
      "login": "bgamari",
      "id": 1010174,
      "node_id": "MDQ6VXNlcjEwMTAxNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1010174?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bgamari",
      "html_url": "https://github.com/bgamari",
      "followers_url": "https://api.github.com/users/bgamari/followers",
      "following_url": "https://api.github.com/users/bgamari/following{/other_user}",
      "gists_url": "https://api.github.com/users/bgamari/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bgamari/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bgamari/subscriptions",
      "organizations_url": "https://api.github.com/users/bgamari/orgs",
      "repos_url": "https://api.github.com/users/bgamari/repos",
      "events_url": "https://api.github.com/users/bgamari/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bgamari/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-09T21:26:36Z",
    "updated_at": "2014-07-09T21:26:36Z",
    "body": "I've tried looking at this unfortunately it appears to be a bit deep for the time I have available. I found [this patch](https://github.com/bgamari/rust/commit/3b35d1a2a927beed9f2067f8312d806ed1be1cf7) to be somewhat helpful for debugging. It produces,\n\n```\ntest.rs:1:1: 1:1 error: internal compiler error: Type parameter out of range when substituting in region 'a (root type='aRegValue<u32,AReg1<'a>>)\ntest.rs:1 use std::ty::Unsafe;\n```\n\nUnfortunately I'm not familiar enough with the relevant code to know why this might be the case.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48536489/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48546850",
    "html_url": "https://github.com/rust-lang/rust/issues/15557#issuecomment-48546850",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15557",
    "id": 48546850,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NTQ2ODUw",
    "user": {
      "login": "bgamari",
      "id": 1010174,
      "node_id": "MDQ6VXNlcjEwMTAxNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1010174?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bgamari",
      "html_url": "https://github.com/bgamari",
      "followers_url": "https://api.github.com/users/bgamari/followers",
      "following_url": "https://api.github.com/users/bgamari/following{/other_user}",
      "gists_url": "https://api.github.com/users/bgamari/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bgamari/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bgamari/subscriptions",
      "organizations_url": "https://api.github.com/users/bgamari/orgs",
      "repos_url": "https://api.github.com/users/bgamari/repos",
      "events_url": "https://api.github.com/users/bgamari/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bgamari/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-09T23:09:11Z",
    "updated_at": "2014-07-09T23:51:03Z",
    "body": "Here is a more minimal test case,\n\n``` rust\nuse std::ty::Unsafe;\n\nstruct AReg1<'a>(&'a u32);\n\nimpl<'a> Drop for AReg1<'a> {\n  fn drop(&mut self) {}\n}\n```\n\nIf one comments out the `impl Drop` the crash does not occur.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48546850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48628192",
    "html_url": "https://github.com/rust-lang/rust/issues/15557#issuecomment-48628192",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15557",
    "id": 48628192,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjI4MTky",
    "user": {
      "login": "bgamari",
      "id": 1010174,
      "node_id": "MDQ6VXNlcjEwMTAxNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1010174?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bgamari",
      "html_url": "https://github.com/bgamari",
      "followers_url": "https://api.github.com/users/bgamari/followers",
      "following_url": "https://api.github.com/users/bgamari/following{/other_user}",
      "gists_url": "https://api.github.com/users/bgamari/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bgamari/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bgamari/subscriptions",
      "organizations_url": "https://api.github.com/users/bgamari/orgs",
      "repos_url": "https://api.github.com/users/bgamari/repos",
      "events_url": "https://api.github.com/users/bgamari/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bgamari/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-10T16:23:23Z",
    "updated_at": "2014-07-10T16:24:09Z",
    "body": "Here is a rough call graph that I've worked out\n\n```\ndriver::driver::phase_3_run_analysis_passes\n  middle::typeck::check_crate\n    middle::typeck::collect::collect_item_types\n      collect::convert\n        ItemStruct generics has region\n        collect::ty_of_item\n          in ItemStruct case\n          collect::ty_generics_for_type\n            collect::ty_generics\n          converts ItemStruct to PolyTy\n\n        PolyTy generics still has region\n        collect::convert_struct\n          converts ast::StructDef to ty::t\n          mk_item_substs\n          ty::mk_struct\n\n  Somewhere in here Subst on struct is dropped\n\n  middle::kind::check_crate\n    middle::kind::check_item\n      middle::ty::type_contents\n        match on `get(ty).sty`\n        find `ty_struct(did, substs)`\n        middle::ty::struct_fields\n          middle::ty::lookup_field_type\n            middle::subst::Subst::subst_spanned\n              middle::subst::TypeFolder::fold_region(r: ty::Region)\n                match on `r`\n                find ty::ReEarlyBound(_, space, i, region_name)\n                match on `substs.regions`\n                find NonerasedRegions(regions)\n                look for region index `i` in substitutions for space `space`\n                fail\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48628192/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48639328",
    "html_url": "https://github.com/rust-lang/rust/issues/15557#issuecomment-48639328",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15557",
    "id": 48639328,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjM5MzI4",
    "user": {
      "login": "bgamari",
      "id": 1010174,
      "node_id": "MDQ6VXNlcjEwMTAxNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1010174?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bgamari",
      "html_url": "https://github.com/bgamari",
      "followers_url": "https://api.github.com/users/bgamari/followers",
      "following_url": "https://api.github.com/users/bgamari/following{/other_user}",
      "gists_url": "https://api.github.com/users/bgamari/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bgamari/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bgamari/subscriptions",
      "organizations_url": "https://api.github.com/users/bgamari/orgs",
      "repos_url": "https://api.github.com/users/bgamari/repos",
      "events_url": "https://api.github.com/users/bgamari/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bgamari/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-10T17:48:55Z",
    "updated_at": "2014-07-10T17:48:55Z",
    "body": "The problem appears to be [here](https://github.com/rust-lang/rust/blob/7ab9bfab4e623f67ea32db1ec50f8b79c1514e40/src/librustc/middle/kind.rs#L91) where a new `ty::t` is created with an empty `Substs`. When the substitution engine then goes to perform a substitution for `'a`, it finds none and crashes.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48639328/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48640152",
    "html_url": "https://github.com/rust-lang/rust/issues/15557#issuecomment-48640152",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15557",
    "id": 48640152,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjQwMTUy",
    "user": {
      "login": "bgamari",
      "id": 1010174,
      "node_id": "MDQ6VXNlcjEwMTAxNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1010174?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bgamari",
      "html_url": "https://github.com/bgamari",
      "followers_url": "https://api.github.com/users/bgamari/followers",
      "following_url": "https://api.github.com/users/bgamari/following{/other_user}",
      "gists_url": "https://api.github.com/users/bgamari/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bgamari/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bgamari/subscriptions",
      "organizations_url": "https://api.github.com/users/bgamari/orgs",
      "repos_url": "https://api.github.com/users/bgamari/repos",
      "events_url": "https://api.github.com/users/bgamari/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bgamari/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-10T17:55:10Z",
    "updated_at": "2014-07-10T17:55:10Z",
    "body": "Perhaps the check,\n\n``` rust\nif !struct_tpt.generics.has_type_params(subst::TypeSpace) { ... }\n```\n\nis supposed to read,\n\n```\nif !struct_tpt.generics.has_type_params(subst::TypeSpace)\n  && !struct_tpt.generics.has_region_params(subst::TypeSpace) { ... }\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48640152/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48663709",
    "html_url": "https://github.com/rust-lang/rust/issues/15557#issuecomment-48663709",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15557",
    "id": 48663709,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjYzNzA5",
    "user": {
      "login": "bgamari",
      "id": 1010174,
      "node_id": "MDQ6VXNlcjEwMTAxNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1010174?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bgamari",
      "html_url": "https://github.com/bgamari",
      "followers_url": "https://api.github.com/users/bgamari/followers",
      "following_url": "https://api.github.com/users/bgamari/following{/other_user}",
      "gists_url": "https://api.github.com/users/bgamari/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bgamari/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bgamari/subscriptions",
      "organizations_url": "https://api.github.com/users/bgamari/orgs",
      "repos_url": "https://api.github.com/users/bgamari/repos",
      "events_url": "https://api.github.com/users/bgamari/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bgamari/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-10T21:00:49Z",
    "updated_at": "2014-07-10T21:00:49Z",
    "body": "Closing in favor of the pull request.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48663709/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
