[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56003459",
    "html_url": "https://github.com/rust-lang/rust/issues/17360#issuecomment-56003459",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17360",
    "id": 56003459,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MDAzNDU5",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-18T07:21:40Z",
    "updated_at": "2014-09-18T07:21:40Z",
    "body": "Yes, we could do that for subprocesses, but what about syntax extension dylibs?   I guess this depends on why we are munging PATH/DYLD_LIBRARY_PATH/LD_LIBRARY_PATH:\n- Is this because we want the OS to find the extension dylib itself?   If so, we could just search along the augmented path ourselves, then load by absolute path.\n- Or, is this because we need the OS to be able to find other dylibs that the extension dylib depends on?   In this case, I don't see another way but to munge the PATH envvar.  I don't know about Linux, but Windows does not seem to have a concept of a per-thread dll search path...\n\n@pnkfelix, looks like you wrote the relevant bit of code in dynamic_lib.rs.  Do you remember which of the two it was?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56003459/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56006021",
    "html_url": "https://github.com/rust-lang/rust/issues/17360#issuecomment-56006021",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17360",
    "id": 56006021,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MDA2MDIx",
    "user": {
      "login": "vadimcn",
      "id": 3203809,
      "node_id": "MDQ6VXNlcjMyMDM4MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadimcn",
      "html_url": "https://github.com/vadimcn",
      "followers_url": "https://api.github.com/users/vadimcn/followers",
      "following_url": "https://api.github.com/users/vadimcn/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions",
      "organizations_url": "https://api.github.com/users/vadimcn/orgs",
      "repos_url": "https://api.github.com/users/vadimcn/repos",
      "events_url": "https://api.github.com/users/vadimcn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadimcn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-18T07:53:13Z",
    "updated_at": "2014-09-18T07:53:13Z",
    "body": "For the case 2, I suppose we could add `DynamicLibrary::open_with_search_path(String, [Path])` with an internal mutex, that would temporarily alter PATH before delegating to `open()`.  Of course, this would still race with direct calls to `os::setenv(\"PATH\", ...)`, but better than nothing.\nIn fact, because `os::setenv` essentially allows to mutate global variables, perhaps it should be marked as unsafe?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56006021/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56008845",
    "html_url": "https://github.com/rust-lang/rust/issues/17360#issuecomment-56008845",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17360",
    "id": 56008845,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2MDA4ODQ1",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-18T08:24:28Z",
    "updated_at": "2014-09-18T17:20:48Z",
    "body": "I thought it was case 1.\n\nInteresting idea, marking `setenv` as unsafe... though note that the rules about when code needs to be annotated with `unsafe` is really meant to ensure _data race_ freedom in safe code, not arbitrary race freedom\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56008845/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/137485564",
    "html_url": "https://github.com/rust-lang/rust/issues/17360#issuecomment-137485564",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17360",
    "id": 137485564,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNzQ4NTU2NA==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-03T15:27:49Z",
    "updated_at": "2015-09-03T15:27:49Z",
    "body": "Triage: In #17327, @alexcrichton mentions this block of code: https://github.com/rust-lang/rust/blob/1661947014fc2ecbbb7a30b1604499500dcf767e/src/librustc_driver/driver.rs#L516-L522\n\nIt looks like this code still doesn't prevent adding to the path over and over again.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/137485564/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/223498673",
    "html_url": "https://github.com/rust-lang/rust/issues/17360#issuecomment-223498673",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17360",
    "id": 223498673,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMzQ5ODY3Mw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-03T06:09:40Z",
    "updated_at": "2016-06-03T06:09:40Z",
    "body": "I believe we've been seeing this a lot recently as #33844, which is spurious test failures from _something_ being too big, and it's probably environment variables (#17327 coming back to haunt us)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/223498673/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
