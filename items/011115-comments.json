[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31096813",
    "html_url": "https://github.com/rust-lang/rust/issues/11115#issuecomment-31096813",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11115",
    "id": 31096813,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDk2ODEz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-22T21:48:23Z",
    "updated_at": "2013-12-22T21:48:23Z",
    "body": "This is vaguely along the lines of #10573 as well. There's a question as to whether we want to allow this at all, but it definitely seems bad that there's a link error today.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31096813/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31962014",
    "html_url": "https://github.com/rust-lang/rust/issues/11115#issuecomment-31962014",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11115",
    "id": 31962014,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxOTYyMDE0",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-09T18:33:54Z",
    "updated_at": "2014-01-09T18:33:54Z",
    "body": "Just a bug, denominating.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31962014/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51035793",
    "html_url": "https://github.com/rust-lang/rust/issues/11115#issuecomment-51035793",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11115",
    "id": 51035793,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDM1Nzkz",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-04T09:30:32Z",
    "updated_at": "2014-08-04T09:30:32Z",
    "body": "Doesn't seem to have anything to do with type parameters, neither fields nor methods are taken into consideration (probably assuming that a field or a method can't expose a private type with public methods):\n\n``` rust\n#![crate_type=\"lib\"]\n\npub struct Foo {\n    pub x: Bar\n}\n\nimpl Foo {\n    pub fn new() -> Foo {\n        Foo { x: Bar}\n    }\n    pub fn get_x(&self) -> Bar {\n        self.x\n    }\n}\n\nstruct Bar;\n\nimpl Bar {\n    pub fn bar(&self) {\n        println!(\"onoez\");\n    }\n}\n```\n\n```\n<anon>:4:12: 4:15 warning: private type in exported type signature, #[warn(visible_private_types)] on by default\n<anon>:4     pub x: Bar\n                    ^~~\n<anon>:11:28: 11:31 warning: private type in exported type signature, #[warn(visible_private_types)] on by default\n<anon>:11     pub fn get_x(&self) -> Bar {\n                                     ^~~\n<anon>:19:5: 21:6 warning: code is never used: `bar`, #[warn(dead_code)] on by default\n<anon>:19     pub fn bar(&self) {\n<anon>:20         println!(\"onoez\");\n<anon>:21     }\n```\n\nThe link error is still there, using either the field or the method to get a `Bar` value.\nAFAICT, the lint reports the results of a reachability analysis that is also used in determining the visibility of symbols.\n`objdump` reports the presence of a `Bar::bar` function in the resulting `libfoo.rlib/foo.o` object file, whether or not it is called in the `foo` crate, however, it is always a local symbol.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51035793/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76593253",
    "html_url": "https://github.com/rust-lang/rust/issues/11115#issuecomment-76593253",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11115",
    "id": 76593253,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2NTkzMjUz",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-01T11:42:18Z",
    "updated_at": "2015-03-01T11:42:18Z",
    "body": "Since this bug was filed, struct fields have switched from public by default to private by default, and, private types in public position have been outlawed, meaning (a) the external crate crate in @cmr's original example fails to compile before hitting linking errors (`f.x` is inaccessible) and (b) @eddyb's updated example also fails to compile with\n\n```\n<anon>:4:12: 4:15 error: private type in exported type signature\n<anon>:4     pub x: Bar\n                    ^~~\n<anon>:11:28: 11:31 error: private type in exported type signature\n<anon>:11     pub fn get_x(&self) -> Bar {\n                                     ^~~\n```\n\nClosing.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76593253/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
