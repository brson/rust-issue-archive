[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76387263",
    "html_url": "https://github.com/rust-lang/rust/issues/14844#issuecomment-76387263",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14844",
    "id": 76387263,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2Mzg3MjYz",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-27T12:27:16Z",
    "updated_at": "2015-02-27T12:27:16Z",
    "body": "Same error, different situation: \n\n``` rust\n\nstruct A<T> {\n    inner: T,\n}\n\nimpl<T> Iterator for A<T> {\n    type Item = u8;\n    fn next(&mut self) -> Option<u8> {\n        fn helper(sel: &Self) -> u8 {\n            unimplemented!();\n        }\n        Some(helper(self))\n    }\n}\n\nfn main() {\n}\n```\n\nyields\n\n```\n<anon>:6:24: 6:25 error: can't use type parameters from outer function; try using a local type parameter instead\n<anon>:6 impl<T> Iterator for A<T> {\n                                ^\n<anon>:6:24: 6:25 error: use of undeclared type name `T`\n<anon>:6 impl<T> Iterator for A<T> {\n                                ^\n```\n\nchanging the inner function to \n\n``` rust\nstruct A<T> {\n    inner: T,\n}\n\nimpl<T> Iterator for A<T> {\n    type Item = u8;\n    fn next(&mut self) -> Option<u8> {\n        fn helper<U>(sel: &A<U>) -> u8 {\n            unimplemented!();\n        }\n        Some(helper(self))\n    }\n}\n\nfn main() {\n}\n```\n\nsolves the problem\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76387263/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221396813",
    "html_url": "https://github.com/rust-lang/rust/issues/14844#issuecomment-221396813",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14844",
    "id": 221396813,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTM5NjgxMw==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-24T20:49:05Z",
    "updated_at": "2016-05-24T20:49:05Z",
    "body": "Triage: @pnkfelix 's example now produces the same error as @oli-obk 's.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221396813/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221488317",
    "html_url": "https://github.com/rust-lang/rust/issues/14844#issuecomment-221488317",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14844",
    "id": 221488317,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTQ4ODMxNw==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-25T06:52:24Z",
    "updated_at": "2016-05-25T06:52:24Z",
    "body": "Yes the number of errors reported is now reasonable,  but it still leads to head scratching because it doesn't make it clear that one needs a binding on the `impl` block \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221488317/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/331316573",
    "html_url": "https://github.com/rust-lang/rust/issues/14844#issuecomment-331316573",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14844",
    "id": 331316573,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMTMxNjU3Mw==",
    "user": {
      "login": "estebank",
      "id": 1606434,
      "node_id": "MDQ6VXNlcjE2MDY0MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/estebank",
      "html_url": "https://github.com/estebank",
      "followers_url": "https://api.github.com/users/estebank/followers",
      "following_url": "https://api.github.com/users/estebank/following{/other_user}",
      "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/estebank/subscriptions",
      "organizations_url": "https://api.github.com/users/estebank/orgs",
      "repos_url": "https://api.github.com/users/estebank/repos",
      "events_url": "https://api.github.com/users/estebank/events{/privacy}",
      "received_events_url": "https://api.github.com/users/estebank/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-09-22T00:21:21Z",
    "updated_at": "2017-09-22T00:21:21Z",
    "body": "Current output:\r\n\r\n```\r\nerror[E0401]: can't use type parameters from outer function; try using a local type parameter instead\r\n --> src/main.rs:5:20\r\n  |\r\n5 |     impl Bar for S<T> {\r\n  |                    ^ use of type variable from outer function\r\n\r\nerror[E0392]: parameter `T` is never used\r\n --> src/main.rs:4:14\r\n  |\r\n4 |     struct S<T>;\r\n  |              ^ unused type parameter\r\n  |\r\n  = help: consider removing `T` or using a marker such as `std::marker::PhantomData`\r\n```\r\n\r\n---\r\n\r\n[`adjust_local_def`], when [checking the type parameters](https://github.com/rust-lang/rust/blob/17f56c549c35bb2cb316e5abff116e65277c7bb1/src/librustc_resolve/lib.rs#L3016-L3035) we should look at the current scope (I believe it is the `rib`'s scope, the `def`'s scope is the type argument) to get the span for it and point at the definition. I believe the ideal output is the following:\r\n\r\n```\r\nerror[E0401]: can't use type parameters from outer function\r\n  --> src/main.rs:5:20\r\n3 | pub fn foo<T>() {\r\n  |            - type variable from outer function\r\n...\r\n5 |     impl Bar for S<T> {\r\n  |                    ^ use of type variable from outer function\r\nnote: try using a local type parameter instead\r\n  |\r\n5 |     impl<T> Bar for S<T> {\r\n  |         ^^^\r\n```\r\n\r\nImplementing the suggestion might be slightly harder than just pointing out at the outer type parameter.\r\n\r\n[`adjust_local_def`]: https://github.com/rust-lang/rust/blob/17f56c549c35bb2cb316e5abff116e65277c7bb1/src/librustc_resolve/lib.rs#L2943-L2948",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/331316573/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/357989016",
    "html_url": "https://github.com/rust-lang/rust/issues/14844#issuecomment-357989016",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14844",
    "id": 357989016,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1Nzk4OTAxNg==",
    "user": {
      "login": "zilbuz",
      "id": 434964,
      "node_id": "MDQ6VXNlcjQzNDk2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/434964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zilbuz",
      "html_url": "https://github.com/zilbuz",
      "followers_url": "https://api.github.com/users/zilbuz/followers",
      "following_url": "https://api.github.com/users/zilbuz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zilbuz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zilbuz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zilbuz/subscriptions",
      "organizations_url": "https://api.github.com/users/zilbuz/orgs",
      "repos_url": "https://api.github.com/users/zilbuz/repos",
      "events_url": "https://api.github.com/users/zilbuz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zilbuz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-16T15:07:09Z",
    "updated_at": "2018-01-16T15:12:29Z",
    "body": "I'll try to tackle that. @estebank Where should I contact you if I have some questions ?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/357989016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358277327",
    "html_url": "https://github.com/rust-lang/rust/issues/14844#issuecomment-358277327",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14844",
    "id": 358277327,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODI3NzMyNw==",
    "user": {
      "login": "zilbuz",
      "id": 434964,
      "node_id": "MDQ6VXNlcjQzNDk2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/434964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zilbuz",
      "html_url": "https://github.com/zilbuz",
      "followers_url": "https://api.github.com/users/zilbuz/followers",
      "following_url": "https://api.github.com/users/zilbuz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zilbuz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zilbuz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zilbuz/subscriptions",
      "organizations_url": "https://api.github.com/users/zilbuz/orgs",
      "repos_url": "https://api.github.com/users/zilbuz/repos",
      "events_url": "https://api.github.com/users/zilbuz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zilbuz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-17T11:30:24Z",
    "updated_at": "2018-01-17T11:30:24Z",
    "body": "So I poked around, and the `rib` variable doesn't have any span informations: its `bindings` member is empty and the `kind` member doesn't carry any additionnal informations. How should I retrieve the span?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358277327/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358415718",
    "html_url": "https://github.com/rust-lang/rust/issues/14844#issuecomment-358415718",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14844",
    "id": 358415718,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODQxNTcxOA==",
    "user": {
      "login": "estebank",
      "id": 1606434,
      "node_id": "MDQ6VXNlcjE2MDY0MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/estebank",
      "html_url": "https://github.com/estebank",
      "followers_url": "https://api.github.com/users/estebank/followers",
      "following_url": "https://api.github.com/users/estebank/following{/other_user}",
      "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/estebank/subscriptions",
      "organizations_url": "https://api.github.com/users/estebank/orgs",
      "repos_url": "https://api.github.com/users/estebank/repos",
      "events_url": "https://api.github.com/users/estebank/events{/privacy}",
      "received_events_url": "https://api.github.com/users/estebank/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-17T19:29:00Z",
    "updated_at": "2018-01-17T19:29:00Z",
    "body": "@zilbuz sorry for not getting back to you yesterday. As mentioned in passing in https://github.com/rust-lang/rust/issues/47319#issuecomment-356770975, we probably should modify `ParamTy` to include its span, so that we can use it here. This will require you to modify several files to pass in the span to it and to ignore it on usages, but it should be straightforward.\r\n\r\nYou can keep updating this ticket, and once you've created a PR move the conversation there. Make sure to include \"r? @estebank\" in the description so that I review it.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358415718/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358434217",
    "html_url": "https://github.com/rust-lang/rust/issues/14844#issuecomment-358434217",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/14844",
    "id": 358434217,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODQzNDIxNw==",
    "user": {
      "login": "zilbuz",
      "id": 434964,
      "node_id": "MDQ6VXNlcjQzNDk2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/434964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zilbuz",
      "html_url": "https://github.com/zilbuz",
      "followers_url": "https://api.github.com/users/zilbuz/followers",
      "following_url": "https://api.github.com/users/zilbuz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zilbuz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zilbuz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zilbuz/subscriptions",
      "organizations_url": "https://api.github.com/users/zilbuz/orgs",
      "repos_url": "https://api.github.com/users/zilbuz/repos",
      "events_url": "https://api.github.com/users/zilbuz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zilbuz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-17T20:27:57Z",
    "updated_at": "2018-01-17T20:27:57Z",
    "body": "Won't the `ParamTy` here contain the span for the `T` in `impl Bar for S<T>` (the one we already have)? I'm a bit confused about what the `ParamTy` represents here I think. Anyway I'll try to modify the `ParamTy` and get back to you in the PR.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358434217/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
