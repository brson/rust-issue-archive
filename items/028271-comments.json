[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/138095336",
    "html_url": "https://github.com/rust-lang/rust/issues/28271#issuecomment-138095336",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28271",
    "id": 138095336,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzODA5NTMzNg==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-06T16:03:43Z",
    "updated_at": "2015-09-06T16:04:19Z",
    "body": "The problem is that, if D2 isn't fixed (as in your example), there could be multiple paths from `D1 -> D2 -> D3` given multiple `Convert` implementations on `C1` and `C2`. Unfortunately, `D2` can't be specifid when calling `Convert::<D1, D3>::convert` because the trait only knows about the endpoints, not the intermediate. Therefore, you have to specify `D2` in the struct (`Combine`) itself. One way to do this is to use a `PhantomData<fn(D1) -> D2>` to assert that `C1` goes from `D1 -> D2`. This will be `Send + Sync + Copy`.\n\nAlternatively, if you don't want to be able to parametrize `Convert` on the output type, you can use an associated type and the `unboxed_closures` unstable feature:\n\n``` rust\n#![feature(unboxed_closures)]\n\npub trait Convert<Input> {\n    type Output;\n\n    fn convert(&self, data: Input) -> Self::Output;\n}\n\nimpl<Input, T> Convert<Input> for T\n    where T: Fn<(Input,)>\n{\n    type Output = T::Output;\n    fn convert(&self, data: Input) -> Self::Output {\n        (*self)(data)\n    }\n}\n\n//combines 2 Converts into 1\npub struct Combine<C1, C2>\n{\n    a: C1,\n    b: C2\n}\n\nimpl<C1, C2, Input> Convert<Input> for Combine<C1, C2>\n    where C1: Convert<Input>,\n          C2: Convert<C1::Output>\n{\n    type Output = C2::Output;\n\n    fn convert(&self, data: Input) -> Self::Output {\n        let value = self.a.convert(data);\n        self.b.convert(value)\n    }\n}\n\nfn main(){\n    let converter = Combine{\n        a: |d|{\"\".to_string()},\n        b: |d|{true}\n    };\n    let value:bool = converter.convert(4);\n    println!(\"value: {:?}\", value);\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/138095336/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/138097337",
    "html_url": "https://github.com/rust-lang/rust/issues/28271#issuecomment-138097337",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28271",
    "id": 138097337,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzODA5NzMzNw==",
    "user": {
      "login": "fuchsnj",
      "id": 6706944,
      "node_id": "MDQ6VXNlcjY3MDY5NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6706944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fuchsnj",
      "html_url": "https://github.com/fuchsnj",
      "followers_url": "https://api.github.com/users/fuchsnj/followers",
      "following_url": "https://api.github.com/users/fuchsnj/following{/other_user}",
      "gists_url": "https://api.github.com/users/fuchsnj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fuchsnj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fuchsnj/subscriptions",
      "organizations_url": "https://api.github.com/users/fuchsnj/orgs",
      "repos_url": "https://api.github.com/users/fuchsnj/repos",
      "events_url": "https://api.github.com/users/fuchsnj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fuchsnj/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-06T16:17:36Z",
    "updated_at": "2015-09-06T16:17:36Z",
    "body": "Thanks, I think that clears up the issue for me. Looks like this isn't really a problem after all. Closing.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/138097337/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
