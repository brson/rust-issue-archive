{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/4687",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/4687/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/4687/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/4687/events",
  "html_url": "https://github.com/rust-lang/rust/pull/4687",
  "id": 10449759,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MzkwMTcwNw==",
  "number": 4687,
  "title": "Use task local random when initializing LinearMap",
  "user": {
    "login": "alexcrichton",
    "id": 64996,
    "node_id": "MDQ6VXNlcjY0OTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexcrichton",
    "html_url": "https://github.com/alexcrichton",
    "followers_url": "https://api.github.com/users/alexcrichton/followers",
    "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
    "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
    "repos_url": "https://api.github.com/users/alexcrichton/repos",
    "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 4,
  "created_at": "2013-01-30T07:52:41Z",
  "updated_at": "2014-07-03T10:56:57Z",
  "closed_at": "2013-01-30T22:48:51Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/4687",
    "html_url": "https://github.com/rust-lang/rust/pull/4687",
    "diff_url": "https://github.com/rust-lang/rust/pull/4687.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/4687.patch",
    "merged_at": "2013-01-30T22:48:51Z"
  },
  "body": "I have a project for rust which makes extensive use of hash maps. I recently changed everything over to `LinearMap`, and was then profiling some very slow portions of the program.\n\nI ended up finding that an absurd amount of time was spent in the `read` syscall, all from invocations of the function `rng::Rng`. I found that each time a hash map was created, a new random object was created. To get around this, this change just uses the task local random instead of creating a new one every time.\n\nI'm not super familiar with how the hashing algorithm works using these random numbers, so I'm not sure if this would affect the quality of hashing or anything like that. If this does mess up something with that, I imagine that there should still be a faster way of creating a new map?\n\nRegardless, my one test I was running went from a runtime of 1 minute to 12 seconds, to it was a pretty big win in that respect!\n",
  "closed_by": {
    "login": "catamorphism",
    "id": 427212,
    "node_id": "MDQ6VXNlcjQyNzIxMg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/catamorphism",
    "html_url": "https://github.com/catamorphism",
    "followers_url": "https://api.github.com/users/catamorphism/followers",
    "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
    "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
    "organizations_url": "https://api.github.com/users/catamorphism/orgs",
    "repos_url": "https://api.github.com/users/catamorphism/repos",
    "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
    "received_events_url": "https://api.github.com/users/catamorphism/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/4687/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/4687/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
