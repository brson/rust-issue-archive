[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/120163205",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-120163205",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 120163205,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMDE2MzIwNQ==",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-09T22:14:11Z",
    "updated_at": "2015-07-09T22:14:11Z",
    "body": "This is a dupe of https://github.com/rust-lang/rust/issues/7671 which I suspect may've been accidentally closed. (i.e. the patch that closed it was modified to no longer tackle it.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/120163205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/120438025",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-120438025",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 120438025,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMDQzODAyNQ==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-10T15:36:07Z",
    "updated_at": "2015-07-10T15:36:07Z",
    "body": "#19839 is relevant.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/120438025/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129698062",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-129698062",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 129698062,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyOTY5ODA2Mg==",
    "user": {
      "login": "eefriedman",
      "id": 12769964,
      "node_id": "MDQ6VXNlcjEyNzY5OTY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/12769964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eefriedman",
      "html_url": "https://github.com/eefriedman",
      "followers_url": "https://api.github.com/users/eefriedman/followers",
      "following_url": "https://api.github.com/users/eefriedman/following{/other_user}",
      "gists_url": "https://api.github.com/users/eefriedman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eefriedman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eefriedman/subscriptions",
      "organizations_url": "https://api.github.com/users/eefriedman/orgs",
      "repos_url": "https://api.github.com/users/eefriedman/repos",
      "events_url": "https://api.github.com/users/eefriedman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eefriedman/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-11T04:24:15Z",
    "updated_at": "2015-08-11T04:24:15Z",
    "body": "The bounds that `#[derive]` uses aren't conservative, they're just wrong.  Whether a type parameter implements the derived trait is in theory unrelated to whether a given field implements that trait.  The defaults just appear to work most of the time because in practice people use traits and field types where the approximation is reasonably accurate.\n\nUnfortunately, the obvious fix (just bounding the field types) causes breakage:\n\n``` rust\n#[derive(Clone)]\nstruct Item<A> { inner: A }\n#[derive(Clone)]\npub struct IntoIter<A> { inner: Item<A> }\n// The obvious bound is `Item<A> : Clone`, but we can't use that bound\n// because `Item` is private.\n```\n\nAnd actually, in the general case there is no bound we can expose because it could involve a requirement that a parameter type implements a private trait.\n\nWe could in theory special-case certain types syntactically, but that only improves a few special cases like Clone of a reference.\n\nIt's possible that we could punt computing the bounds off to type-checking (add syntax like `where each field : Clone`), and come up with a type-sensitive heuristic; that's probably a lot of work, though.  We could also extend the #[derive] syntax to allow the user to specify the correct bounds; easy to implement, but not very intuitive to use.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/129698062/reactions",
      "total_count": 27,
      "+1": 25,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 2
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147775555",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-147775555",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 147775555,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0Nzc3NTU1NQ==",
    "user": {
      "login": "Yoric",
      "id": 10190,
      "node_id": "MDQ6VXNlcjEwMTkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/10190?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Yoric",
      "html_url": "https://github.com/Yoric",
      "followers_url": "https://api.github.com/users/Yoric/followers",
      "following_url": "https://api.github.com/users/Yoric/following{/other_user}",
      "gists_url": "https://api.github.com/users/Yoric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Yoric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Yoric/subscriptions",
      "organizations_url": "https://api.github.com/users/Yoric/orgs",
      "repos_url": "https://api.github.com/users/Yoric/repos",
      "events_url": "https://api.github.com/users/Yoric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Yoric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-13T16:53:05Z",
    "updated_at": "2015-10-13T16:53:05Z",
    "body": "In terms of syntax, it might perhaps be possible to generalize `?` and let devs specify `where T: ?Clone`. Not sure how the compiler would interpret this post-derive, though.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147775555/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151946617",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-151946617",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 151946617,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MTk0NjYxNw==",
    "user": {
      "login": "jorendorff",
      "id": 283361,
      "node_id": "MDQ6VXNlcjI4MzM2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/283361?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jorendorff",
      "html_url": "https://github.com/jorendorff",
      "followers_url": "https://api.github.com/users/jorendorff/followers",
      "following_url": "https://api.github.com/users/jorendorff/following{/other_user}",
      "gists_url": "https://api.github.com/users/jorendorff/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jorendorff/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jorendorff/subscriptions",
      "organizations_url": "https://api.github.com/users/jorendorff/orgs",
      "repos_url": "https://api.github.com/users/jorendorff/repos",
      "events_url": "https://api.github.com/users/jorendorff/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jorendorff/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": true
    },
    "created_at": "2015-10-28T18:40:24Z",
    "updated_at": "2015-10-28T18:40:24Z",
    "body": "GHC handles the case described in @eefriedman's comment:\n\n```\nmodule DeriveShowPrivate(IntoIter(IntoIter), f) where\ndata Item a = Item { itemInner :: a } deriving Show\ndata IntoIter a = IntoIter { inner :: Item a } deriving Show\nf v = IntoIter {inner = Item {itemInner = v}}\n```\n\nIt works:\n\n```\nimport DeriveShowPrivate(f)\nmain = putStrLn (show (f 37))\n```\n\nThe output is:\n\n```\nIntoIter {inner = Item {itemInner = 37}}\n```\n\nMaybe GHC \"inlines\" the private bounds until it obtains all-public bounds.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151946617/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/299707880",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-299707880",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 299707880,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTcwNzg4MA==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-07T13:55:22Z",
    "updated_at": "2017-05-07T13:55:22Z",
    "body": "There are also cases where `derive` is more conservative than it should be, see https://github.com/rust-lang/rust/issues/32872 and https://github.com/rust-lang/rust/issues/31518.\r\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/299707880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/299708400",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-299708400",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 299708400,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTcwODQwMA==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-07T14:04:25Z",
    "updated_at": "2017-05-07T14:04:25Z",
    "body": "(Some contrivance ahead.)\r\n\r\nIf the bounds would be dropped when possible for existing code, the following would lose its good and intended meaning. The effect would be that `RefMut<'a, T>` were suddenly `Copy`, which is something that we imagine is not desirable, even a memory error.\r\n\r\n```rust\r\n#[derive(Copy, Clone)]\r\npub struct Ptr<Mark>(*mut u8, PhantomData<Mark>);\r\n\r\npub type Ref<'a, T: 'a> = Ptr<&'a T>;\r\npub type RefMut<'a, T: 'a> = Ptr<&'a mut T>;\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/299708400/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/299709166",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-299709166",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 299709166,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTcwOTE2Ng==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-07T14:17:12Z",
    "updated_at": "2017-05-07T14:17:12Z",
    "body": "With that I think that even if the bounds are plain wrong, they are part of the stock recipe that one can conjure with derive, it's \u201cpart of what you order\u201d and we can't change that backwards incompatibly.\r\n\r\nDerive can however grow bells and whistles, like the bound customization that rust-derivative and serde offer.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/299709166/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/299754585",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-299754585",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 299754585,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTc1NDU4NQ==",
    "user": {
      "login": "comex",
      "id": 47517,
      "node_id": "MDQ6VXNlcjQ3NTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/comex",
      "html_url": "https://github.com/comex",
      "followers_url": "https://api.github.com/users/comex/followers",
      "following_url": "https://api.github.com/users/comex/following{/other_user}",
      "gists_url": "https://api.github.com/users/comex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/comex/subscriptions",
      "organizations_url": "https://api.github.com/users/comex/orgs",
      "repos_url": "https://api.github.com/users/comex/repos",
      "events_url": "https://api.github.com/users/comex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/comex/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-08T01:56:18Z",
    "updated_at": "2017-05-08T01:56:18Z",
    "body": "*If* there's a good way to make derive do the right thing, the backwards incompatibility issue sounds like the kind of thing epochs could handle.  ",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/299754585/reactions",
      "total_count": 6,
      "+1": 6,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/310915613",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-310915613",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 310915613,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDkxNTYxMw==",
    "user": {
      "login": "ordian",
      "id": 4211399,
      "node_id": "MDQ6VXNlcjQyMTEzOTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4211399?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ordian",
      "html_url": "https://github.com/ordian",
      "followers_url": "https://api.github.com/users/ordian/followers",
      "following_url": "https://api.github.com/users/ordian/following{/other_user}",
      "gists_url": "https://api.github.com/users/ordian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ordian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ordian/subscriptions",
      "organizations_url": "https://api.github.com/users/ordian/orgs",
      "repos_url": "https://api.github.com/users/ordian/repos",
      "events_url": "https://api.github.com/users/ordian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ordian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-06-25T17:19:49Z",
    "updated_at": "2017-06-25T17:19:49Z",
    "body": "Another example:\r\n```rust\r\nuse std::cell::RefCell;\r\n#[derive(Default)]\r\npub struct LazyCell<T> {\r\n    inner: RefCell<Option<T>>,\r\n}\r\n```\r\nautomatically derived default impl requries ```T: Default```, even though ```Default``` is implemented for ``` Option<T>``` for every ```T```.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/310915613/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/313770702",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-313770702",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 313770702,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzc3MDcwMg==",
    "user": {
      "login": "nrxus",
      "id": 2774084,
      "node_id": "MDQ6VXNlcjI3NzQwODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2774084?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nrxus",
      "html_url": "https://github.com/nrxus",
      "followers_url": "https://api.github.com/users/nrxus/followers",
      "following_url": "https://api.github.com/users/nrxus/following{/other_user}",
      "gists_url": "https://api.github.com/users/nrxus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nrxus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nrxus/subscriptions",
      "organizations_url": "https://api.github.com/users/nrxus/orgs",
      "repos_url": "https://api.github.com/users/nrxus/repos",
      "events_url": "https://api.github.com/users/nrxus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nrxus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-07T19:21:39Z",
    "updated_at": "2017-07-07T19:21:39Z",
    "body": "Is the priority really considered low for this issue?\r\n\r\nIn my experience this has affected the flow of my coding enough that I actually think \"ugh, let me check if this is still an issue\" everytime I need to manually implement clone due to this. For reference, in my fairly small codebase for a toy game + game engine, I have had to do this about a dozen times. While it does not sound like a lot, it is time that I need to context switch everytime, from solving my problem at hand, to writing repetitive load-bearing code. I believe this outstanding issue goes against the roadmap of Rust in 2017, which is increasing productivity. Having to implement a \"dumb\" clone for each of my structs that has a non-cloneable T as a type parameter directly affects my productivity. ",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/313770702/reactions",
      "total_count": 19,
      "+1": 19,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/313789787",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-313789787",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 313789787,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzc4OTc4Nw==",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-07T20:50:44Z",
    "updated_at": "2017-07-07T20:50:44Z",
    "body": "It seems like, post Rust 1.15, someone could write a crate that adds a new derive that doesn't have the `Clone` bound on any type parameters. That would probably address many of these cases.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/313789787/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/313892553",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-313892553",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 313892553,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzg5MjU1Mw==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-09T02:01:23Z",
    "updated_at": "2017-07-09T02:01:23Z",
    "body": "@shepmaster [rust-derivative](https://github.com/mcarton/rust-derivative) has customizable bounds for Clone, so it's something like that.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/313892553/reactions",
      "total_count": 7,
      "+1": 7,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/315262695",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-315262695",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 315262695,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTI2MjY5NQ==",
    "user": {
      "login": "elidupree",
      "id": 1292783,
      "node_id": "MDQ6VXNlcjEyOTI3ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1292783?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elidupree",
      "html_url": "https://github.com/elidupree",
      "followers_url": "https://api.github.com/users/elidupree/followers",
      "following_url": "https://api.github.com/users/elidupree/following{/other_user}",
      "gists_url": "https://api.github.com/users/elidupree/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elidupree/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elidupree/subscriptions",
      "organizations_url": "https://api.github.com/users/elidupree/orgs",
      "repos_url": "https://api.github.com/users/elidupree/repos",
      "events_url": "https://api.github.com/users/elidupree/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elidupree/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-14T03:50:39Z",
    "updated_at": "2017-07-14T04:05:37Z",
    "body": "I'd like to second @nrxus here.\r\n\r\nIn [time-steward](https://github.com/elidupree/time-steward), I have a trait `Basics` that exists mainly to convey a collection of associated types. `Basics` implementors never get instantiated. But every time a struct has a field that's one of the associated types, I run into this issue. If I just avoid `#[derive]`, I'd have to write something like **a hundred** manual trait implementations, and then **maintain** them \u2013 editing multiple trait implementations every time I change a field \u2013 which would be a total disaster.\r\n\r\nTo avoid that, I just gave `Basics` a lot of supertraits. This workaround let me use `#[derive]` as normal. For most of the time, it's just been a minor annoyance. But I could easily imagine a code base where `Basics` wasn't just a dummy struct, and *couldn't* just require itself to have all the traits as a workaround.\r\n\r\nAnd today, I got back to the work on the project after a long break, and tried to update to serde 1.0. But when I changed the supertrait from Deserialize to DeserializeOwned, I ran afoul of https://github.com/rust-lang/rust/issues/41617 . So right now, this issue is part of why I can't even compile my project. I know, that's more the fault of the other bug than this one, but still.\r\n\r\nEdit: after searching my code, about 30 of my `#[derive]`s are actually in this situation. Somewhat lower than I estimated, but still an enormous amount of drudgery to do by hand.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/315262695/reactions",
      "total_count": 3,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/325290942",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-325290942",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 325290942,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTI5MDk0Mg==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-28T08:18:28Z",
    "updated_at": "2017-08-28T08:18:28Z",
    "body": "cc @rust-lang/lang, especially @nikomatsakis - is this the right issue for `#[derive]` not being able to generate the right bounds? Ignoring privacy, there's that coinduction problem.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/325290942/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/325404965",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-325404965",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 325404965,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTQwNDk2NQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-28T16:34:23Z",
    "updated_at": "2017-08-28T16:34:23Z",
    "body": "@eddyb \r\n\r\nThis seems like a fine issue for it, though ultimately this falls into that category of things for which an issue doesn't feel like a perfect fit. i.e., \"in progress design changes\"\r\n\r\nTo me there are two questions: how to *achieve* something like perfect deriving, which is non-trivial and seems to require a co-inductive interpretation of `Clone`. I'm not sure how to make that safe in general. The work on \"co-inductive logic programming\" offers some hints. We may be able to accept Clone cycles but only under particular conditions (e.g., no intervening traits of other kinds)... I'm not sure. Requires thought. Chalk is a good venue for this sort of experimentation, in any case (and we have some support for co-inductive predicates, so as to handle auto traits). \r\n\r\nBut also, there is a question of whether \"perfect deriving\" should require some sort of opt-in. In particular, this is a chance to the behavior of the derive and (say, for unsafe code) it may violate user's expectations. i.e., if I have `struct Foo<T> { x: Rc<T> }`, then we would now no longer require that `T: Clone` in order for `Foo<T>: Clone`. That might be a good thing, but it is altering your public API -- what if you'd like the freedom to change `Rc<T>` to `Box<T>` in the future?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/325404965/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/325433314",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-325433314",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 325433314,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTQzMzMxNA==",
    "user": {
      "login": "elidupree",
      "id": 1292783,
      "node_id": "MDQ6VXNlcjEyOTI3ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1292783?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elidupree",
      "html_url": "https://github.com/elidupree",
      "followers_url": "https://api.github.com/users/elidupree/followers",
      "following_url": "https://api.github.com/users/elidupree/following{/other_user}",
      "gists_url": "https://api.github.com/users/elidupree/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elidupree/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elidupree/subscriptions",
      "organizations_url": "https://api.github.com/users/elidupree/orgs",
      "repos_url": "https://api.github.com/users/elidupree/repos",
      "events_url": "https://api.github.com/users/elidupree/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elidupree/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-28T18:14:44Z",
    "updated_at": "2017-08-28T18:14:54Z",
    "body": "I appreciate the concern about changing public APIs, but I would feel _super weird_ about making my public API's guarantees dependent on what seems (at least at first glance) like a compiler bug. I wonder how many crates' APIs are actually dependent on this \u2013 and among those, how many _intended_ to be dependent on it, and how many just assumed we had perfect deriving already.\r\n\r\nIn terms of violating users's expectations, I'd expect less total violations if we adopted the new behavior _without_ opt-in. E.g., for:\r\n\r\n```rust\r\n#[derive(Clone)]\r\nstruct Foo<T> {\r\n  data: Rc<T>\r\n}\r\n```\r\n\r\nIf I had looked at this code before learning about this specific issue, I would have assumed \"`Rc<T>` is always `Clone`, so `Foo<T>` will always be `Clone`.\"\r\n\r\nI completely understand if we have to maintain backwards compatibility by requiring opt-in, it just seems like a shame to be stuck with that.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/325433314/reactions",
      "total_count": 6,
      "+1": 6,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/325510394",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-325510394",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 325510394,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTUxMDM5NA==",
    "user": {
      "login": "comex",
      "id": 47517,
      "node_id": "MDQ6VXNlcjQ3NTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/comex",
      "html_url": "https://github.com/comex",
      "followers_url": "https://api.github.com/users/comex/followers",
      "following_url": "https://api.github.com/users/comex/following{/other_user}",
      "gists_url": "https://api.github.com/users/comex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/comex/subscriptions",
      "organizations_url": "https://api.github.com/users/comex/orgs",
      "repos_url": "https://api.github.com/users/comex/repos",
      "events_url": "https://api.github.com/users/comex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/comex/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-28T23:24:14Z",
    "updated_at": "2017-08-28T23:26:17Z",
    "body": "@nikomatsakis I was wondering if you had any useful references for where the soundness issue (as you've mentioned here and [elsewhere](https://internals.rust-lang.org/t/lang-team-minutes-private-in-public-rules/4504/20)) comes from in the first place.  There are some relevant-looking papers like [Coinductive Types are Completely Unsound](https://www.irif.fr/~pvial/compUnsoundness.pdf), but they define \"unsound\" in the sense of Curry-Howard, 'types are proofs' - i.e. if there's some mechanism that can produce an expression of type `T` for arbitrary `T`, then it's unsound because it can produce types that are supposed to be uninhabited ('false').  But, of course, Rust like most practical languages allows expressions to diverge, and freely allows expressions with uninhabited types; it just guarantees that such expressions won't finish evaluating at runtime, due to an abort or infinite loop.\r\n\r\nI guess I shouldn't be looking at the base language (which runs at runtime), but at the logic programming language that's represented by the type system and evaluated at compile time.  And the corresponding risk, if I understand correctly, would be incorrect judgements that `T: Trait`, due to infinite recursion in trait implementations.  For example, if the following 'infinite proof' were allowed:\r\n```rust\r\ntrait Trait { type Assoc; }\r\nimpl Trait for A where B: Trait { type Assoc = B::Assoc; }\r\nimpl Trait for B where A: Trait { type Assoc = A::Assoc; }\r\n```\r\n\u2026then the system might conclude that `A: Trait`, only to fail down the line when looking up `A::Assoc` produces an infinite loop.\r\n\r\nBut while Rust currently doesn't allow that case (right?), in general it already has a Turing complete type system that can produce infinite loops during type checking, stopped only by arbitrary recursion limits.  Not only that, there are multiple ways to create things which seem to be fully generic (`struct Foo<T>`) but which fail with specific instances of `T`, including smuggling in an infinitely-sized type; creating a overly-large-sized type; use of specialization causing an infinite loop when trying to select the right implementation; etc.  A special case of that is the ability to make `struct Foo<T: Trait>` which fails when instantiated with a `T` that does implement `Trait`, which seems basically equivalent to the consequences of 'falsely' concluding that `T: Trait` (whatever 'false' actually means).  This can also be stuck into the trait's own items: you can try to create a problematic type within one of a trait's methods, so you can have `T: Trait` but `T::method::<U>` fails to type check once instantiated (based on `T`, not `U`); and with generic associated types it will be possible to have similar failures looking up those.  That would be an even closer match to the results of the 'infinite proof' example above, where you have a trait impl but 'crash' if you look up one of its associated types.\r\n\r\nOn the other hand, I don't see an obvious way to use coinduction to falsely conclude that `T: ArbitraryTrait` for traits not participating in the 'scheme', which is what would really be dangerous.  In general, it may be possible to have an impl that errors if an associated type with an `ArbitraryTrait` bound is looked up, and plug it into a bit of trait logic that would normally retrieve that type and operate on it.  But it will fail as soon as the trait logic actually gets to the point of retrieving the type; and again, this should be already possible under existing Rust.\r\n\r\nIn short, even at the type level, it seems to me like coinductive logic would be \"unsound\" in a way that Rust is already completely unsound.  But I could easily be missing something.  Any pointers would be appreciated :)\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/325510394/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/325747533",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-325747533",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 325747533,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTc0NzUzMw==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-29T18:09:11Z",
    "updated_at": "2017-08-29T18:09:11Z",
    "body": "@comex I'll explain as best I can. The truth is that I feel a bit out of my depth on this topic! I've been trying to gain a deeper understanding for some time but still don't feel I have it.\r\n\r\nAs far as unsoundnesses go, consider for example, https://github.com/rust-lang/rust/issues/29859 and https://github.com/rust-lang/rust/issues/43784. These were both soundness violations that were related to the (mis-)handling of cyclic trait relationships. \r\n\r\nThis is all an independent thing from the fact that trait-checking may not terminate. Normally in our trait system if you setup something that asserts that `T: Foo` if `U: Foo`, and something else that says `U: Foo` if `T: Foo`, then this results in an infinite loop where indeed we find no answer (and hence we do not say that `T: Foo` holds). But in some cases we want loops like that to resolve successfully: e.g., for the `Send` trait, since we want `Foo` to be `Send` if all of its fields are `Send` -- and those fields may reference `Foo`:\r\n\r\n```rust\r\nstruct Foo {\r\n    .., \r\n    next: Option<Box<Foo>>\r\n}\r\n```\r\n\r\nThe same scenario clearly arises with many deriving things (like clone). You would like `Foo` to be clone if all of its fields can be cloned: but that might involve `Foo` being clone. \r\n\r\nNote that we can't handle this all as a pre-expansion, as sometimes the loops are not evident until monomorphization time:\r\n\r\n```rust\r\nstruct Foo<T: Iterator> {\r\n    data: T::Item\r\n}\r\n```\r\n\r\n(Here, depending on what `T` is, `T::Item` might be `Foo` or it might not.)\r\n\r\nYou'd sort of like to be able to have an impl like:\r\n\r\n```rust\r\nimpl Clone for Foo<T>\r\nwhere\r\n    T: Iterator,\r\n    T::Item: Clone, // and another line like this for all field types\r\n{ }\r\n```\r\n\r\nBut if you just do that, you'll get infinite loops that never terminate, because we tend to have inductive semantics. If we gave trait matching coinductive semantics, then those loops would terminate, but we open ourselves up to other problems. In particular, doing that very naively makes all kinds of crazy things type-check.\r\n\r\nIn co-inductive proofs, there is a key limitation that the various rules you setup must be \"productive\" or \"guarded\". This prevents simple loops like `T: Foo => T: Foo`. It seems like maybe we could make all trait matching co-inductive, or at least potentially co-inductive, if we could find a satisfying way to define such conditions. I'm not sure what that is. But I'd be happy to hear about it if you think you know the answer!",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/325747533/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/325748130",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-325748130",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 325748130,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTc0ODEzMA==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-29T18:11:18Z",
    "updated_at": "2017-08-29T18:11:18Z",
    "body": "@elidupree \r\n\r\n> I completely understand if we have to maintain backwards compatibility by requiring opt-in, it just seems like a shame to be stuck with that.\r\n\r\nWell, at the moment, we don't have a better option anyway. If we had one, we could try to debate when we might be more flexible. What I would personally like to do, at least for now, is to *at least* make it easy to \"opt out\" from having requiring that your type parameters be clone.\r\n\r\ne.g.:\r\n\r\n```rust\r\n#[derive(Clone(not(T)))]\r\nstruct Foo<T> { \r\n    data: Rc<T>\r\n}\r\n```\r\n\r\nThis would result in an impl like:\r\n\r\n```rust\r\nimpl<T> Clone for Foo<T> { .. }\r\n```\r\n\r\nNot ideal, but at least it'd be easy to fix when clone gives you stricter bounds than you want. ",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/325748130/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/377929950",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-377929950",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 377929950,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzkyOTk1MA==",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-02T13:33:16Z",
    "updated_at": "2018-04-02T14:15:23Z",
    "body": "How about fixing this, after more than 2 years?\r\n\r\nJust add \"where MemberType: Trait\" bounds where MemberType is the type of all struct/enum fields. How hard can that be?\r\n\r\nPretty ridiculous to have to write unnecessary boilerplate to work around something that should not even have been introduced in the first place (who thought it was reasonable to just add bounds for generic parameters?!).\r\n\r\nIf there are problems with loops, then an explicit impl can be written in those cases, which are going to be the vast minority (although it seems like you can just make the type checker always assume that traits are implemented when either choice would be consistent with the rules extracted from code, i.e. if we get that T: Clone <=> T: Clone, then assume T: Clone - or at least do that when the query is being done when processing an impl Clone for T).\r\n\r\nRegarding privacy, just allow private types in where bounds (or alternatively expand bounds until no private types remain, and output an error if there are nontrivial loops).\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/377929950/reactions",
      "total_count": 4,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 3,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/377931203",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-377931203",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 377931203,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzkzMTIwMw==",
    "user": {
      "login": "dtolnay",
      "id": 1940490,
      "node_id": "MDQ6VXNlcjE5NDA0OTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dtolnay",
      "html_url": "https://github.com/dtolnay",
      "followers_url": "https://api.github.com/users/dtolnay/followers",
      "following_url": "https://api.github.com/users/dtolnay/following{/other_user}",
      "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions",
      "organizations_url": "https://api.github.com/users/dtolnay/orgs",
      "repos_url": "https://api.github.com/users/dtolnay/repos",
      "events_url": "https://api.github.com/users/dtolnay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dtolnay/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-02T13:40:33Z",
    "updated_at": "2018-04-02T13:40:33Z",
    "body": "@bill-myers please read https://github.com/dtolnay/syn/issues/370. That approach is less often correct.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/377931203/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/377933893",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-377933893",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 377933893,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzkzMzg5Mw==",
    "user": {
      "login": "bill-myers",
      "id": 4647491,
      "node_id": "MDQ6VXNlcjQ2NDc0OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4647491?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-myers",
      "html_url": "https://github.com/bill-myers",
      "followers_url": "https://api.github.com/users/bill-myers/followers",
      "following_url": "https://api.github.com/users/bill-myers/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-myers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-myers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-myers/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-myers/orgs",
      "repos_url": "https://api.github.com/users/bill-myers/repos",
      "events_url": "https://api.github.com/users/bill-myers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-myers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-02T13:53:49Z",
    "updated_at": "2018-04-02T13:53:49Z",
    "body": "@dtolnay This approach is obviously correct since it's just the definition. The problem is that it exposes other flaws in the compiler (privacy, recursiveness, and apparently a bug with lifetimes), which need to be fixed as well.\r\n\r\nNow maybe it makes sense to wait for Chalk integration so that we actually have a working trait checker unlike the current one (although that's just because Rust's trait checker has been allowed to be blatantly broken in several ways for a while).\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/377933893/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/380078922",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-380078922",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 380078922,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDA3ODkyMg==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-10T12:21:52Z",
    "updated_at": "2018-04-10T12:21:52Z",
    "body": "@bill-myers Please note that the problem with \"recursiveness\" is that it's non-trivial to *soundly* allow certain recursion patterns - the current limitation is mainly in place because of bugs like #29859.\r\n@nikomatsakis kept talking about \"coinduction\" being required and *only recently* did I hear he might be willing to experiment with something in that vein, but *only* on top of Chalk.\r\n\r\n**EDIT**: just noticed that you touch this in your comment under \"loops\". I'll leave my own comment up but I probably didn't add any new information to the discussion.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/380078922/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394158903",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-394158903",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 394158903,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDE1ODkwMw==",
    "user": {
      "login": "gavofyork",
      "id": 138296,
      "node_id": "MDQ6VXNlcjEzODI5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/138296?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavofyork",
      "html_url": "https://github.com/gavofyork",
      "followers_url": "https://api.github.com/users/gavofyork/followers",
      "following_url": "https://api.github.com/users/gavofyork/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavofyork/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavofyork/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavofyork/subscriptions",
      "organizations_url": "https://api.github.com/users/gavofyork/orgs",
      "repos_url": "https://api.github.com/users/gavofyork/repos",
      "events_url": "https://api.github.com/users/gavofyork/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavofyork/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-06-03T12:27:51Z",
    "updated_at": "2018-06-03T12:27:51Z",
    "body": "> Pretty ridiculous to have to write unnecessary boilerplate to work around something that should not even have been introduced in the first place (who thought it was reasonable to just add bounds for generic parameters?!).\r\n\r\nI couldn't have put is better myself. For the record, this **bug** (Yes, bug. Not feature-request as it is erroneously tagged.) is causing substantial headaches in the Parity/Polkadot codebase.\r\n\r\nA workaround would be much appreciated.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394158903/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394175477",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-394175477",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 394175477,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDE3NTQ3Nw==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-06-03T16:54:31Z",
    "updated_at": "2018-06-03T16:54:31Z",
    "body": "@gavofyork Note my previous comment, https://github.com/rust-lang/rust/issues/26925#issuecomment-380078922 - at least part of the problem require advanced typesystem (more accurately, \"typeclass/trait system\") features for sound solutions.\r\nIt's still plausible we'd add those features, but they're more akin to NLL: that is, an extension we have to be really careful with and put effort into, and not just something we can \"bugfix\".",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394175477/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394189527",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-394189527",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 394189527,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDE4OTUyNw==",
    "user": {
      "login": "remexre",
      "id": 4196789,
      "node_id": "MDQ6VXNlcjQxOTY3ODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4196789?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/remexre",
      "html_url": "https://github.com/remexre",
      "followers_url": "https://api.github.com/users/remexre/followers",
      "following_url": "https://api.github.com/users/remexre/following{/other_user}",
      "gists_url": "https://api.github.com/users/remexre/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/remexre/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/remexre/subscriptions",
      "organizations_url": "https://api.github.com/users/remexre/orgs",
      "repos_url": "https://api.github.com/users/remexre/repos",
      "events_url": "https://api.github.com/users/remexre/events{/privacy}",
      "received_events_url": "https://api.github.com/users/remexre/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-06-03T20:37:56Z",
    "updated_at": "2018-06-03T20:37:56Z",
    "body": "As a stopgap measure, it might make sense to make an attribute like I use here: https://github.com/remexre/display_attr/blob/master/tests/enums.rs#L11 to allows the user to specify bounds; it'd take a bit of time to make all of the derives, but it's a solution.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394189527/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394190748",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-394190748",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 394190748,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDE5MDc0OA==",
    "user": {
      "login": "durka",
      "id": 47007,
      "node_id": "MDQ6VXNlcjQ3MDA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47007?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/durka",
      "html_url": "https://github.com/durka",
      "followers_url": "https://api.github.com/users/durka/followers",
      "following_url": "https://api.github.com/users/durka/following{/other_user}",
      "gists_url": "https://api.github.com/users/durka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/durka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/durka/subscriptions",
      "organizations_url": "https://api.github.com/users/durka/orgs",
      "repos_url": "https://api.github.com/users/durka/repos",
      "events_url": "https://api.github.com/users/durka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/durka/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-06-03T20:57:18Z",
    "updated_at": "2018-06-03T20:57:18Z",
    "body": "The workaround is a crate that lets the user specify the correct bounds, such as [derivative](https://mcarton.github.io/rust-derivative/) which was linked from this thread before. Hyperbolic comments saying \"this is so easy, just fix it\" aren't constructive.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394190748/reactions",
      "total_count": 9,
      "+1": 5,
      "-1": 1,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 3,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394301103",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-394301103",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 394301103,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDMwMTEwMw==",
    "user": {
      "login": "gavofyork",
      "id": 138296,
      "node_id": "MDQ6VXNlcjEzODI5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/138296?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavofyork",
      "html_url": "https://github.com/gavofyork",
      "followers_url": "https://api.github.com/users/gavofyork/followers",
      "following_url": "https://api.github.com/users/gavofyork/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavofyork/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavofyork/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavofyork/subscriptions",
      "organizations_url": "https://api.github.com/users/gavofyork/orgs",
      "repos_url": "https://api.github.com/users/gavofyork/repos",
      "events_url": "https://api.github.com/users/gavofyork/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavofyork/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-06-04T10:00:44Z",
    "updated_at": "2018-06-04T10:00:44Z",
    "body": "@durka @remen In this case, I'm stuck deriving not just the usual `Clone`/`PartialEq`/`Debug` but also `serde::Serialize`. Perhaps I'm misunderstanding, but it seems that in either instance, I would need to re-implement non-trivial serde code which I would really rather not get into.\r\n\r\nI appreciate that a \"perfect\" derive may yet be some time away. However, some provision to programatically remove this erroneous requirement on a case-by-case basis would alleviate so much of the associated pain, and unless I'm missing something, would be perfectly safe to introduce.\r\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394301103/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394361771",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-394361771",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 394361771,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDM2MTc3MQ==",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-06-04T13:51:04Z",
    "updated_at": "2018-06-04T13:51:04Z",
    "body": "> but also `serde::Serialize`\r\n\r\n*This* issue will not fix Serde's derives, which are provided by Serde itself. I don't know if that project would be willing to accept such a patch, but you could speak with the maintainers.\r\n\r\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394361771/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394361909",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-394361909",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 394361909,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDM2MTkwOQ==",
    "user": {
      "login": "remexre",
      "id": 4196789,
      "node_id": "MDQ6VXNlcjQxOTY3ODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4196789?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/remexre",
      "html_url": "https://github.com/remexre",
      "followers_url": "https://api.github.com/users/remexre/followers",
      "following_url": "https://api.github.com/users/remexre/following{/other_user}",
      "gists_url": "https://api.github.com/users/remexre/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/remexre/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/remexre/subscriptions",
      "organizations_url": "https://api.github.com/users/remexre/orgs",
      "repos_url": "https://api.github.com/users/remexre/repos",
      "events_url": "https://api.github.com/users/remexre/events{/privacy}",
      "received_events_url": "https://api.github.com/users/remexre/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-06-04T13:51:30Z",
    "updated_at": "2018-06-04T13:51:50Z",
    "body": "@gavofyork Well, rustc doesn't determine how Serialize decides to handle generating generic bounds on its own Derives.\r\n\r\n**EDIT**: @shepmaster Jinx!",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394361909/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394363336",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-394363336",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 394363336,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDM2MzMzNg==",
    "user": {
      "login": "durka",
      "id": 47007,
      "node_id": "MDQ6VXNlcjQ3MDA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47007?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/durka",
      "html_url": "https://github.com/durka",
      "followers_url": "https://api.github.com/users/durka/followers",
      "following_url": "https://api.github.com/users/durka/following{/other_user}",
      "gists_url": "https://api.github.com/users/durka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/durka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/durka/subscriptions",
      "organizations_url": "https://api.github.com/users/durka/orgs",
      "repos_url": "https://api.github.com/users/durka/repos",
      "events_url": "https://api.github.com/users/durka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/durka/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-06-04T13:56:07Z",
    "updated_at": "2018-06-04T13:56:07Z",
    "body": "Serde actually already has the [override](https://serde.rs/container-attrs.html) available.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/394363336/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/400336555",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-400336555",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 400336555,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMDMzNjU1NQ==",
    "user": {
      "login": "durka",
      "id": 47007,
      "node_id": "MDQ6VXNlcjQ3MDA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47007?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/durka",
      "html_url": "https://github.com/durka",
      "followers_url": "https://api.github.com/users/durka/followers",
      "following_url": "https://api.github.com/users/durka/following{/other_user}",
      "gists_url": "https://api.github.com/users/durka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/durka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/durka/subscriptions",
      "organizations_url": "https://api.github.com/users/durka/orgs",
      "repos_url": "https://api.github.com/users/durka/repos",
      "events_url": "https://api.github.com/users/durka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/durka/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-06-26T14:47:02Z",
    "updated_at": "2018-06-26T14:47:02Z",
    "body": "That's a pretty hyperbolic and unconstructive comment. This is a rarely\nencountered problem and there are workarounds. There's a lot of people\nsubscribed here so let's keep comments to a minimum unless there's\nsomething new to say, shall we?\n\nOn Tue, Jun 26, 2018, 07:20 A1-Triard <notifications@github.com> wrote:\n\n> It looks very strange: an important part of the Rust (traits deriving) is\n> broken up to fully unusable state and there is no any solution for three\n> year.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/rust-lang/rust/issues/26925#issuecomment-400272033>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAC3n8SYoUInm-v4fpU8yIZ76doguGLQks5uAhj8gaJpZM4FVpdB>\n> .\n>\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/400336555/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/405189266",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-405189266",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 405189266,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTE4OTI2Ng==",
    "user": {
      "login": "ramosbugs",
      "id": 8505766,
      "node_id": "MDQ6VXNlcjg1MDU3NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8505766?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ramosbugs",
      "html_url": "https://github.com/ramosbugs",
      "followers_url": "https://api.github.com/users/ramosbugs/followers",
      "following_url": "https://api.github.com/users/ramosbugs/following{/other_user}",
      "gists_url": "https://api.github.com/users/ramosbugs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ramosbugs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ramosbugs/subscriptions",
      "organizations_url": "https://api.github.com/users/ramosbugs/orgs",
      "repos_url": "https://api.github.com/users/ramosbugs/repos",
      "events_url": "https://api.github.com/users/ramosbugs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ramosbugs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-07-16T09:15:09Z",
    "updated_at": "2018-07-16T09:15:09Z",
    "body": "It looks like this issue affects the [failure_derive](https://github.com/withoutboats/failure_derive) crate as well.\r\n\r\nIn the following code fragment, `Fail` is only implemented when `T` is bound by `Fail`.\r\n```\r\n#[derive(Fail)]\r\npub enum SomeFailure<T: Foo> {\r\n    SomeCondition(T),\r\n    SomeOtherCondition,\r\n}\r\n```\r\n\r\nThe macro expansion ends up being something like:\r\n```\r\nimpl <T: Foo> ::failure::Fail for SomeFailure<T> where\r\n T: ::failure::Fail {\r\n    #[allow(unreachable_code)]\r\n    fn cause(&self) -> ::std::option::Option<&::failure::Fail> {\r\n        match *self {\r\n            SomeFailure::SomeCondition(ref __binding_0) => {\r\n                return None\r\n            }\r\n            SomeFailure::SomeOtherCondition => {\r\n                return None\r\n            }\r\n        }\r\n        None\r\n    }\r\n    #[allow(unreachable_code)]\r\n    fn backtrace(&self) -> ::std::option::Option<&::failure::Backtrace> {\r\n        match *self {\r\n            SomeFailure::SomeCondition(ref __binding_0) => {\r\n                return None\r\n            }\r\n            SomeFailure::SomeOtherCondition => { return None }\r\n        }\r\n        None\r\n    }\r\n}\r\n```\r\n\r\nIn this case, the parameterized type `T` has no reason to implement `Fail`, and in many cases will not represent a failure. I'm not sure of the best solution to these issues (other than manually implementing the trait), but hopefully this additional example helps illustrate another (potentially common) use case.\r\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/405189266/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/405240096",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-405240096",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 405240096,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTI0MDA5Ng==",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-07-16T13:02:59Z",
    "updated_at": "2018-07-16T13:02:59Z",
    "body": "> I'm not sure of the best solution to these issues\r\n\r\nAs [stated above](https://github.com/rust-lang/rust/issues/26925#issuecomment-394363336), crates can create their own mechanism to fine-tune their own derive bounds. Serde is an example of such a crate. You should file an issue or submit a PR to failure.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/405240096/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/414259513",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-414259513",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 414259513,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDI1OTUxMw==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-08-20T09:45:12Z",
    "updated_at": "2018-08-20T09:45:12Z",
    "body": "I'm gonna leave a reminder here for @nikomatsakis to read https://arxiv.org/abs/1608.05233 (if he hasn't already) to see if it'd help rustc/Chalk in any way support the \"coinductive\" case.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/414259513/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/423236902",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-423236902",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 423236902,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzIzNjkwMg==",
    "user": {
      "login": "dhardy",
      "id": 134893,
      "node_id": "MDQ6VXNlcjEzNDg5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/134893?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhardy",
      "html_url": "https://github.com/dhardy",
      "followers_url": "https://api.github.com/users/dhardy/followers",
      "following_url": "https://api.github.com/users/dhardy/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhardy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhardy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhardy/subscriptions",
      "organizations_url": "https://api.github.com/users/dhardy/orgs",
      "repos_url": "https://api.github.com/users/dhardy/repos",
      "events_url": "https://api.github.com/users/dhardy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhardy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-09-20T15:56:21Z",
    "updated_at": "2018-09-20T15:57:50Z",
    "body": "@nikomatsakis why the obsession with solving recursive type bounds in order to make `derive` work correctly? From my point of view these are two completely separate problems, and [it appears the type bounds can already be solved](https://play.rust-lang.org/?gist=bb472bf3da77536275eed6c61501b8cd&version=stable&mode=debug&edition=2015) (even with `derive(Clone)` in the first case).\r\n\r\nAs I understand it, `derive` is a macro designed to spit out templated code. The macro logic should add appropriate bound annotations, but does not need to solve them. From @eefriedman's post near the top:\r\n\r\n> It's possible that we could punt computing the bounds off to type-checking (add syntax like where each field : Clone), and come up with a type-sensitive heuristic; that's probably a lot of work, though.\r\n\r\nMacros can cover the `each` bit, so this only needs something like `typeof(expr)` for a correct solution:\r\n```rust\r\n#[derive(Clone)]\r\nstruct Foo<T: Iterator + ?Sized> {\r\n    data: T::Item\r\n}\r\n\r\n// generates:\r\nimpl<T> Clone for Foo<T>\r\nwhere\r\n    T: Iterator + ?Sized,   // copied from struct requirements\r\n    typeof(Self::data): Clone\r\n{\r\n    fn clone(&self) -> Self {\r\n        Foo { data: self.data.clone() }\r\n    }\r\n}\r\n```\r\n`typeof` is even a reserved keyword.\r\n\r\n---\r\n\r\nNote that this isn't just about making `derive(Clone)` and friends work correctly \u2014 it's about enabling users to write correct macros too. Those correct macros should not need to solve complex type problems.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/423236902/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/423336190",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-423336190",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 423336190,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzMzNjE5MA==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-09-20T21:16:26Z",
    "updated_at": "2018-09-20T21:21:16Z",
    "body": "The problem @dhardy is this. Assume that `T::Item` expands out to `Foo<T>` again. Then you have:\r\n\r\n```rust\r\nimpl<T> Clone for Foo<T> where Foo<T>: Clone { ... }\r\n```\r\n\r\nThis cyclic impl will never terminate: in order to \"use\" the impl, you need to provide the impl itself. In rustc today, this results in an [overflow error](https://play.rust-lang.org/?gist=4ed912f955574fdfafb80ffc6f11866f&version=stable&mode=debug&edition=2015), as you can see from this example:\r\n\r\n```rust\r\nstruct Tree<T> {\r\n    data: T,\r\n    children: Vec<Tree<T>>,\r\n}\r\n\r\nimpl<T> Clone for Tree<T>\r\nwhere\r\n    T: Clone,\r\n    Vec<Tree<T>>: Clone,\r\n{\r\n    fn clone(&self) -> Self {\r\n        panic!()\r\n    }\r\n}\r\n\r\nfn is_clone<T: Clone>() {}\r\n\r\nfn main() {\r\n    is_clone::<Tree<u32>>();\r\n}\r\n\r\n```\r\n\r\nOnce we transition to Chalk, it will not overflow, but it simply error: there is no `Tree<T>` impl that can be used, so the trait is not implemented.\r\n\r\nAs an interim step, I think we should just add some annotations that let you \"opt-out\" of the additional bounds when deriving for specific type parameters. This seems like a fine thing to do no matter what.\r\n\r\nAlso, i'm not 100% confident that we want to adopt the \"perfect\" design here. It marks a subtle change in the semver policy that is not obviously good. Today, if I have `#[derive(Clone)] struct Foo<T> { .. }`, then this always means that `T: Clone` must hold. This is true even if `Foo` just contains `Rc<T>: Clone`. Now, often this is annoying, but it does mean that you could later change from `Rc<T>` to `Box<T>` if you wanted without affecting your clients.\r\n\r\nAssuming we did want to adopt the perfect path, we need to define how it gets lowered to the underlying logical rules. Keeping in mind that derive is a \"dumb macro\", it seems like we really ought to move \"the smarts\" there into trait solving, so that e.g. the simple impls I gave above would be accepted. One way to do this is to adopt a \"co-inductive semantics\" for trait matching, but that carries other complications if we are not careful (and may well invalidate unsafe code, for example, that relies on today's inductive behavior to rule out cycles). There may be other solutions, though.\r\n\r\nThat said, I do have the feeling that one *ought* to be able to have a coinductive-style semantics for cases like `Clone` here. It feels pretty similar to the work we did on figuring out how to think about implied bounds. I've not really sat down and thought about this for a while, mostly because I'd like to make progress on the general chalk transition first...\r\n\r\nUPDATE: Updated the example to be more realistic.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/423336190/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/423384733",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-423384733",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 423384733,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzM4NDczMw==",
    "user": {
      "login": "dhardy",
      "id": 134893,
      "node_id": "MDQ6VXNlcjEzNDg5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/134893?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhardy",
      "html_url": "https://github.com/dhardy",
      "followers_url": "https://api.github.com/users/dhardy/followers",
      "following_url": "https://api.github.com/users/dhardy/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhardy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhardy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhardy/subscriptions",
      "organizations_url": "https://api.github.com/users/dhardy/orgs",
      "repos_url": "https://api.github.com/users/dhardy/repos",
      "events_url": "https://api.github.com/users/dhardy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhardy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-09-21T01:27:49Z",
    "updated_at": "2018-09-21T09:19:06Z",
    "body": "Thanks @nikomatsakis for the explanation.\r\n\r\n> Once we transition to Chalk, it will not overflow, but it simply error: there is no `Tree<T>` impl that can be used, so the trait is not implemented.\r\n\r\nAnd yet if the bound is removed, `clone` can be implemented just fine, since the system is in fact solvable. The problem reminds me of searching for fixed points of a function or recursive proofs \u2014 yet as noted above this is unrelated to the problem of termination (recursive functions which terminate are common). So can Chalk solve this correctly?\r\n\r\n> In co-inductive proofs, there is a key limitation that the various rules you setup must be \"productive\" or \"guarded\". This prevents simple loops like `T: Foo => T: Foo`. It seems like maybe we could make all trait matching co-inductive, or at least potentially co-inductive, if we could find a satisfying way to define such conditions. I'm not sure what that is. But I'd be happy to hear about it if you think you know the answer!\r\n\r\nSo this is the crux of the issue. One can have fun with toy examples:\r\n\r\n```rust\r\ntrait Trait {}\r\nimpl<T: Trait> Trait for T {}\r\n```\r\n\r\nThis currently causes an overflow error when trying to check the bound, but fundamentally it's harmless: `Trait` happens to be implemented for *every* type (if the solver can verify this), but since it doesn't *do* anything this is perfectly fine. Also since blanket trait implementations are restricted to the defining crate, there's no risk of a user accidentally implementing `Sync` everywhere or some such. However ...\r\n\r\n```rust\r\ntrait Trait {\r\n    fn foo(&self);\r\n}\r\n\r\nimpl<T: Trait> Trait for T {\r\n    fn foo(&self) {\r\n        self.foo()\r\n    }\r\n}\r\n```\r\n\r\n... now we have \"bad\" code (infinite recursion). As @comex points out, Rust freely allows diverging code, so technically we don't *need* to solve this in the type system. Rust also already has warnings about infinite function recursion; quite possibly the same logic could be used to warn about this case. So I don't see any real reason for the bound checker to reject this code.\r\n\r\n> Today, if I have `#[derive(Clone)] struct Foo<T> { .. }`, then this always means that `T: Clone` must hold. This is true even if `Foo` just contains `Rc<T>: Clone`. Now, often this is annoying, but it does mean that you could later change from `Rc<T>` to `Box<T>` if you wanted without affecting your clients.\r\n\r\nI saw this argument above, but it seemed like a strange one. It *is* a minor issue that `derive(Clone)` does not explicitly state the bounds, but I don't think this is a major one, and not being explicit about what `Foo`'s copy semantics are feels like an API bug \u2014 so causing obvious breakage in such a case could even be useful. @elidupree had roughly the same response.\r\n\r\n---\r\n\r\nNote for readers: of course this implies that the solution I proposed above, bounds on `typeof(T::field)`, would be a major breaking change *until and if* Chalk is integrated and can solve reflexive bounds. So it's not a short-term fix.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/423384733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/490653182",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-490653182",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 490653182,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MDY1MzE4Mg==",
    "user": {
      "login": "agausmann",
      "id": 6611767,
      "node_id": "MDQ6VXNlcjY2MTE3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6611767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agausmann",
      "html_url": "https://github.com/agausmann",
      "followers_url": "https://api.github.com/users/agausmann/followers",
      "following_url": "https://api.github.com/users/agausmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/agausmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agausmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agausmann/subscriptions",
      "organizations_url": "https://api.github.com/users/agausmann/orgs",
      "repos_url": "https://api.github.com/users/agausmann/repos",
      "events_url": "https://api.github.com/users/agausmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agausmann/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-05-08T21:13:57Z",
    "updated_at": "2019-05-09T17:50:26Z",
    "body": "@nikomatsakis Using your example, If we let `T::Item = Foo<T>`, then `Foo<T>` becomes:\r\n\r\n```\r\nstruct Foo<T> {\r\n    data: Foo<T>\r\n}\r\n```\r\n\r\nEmbedding a struct directly into itself (or an enum in its own variant) is already disallowed by the type system as it recurses infinitely. So your scenario where derive produces `impl<T> Clone for Foo<T> where Foo<T>: Clone` isn't the biggest problem, and is not going to occur without that larger issue being present.\r\n\r\nEDIT: I noticed your example with a layer of indirection being `Vec<Tree<T>>`. I didn't realize how that would also fail, but in that case, I agree that it shouldn't panic, however, it *should* be able to derive a `Clone` implementation. As every instance must be built upon at least one instance of an empty `Vec`, being the first construction when no other `Tree` instances exist, every recursive call back into `Tree::clone` has to eventually reach a situation where the inner `Vec` is empty. You cannot construct an object that will infinitely recurse `Clone` in that scenario, therefore, there is a valid \r\n\r\nEDIT2: In my example, regardless of the problems with sizing and infinitely recursing size (which actually might be resolvable to a ZST in that specific scenario), it would be impossible to construct an instance of Foo because the constructor infinitely recurses: `Foo { foo: Foo { foo: ... } }`. So in theory, you could implement `Clone` for it, similar to the never type.\r\n\r\n---\r\n\r\nOn the topic about this being a breaking change: The number of issues that have been linking here is a testimony to how important this is, and how users of Rust assume that these derives are supposed to behave. I'm of the opinion that this is a *bug*, plain and simple. As a bug, code that is written that depends on this behavior is also incorrect and shouldn't carry much weight when talking about backwards compatibility.\r\n\r\nI do understand the concern, but opening a PR fixing this is a good first step regardless. Once that is done, *then* we can seriously consider compatibility because we can get quantitative test results, perhaps from a crater run.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/490653182/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/500078625",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-500078625",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 500078625,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDA3ODYyNQ==",
    "user": {
      "login": "cuviper",
      "id": 36186,
      "node_id": "MDQ6VXNlcjM2MTg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cuviper",
      "html_url": "https://github.com/cuviper",
      "followers_url": "https://api.github.com/users/cuviper/followers",
      "following_url": "https://api.github.com/users/cuviper/following{/other_user}",
      "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions",
      "organizations_url": "https://api.github.com/users/cuviper/orgs",
      "repos_url": "https://api.github.com/users/cuviper/repos",
      "events_url": "https://api.github.com/users/cuviper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cuviper/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-06-08T00:47:01Z",
    "updated_at": "2019-06-08T00:47:01Z",
    "body": "This RFC would permit more control over derivations: https://github.com/rust-lang/rfcs/pull/2353",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/500078625/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/500650321",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-500650321",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 500650321,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDY1MDMyMQ==",
    "user": {
      "login": "ldesgoui",
      "id": 2472678,
      "node_id": "MDQ6VXNlcjI0NzI2Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2472678?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ldesgoui",
      "html_url": "https://github.com/ldesgoui",
      "followers_url": "https://api.github.com/users/ldesgoui/followers",
      "following_url": "https://api.github.com/users/ldesgoui/following{/other_user}",
      "gists_url": "https://api.github.com/users/ldesgoui/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ldesgoui/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ldesgoui/subscriptions",
      "organizations_url": "https://api.github.com/users/ldesgoui/orgs",
      "repos_url": "https://api.github.com/users/ldesgoui/repos",
      "events_url": "https://api.github.com/users/ldesgoui/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ldesgoui/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-06-11T01:24:59Z",
    "updated_at": "2019-06-11T01:24:59Z",
    "body": "To those who find this issue, a solution is available by using \r\nhttps://github.com/mcarton/rust-derivative\r\n\r\n\r\nI am reposting because Github stopped showing every message by default.\r\nIf this message is inappropriate, apologies, feel free to delete it.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/500650321/reactions",
      "total_count": 8,
      "+1": 8,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/535998244",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-535998244",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 535998244,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNTk5ODI0NA==",
    "user": {
      "login": "agausmann",
      "id": 6611767,
      "node_id": "MDQ6VXNlcjY2MTE3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6611767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agausmann",
      "html_url": "https://github.com/agausmann",
      "followers_url": "https://api.github.com/users/agausmann/followers",
      "following_url": "https://api.github.com/users/agausmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/agausmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agausmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agausmann/subscriptions",
      "organizations_url": "https://api.github.com/users/agausmann/orgs",
      "repos_url": "https://api.github.com/users/agausmann/repos",
      "events_url": "https://api.github.com/users/agausmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agausmann/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-09-27T15:57:12Z",
    "updated_at": "2019-09-27T16:02:31Z",
    "body": "Why not make the derives generate something like this: ([playground](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=d5a4ffe3e8e6faff05e68955581d0f9d))\r\n\r\n```\r\nstruct Foo<T> {\r\n    bar: Vec<T>,\r\n    baz: usize,\r\n}\r\n\r\nimpl<T> Clone for Foo<T>\r\nwhere\r\n    Vec<T>: Clone,\r\n    usize: Clone,\r\n{\r\n    fn clone(&self) -> Self {\r\n        Foo {\r\n            bar: self.bar.clone(),\r\n            baz: self.baz.clone(),\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nedit: [counterexample](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=e1c006456230bb7a3025544bcdbe3fb9), ``error[E0446]: private type `Bar<T>` in public interface``, as the field types then explicitly become part of the `impl` signature.\r\n\r\nStill, this is a very elegant solution, and maybe we could implement some kind of bound simplification/flattening into the Rust compiler to resolve the error.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/535998244/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/536009347",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-536009347",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 536009347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNjAwOTM0Nw==",
    "user": {
      "login": "remexre",
      "id": 4196789,
      "node_id": "MDQ6VXNlcjQxOTY3ODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4196789?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/remexre",
      "html_url": "https://github.com/remexre",
      "followers_url": "https://api.github.com/users/remexre/followers",
      "following_url": "https://api.github.com/users/remexre/following{/other_user}",
      "gists_url": "https://api.github.com/users/remexre/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/remexre/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/remexre/subscriptions",
      "organizations_url": "https://api.github.com/users/remexre/orgs",
      "repos_url": "https://api.github.com/users/remexre/repos",
      "events_url": "https://api.github.com/users/remexre/events{/privacy}",
      "received_events_url": "https://api.github.com/users/remexre/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-09-27T16:28:44Z",
    "updated_at": "2019-09-27T16:28:44Z",
    "body": "@AGausmann \r\n\r\n```rust\r\nstruct LinkedList<T> {\r\n    hd: T,\r\n    tl: Option<Box<LinkedList<T>>>\r\n}\r\n\r\nimpl<T> Clone for LinkedList<T>\r\nwhere\r\n    T: Clone,\r\n    Option<Box<LinkedList<T>>>: Clone // uhoh\r\n{\r\n    // ...\r\n}\r\n```\r\n\r\nAs the trait resolver chugs along, it'll solve\r\n\r\n```\r\nTrying to find LinkedList<i32>: Clone\r\n  Trying to find i32: Clone\r\n    OK\r\n  Trying to find Option<Box<LinkedList<i32>>>: Clone\r\n    Trying to find Box<LinkedList<i32>>: Clone\r\n      Trying to find LinkedList<i32>: Clone\r\n        We're in a loop, failing out!\r\n```\r\n\r\nhttps://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=cf21f1baafd8d6d135319cd8a6f02a50",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/536009347/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/536020826",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-536020826",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 536020826,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNjAyMDgyNg==",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-09-27T17:03:24Z",
    "updated_at": "2019-09-27T17:07:28Z",
    "body": "> Why not make the derives generate something like this\r\n\r\nPlease make sure to read through the *entire* thread, and remember that GitHub collapses long discussions by default. It appears that your suggestion was first mentioned [in 2015](https://github.com/rust-lang/rust/issues/26925#issuecomment-129698062). That same comment mentions the private-in-public issue. It was mentioned again [in 2018](https://github.com/rust-lang/rust/issues/26925#issuecomment-377929950), with [a follow-up comment](https://github.com/rust-lang/rust/issues/26925#issuecomment-377931203) mentioning that is also not always right.\r\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/536020826/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/536036370",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-536036370",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 536036370,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNjAzNjM3MA==",
    "user": {
      "login": "agausmann",
      "id": 6611767,
      "node_id": "MDQ6VXNlcjY2MTE3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6611767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agausmann",
      "html_url": "https://github.com/agausmann",
      "followers_url": "https://api.github.com/users/agausmann/followers",
      "following_url": "https://api.github.com/users/agausmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/agausmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agausmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agausmann/subscriptions",
      "organizations_url": "https://api.github.com/users/agausmann/orgs",
      "repos_url": "https://api.github.com/users/agausmann/repos",
      "events_url": "https://api.github.com/users/agausmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agausmann/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-09-27T17:49:24Z",
    "updated_at": "2019-09-27T18:05:54Z",
    "body": "I'd argue that self-referential trait bounds are perfectly fine, disregarding self-referential types without indirection like `struct Foo(Foo)` which have a bunch of other problems anyway. \r\n\r\nIf `LinkedList<i32>: Clone` requires `LinkedList<i32>: Clone`, that seems to be satisfied as long as the other bounds are satisfied. Similar to the identity that X implies X is true.\r\n\r\nAlso I apologize for not reading the thread, I wish GitHub had a proper way to search the entire thread without manually expanding it. Now I recall it being mentioned before, but I still think it is a potential solution worth pursuing.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/536036370/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/536084171",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-536084171",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 536084171,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNjA4NDE3MQ==",
    "user": {
      "login": "remexre",
      "id": 4196789,
      "node_id": "MDQ6VXNlcjQxOTY3ODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4196789?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/remexre",
      "html_url": "https://github.com/remexre",
      "followers_url": "https://api.github.com/users/remexre/followers",
      "following_url": "https://api.github.com/users/remexre/following{/other_user}",
      "gists_url": "https://api.github.com/users/remexre/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/remexre/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/remexre/subscriptions",
      "organizations_url": "https://api.github.com/users/remexre/orgs",
      "repos_url": "https://api.github.com/users/remexre/repos",
      "events_url": "https://api.github.com/users/remexre/events{/privacy}",
      "received_events_url": "https://api.github.com/users/remexre/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-09-27T20:23:19Z",
    "updated_at": "2019-09-27T20:23:19Z",
    "body": "@AGausmann How about https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=703ce6fed86c2cc2e49326a1e4a70585 then:\r\n\r\n```rust\r\nstruct WideList<T> {\r\n    hd: T,\r\n    tl: Option<Box<WideList<(T, T)>>>\r\n}\r\n```\r\n\r\n---\r\n\r\nAs a side note, for threads like this, it might make sense if some moderator-type person edited the original post with a sort of \"all the ideas that don't work without significant overhauls of rustc\" list?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/536084171/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/536092858",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-536092858",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 536092858,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNjA5Mjg1OA==",
    "user": {
      "login": "agausmann",
      "id": 6611767,
      "node_id": "MDQ6VXNlcjY2MTE3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6611767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agausmann",
      "html_url": "https://github.com/agausmann",
      "followers_url": "https://api.github.com/users/agausmann/followers",
      "following_url": "https://api.github.com/users/agausmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/agausmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agausmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agausmann/subscriptions",
      "organizations_url": "https://api.github.com/users/agausmann/orgs",
      "repos_url": "https://api.github.com/users/agausmann/repos",
      "events_url": "https://api.github.com/users/agausmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agausmann/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-09-27T20:52:53Z",
    "updated_at": "2019-09-27T20:52:53Z",
    "body": "Yikes ... that is hard to reason about, but it seems that it is a case that the compiler can't currently handle anyway. I tried using `#[derive(Clone)]` and replacing your bounds with `T: Clone`, but neither finished compiling.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/536092858/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/589729497",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-589729497",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 589729497,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4OTcyOTQ5Nw==",
    "user": {
      "login": "agausmann",
      "id": 6611767,
      "node_id": "MDQ6VXNlcjY2MTE3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6611767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agausmann",
      "html_url": "https://github.com/agausmann",
      "followers_url": "https://api.github.com/users/agausmann/followers",
      "following_url": "https://api.github.com/users/agausmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/agausmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agausmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agausmann/subscriptions",
      "organizations_url": "https://api.github.com/users/agausmann/orgs",
      "repos_url": "https://api.github.com/users/agausmann/repos",
      "events_url": "https://api.github.com/users/agausmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agausmann/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-02-21T16:31:09Z",
    "updated_at": "2020-02-21T16:32:04Z",
    "body": "I'd really like to help resolve this issue and find a solution that makes it easy for derive macros to get trait bounds correct with the information that they're _currently given_ at compile-time. I believe that they can, in most cases, with some help from the compiler.\r\n\r\nI don't see rust-lang/rfcs#2353 as sufficient to resolving this. It may make it possible to get the bounds correct, but ultimately it pushes the responsibility onto the end developer who is using the derive macros. For more complex macros that may be necessary, but not for the field-wise derivations in the standard library.\r\n\r\nAlternatively, I think there should be some kind of well-defined, well-behaved bound resolution that the compiler performs for the macros. The macros are able to pass their _actual_ required bounds normally (possibly marked with an attribute to distinguish them from user-provided bounds), and the compiler does the work of translating them into bounds that are meaningful to the end user. For example, for field-wise derivations like `Debug`, `Clone`, `Serialize`, where the trait methods are called recursively on their fields, they may add their fields directly as bounds and the compiler will prune/collapse them using a well-defined set of rules to produce the final signature.\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/589729497/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/589731907",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-589731907",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 589731907,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4OTczMTkwNw==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-02-21T16:36:49Z",
    "updated_at": "2020-02-21T16:36:49Z",
    "body": "> I'd really like to help resolve this issue\r\n\r\nAFAICT, the only \"perfect solution\" is still sound coinductive `impl` search, but I doubt that would happen before [Chalk](https://github.com/rust-lang/chalk) replaces the current trait system.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/589731907/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/593708712",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-593708712",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 593708712,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MzcwODcxMg==",
    "user": {
      "login": "simonbuchan",
      "id": 1840547,
      "node_id": "MDQ6VXNlcjE4NDA1NDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1840547?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/simonbuchan",
      "html_url": "https://github.com/simonbuchan",
      "followers_url": "https://api.github.com/users/simonbuchan/followers",
      "following_url": "https://api.github.com/users/simonbuchan/following{/other_user}",
      "gists_url": "https://api.github.com/users/simonbuchan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/simonbuchan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/simonbuchan/subscriptions",
      "organizations_url": "https://api.github.com/users/simonbuchan/orgs",
      "repos_url": "https://api.github.com/users/simonbuchan/repos",
      "events_url": "https://api.github.com/users/simonbuchan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/simonbuchan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-03-03T00:49:53Z",
    "updated_at": "2020-03-03T00:49:53Z",
    "body": "I think I would be a lot happier with the current situation with \"just\" adding more information to the compiler diagnostic.\r\n\r\nAt the moment, you get something like:\r\n```\r\nerror[E0599]: no method named `clone` found for type `Ptr<Foo>` in the current scope\r\n --> src/main.rs:9:15\r\n  |\r\n2 | struct Ptr<T>(*mut T);\r\n  | ---------------------- method `clone` not found for this\r\n...\r\n9 |     let b = a.clone();\r\n  |               ^^^^^ method not found in `Ptr<Foo>`\r\n  |\r\n  = note: the method `clone` exists but the following trait bounds were not satisfied:\r\n          `Ptr<Foo> : std::clone::Clone`\r\n  = help: items from traits can only be used if the trait is implemented and in scope\r\n  = note: the following trait defines an item `clone`, perhaps you need to implement it:\r\n          candidate #1: `std::clone::Clone`\r\n```\r\n\r\nor\r\n\r\n```\r\nerror[E0382]: use of moved value: `a`\r\n  --> src/main.rs:10:15\r\n   |\r\n8  |     let a = Ptr(&mut foo);\r\n   |         - move occurs because `a` has type `Ptr<Foo>`, which does not implement the `Copy` trait\r\n9  |     let b = a;\r\n   |             - value moved here\r\n10 |     let ptr = a.0;\r\n   |               ^^^ value used here after move\r\n```\r\n\r\nNeither of these tell you that the *reason* `Ptr` doesn't implement `Copy` or `Clone`, despite `#[derive(Copy, Clone)]` being right there. I think some logic to add another sentence for this would get rid of the case where `derive` doesn't implement when it should, which I think newer users (like me!) would be more likely to hit.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/593708712/reactions",
      "total_count": 8,
      "+1": 8,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/645878765",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-645878765",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 645878765,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NTg3ODc2NQ==",
    "user": {
      "login": "jesperdj",
      "id": 264564,
      "node_id": "MDQ6VXNlcjI2NDU2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/264564?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jesperdj",
      "html_url": "https://github.com/jesperdj",
      "followers_url": "https://api.github.com/users/jesperdj/followers",
      "following_url": "https://api.github.com/users/jesperdj/following{/other_user}",
      "gists_url": "https://api.github.com/users/jesperdj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jesperdj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jesperdj/subscriptions",
      "organizations_url": "https://api.github.com/users/jesperdj/orgs",
      "repos_url": "https://api.github.com/users/jesperdj/repos",
      "events_url": "https://api.github.com/users/jesperdj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jesperdj/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-06-18T08:52:42Z",
    "updated_at": "2020-06-18T08:57:39Z",
    "body": "Hello, I am a new user of Rust.\r\n\r\nI noticed that when I `#[derive(Copy, ...)]` on a `struct` with a type parameter, it does not place a bound on the type parameter implicitly. Instead, if I use the `struct` with a concrete type that is non-copy, my wrapper will be non-copy as well, despite the `#[derive(Copy, ...)]`:\r\n\r\n    #[derive(Copy, Clone, Debug)]\r\n    struct Wrapper<T>(T);\r\n\r\n    #[derive(Debug)]\r\n    struct NonCopy();\r\n\r\n    fn main() {\r\n        // Works fine, type T is not restricted\r\n        let x = Wrapper(NonCopy());\r\n\r\n        // Actually a move, not a copy\r\n        let y = x;\r\n\r\n        // Trouble here, x was moved instead of copied\r\n        println!(\"{:?}, {:?}\", x, y);\r\n    }\r\n\r\nFine, I understand that it works like this.\r\n\r\nMy point is about the documentation. The [docs of `std::marker::Copy`](https://doc.rust-lang.org/std/marker/trait.Copy.html) say this, which is looks wrong / out-of-date:\r\n\r\n> There is a small difference between the two: the `derive` strategy will also place a `Copy` bound on type parameters, which isn't always desired.\r\n\r\nThis does not seem to be the case (anymore).",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/645878765/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/645894111",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-645894111",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 645894111,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NTg5NDExMQ==",
    "user": {
      "login": "tyranron",
      "id": 7114909,
      "node_id": "MDQ6VXNlcjcxMTQ5MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7114909?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tyranron",
      "html_url": "https://github.com/tyranron",
      "followers_url": "https://api.github.com/users/tyranron/followers",
      "following_url": "https://api.github.com/users/tyranron/following{/other_user}",
      "gists_url": "https://api.github.com/users/tyranron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tyranron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tyranron/subscriptions",
      "organizations_url": "https://api.github.com/users/tyranron/orgs",
      "repos_url": "https://api.github.com/users/tyranron/repos",
      "events_url": "https://api.github.com/users/tyranron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tyranron/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-06-18T09:18:46Z",
    "updated_at": "2020-06-18T09:18:46Z",
    "body": "@jesperdj it was about `impl` blocks, not the type definition.\r\n\r\n```rust\r\n#[derive(Copy)]\r\nstruct Wrapper<T>(T);\r\n```\r\nexpands to\r\n```rust\r\nstruct Wrapper<T>(T);\r\n\r\nimpl<T: Copy> Copy for Wrapper<T> { ... }\r\n```\r\n... but sometimes (for example, when using `PhantomData`) you need just:\r\n```rust\r\nimpl<T> Copy for Wrapper<T> { ... }\r\n```\r\nIn such cases you need to provide a manual `impl`.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/645894111/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/646118537",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-646118537",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 646118537,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NjExODUzNw==",
    "user": {
      "login": "A1-Triard",
      "id": 8782185,
      "node_id": "MDQ6VXNlcjg3ODIxODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8782185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/A1-Triard",
      "html_url": "https://github.com/A1-Triard",
      "followers_url": "https://api.github.com/users/A1-Triard/followers",
      "following_url": "https://api.github.com/users/A1-Triard/following{/other_user}",
      "gists_url": "https://api.github.com/users/A1-Triard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/A1-Triard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/A1-Triard/subscriptions",
      "organizations_url": "https://api.github.com/users/A1-Triard/orgs",
      "repos_url": "https://api.github.com/users/A1-Triard/repos",
      "events_url": "https://api.github.com/users/A1-Triard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/A1-Triard/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-06-18T15:54:20Z",
    "updated_at": "2020-06-18T15:54:20Z",
    "body": "> In such cases you need to provide a manual `impl`.\r\n\r\nWhen using `PhantomData` [derivative](https://crates.io/crates/derivative) crate works pretty well.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/646118537/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/646183122",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-646183122",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 646183122,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NjE4MzEyMg==",
    "user": {
      "login": "Boscop",
      "id": 535593,
      "node_id": "MDQ6VXNlcjUzNTU5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/535593?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Boscop",
      "html_url": "https://github.com/Boscop",
      "followers_url": "https://api.github.com/users/Boscop/followers",
      "following_url": "https://api.github.com/users/Boscop/following{/other_user}",
      "gists_url": "https://api.github.com/users/Boscop/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Boscop/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Boscop/subscriptions",
      "organizations_url": "https://api.github.com/users/Boscop/orgs",
      "repos_url": "https://api.github.com/users/Boscop/repos",
      "events_url": "https://api.github.com/users/Boscop/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Boscop/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-06-18T17:10:42Z",
    "updated_at": "2020-06-18T17:11:56Z",
    "body": "> When using PhantomData derivative crate works pretty well.\r\n\r\nAnother tip: A common situation is that you have a member of type `Option<T>` or `Vec<T>` and you derive `Default` on the struct, and you want to struct to be `Default` even when `T` isn't. Then you just need to switch to [`derive(SmartDefault)`](https://docs.rs/smart-default/0.6.0/smart_default/derive.SmartDefault.html).\r\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/646183122/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/664174968",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-664174968",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 664174968,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDE3NDk2OA==",
    "user": {
      "login": "WaffleLapkin",
      "id": 38225716,
      "node_id": "MDQ6VXNlcjM4MjI1NzE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/38225716?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WaffleLapkin",
      "html_url": "https://github.com/WaffleLapkin",
      "followers_url": "https://api.github.com/users/WaffleLapkin/followers",
      "following_url": "https://api.github.com/users/WaffleLapkin/following{/other_user}",
      "gists_url": "https://api.github.com/users/WaffleLapkin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WaffleLapkin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WaffleLapkin/subscriptions",
      "organizations_url": "https://api.github.com/users/WaffleLapkin/orgs",
      "repos_url": "https://api.github.com/users/WaffleLapkin/repos",
      "events_url": "https://api.github.com/users/WaffleLapkin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WaffleLapkin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-07-27T07:37:59Z",
    "updated_at": "2020-07-27T07:37:59Z",
    "body": "I've found a problem that is somehow different from most of the mentioned issues, though still related.\r\n\r\nFor a generic struct:\r\n```rust\r\nstruct Wrap<T> { /* ... */ }\r\n```\r\nYou can implement `Partial{Eq,Ord}` in 2 ways. \r\n\r\nFirst (1):\r\n```rust\r\nimpl<T: PartialEq> PartialEq<Wrap<T>> for Wrap<T> { /* ... */ }\r\n```\r\nSecond (2):\r\n```rust\r\nimpl<T: PartialEq<U>, U> PartialEq<Wrap<U>> for Wrap<T> { /* ... */ }\r\n```\r\n\r\nThe (1) allows type inference based on `Partial{Eq,Ord}` (e.g.: `assert_eq!(s.parse(), Ok(X))`), while (2) allows to compare different types (e.g.: `Wrap<&str>` and `Wrap<String>`).\r\n\r\nThe `#[derive]` currently produces (1)-impl, so in case you want (2) you need either custom `derive` (like `derivative` crate) or implement the trait(s) by hand.\r\n\r\nBut there is a catch: if you implement `PartialEq` (not `Ord` though) by hand, then you lose the `StructuralEq` `StructuralPartialEq` implementations, meaning you can't match on consts:\r\n```rust\r\nconst W: Wrap<i32> = Wrap(1);\r\n\r\nmatch Wrap(1) {\r\n    W => {},\r\n    // error: to use a constant of type `Wrap` in a pattern, `Wrap` must be annotated with `#[derive(PartialEq, Eq)]`\r\n    //   --> src/main.rs:18:9\r\n    //    |\r\n    // 18 |         W => {},\r\n    //    |         ^\r\n    _ => {},\r\n}\r\n```\r\n([playground](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=f06850e4a59538d1e929a9a0b5f20bf1))\r\n\r\nSo a real solution (some markers those bounds to loose?) may only be in std/compiler.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/664174968/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/684668673",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-684668673",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 684668673,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDY2ODY3Mw==",
    "user": {
      "login": "ishitatsuyuki",
      "id": 12389383,
      "node_id": "MDQ6VXNlcjEyMzg5Mzgz",
      "avatar_url": "https://avatars.githubusercontent.com/u/12389383?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ishitatsuyuki",
      "html_url": "https://github.com/ishitatsuyuki",
      "followers_url": "https://api.github.com/users/ishitatsuyuki/followers",
      "following_url": "https://api.github.com/users/ishitatsuyuki/following{/other_user}",
      "gists_url": "https://api.github.com/users/ishitatsuyuki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ishitatsuyuki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ishitatsuyuki/subscriptions",
      "organizations_url": "https://api.github.com/users/ishitatsuyuki/orgs",
      "repos_url": "https://api.github.com/users/ishitatsuyuki/repos",
      "events_url": "https://api.github.com/users/ishitatsuyuki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ishitatsuyuki/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-09-01T09:37:31Z",
    "updated_at": "2020-09-02T05:51:28Z",
    "body": "I don't know what rustc used to be but it seems that today rustc will happily accept bounds like `where String: PartialEq<T>`? If so, what's blocking this from being implemented?\r\n\r\nEdit: It seems that we can't expose private types in bounds and therefore just writing bounds like above won't work. https://github.com/rust-lang/rust/issues/26925#issuecomment-129698062",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/684668673/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/685060974",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-685060974",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 685060974,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTA2MDk3NA==",
    "user": {
      "login": "cuviper",
      "id": 36186,
      "node_id": "MDQ6VXNlcjM2MTg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cuviper",
      "html_url": "https://github.com/cuviper",
      "followers_url": "https://api.github.com/users/cuviper/followers",
      "following_url": "https://api.github.com/users/cuviper/following{/other_user}",
      "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions",
      "organizations_url": "https://api.github.com/users/cuviper/orgs",
      "repos_url": "https://api.github.com/users/cuviper/repos",
      "events_url": "https://api.github.com/users/cuviper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cuviper/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-09-01T18:41:04Z",
    "updated_at": "2020-09-01T18:41:04Z",
    "body": "Even if they're public types, it's questionable to expose the types of private fields in the constraints.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/685060974/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/753542548",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-753542548",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 753542548,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MzU0MjU0OA==",
    "user": {
      "login": "lukaslueg",
      "id": 3148704,
      "node_id": "MDQ6VXNlcjMxNDg3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3148704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lukaslueg",
      "html_url": "https://github.com/lukaslueg",
      "followers_url": "https://api.github.com/users/lukaslueg/followers",
      "following_url": "https://api.github.com/users/lukaslueg/following{/other_user}",
      "gists_url": "https://api.github.com/users/lukaslueg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lukaslueg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lukaslueg/subscriptions",
      "organizations_url": "https://api.github.com/users/lukaslueg/orgs",
      "repos_url": "https://api.github.com/users/lukaslueg/repos",
      "events_url": "https://api.github.com/users/lukaslueg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lukaslueg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-01-02T23:20:24Z",
    "updated_at": "2021-01-02T23:20:24Z",
    "body": "This came up in #80567. Is there a policy regarding manual implementations in stdlib due to this problem with `derive`?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/753542548/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/774444991",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-774444991",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 774444991,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NDQ0NDk5MQ==",
    "user": {
      "login": "Krantz-XRF",
      "id": 17098235,
      "node_id": "MDQ6VXNlcjE3MDk4MjM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/17098235?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Krantz-XRF",
      "html_url": "https://github.com/Krantz-XRF",
      "followers_url": "https://api.github.com/users/Krantz-XRF/followers",
      "following_url": "https://api.github.com/users/Krantz-XRF/following{/other_user}",
      "gists_url": "https://api.github.com/users/Krantz-XRF/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Krantz-XRF/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Krantz-XRF/subscriptions",
      "organizations_url": "https://api.github.com/users/Krantz-XRF/orgs",
      "repos_url": "https://api.github.com/users/Krantz-XRF/repos",
      "events_url": "https://api.github.com/users/Krantz-XRF/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Krantz-XRF/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-02-06T10:44:23Z",
    "updated_at": "2021-02-06T10:44:23Z",
    "body": "In Haskell, GHC has an extension called `StandaloneDeriving`, which allows manually specifying \"trait bounds\" (instance constraints in Haskell) for an automatically derived instance:\r\n\r\n```haskell\r\n-- FlatOrdered ignores the existing order on a certain type\r\ndata FlatOrdered a = FlatOrdered a deriving Show\r\ninstance Eq (FlatOrdered a) where\r\n  _ == _ = True\r\ninstance Ord (FlatOrdered a) where\r\n  _ <= _ = False\r\n\r\n-- Then we use it to ignore ordering on a certain field\r\ndata T a = T\r\n  { ordered :: Int\r\n  , unordered :: FlatOrdered a\r\n  } deriving Show            -- automatically derived: instance Show a => Show (T a)\r\nderiving instance Eq (T a)   -- constraint removed, instead of: Eq a => Eq (T a)\r\nderiving instance Ord (T a)  -- constraint removed, instead of: Ord a => Ord (T a)\r\n```\r\n\r\nThen we have\r\n\r\n```haskell\r\n> T 2 (FlatOrdered 3) == T 2 (FlatOrdered 4)\r\nTrue\r\n> T 2 (FlatOrdered 3) <= T 2 (FlatOrdered 4)\r\nTrue\r\n> T 2 (FlatOrdered 3) >= T 2 (FlatOrdered 4)\r\nTrue\r\n```\r\n\r\nThe point here is, `rustc` can do exactly the same thing: allow the user to customize the trait bounds for a certain derived trait `impl`. When the compiler sees such a customized `derive`, it mechanically applies the trait bound (to the automatically generated `impl` block), but does not alter the implementation code for the methods. Whether or not the specified trait bounds are legal can be checked in a later compilation phase.\r\n\r\nI know what I demonstrated above can be done with `derivative`. But it is just a rough illustration. The above approach (1) achieves the goal, (2) avoids procedural macros, and (3) should be rather easy to implement in the compiler.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/774444991/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/818606398",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-818606398",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 818606398,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxODYwNjM5OA==",
    "user": {
      "login": "josephg",
      "id": 47413,
      "node_id": "MDQ6VXNlcjQ3NDEz",
      "avatar_url": "https://avatars.githubusercontent.com/u/47413?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/josephg",
      "html_url": "https://github.com/josephg",
      "followers_url": "https://api.github.com/users/josephg/followers",
      "following_url": "https://api.github.com/users/josephg/following{/other_user}",
      "gists_url": "https://api.github.com/users/josephg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/josephg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/josephg/subscriptions",
      "organizations_url": "https://api.github.com/users/josephg/orgs",
      "repos_url": "https://api.github.com/users/josephg/repos",
      "events_url": "https://api.github.com/users/josephg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/josephg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-04-13T09:49:28Z",
    "updated_at": "2021-04-13T09:49:28Z",
    "body": "Just to pile on, I've been trying to use traits for configuration of a set of behaviour, and it breaks. Worse, it breaks silently:\r\n\r\n```rust\r\nuse std::fmt::Debug;\r\n\r\ntrait SomeTrait {\r\n    type Foo: Debug;\r\n}\r\n\r\n// This should always be Debug because S::Foo is Debug.\r\n#[derive(Debug)]\r\nstruct SomeStruct<S: SomeTrait>(S::Foo);\r\n\r\nfn foo<S: SomeTrait>(s: SomeStruct<S>) {\r\n    println!(\"{:?}\", s); // Error: `S` cannot be formatted using `{:?}` because it doesn't implement `Debug`\r\n}\r\n```\r\n\r\n[Playground link](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=bfeeb0078d390c7880bd210df333e293)",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/818606398/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843622836",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-843622836",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 843622836,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MzYyMjgzNg==",
    "user": {
      "login": "Logarithmus",
      "id": 29541480,
      "node_id": "MDQ6VXNlcjI5NTQxNDgw",
      "avatar_url": "https://avatars.githubusercontent.com/u/29541480?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Logarithmus",
      "html_url": "https://github.com/Logarithmus",
      "followers_url": "https://api.github.com/users/Logarithmus/followers",
      "following_url": "https://api.github.com/users/Logarithmus/following{/other_user}",
      "gists_url": "https://api.github.com/users/Logarithmus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Logarithmus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Logarithmus/subscriptions",
      "organizations_url": "https://api.github.com/users/Logarithmus/orgs",
      "repos_url": "https://api.github.com/users/Logarithmus/repos",
      "events_url": "https://api.github.com/users/Logarithmus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Logarithmus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-05-18T23:03:06Z",
    "updated_at": "2021-06-23T23:52:36Z",
    "body": "@comex what is the current blocker for fixing this issue? I haven't find any PR's trying to implement it.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843622836/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843629601",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-843629601",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 843629601,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MzYyOTYwMQ==",
    "user": {
      "login": "agausmann",
      "id": 6611767,
      "node_id": "MDQ6VXNlcjY2MTE3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6611767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/agausmann",
      "html_url": "https://github.com/agausmann",
      "followers_url": "https://api.github.com/users/agausmann/followers",
      "following_url": "https://api.github.com/users/agausmann/following{/other_user}",
      "gists_url": "https://api.github.com/users/agausmann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/agausmann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/agausmann/subscriptions",
      "organizations_url": "https://api.github.com/users/agausmann/orgs",
      "repos_url": "https://api.github.com/users/agausmann/repos",
      "events_url": "https://api.github.com/users/agausmann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/agausmann/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-05-18T23:20:05Z",
    "updated_at": "2021-05-18T23:20:05Z",
    "body": "@Logarithmus As far as I can tell, the blocker is that this is still in \"design\" stage, it's still an open problem waiting for a good solution. I have a rough idea for a solution, but there's a few things I still need to work out before I'd consider it solid.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843629601/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/863070179",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-863070179",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 863070179,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MzA3MDE3OQ==",
    "user": {
      "login": "let4be",
      "id": 4147061,
      "node_id": "MDQ6VXNlcjQxNDcwNjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4147061?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/let4be",
      "html_url": "https://github.com/let4be",
      "followers_url": "https://api.github.com/users/let4be/followers",
      "following_url": "https://api.github.com/users/let4be/following{/other_user}",
      "gists_url": "https://api.github.com/users/let4be/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/let4be/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/let4be/subscriptions",
      "organizations_url": "https://api.github.com/users/let4be/orgs",
      "repos_url": "https://api.github.com/users/let4be/repos",
      "events_url": "https://api.github.com/users/let4be/events{/privacy}",
      "received_events_url": "https://api.github.com/users/let4be/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-06-17T09:08:32Z",
    "updated_at": "2021-06-17T09:57:21Z",
    "body": "Is there any 3rd party crate that helps to `Derive` proper clone implementations in the mean time?...\r\n\r\nI'd be happy to anything that simply calls `.clone()` on each and every field in struct(except fields with implemented `Copy`)...\r\nMy code heavily uses generics and I would like to avoid imposing `Clone` restrictions on all my generic params(they don't need it and it would confuse users of my library, all of those types are already either under `Arc` or `Rc`)",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/863070179/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/863118867",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-863118867",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 863118867,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MzExODg2Nw==",
    "user": {
      "login": "eggyal",
      "id": 3089613,
      "node_id": "MDQ6VXNlcjMwODk2MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3089613?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggyal",
      "html_url": "https://github.com/eggyal",
      "followers_url": "https://api.github.com/users/eggyal/followers",
      "following_url": "https://api.github.com/users/eggyal/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggyal/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggyal/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggyal/subscriptions",
      "organizations_url": "https://api.github.com/users/eggyal/orgs",
      "repos_url": "https://api.github.com/users/eggyal/repos",
      "events_url": "https://api.github.com/users/eggyal/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggyal/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-06-17T10:19:25Z",
    "updated_at": "2021-06-17T10:19:25Z",
    "body": "@let4be see https://github.com/rust-lang/rust/issues/26925#issuecomment-299709166 and https://github.com/rust-lang/rust/issues/26925#issuecomment-313892553 and https://github.com/rust-lang/rust/issues/26925#issuecomment-394190748 and https://github.com/rust-lang/rust/issues/26925#issuecomment-500650321",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/863118867/reactions",
      "total_count": 4,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1364338940",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-1364338940",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 1364338940,
    "node_id": "IC_kwDOAAsO6M5RUij8",
    "user": {
      "login": "Kixunil",
      "id": 1178779,
      "node_id": "MDQ6VXNlcjExNzg3Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1178779?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kixunil",
      "html_url": "https://github.com/Kixunil",
      "followers_url": "https://api.github.com/users/Kixunil/followers",
      "following_url": "https://api.github.com/users/Kixunil/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kixunil/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kixunil/subscriptions",
      "organizations_url": "https://api.github.com/users/Kixunil/orgs",
      "repos_url": "https://api.github.com/users/Kixunil/repos",
      "events_url": "https://api.github.com/users/Kixunil/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kixunil/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-12-23T21:10:38Z",
    "updated_at": "2022-12-23T21:10:38Z",
    "body": "Does seven years of this being open convince the Rust team that maybe adding the option to define custom bounds is less bad than waiting for ~~a miracle~~ Chalk while forcing people to manually implement a bunch of traits on large structs in security-critical projects (so additional dependencies are highly undesirable)?\r\n\r\nPerhaps at least minimal attribute `#[expose]` that would use `T::HowThisIsUsedInTheField: Trait` which knowingly, intentionally leaks the implementation of the struct (user acknowledges this when writing the attribute).\r\n\r\nIf yes, I'm willing to take a look into implementing it.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1364338940/reactions",
      "total_count": 10,
      "+1": 10,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1364525881",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-1364525881",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 1364525881,
    "node_id": "IC_kwDOAAsO6M5RVQM5",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-12-24T12:52:07Z",
    "updated_at": "2022-12-24T12:52:07Z",
    "body": "I'm personally convinced that we should add some form of annotation -- there have been a number of RFCs on the topic -- I think the challenge is finding one that folks are happy with. I seem to recall @cramertj working with an RFC last year on this topic?\r\n\r\n(That said, I think we know how to do 'perfect derive' in a technical sense now, but there are interesting [semver-related questions](https://smallcultfollowing.com/babysteps/blog/2022/04/12/implied-bounds-and-perfect-derive/) on whether we *should* do so...I still think we should, but maybe only over an edition.)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1364525881/reactions",
      "total_count": 11,
      "+1": 11,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1364722160",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-1364722160",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 1364722160,
    "node_id": "IC_kwDOAAsO6M5RWAHw",
    "user": {
      "login": "Kixunil",
      "id": 1178779,
      "node_id": "MDQ6VXNlcjExNzg3Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1178779?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kixunil",
      "html_url": "https://github.com/Kixunil",
      "followers_url": "https://api.github.com/users/Kixunil/followers",
      "following_url": "https://api.github.com/users/Kixunil/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kixunil/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kixunil/subscriptions",
      "organizations_url": "https://api.github.com/users/Kixunil/orgs",
      "repos_url": "https://api.github.com/users/Kixunil/repos",
      "events_url": "https://api.github.com/users/Kixunil/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kixunil/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-12-25T18:29:04Z",
    "updated_at": "2022-12-25T18:29:04Z",
    "body": "@nikomatsakis thanks for explaining! Given that there are already bunch of semver hazards wouldn't it be best to have a tool that can detect SemVer breakages and encourage lib authors to run it in CI? I think I've seen such tool somewhere already so if there's a way to make it more available that might resolve the problem.\r\n\r\nBut `perfect_derive` attribute isn't too bad either. I know it's useful because I have some code where it would already work exactly as I need.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1364722160/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1364727372",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-1364727372",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 1364727372,
    "node_id": "IC_kwDOAAsO6M5RWBZM",
    "user": {
      "login": "fmease",
      "id": 14913065,
      "node_id": "MDQ6VXNlcjE0OTEzMDY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14913065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fmease",
      "html_url": "https://github.com/fmease",
      "followers_url": "https://api.github.com/users/fmease/followers",
      "following_url": "https://api.github.com/users/fmease/following{/other_user}",
      "gists_url": "https://api.github.com/users/fmease/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fmease/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fmease/subscriptions",
      "organizations_url": "https://api.github.com/users/fmease/orgs",
      "repos_url": "https://api.github.com/users/fmease/repos",
      "events_url": "https://api.github.com/users/fmease/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fmease/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-12-25T19:21:17Z",
    "updated_at": "2022-12-25T19:37:00Z",
    "body": "I'd wager an item-specific `#[perfect_derive]` attribute would be quite useful & ergonomic in combination with *restrictions* ([RFC 3323](https://rust-lang.github.io/rfcs/3323-restrictions.html)) irrespective of whether we add a field-specific `#[expose]` attribute or not. Imagine perfectly deriving a *crate-local* trait implementation without much ado (which obviously doesn't entail any SemVer hazards). Not that RFC 3323 mentions anything about *deriving* with visibility restriction (like the syntax) but it is certainly a future possibility.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1364727372/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1365879992",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-1365879992",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 1365879992,
    "node_id": "IC_kwDOAAsO6M5Raay4",
    "user": {
      "login": "dhardy",
      "id": 134893,
      "node_id": "MDQ6VXNlcjEzNDg5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/134893?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhardy",
      "html_url": "https://github.com/dhardy",
      "followers_url": "https://api.github.com/users/dhardy/followers",
      "following_url": "https://api.github.com/users/dhardy/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhardy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhardy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhardy/subscriptions",
      "organizations_url": "https://api.github.com/users/dhardy/orgs",
      "repos_url": "https://api.github.com/users/dhardy/repos",
      "events_url": "https://api.github.com/users/dhardy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhardy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-12-27T12:52:39Z",
    "updated_at": "2022-12-27T12:54:59Z",
    "body": "> I'm personally convinced that we should add some form of annotation\r\n\r\nI'm very happy with the syntax I went with in [impl-tools](https://crates.io/crates/impl-tools):\r\n```rust\r\n#[autoimpl(Clone, Default where A: trait, B: trait)]\r\n#[autoimpl(Debug ignore self.c where A: Debug)]\r\nstruct X<A, B: Debug, C> {\r\n    a: A,\r\n    b: B,\r\n    c: PhantomData<C>,\r\n}\r\n```\r\nThis uses the special \"keyword\" `trait` and does not apply any bounds on generics by default, thus unfortunately it's incompatible with the current `derive` syntax.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1365879992/reactions",
      "total_count": 5,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 2
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1506270502",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-1506270502",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 1506270502,
    "node_id": "IC_kwDOAAsO6M5Zx90m",
    "user": {
      "login": "micolous",
      "id": 246847,
      "node_id": "MDQ6VXNlcjI0Njg0Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/246847?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/micolous",
      "html_url": "https://github.com/micolous",
      "followers_url": "https://api.github.com/users/micolous/followers",
      "following_url": "https://api.github.com/users/micolous/following{/other_user}",
      "gists_url": "https://api.github.com/users/micolous/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/micolous/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/micolous/subscriptions",
      "organizations_url": "https://api.github.com/users/micolous/orgs",
      "repos_url": "https://api.github.com/users/micolous/repos",
      "events_url": "https://api.github.com/users/micolous/events{/privacy}",
      "received_events_url": "https://api.github.com/users/micolous/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-04-13T03:12:36Z",
    "updated_at": "2023-04-13T03:44:45Z",
    "body": "It's not clear to me which PR changed this, but it looks like `rustc >= 1.66.0` has made it so deriving `Default` for enums with a type parameter (~~https://github.com/rust-lang/rust/issues/99463~~ [^1]) no longer requires `T: Default` when `T` is not used in the `#[default]` value.\r\n\r\nAs a simplified example, `Foo<T>` re-implements `Option<T>`, and derives `Default` rather than [explicitly implementing it as `Option` does][0]:\r\n\r\n[0]: https://github.com/rust-lang/rust/blob/9693b178fcebe3cc27129b7bc1237ee5eb706af8/library/core/src/option.rs#L2055-L2070\r\n\r\n```rust\r\n#[derive(Debug, Default)]\r\nenum Foo<T> {\r\n    #[default]\r\n    None,\r\n    Some(T),\r\n}\r\n\r\n#[derive(Debug)]\r\nstruct Bar {\r\n    v: u8,\r\n}\r\n\r\nfn main() {\r\n    let a: Foo<Bar> = Default::default();\r\n    let b = Foo::Some(Bar { v: 1 });\r\n    \r\n    println!(\"{a:?}, {b:?}\");\r\n}\r\n```\r\n\r\nOn `rustc 1.65.0` that fails with a compile error:\r\n\r\n```\r\nerror[E0277]: the trait bound `Bar: Default` is not satisfied\r\n  --> ./defaults.rs:14:23\r\n   |\r\n14 |     let a: Foo<Bar> = Default::default();\r\n   |                       ^^^^^^^^^^^^^^^^ the trait `Default` is not implemented for `Bar`\r\n   |\r\n   = help: the trait `Default` is implemented for `Foo<T>`\r\nnote: required for `Foo<Bar>` to implement `Default`\r\n  --> ./defaults.rs:1:17\r\n   |\r\n1  | #[derive(Debug, Default)]\r\n   |                 ^^^^^^^\r\n   = note: this error originates in the derive macro `Default` (in Nightly builds, run with -Z macro-backtrace for more info)\r\nhelp: consider annotating `Bar` with `#[derive(Default)]`\r\n   |\r\n9  | #[derive(Default)]\r\n   |\r\n```\r\n\r\n[^1]: **correction**: [my example is actually subtly different][5]\r\n\r\n[5]: https://github.com/rust-lang/rust/issues/26925#issuecomment-1506290850",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1506270502/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1506273738",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-1506273738",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 1506273738,
    "node_id": "IC_kwDOAAsO6M5Zx-nK",
    "user": {
      "login": "jhpratt",
      "id": 3161395,
      "node_id": "MDQ6VXNlcjMxNjEzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3161395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jhpratt",
      "html_url": "https://github.com/jhpratt",
      "followers_url": "https://api.github.com/users/jhpratt/followers",
      "following_url": "https://api.github.com/users/jhpratt/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhpratt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jhpratt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhpratt/subscriptions",
      "organizations_url": "https://api.github.com/users/jhpratt/orgs",
      "repos_url": "https://api.github.com/users/jhpratt/repos",
      "events_url": "https://api.github.com/users/jhpratt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jhpratt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-04-13T03:16:44Z",
    "updated_at": "2023-04-13T03:16:44Z",
    "body": "@micolous That is intentional. The previous behavior that included the `Default` bound was a bug, as the RFC clearly stated the bound would _not_ be present.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1506273738/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1506290850",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-1506290850",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 1506290850,
    "node_id": "IC_kwDOAAsO6M5ZyCyi",
    "user": {
      "login": "micolous",
      "id": 246847,
      "node_id": "MDQ6VXNlcjI0Njg0Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/246847?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/micolous",
      "html_url": "https://github.com/micolous",
      "followers_url": "https://api.github.com/users/micolous/followers",
      "following_url": "https://api.github.com/users/micolous/following{/other_user}",
      "gists_url": "https://api.github.com/users/micolous/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/micolous/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/micolous/subscriptions",
      "organizations_url": "https://api.github.com/users/micolous/orgs",
      "repos_url": "https://api.github.com/users/micolous/repos",
      "events_url": "https://api.github.com/users/micolous/events{/privacy}",
      "received_events_url": "https://api.github.com/users/micolous/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-04-13T03:42:05Z",
    "updated_at": "2023-04-13T03:42:32Z",
    "body": "> @micolous That is intentional. The previous behavior that included the `Default` bound was a bug, as the RFC clearly stated the bound would _not_ be present.\r\n\r\nThanks for confirming.  I agree the old behaviour was unexpected; it just seemed like was related to this issue (based on https://github.com/rust-lang/rust/issues/99463 duping against this one) and wasn't clear what exactly changed here (as this is still open) that this should now \"suddenly work\". \ud83d\ude05 \r\n\r\nI had derived `Default` because of Clippy's `derivable_impls` lint, but then due to some (unrelated) CI shenanigans, it looks like my CI setup wasn't _actually_ testing against `rustc < 1.66.0`.\r\n\r\nDigging into it some more now, it looks like my example is subtly different to https://github.com/rust-lang/rust/issues/99463, so deriving `Default` for a struct with a type parameter and an `Option<T>` (or `Foo<T>` with my example above) field still requires `T: Default`, even on `rustc 1.68.2` (stable) and `1.70.0-nightly (4087deacc 2023-04-12)`... so that explains why this is still open. \ud83d\ude04 ",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1506290850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1506294323",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-1506294323",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 1506294323,
    "node_id": "IC_kwDOAAsO6M5ZyDoz",
    "user": {
      "login": "jhpratt",
      "id": 3161395,
      "node_id": "MDQ6VXNlcjMxNjEzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3161395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jhpratt",
      "html_url": "https://github.com/jhpratt",
      "followers_url": "https://api.github.com/users/jhpratt/followers",
      "following_url": "https://api.github.com/users/jhpratt/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhpratt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jhpratt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhpratt/subscriptions",
      "organizations_url": "https://api.github.com/users/jhpratt/orgs",
      "repos_url": "https://api.github.com/users/jhpratt/repos",
      "events_url": "https://api.github.com/users/jhpratt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jhpratt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-04-13T03:45:27Z",
    "updated_at": "2023-04-13T03:45:27Z",
    "body": "It is related to the issue in a way, just not in any manner that can be generalized. The only thing that changed was `#[derive(Default)]` on enums, as it was explicitly accepted.\r\n\r\nFor what it's worth, the disagreement on bounds is the sole reason that `#[default]` can't be placed on an enum variant with data.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1506294323/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1528025201",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-1528025201",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 1528025201,
    "node_id": "IC_kwDOAAsO6M5bE9Bx",
    "user": {
      "login": "ggutoski",
      "id": 8526464,
      "node_id": "MDQ6VXNlcjg1MjY0NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8526464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ggutoski",
      "html_url": "https://github.com/ggutoski",
      "followers_url": "https://api.github.com/users/ggutoski/followers",
      "following_url": "https://api.github.com/users/ggutoski/following{/other_user}",
      "gists_url": "https://api.github.com/users/ggutoski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ggutoski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ggutoski/subscriptions",
      "organizations_url": "https://api.github.com/users/ggutoski/orgs",
      "repos_url": "https://api.github.com/users/ggutoski/repos",
      "events_url": "https://api.github.com/users/ggutoski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ggutoski/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-04-28T19:58:51Z",
    "updated_at": "2023-04-28T19:58:51Z",
    "body": "Yet another example from associated types: [Playground](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=60eed470d8668444f778d0c0372e5a4d)",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1528025201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2404599857",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-2404599857",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 2404599857,
    "node_id": "IC_kwDOAAsO6M6PU0gx",
    "user": {
      "login": "la10736",
      "id": 3902961,
      "node_id": "MDQ6VXNlcjM5MDI5NjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3902961?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/la10736",
      "html_url": "https://github.com/la10736",
      "followers_url": "https://api.github.com/users/la10736/followers",
      "following_url": "https://api.github.com/users/la10736/following{/other_user}",
      "gists_url": "https://api.github.com/users/la10736/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/la10736/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/la10736/subscriptions",
      "organizations_url": "https://api.github.com/users/la10736/orgs",
      "repos_url": "https://api.github.com/users/la10736/repos",
      "events_url": "https://api.github.com/users/la10736/events{/privacy}",
      "received_events_url": "https://api.github.com/users/la10736/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-10-10T09:39:32Z",
    "updated_at": "2024-10-10T09:39:32Z",
    "body": "Just for reiterate it for the new comers [rust-derivative](https://github.com/mcarton/rust-derivative) can work around for this issue.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2404599857/reactions",
      "total_count": 5,
      "+1": 1,
      "-1": 3,
      "laugh": 0,
      "hooray": 0,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2404743134",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-2404743134",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 2404743134,
    "node_id": "IC_kwDOAAsO6M6PVXfe",
    "user": {
      "login": "teohhanhui",
      "id": 548843,
      "node_id": "MDQ6VXNlcjU0ODg0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548843?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/teohhanhui",
      "html_url": "https://github.com/teohhanhui",
      "followers_url": "https://api.github.com/users/teohhanhui/followers",
      "following_url": "https://api.github.com/users/teohhanhui/following{/other_user}",
      "gists_url": "https://api.github.com/users/teohhanhui/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/teohhanhui/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/teohhanhui/subscriptions",
      "organizations_url": "https://api.github.com/users/teohhanhui/orgs",
      "repos_url": "https://api.github.com/users/teohhanhui/repos",
      "events_url": "https://api.github.com/users/teohhanhui/events{/privacy}",
      "received_events_url": "https://api.github.com/users/teohhanhui/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-10-10T10:44:48Z",
    "updated_at": "2024-10-10T10:44:48Z",
    "body": "@la10736:\n> Just for reiterate it for the new comers [rust-derivative](https://github.com/mcarton/rust-derivative) can work around for this issue.\n\nhttps://github.com/mcarton/rust-derivative/issues/117",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2404743134/reactions",
      "total_count": 5,
      "+1": 5,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2404832655",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-2404832655",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 2404832655,
    "node_id": "IC_kwDOAAsO6M6PVtWP",
    "user": {
      "login": "la10736",
      "id": 3902961,
      "node_id": "MDQ6VXNlcjM5MDI5NjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3902961?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/la10736",
      "html_url": "https://github.com/la10736",
      "followers_url": "https://api.github.com/users/la10736/followers",
      "following_url": "https://api.github.com/users/la10736/following{/other_user}",
      "gists_url": "https://api.github.com/users/la10736/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/la10736/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/la10736/subscriptions",
      "organizations_url": "https://api.github.com/users/la10736/orgs",
      "repos_url": "https://api.github.com/users/la10736/repos",
      "events_url": "https://api.github.com/users/la10736/events{/privacy}",
      "received_events_url": "https://api.github.com/users/la10736/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-10-10T11:26:25Z",
    "updated_at": "2024-10-10T11:26:25Z",
    "body": "> Just for reiterate it for the new comers [rust-derivative](https://github.com/mcarton/rust-derivative) can work around for this issue.\n\nSorry  [rust-derivative](https://github.com/mcarton/rust-derivative) is not still maintained. But it's a useful starting point of how to find replacement and how to work around it.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2404832655/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2405087201",
    "html_url": "https://github.com/rust-lang/rust/issues/26925#issuecomment-2405087201",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26925",
    "id": 2405087201,
    "node_id": "IC_kwDOAAsO6M6PWrfh",
    "user": {
      "login": "dspyz-matician",
      "id": 100452635,
      "node_id": "U_kgDOBfzJGw",
      "avatar_url": "https://avatars.githubusercontent.com/u/100452635?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dspyz-matician",
      "html_url": "https://github.com/dspyz-matician",
      "followers_url": "https://api.github.com/users/dspyz-matician/followers",
      "following_url": "https://api.github.com/users/dspyz-matician/following{/other_user}",
      "gists_url": "https://api.github.com/users/dspyz-matician/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dspyz-matician/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dspyz-matician/subscriptions",
      "organizations_url": "https://api.github.com/users/dspyz-matician/orgs",
      "repos_url": "https://api.github.com/users/dspyz-matician/repos",
      "events_url": "https://api.github.com/users/dspyz-matician/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dspyz-matician/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-10-10T13:24:04Z",
    "updated_at": "2024-10-10T13:24:04Z",
    "body": "I use the `derive-where` crate which seems to have all the functionality I expect 99.9% of the time (the other 0.1% I write manual impls)",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2405087201/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
