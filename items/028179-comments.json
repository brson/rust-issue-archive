[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/137279496",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-137279496",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 137279496,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNzI3OTQ5Ng==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-03T00:22:38Z",
    "updated_at": "2015-09-03T00:22:38Z",
    "body": "I think this even leads to a linker error on some platforms (depending on the situation), so in that sense I'd also be fine just having a set of all `#[no_mangle]` symbols for each crate and if they overlap we generate a hard compile time error. While strictly not backwards compatible I believe it's practically fine and it's basically what most crates what anyway\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/137279496/reactions",
      "total_count": 4,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 4,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/137283064",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-137283064",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 137283064,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNzI4MzA2NA==",
    "user": {
      "login": "cuviper",
      "id": 36186,
      "node_id": "MDQ6VXNlcjM2MTg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cuviper",
      "html_url": "https://github.com/cuviper",
      "followers_url": "https://api.github.com/users/cuviper/followers",
      "following_url": "https://api.github.com/users/cuviper/following{/other_user}",
      "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions",
      "organizations_url": "https://api.github.com/users/cuviper/orgs",
      "repos_url": "https://api.github.com/users/cuviper/repos",
      "events_url": "https://api.github.com/users/cuviper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cuviper/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-03T00:42:15Z",
    "updated_at": "2015-09-03T00:42:15Z",
    "body": "You can `#[no_mangle]` override an existing mangled function too:\n\n```\nfn main() {\n  println!(\"ok\")\n}\n\n#[no_mangle]\n#[allow(non_snake_case)]\npub fn _ZN2io5stdio6_print20h94cd0587c9a534faX3gE() {\n    unreachable!()\n}\n```\n\nThis makes the playpen timeout on stable 1.2: http://is.gd/sxdUl3\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/137283064/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/137302944",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-137302944",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 137302944,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNzMwMjk0NA==",
    "user": {
      "login": "geofft",
      "id": 74644,
      "node_id": "MDQ6VXNlcjc0NjQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/74644?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/geofft",
      "html_url": "https://github.com/geofft",
      "followers_url": "https://api.github.com/users/geofft/followers",
      "following_url": "https://api.github.com/users/geofft/following{/other_user}",
      "gists_url": "https://api.github.com/users/geofft/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/geofft/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/geofft/subscriptions",
      "organizations_url": "https://api.github.com/users/geofft/orgs",
      "repos_url": "https://api.github.com/users/geofft/repos",
      "events_url": "https://api.github.com/users/geofft/events{/privacy}",
      "received_events_url": "https://api.github.com/users/geofft/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-03T02:24:17Z",
    "updated_at": "2015-09-03T02:24:17Z",
    "body": "> While strictly not backwards compatible I believe it's practically fine\n\nYeah, I'd argue that having multiply-defined `#[no_mangle]` symbols is, in essence, undefined behavior (in the sense that nobody defined it), so making it a hard error seems fine.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/137302944/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/137404851",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-137404851",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 137404851,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNzQwNDg1MQ==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-03T10:38:08Z",
    "updated_at": "2015-09-03T10:40:55Z",
    "body": "I doubt there\u2019s anything sensible (other than writing our own linker) that can be done here to truly fix the issue.\n\nI\u2019m not against the idea of making less of these cases possible, though. e.g.\n\n``` rust\n#[no_mangle]\nfn main(){}\n```\n\ndoesn\u2019t work already. But most of the proposed solutions (exception being keeping more symbols in memory) sound like a non-option to me.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/137404851/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/138684364",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-138684364",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 138684364,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzODY4NDM2NA==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-08T20:04:17Z",
    "updated_at": "2015-09-08T20:04:26Z",
    "body": "@nagisa \n\n`#[no_mangle]` will always be always unsafe as you can use it to hijack C library functions, .e.g make `malloc` do something evil.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/138684364/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/138686040",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-138686040",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 138686040,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzODY4NjA0MA==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-08T20:11:10Z",
    "updated_at": "2015-09-08T20:11:10Z",
    "body": "@arielb1 i didn\u2019t say anything about safety; only about our capability to do anything about this issue.\n\nEither way, if you have to be wary of code you control unknowingly hijacking other code or doing evil things, something went very wrong where Rust (or any language, really) can\u2019t help.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/138686040/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/140421402",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-140421402",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 140421402,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MDQyMTQwMg==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-15T15:01:38Z",
    "updated_at": "2015-09-15T15:01:38Z",
    "body": "@nagisa \n\nJS is designed for that use-case. Rust is _theoretically_ supposed to fill that role too, but both rustc and the type-system are _way_ not sufficiently trustworthy for that.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/140421402/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/254969186",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-254969186",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 254969186,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NDk2OTE4Ng==",
    "user": {
      "login": "bstrie",
      "id": 865233,
      "node_id": "MDQ6VXNlcjg2NTIzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bstrie",
      "html_url": "https://github.com/bstrie",
      "followers_url": "https://api.github.com/users/bstrie/followers",
      "following_url": "https://api.github.com/users/bstrie/following{/other_user}",
      "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions",
      "organizations_url": "https://api.github.com/users/bstrie/orgs",
      "repos_url": "https://api.github.com/users/bstrie/repos",
      "events_url": "https://api.github.com/users/bstrie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bstrie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-19T23:24:35Z",
    "updated_at": "2016-10-19T23:24:35Z",
    "body": "I agree that unmangled symbol collisions should be a compilation error. Breakage here is extraordinarily unlikely, and the only code that it could break is code that won't be working as intended anyway, which is exactly the sort of the code that we ought to break.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/254969186/reactions",
      "total_count": 13,
      "+1": 13,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/255223963",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-255223963",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 255223963,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTIyMzk2Mw==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-20T20:49:07Z",
    "updated_at": "2016-10-20T20:49:07Z",
    "body": "Reassigning to lang team. What a pain.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/255223963/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/258279436",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-258279436",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 258279436,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1ODI3OTQzNg==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-03T21:28:11Z",
    "updated_at": "2016-11-03T21:28:11Z",
    "body": "triage: P-low\n\nSeems like a real problem, if not that concerning. @rust-lang/lang feels that the fix proposed by @alexcrichton in [this comment](https://github.com/rust-lang/rust/issues/28179#issuecomment-137279496) is the correct one. Check at link time for duplicate `#[no_mangle]` symbols in rust code; don't try to solve similar problems that might occur with C code and other stuff out of our purview.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/258279436/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/360953704",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-360953704",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 360953704,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDk1MzcwNA==",
    "user": {
      "login": "vi",
      "id": 173219,
      "node_id": "MDQ6VXNlcjE3MzIxOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173219?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vi",
      "html_url": "https://github.com/vi",
      "followers_url": "https://api.github.com/users/vi/followers",
      "following_url": "https://api.github.com/users/vi/following{/other_user}",
      "gists_url": "https://api.github.com/users/vi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vi/subscriptions",
      "organizations_url": "https://api.github.com/users/vi/orgs",
      "repos_url": "https://api.github.com/users/vi/repos",
      "events_url": "https://api.github.com/users/vi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-27T02:40:20Z",
    "updated_at": "2018-01-27T02:40:20Z",
    "body": "Why is calling `#[no_mangle]` functions safe in the first place?\r\n\r\nAlso `#[no_mangle]` feels like a first step towards `#[naked]`, which should also require `unsafe` to be called.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/360953704/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/360959476",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-360959476",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 360959476,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDk1OTQ3Ng==",
    "user": {
      "login": "geofft",
      "id": 74644,
      "node_id": "MDQ6VXNlcjc0NjQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/74644?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/geofft",
      "html_url": "https://github.com/geofft",
      "followers_url": "https://api.github.com/users/geofft/followers",
      "following_url": "https://api.github.com/users/geofft/following{/other_user}",
      "gists_url": "https://api.github.com/users/geofft/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/geofft/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/geofft/subscriptions",
      "organizations_url": "https://api.github.com/users/geofft/orgs",
      "repos_url": "https://api.github.com/users/geofft/repos",
      "events_url": "https://api.github.com/users/geofft/events{/privacy}",
      "received_events_url": "https://api.github.com/users/geofft/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-27T04:35:27Z",
    "updated_at": "2018-01-27T04:35:27Z",
    "body": "> Why is calling `#[no_mangle]` functions safe in the first place?\r\n\r\nThey can't do anything that normal functions can't do. And there isn't in theory any way to use them to violate safety (this issue is a bug; it would be totally fine in theory for `rustc` to fail to compile code with any symbol collisions in any objects, whether they come from Rust or from another language).\r\n\r\n> `#[naked]`, which should also require unsafe to be called.\r\n\r\nAs far as I can tell, this is basically because naked functions have no guaranteed `ret` opcode, so `#[naked] fn foo() -> {println!(\"hi!\")}` will just let the instruction pointer run past the end of a function, which is rather memory-unsafe. If they did (and if there were a more coherent story about accessing arguments and returning values from pure Rust code), I'm having trouble seeing what makes them unsafe.\r\n\r\nThat is, the reason `#[naked]` functions should require unsafe is that the compiler expects a particular thing to be done by the implementation in order for them to be safely callable, and it has no way to check that. (I sort of think that, like unsafe traits, it should be possible for the implementor to say \"Trust me on this\" and others to be able to call the function from safe code, but maybe this is a discussion for the naked function RFC, not here.) There's nothing special that `#[no_mangle]` functions need to take care to do; they're just the same as normal functions except for their linkage name.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/360959476/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/360961280",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-360961280",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 360961280,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDk2MTI4MA==",
    "user": {
      "login": "vi",
      "id": 173219,
      "node_id": "MDQ6VXNlcjE3MzIxOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173219?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vi",
      "html_url": "https://github.com/vi",
      "followers_url": "https://api.github.com/users/vi/followers",
      "following_url": "https://api.github.com/users/vi/following{/other_user}",
      "gists_url": "https://api.github.com/users/vi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vi/subscriptions",
      "organizations_url": "https://api.github.com/users/vi/orgs",
      "repos_url": "https://api.github.com/users/vi/repos",
      "events_url": "https://api.github.com/users/vi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-27T05:19:17Z",
    "updated_at": "2018-01-27T05:19:59Z",
    "body": "> They can't do anything that normal functions can't do.\r\n\r\nIt's not the function itself that is unsafe but the call. The call to something unmangled is FFI-ish, therefore looks (and is) unsafe.\r\n\r\n`#[naked]` functions are unsafe per se, so calls to them should be unsafe not directly, but as a consequence.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/360961280/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/361320369",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-361320369",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 361320369,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTMyMDM2OQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-29T17:25:40Z",
    "updated_at": "2018-01-29T17:25:40Z",
    "body": "There are some other examples of abusing `#[no_mangle]` that may be worth mentioning. \r\n\r\nFor example, [this hack overrides `main` with custom assembly](https://play.rust-lang.org/?gist=eb16714124c36327f0fb9a880ef50748&version=stable): \r\n\r\n```rust\r\n#![no_main]\r\n\r\n#[link_section=\".text\"]\r\n#[no_mangle]\r\npub static main: [u32; 9] = [\r\n    3237986353,\r\n    3355442993,\r\n    120950088,\r\n    822083584,\r\n    252621522,\r\n    1699267333,\r\n    745499756,\r\n    1919899424,\r\n    169960556,\r\n];\r\n```\r\n\r\nSigh.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/361320369/reactions",
      "total_count": 72,
      "+1": 0,
      "-1": 0,
      "laugh": 59,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 13
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/361332117",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-361332117",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 361332117,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTMzMjExNw==",
    "user": {
      "login": "vi",
      "id": 173219,
      "node_id": "MDQ6VXNlcjE3MzIxOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173219?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vi",
      "html_url": "https://github.com/vi",
      "followers_url": "https://api.github.com/users/vi/followers",
      "following_url": "https://api.github.com/users/vi/following{/other_user}",
      "gists_url": "https://api.github.com/users/vi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vi/subscriptions",
      "organizations_url": "https://api.github.com/users/vi/orgs",
      "repos_url": "https://api.github.com/users/vi/repos",
      "events_url": "https://api.github.com/users/vi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-29T18:02:58Z",
    "updated_at": "2018-01-29T18:02:58Z",
    "body": "`#![forbid(unsafe)]` code should be assumed free of such hacks...",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/361332117/reactions",
      "total_count": 12,
      "+1": 12,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/443846479",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-443846479",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 443846479,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0Mzg0NjQ3OQ==",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-12-03T19:51:41Z",
    "updated_at": "2018-12-03T19:51:41Z",
    "body": "> #![forbid(unsafe)] code should be assumed free of such hacks...\r\n\r\nYeah, my thinking exactly. Maybe that should forbid `no_mangle` as well, or so?",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/443846479/reactions",
      "total_count": 5,
      "+1": 5,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/505508359",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-505508359",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 505508359,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTUwODM1OQ==",
    "user": {
      "login": "ebkalderon",
      "id": 322831,
      "node_id": "MDQ6VXNlcjMyMjgzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/322831?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ebkalderon",
      "html_url": "https://github.com/ebkalderon",
      "followers_url": "https://api.github.com/users/ebkalderon/followers",
      "following_url": "https://api.github.com/users/ebkalderon/following{/other_user}",
      "gists_url": "https://api.github.com/users/ebkalderon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ebkalderon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ebkalderon/subscriptions",
      "organizations_url": "https://api.github.com/users/ebkalderon/orgs",
      "repos_url": "https://api.github.com/users/ebkalderon/repos",
      "events_url": "https://api.github.com/users/ebkalderon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ebkalderon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-06-25T15:56:29Z",
    "updated_at": "2019-06-25T15:56:29Z",
    "body": "The playground example in [this comment](https://github.com/rust-lang/rust/issues/28179#issuecomment-137283064) no longer times out on Rust 1.35 stable and prints `\"ok\"` without any apparent issues.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/505508359/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/505510111",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-505510111",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 505510111,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTUxMDExMQ==",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-06-25T16:00:46Z",
    "updated_at": "2019-06-25T16:00:46Z",
    "body": "That just means that the mangled name of the print function changed.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/505510111/reactions",
      "total_count": 6,
      "+1": 6,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/505511332",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-505511332",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 505511332,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTUxMTMzMg==",
    "user": {
      "login": "ebkalderon",
      "id": 322831,
      "node_id": "MDQ6VXNlcjMyMjgzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/322831?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ebkalderon",
      "html_url": "https://github.com/ebkalderon",
      "followers_url": "https://api.github.com/users/ebkalderon/followers",
      "following_url": "https://api.github.com/users/ebkalderon/following{/other_user}",
      "gists_url": "https://api.github.com/users/ebkalderon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ebkalderon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ebkalderon/subscriptions",
      "organizations_url": "https://api.github.com/users/ebkalderon/orgs",
      "repos_url": "https://api.github.com/users/ebkalderon/repos",
      "events_url": "https://api.github.com/users/ebkalderon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ebkalderon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-06-25T16:03:48Z",
    "updated_at": "2019-06-25T16:03:48Z",
    "body": "@RalfJung Thanks, that makes sense. Just wanted to point it out for future readers, as I had stumbled across it and was surprised to see it work despite the issue not being resolved.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/505511332/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/505518054",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-505518054",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 505518054,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTUxODA1NA==",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-06-25T16:21:11Z",
    "updated_at": "2019-06-25T16:21:29Z",
    "body": "I think the current version (for Rust 1.35) would be\r\n```rust\r\nfn main() {\r\n  println!(\"ok\")\r\n}\r\n\r\n#[no_mangle]\r\n#[allow(non_snake_case)]\r\npub fn _ZN3std2io5stdio6_print17ha4c0b9f4da5c9e13E() {\r\n    unreachable!()\r\n}\r\n```\r\nbut that doesn't run either, it just makes the linker fail:\r\n```\r\n/rustc/3c235d5600393dfe6c36eeed34042efad8d4f26e//src/libstd/io/stdio.rs:752: multiple definition of `std::io::stdio::_print'\r\n```",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/505518054/reactions",
      "total_count": 5,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 5,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/681809498",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-681809498",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 681809498,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MTgwOTQ5OA==",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-08-27T08:48:37Z",
    "updated_at": "2020-08-27T08:48:37Z",
    "body": "In [this comment](https://www.reddit.com/r/rust/comments/ielvxu/the_cxx_debate/g2i1r7a/?context=3), @dtolnay brings up the idea of \"unsafety at the item level\". I feel like that is also relevant for this issue here, which basically concerns an unsafe function-level attribute.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/681809498/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1029044458",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-1029044458",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 1029044458,
    "node_id": "IC_kwDOAAsO6M49Vfjq",
    "user": {
      "login": "bstrie",
      "id": 865233,
      "node_id": "MDQ6VXNlcjg2NTIzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bstrie",
      "html_url": "https://github.com/bstrie",
      "followers_url": "https://api.github.com/users/bstrie/followers",
      "following_url": "https://api.github.com/users/bstrie/following{/other_user}",
      "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions",
      "organizations_url": "https://api.github.com/users/bstrie/orgs",
      "repos_url": "https://api.github.com/users/bstrie/repos",
      "events_url": "https://api.github.com/users/bstrie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bstrie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-02-03T14:27:27Z",
    "updated_at": "2022-02-03T14:27:27Z",
    "body": "`#[export_name]` has the same theoretical problem as `#[no_mangle]` here, right? https://doc.rust-lang.org/reference/abi.html#the-export_name-attribute",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1029044458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1029049112",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-1029049112",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 1029049112,
    "node_id": "IC_kwDOAAsO6M49VgsY",
    "user": {
      "login": "tarcieri",
      "id": 797,
      "node_id": "MDQ6VXNlcjc5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/797?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tarcieri",
      "html_url": "https://github.com/tarcieri",
      "followers_url": "https://api.github.com/users/tarcieri/followers",
      "following_url": "https://api.github.com/users/tarcieri/following{/other_user}",
      "gists_url": "https://api.github.com/users/tarcieri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tarcieri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tarcieri/subscriptions",
      "organizations_url": "https://api.github.com/users/tarcieri/orgs",
      "repos_url": "https://api.github.com/users/tarcieri/repos",
      "events_url": "https://api.github.com/users/tarcieri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tarcieri/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-02-03T14:32:07Z",
    "updated_at": "2022-02-03T14:32:07Z",
    "body": "@bstrie there's a tracking issue for all attributes with unsafe behaviors here, which also tracks adding lints for them: https://github.com/rust-lang/rust/issues/82499",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1029049112/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1522618005",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-1522618005",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 1522618005,
    "node_id": "IC_kwDOAAsO6M5awU6V",
    "user": {
      "login": "jhpratt",
      "id": 3161395,
      "node_id": "MDQ6VXNlcjMxNjEzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3161395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jhpratt",
      "html_url": "https://github.com/jhpratt",
      "followers_url": "https://api.github.com/users/jhpratt/followers",
      "following_url": "https://api.github.com/users/jhpratt/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhpratt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jhpratt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhpratt/subscriptions",
      "organizations_url": "https://api.github.com/users/jhpratt/orgs",
      "repos_url": "https://api.github.com/users/jhpratt/repos",
      "events_url": "https://api.github.com/users/jhpratt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jhpratt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-04-26T01:06:42Z",
    "updated_at": "2023-04-26T01:06:42Z",
    "body": "This issue will be resolved by [RFC 3325](https://github.com/rust-lang/rfcs/pull/3325) if it is accepted and stabilized.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1522618005/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1886109932",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-1886109932",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 1886109932,
    "node_id": "IC_kwDOAAsO6M5wa8Ds",
    "user": {
      "login": "tmandry",
      "id": 2280544,
      "node_id": "MDQ6VXNlcjIyODA1NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2280544?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tmandry",
      "html_url": "https://github.com/tmandry",
      "followers_url": "https://api.github.com/users/tmandry/followers",
      "following_url": "https://api.github.com/users/tmandry/following{/other_user}",
      "gists_url": "https://api.github.com/users/tmandry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tmandry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tmandry/subscriptions",
      "organizations_url": "https://api.github.com/users/tmandry/orgs",
      "repos_url": "https://api.github.com/users/tmandry/repos",
      "events_url": "https://api.github.com/users/tmandry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tmandry/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-01-11T02:36:56Z",
    "updated_at": "2024-01-11T02:36:56Z",
    "body": "I think this is just a compiler bug. Am I missing something?\r\n\r\nOn ELF for example, if we linked `#[no_mangle]` symbols as [`STB_GLOBAL`](https://docs.oracle.com/cd/E19683-01/816-1386/chapter6-79797/index.html), we would get a linker error with multiple definitions. I can only infer that we must be linking them as `STB_WEAK`, but don't see any reason why we should be. That's the binding we would use if we _wanted_ to combine multiple definitions of the same thing, e.g. multiple monomorphizations of a crate's generics.\r\n\r\nSpeculating a bit more, there's a chance that weak binding was a convenient way to allow multiple codegen units to instantiate the same function, but I think we could prevent that pretty easily for `#[no_mangle]` and `#[export_name]` functions.\r\n\r\nI would be surprised if the equivalent linker behavior did not exist in the executable formats of every major platform we support.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1886109932/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1886183939",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-1886183939",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 1886183939,
    "node_id": "IC_kwDOAAsO6M5wbOID",
    "user": {
      "login": "ChrisDenton",
      "id": 4459874,
      "node_id": "MDQ6VXNlcjQ0NTk4NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChrisDenton",
      "html_url": "https://github.com/ChrisDenton",
      "followers_url": "https://api.github.com/users/ChrisDenton/followers",
      "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions",
      "organizations_url": "https://api.github.com/users/ChrisDenton/orgs",
      "repos_url": "https://api.github.com/users/ChrisDenton/repos",
      "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChrisDenton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-01-11T03:53:31Z",
    "updated_at": "2024-01-11T03:53:31Z",
    "body": "A linker will trawl through static libraries looking for missing symbols. Once it finds a relevant symbol it essentially extracts that object file from the static library then stops looking. Similarly, if a symbol is already resolved it won't go looking in static libraries for others of the same name.\n\nIn this scenario we can always use `no_mangle` to override symbols in static libraries and this behaviour may even be desirable.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1886183939/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1886237918",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-1886237918",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 1886237918,
    "node_id": "IC_kwDOAAsO6M5wbbTe",
    "user": {
      "login": "tmandry",
      "id": 2280544,
      "node_id": "MDQ6VXNlcjIyODA1NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2280544?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tmandry",
      "html_url": "https://github.com/tmandry",
      "followers_url": "https://api.github.com/users/tmandry/followers",
      "following_url": "https://api.github.com/users/tmandry/following{/other_user}",
      "gists_url": "https://api.github.com/users/tmandry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tmandry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tmandry/subscriptions",
      "organizations_url": "https://api.github.com/users/tmandry/orgs",
      "repos_url": "https://api.github.com/users/tmandry/repos",
      "events_url": "https://api.github.com/users/tmandry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tmandry/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-01-11T04:48:49Z",
    "updated_at": "2024-01-11T04:48:49Z",
    "body": "I believe most linkers have options that can force them to link an object file. But yes, there are still opportunities for interactions when there's a global symbol namespace. The important thing for Rust is that the behavior is predictable and consistent. ",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1886237918/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1886241322",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-1886241322",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 1886241322,
    "node_id": "IC_kwDOAAsO6M5wbcIq",
    "user": {
      "login": "ChrisDenton",
      "id": 4459874,
      "node_id": "MDQ6VXNlcjQ0NTk4NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChrisDenton",
      "html_url": "https://github.com/ChrisDenton",
      "followers_url": "https://api.github.com/users/ChrisDenton/followers",
      "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions",
      "organizations_url": "https://api.github.com/users/ChrisDenton/orgs",
      "repos_url": "https://api.github.com/users/ChrisDenton/repos",
      "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChrisDenton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-01-11T04:53:33Z",
    "updated_at": "2024-01-11T04:53:33Z",
    "body": "Sure but we can't make it a safe attribute? Even if we can guard against specific issues.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1886241322/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1886252388",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-1886252388",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 1886252388,
    "node_id": "IC_kwDOAAsO6M5wbe1k",
    "user": {
      "login": "cuviper",
      "id": 36186,
      "node_id": "MDQ6VXNlcjM2MTg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cuviper",
      "html_url": "https://github.com/cuviper",
      "followers_url": "https://api.github.com/users/cuviper/followers",
      "following_url": "https://api.github.com/users/cuviper/following{/other_user}",
      "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions",
      "organizations_url": "https://api.github.com/users/cuviper/orgs",
      "repos_url": "https://api.github.com/users/cuviper/repos",
      "events_url": "https://api.github.com/users/cuviper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cuviper/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-01-11T05:08:38Z",
    "updated_at": "2024-01-11T05:08:38Z",
    "body": "Overriding `malloc` was mentioned earlier: https://github.com/rust-lang/rust/issues/28179#issuecomment-138684364\r\n\r\nHere's a trivial example of that:\r\n\r\n```rust\r\nfn main() {\r\n    println!(\"Hello!\");\r\n}\r\n\r\n#[no_mangle]\r\npub fn malloc() -> usize { 1 }\r\n```\r\n\r\ni.e. **safe** code that crashes with a segfault.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1886252388/reactions",
      "total_count": 6,
      "+1": 0,
      "-1": 0,
      "laugh": 6,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1886314738",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-1886314738",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 1886314738,
    "node_id": "IC_kwDOAAsO6M5wbuDy",
    "user": {
      "login": "tmandry",
      "id": 2280544,
      "node_id": "MDQ6VXNlcjIyODA1NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2280544?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tmandry",
      "html_url": "https://github.com/tmandry",
      "followers_url": "https://api.github.com/users/tmandry/followers",
      "following_url": "https://api.github.com/users/tmandry/following{/other_user}",
      "gists_url": "https://api.github.com/users/tmandry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tmandry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tmandry/subscriptions",
      "organizations_url": "https://api.github.com/users/tmandry/orgs",
      "repos_url": "https://api.github.com/users/tmandry/repos",
      "events_url": "https://api.github.com/users/tmandry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tmandry/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-01-11T05:41:19Z",
    "updated_at": "2024-01-11T05:46:55Z",
    "body": "I agree that the attribute still needs to be unsafe because of its potential interactions with native code, the ability to override the same symbol in shared libraries, and other potential weird linking behavior the compiler can't check.\r\n\r\nThat said, I think we could remove a lot of the fangs with thoughtful consideration of better linking defaults. That would need to come with ways of overriding them via `link` attributes.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1886314738/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2314797945",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-2314797945",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 2314797945,
    "node_id": "IC_kwDOAAsO6M6J-QN5",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-08-28T09:24:10Z",
    "updated_at": "2024-08-28T09:24:10Z",
    "body": "This is fixed by https://github.com/rust-lang/rust/issues/123757. :)\r\n\r\n@tmandry I don't know enough about ELF linkers to understand what could be done here by changing linker flags. Could you open a new issue describing that? I think this one here is already filled with too much discussion going in a different direction.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2314797945/reactions",
      "total_count": 3,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 3,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2315968138",
    "html_url": "https://github.com/rust-lang/rust/issues/28179#issuecomment-2315968138",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28179",
    "id": 2315968138,
    "node_id": "IC_kwDOAAsO6M6KCt6K",
    "user": {
      "login": "geofft",
      "id": 74644,
      "node_id": "MDQ6VXNlcjc0NjQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/74644?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/geofft",
      "html_url": "https://github.com/geofft",
      "followers_url": "https://api.github.com/users/geofft/followers",
      "following_url": "https://api.github.com/users/geofft/following{/other_user}",
      "gists_url": "https://api.github.com/users/geofft/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/geofft/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/geofft/subscriptions",
      "organizations_url": "https://api.github.com/users/geofft/orgs",
      "repos_url": "https://api.github.com/users/geofft/repos",
      "events_url": "https://api.github.com/users/geofft/events{/privacy}",
      "received_events_url": "https://api.github.com/users/geofft/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-08-28T18:06:54Z",
    "updated_at": "2024-08-28T18:06:54Z",
    "body": "Super exciting to see this issue from 2015 / Rust 1.2 resolved - thanks to everyone who made it happen! I agree that the unsafety check is the best that can be done here.\r\n\r\n---\r\n\r\nRegarding the comments about static linking - it appears to me that there's a distinction between linking an object file and linking an archive file containing that exact same object file. The linker complains about collisions in `STB_GLOBAL` symbols in two .o files but not in two .a files (or .rlib files, which are also ar archives).\r\n\r\n<details>\r\n\r\n```console\r\n$ cat main.c\r\n#include <stdio.h>\r\n\r\nextern int collision(void);\r\n\r\nint main(void) {\r\n\tprintf(\"%d\\n\", collision());\r\n}\r\n$ cat collide1.c\r\nint collision(void) {\r\n\treturn 1;\r\n}\r\n$ cat collide2.c\r\nint collision(void) {\r\n\treturn 2;\r\n}\r\n$ cc -c collide1.c\r\n$ cc -c collide2.c\r\n$ cc -o main main.c collide1.o collide2.o\r\n/usr/bin/ld: collide2.o: in function `collision':\r\ncollide2.c:(.text+0x0): multiple definition of `collision'; collide1.o:collide1.c:(.text+0x0): first defined here\r\ncollect2: error: ld returned 1 exit status\r\n$ ar rcs libcollide1.a collide1.o\r\n$ ar rcs libcollide2.a collide2.o\r\n$ cc -o main main.c -lcollide1 -lcollide2 -L.\r\n$ ./main\r\n1\r\n$ cc -o main main.c -lcollide2 -lcollide1 -L.\r\n$ ./main\r\n2\r\n$ readelf -s collide1.o | grep collision\r\n     9: 0000000000000000    15 FUNC    GLOBAL DEFAULT    1 collision\r\n$ readelf -s libcollide1.a | grep collision\r\n     9: 0000000000000000    15 FUNC    GLOBAL DEFAULT    1 collision\r\n```\r\n\r\n(GCC 9.4 and ld 2.34 as shipped in Ubuntu 20.04)\r\n\r\n</details>\r\n\r\nBut you _do_ get the error if you use `--whole-archive`:\r\n\r\n```console\r\n$ cc -o main main.c -Wl,--whole-archive -lcollide2 -lcollide1 -Wl,--no-whole-archive -L.\r\n/usr/bin/ld: ./libcollide1.a(collide1.o): in function `collision':\r\ncollide1.c:(.text+0x0): multiple definition of `collision'; ./libcollide2.a(collide2.o):collide2.c:(.text+0x0): first defined here\r\ncollect2: error: ld returned 1 exit status\r\n```\r\n\r\n[GNU ld's documentation of that option](https://sourceware.org/binutils/docs/ld/Options.html#index-_002d_002dwhole_002darchive) says that it makes the linker \"include every object file in the archive in the link, rather than searching the archive for the required object files.\" I'm interpreting that to mean that with the two static archives, it decides that it's found `collision` in libcollide1's collide1.o, and when going through libcollide2, it doesn't need anything from collide2.o and skips it.\r\n\r\nThis seems like relatively intentional behavior on the part of the linker, and I'm not sure it would work / be a good idea for rustc to use `--whole-archive` for rlibs, but maybe that's worth exploring. I don't think it will help for collisions with libc and other standard libraries, though, because if you leave off the `-Wl,--no-whole-archive` flag at the end, you get a whole lot of collisions from libraries implicitly added by the compiler driver.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2315968138/reactions",
      "total_count": 3,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 3,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
