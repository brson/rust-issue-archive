[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130488705",
    "html_url": "https://github.com/rust-lang/rust/issues/27583#issuecomment-130488705",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27583",
    "id": 130488705,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDQ4ODcwNQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-13T00:20:00Z",
    "updated_at": "2015-08-13T00:20:00Z",
    "body": "OK, so, stranger and stranger. Now that we have a new stage0, this where clause that was previously required seems...to lead to an error? If I remove it, though, things work. Bizarre.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130488705/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130488739",
    "html_url": "https://github.com/rust-lang/rust/issues/27583#issuecomment-130488739",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27583",
    "id": 130488739,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDQ4ODczOQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-13T00:20:15Z",
    "updated_at": "2015-08-13T00:20:15Z",
    "body": "Seems like I should put some effort into trying to narrow down the test case better.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130488739/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130491447",
    "html_url": "https://github.com/rust-lang/rust/issues/27583#issuecomment-130491447",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27583",
    "id": 130491447,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDQ5MTQ0Nw==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-13T00:39:16Z",
    "updated_at": "2015-08-13T00:39:16Z",
    "body": "This test seems to fail.\n\n``` rust\nuse std::cell::Cell;\nuse std::marker::PhantomData;\n\npub trait Delegate<'tcx> { }\n\npub struct InferCtxt<'a, 'tcx: 'a> {\n    x: PhantomData<&'a Cell<&'tcx ()>>\n}\n\npub struct MemCategorizationContext<'t, 'a: 't, 'tcx : 'a> {\n    x: &'t InferCtxt<'a, 'tcx>,\n}\n\npub struct ExprUseVisitor<'d, 't, 'a: 't, 'tcx:'a+'d> {\n    typer: &'t InferCtxt<'a, 'tcx>,\n    mc: MemCategorizationContext<'t, 'a, 'tcx>,\n    delegate: &'d mut (Delegate<'tcx>+'d),\n}\n\nimpl<'d,'t,'a,'tcx> ExprUseVisitor<'d,'t,'a,'tcx> {\n    pub fn new(delegate: &'d mut Delegate<'tcx>,\n               typer: &'t InferCtxt<'a, 'tcx>)\n               -> ExprUseVisitor<'d,'t,'a,'tcx>\n    {\n        ExprUseVisitor {\n            typer: typer,\n            mc: MemCategorizationContext::new(typer),\n            delegate: delegate,\n        }\n    }\n}\n\nimpl<'t, 'a,'tcx> MemCategorizationContext<'t, 'a, 'tcx> {\n    pub fn new(typer: &'t InferCtxt<'a, 'tcx>) -> MemCategorizationContext<'t, 'a, 'tcx> {\n        MemCategorizationContext { x: typer }\n    }\n}\n\nfn main() { }\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130491447/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130491638",
    "html_url": "https://github.com/rust-lang/rust/issues/27583#issuecomment-130491638",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27583",
    "id": 130491638,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDQ5MTYzOA==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-13T00:40:53Z",
    "updated_at": "2015-08-13T00:40:53Z",
    "body": "This MAY be related to object defaults -- if I change `&'d mut Delegate<'tcx>` to `&'d mut (Delegate<'tcx>+'d)`, it works. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130491638/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130492856",
    "html_url": "https://github.com/rust-lang/rust/issues/27583#issuecomment-130492856",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27583",
    "id": 130492856,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDQ5Mjg1Ng==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-13T00:52:39Z",
    "updated_at": "2015-08-13T00:52:39Z",
    "body": "OK, this is definitely some kind of wacky node-id confusion. If I change `&'d mut Delegate<'tcx>` to `&'d mut (Delegate<'tcx>)`, the test passes!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130492856/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131850339",
    "html_url": "https://github.com/rust-lang/rust/issues/27583#issuecomment-131850339",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27583",
    "id": 131850339,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTg1MDMzOQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-17T14:52:48Z",
    "updated_at": "2015-08-17T14:52:48Z",
    "body": "OK, I found the problem. The problem is that the `lub_free_regions` code is really not very smart. In particular, for some `'a` and `'b` pair, it considers where `'a <= 'b` or `'b <= 'a` and otherwise falls back to `'static`. It does not consider that there might be some other `'c` such that `'a <= 'c` and `'b <= 'c` (in this case, `'tcx` is such a region). \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131850339/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131850744",
    "html_url": "https://github.com/rust-lang/rust/issues/27583#issuecomment-131850744",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27583",
    "id": 131850744,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTg1MDc0NA==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-17T14:53:28Z",
    "updated_at": "2015-08-17T14:53:28Z",
    "body": "I believe that adding parens makes things work simply because it permutes the ordering of various operations in region inference, causing slightly different LUB operations to arise in which the right variables are seen at the right time. I haven't fully verified this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131850744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131870230",
    "html_url": "https://github.com/rust-lang/rust/issues/27583#issuecomment-131870230",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27583",
    "id": 131870230,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTg3MDIzMA==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-17T15:48:54Z",
    "updated_at": "2015-08-17T15:48:54Z",
    "body": "(And, of course, we are not guaranteed a \"best\" answer here, so this is another case where region inference is (currently) bound to be somewhat inadequate.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131870230/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
