[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100673925",
    "html_url": "https://github.com/rust-lang/rust/issues/25268#issuecomment-100673925",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25268",
    "id": 100673925,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMDY3MzkyNQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-10T17:37:02Z",
    "updated_at": "2015-05-10T17:37:02Z",
    "body": "Hm interesting! This probably isn't so much connected to locales so much that something in the environment/output isn't valid UTF-8. Could you get a backtrace of this failure? I would be surprised if this was coming from `std::process`, but the test looks pretty innocuous, so it may very well be coming from std!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100673925/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100696943",
    "html_url": "https://github.com/rust-lang/rust/issues/25268#issuecomment-100696943",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25268",
    "id": 100696943,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMDY5Njk0Mw==",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-10T20:31:42Z",
    "updated_at": "2015-05-10T20:31:42Z",
    "body": "The problem may actually reside in compiletest, it captures the output of the test and then can interpret it incorrectly. If the test is run as a standalone program outside of the test suite then no panic happens and the test works as expected. I'm still investigating.\n\nHere's the backtrace, but it's not very helpful:\n\n```\nstack backtrace:\n   1:         0x711bd332 - sys::backtrace::write::h022859084c97c7d8kss\n   2:         0x711c7a03 - rt::unwind::register::hf6cf68ec3d65cb61gZv\n   3:         0x71185274 - rt::unwind::begin_unwind_inner::ha0de919eeab7aca9qWv\n   4:         0x71185dd7 - rt::unwind::begin_unwind_fmt::hf37080597d178e4bwVv\n   5:         0x711c7670 - rust_begin_unwind\n   6:         0x711e0732 - panicking::panic_fmt::h705ebd4b98819809PJy\n   7:           0x402d6d\n   8:           0x4277a9\n   9:           0x422aae\n  10:           0x414e7a\n  11:           0x40af03\n  12:           0x44a4c0 - main\n  13:         0x6d7a91ad - Bencher::ns_per_iter::he7122ff52105191f77b\n  14:         0x6d7a70bd - Bencher::ns_per_iter::he7122ff52105191f77b\n  15:         0x71201d0c - rust_try\n  16:         0x71201ce9 - rust_try\n  17:         0x6d7a737e - Bencher::ns_per_iter::he7122ff52105191f77b\n  18:         0x711c5936 - sys::process::Command::cwd::hd77e7bf8cfdcbde1DGu\n  19:         0x773f59cd - BaseThreadInitThunk\n\n\nfailures:\n    [run-pass] run-pass/process-remove-from-env.rs\n\ntest result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured\n\nthread '<main>' panicked at 'Some tests failed', C:/msys64/home/rust/src/compiletest/compiletest.rs:256\nstack backtrace:\n   1:         0x711bd332 - sys::backtrace::write::h022859084c97c7d8kss\n   2:         0x711c7c17 - rt::unwind::register::hf6cf68ec3d65cb61gZv\n   3:         0x71185274 - rt::unwind::begin_unwind_inner::ha0de919eeab7aca9qWv\n   4:           0x4039f5\n   5:           0x4417bb\n   6:         0x71201d0c - rust_try\n   7:         0x71201ce9 - rust_try\n   8:         0x711c899a - rt::lang_start::hf4cd440969ce39bd98v\n   9:           0x4013e8\n  10:           0x40151b\n  11:         0x773f59cd - BaseThreadInitThunk\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100696943/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100991785",
    "html_url": "https://github.com/rust-lang/rust/issues/25268#issuecomment-100991785",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25268",
    "id": 100991785,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMDk5MTc4NQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-11T17:41:35Z",
    "updated_at": "2015-05-11T17:41:35Z",
    "body": "Aha! It looks like [you are 100% correct](https://github.com/rust-lang/rust/blob/f697041b37e8c9c86dfe463262501ad61dd2d4a3/src/compiletest/procsrv.rs#L62-L63).\n\nI suspect it would be fine for `compiletest` to just use `from_utf8_lossy`\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/100991785/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
