[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30581187",
    "html_url": "https://github.com/rust-lang/rust/issues/10088#issuecomment-30581187",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10088",
    "id": 30581187,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTgxMTg3",
    "user": {
      "login": "mukilan",
      "id": 251518,
      "node_id": "MDQ6VXNlcjI1MTUxOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/251518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mukilan",
      "html_url": "https://github.com/mukilan",
      "followers_url": "https://api.github.com/users/mukilan/followers",
      "following_url": "https://api.github.com/users/mukilan/following{/other_user}",
      "gists_url": "https://api.github.com/users/mukilan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mukilan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mukilan/subscriptions",
      "organizations_url": "https://api.github.com/users/mukilan/orgs",
      "repos_url": "https://api.github.com/users/mukilan/repos",
      "events_url": "https://api.github.com/users/mukilan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mukilan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-14T17:18:51Z",
    "updated_at": "2013-12-14T17:18:51Z",
    "body": "Issue still present in master. Updating code to compile.\n\n``` rust\n\ntrait Foo {\n   fn foo(&mut self);\n}\n\nimpl<'a> Foo for &'a mut Foo {\n    fn foo(&mut self) { self.foo(); }\n}\n\nstruct S {\n    i :int\n}\n\n\nimpl Foo for S {\n    fn foo(&mut self) {\n        self.i = self.i + 1;\n    }\n}\n\ntrait Bar {\n    fn bar(&mut self);\n}\n\nimpl<T: Foo> Bar for T {\n    fn bar(&mut self) {\n        self.foo();\n    }\n}\n\nfn main() {\n    let s = &mut S{i:0} as &mut Foo;\n    s.foo(); // works fine\n    s.bar(); // error: cannot borrow immutable local variable as mutable\n\n    let mut s = &mut S{i:0} as &mut Foo;\n    s.bar(); // works fine\n\n}\n\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30581187/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30601939",
    "html_url": "https://github.com/rust-lang/rust/issues/10088#issuecomment-30601939",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10088",
    "id": 30601939,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNjAxOTM5",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-15T10:39:23Z",
    "updated_at": "2013-12-15T10:39:23Z",
    "body": "reading the updated example, I do wonder if this is \"working as designed\" ... I'm not 100% sure yet (I haven't tried playing around with it locally).\n\n(I'm also not sure if that `impl<'a> Foo for &'a mut Foo` is quite right ... does it infinite loop in its current state, once you get `main` to compile?  You might need `(**self).foo()` or something along those lines instead.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30601939/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30602615",
    "html_url": "https://github.com/rust-lang/rust/issues/10088#issuecomment-30602615",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10088",
    "id": 30602615,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNjAyNjE1",
    "user": {
      "login": "mukilan",
      "id": 251518,
      "node_id": "MDQ6VXNlcjI1MTUxOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/251518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mukilan",
      "html_url": "https://github.com/mukilan",
      "followers_url": "https://api.github.com/users/mukilan/followers",
      "following_url": "https://api.github.com/users/mukilan/following{/other_user}",
      "gists_url": "https://api.github.com/users/mukilan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mukilan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mukilan/subscriptions",
      "organizations_url": "https://api.github.com/users/mukilan/orgs",
      "repos_url": "https://api.github.com/users/mukilan/repos",
      "events_url": "https://api.github.com/users/mukilan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mukilan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-15T11:28:46Z",
    "updated_at": "2013-12-15T11:35:19Z",
    "body": "@pnkfelix : You are right. It does \"work as designed\". Here's my explanation as to why. Please correct me if I'm wrong. When `s.foo()` invoked, since s is `&mut Foo`, the compiler can invoke `foo()` using the vtable pointer in `s`. However, when `s.bar()` is invoked, the compiler has no way of knowing the right `trait Bar` vtable to use, given that \"s\" is just `&mut Foo` . Hence the need for the `impl<'a> Foo for &'a mut Foo`, which can now be used with `impl<T: Foo> Bar for T` to create the Bar vtable with the `self` type as `&mut Foo` .But since the method is `bar(&mut self)` , the actual type of the first parameter is `&mut &mut Foo` and hence s is required to be mutable.\n\nFor the original code I submitted in the issue (the one with the &mut Reader), I was told in IRC that it was probably a bug and was asked to raise an issue. But even that was working per design, if the the above explanation is valid and correct.\n\nShall I close this issue?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30602615/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51987406",
    "html_url": "https://github.com/rust-lang/rust/issues/10088#issuecomment-51987406",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10088",
    "id": 51987406,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTg3NDA2",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-12T22:37:23Z",
    "updated_at": "2014-08-12T22:37:23Z",
    "body": "Looks like this should be closed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/51987406/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
