[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52135394",
    "html_url": "https://github.com/rust-lang/rust/issues/16488#issuecomment-52135394",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16488",
    "id": 52135394,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTM1Mzk0",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T01:58:57Z",
    "updated_at": "2014-08-14T01:58:57Z",
    "body": "Letting destructors run on uninitialised memory is undefined behaviour (since reading such memory is UB); you should never ever do it, and you certainly can't rely on any particular behaviour.\n\n(The compiler is theoretically allowed to compile the whole program to `fn main() {}` if it can happen.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52135394/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52136765",
    "html_url": "https://github.com/rust-lang/rust/issues/16488#issuecomment-52136765",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16488",
    "id": 52136765,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTM2NzY1",
    "user": {
      "login": "donkopotamus",
      "id": 4120456,
      "node_id": "MDQ6VXNlcjQxMjA0NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4120456?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/donkopotamus",
      "html_url": "https://github.com/donkopotamus",
      "followers_url": "https://api.github.com/users/donkopotamus/followers",
      "following_url": "https://api.github.com/users/donkopotamus/following{/other_user}",
      "gists_url": "https://api.github.com/users/donkopotamus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/donkopotamus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/donkopotamus/subscriptions",
      "organizations_url": "https://api.github.com/users/donkopotamus/orgs",
      "repos_url": "https://api.github.com/users/donkopotamus/repos",
      "events_url": "https://api.github.com/users/donkopotamus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/donkopotamus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T02:25:47Z",
    "updated_at": "2014-08-14T02:25:47Z",
    "body": "@huonw Currently the documentation for `std::mem::uninitialized` indicates the destructor _will_ be run ... and (implicitly) that it is `unsafe` since it is expected that the caller will subsequently initialize the object to be valid before there is any chance of it being dropped.  Thus the documentation seems to say that\n\n```\nlet x: X = std::mem::uninitialized();\n<fill out x, perhaps by passing to a ffi function>\n```\n\nis supported, and that `x.drop()` _will_ run.  \n\n(Since it doesn't, I just allocate x as eg an array of 0's but it seems wasteful for it to be zeroed when the foreign function will overwrite it completely anyway)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52136765/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52136883",
    "html_url": "https://github.com/rust-lang/rust/issues/16488#issuecomment-52136883",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16488",
    "id": 52136883,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTM2ODgz",
    "user": {
      "login": "donkopotamus",
      "id": 4120456,
      "node_id": "MDQ6VXNlcjQxMjA0NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4120456?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/donkopotamus",
      "html_url": "https://github.com/donkopotamus",
      "followers_url": "https://api.github.com/users/donkopotamus/followers",
      "following_url": "https://api.github.com/users/donkopotamus/following{/other_user}",
      "gists_url": "https://api.github.com/users/donkopotamus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/donkopotamus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/donkopotamus/subscriptions",
      "organizations_url": "https://api.github.com/users/donkopotamus/orgs",
      "repos_url": "https://api.github.com/users/donkopotamus/repos",
      "events_url": "https://api.github.com/users/donkopotamus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/donkopotamus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T02:27:49Z",
    "updated_at": "2014-08-14T02:27:49Z",
    "body": "@huonw \n\n> Care must be taken when using this function, if the type T has a destructor and \n> the value falls out of scope (due to unwinding or returning) before being initialized, \n> then the destructor will run on uninitialized data, likely leading to crashes.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52136883/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52138906",
    "html_url": "https://github.com/rust-lang/rust/issues/16488#issuecomment-52138906",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16488",
    "id": 52138906,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTM4OTA2",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T03:05:51Z",
    "updated_at": "2014-08-14T03:05:51Z",
    "body": "Ah, if the docs say that they should be adjusted. Reopening & editing to cover that.\n\n> it is unsafe since it is expected that the caller will subsequently initialize the object to be valid before there is any chance of it being dropped\n\nNB. it's not just expected, it's _required_ that either the object is initialised before being read; the only context in which it can't be initialised is if it's never read (including by destructors), or it is directly passed to `std::mem::forget`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52138906/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52139824",
    "html_url": "https://github.com/rust-lang/rust/issues/16488#issuecomment-52139824",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16488",
    "id": 52139824,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTM5ODI0",
    "user": {
      "login": "donkopotamus",
      "id": 4120456,
      "node_id": "MDQ6VXNlcjQxMjA0NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4120456?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/donkopotamus",
      "html_url": "https://github.com/donkopotamus",
      "followers_url": "https://api.github.com/users/donkopotamus/followers",
      "following_url": "https://api.github.com/users/donkopotamus/following{/other_user}",
      "gists_url": "https://api.github.com/users/donkopotamus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/donkopotamus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/donkopotamus/subscriptions",
      "organizations_url": "https://api.github.com/users/donkopotamus/orgs",
      "repos_url": "https://api.github.com/users/donkopotamus/repos",
      "events_url": "https://api.github.com/users/donkopotamus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/donkopotamus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T03:23:23Z",
    "updated_at": "2014-08-14T03:23:23Z",
    "body": "@huonw In that case ... is there a way I can allocate an uninitialized version of `X`, that will then be immediately passed to a c++ function for initialization, where I can subsequently ensure `Drop` will run?  \n\nOr is this not possible and I must zero out my `X` before passing it?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52139824/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52142003",
    "html_url": "https://github.com/rust-lang/rust/issues/16488#issuecomment-52142003",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16488",
    "id": 52142003,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTQyMDAz",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T04:12:55Z",
    "updated_at": "2014-08-14T04:12:55Z",
    "body": "It must be initialised at some point. In the code you demonstrate, the uninitialised variable is not initialised, but writing\n\n``` rust\nunsafe {\n    let mut x = uninitialized();\n    some_cxx_function(&mut x);\n} // x destructor runs without UB\n```\n\nshould work fine (i.e. the problem with the original code example is `y` is _never_ initialised, via FFI or otherwise).\n\nIn any case, you probably shouldn't be placing a Rust destructor on a type used in FFI, as a `Drop` implementation makes representation change. At the moment, it adds a `bool` field indicating if the value needs to be dropped or not (the \"drop flag\"). I recommend you use a plain struct for FFI without a `Drop` impl, with a wrapper type providing the higher level interface, e.g.\n\n``` rust\n#[repr(C)]\nstruct foo_t {\n    x: i32\n}\n\nstruct Foo {\n    data: foo_t\n}\nimpl Drop for Foo {\n    fn drop(&mut self) { ... }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52142003/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52143655",
    "html_url": "https://github.com/rust-lang/rust/issues/16488#issuecomment-52143655",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16488",
    "id": 52143655,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTQzNjU1",
    "user": {
      "login": "donkopotamus",
      "id": 4120456,
      "node_id": "MDQ6VXNlcjQxMjA0NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4120456?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/donkopotamus",
      "html_url": "https://github.com/donkopotamus",
      "followers_url": "https://api.github.com/users/donkopotamus/followers",
      "following_url": "https://api.github.com/users/donkopotamus/following{/other_user}",
      "gists_url": "https://api.github.com/users/donkopotamus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/donkopotamus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/donkopotamus/subscriptions",
      "organizations_url": "https://api.github.com/users/donkopotamus/orgs",
      "repos_url": "https://api.github.com/users/donkopotamus/repos",
      "events_url": "https://api.github.com/users/donkopotamus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/donkopotamus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T04:53:31Z",
    "updated_at": "2014-08-14T04:54:20Z",
    "body": "@huonw Hmm ...  I was just trying to make my code example small ... for example if I change the sample code to fill in `y` it makes no difference. `Drop` still doesn't run. eg\n\n``` rust\n// this `y` will never run Drop\nlet y = unsafe {\n        let mut y: X = std::mem::uninitialized();\n        y.x = 1;\n        y\n    };\n```\n\nIs that expected?  My actual real life case looks similar to what you suggest:\n\n``` rust\nimpl rust_allocated_example {\n    // XXX: This value never calls Drop\n    pub fn new() -> rust_allocated_example {\n        unsafe {\n            let instance: rust_allocated_example = std::mem::uninitialized();\n            use_example_constructor(&instance);\n            instance\n        }\n    }\n```\n\n(In your example, you don't let the value leak out of the `unsafe {}` it was created in, is that the difference?)\n\n[Sorry for the constant questions!]\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52143655/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52144069",
    "html_url": "https://github.com/rust-lang/rust/issues/16488#issuecomment-52144069",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16488",
    "id": 52144069,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTQ0MDY5",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T05:02:21Z",
    "updated_at": "2014-08-14T05:05:18Z",
    "body": "Makes no difference, `unsafe { ... }` is a normal scope and destructors when any variables go out of scope, like a function body.\n\nAnd, now that I think about it in more detail what I said above was unclear (although not wrong). Yes, the behaviour for your first example is expected, due to the drop flag being left uninitialised (i.e. writing `y.x = 1` isn't filling the whole `y` value). The correct way to handle this is to not implement `Drop` directly on FFI types; or make sure your external initialiser handles it.\n\n(My first code example was assuming `some_cxx_function` initializes the object properly, including the drop flag, which is rather unlikely to work reliably (in the sense the precise layout of the drop flag has no guarantees) and non-recommended, especially as this area of Rust is changing: #5016.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52144069/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52144416",
    "html_url": "https://github.com/rust-lang/rust/issues/16488#issuecomment-52144416",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16488",
    "id": 52144416,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTQ0NDE2",
    "user": {
      "login": "donkopotamus",
      "id": 4120456,
      "node_id": "MDQ6VXNlcjQxMjA0NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4120456?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/donkopotamus",
      "html_url": "https://github.com/donkopotamus",
      "followers_url": "https://api.github.com/users/donkopotamus/followers",
      "following_url": "https://api.github.com/users/donkopotamus/following{/other_user}",
      "gists_url": "https://api.github.com/users/donkopotamus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/donkopotamus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/donkopotamus/subscriptions",
      "organizations_url": "https://api.github.com/users/donkopotamus/orgs",
      "repos_url": "https://api.github.com/users/donkopotamus/repos",
      "events_url": "https://api.github.com/users/donkopotamus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/donkopotamus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T05:10:19Z",
    "updated_at": "2014-08-14T05:10:19Z",
    "body": "@huonw Ahh thank you ... now I understand!  Much thanks also for your previous suggestion about wrapping the FFI struct inside another one that handles the Drop, I'll do it this way.\n\n(out of interest, is there any way to get access to that drop flag in rust itself, or would that involve some raw pointer magic and be exposed to breakage if/when that magic flag disappears?!)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52144416/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52259479",
    "html_url": "https://github.com/rust-lang/rust/issues/16488#issuecomment-52259479",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16488",
    "id": 52259479,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjU5NDc5",
    "user": {
      "login": "ben0x539",
      "id": 24142,
      "node_id": "MDQ6VXNlcjI0MTQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/24142?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ben0x539",
      "html_url": "https://github.com/ben0x539",
      "followers_url": "https://api.github.com/users/ben0x539/followers",
      "following_url": "https://api.github.com/users/ben0x539/following{/other_user}",
      "gists_url": "https://api.github.com/users/ben0x539/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ben0x539/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ben0x539/subscriptions",
      "organizations_url": "https://api.github.com/users/ben0x539/orgs",
      "repos_url": "https://api.github.com/users/ben0x539/repos",
      "events_url": "https://api.github.com/users/ben0x539/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ben0x539/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T23:45:53Z",
    "updated_at": "2014-08-14T23:45:53Z",
    "body": "The docs could also stand to warn that the destructor might run if the `uninitialized()` variable is assigned something else, so that `{ let mut x = unsafe { std::mem::uninitialized() }; x = box 42i; }` will actually try to free the garbage value and not just the boxed 42. Currently the docs only suggest that the destructor might run if the value falls out of scope before being initialized, but of course \"initializing\" an already initialized (even `to uninitialized()`) value drops the previous value first.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52259479/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52259589",
    "html_url": "https://github.com/rust-lang/rust/issues/16488#issuecomment-52259589",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16488",
    "id": 52259589,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjU5NTg5",
    "user": {
      "login": "ben0x539",
      "id": 24142,
      "node_id": "MDQ6VXNlcjI0MTQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/24142?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ben0x539",
      "html_url": "https://github.com/ben0x539",
      "followers_url": "https://api.github.com/users/ben0x539/followers",
      "following_url": "https://api.github.com/users/ben0x539/following{/other_user}",
      "gists_url": "https://api.github.com/users/ben0x539/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ben0x539/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ben0x539/subscriptions",
      "organizations_url": "https://api.github.com/users/ben0x539/orgs",
      "repos_url": "https://api.github.com/users/ben0x539/repos",
      "events_url": "https://api.github.com/users/ben0x539/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ben0x539/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T23:47:26Z",
    "updated_at": "2014-08-14T23:47:26Z",
    "body": "It does sorta sound like `uninitalized()` shouldn't work at all for types with drop flags.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52259589/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52259750",
    "html_url": "https://github.com/rust-lang/rust/issues/16488#issuecomment-52259750",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16488",
    "id": 52259750,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjU5NzUw",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T23:49:43Z",
    "updated_at": "2014-08-14T23:49:43Z",
    "body": "`uninitialised` is useful for generic data `T`, where one might temporarily memcpy some other pre-instantiated `T` into it (i.e. manually initialising types with drop flags is hard, but copying such values around is fine), e.g. [`swap`](https://github.com/rust-lang/rust/blob/f8e0ede92157995665c7caf4ae115354139be46d/src/libcore/mem.rs#L263).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52259750/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55689705",
    "html_url": "https://github.com/rust-lang/rust/issues/16488#issuecomment-55689705",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16488",
    "id": 55689705,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1Njg5NzA1",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-16T03:10:34Z",
    "updated_at": "2014-09-16T03:11:03Z",
    "body": "It's not always UB for a destructor to run on uninitialized data. It's perfectly fine for a type with `#[unsafe_no_drop_flag]`. The documentation is correct, and any potential UB would occur in the destructor code that's run.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55689705/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
