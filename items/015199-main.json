{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/15199",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/15199/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/15199/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/15199/events",
  "html_url": "https://github.com/rust-lang/rust/pull/15199",
  "id": 36587593,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTc2NTU0MDc=",
  "number": 15199,
  "title": "debuginfo: Make names of types in debuginfo reliable and omit source locations from debug info type descriptions.",
  "user": {
    "login": "michaelwoerister",
    "id": 1825894,
    "node_id": "MDQ6VXNlcjE4MjU4OTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelwoerister",
    "html_url": "https://github.com/michaelwoerister",
    "followers_url": "https://api.github.com/users/michaelwoerister/followers",
    "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelwoerister/orgs",
    "repos_url": "https://api.github.com/users/michaelwoerister/repos",
    "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelwoerister/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 9,
  "created_at": "2014-06-26T15:36:58Z",
  "updated_at": "2014-07-03T12:31:39Z",
  "closed_at": "2014-07-03T12:31:37Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/15199",
    "html_url": "https://github.com/rust-lang/rust/pull/15199",
    "diff_url": "https://github.com/rust-lang/rust/pull/15199.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/15199.patch",
    "merged_at": "2014-07-03T12:31:39Z"
  },
  "body": "So far, type names generated for debuginfo where a bit sketchy. It was not clearly defined when a name should be fully qualified and when not, if region parameters should be shown or not, and other things like that.\nThis commit makes the debuginfo module responsible for creating type names instead of using `ppaux::ty_to_str()` and brings type names (as they show up in the DWARF information) in line with GCC and Clang:\n- The name of the type being described is unqualified. It's path is defined by its position in the namespace hierarchy.\n- Type arguments are always fully qualified, no matter if they would actually be in scope at the type definition location.\n\nCare is also taken to make type names consistent across crate boundaries. That is, the code now tries make the type name the same, regardless if the type is in the local crate or reconstructed from metadata. Otherwise LLVM will complain about violating the one-definition-rule when using link-time-optimization.\n\nThis commit also removes all source location information from type descriptions because these cannot be reconstructed for types instantiated from metadata. Again, with LTO enabled, this can lead to two versions of the debuginfo type description, one with and one without source location information, which then triggers the LLVM ODR assertion.\nFortunately, source location information about types is rarely used, so this has little impact. Once source location information is preserved in metadata (#1972) it can also be re-enabled for type descriptions.\n\n`RUSTFLAGS=-g make check` no works again for me locally, including the LTO test cases (note that I've taken care of #15156 by reverting the change in LLVM that @luqmana identified as the culprit for that issue).\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/15199/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/15199/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
