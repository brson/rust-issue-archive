[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57408836",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-57408836",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 57408836,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDA4ODM2",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-01T01:46:44Z",
    "updated_at": "2014-10-01T01:46:44Z",
    "body": "cc @aturon @nick29581 @pcwalton \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57408836/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57408863",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-57408863",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 57408863,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDA4ODYz",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-01T01:47:09Z",
    "updated_at": "2014-10-01T01:47:09Z",
    "body": "These rules should also make it possible to enable unification of type variables with unsized types.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57408863/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57417050",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-57417050",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 57417050,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDE3MDUw",
    "user": {
      "login": "comex",
      "id": 47517,
      "node_id": "MDQ6VXNlcjQ3NTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/comex",
      "html_url": "https://github.com/comex",
      "followers_url": "https://api.github.com/users/comex/followers",
      "following_url": "https://api.github.com/users/comex/following{/other_user}",
      "gists_url": "https://api.github.com/users/comex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/comex/subscriptions",
      "organizations_url": "https://api.github.com/users/comex/orgs",
      "repos_url": "https://api.github.com/users/comex/repos",
      "events_url": "https://api.github.com/users/comex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/comex/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-01T04:15:26Z",
    "updated_at": "2014-10-01T04:20:22Z",
    "body": "I guess it's way too late for this, but for me having the choice of method implementation potentially be determined by the type of some random parameter, or even the time-traveling type of some other function the result gets used in, is moving into confusing, C++-like territory, and I don't like it.  It's just too indirect and nonlocal.\n\nedit: I realize you can basically do this already with a generic function that forwards to a trait, but you have to really work at it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57417050/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57423217",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-57423217",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 57423217,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDIzMjE3",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-01T06:13:31Z",
    "updated_at": "2014-10-01T06:13:31Z",
    "body": "It's needed for lots of stuff in the standard library.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57423217/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57423688",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-57423688",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 57423688,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDIzNjg4",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-01T06:21:49Z",
    "updated_at": "2014-10-01T06:21:49Z",
    "body": "Method dispatch is also not determined by the type of some _random_ parameter: that would be C++-style overloading, which this patch does not implement. Rather the method dispatch is only determined by the type parameters in the trait. It is true that you can't just look at the LHS of `.` to determine which method gets called, but without multidispatch operator overloading (to name one major use case) is too limited to be useful.\n\nI do agree that programmers should avoid adding type parameters to traits unless they know it's needed. This should be a pretty niche feature.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57423688/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57426038",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-57426038",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 57426038,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDI2MDM4",
    "user": {
      "login": "reem",
      "id": 4745181,
      "node_id": "MDQ6VXNlcjQ3NDUxODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4745181?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reem",
      "html_url": "https://github.com/reem",
      "followers_url": "https://api.github.com/users/reem/followers",
      "following_url": "https://api.github.com/users/reem/following{/other_user}",
      "gists_url": "https://api.github.com/users/reem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reem/subscriptions",
      "organizations_url": "https://api.github.com/users/reem/orgs",
      "repos_url": "https://api.github.com/users/reem/repos",
      "events_url": "https://api.github.com/users/reem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reem/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-01T06:58:10Z",
    "updated_at": "2014-10-01T06:58:10Z",
    "body": "I'm extremely excited to use this!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57426038/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57594883",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-57594883",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 57594883,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NTk0ODgz",
    "user": {
      "login": "jroesch",
      "id": 696509,
      "node_id": "MDQ6VXNlcjY5NjUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/696509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jroesch",
      "html_url": "https://github.com/jroesch",
      "followers_url": "https://api.github.com/users/jroesch/followers",
      "following_url": "https://api.github.com/users/jroesch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jroesch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jroesch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jroesch/subscriptions",
      "organizations_url": "https://api.github.com/users/jroesch/orgs",
      "repos_url": "https://api.github.com/users/jroesch/repos",
      "events_url": "https://api.github.com/users/jroesch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jroesch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-02T07:51:33Z",
    "updated_at": "2014-10-02T07:51:33Z",
    "body": "I'm really excited to see these land as well.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57594883/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57919077",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-57919077",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 57919077,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3OTE5MDc3",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-04T21:29:32Z",
    "updated_at": "2014-10-04T21:29:32Z",
    "body": "This is awesome! Multidispatch is one the features (the other being HKT) that I've been so eagerly waiting for!\n\nI gave this PR (rebased on top of e434aa1) a test by implementing the `IntoIterator` trait proposed in the [collection reform RFC](https://github.com/aturon/rfcs/blob/collections-conventions/active/0000-collections-conventions.md#intoiterator-and-iterable) (modulo the AI stuff), and I ran into some compile errors, but I think my code should work.\n\nHere's the code:\n\n``` rust\nuse std::vec::MoveItems;\n\ntrait IntoIter<I> {\n    fn into_iter_(self) -> I;\n}\n\nimpl<T, I: Iterator<T>> IntoIter<I> for I {\n    fn into_iter_(self) -> I {\n        self\n    }\n}\n\nimpl<T> IntoIter<MoveItems<T>> for Vec<T> {\n    fn into_iter_(self) -> MoveItems<T> {\n        self.into_iter()\n    }\n}\n\nfn into_iter<I, S: IntoIter<I>>(iterable: S) -> I {\n    iterable.into_iter_()\n}\n\nfn main() {\n    let v = vec![0u8, 1, 2];\n    // Pick one of these three lines\n    let i: MoveItems<u8> = into_iter(v);  // Works\n    //let i = v.into_iter_();  // ~ Err1\n    //let i = into_iter(v);  // ~ Err2\n}\n```\n\nAnd these are the errors:\n\n```\ninto_iter.rs:27:13: 27:27 error: multiple applicable methods in scope [E0034]\ninto_iter.rs:27     let i = v.into_iter_();  // ~ Err1\n                            ^~~~~~~~~~~~~~\ninto_iter.rs:8:5: 10:6 note: candidate #1 is `I.IntoIter<I>::into_iter_`\ninto_iter.rs:8     fn into_iter_(self) -> I {\ninto_iter.rs:9         self\ninto_iter.rs:10     }\ninto_iter.rs:14:5: 16:6 note: candidate #2 is `Vec<T>.IntoIter<MoveItems<T>>::into_iter_`\ninto_iter.rs:14     fn into_iter_(self) -> MoveItems<T> {\ninto_iter.rs:15         self.into_iter()\ninto_iter.rs:16     }\ninto_iter.rs:27:13: 27:27 error: the trait `core::iter::Iterator<<generic #185>>` is not implemented for the type `collections::vec::Vec<u8>`\ninto_iter.rs:27     let i = v.into_iter_();  // ~ Err1\n                            ^~~~~~~~~~~~~~\nerror: aborting due to 2 previous errors\n```\n\nI think this should work, `v` is not eligible for the `I: Iterator<T>` blanket impl, so it should use the `for Vec<T>` impl. (Furthermore `let i: MoveItems<u8> = into_iter(v)` did work!) (On a second thought, I think this may be #16949)\n\n```\ninto_iter.rs:28:9: 28:10 error: unable to infer enough type information to locate the impl of the trait `core::kinds::Sized` for the type `<generic #5>`; type annotations required\ninto_iter.rs:28     let i = into_iter(v);  // ~ Err2\n                        ^\ninto_iter.rs:28:9: 28:10 note: all local variables must have a statically known size\ninto_iter.rs:28     let i = into_iter(v);  // ~ Err2\n                        ^\nerror: aborting due to previous error\n```\n\nInference failed. The error message seems to hint DST stuff.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57919077/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58364050",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-58364050",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 58364050,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MzY0MDUw",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-08T14:17:52Z",
    "updated_at": "2014-10-08T14:17:52Z",
    "body": "@japaric note that this PR does not yet integrate with method notation. That rules out the first case. I am not sure about the second, I agree it should probably work.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58364050/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58567137",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-58567137",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 58567137,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTY3MTM3",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-09T19:52:33Z",
    "updated_at": "2014-10-09T19:52:33Z",
    "body": "OK I looked a bit into the example. I see why the code is refusing to infer. You could argue it's a bug but I'm not sure. So what happens is basically that when asked to infer `MoveItems<?0> for Vec<u8>`, the compiler considers two candidates:\n- The one for all I:Iterator<T>\n- The one just for Vec<u8>\n\nYou might think that it would rule out the `I:Iterator<T>` because `Vec<u8>` does not implement `Iterator<?T>`, where `?T` is some type variable it creates to represent `T`. But in fact it does not, because it would be legal for another crate `X` to come along with implement `Iterator<Foo> for Vec<u8>` where `Foo` is defined within `X`. Hence there is in fact ambiguity here.\n\nThis basically just shows why its still useful to have associated types as designated _output only_ types. Inference works better but under conditional dispatch the compiler must still be somewhat conservative. If `T` were an output type of `Iterator`, this would work, because when we consider the where clause we'd be looking for `Iterator for Vec<u8>`, not `Iterator<?T> for Vec<u8>`.\n\nSorry if this is confusingly phrased. I'll try to explain it better later. TL;DR -- this patch is working as intended afaict.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58567137/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58567549",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-58567549",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 58567549,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTY3NTQ5",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-09T19:55:26Z",
    "updated_at": "2014-10-09T19:55:26Z",
    "body": "Actually I might be wrong about it working as intended. Let me look at it a bit more. I'm trying to decide if this ought to be a coherence violation. =)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58567549/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58568083",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-58568083",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 58568083,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTY4MDgz",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-09T19:59:16Z",
    "updated_at": "2014-10-09T19:59:16Z",
    "body": "Ah, of course, not a coherence violation, because `I` must be the same in the first impl, and `Vec<T>` is not unifiable with `MoveItems<T>`\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58568083/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58577013",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-58577013",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 58577013,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTc3MDEz",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-09T21:01:16Z",
    "updated_at": "2014-10-09T21:01:16Z",
    "body": "> But in fact it does not, because it would be legal for another crate X to come along with implement Iterator<Foo> for Vec<u8> where Foo is defined within X. Hence there is in fact ambiguity here.\n\nThat makes sense.\n\n> This basically just shows why its still useful to have associated types as designated output only types.\n\nIndeed!\n\n> Sorry if this is confusingly phrased. I'll try to explain it better later. TL;DR -- this patch is working as intended afaict.\n\nI think it was a good explanation. :+1: \n\n---\n\n> note that this PR does not yet integrate with method notation\n\nI was suspecting that.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58577013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58586647",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-58586647",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 58586647,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTg2NjQ3",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-09T22:16:28Z",
    "updated_at": "2014-10-09T22:16:28Z",
    "body": "A small thought experiment:\n\n``` rust\n// Crate A\n\ntrait Foo<T> {\n    fn foo(&self) -> &T;\n}\n\nfn use_foo<T, S: Foo<T>>(s: &S) -> &T {\n    s.foo()\n}\n\n// Crate B, uses crate A\n\nstruct B;\nimpl Foo<B> for u8 { ... }\n\nuse_foo(0u8) // compiles, has type B\n\n// Crate C, uses crate A\n\nstruct C;\nimpl Foo<C> for u8 { ... }\n\nuse_foo(0u8) // compiles, has type C\n\n// Crate D, which uses A, B and C\n\nuse_foo(0u8) // does not compile, ambiguity \n```\n\nThe expression `use_foo(0u8)`, with `use_foo` bound to the same function in all cases, has different meanings (and even fails to compile in some cases) depending on the crate in which it appears.\n\nOf course, this doesn't actually violate coherence (as we think of it), but I think it _is_ a new property of the trait system with these changes.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58586647/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58589275",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-58589275",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 58589275,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTg5Mjc1",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-09T22:41:14Z",
    "updated_at": "2014-10-09T22:41:14Z",
    "body": "@aturon yes. this is the impact of not requiring crate concatenability. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58589275/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58589697",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-58589697",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 58589697,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTg5Njk3",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-09T22:45:30Z",
    "updated_at": "2014-10-09T22:45:30Z",
    "body": "key point with @aturon's example: the way to think of it is that we consider the visible impls when elaborating out the type parameters, but coherence applies to the fully elaborated source. That means that the various calls to `use_foo` appear identical before elaboration, but after elaboration they are quite different, since all type parameters are spelled out -- and once that is done, the choice of impl follows.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58589697/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58595170",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-58595170",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 58595170,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTk1MTcw",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-09T23:47:39Z",
    "updated_at": "2014-10-09T23:47:39Z",
    "body": "Thinking a bit more, I realize that I think we _could_ successfully infer the example that @japaric gave. Basically the principle of @aturon's example is that we will infer _the only types the user could have written_ at each point. On that principle, @japaric's example also has exactly one set of types _the user could actually write_ -- despite the fact that a downstream crate _could_ implement `Iterator<Foo>` for `Vec<u8>` and hence introduce ambiguity _in that crate_.\n\nNonetheless, the reason that the code fails to infer is reasonable and valid, and I think that to adjust the code would require a bit of effort. In particular we have to be careful around the interaction of this case and coherence, since coherence has to be more cautious about what could happen in downstream crates. So I'm roughly content with the behavior as is but I do think we could improve the inference in the future with some effort. Might be worth opening a follow-up bug.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58595170/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58595191",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-58595191",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 58595191,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTk1MTkx",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-09T23:47:57Z",
    "updated_at": "2014-10-09T23:47:57Z",
    "body": "(Note in particular that this would be a backwards compatible extension)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58595191/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58596098",
    "html_url": "https://github.com/rust-lang/rust/pull/17669#issuecomment-58596098",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17669",
    "id": 58596098,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTk2MDk4",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-10T00:00:32Z",
    "updated_at": "2014-10-10T00:00:32Z",
    "body": "Opened an issue. I also noted that the precise rule in question has rather crucial and subtle interactions, and changing it would be tricky.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58596098/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
