[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22545430",
    "html_url": "https://github.com/rust-lang/rust/issues/8489#issuecomment-22545430",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8489",
    "id": 22545430,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNTQ1NDMw",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-13T06:25:01Z",
    "updated_at": "2013-08-13T06:25:01Z",
    "body": "`ToStr` cannot stay as it is. By nature (deriving) it is called recursively and allocates for each call; it needs a writer-based replacement and the String or Default formatter might be that.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22545430/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22576788",
    "html_url": "https://github.com/rust-lang/rust/issues/8489#issuecomment-22576788",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8489",
    "id": 22576788,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNTc2Nzg4",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-13T16:14:37Z",
    "updated_at": "2013-08-13T16:14:37Z",
    "body": "cc #8089\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22576788/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22680567",
    "html_url": "https://github.com/rust-lang/rust/issues/8489#issuecomment-22680567",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8489",
    "id": 22680567,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNjgwNTY3",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-15T01:52:02Z",
    "updated_at": "2013-08-15T01:53:49Z",
    "body": "For `{}`, I really think it shouldn't be `?` (that can be `{?}`), but I don't see a reason to introduce yet another trait for it when we can just use `ToStr` directly. I can't think of a type where it makes sense for the `ToStr` impl to be different to the (proposed) `Default` impl. If someone wants something else, e.g. something like Python's `repr`, then they can use an entirely different trait (`std::repr::Repr` for `repr`, possibly with a `{r}` flag, like pythons `%r`), or just have a custom method that gets called: `fmt!(\"{}\", my_type.my_to_str())`.\n\n(On this note, it be neat if we could somehow allow `fmt!` to pass the writer into its args, e.g. `fmt!(\"{}\", my_type.write_out($writer))` where `write_out(&self, &mut Writer)`.)\n\nIt might also be a nice simplification to remove all of `s`, `d`, `u` etc, since they do nothing more than what `{}` would do (even if `{}` just calls `ToStr`); although this might mean that people accidentally print something they don't want to.\n\n@blake2-ppc: it is easy to update `deriving(ToStr)` to a writer-based one (especially if it was done in stages where `write_str(&self, &mut Writer)` and `to_str(&self) -> ~str` are defined as default methods in terms of each other, so it didn't have to be updated immediately), even with recursive calls.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22680567/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22680975",
    "html_url": "https://github.com/rust-lang/rust/issues/8489#issuecomment-22680975",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8489",
    "id": 22680975,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNjgwOTc1",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-15T02:06:20Z",
    "updated_at": "2013-08-15T02:06:20Z",
    "body": "I have no strong opinion on this, aside from \"`{}` should do something most people want to see\". I suspect most of the corner cases can be dealt with one way or another by providing slightly more details at the call site, this is just about the laziest-possible form.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22680975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22683438",
    "html_url": "https://github.com/rust-lang/rust/issues/8489#issuecomment-22683438",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8489",
    "id": 22683438,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNjgzNDM4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-15T03:39:41Z",
    "updated_at": "2013-08-15T03:39:41Z",
    "body": "From what I've been talking about with @huonw and @blake2-ppc we're all in agreement that `?` is a pretty bad default. Of the two leftover, we have these pros/cons:\n- Using a separate `Default` trait means that any type can implement it any way, and it can be optimized per type. Sadly, this means that it is not defined for all types out-of-the-box\n- Defining `{}` for all types implementing `ToStr` would currently be slow (an extra allocation per argument), and in the future it could be faster (with a `to_writer` method that wrote directly into an `io::Writer`). The good part about this is that it's defined for almost all types out-of-the-box. The bad part about this is that even with a `to_writer` method there still could be unnecessary allocations. Primarily, if a `width` formatting flag is provided an extra allocation would have to be made. Additionally, `{:10.10f}` would be very different from `{:10.10}` applied to a float because there's no longer an understanding of what the precision is.\n\nI'm personally still leaning towards `Default`, but now for the main reason that adding or removing the format specifier can result in different outputs. In the case of `Default`, the formats would be exactly the same (the type would imply which formatter to delegate to).\n\nIn the far future, python has formats like `{:%Y-%M-%D %h:%m:%s}` which could format a date. In theory the format syntax could interpret this and pass this slice of a \"format argument\" on to a formatter to use. If \"no format specified\" implied the `ToStr` result, then it's not really that customizable and this behavior wouldn't be very possible without having another format. It would be kinda slick if we could do this, but currently I'm not sure how to disambiguate what comes after the colon for this, so it's kinda a separate issue.\n\n@huonw, @blake2-ppc, with this in mind, do you guys still think that `ToStr` is the way to go?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22683438/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22683476",
    "html_url": "https://github.com/rust-lang/rust/issues/8489#issuecomment-22683476",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8489",
    "id": 22683476,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNjgzNDc2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-15T03:41:47Z",
    "updated_at": "2013-08-15T03:41:47Z",
    "body": "Right now an implementation of `Default` would look like https://github.com/alexcrichton/rust/commit/802de7250f745fa75f8125e199601655e5e3639c, although that's certainly not set in stone, I just had some extra time this afternoon\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22683476/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22683523",
    "html_url": "https://github.com/rust-lang/rust/issues/8489#issuecomment-22683523",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8489",
    "id": 22683523,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNjgzNTIz",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-15T03:43:35Z",
    "updated_at": "2013-08-15T03:43:35Z",
    "body": "I'd (embarrassingly) forgotten about the precision & width arguments, so I agree that we need a separate trait for `{}` formatting, if it is going to be consistent and efficient.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22683523/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22886767",
    "html_url": "https://github.com/rust-lang/rust/issues/8489#issuecomment-22886767",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8489",
    "id": 22886767,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODg2NzY3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-19T16:56:24Z",
    "updated_at": "2013-08-19T16:56:24Z",
    "body": "Closed by #8564\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22886767/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
