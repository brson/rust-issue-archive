[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/104440495",
    "html_url": "https://github.com/rust-lang/rust/issues/25691#issuecomment-104440495",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25691",
    "id": 104440495,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNDQ0MDQ5NQ==",
    "user": {
      "login": "elinorbgr",
      "id": 3009227,
      "node_id": "MDQ6VXNlcjMwMDkyMjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3009227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elinorbgr",
      "html_url": "https://github.com/elinorbgr",
      "followers_url": "https://api.github.com/users/elinorbgr/followers",
      "following_url": "https://api.github.com/users/elinorbgr/following{/other_user}",
      "gists_url": "https://api.github.com/users/elinorbgr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elinorbgr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elinorbgr/subscriptions",
      "organizations_url": "https://api.github.com/users/elinorbgr/orgs",
      "repos_url": "https://api.github.com/users/elinorbgr/repos",
      "events_url": "https://api.github.com/users/elinorbgr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elinorbgr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-21T22:31:19Z",
    "updated_at": "2015-05-21T22:31:19Z",
    "body": "Also, manually running the `cc` command and adding the argument\n\n```\n\"/home/levans/dev/metallirc/metallircd/target/debug/deps/libtoml-e4d393d734aaa578.rlib\"\n```\n\nlinks the final executable successfully.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/104440495/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/104477720",
    "html_url": "https://github.com/rust-lang/rust/issues/25691#issuecomment-104477720",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25691",
    "id": 104477720,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNDQ3NzcyMA==",
    "user": {
      "login": "Aatch",
      "id": 342416,
      "node_id": "MDQ6VXNlcjM0MjQxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aatch",
      "html_url": "https://github.com/Aatch",
      "followers_url": "https://api.github.com/users/Aatch/followers",
      "following_url": "https://api.github.com/users/Aatch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions",
      "organizations_url": "https://api.github.com/users/Aatch/orgs",
      "repos_url": "https://api.github.com/users/Aatch/repos",
      "events_url": "https://api.github.com/users/Aatch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aatch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-22T02:18:38Z",
    "updated_at": "2015-05-22T02:18:38Z",
    "body": "Hmm, it's likely due to the fact that `toml` is actually only a dependency of `libmetallircd`. You shouldn't need to link in `libtoml` to the binary. It's possible that `libmetallircd` is assuming that the static dependency will be linked in by downstream users and that the binary is assuming that, because `libmetallircd` is dynamic, it already has the dependencies sorted.\n\nA simple fix in the meantime is to either drop the `dylib` from `libmetallircd`, or specify that you want to dynamically link to `libtoml` in `libmetallircd`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/104477720/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/104477843",
    "html_url": "https://github.com/rust-lang/rust/issues/25691#issuecomment-104477843",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25691",
    "id": 104477843,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNDQ3Nzg0Mw==",
    "user": {
      "login": "Aatch",
      "id": 342416,
      "node_id": "MDQ6VXNlcjM0MjQxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aatch",
      "html_url": "https://github.com/Aatch",
      "followers_url": "https://api.github.com/users/Aatch/followers",
      "following_url": "https://api.github.com/users/Aatch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions",
      "organizations_url": "https://api.github.com/users/Aatch/orgs",
      "repos_url": "https://api.github.com/users/Aatch/repos",
      "events_url": "https://api.github.com/users/Aatch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aatch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-22T02:20:04Z",
    "updated_at": "2015-05-22T02:20:04Z",
    "body": "The real question is whether this is a `rustc` bug or a `cargo` one, I'm leaning towards `rustc`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/104477843/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/104534515",
    "html_url": "https://github.com/rust-lang/rust/issues/25691#issuecomment-104534515",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25691",
    "id": 104534515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNDUzNDUxNQ==",
    "user": {
      "login": "elinorbgr",
      "id": 3009227,
      "node_id": "MDQ6VXNlcjMwMDkyMjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3009227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elinorbgr",
      "html_url": "https://github.com/elinorbgr",
      "followers_url": "https://api.github.com/users/elinorbgr/followers",
      "following_url": "https://api.github.com/users/elinorbgr/following{/other_user}",
      "gists_url": "https://api.github.com/users/elinorbgr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elinorbgr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elinorbgr/subscriptions",
      "organizations_url": "https://api.github.com/users/elinorbgr/orgs",
      "repos_url": "https://api.github.com/users/elinorbgr/repos",
      "events_url": "https://api.github.com/users/elinorbgr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elinorbgr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-22T06:18:41Z",
    "updated_at": "2015-05-22T06:18:41Z",
    "body": "@Aatch I'm not sure I fully understand what you wrote (I have a `libmetallirc` and a `metallircd` but no `libmetallircd`).\n\nHowever, both the library (`libmetallirc`) and the binary (`metallircd`) need to be linked to the toml crate, as they both make use of types and methods defined in it.\n\nWhat currently happens is that the dynamic library is fully compiled without any problem (and `ldd` confirms me that all missing symbols are only related to system libraries). It's the binary which fails at compilation with the missing toml symbols.\n\nI tried to reproduce with a toy project: a dylib depending on toml and an executable depending on toml and this dylib, but it fully compiled successfully.\n\nHowever, changing `libmetallirc` to be a classic rlib indeed fixes the compilation.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/104534515/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/104537481",
    "html_url": "https://github.com/rust-lang/rust/issues/25691#issuecomment-104537481",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25691",
    "id": 104537481,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNDUzNzQ4MQ==",
    "user": {
      "login": "elinorbgr",
      "id": 3009227,
      "node_id": "MDQ6VXNlcjMwMDkyMjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3009227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elinorbgr",
      "html_url": "https://github.com/elinorbgr",
      "followers_url": "https://api.github.com/users/elinorbgr/followers",
      "following_url": "https://api.github.com/users/elinorbgr/following{/other_user}",
      "gists_url": "https://api.github.com/users/elinorbgr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elinorbgr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elinorbgr/subscriptions",
      "organizations_url": "https://api.github.com/users/elinorbgr/orgs",
      "repos_url": "https://api.github.com/users/elinorbgr/repos",
      "events_url": "https://api.github.com/users/elinorbgr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elinorbgr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-22T06:35:42Z",
    "updated_at": "2015-05-22T06:35:42Z",
    "body": "However, I agree It's most likely a `rustc` bug, as toml is in the arguments provided to rustc by cargo, but not in the arguments provided by rustc to the linker.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/104537481/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/104544559",
    "html_url": "https://github.com/rust-lang/rust/issues/25691#issuecomment-104544559",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25691",
    "id": 104544559,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNDU0NDU1OQ==",
    "user": {
      "login": "elinorbgr",
      "id": 3009227,
      "node_id": "MDQ6VXNlcjMwMDkyMjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3009227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elinorbgr",
      "html_url": "https://github.com/elinorbgr",
      "followers_url": "https://api.github.com/users/elinorbgr/followers",
      "following_url": "https://api.github.com/users/elinorbgr/following{/other_user}",
      "gists_url": "https://api.github.com/users/elinorbgr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elinorbgr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elinorbgr/subscriptions",
      "organizations_url": "https://api.github.com/users/elinorbgr/orgs",
      "repos_url": "https://api.github.com/users/elinorbgr/repos",
      "events_url": "https://api.github.com/users/elinorbgr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elinorbgr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-22T07:15:35Z",
    "updated_at": "2015-05-22T12:16:23Z",
    "body": "Actually, if I understand correctly https://github.com/rust-lang/rust/blob/43cf733bfa5affc74485daeae179cc2f855b5512/src/librustc_trans/back/link.rs#L1100-L1102\n\nit means that rustc does not link the executable to `toml` because it expects the symbols of `toml` to be in the dylib, but they actually are not there.\n\nTo test this, I added a `pub use toml as toml_reexport;` in the dylib, and changed the executable to only use this reexport (and thus removed the `extern crate toml;` from it), and I get the exact same error.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/104544559/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/104712854",
    "html_url": "https://github.com/rust-lang/rust/issues/25691#issuecomment-104712854",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25691",
    "id": 104712854,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNDcxMjg1NA==",
    "user": {
      "login": "elinorbgr",
      "id": 3009227,
      "node_id": "MDQ6VXNlcjMwMDkyMjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3009227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elinorbgr",
      "html_url": "https://github.com/elinorbgr",
      "followers_url": "https://api.github.com/users/elinorbgr/followers",
      "following_url": "https://api.github.com/users/elinorbgr/following{/other_user}",
      "gists_url": "https://api.github.com/users/elinorbgr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elinorbgr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elinorbgr/subscriptions",
      "organizations_url": "https://api.github.com/users/elinorbgr/orgs",
      "repos_url": "https://api.github.com/users/elinorbgr/repos",
      "events_url": "https://api.github.com/users/elinorbgr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elinorbgr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-22T16:57:47Z",
    "updated_at": "2015-05-22T16:57:47Z",
    "body": "Actually, it's certainly linked to #14344 (possibly a dupe?).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/104712854/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105595121",
    "html_url": "https://github.com/rust-lang/rust/issues/25691#issuecomment-105595121",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25691",
    "id": 105595121,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTU5NTEyMQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-26T16:33:37Z",
    "updated_at": "2015-05-26T16:33:37Z",
    "body": "@vberger hm the usage of `toml` in libmetalirc makes me hesitant to close this in favor of #14344, but I agree that it seems quite suspicious. Do you have a branch I can check out and poke around at?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105595121/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105596975",
    "html_url": "https://github.com/rust-lang/rust/issues/25691#issuecomment-105596975",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25691",
    "id": 105596975,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTU5Njk3NQ==",
    "user": {
      "login": "elinorbgr",
      "id": 3009227,
      "node_id": "MDQ6VXNlcjMwMDkyMjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3009227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elinorbgr",
      "html_url": "https://github.com/elinorbgr",
      "followers_url": "https://api.github.com/users/elinorbgr/followers",
      "following_url": "https://api.github.com/users/elinorbgr/following{/other_user}",
      "gists_url": "https://api.github.com/users/elinorbgr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elinorbgr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elinorbgr/subscriptions",
      "organizations_url": "https://api.github.com/users/elinorbgr/orgs",
      "repos_url": "https://api.github.com/users/elinorbgr/repos",
      "events_url": "https://api.github.com/users/elinorbgr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elinorbgr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-26T16:38:01Z",
    "updated_at": "2015-05-26T16:38:01Z",
    "body": "@alexcrichton I've let everything on the `vberger` branch in the state of the linking error, feel free to use it as an experiment material.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105596975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105634372",
    "html_url": "https://github.com/rust-lang/rust/issues/25691#issuecomment-105634372",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25691",
    "id": 105634372,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTYzNDM3Mg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-26T18:57:10Z",
    "updated_at": "2015-05-26T18:57:10Z",
    "body": "Thanks! After some more investigation I have confirmed that this is a dupe of #14344.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105634372/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
