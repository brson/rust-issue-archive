[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162874542",
    "html_url": "https://github.com/rust-lang/rust/issues/30164#issuecomment-162874542",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30164",
    "id": 162874542,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2Mjg3NDU0Mg==",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-08T13:05:42Z",
    "updated_at": "2015-12-08T13:05:42Z",
    "body": "`Debug` also doesn't work with other format modifiers, like `LowerHex`.\nSo, I can print my hex dump with\n\n```\nlet dump = [byte1, byte2, byte3, byte4];\nprintln!(\"{:x?}\", dump); // invalid format string\n```\n\n, which is kind of ironic - a trait named `Debug` can't perform such a traditional debug task.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162874542/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/202375891",
    "html_url": "https://github.com/rust-lang/rust/issues/30164#issuecomment-202375891",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30164",
    "id": 202375891,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMjM3NTg5MQ==",
    "user": {
      "login": "dpoetzsch",
      "id": 7511464,
      "node_id": "MDQ6VXNlcjc1MTE0NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7511464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dpoetzsch",
      "html_url": "https://github.com/dpoetzsch",
      "followers_url": "https://api.github.com/users/dpoetzsch/followers",
      "following_url": "https://api.github.com/users/dpoetzsch/following{/other_user}",
      "gists_url": "https://api.github.com/users/dpoetzsch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dpoetzsch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dpoetzsch/subscriptions",
      "organizations_url": "https://api.github.com/users/dpoetzsch/orgs",
      "repos_url": "https://api.github.com/users/dpoetzsch/repos",
      "events_url": "https://api.github.com/users/dpoetzsch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dpoetzsch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-28T12:52:16Z",
    "updated_at": "2016-03-28T12:52:16Z",
    "body": "As a workaround for now I've been using\n\n```\nprintln!(\"(i,j,k): |{:30}|\", format!(\"{:?}\", msg));\n```\n\nwhich works fine. However, would be great if this would work natively\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/202375891/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/244843835",
    "html_url": "https://github.com/rust-lang/rust/issues/30164#issuecomment-244843835",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30164",
    "id": 244843835,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDg0MzgzNQ==",
    "user": {
      "login": "Doodpants",
      "id": 10993602,
      "node_id": "MDQ6VXNlcjEwOTkzNjAy",
      "avatar_url": "https://avatars.githubusercontent.com/u/10993602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Doodpants",
      "html_url": "https://github.com/Doodpants",
      "followers_url": "https://api.github.com/users/Doodpants/followers",
      "following_url": "https://api.github.com/users/Doodpants/following{/other_user}",
      "gists_url": "https://api.github.com/users/Doodpants/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Doodpants/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Doodpants/subscriptions",
      "organizations_url": "https://api.github.com/users/Doodpants/orgs",
      "repos_url": "https://api.github.com/users/Doodpants/repos",
      "events_url": "https://api.github.com/users/Doodpants/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Doodpants/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-06T03:51:56Z",
    "updated_at": "2016-09-06T03:51:56Z",
    "body": "I came here to file a similar issue with alignment specifiers. But it's likely the same bug. Example:\n\n``` rust\nprintln!(\"|{:^11?}|\", 3);     // prints: |     3     |\nprintln!(\"|{:^11?}|\", \"hi\");  // prints: |\"hi\"|\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/244843835/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/353739105",
    "html_url": "https://github.com/rust-lang/rust/issues/30164#issuecomment-353739105",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30164",
    "id": 353739105,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzczOTEwNQ==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-12-23T17:45:32Z",
    "updated_at": "2017-12-23T17:47:11Z",
    "body": "I'm not sure if there have been solutions proposed for this anywhere. I'm **mostly thinking of** `derive(Debug)` and not specifically debug for String or Vec..\r\n\r\nNotes:\r\n\r\n- `Debug` / `derive(Debug)` need to be libcore compatible; so we have no heap allocation or `String` to use in the implementation\r\n\r\nBits of a solution?\r\n\r\n- We already separate the no-special-arguments and the other cases don't we, so no extra code is needed in the common path\r\n- When we want to prefix spaces or another filler character, we need to buffer the output following the filler, but the buffer only needs to be as large as the fill width. So with a small stack buffer we can support most short widths but not arbitrary widths.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/353739105/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/474611103",
    "html_url": "https://github.com/rust-lang/rust/issues/30164#issuecomment-474611103",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30164",
    "id": 474611103,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDYxMTEwMw==",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-19T22:35:10Z",
    "updated_at": "2019-03-19T22:36:40Z",
    "body": "I just got annoyed for 20 minutes or so that `Duration` ignores fill/align, 0-pad, and width. It _does_ seem to obey precision for some reason.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/474611103/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/569447916",
    "html_url": "https://github.com/rust-lang/rust/issues/30164#issuecomment-569447916",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30164",
    "id": 569447916,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTQ0NzkxNg==",
    "user": {
      "login": "ian-h-chamberlain",
      "id": 11131775,
      "node_id": "MDQ6VXNlcjExMTMxNzc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/11131775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ian-h-chamberlain",
      "html_url": "https://github.com/ian-h-chamberlain",
      "followers_url": "https://api.github.com/users/ian-h-chamberlain/followers",
      "following_url": "https://api.github.com/users/ian-h-chamberlain/following{/other_user}",
      "gists_url": "https://api.github.com/users/ian-h-chamberlain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ian-h-chamberlain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ian-h-chamberlain/subscriptions",
      "organizations_url": "https://api.github.com/users/ian-h-chamberlain/orgs",
      "repos_url": "https://api.github.com/users/ian-h-chamberlain/repos",
      "events_url": "https://api.github.com/users/ian-h-chamberlain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ian-h-chamberlain/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-12-28T20:16:00Z",
    "updated_at": "2019-12-28T20:30:57Z",
    "body": "I'm not sure if this is related, but I seem to encounter a similar problem when using custom `impl Display`. Here is an example:\r\n```rust\r\nuse std::fmt;\r\n\r\nstruct Foo {\r\n    bar: i32,\r\n}\r\n\r\nimpl fmt::Display for Foo {\r\n    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\r\n        write!(f, \"{:f>5}\", self.bar)\r\n    }\r\n}\r\n\r\nfn main() {\r\n    println!(\"|{:<30}|\", \"\");\r\n    println!(\"|{:<30}|\", 12);\r\n    println!(\"|{:<30}|\", Foo {bar: 12});\r\n    println!(\"|{:<30}|\", format!(\"{}\", Foo {bar: 12}));\r\n}\r\n```\r\n\r\nOutput:\r\n```\r\n|                              |\r\n|12                            |\r\n|fff12|\r\n|fff12                         |\r\n```\r\nIn this case the aforementioned workaround to use `format!(\"{}\", x)` works as well.\r\n\r\nEdit: I realize now, this is because my `impl Display` ignores the alignment. The correct implementation looks more like\r\n```rust\r\nimpl fmt::Display for Foo {\r\n    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\r\n        f.pad(&format!(\"{:f>5}\", self.bar))\r\n    }\r\n}\r\n```\r\nWith this, the expected result is printed. Hopefully this helps anyone else trying to fix their `impl Display` like I was for quite some time.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/569447916/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/918696052",
    "html_url": "https://github.com/rust-lang/rust/issues/30164#issuecomment-918696052",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30164",
    "id": 918696052,
    "node_id": "IC_kwDOAAsO6M42wjB0",
    "user": {
      "login": "michiel-de-muynck",
      "id": 706561,
      "node_id": "MDQ6VXNlcjcwNjU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/706561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michiel-de-muynck",
      "html_url": "https://github.com/michiel-de-muynck",
      "followers_url": "https://api.github.com/users/michiel-de-muynck/followers",
      "following_url": "https://api.github.com/users/michiel-de-muynck/following{/other_user}",
      "gists_url": "https://api.github.com/users/michiel-de-muynck/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michiel-de-muynck/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michiel-de-muynck/subscriptions",
      "organizations_url": "https://api.github.com/users/michiel-de-muynck/orgs",
      "repos_url": "https://api.github.com/users/michiel-de-muynck/repos",
      "events_url": "https://api.github.com/users/michiel-de-muynck/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michiel-de-muynck/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-09-14T00:35:26Z",
    "updated_at": "2021-09-16T13:37:23Z",
    "body": "This issue has been reported independently several times over the years: see issues #43909, #55584, #55749, #83361, #87905, #88059. Clearly people do try to apply formatting parameters to `Debug`-formatted values.\r\n\r\nI tested some of the most common types for how their `Debug` implementations currently handle `width` and `precision`. Here's [a Playground link](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=db23a7184291ada10ba08c86b628df6b). In summary:\r\n\r\n|               | `width`               | `precision`           |\r\n|---------------|-----------------------|-----------------------|\r\n| integers      | pads as expected | irrelevant            |\r\n| floats        | pads as expected | handled as expected |\r\n| strings       | ignored               | ignored               |\r\n| `Duration`    | ignored               | handled as expected |\r\n| booleans      | pads as expected | weird: `println!(\"{:.3?}\", false)` prints `fal`     |\r\n| `()`            | pads as expected | weird: `println!(\"{:.1?}\", ())` prints `(`     |\r\n| Slices / `Vec`        | pads each element (!) | applied to each element |\r\n| Structs/enums using `#[derive(Debug)]` | pads each member (!) | applied to each member |\r\n\r\nTo clarify the last 2: Slices, `Vec`s, and structs/enums using `#[derive(Debug)]` all simply forward the `width` and `precision` to a recursive `Debug::fmt` call that formats their member values. For example, `println!(\"{:.5?}\", [1., 2.])` prints `[1.00000, 2.00000]`. That seems reasonable for `precision`, but for `width` it pads (and aligns) each element of the slice/struct to `width`, which is kind of weird. It's unfortunate that `width` can't be implemented for slices and structs like it is for other types by padding the entire thing to the given `width`. That would require allocations, but `Debug` is part of `std::core`.\r\n\r\nI will try to implement the following changes:\r\n* Make `Duration` pad to `width` rather than ignore it (PR: #88999)\r\n* Make strings pad to `width` rather than ignore it\r\n* ~Fix the weird behavior of booleans and `()` for `precision`~ *EDIT:* On second thought, this may be intended behavior, at least according to the docs of `std::fmt` (see also https://github.com/rust-lang/rust/issues/78384#issuecomment-716463536):\r\n\r\n> For non-numeric types, this can be considered a \u201cmaximum width\u201d. If the resulting string is longer than this width, then it is truncated down to this many characters",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/918696052/reactions",
      "total_count": 4,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 4,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3045167856",
    "html_url": "https://github.com/rust-lang/rust/issues/30164#issuecomment-3045167856",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30164",
    "id": 3045167856,
    "node_id": "IC_kwDOAAsO6M61gZLw",
    "user": {
      "login": "yara-blue",
      "id": 11743287,
      "node_id": "MDQ6VXNlcjExNzQzMjg3",
      "avatar_url": "https://avatars.githubusercontent.com/u/11743287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yara-blue",
      "html_url": "https://github.com/yara-blue",
      "followers_url": "https://api.github.com/users/yara-blue/followers",
      "following_url": "https://api.github.com/users/yara-blue/following{/other_user}",
      "gists_url": "https://api.github.com/users/yara-blue/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yara-blue/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yara-blue/subscriptions",
      "organizations_url": "https://api.github.com/users/yara-blue/orgs",
      "repos_url": "https://api.github.com/users/yara-blue/repos",
      "events_url": "https://api.github.com/users/yara-blue/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yara-blue/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2025-07-07T13:32:46Z",
    "updated_at": "2025-07-07T13:32:46Z",
    "body": "> It's unfortunate that `width` can't be implemented for slices and structs like it is for other types by padding the entire thing to the given `width`.\n\nWe could implement `width` by running formatting twice. First with a writer which counts the number of chars written then for the second run we know the unpadded length and we can add the padding.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3045167856/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
