[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130727264",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-130727264",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 130727264,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDcyNzI2NA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-13T15:19:53Z",
    "updated_at": "2015-08-13T15:19:53Z",
    "body": "How about returning enums like `enum OneOrTwo { One(u16), Two(u16, u16) }` or `enum Utf16Encoding { SingleCodeUnit(u16), SurrogatePair(u16, u16) }`?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130727264/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130750087",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-130750087",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 130750087,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDc1MDA4Nw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-13T16:24:01Z",
    "updated_at": "2015-08-13T16:24:01Z",
    "body": "Certainly possible, but there's also the question of ergonomics here in terms of what to do with that after you've got the information.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130750087/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130759241",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-130759241",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 130759241,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDc1OTI0MQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-13T16:54:11Z",
    "updated_at": "2015-08-13T16:54:11Z",
    "body": "I think that one form or another of this functionality that doesn\u2019t require allocation should be exposed. Returning an iterator is nicer than taking `&mut [_]`, but I don\u2019t know about performance.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130759241/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130764298",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-130764298",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 130764298,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDc2NDI5OA==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-13T17:12:36Z",
    "updated_at": "2015-08-13T17:12:42Z",
    "body": "I\u2019ve suggested taking `&mut [u8; 4]`/`&mut [u16; 2]` and returning `usize` once. The major downside is inability to convert from slice to array.\n\nTaking anything else than slice also makes following use case not as elegant as it is now:\n\n``` rust\nlet mut buffer = Vec::with_capacity(alot);\nlet mut idx = 0;\nloop {\n     idx += some_char().encode_utf8(&mut buffer[idx..]).unwrap();\n}\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130764298/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151685852",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-151685852",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 151685852,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MTY4NTg1Mg==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-28T00:49:34Z",
    "updated_at": "2015-10-28T00:49:34Z",
    "body": "How about returning something that both is an iterator and dereferences to a slice?\n\n``` rust\nstruct Utf8Char {\n    bytes: [u8; 4],\n    position: usize,\n}\n\nimpl Deref for Utf8Char {\n    type Target = [u8];\n    fn deref(&self) -> &[u8] { &self.bytes[self.position..] }\n}\n\nimpl Iterator for Utf8Char {\n    type Item = u8;\n    fn next(&mut self) -> Option<u8> {\n        if self.position < self.bytes.len() {\n            let byte = self.bytes[self.position];\n            self.position += 1;\n            Some(byte)\n        } else {\n            None\n        }\n    }\n}\n```\n\n(\u201cShort\u201d code points have zeros as padding at the _start_ of the array.)\n\n\u2026 and similarly for UTF-16, but with `[u16; 2]` instead of `[u8; 4]`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151685852/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154834231",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-154834231",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 154834231,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDgzNDIzMQ==",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-08T15:39:13Z",
    "updated_at": "2015-11-08T15:39:13Z",
    "body": "@SimonSapin That looks really sweet to me!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154834231/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/173376085",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-173376085",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 173376085,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MzM3NjA4NQ==",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-20T22:03:13Z",
    "updated_at": "2016-01-20T22:03:13Z",
    "body": "@SimonSapin In your `deref` method, I think that should be `&self.bytes[..self.position]`, right?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/173376085/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/173377371",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-173377371",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 173377371,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MzM3NzM3MQ==",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-20T22:07:51Z",
    "updated_at": "2016-01-20T22:07:51Z",
    "body": "@SimonSapin What do you think about also exposing `decode_{utf8,utf16}` methods? Basically, if you have some bytes and want the next encoded `char` out of it, today I think you need to decode into a string and then call `chars`, which is a bit roundabout (and does extra work I believe).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/173377371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/173497037",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-173497037",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 173497037,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MzQ5NzAzNw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-21T08:36:51Z",
    "updated_at": "2016-01-21T08:36:51Z",
    "body": "No, `deref` returns the slice that hasn\u2019t been consumed by the iterator yet. For code points that have less than 4 bytes to begin with, padding is at the _start_ of the array, not the end.\n\nWe already have `char::decode_utf16` that takes and returns iterators.\n\nFor UTF-8 I do want to expose a decoder that\u2019s more low-level than what we currently have, but I\u2019m not sure what it should look like. I have some experiments at https://github.com/SimonSapin/rust-utf8\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/173497037/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/173547119",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-173547119",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 173547119,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MzU0NzExOQ==",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-21T11:47:53Z",
    "updated_at": "2016-01-21T11:47:53Z",
    "body": "> padding is at the start of the array, not the end.\n\nAh! That was what I missed. Thanks for the clarification.\n\n> I have some experiments at https://github.com/SimonSapin/rust-utf8\n\nInteresting. That is much more complex than I had thought it would be! (I hadn't considered returning additional info about incomplete sequences.)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/173547119/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/173624384",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-173624384",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 173624384,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MzYyNDM4NA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-21T16:27:03Z",
    "updated_at": "2016-01-21T16:27:03Z",
    "body": "Most of the complexity comes from self-imposed constraints:\n- Support \u201cchunked\u201d decoding so you can start processing, say, an HTML document before it\u2019s finished downloading from the network. The bytes for a single `char` can be split across chunks.\n- Make it possible to emit `&str` slices that borrow `&[u8]` input bytes whenever possible, to avoid copying too many bytes.\n\nI don\u2019t know how much of that _should_ be in the standard library.\n\nBut when the standard library gets performance improvement like #30740 (and perhaps more in the future with SIMD or something?), ideally they\u2019d be in a low-level algorithm that everything else builds on top of.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/173624384/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/195479300",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-195479300",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 195479300,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NTQ3OTMwMA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-11T17:59:35Z",
    "updated_at": "2016-03-11T17:59:35Z",
    "body": ":bell: This issue is now entering its cycle-long **final comment period** for stabilization :bell: \n\nThe API proposed by @SimonSapin seems reasonable, perhaps in the form of:\n\n``` rust\nimpl char {\n    fn encode_utf8(&self) -> EncodeUtf8;\n}\n\nstruct EncodeUtf8 {\n    // ...\n}\n\nimpl Iterator for EncodeUtf8 {\n    type Item = u8;\n    // ...\n}\n\nimpl EncodeUtf8 {\n    #[unstable(...)]\n    pub fn as_slice(&self) -> &[u8] { /* ... */ }\n}\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/195479300/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200582385",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-200582385",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 200582385,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDU4MjM4NQ==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-23T23:31:30Z",
    "updated_at": "2016-03-23T23:31:30Z",
    "body": "Why add an `as_slice` method instead of implementing `Deref` and `Index`? I was under the impression that `&thing[..]` should always be prefered to `thing.as_slice()`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200582385/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200604562",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-200604562",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 200604562,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDYwNDU2Mg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-24T01:14:08Z",
    "updated_at": "2016-03-24T01:14:08Z",
    "body": "Conventionally having an `Iterator` also `Deref` to a slice (and hence have the union of the two) seemed far too weird to us. For example `slice::Iter` doesn't deref to a slice, it has an `as_slice` method.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200604562/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200636092",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-200636092",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 200636092,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDYzNjA5Mg==",
    "user": {
      "login": "thepowersgang",
      "id": 955596,
      "node_id": "MDQ6VXNlcjk1NTU5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/955596?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thepowersgang",
      "html_url": "https://github.com/thepowersgang",
      "followers_url": "https://api.github.com/users/thepowersgang/followers",
      "following_url": "https://api.github.com/users/thepowersgang/following{/other_user}",
      "gists_url": "https://api.github.com/users/thepowersgang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thepowersgang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thepowersgang/subscriptions",
      "organizations_url": "https://api.github.com/users/thepowersgang/orgs",
      "repos_url": "https://api.github.com/users/thepowersgang/repos",
      "events_url": "https://api.github.com/users/thepowersgang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thepowersgang/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-24T03:13:59Z",
    "updated_at": "2016-03-24T03:13:59Z",
    "body": "This is likely the best place to post - The change in 2b3c5ac was an untagged breaking change. `CharExt` was stably imported by the libcore prelude, and `#![no_std]` was stable. See regression in \n\n``` rust\n#![no_std]\n#![crate_type=\"rlib\"]\n\npub fn main() {\n    let mut b = [0];\n    'b'.encode_utf8(&mut b);\n}\n```\n\nhttps://play.rust-lang.org/?gist=7320c1273bdc3dde5450&version=stable https://play.rust-lang.org/?gist=7320c1273bdc3dde5450&version=nightly\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200636092/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200929649",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-200929649",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 200929649,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDkyOTY0OQ==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-24T17:07:49Z",
    "updated_at": "2016-03-24T17:17:49Z",
    "body": "@alexcrichton that's make sense. However, this method will be used to get a slice more often than it will be used to get an iterator (rustc itself never uses the iterator) so it's probably better to deref to a slice and allow users to iterate over the slice if they actually want an iterator.\n\n``` rust\nimpl char {\n    fn encode_utf8(&self) -> Utf8Char;\n}\n\nstruct Utf8Char {\n    // ...\n}\n\nimpl Deref for Utf8Char {\n    type Target = [u8];\n    fn deref(&self) -> &[u8] { /* ... */ }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200929649/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200930872",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-200930872",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 200930872,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDkzMDg3Mg==",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-24T17:10:25Z",
    "updated_at": "2016-03-24T17:10:25Z",
    "body": "I don't think a convention is worth breaking for this case.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200930872/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200931579",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-200931579",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 200931579,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDkzMTU3OQ==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-24T17:11:38Z",
    "updated_at": "2016-03-24T17:11:38Z",
    "body": "@BurntSushi I'm not suggesting we break a convention, I'm suggesting that we not return an iterator (`Utf8Char` is effectively an immutable `ArrayVec` with a size of 4).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200931579/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200948057",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-200948057",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 200948057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDk0ODA1Nw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-24T17:51:26Z",
    "updated_at": "2016-03-24T17:51:26Z",
    "body": "We use `Deref` _very_ sparingly in the standard library, so using it at all is essentially breaking conventions.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200948057/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200966141",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-200966141",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 200966141,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDk2NjE0MQ==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-24T18:45:59Z",
    "updated_at": "2016-03-24T18:45:59Z",
    "body": "The only reason I'm suggesting it here is because we can't just return a slice directly and allocating a `Vec` is inefficient but the return value of this method is _always_ used as a slice. Ideally, the standard library would provide an `ArrayVec<const Capacity, Type>` but that won't happen until we get type-level constants. When the standard library eventually does provide such a type, `Utf8Char` could be replaced with a type alias (`type Utf8Char = ArrayVec<4, u8>;`). In the meantime, returning a type that provides the wrong interface just to avoid implementing `Deref` is silly; the return type is logically a fixed-size collection of bytes that deref to a slice.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/200966141/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/201133950",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-201133950",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 201133950,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMTEzMzk1MA==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-25T04:50:48Z",
    "updated_at": "2016-03-25T04:50:48Z",
    "body": "FYI, my proposed change (WIP) is https://github.com/rust-lang/rust/compare/master...Stebalien:encode\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/201133950/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/201204551",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-201204551",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 201204551,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMTIwNDU1MQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-25T08:49:44Z",
    "updated_at": "2016-03-25T08:49:44Z",
    "body": "I like it. `Utf8Char` could also replace `char` in some other cases where you otherwise decode UTF-8 (`str::Chars`) only to encode it back (`Extend<char> for String`) soon after.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/201204551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/201232075",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-201232075",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 201232075,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMTIzMjA3NQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-25T10:26:57Z",
    "updated_at": "2016-03-25T10:26:57Z",
    "body": "In fact `Utf8Char` could even deref to `str` rather than `[u8]`. It would be similar to `String` in that respect (except `Copy` and not allocating heap memory).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/201232075/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/201394030",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-201394030",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 201394030,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMTM5NDAzMA==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-25T18:03:55Z",
    "updated_at": "2016-03-25T18:03:55Z",
    "body": "> In fact Utf8Char could even deref to str rather than [u8]. It would be similar to String in that respect (except Copy and not allocating heap memory).\n\nGood idea. This gets rid of several `str::from_utf8_unchecked` calls.\n\n> Utf8Char could also replace char in some other cases where you otherwise decode UTF-8 (str::Chars) only to encode it back (Extend<char> for String) soon after.\n\nI don't quite understand this point. Could you provide an example?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/201394030/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206465319",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-206465319",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 206465319,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjQ2NTMxOQ==",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-06T17:01:29Z",
    "updated_at": "2016-04-06T17:01:29Z",
    "body": "I'm confused about the desire to have this deref to `str` -- isn't the whole point of this method to get a sequence of _bytes_ (in some form)? Going through `str` would mean needing `as_bytes`, which doesn't seem like an improvement over the current need for `as_slice`. But maybe I'm missing something?\n\n@alexcrichton \n\n> Conventionally having an `Iterator` also `Deref` to a slice (and hence have the union of the two) seemed far too weird to us. For example `slice::Iter` doesn't deref to a slice, it has an `as_slice` method.\n\nJust to clarify: if we went the `Deref` route, this would _not_ be an iterator directly. It'd work more like `Vec<u8>`, where you have to use iterator methods to get it into iterator form. Put differently, we'd be trading defaults: giving you a slice by default and an iterator through `into_iter`, rather than an iterator by default and a slice through `as_slice`.\n\n@Stebalien \n\n> However, this method will be used to get a slice more often than it will be used to get an iterator\n\nHm, this isn't so obvious to me. In general, the libs team has tended to prefer iterator-based APIs for composability, simplicity, flexibility, consistency and instant recognizability.\n\n> In the meantime, returning a type that provides the wrong interface just to avoid implementing Deref is silly; the return type is logically a fixed-size collection of bytes that deref to a slice.\n\nThis argument seems a little circular, but more importantly, a given representation often has a ton of possible views into it. Many iterators in `std` are essentially just (pointers to) contiguous elements that could in principle implement `Deref`. The point is, you can view encoding equally as returning an array or as returning a sequence of bytes; both are valid and useful views, and the question is which one should be primary -- a question that needs to weigh a lot of concerns, including expected use cases and ergonomics, as well as adherence to conventions/principle of least surprise.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206465319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206471616",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-206471616",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 206471616,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjQ3MTYxNg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-06T17:17:32Z",
    "updated_at": "2016-04-06T17:17:32Z",
    "body": "Yeah it's true that we have the option of returning a sentinel for a slice which you _then_ iterate over, but that is inconsistent with [`str::encode_utf16`](http://doc.rust-lang.org/nightly/std/primitive.str.html#method.encode_utf16) which returns an iterator directly.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206471616/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206473269",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-206473269",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 206473269,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjQ3MzI2OQ==",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-06T17:20:54Z",
    "updated_at": "2016-04-06T17:20:54Z",
    "body": "@alexcrichton Ah, good point -- the fact that we have a stable related encoding method using iterators lends further weight to the consistency argument, IMO.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206473269/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206511399",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-206511399",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 206511399,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjUxMTM5OQ==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-06T18:50:37Z",
    "updated_at": "2016-04-06T18:50:47Z",
    "body": "@aturon \n\n> > However, this method will be used to get a slice more often than it will be used to get an iterator\n> \n> Hm, this isn't so obvious to me. In general, the libs team has tended to prefer iterator-based APIs for composability, simplicity, flexibility, consistency and instant recognizability.\n\n-and-\n\n> This argument seems a little circular, but more importantly, a given representation often has a ton of possible views into it. Many iterators in std are essentially just (pointers to) contiguous elements that could in principle implement Deref. The point is, you can view encoding equally as returning an array or as returning a sequence of bytes; both are valid and useful views, and the question is which one should be primary -- a question that needs to weigh a lot of concerns, including expected use cases and ergonomics, as well as adherence to conventions/principle of least surprise.\n\nI based my argument on uses in the rust repository and those I could find on github. You can find consumers of this API (and how I changed them to use the new API) in my branch: https://github.com/rust-lang/rust/compare/rust-lang:master...Stebalien:encode.\n\n> I'm confused about the desire to have this deref to str -- isn't the whole point of this method to get a sequence of bytes (in some form)? Going through str would mean needing as_bytes, which doesn't seem like an improvement over the current need for as_slice. But maybe I'm missing something?\n\nYes, at the end of the day, you always want bytes. However, (1) many safe APIs expect utf8 encoded `str`s, (2) converting a `[u8]` to an `str` is either unsafe or has a runtime cost while the inverse is safe/free. Again, see the linked branch for examples of how derefing to an `str` reduces the number of unsafe blocks.\n\n@alexcrichton\n\n> Yeah it's true that we have the option of returning a sentinel for a slice which you then iterate over, but that is inconsistent with str::encode_utf16 which returns an iterator directly.\n\nYes, but there we're encoding a variable length slice while here we're encoding a char (fixed length). However, that is a good point a valid reason not to do it this way (I'm just not convinced it outweighs the benefits of this API).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206511399/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206568072",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-206568072",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 206568072,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjU2ODA3Mg==",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-06T21:06:35Z",
    "updated_at": "2016-04-06T21:06:35Z",
    "body": "Thinking about this a little more, has anyone done any benchmarks to compare the performance of returning a fixed size array as opposed to taking a `&mut [u8]` to write directly into? I actually don't think today's interface is that wonky (Go's [`EncodeRune`](https://golang.org/pkg/unicode/utf8/#EncodeRune) is effectively the same thing), and if `encode_utf8` returns either an iterator or a slice (or both), doesn't that means those bytes need to be copied again if you're encoding UTF-8 into a larger buffer? (Which I kind of assume would be a common case.)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206568072/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206690713",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-206690713",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 206690713,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjY5MDcxMw==",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-07T04:20:48Z",
    "updated_at": "2016-04-07T04:20:48Z",
    "body": "If we decide to go with the iterator + `.as_slice`/`.as_str` approach, it seems like there's a weird corner case with the interaction, especially with `as_str`:\n\n``` rust\nlet mut iter = '\u00e4'.encode_utf8();\niter.next(); // get the first byte\nlet x = iter.as_str();\nlet y = iter.as_slice();\n```\n\nDo the `as_` methods try to account for the `next` call, and so return the slice with the head stripped off (this is not at all valid for `as_str`)? Or, do they just return the original value, ignoring the mutation? Or, maybe they could even check for mutation and panic?\n\nAn alternative would be to implement `IntoIterator` instead of `Iterator`, so one can't interleave calls to `next` and `as_...` on the same object. This should still allow `iter.flat_map(|c| c.encode_utf8())` to work.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206690713/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206910542",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-206910542",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 206910542,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjkxMDU0Mg==",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-07T13:43:15Z",
    "updated_at": "2016-04-07T13:43:15Z",
    "body": "I'm at work so I haven't spent too much time on this yet (i.e., haven't looked at the generated code), but here's what I whipped up for benchmarks:\n\n``` rust\n#![feature(copy_from_slice, test, unicode)]\n\nextern crate test;\n\n#[inline]\nfn encode_utf8(character: char, dst: &mut [u8]) -> Option<usize> {\n    const TAG_CONT: u8 = 0b1000_0000;\n    const TAG_TWO: u8 = 0b1100_0000;\n    const TAG_THREE: u8 = 0b1110_0000;\n    const TAG_FOUR: u8 = 0b1111_0000;\n\n    let code = character as u32;\n    if code <= 0x7F && !dst.is_empty() {\n        dst[0] = code as u8;\n        Some(1)\n    } else if code <= 0x7FF && dst.len() >= 2 {\n        dst[0] = (code >> 6 & 0x1F) as u8 | TAG_TWO;\n        dst[1] = (code & 0x3F) as u8 | TAG_CONT;\n        Some(2)\n    } else if code <= 0xFFFF && dst.len() >= 3  {\n        dst[0] = (code >> 12 & 0x0F) as u8 | TAG_THREE;\n        dst[1] = (code >>  6 & 0x3F) as u8 | TAG_CONT;\n        dst[2] = (code & 0x3F) as u8 | TAG_CONT;\n        Some(3)\n    } else if dst.len() >= 4 {\n        dst[0] = (code >> 18 & 0x07) as u8 | TAG_FOUR;\n        dst[1] = (code >> 12 & 0x3F) as u8 | TAG_CONT;\n        dst[2] = (code >>  6 & 0x3F) as u8 | TAG_CONT;\n        dst[3] = (code & 0x3F) as u8 | TAG_CONT;\n        Some(4)\n    } else {\n        None\n    }\n}\n\n#[bench]\nfn iterator(b: &mut test::Bencher) {\n    let mut buf = [0; 4];\n    let cs = &['a', '\\u{FF}', '\u2603', '\\u{10FFFF}'];\n    b.iter(|| {\n        for &c in cs {\n            for (src, dst) in c.encode_utf8().zip(buf.iter_mut()) {\n                *dst = src;\n            }\n        }\n    })\n}\n\n#[bench]\nfn slice(b: &mut test::Bencher) {\n    let mut buf = [0; 4];\n    let cs = &['a', '\\u{FF}', '\u2603', '\\u{10FFFF}'];\n    b.iter(|| {\n        for &c in cs {\n            let encoded = c.encode_utf8();\n            let encoded = encoded.as_slice();\n            test::black_box(buf[0..encoded.len()].copy_from_slice(encoded));\n        }\n    })\n}\n\n#[bench]\nfn direct(b: &mut test::Bencher) {\n    let mut buf = [0; 4];\n    let cs = &['a', '\\u{FF}', '\u2603', '\\u{10FFFF}'];\n    b.iter(|| {\n        for &c in cs {\n            test::black_box(encode_utf8(c, &mut buf).unwrap());\n        }\n    })\n}\n```\n\nAnd benchmarks (using `rustc 1.9.0-nightly (bf5da36f1 2016-04-06)`):\n\n```\ntest direct   ... bench:           1 ns/iter (+/- 0)\ntest iterator ... bench:          37 ns/iter (+/- 1)\ntest slice    ... bench:          13 ns/iter (+/- 0)\n```\n\nThe basic point of my benchmark is to test how fast we can encode some set of UTF-8 bytes to a buffer. What am I missing?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206910542/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206910865",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-206910865",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 206910865,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjkxMDg2NQ==",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-07T13:43:52Z",
    "updated_at": "2016-04-07T13:43:52Z",
    "body": "cc @bluss (Seems like something you might be interested in.)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206910865/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206989817",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-206989817",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 206989817,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjk4OTgxNw==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-07T16:50:47Z",
    "updated_at": "2016-04-07T16:50:47Z",
    "body": "@BurntSushi You need to use the output of direct:\n\n``` rust\n#[bench]\nfn direct(b: &mut test::Bencher) {\n    let mut buf = [0; 4];\n    let cs = &['a', '\\u{FF}', '\u2603', '\\u{10FFFF}'];\n    b.iter(|| {\n        for &c in cs {\n            test::black_box(encode_utf8(c, &mut buf).unwrap());\n            test::black_box(&buf); // <--- here\n        }\n    })\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206989817/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206999200",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-206999200",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 206999200,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNjk5OTIwMA==",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-07T17:13:23Z",
    "updated_at": "2016-04-07T17:13:23Z",
    "body": "@Stebalien That seems strange to me. The first `black_box` should be enough, no? In any case, I tried it and there's no difference in benchmarks.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/206999200/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/207003251",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-207003251",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 207003251,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzAwMzI1MQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-07T17:18:06Z",
    "updated_at": "2016-04-07T17:18:06Z",
    "body": "The libs team discussed this during triage yesterday and given @BurntSushi's performance concerns we decided to hold off stabilization for now.\n\n---\n\n@BurntSushi I did some benchmarking locally, and here's some things I discovered:\n- I'm fine not worrying about the performance of the iterator case, if we can get at least `as_slice` optimized I'd be happy.\n- The `EncodeUtf8::as_slice` method is missing `#[inline]` which gives a nice perf boost, but not all the way.\n- LLVM couldn't optimize away a bounds check (even though it was visibly easy to optimize away) which I think was hurting performance a bit.\n- Even if there were no bounds checks (using unchecked slicing) then the slice case was still a bit slower. LLVM couldn't optimize away creating the intermediate slice, so the bytes would always be stored to memory twice.\n\nIt seems to be that this is just too complicated a task for LLVM to optimize the same way, so we may be back to the API drawing board?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/207003251/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/207017033",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-207017033",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 207017033,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzAxNzAzMw==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-07T17:34:06Z",
    "updated_at": "2016-04-07T17:34:06Z",
    "body": "I noticed a 10ms difference on my laptop. You need the second black box to ensure that the buffer is actually written.\n\nOn April 7, 2016 1:14:10 PM EDT, Andrew Gallant notifications@github.com wrote:\n\n> @Stebalien That seems strange to me. The first `black_box` should be\n> enough, no? In any case, I tried it and there's no difference in\n> benchmarks.\n> \n> ---\n> \n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub:\n> https://github.com/rust-lang/rust/issues/27784#issuecomment-206999200\n\n## \n\nSteven Allen\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/207017033/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/207031768",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-207031768",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 207031768,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzAzMTc2OA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-07T18:07:07Z",
    "updated_at": "2016-04-07T18:07:07Z",
    "body": "Ah and one other conclusion I forgot to mention from the libs triage meeting is that we don't want to have a `Deref` impl on the returned type for now, we concluded that it could be done with an explicit accessor and otherwise no one felt that `Deref` was appropriate.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/207031768/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/207129953",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-207129953",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 207129953,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzEyOTk1Mw==",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-07T22:59:33Z",
    "updated_at": "2016-04-07T22:59:41Z",
    "body": "@alexcrichton I think I probably agree that if we were able to get `as_slice` to work, then I'd be happy enough with that.\n\nWith that said, what do people find distasteful about the old API? Specifically, `fn encode_utf8(self, dst: &mut [u8]) -> Option<usize>`. I realize it's not the most ergonomic, but I propose considering these things:\n1. I don't imagine `encode_utf8` as being used particularly often, but when you need it, you probably want it to be as fast as possible. I feel like this makes ergonomics slightly less of a concern.\n2. There is precedent for almost this exact pattern of API in `io::Read::read`, and similarly for `io::BufRead::read_line`. (i.e., Pass in a buffer as a destination.)\n3. It is simple and explicit. If one is familiar with UTF-8, you can probably guess exactly what it's doing from its type signature alone. (This is probably the weakest point here, but seems worth mentioning.)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/207129953/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/207137542",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-207137542",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 207137542,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzEzNzU0Mg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-07T23:36:37Z",
    "updated_at": "2016-04-07T23:36:37Z",
    "body": "To me at least iterators feel much nicer in terms of ergnomoics. It also [fills in a cell](https://github.com/rust-lang/rust/issues/27830#issuecomment-195595469) for being able to convert an iterator of `char` to an iterator of the UTF-8 encoding.\n\nThat being said I think speed trumps here and I don't feel too strongly either way.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/207137542/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215901292",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-215901292",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 215901292,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNTkwMTI5Mg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-29T22:48:57Z",
    "updated_at": "2016-04-29T22:48:57Z",
    "body": "\ud83d\udd14 This issue is now entering another cycle long **final comment period** for stabilization \ud83d\udd14 \n\nGiven the performance revelations discovered by @BurntSushi we're considering moving these APIs _back_ to signatures like:\n\n``` rust\npub fn foo(buf: &mut [u8]) -> Result<usize, Error>\n```\n\nThe tweaks proposed are:\n- Renaming the functions to `write_utf8` and `write_utf16` to avoid conflict with `str::encode_utf16`\n- Return a `Result` instead of an `Option` as you really should be checking it.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215901292/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/219822389",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-219822389",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 219822389,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTgyMjM4OQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-17T19:10:42Z",
    "updated_at": "2016-05-17T19:10:42Z",
    "body": "The libs team discussed this during triage yesterday and the decision was to **stabilize** the `write_*` methods and leave the `encode_*` methods unstable for now.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/219822389/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220029637",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-220029637",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 220029637,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMDAyOTYzNw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-18T13:43:07Z",
    "updated_at": "2016-05-18T13:43:07Z",
    "body": "I\u2019d like to propose a change to that last proposal:\n- Return `usize` (the number of `u8` or `u16` written), not `Option<usize>` or `Result<usize, _>`.\n- Panic if the given buffer is not large enough\n\nThe reason for that is:\n- It\u2019s easy for callers to ensure that they make a large enough buffer: use `ch.len_utf8()` / `ch.len_utf16()` (exact size) or 4 / 2 (static upper bound).\n- If `write_utf8` / `write_utf16` return an option or result, I expect most callers to call `.unwrap()` anyway. In the rare (?) cases where the code calling these method needs to work with a buffer it can\u2019t resize and whose size it didn\u2019t decide, it can call `len_utf8` / `len_utf16` first to check if the buffer is large enough.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220029637/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/242998115",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-242998115",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 242998115,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0Mjk5ODExNQ==",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-08-28T20:44:25Z",
    "updated_at": "2016-08-28T20:44:25Z",
    "body": "It looks like serde is interested in the remaining unstable functionality.\n\ncc @dtolnay \n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/242998115/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/245173550",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-245173550",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 245173550,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NTE3MzU1MA==",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-07T04:42:42Z",
    "updated_at": "2016-09-07T04:42:42Z",
    "body": "The libs team discussed this, and agreed with @SimonSapin's approach to return a `usize` directly and panic on undersized buffers. Tagging with help-wanted if anyone is feeling motivated enough to implement!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/245173550/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/245609932",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-245609932",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 245609932,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NTYwOTkzMg==",
    "user": {
      "login": "tormol",
      "id": 10460821,
      "node_id": "MDQ6VXNlcjEwNDYwODIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/10460821?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tormol",
      "html_url": "https://github.com/tormol",
      "followers_url": "https://api.github.com/users/tormol/followers",
      "following_url": "https://api.github.com/users/tormol/following{/other_user}",
      "gists_url": "https://api.github.com/users/tormol/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tormol/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tormol/subscriptions",
      "organizations_url": "https://api.github.com/users/tormol/orgs",
      "repos_url": "https://api.github.com/users/tormol/repos",
      "events_url": "https://api.github.com/users/tormol/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tormol/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-08T14:11:14Z",
    "updated_at": "2016-09-08T14:11:14Z",
    "body": "I am [working on it](https://github.com/tormol/rust/commits/panicy_encode_utf).\n\nShould the panic message include the required and provided size?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/245609932/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/245646408",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-245646408",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 245646408,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NTY0NjQwOA==",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-08T15:58:53Z",
    "updated_at": "2016-09-08T15:58:53Z",
    "body": "Yep, seems reasonable!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/245646408/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/246420577",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-246420577",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 246420577,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NjQyMDU3Nw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-12T17:15:39Z",
    "updated_at": "2016-09-12T17:15:39Z",
    "body": "So thinking about this a bit more with a newer interface, we're thinking of something like:\n\n``` rust\nfn encode_utf8(&self, buf: &mut [u8]) -> usize;\n```\n\nWe could perhaps, however, consider some different signatures like:\n\n``` rust\nfn encode_utf8<'a>(&self, buf: &'a mut [u8]) -> &'a mut [u8];\nfn encode_utf8<'a>(&self, buf: &'a mut [u8]) -> &'a mut str;\nfn encode_utf8<'a>(&self, buf: &'a mut [u8]) -> &'a str;\n```\n\nThat is, instead of returning integers we could return some sub-slice of the buffer, either as a literal slice or perhaps as a string slice. My guess is that 90% of the time after you call `encode_utf8` you'd end up then re-slicing the buffer as evidenced by the changes in https://github.com/rust-lang/rust/pull/36377. If we were to return a slice then there's no need to worry about compiler indexing, and if we return a `str` then there's no need to worry about `from_utf8` conversions.\n\nI personally am thinking the last signature, \n\n``` rust\nfn encode_utf8<'a>(&self, buf: &'a mut [u8]) -> &'a str;\n```\n\nis the most appealing to me. You can always recover the same ergonomics with:\n\n``` rust\nlet len = ch.encode_utf8(&mut buf).len();\n```\n\nand otherwise we can remove a bunch of `from_utf8_unchecked` calls and slice calls where it's used.\n\nThoughts?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/246420577/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/246424026",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-246424026",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 246424026,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NjQyNDAyNg==",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-12T17:25:00Z",
    "updated_at": "2016-09-12T17:25:00Z",
    "body": "That's a cool approach, though I think we'd have to try it out in practice since I could see people running into borrow checker issues trying to repeatedly use the same buffer in a single block.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/246424026/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/246450523",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-246450523",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 246450523,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NjQ1MDUyMw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-12T18:47:47Z",
    "updated_at": "2016-09-12T18:47:47Z",
    "body": "True, my hope would be that `encode_utf8(buf).len()` would have the exact same ergonomics as today, especially as it wouldn't be extending the length of any borrow.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/246450523/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/246482647",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-246482647",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 246482647,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NjQ4MjY0Nw==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-12T20:33:45Z",
    "updated_at": "2016-09-12T20:33:45Z",
    "body": "> fn encode_utf8(&self, buf: &mut [u8]) -> usize;\n\nThis seems like pretty much the same thing as the signature before we moved to `EncodeUtf8` (with a notable difference `buf` taking `&mut [u8; 4]`) before. It works well and it also lets you to encode directly into the destination buffer without doing a copy of _variable_ length (completely unoptimisable).\n\n> We could perhaps, however, consider some different signatures like:\n> `fn encode_utf8<'a>(&self, buf: &'a mut [u8]) -> &'a str;`\n\nThat _could_ make sense if and only if `encode_utf8` wasn\u2019t as single-char focused as it is now.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/246482647/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/246928604",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-246928604",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 246928604,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NjkyODYwNA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-14T07:25:59Z",
    "updated_at": "2016-09-14T07:25:59Z",
    "body": "@nagisa Dealing with multiple chars depends on how you represent them:\n- `String` or `str`: use `.as_bytes()`.\n- `Vec<char>` only has very niche use cases in my opinion (such as implementing Punycode, which uses code point indices as insertion points)\n- The most general is `Iterator<Item=char>`, but to encode it to `&mut [u8]` you\u2019d have to know how big of a buffer to allocate (which might require a separate pass before the encoding pass) or deal with a partially-consumed iterator. Unless you want to encode to something resizable: we already have that with `iter.collect::<String>()` and `string.extend(iter)`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/246928604/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/252591586",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-252591586",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 252591586,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjU5MTU4Ng==",
    "user": {
      "login": "daschl",
      "id": 29086,
      "node_id": "MDQ6VXNlcjI5MDg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/29086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/daschl",
      "html_url": "https://github.com/daschl",
      "followers_url": "https://api.github.com/users/daschl/followers",
      "following_url": "https://api.github.com/users/daschl/following{/other_user}",
      "gists_url": "https://api.github.com/users/daschl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/daschl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daschl/subscriptions",
      "organizations_url": "https://api.github.com/users/daschl/orgs",
      "repos_url": "https://api.github.com/users/daschl/repos",
      "events_url": "https://api.github.com/users/daschl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/daschl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-10T11:25:51Z",
    "updated_at": "2016-10-10T11:25:51Z",
    "body": "@alexcrichton not sure if this is in scope, but I have the use case where I want to write a \"char\" into a u8 array at a given offset. Right now I've copied the main part from stdlib and do it like so:\n\n``` rust\n#[inline]\nfn write_char_into_array(&self, offset: usize, ch: &char, array: &mut [u8]) -> bool {\n    if (ch.len_utf8() + offset) > array.len() {\n        return false;\n    }\n\n    let code = *ch as u32;\n    if code < MAX_ONE_B {\n        array[offset] = code as u8;\n    } else if code < MAX_TWO_B {\n        array[offset] = (code >> 6 & 0x1F) as u8 | TAG_TWO_B;\n        array[offset + 1] = (code & 0x3F) as u8 | TAG_CONT;\n    } else if code < MAX_THREE_B {\n        array[offset] = (code >> 12 & 0x0F) as u8 | TAG_THREE_B;\n        array[offset + 1] = (code >> 6 & 0x3F) as u8 | TAG_CONT;\n        array[offset + 2] = (code & 0x3F) as u8 | TAG_CONT;\n    } else {\n        array[offset] = (code >> 18 & 0x07) as u8 | TAG_FOUR_B;\n        array[offset + 1] = (code >> 12 & 0x3F) as u8 | TAG_CONT;\n        array[offset + 2] = (code >> 6 & 0x3F) as u8 | TAG_CONT;\n        array[offset + 3] = (code & 0x3F) as u8 | TAG_CONT;\n    }\n    true\n}\n```\n\nAgain not sure if this is in scope, but I wanted to bring it up in case such a use case makes sense to integrate.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/252591586/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/252610127",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-252610127",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 252610127,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjYxMDEyNw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-10T12:53:27Z",
    "updated_at": "2016-10-10T12:53:27Z",
    "body": "@daschl you can deal with the offset by slicing:\n\n``` rust\nfn write_char_into_array(&self, offset: usize, ch: &char, array: &mut [u8]) -> bool {\n    let slice = &mut array[offset..];\n    if ch.len_utf8() > slice.len() {\n        return false\n    }\n    ch.encode_utf8(slice);\n    true\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/252610127/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/252612480",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-252612480",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 252612480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjYxMjQ4MA==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-10T13:04:57Z",
    "updated_at": "2016-10-10T13:04:57Z",
    "body": "@alexcrichton All of your suggestions are good. `&'a mut str` seems like the most powerful one, and it allows recovering all the other ones.\n\nI don't know if this data point is interesting, but ArrayString ended up copying this code too. When I shaped it after how it's used it ends up looking like\n\n`pub fn encode_utf8(ch: char, buf: &mut [u8]) -> Result<usize, EncodeError>`\n\nimpl: https://github.com/bluss/arrayvec/blob/d43c959fa8afa912c497104b60a64892e1178f9d/src/char_ext.rs#L28-L51\n\nuse: https://github.com/bluss/arrayvec/blob/d43c959fa8afa912c497104b60a64892e1178f9d/src/array_string.rs#L114-L119\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/252612480/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/252612602",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-252612602",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 252612602,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjYxMjYwMg==",
    "user": {
      "login": "daschl",
      "id": 29086,
      "node_id": "MDQ6VXNlcjI5MDg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/29086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/daschl",
      "html_url": "https://github.com/daschl",
      "followers_url": "https://api.github.com/users/daschl/followers",
      "following_url": "https://api.github.com/users/daschl/following{/other_user}",
      "gists_url": "https://api.github.com/users/daschl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/daschl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daschl/subscriptions",
      "organizations_url": "https://api.github.com/users/daschl/orgs",
      "repos_url": "https://api.github.com/users/daschl/repos",
      "events_url": "https://api.github.com/users/daschl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/daschl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-10T13:05:29Z",
    "updated_at": "2016-10-10T13:05:29Z",
    "body": "@SimonSapin ah good to know, thanks! lets hope it gets stable soon then\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/252612602/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/252613645",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-252613645",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 252613645,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjYxMzY0NQ==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-10T13:10:28Z",
    "updated_at": "2016-10-10T13:10:28Z",
    "body": "I would vote for no panic. That also simplifies the bounds checking (the impl linked above has all bounds checks elided, since `buf.len()` is being tested manually).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/252613645/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257726782",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-257726782",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 257726782,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NzcyNjc4Mg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-01T23:12:25Z",
    "updated_at": "2016-11-01T23:12:25Z",
    "body": "@rfcbot fcp merge\n\nThese methods have been around for awhile, I propose we merge!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257726782/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257726827",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-257726827",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 257726827,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NzcyNjgyNw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-01T23:12:42Z",
    "updated_at": "2016-11-01T23:12:42Z",
    "body": "er, stabilize*\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257726827/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257733207",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-257733207",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 257733207,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NzczMzIwNw==",
    "user": {
      "login": "rfcbot",
      "id": 20760818,
      "node_id": "MDQ6VXNlcjIwNzYwODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20760818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rfcbot",
      "html_url": "https://github.com/rfcbot",
      "followers_url": "https://api.github.com/users/rfcbot/followers",
      "following_url": "https://api.github.com/users/rfcbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/rfcbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rfcbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rfcbot/subscriptions",
      "organizations_url": "https://api.github.com/users/rfcbot/orgs",
      "repos_url": "https://api.github.com/users/rfcbot/repos",
      "events_url": "https://api.github.com/users/rfcbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rfcbot/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-01T23:48:53Z",
    "updated_at": "2016-11-12T01:11:24Z",
    "body": "Team member @alexcrichton has proposed to merge this. The next step is review by the rest of the tagged teams:\n- [x] @BurntSushi\n- [x] @Kimundi\n- [x] @alexcrichton\n- [x] @aturon\n- [x] @brson\n- [x] @sfackler\n\nConcerns:\n- ~~panic-vs-not-panic~~ resolved by https://github.com/rust-lang/rust/issues/27784#issuecomment-259836673\n\nOnce these reviewers reach consensus, this will enter its final comment period. If you spot a major issue that hasn't been raised at any point in this process, please speak up!\n\nSee [this document](https://github.com/dikaiosune/rust-dashboard/blob/master/RFCBOT.md) for info about what commands tagged team members can give me.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/257733207/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/258314547",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-258314547",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 258314547,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1ODMxNDU0Nw==",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-04T00:32:28Z",
    "updated_at": "2016-11-04T00:32:28Z",
    "body": "It's not obvious to me that the current API is the one we want since there has been ongoing discussion. @bluss recently suggested it should not panic, and the current implementation does panic.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/258314547/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/258314601",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-258314601",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 258314601,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1ODMxNDYwMQ==",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-04T00:32:48Z",
    "updated_at": "2016-11-04T00:32:48Z",
    "body": "@rfcbot concern panic-vs-not-panic\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/258314601/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/258326918",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-258326918",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 258326918,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1ODMyNjkxOA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-04T02:04:39Z",
    "updated_at": "2016-11-04T02:04:39Z",
    "body": "I'm personally convinced by @SimonSapin's [points above](https://github.com/rust-lang/rust/issues/27784#issuecomment-220029637), which is that there is a statically known size (4 and 2) to encode all utf8 and utf16 characters. Callers basically always need to pass in that size buffer, so it seems more like a programmer error if you pass in a small buffer than a runtime error that should be handled.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/258326918/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/258482657",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-258482657",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 258482657,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1ODQ4MjY1Nw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-04T16:39:06Z",
    "updated_at": "2016-11-04T16:39:06Z",
    "body": "To reiterate: you can use 2 or 4 to keep things simple or to use a statically-sized array, but you can also use `char::len_utf8` or `char::len_utf16` to find the precise length that is needed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/258482657/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/258513216",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-258513216",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 258513216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1ODUxMzIxNg==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-04T18:33:48Z",
    "updated_at": "2016-11-04T18:33:48Z",
    "body": "I don't want to cause a gridlock, it was just what my perspective was in that moment. The fixed capacity use case is more uncommon, and the motivation for panic is following the usual conventions, so it certainly makes sense.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/258513216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/259836587",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-259836587",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 259836587,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTgzNjU4Nw==",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-10T23:16:28Z",
    "updated_at": "2016-11-10T23:16:49Z",
    "body": "OK, it sounds like there's no major opposition to the api as is.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/259836587/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/259836673",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-259836673",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 259836673,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTgzNjY3Mw==",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-10T23:16:57Z",
    "updated_at": "2016-11-10T23:16:57Z",
    "body": "@rfcbot resolved panic-vs-not-panic\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/259836673/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/259957557",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-259957557",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 259957557,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTk1NzU1Nw==",
    "user": {
      "login": "Kimundi",
      "id": 2903206,
      "node_id": "MDQ6VXNlcjI5MDMyMDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2903206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kimundi",
      "html_url": "https://github.com/Kimundi",
      "followers_url": "https://api.github.com/users/Kimundi/followers",
      "following_url": "https://api.github.com/users/Kimundi/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kimundi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kimundi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kimundi/subscriptions",
      "organizations_url": "https://api.github.com/users/Kimundi/orgs",
      "repos_url": "https://api.github.com/users/Kimundi/repos",
      "events_url": "https://api.github.com/users/Kimundi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kimundi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-11T13:30:52Z",
    "updated_at": "2016-11-11T13:30:52Z",
    "body": "Apart from the panicking. I'm a bit confused right now about what the actual API/signature is going to be. The one that returns `&mut str` ?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/259957557/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/259981976",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-259981976",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 259981976,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTk4MTk3Ng==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-11T15:29:44Z",
    "updated_at": "2016-11-11T15:29:44Z",
    "body": "@Kimundi \n\nYeah [`encode_utf8`](https://doc.rust-lang.org/nightly/std/primitive.char.html#method.encode_utf8) looks like:\n\n``` rust\nfn encode_utf8(self, dst: &mut [u8]) -> &mut str\n```\n\nand [`encode_utf16`](https://doc.rust-lang.org/nightly/std/primitive.char.html#method.encode_utf16) looks like:\n\n``` rust\nfn encode_utf16(self, dst: &mut [u16]) -> &mut [u16]\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/259981976/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/259985788",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-259985788",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 259985788,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTk4NTc4OA==",
    "user": {
      "login": "Kimundi",
      "id": 2903206,
      "node_id": "MDQ6VXNlcjI5MDMyMDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2903206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kimundi",
      "html_url": "https://github.com/Kimundi",
      "followers_url": "https://api.github.com/users/Kimundi/followers",
      "following_url": "https://api.github.com/users/Kimundi/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kimundi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kimundi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kimundi/subscriptions",
      "organizations_url": "https://api.github.com/users/Kimundi/orgs",
      "repos_url": "https://api.github.com/users/Kimundi/repos",
      "events_url": "https://api.github.com/users/Kimundi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kimundi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-11T15:46:07Z",
    "updated_at": "2016-11-11T15:46:07Z",
    "body": "Alright!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/259985788/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/260090721",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-260090721",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 260090721,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDA5MDcyMQ==",
    "user": {
      "login": "rfcbot",
      "id": 20760818,
      "node_id": "MDQ6VXNlcjIwNzYwODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20760818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rfcbot",
      "html_url": "https://github.com/rfcbot",
      "followers_url": "https://api.github.com/users/rfcbot/followers",
      "following_url": "https://api.github.com/users/rfcbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/rfcbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rfcbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rfcbot/subscriptions",
      "organizations_url": "https://api.github.com/users/rfcbot/orgs",
      "repos_url": "https://api.github.com/users/rfcbot/repos",
      "events_url": "https://api.github.com/users/rfcbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rfcbot/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-12T01:11:24Z",
    "updated_at": "2016-11-12T01:11:24Z",
    "body": ":bell: **This is now entering its final comment period**, as per the [review above](https://github.com/rust-lang/rust/issues/27784#issuecomment-257733207). :bell:\n\n_psst @alexcrichton, I wasn't able to add the `final-comment-period` label, please do so._\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/260090721/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/262122682",
    "html_url": "https://github.com/rust-lang/rust/issues/27784#issuecomment-262122682",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27784",
    "id": 262122682,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjEyMjY4Mg==",
    "user": {
      "login": "rfcbot",
      "id": 20760818,
      "node_id": "MDQ6VXNlcjIwNzYwODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20760818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rfcbot",
      "html_url": "https://github.com/rfcbot",
      "followers_url": "https://api.github.com/users/rfcbot/followers",
      "following_url": "https://api.github.com/users/rfcbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/rfcbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rfcbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rfcbot/subscriptions",
      "organizations_url": "https://api.github.com/users/rfcbot/orgs",
      "repos_url": "https://api.github.com/users/rfcbot/repos",
      "events_url": "https://api.github.com/users/rfcbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rfcbot/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-22T01:38:49Z",
    "updated_at": "2016-11-22T01:38:49Z",
    "body": "The final comment period is now complete.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/262122682/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
