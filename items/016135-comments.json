[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/50715204",
    "html_url": "https://github.com/rust-lang/rust/issues/16135#issuecomment-50715204",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16135",
    "id": 50715204,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNzE1MjA0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-31T05:48:46Z",
    "updated_at": "2014-07-31T05:48:46Z",
    "body": "This is... disturbing. We also discovered today that `Rc` and `Arc` leak their allocations on failure of the contained object's destructor.\n\nIn general it sounds like our \"clean up on destructor failure\" story isn't so hot when considering issues like #14875 as well.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/50715204/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52584076",
    "html_url": "https://github.com/rust-lang/rust/issues/16135#issuecomment-52584076",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16135",
    "id": 52584076,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTg0MDc2",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-19T02:47:39Z",
    "updated_at": "2014-08-19T02:47:55Z",
    "body": "I don't think it makes sense to take a further performance and complexity hit to improve (but not fix) support for something that's already broken.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52584076/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73818163",
    "html_url": "https://github.com/rust-lang/rust/issues/16135#issuecomment-73818163",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16135",
    "id": 73818163,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczODE4MTYz",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-11T01:08:56Z",
    "updated_at": "2015-02-11T01:08:56Z",
    "body": "Triage: this sitll only prints `drop` once, with some trivial updates to today's syntax. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73818163/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/192377248",
    "html_url": "https://github.com/rust-lang/rust/issues/16135#issuecomment-192377248",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16135",
    "id": 192377248,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MjM3NzI0OA==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-04T17:46:29Z",
    "updated_at": "2016-03-04T17:46:29Z",
    "body": "Triage:\n\n``` rust\n#![feature(box_syntax)]\nstruct F(Box<()>);\n\nimpl Drop for F {\n    fn drop(&mut self) {\n        println!(\"drop\");\n        panic!()\n    }\n}\n\nfn main() {\n    let _v = vec!(F(box ()), F(box ()), F(box ()), F(box ()));\n}\n```\n\n``` bash\nsteve@warmachine:~/tmp$ ./main \ndrop\nthread '<main>' panicked at 'explicit panic', main.rs:7\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/192377248/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/192513101",
    "html_url": "https://github.com/rust-lang/rust/issues/16135#issuecomment-192513101",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16135",
    "id": 192513101,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MjUxMzEwMQ==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-04T23:02:32Z",
    "updated_at": "2016-03-04T23:07:33Z",
    "body": "Since we did the Vec / RawVec split, it should now be the case that the RawVec allocation itself is always free'd even if one of the elements panic in Vec's drop.\n\nConfirmed that it does deallocate the RawVec allocation using rustc 1.9.0-nightly (7b0b80ae2 2016-03-02).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/192513101/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/328348171",
    "html_url": "https://github.com/rust-lang/rust/issues/16135#issuecomment-328348171",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16135",
    "id": 328348171,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyODM0ODE3MQ==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-09-10T14:59:29Z",
    "updated_at": "2017-09-10T14:59:29Z",
    "body": "I believe we handle this correctly today, in that we attempt to deallocate all elements regardless of failure:\r\n\r\n```rust\r\nstruct F(u32);\r\n\r\nimpl Drop for F {\r\n    fn drop(&mut self) {\r\n        eprintln!(\"drop\");\r\n        if self.0 == 0 { panic!() }\r\n    }\r\n}\r\n\r\nfn main() {\r\n    let _v = vec!(F(1), F(0), F(1), F(1));\r\n}\r\n```\r\n\r\n```\r\n   Compiling playground v0.0.1 (file:///playground)\r\n    Finished dev [unoptimized + debuginfo] target(s) in 0.66 secs\r\n     Running `target/debug/playground`\r\ndrop\r\ndrop\r\nthread 'main' panicked at 'explicit panic', src/main.rs:7:25\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\ndrop\r\ndrop\r\n```",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/328348171/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
