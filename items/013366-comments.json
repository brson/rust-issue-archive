[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57071863",
    "html_url": "https://github.com/rust-lang/rust/issues/13366#issuecomment-57071863",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13366",
    "id": 57071863,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MDcxODYz",
    "user": {
      "login": "kmcallister",
      "id": 444997,
      "node_id": "MDQ6VXNlcjQ0NDk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/444997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kmcallister",
      "html_url": "https://github.com/kmcallister",
      "followers_url": "https://api.github.com/users/kmcallister/followers",
      "following_url": "https://api.github.com/users/kmcallister/following{/other_user}",
      "gists_url": "https://api.github.com/users/kmcallister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kmcallister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kmcallister/subscriptions",
      "organizations_url": "https://api.github.com/users/kmcallister/orgs",
      "repos_url": "https://api.github.com/users/kmcallister/repos",
      "events_url": "https://api.github.com/users/kmcallister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kmcallister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-28T01:49:15Z",
    "updated_at": "2014-09-28T01:49:15Z",
    "body": "I spent a while today poking at this. `trans::asm` calls `callee::trans_arg_datum`, which is the same function used to translate ordinary function arguments. So we end up passing a pointer for structs and arrays bigger than a machine word.\n\nI'm not sure exactly how to fix this, but naive solutions (such as always loading from lvalues and by-ref rvalues) produced incorrect code.  I think we want to keep them by-ref and change the `m` constraint to `*m`. At any rate that's what clang does; see `CodeGenFunction::EmitAsmInputLValue`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57071863/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/137488568",
    "html_url": "https://github.com/rust-lang/rust/issues/13366#issuecomment-137488568",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13366",
    "id": 137488568,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNzQ4ODU2OA==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-03T15:39:41Z",
    "updated_at": "2015-09-03T15:39:41Z",
    "body": "Triage: no update that I'm aware of.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/137488568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/283447418",
    "html_url": "https://github.com/rust-lang/rust/issues/13366#issuecomment-283447418",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13366",
    "id": 283447418,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MzQ0NzQxOA==",
    "user": {
      "login": "mrhota",
      "id": 403641,
      "node_id": "MDQ6VXNlcjQwMzY0MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/403641?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mrhota",
      "html_url": "https://github.com/mrhota",
      "followers_url": "https://api.github.com/users/mrhota/followers",
      "following_url": "https://api.github.com/users/mrhota/following{/other_user}",
      "gists_url": "https://api.github.com/users/mrhota/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mrhota/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mrhota/subscriptions",
      "organizations_url": "https://api.github.com/users/mrhota/orgs",
      "repos_url": "https://api.github.com/users/mrhota/repos",
      "events_url": "https://api.github.com/users/mrhota/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mrhota/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-01T19:42:48Z",
    "updated_at": "2017-03-01T19:42:48Z",
    "body": "@kmcallister @steveklabnik I tested the OP code (slightly updated) as follows:\r\n```rust\r\n#![feature(asm)]\r\n\r\n#[inline(never)]\r\nunsafe fn print_first_half(arr: [u8; 16]) {\r\n    let out: u64;\r\n    asm!(\"movups $1, %xmm0\r\n          pextrq $$0, %xmm0, $0\"\r\n          : \"=r\"(out) : \"m\"(arr) : \"xmm0\");\r\n    println!(\"{:?}\", out);\r\n}\r\n\r\nfn main() {\r\n    let arr: [u8; 16] = [0; 16];\r\n    unsafe { print_first_half(arr); }\r\n}\r\n```\r\nand we get an ICE on nightly when emitting ASM or LLVM IR. Generating MIR _does not_ ICE.\r\n\r\nSee code at https://is.gd/MQGiQN\r\n\r\nICE report is here: #40187",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/283447418/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424054584",
    "html_url": "https://github.com/rust-lang/rust/issues/13366#issuecomment-424054584",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13366",
    "id": 424054584,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDA1NDU4NA==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-09-24T17:18:41Z",
    "updated_at": "2018-09-24T17:18:41Z",
    "body": "Triage: ICE not fixed",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424054584/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/632862738",
    "html_url": "https://github.com/rust-lang/rust/issues/13366#issuecomment-632862738",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13366",
    "id": 632862738,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMjg2MjczOA==",
    "user": {
      "login": "Amanieu",
      "id": 278509,
      "node_id": "MDQ6VXNlcjI3ODUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amanieu",
      "html_url": "https://github.com/Amanieu",
      "followers_url": "https://api.github.com/users/Amanieu/followers",
      "following_url": "https://api.github.com/users/Amanieu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions",
      "organizations_url": "https://api.github.com/users/Amanieu/orgs",
      "repos_url": "https://api.github.com/users/Amanieu/repos",
      "events_url": "https://api.github.com/users/Amanieu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amanieu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-05-22T19:05:34Z",
    "updated_at": "2020-05-22T19:05:34Z",
    "body": "This issue does not apply to the new `asm!` ([RFC 2850](https://github.com/rust-lang/rfcs/pull/2850)) which has stricter checks on the types that can be used as asm operands.\r\n\r\nThe legacy `llvm_asm!` is deprecated and is no longer maintained.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/632862738/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
