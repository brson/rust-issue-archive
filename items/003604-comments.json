[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8915235",
    "html_url": "https://github.com/rust-lang/rust/issues/3604#issuecomment-8915235",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3604",
    "id": 8915235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg5MTUyMzU=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-09-27T01:01:48Z",
    "updated_at": "2012-09-27T01:01:48Z",
    "body": "Or alternately better integration of @strs and @vecs into core::str and vec. More abstraction is called for. The at_vec module hasn't been a huge success.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8915235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8921123",
    "html_url": "https://github.com/rust-lang/rust/issues/3604#issuecomment-8921123",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3604",
    "id": 8921123,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg5MjExMjM=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-09-27T03:15:44Z",
    "updated_at": "2012-09-27T03:18:59Z",
    "body": "So, I know that @pcwalton is opposed because it makes the signatures complex (which it does), but making use of static typeclass methods and the builder interface stuff, it is totally plausible to have all methods on iterables generate either `~[]` or `@[]` or even user-defined impls, depending on what the inferencer decides is necessary.\n\nBasically `map()` (here shown in its most generic form, for any iterable) would look like:\n\n```\nfn map<A, IA: Iterable<A>, B, C: Buildable<B>>(\n    input: IA, conv: fn(&A) -> B) -> C\n{\n    do Buildable::build |push| {\n        for input.each |a| {\n            push(conv(a));\n        }\n    }\n}\n```\n\nAnd the `Buildable` iface would look something like:\n\n```\ntype PushFn<T> = &fn(+t: T);\ntrait Buildable<T> {\n    pure fn build(pusher: &pure fn(PushFn<T>)) -> self;\n}\n```\n\nAnd the impl for `~[]` would look like:\n\n```\nimpl<T> ~[T]: Buildable<T> {\n    pure fn build(pusher: &pure fn(PushFn<T>)) -> ~[T] {\n        let mut vec = ~[];\n        do pusher |elem| {\n            // unsafe is needed because this function should appear\n            // pure from the outside.  We know it's safe because `vec`\n            // does not escape, but the type system doesn't know it...\n\n            unsafe { vec.push(elem); }\n        }\n        return vec;\n    }\n}\n```\n\nThere are undoubtedly a lot of bugs standing between us and having this work, as well as (at least) one other enhancement that I think would be important.  That enhancement is that we probably need some kind of way to help the type inferencer when the required type is underconstrained.  Or else we just add type hints.  I'm thinking of a situation like this:\n\n```\nfor v.map(|e| ...).each |e| { ... }\n```\n\nHere, there is no way for the type inferencer to know what result type `map()` should have---it just needs to be something iterable.  Alternatively, if you did this:\n\n```\nlet mapped: ~[T] = v.map(|e| ...);\nfor mapped.each |e| { ... }\n```\n\nthen the type inferencer would know what to do.\n\nThe downside of this scheme is that... well... it IS complex.  But it'd be nice not to need to define higher-order things like`map()` more than once.\n\n_Note_: Here I've used the \"receiver-less\" fn notation that we intend to move to, rather than the keyword `static` that is currently required.  I also invoked the \"receiver-less\" fn by prefixing it with the trait name, as I'd like to do. :)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8921123/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/9727222",
    "html_url": "https://github.com/rust-lang/rust/issues/3604#issuecomment-9727222",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3604",
    "id": 9727222,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk3MjcyMjI=",
    "user": {
      "login": "jruderman",
      "id": 692547,
      "node_id": "MDQ6VXNlcjY5MjU0Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/692547?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jruderman",
      "html_url": "https://github.com/jruderman",
      "followers_url": "https://api.github.com/users/jruderman/followers",
      "following_url": "https://api.github.com/users/jruderman/following{/other_user}",
      "gists_url": "https://api.github.com/users/jruderman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jruderman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jruderman/subscriptions",
      "organizations_url": "https://api.github.com/users/jruderman/orgs",
      "repos_url": "https://api.github.com/users/jruderman/repos",
      "events_url": "https://api.github.com/users/jruderman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jruderman/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-10-24T04:00:23Z",
    "updated_at": "2012-10-24T04:00:23Z",
    "body": "Or library functions could generally build `~str`s, and Rust could allow casting a `~str` to `@str`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/9727222/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/9962074",
    "html_url": "https://github.com/rust-lang/rust/issues/3604#issuecomment-9962074",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3604",
    "id": 9962074,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk5NjIwNzQ=",
    "user": {
      "login": "jruderman",
      "id": 692547,
      "node_id": "MDQ6VXNlcjY5MjU0Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/692547?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jruderman",
      "html_url": "https://github.com/jruderman",
      "followers_url": "https://api.github.com/users/jruderman/followers",
      "following_url": "https://api.github.com/users/jruderman/following{/other_user}",
      "gists_url": "https://api.github.com/users/jruderman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jruderman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jruderman/subscriptions",
      "organizations_url": "https://api.github.com/users/jruderman/orgs",
      "repos_url": "https://api.github.com/users/jruderman/repos",
      "events_url": "https://api.github.com/users/jruderman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jruderman/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-10-31T21:05:37Z",
    "updated_at": "2012-10-31T21:05:37Z",
    "body": "Which is #3450\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/9962074/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18509218",
    "html_url": "https://github.com/rust-lang/rust/issues/3604#issuecomment-18509218",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3604",
    "id": 18509218,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NTA5MjE4",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-27T18:00:59Z",
    "updated_at": "2013-05-27T18:00:59Z",
    "body": "I don't think this will break existing code, so clearing the milestone and nominating for milestone 3, feature-complete. I think we need some discussion about the str situation.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/18509218/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20140079",
    "html_url": "https://github.com/rust-lang/rust/issues/3604#issuecomment-20140079",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3604",
    "id": 20140079,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMTQwMDc5",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-27T17:12:04Z",
    "updated_at": "2013-06-27T17:12:04Z",
    "body": "accepted for feature complete by analogy with #3450 \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20140079/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33052696",
    "html_url": "https://github.com/rust-lang/rust/issues/3604#issuecomment-33052696",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3604",
    "id": 33052696,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDUyNjk2",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-22T18:35:51Z",
    "updated_at": "2014-01-22T18:35:51Z",
    "body": "wontfix, `@str` should go away.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33052696/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
