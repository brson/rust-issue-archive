[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5236557",
    "html_url": "https://github.com/rust-lang/rust/issues/2257#issuecomment-5236557",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2257",
    "id": 5236557,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzY1NTc=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-04-20T02:04:52Z",
    "updated_at": "2012-04-20T02:04:52Z",
    "body": "The annoying part is getting the scoping right.  It seems so special case to introduce named fn@'s that can only recurse to themselves.  On the other hand, introducing a `let rec` also seems like a lot of work for something that doesn't come up _that_ often.  \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5236557/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5255848",
    "html_url": "https://github.com/rust-lang/rust/issues/2257#issuecomment-5255848",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2257",
    "id": 5255848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTU4NDg=",
    "user": {
      "login": "jwise",
      "id": 87427,
      "node_id": "MDQ6VXNlcjg3NDI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/87427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jwise",
      "html_url": "https://github.com/jwise",
      "followers_url": "https://api.github.com/users/jwise/followers",
      "following_url": "https://api.github.com/users/jwise/following{/other_user}",
      "gists_url": "https://api.github.com/users/jwise/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jwise/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jwise/subscriptions",
      "organizations_url": "https://api.github.com/users/jwise/orgs",
      "repos_url": "https://api.github.com/users/jwise/repos",
      "events_url": "https://api.github.com/users/jwise/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jwise/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-04-21T00:50:47Z",
    "updated_at": "2012-04-21T00:50:47Z",
    "body": "Right.  I mean, one solution is to have named `fn@`s that also have `and`s -- i.e.:\n\n```\nfn@ func1(x: int) -> int {\n  if (x == 0) { -1 } else { func2(x-1) }\n}\nand fn@ func2 (x: int) -> int {\n  if (x % 3 == 0) { x * 5 } else { func1(x-1) }\n}\n```\n\nBut `let rec` is not just used for this, I should note.  For instance, consider if I want a circularly linked runqueue:\n\n```\nenum runqueue_e {\n  not_yet(),\n  rq_next({tid: int, name: str, mut next: @runqueue_e}),\n}\n\nfn gen_init() -> @runqueue_e {\n  let rq : @runqueue_e = @rq_next({ tid: 1, name: \"init\", mut next: @not_yet });\n  alt *rq { rq_next(a) { a.next = rq; } not_yet() { } };\n  rq\n}\n```\n\nThis is very painful, in part because an enum is needed (to get around the 'no recursive non-enumful types' issue), and in part because it's an extra step.  (The enum is very painful, since it needs the 'alt' mess to get at the contents.)\n\nThis could be trivially rewritten with something of the form:\n\n```\ntype runqueue = {tid: int, name: str, mut next: @runqueue};\n\nfn gen_init() -> @runqueue_e {\n  let rec rq : @runqueue = { tid: 1, name: \"init\", mut next: rq} ;\n  rq\n}\n```\n\nI mentioned this on IRC.  @nikomatsakis noted that there are two issues here -- type-checking this (in particular, I think you now need to seriously think hard about how to infer the type of 'rq', if you wish to do so), and guaranteeing that intermediate states are not visible.  Even if this is constrained to boxes, it's still possible for intermediate states to exist -- how do the MLs deal with this?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5255848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5263109",
    "html_url": "https://github.com/rust-lang/rust/issues/2257#issuecomment-5263109",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2257",
    "id": 5263109,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNjMxMDk=",
    "user": {
      "login": "jwise",
      "id": 87427,
      "node_id": "MDQ6VXNlcjg3NDI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/87427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jwise",
      "html_url": "https://github.com/jwise",
      "followers_url": "https://api.github.com/users/jwise/followers",
      "following_url": "https://api.github.com/users/jwise/following{/other_user}",
      "gists_url": "https://api.github.com/users/jwise/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jwise/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jwise/subscriptions",
      "organizations_url": "https://api.github.com/users/jwise/orgs",
      "repos_url": "https://api.github.com/users/jwise/repos",
      "events_url": "https://api.github.com/users/jwise/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jwise/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-04-21T20:01:36Z",
    "updated_at": "2012-04-21T20:01:36Z",
    "body": "Talked to @msullivan today.  Apparently the way the MLs do it is by saying that only lambdas are allowed to be `let rec`s.  So perhaps `fn@ foo... and fn@ bar...` is the right way to do it?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5263109/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5284827",
    "html_url": "https://github.com/rust-lang/rust/issues/2257#issuecomment-5284827",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2257",
    "id": 5284827,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyODQ4Mjc=",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-04-23T16:12:55Z",
    "updated_at": "2012-04-23T16:14:27Z",
    "body": "What about:\n\n```\nlet mut foo, bar;\nfoo = fn@() { ... use bar ... }\nbar = fn@() { ... use foo ... }\n```\n\nEdit: Oh wait, the closures copy. I guess you would need:\n\n```\nlet foo = @mut none, bar = @mut none;\nfoo = some(fn@ { ... use bar.get() ... })\nbar = some(fn@ { ... use foo.get() ... })\n```\n\nBlech.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5284827/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7988120",
    "html_url": "https://github.com/rust-lang/rust/issues/2257#issuecomment-7988120",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2257",
    "id": 7988120,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5ODgxMjA=",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-08-23T23:45:32Z",
    "updated_at": "2012-08-23T23:45:32Z",
    "body": "Closing due to lack of consensus. Reopen if someone is still interested.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7988120/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
