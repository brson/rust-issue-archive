[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55595970",
    "html_url": "https://github.com/rust-lang/rust/issues/10876#issuecomment-55595970",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10876",
    "id": 55595970,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NTk1OTcw",
    "user": {
      "login": "treeman",
      "id": 162027,
      "node_id": "MDQ6VXNlcjE2MjAyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/162027?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/treeman",
      "html_url": "https://github.com/treeman",
      "followers_url": "https://api.github.com/users/treeman/followers",
      "following_url": "https://api.github.com/users/treeman/following{/other_user}",
      "gists_url": "https://api.github.com/users/treeman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/treeman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/treeman/subscriptions",
      "organizations_url": "https://api.github.com/users/treeman/orgs",
      "repos_url": "https://api.github.com/users/treeman/repos",
      "events_url": "https://api.github.com/users/treeman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/treeman/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-15T14:15:33Z",
    "updated_at": "2014-09-15T14:15:33Z",
    "body": "Still relevant:\n\n```\nenum Nat {\n    S(Box<Nat>),\n    Z\n}\nfn test(x: &mut Nat) {\n    let mut p = &mut *x;\n    loop {\n        match p {\n            &Z => break,\n            &S(box ref mut n) => p = &mut *n\n        }\n    }\n}\n\nfn main() { }\n```\n\nGives:\n\n```\ntst.rs:11:20: 11:29 error: cannot borrow `*p#0` as mutable more than once at a time\ntst.rs:11             &S(box ref mut n) => p = &mut *n\n                             ^~~~~~~~~\ntst.rs:11:20: 11:29 note: previous borrow of `*p#0` occurs here; the mutable borrow prevents subsequent moves, borrows, or modification of `*p#0` until the borrow ends\ntst.rs:11             &S(box ref mut n) => p = &mut *n\n                             ^~~~~~~~~\ntst.rs:14:2: 14:2 note: previous borrow ends here\ntst.rs:6 fn test(x: &mut Nat) {\n...\ntst.rs:14 }\n          ^\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55595970/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/103266204",
    "html_url": "https://github.com/rust-lang/rust/issues/10876#issuecomment-103266204",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10876",
    "id": 103266204,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMzI2NjIwNA==",
    "user": {
      "login": "nham",
      "id": 546409,
      "node_id": "MDQ6VXNlcjU0NjQwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/546409?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nham",
      "html_url": "https://github.com/nham",
      "followers_url": "https://api.github.com/users/nham/followers",
      "following_url": "https://api.github.com/users/nham/following{/other_user}",
      "gists_url": "https://api.github.com/users/nham/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nham/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nham/subscriptions",
      "organizations_url": "https://api.github.com/users/nham/orgs",
      "repos_url": "https://api.github.com/users/nham/repos",
      "events_url": "https://api.github.com/users/nham/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nham/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-18T23:39:38Z",
    "updated_at": "2015-05-18T23:39:51Z",
    "body": "Triage:  The error looks better, but I'm not sure if it's good enough to close this issue. The updated code:\n\n``` rust\n#![feature(box_patterns)]\n\nenum Nat {\n    S(Box<Nat>),\n    Z\n}\nfn test(x: &mut Nat) {\n    let mut p = &mut *x;\n    loop {\n        match p {\n            &mut Nat::Z => break,\n            &mut Nat::S(box ref mut n) => p = &mut *n\n        }\n    }\n}\n\nfn main() { }\n```\n\nAnd the new error message is:\n\n```\niss10876.rs:12:29: 12:38 error: cannot borrow `*p.0` as mutable more than once at a time\niss10876.rs:12             &mut Nat::S(box ref mut n) => p = &mut *n\n                                           ^~~~~~~~~\niss10876.rs:12:29: 12:38 note: previous borrow of `*p.0` occurs here; the mutable borrow prevents subsequent moves, borrows, or modification of `*p.0` until the borrow ends\niss10876.rs:12             &mut Nat::S(box ref mut n) => p = &mut *n\n                                           ^~~~~~~~~\niss10876.rs:15:2: 15:2 note: previous borrow ends here\niss10876.rs:7 fn test(x: &mut Nat) {\n...\niss10876.rs:15 }\n               ^\niss10876.rs:12:43: 12:54 error: cannot assign to `p` because it is borrowed\niss10876.rs:12             &mut Nat::S(box ref mut n) => p = &mut *n\n                                                         ^~~~~~~~~~~\niss10876.rs:12:29: 12:38 note: borrow of `p` occurs here\niss10876.rs:12             &mut Nat::S(box ref mut n) => p = &mut *n\n                                           ^~~~~~~~~\nerror: aborting due to 2 previous errors\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/103266204/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/226961092",
    "html_url": "https://github.com/rust-lang/rust/issues/10876#issuecomment-226961092",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10876",
    "id": 226961092,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNjk2MTA5Mg==",
    "user": {
      "login": "estebank",
      "id": 1606434,
      "node_id": "MDQ6VXNlcjE2MDY0MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/estebank",
      "html_url": "https://github.com/estebank",
      "followers_url": "https://api.github.com/users/estebank/followers",
      "following_url": "https://api.github.com/users/estebank/following{/other_user}",
      "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/estebank/subscriptions",
      "organizations_url": "https://api.github.com/users/estebank/orgs",
      "repos_url": "https://api.github.com/users/estebank/repos",
      "events_url": "https://api.github.com/users/estebank/events{/privacy}",
      "received_events_url": "https://api.github.com/users/estebank/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-18T19:37:55Z",
    "updated_at": "2016-06-18T19:37:55Z",
    "body": "This was fixed in 5b150cf0.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/226961092/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/226965030",
    "html_url": "https://github.com/rust-lang/rust/issues/10876#issuecomment-226965030",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10876",
    "id": 226965030,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNjk2NTAzMA==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-18T21:10:26Z",
    "updated_at": "2016-06-18T21:10:26Z",
    "body": "No it wasn't. Only the formatting changed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/226965030/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/331242897",
    "html_url": "https://github.com/rust-lang/rust/issues/10876#issuecomment-331242897",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10876",
    "id": 331242897,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMTI0Mjg5Nw==",
    "user": {
      "login": "estebank",
      "id": 1606434,
      "node_id": "MDQ6VXNlcjE2MDY0MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/estebank",
      "html_url": "https://github.com/estebank",
      "followers_url": "https://api.github.com/users/estebank/followers",
      "following_url": "https://api.github.com/users/estebank/following{/other_user}",
      "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/estebank/subscriptions",
      "organizations_url": "https://api.github.com/users/estebank/orgs",
      "repos_url": "https://api.github.com/users/estebank/repos",
      "events_url": "https://api.github.com/users/estebank/events{/privacy}",
      "received_events_url": "https://api.github.com/users/estebank/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-09-21T18:30:52Z",
    "updated_at": "2017-09-21T18:30:52Z",
    "body": "Current output:\r\n\r\n```\r\nerror[E0499]: cannot borrow `p.0` as mutable more than once at a time\r\n  --> src/main.rs:10:25\r\n   |\r\n10 |             &mut Nat::S(ref mut n) => p = &mut *n\r\n   |                         ^^^^^^^^^ mutable borrow starts here in previous iteration of loop\r\n...\r\n13 | }\r\n   | - mutable borrow ends here\r\n\r\nerror[E0506]: cannot assign to `p` because it is borrowed\r\n  --> src/main.rs:10:39\r\n   |\r\n10 |             &mut Nat::S(ref mut n) => p = &mut *n\r\n   |                         ---------     ^^^^^^^^^^^ assignment to borrowed `p` occurs here\r\n   |                         |\r\n   |                         borrow of `p` occurs here\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/331242897/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/453334832",
    "html_url": "https://github.com/rust-lang/rust/issues/10876#issuecomment-453334832",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10876",
    "id": 453334832,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MzMzNDgzMg==",
    "user": {
      "login": "estebank",
      "id": 1606434,
      "node_id": "MDQ6VXNlcjE2MDY0MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/estebank",
      "html_url": "https://github.com/estebank",
      "followers_url": "https://api.github.com/users/estebank/followers",
      "following_url": "https://api.github.com/users/estebank/following{/other_user}",
      "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/estebank/subscriptions",
      "organizations_url": "https://api.github.com/users/estebank/orgs",
      "repos_url": "https://api.github.com/users/estebank/repos",
      "events_url": "https://api.github.com/users/estebank/events{/privacy}",
      "received_events_url": "https://api.github.com/users/estebank/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-01-11T01:31:33Z",
    "updated_at": "2019-01-11T01:31:33Z",
    "body": "[The code now compiles, even in stable](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=32b365f55b716f18f1aed4449b9c2203). @arielb1 consequence of NLL?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/453334832/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/454201305",
    "html_url": "https://github.com/rust-lang/rust/issues/10876#issuecomment-454201305",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10876",
    "id": 454201305,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDIwMTMwNQ==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-01-14T23:19:24Z",
    "updated_at": "2019-01-14T23:19:34Z",
    "body": "This looks like it (see also #10520, the infamous copy-vs-move problem). I couldn't find a concrete test for this at a quick look, however.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/454201305/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/454939711",
    "html_url": "https://github.com/rust-lang/rust/issues/10876#issuecomment-454939711",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10876",
    "id": 454939711,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDkzOTcxMQ==",
    "user": {
      "login": "estebank",
      "id": 1606434,
      "node_id": "MDQ6VXNlcjE2MDY0MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/estebank",
      "html_url": "https://github.com/estebank",
      "followers_url": "https://api.github.com/users/estebank/followers",
      "following_url": "https://api.github.com/users/estebank/following{/other_user}",
      "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/estebank/subscriptions",
      "organizations_url": "https://api.github.com/users/estebank/orgs",
      "repos_url": "https://api.github.com/users/estebank/repos",
      "events_url": "https://api.github.com/users/estebank/events{/privacy}",
      "received_events_url": "https://api.github.com/users/estebank/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-01-16T21:01:28Z",
    "updated_at": "2019-01-16T21:01:28Z",
    "body": "@arielb1 should we add a `pass` test, come up with a different case or just close?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/454939711/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/454968072",
    "html_url": "https://github.com/rust-lang/rust/issues/10876#issuecomment-454968072",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10876",
    "id": 454968072,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDk2ODA3Mg==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-01-16T22:27:00Z",
    "updated_at": "2019-01-16T22:27:00Z",
    "body": "I would like to make sure there is a `pass` test somewhere in src/test/ui. I believe there should already be one for a very similar case.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/454968072/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
