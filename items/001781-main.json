{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/1781",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/1781/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/1781/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/1781/events",
  "html_url": "https://github.com/rust-lang/rust/pull/1781",
  "id": 3137026,
  "node_id": "MDExOlB1bGxSZXF1ZXN0Nzk3NTIx",
  "number": 1781,
  "title": "Add support for multiple schedulers",
  "user": {
    "login": "brson",
    "id": 147214,
    "node_id": "MDQ6VXNlcjE0NzIxNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brson",
    "html_url": "https://github.com/brson",
    "followers_url": "https://api.github.com/users/brson/followers",
    "following_url": "https://api.github.com/users/brson/following{/other_user}",
    "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
    "organizations_url": "https://api.github.com/users/brson/orgs",
    "repos_url": "https://api.github.com/users/brson/repos",
    "events_url": "https://api.github.com/users/brson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brson/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 1,
  "created_at": "2012-02-08T07:02:17Z",
  "updated_at": "2014-07-05T19:13:25Z",
  "closed_at": "2012-02-09T01:05:42Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/1781",
    "html_url": "https://github.com/rust-lang/rust/pull/1781",
    "diff_url": "https://github.com/rust-lang/rust/pull/1781.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/1781.patch",
    "merged_at": null
  },
  "body": "This series adds support to the kernel for dynamically adding and removing schedulers then adds a single user-visible function, `task::spawn_sched` for spawning a task into a new scheduler. I have not implemented the full design for first-class schedulers, and think I may let this sit as-is for awhile while we review what we want the `core::task` API to look like (it's quite a mess these days).\n\nFor the most part this is not that interesting, but commits bde9385dc5f207629381d61db7349f92035c40b9, 0f4ca21e9cd26b6b7d8c6d3bfdf07e949aaa985c, and 36d51818838a45906c8471569b60002d39ea28ff make big changes to the scheduler and task lifecycle and synchronization protocols to eliminate races between scheduler and task destruction and allow schedulers to be destroyed while the kernel is running. It's a little mind-bending, with a lot of events happening on various threads, and I probably can't explain how the kernel/scheduler/task_thread/tasks cooperate to shutdown the kernel without tracing through the code, but I left lots of comments.\n\nThis change also breaks `rust_kernel::fail` (the function that kills all tasks) even worse than before. It's very racy, but doesn't break any existing tests.\n\nI'm doing some stress tests now to make sure things are still reliable.\n",
  "closed_by": {
    "login": "brson",
    "id": 147214,
    "node_id": "MDQ6VXNlcjE0NzIxNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brson",
    "html_url": "https://github.com/brson",
    "followers_url": "https://api.github.com/users/brson/followers",
    "following_url": "https://api.github.com/users/brson/following{/other_user}",
    "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
    "organizations_url": "https://api.github.com/users/brson/orgs",
    "repos_url": "https://api.github.com/users/brson/repos",
    "events_url": "https://api.github.com/users/brson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brson/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/1781/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/1781/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
