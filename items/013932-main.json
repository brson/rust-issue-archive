{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/13932",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/13932/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/13932/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/13932/events",
  "html_url": "https://github.com/rust-lang/rust/pull/13932",
  "id": 32765736,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTU0NzA1OTQ=",
  "number": 13932,
  "title": "Implement fallbacks for functions unavailable in older versions of Windows",
  "user": {
    "login": "MrAlert",
    "id": 148235,
    "node_id": "MDQ6VXNlcjE0ODIzNQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/148235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MrAlert",
    "html_url": "https://github.com/MrAlert",
    "followers_url": "https://api.github.com/users/MrAlert/followers",
    "following_url": "https://api.github.com/users/MrAlert/following{/other_user}",
    "gists_url": "https://api.github.com/users/MrAlert/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MrAlert/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MrAlert/subscriptions",
    "organizations_url": "https://api.github.com/users/MrAlert/orgs",
    "repos_url": "https://api.github.com/users/MrAlert/repos",
    "events_url": "https://api.github.com/users/MrAlert/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MrAlert/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 6,
  "created_at": "2014-05-04T10:16:21Z",
  "updated_at": "2014-06-16T09:41:59Z",
  "closed_at": "2014-05-12T17:32:02Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/13932",
    "html_url": "https://github.com/rust-lang/rust/pull/13932",
    "diff_url": "https://github.com/rust-lang/rust/pull/13932.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/13932.patch",
    "merged_at": "2014-05-12T17:32:03Z"
  },
  "body": "This addresses #12842 by offering fallback implementations for functions that aren't available.\n\nIn this case, as Windows XP simply doesn't support symbolic links at all, the fallbacks simply return an error code indicating that the function hasn't been implemented. This should allow programs written in Rust to run under XP while still offering full support for symbolic links under newer versions of Windows with the same binary, but due to LLVM using stderror_s(), which isn't available in msvcrt.dll in XP, rustc itself will not.\n\nThe fallback implementation is as follows:\n\nCalling the function instead calls to a mutable function pointer. This in and of itself would not constitute a performance hit because DLL calls are implemented in a similar manner (see Import Address Table). The function pointer initially points to a thunk which tries to get the address of the associated function and write it back to the function pointer. If it fails to find the function, it instead writes the address to a fallback. As this operation is idempotent, reading and writing the pointer simply needs to be atomic. Subsequent calls to the function should be as fast as any other DLL call, as the pointer will then point directly to either the correct function or a fallback.\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/13932/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/13932/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
