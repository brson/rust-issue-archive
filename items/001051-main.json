{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/1051",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/1051/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/1051/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/1051/events",
  "html_url": "https://github.com/rust-lang/rust/pull/1051",
  "id": 2000240,
  "node_id": "MDExOlB1bGxSZXF1ZXN0NDE3MTc0",
  "number": 1051,
  "title": "Bare functions, typesafe spawn, function subtyping",
  "user": {
    "login": "brson",
    "id": 147214,
    "node_id": "MDQ6VXNlcjE0NzIxNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brson",
    "html_url": "https://github.com/brson",
    "followers_url": "https://api.github.com/users/brson/followers",
    "following_url": "https://api.github.com/users/brson/following{/other_user}",
    "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
    "organizations_url": "https://api.github.com/users/brson/orgs",
    "repos_url": "https://api.github.com/users/brson/repos",
    "events_url": "https://api.github.com/users/brson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brson/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 2,
  "created_at": "2011-10-20T00:35:48Z",
  "updated_at": "2014-07-05T19:12:50Z",
  "closed_at": "2011-10-21T01:34:10Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/1051",
    "html_url": "https://github.com/rust-lang/rust/pull/1051",
    "diff_url": "https://github.com/rust-lang/rust/pull/1051.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/1051.patch",
    "merged_at": null
  },
  "body": "This series does a lot of things to implement bare functions. It results in some things being more complicated and/or less pleasant to use, so I'd like to provide an opportunity to review it before I push.\n\nAt the end of the series, `fn` is a bare function, `fn@` is a shared function and `lambda` is sugar for `fn@`.\n\n385e595c introduces a spawn function that takes a bare function. This commit is still using a temporary `fn#` syntax for bare functions. Spawning now looks like\n\n```\nspawn(my_data, fn#(my_data: my_data_type) { /* work */ });\n```\n\n788be700 creates a subtyping relationship between function types, where `fn# < fn@ < block`. This is the only subtyping in the language besides `mutable?`, and the implementation is currently trivial as I've left the implementation of bare functions the same as closures.\n\n7c814305 makes the big conversion from the existing `fn` to bare functions and shared closures. In the process many higher-order functions had to be changed to take `fn@` and many generic functions had to be instantiated with bind (to convert them to a `fn@`).\n\nTODO:\n- After snapshotting, the temorary syntax needs to be removed.\n- We need to make a decision about `fn@/lambda` and `fn&/block`, whether we want one or both forms.\n- Spawn is still ultimately implemented in terms of shared closures, but that implementation is unexported. Spawn should be rewritten.\n- We need to be able to instantiate generic bare functions, but that requires monomorphising.\n- Remove the environment parameter from bare functions and give them a single-word representation.\n",
  "closed_by": {
    "login": "brson",
    "id": 147214,
    "node_id": "MDQ6VXNlcjE0NzIxNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brson",
    "html_url": "https://github.com/brson",
    "followers_url": "https://api.github.com/users/brson/followers",
    "following_url": "https://api.github.com/users/brson/following{/other_user}",
    "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
    "organizations_url": "https://api.github.com/users/brson/orgs",
    "repos_url": "https://api.github.com/users/brson/repos",
    "events_url": "https://api.github.com/users/brson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brson/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/1051/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/1051/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
