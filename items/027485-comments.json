[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/127754035",
    "html_url": "https://github.com/rust-lang/rust/issues/27485#issuecomment-127754035",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27485",
    "id": 127754035,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNzc1NDAzNQ==",
    "user": {
      "login": "marcusklaas",
      "id": 1255413,
      "node_id": "MDQ6VXNlcjEyNTU0MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1255413?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marcusklaas",
      "html_url": "https://github.com/marcusklaas",
      "followers_url": "https://api.github.com/users/marcusklaas/followers",
      "following_url": "https://api.github.com/users/marcusklaas/following{/other_user}",
      "gists_url": "https://api.github.com/users/marcusklaas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marcusklaas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marcusklaas/subscriptions",
      "organizations_url": "https://api.github.com/users/marcusklaas/orgs",
      "repos_url": "https://api.github.com/users/marcusklaas/repos",
      "events_url": "https://api.github.com/users/marcusklaas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marcusklaas/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-04T20:37:21Z",
    "updated_at": "2015-08-04T20:37:21Z",
    "body": "Ran into this when running a fauly tt muncher with ~100 items. We can now compete with C++ in the compiler spew area as well! :-P\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/127754035/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/128850638",
    "html_url": "https://github.com/rust-lang/rust/issues/27485#issuecomment-128850638",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27485",
    "id": 128850638,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyODg1MDYzOA==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-07T22:45:53Z",
    "updated_at": "2015-08-07T22:45:53Z",
    "body": "Ran into this while demonstrating why you need raw pointers to do a singly-linked-queue:\n\n``` rust\npub struct List<'a, T: 'a> {\n    head: Link<T>,\n    tail: Option<&'a mut Node<T>>, // NEW!\n}\n\ntype Link<T> = Option<Box<Node<T>>>;\n\nstruct Node<T> {\n    elem: T,\n    next: Link<T>,\n}\n\nimpl<'a, T> List<'a, T> {\n    pub fn new() -> Self {\n        List { head: None, tail: None }\n    }\n\n    pub fn push(&'a mut self, elem: T) {\n        let new_tail = Box::new(Node {\n            elem: elem,\n            // When you push onto the tail, your next is always None\n            next: None,\n        });\n\n        // Put the box in the right place, and then grab a reference to its Node\n        let new_tail = match self.tail.take() {\n            Some(old_tail) => {\n                // If the old tail existed, update it to point to the new tail\n                old_tail.next = Some(new_tail);\n                old_tail.next.as_mut().map(|node| &mut **node)\n            }\n            None => {\n                // Otherwise, update the head to point to it\n                self.head = Some(new_tail);\n                self.head.as_mut().map(|node| &mut **node)\n            }\n        };\n\n        self.tail = new_tail;\n    }\n\n    pub fn pop(&'a mut self) -> Option<T> {\n        self.head.take().map(|head| {\n            let head = *head;\n            self.head = head.next;\n\n            if self.head.is_none() {\n                self.tail = None;\n            }\n\n            head.elem\n        })\n    }\n}\n\nmod test {\n    use super::List;\n    #[test]\n    fn basics() {\n        let mut list = List::new();\n\n        // Check empty list behaves right\n        assert_eq!(list.pop(), None);\n\n        // Populate list\n        list.push(1);\n        list.push(2);\n        list.push(3);\n\n        // Check normal removal\n        assert_eq!(list.pop(), Some(1));\n        assert_eq!(list.pop(), Some(2));\n\n        // Push some more just to make sure nothing's corrupted\n        list.push(4);\n        list.push(5);\n\n        // Check normal removal\n        assert_eq!(list.pop(), Some(3));\n        assert_eq!(list.pop(), Some(4));\n\n        // Check exhaustion\n        assert_eq!(list.pop(), Some(5));\n        assert_eq!(list.pop(), None);\n    }\n}\n```\n\n66 Borrow check errors in this test.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/128850638/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
