{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/8729",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/8729/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/8729/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/8729/events",
  "html_url": "https://github.com/rust-lang/rust/pull/8729",
  "id": 18500937,
  "node_id": "MDExOlB1bGxSZXF1ZXN0NzgzNzI0OA==",
  "number": 8729,
  "title": "Rewrite pass management with LLVM",
  "user": {
    "login": "thestinger",
    "id": 1505226,
    "node_id": "MDQ6VXNlcjE1MDUyMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/thestinger",
    "html_url": "https://github.com/thestinger",
    "followers_url": "https://api.github.com/users/thestinger/followers",
    "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
    "organizations_url": "https://api.github.com/users/thestinger/orgs",
    "repos_url": "https://api.github.com/users/thestinger/repos",
    "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/thestinger/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2013-08-24T03:20:55Z",
  "updated_at": "2014-06-12T16:12:08Z",
  "closed_at": "2013-08-24T03:55:41Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/8729",
    "html_url": "https://github.com/rust-lang/rust/pull/8729",
    "diff_url": "https://github.com/rust-lang/rust/pull/8729.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/8729.patch",
    "merged_at": null
  },
  "body": "Beforehand, it was unclear whether rust was performing the \"recommended set\" of\noptimizations provided by LLVM for code. This commit changes the way we run\npasses to closely mirror that of clang, which in theory does it correctly. The\nnotable changes include:\n- Passes are no longer explicitly added one by one. This would be difficult to\n  keep up with as LLVM changes and we don't guaranteed always know the best\n  order in which to run passes\n- Passes are now managed by LLVM's PassManagerBuilder object. This is then used\n  to populate the various pass managers run.\n- We now run both a FunctionPassManager and a module-wide PassManager. This is\n  what clang does, and I presume that we _may_ see a speed boost from the\n  module-wide passes just having to do less work. I have no measured this.\n- The codegen pass manager has been extracted to its own separate pass manager\n  to not get mixed up with the other passes\n- All pass managers now include passes for target-specific data layout and\n  analysis passes\n\nSome new features include:\n- You can now print all passes being run with `-Z print-llvm-passes`\n- When specifying passes via `--passes`, the passes are now appended to the\n  default list of passes instead of overwriting them.\n- The output of `--passes list` is now generated by LLVM instead of maintaining\n  a list of passes ourselves\n- Loop vectorization is turned on by default as an optimization pass and can be\n  disabled with `-Z no-vectorize-loops`\n",
  "closed_by": {
    "login": "thestinger",
    "id": 1505226,
    "node_id": "MDQ6VXNlcjE1MDUyMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/thestinger",
    "html_url": "https://github.com/thestinger",
    "followers_url": "https://api.github.com/users/thestinger/followers",
    "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
    "organizations_url": "https://api.github.com/users/thestinger/orgs",
    "repos_url": "https://api.github.com/users/thestinger/repos",
    "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/thestinger/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/8729/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/8729/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
