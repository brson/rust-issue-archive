{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/16047",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16047/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16047/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16047/events",
  "html_url": "https://github.com/rust-lang/rust/pull/16047",
  "id": 38898595,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTg5NzIxNjc=",
  "number": 16047,
  "title": "WIP comparators for pqueue",
  "user": {
    "login": "Gankra",
    "id": 1136864,
    "node_id": "MDQ6VXNlcjExMzY4NjQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Gankra",
    "html_url": "https://github.com/Gankra",
    "followers_url": "https://api.github.com/users/Gankra/followers",
    "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
    "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
    "organizations_url": "https://api.github.com/users/Gankra/orgs",
    "repos_url": "https://api.github.com/users/Gankra/repos",
    "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Gankra/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 7,
  "created_at": "2014-07-28T15:00:22Z",
  "updated_at": "2014-08-05T21:33:20Z",
  "closed_at": "2014-08-05T21:33:20Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/16047",
    "html_url": "https://github.com/rust-lang/rust/pull/16047",
    "diff_url": "https://github.com/rust-lang/rust/pull/16047.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/16047.patch",
    "merged_at": null
  },
  "body": "Rough draft of implementing comparators. WIP, just looking for general design discussion. Do not merge.\n\nNotes:\n- First part of the file should really be moved to a separate module, maybe where `Ord` is defined? Realistically I'd like to migrate a lot of std away from requiring `Ord`, and instead requiring a `Comparator` (the former being trivial to move to the latter with `NaturalOrdering` and `RevOrdering`).\n- I tried using `default_type_params`, but it never seemed to do anything meaningful.\n- I tried making comparators impl `Fn`, but as far as I can tell, the type they'd have to impl would be be `Fn<(&T, &T), Ordering>`, but the references need to have lifetimes, and I see no sane way to do that generically? Just feeding in 'a,'b everywhere certainly didn't work.\n- I made two \"I don't care about comparators\" constructors `min_heap` and `max_heap` as simply public functions, because they didn't make a lot of sense as static methods.\n- I made `max_heap` the default behaviour to match previous behaviour, but now that they're trivially interchangeable, I recommend `min_heap` be the default, since that matches sorting more closely.\n- Comparators are currently overengineered for this use case, (they could just have a single `lt` method), but again I'd like to refactor them out into a separate module and use them more everywhere. In that context they should return a proper `Ord`. Might be some overhead right now from doing `cmp(x,y) == Greater`, rather than `gt(x, y)`.\n- Comparators could also provide `lt`/`gt`/`eq`/`neq` automatically; desirable? \n- Weirdly `Extend` is demanding that the comparator be `Default`, even though I see no reason for this to be the case.\n- Rust seems very bad at inferring the type the comparator wraps, even when it should be unambiguous from context; see: `tests.test_iterator`\n- Could introduce even more combinatoric explosion in the constructors with e.g. `from_vec_natural` if desired.\n- Tests have been rewritten to pass, but no new tests have been added. Similarly docs have not been updated. Didn't consider it a valuable use of time since this is WIP.\n",
  "closed_by": {
    "login": "huonw",
    "id": 1203825,
    "node_id": "MDQ6VXNlcjEyMDM4MjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/huonw",
    "html_url": "https://github.com/huonw",
    "followers_url": "https://api.github.com/users/huonw/followers",
    "following_url": "https://api.github.com/users/huonw/following{/other_user}",
    "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
    "organizations_url": "https://api.github.com/users/huonw/orgs",
    "repos_url": "https://api.github.com/users/huonw/repos",
    "events_url": "https://api.github.com/users/huonw/events{/privacy}",
    "received_events_url": "https://api.github.com/users/huonw/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/16047/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16047/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
