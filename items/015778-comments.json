[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69669790",
    "html_url": "https://github.com/rust-lang/rust/issues/15778#issuecomment-69669790",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15778",
    "id": 69669790,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NjY5Nzkw",
    "user": {
      "login": "kmcallister",
      "id": 444997,
      "node_id": "MDQ6VXNlcjQ0NDk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/444997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kmcallister",
      "html_url": "https://github.com/kmcallister",
      "followers_url": "https://api.github.com/users/kmcallister/followers",
      "following_url": "https://api.github.com/users/kmcallister/following{/other_user}",
      "gists_url": "https://api.github.com/users/kmcallister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kmcallister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kmcallister/subscriptions",
      "organizations_url": "https://api.github.com/users/kmcallister/orgs",
      "repos_url": "https://api.github.com/users/kmcallister/repos",
      "events_url": "https://api.github.com/users/kmcallister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kmcallister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-12T23:44:23Z",
    "updated_at": "2015-01-12T23:44:23Z",
    "body": "Is this true for attributes in general? Or only for attributes which are themselves syntax extensions (item decorators / modifiers)?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69669790/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69726285",
    "html_url": "https://github.com/rust-lang/rust/issues/15778#issuecomment-69726285",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15778",
    "id": 69726285,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NzI2Mjg1",
    "user": {
      "login": "Kimundi",
      "id": 2903206,
      "node_id": "MDQ6VXNlcjI5MDMyMDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2903206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kimundi",
      "html_url": "https://github.com/Kimundi",
      "followers_url": "https://api.github.com/users/Kimundi/followers",
      "following_url": "https://api.github.com/users/Kimundi/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kimundi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kimundi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kimundi/subscriptions",
      "organizations_url": "https://api.github.com/users/Kimundi/orgs",
      "repos_url": "https://api.github.com/users/Kimundi/repos",
      "events_url": "https://api.github.com/users/Kimundi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kimundi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-13T10:44:59Z",
    "updated_at": "2015-01-13T10:44:59Z",
    "body": "Its true for attributes in general, its only turning into an issue if a attribute comes from a `extern crate` though.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69726285/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76816115",
    "html_url": "https://github.com/rust-lang/rust/issues/15778#issuecomment-76816115",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15778",
    "id": 76816115,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2ODE2MTE1",
    "user": {
      "login": "kmcallister",
      "id": 444997,
      "node_id": "MDQ6VXNlcjQ0NDk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/444997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kmcallister",
      "html_url": "https://github.com/kmcallister",
      "followers_url": "https://api.github.com/users/kmcallister/followers",
      "following_url": "https://api.github.com/users/kmcallister/following{/other_user}",
      "gists_url": "https://api.github.com/users/kmcallister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kmcallister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kmcallister/subscriptions",
      "organizations_url": "https://api.github.com/users/kmcallister/orgs",
      "repos_url": "https://api.github.com/users/kmcallister/repos",
      "events_url": "https://api.github.com/users/kmcallister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kmcallister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-02T20:44:05Z",
    "updated_at": "2015-03-02T20:44:05Z",
    "body": "Attributes don't come from anywhere. They're just nested key/value data that any part of the compiler can query by name.  There's no central registration of attributes.\n\nAlso, plugin loading happens after a full parse and before any syntax expansion. So I'm not sure why the order of a plugin and some attribute the plugin will later check would matter.\n\nCan you give a specific example of something you'd like to do with crate attributes that you cannot?\n\nFor example, this plugin:\n\n``` rust\n#![feature(plugin_registrar)]\n#![feature(box_syntax)]\n\nextern crate syntax;\n#[macro_use] extern crate rustc;\n\nuse syntax::{ast, attr};\nuse rustc::lint::{Context, LintPass, LintPassObject, LintArray};\nuse rustc::plugin::Registry;\n\ndeclare_lint!(CRATE_NOT_OKAY, Warn, \"crate not marked with #![crate_okay]\");\n\nstruct Pass;\n\nimpl LintPass for Pass {\n    fn get_lints(&self) -> LintArray {\n        lint_array!(CRATE_NOT_OKAY)\n    }\n\n    fn check_crate(&mut self, cx: &Context, krate: &ast::Crate) {\n        if !attr::contains_name(&krate.attrs, \"crate_okay\") {\n            cx.span_lint(CRATE_NOT_OKAY, krate.span,\n                         \"crate is not marked with #![crate_okay]\");\n        }\n    }\n}\n\n#[plugin_registrar]\npub fn plugin_registrar(reg: &mut Registry) {\n    reg.register_lint_pass(box Pass as LintPassObject);\n}\n```\n\nworks as expected:\n\n```\n$ cat /tmp/foo.rs\n#![feature(plugin, custom_attribute)]\n#![plugin(lint_for_crate)]\n\nfn main() { }\n\n$ rustc -C prefer-dynamic --crate-type dylib lint_for_crate.rs\n\n$ rustc -D crate-not-okay -L . /tmp/foo.rs  \n/tmp/foo.rs:1:1: 4:13 error: crate is not marked with #![crate_okay] [-D crate-not-okay]  \n/tmp/foo.rs:1 #![feature(plugin, custom_attribute)]  \n/tmp/foo.rs:2 #![plugin(lint_for_crate)]  \n/tmp/foo.rs:3  \n/tmp/foo.rs:4 fn main() { }  \nerror: aborting due to previous error  \n\n$ sed -i '3i#![crate_okay]' /tmp/foo.rs\n$ rustc -D crate-not-okay -L . /tmp/foo.rs  \n$ echo $?\n0\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76816115/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76829078",
    "html_url": "https://github.com/rust-lang/rust/issues/15778#issuecomment-76829078",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15778",
    "id": 76829078,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2ODI5MDc4",
    "user": {
      "login": "Kimundi",
      "id": 2903206,
      "node_id": "MDQ6VXNlcjI5MDMyMDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2903206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kimundi",
      "html_url": "https://github.com/Kimundi",
      "followers_url": "https://api.github.com/users/Kimundi/followers",
      "following_url": "https://api.github.com/users/Kimundi/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kimundi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kimundi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kimundi/subscriptions",
      "organizations_url": "https://api.github.com/users/Kimundi/orgs",
      "repos_url": "https://api.github.com/users/Kimundi/repos",
      "events_url": "https://api.github.com/users/Kimundi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kimundi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-02T21:28:38Z",
    "updated_at": "2015-03-02T21:28:38Z",
    "body": "Hm, it might be that since I opened this issue the plugin system changed in a way that makes this work. I'll have to check with the code that had this issue...\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76829078/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76980415",
    "html_url": "https://github.com/rust-lang/rust/issues/15778#issuecomment-76980415",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15778",
    "id": 76980415,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2OTgwNDE1",
    "user": {
      "login": "kmcallister",
      "id": 444997,
      "node_id": "MDQ6VXNlcjQ0NDk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/444997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kmcallister",
      "html_url": "https://github.com/kmcallister",
      "followers_url": "https://api.github.com/users/kmcallister/followers",
      "following_url": "https://api.github.com/users/kmcallister/following{/other_user}",
      "gists_url": "https://api.github.com/users/kmcallister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kmcallister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kmcallister/subscriptions",
      "organizations_url": "https://api.github.com/users/kmcallister/orgs",
      "repos_url": "https://api.github.com/users/kmcallister/repos",
      "events_url": "https://api.github.com/users/kmcallister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kmcallister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-03T16:32:29Z",
    "updated_at": "2015-03-03T16:32:29Z",
    "body": "I added a regression test for the original issue. Please open a new ticket if you find something that's still broken :)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/76980415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
