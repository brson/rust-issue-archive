[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39661432",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-39661432",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 39661432,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjYxNDMy",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-06T07:43:58Z",
    "updated_at": "2014-04-06T07:43:58Z",
    "body": "r? @alexcrichton \n\nI know you aren't sold on this approach, but I think libnative needs to preserve its intended semantics of doing blocking I/O, and I don't think there's a better solution.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39661432/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39678138",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-39678138",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 39678138,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njc4MTM4",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-06T19:39:20Z",
    "updated_at": "2014-04-06T19:39:20Z",
    "body": "@alexcrichton r? I added comments and tweaked it so that if `O_NONBLOCK` wasn't set in the `F_GETFL` we bail out.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39678138/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39686872",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-39686872",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 39686872,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njg2ODcy",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-06T23:30:15Z",
    "updated_at": "2014-04-06T23:30:15Z",
    "body": "@alexcrichton I've changed the errno case to just re-call `read()`/`write()` and return. But I firmly believe the loop is necessary.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39686872/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39696555",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-39696555",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 39696555,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njk2NTU1",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-07T05:07:30Z",
    "updated_at": "2014-04-07T05:07:37Z",
    "body": "I am trying to reproduce this, and I am unable to with your test. I would like to survey what happens in other languages such as ruby/python.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39696555/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39696604",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-39696604",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 39696604,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njk2NjA0",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-07T05:09:21Z",
    "updated_at": "2014-04-07T05:09:21Z",
    "body": "My test reproduces 100% of the time on OS X. I haven't tried other platforms. I am also curious as to how ruby/python handles this, although I'm not sure that really makes a difference.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39696604/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39700483",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-39700483",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 39700483,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzAwNDgz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-07T06:49:33Z",
    "updated_at": "2014-04-07T06:49:33Z",
    "body": "I am very worried about the size of the hammer you are applying to this problem. This is making a significant number of assumptions which are usually dangerous to make when dealing with tricky situations such as this. I do not want to take this lightly.\n\nI am quite surprised that this is only an error on OSX, and not an error on linux. I investigated into other languages to see what other runtimes do:\n- ruby - works ok. I'm not sure how, but there's a few `ioctl` calls which may be involved\n- C++ (using `cout`) - prints 7 times, sees EAGAIN, and stops printing (but doesn't throw an exception or anything), the program exits normally\n- Go - same as C++, prints 7 times and then stops printing, no error is thrown\n- D - throws an exception\n- python - throws an exception\n- haskell - works ok, I am seeing invocations of `select` next to every call to write. I presume this is because they have a libuv-like event loop driving their I/O (which solves this problem for free)\n\nThis data does not convince me that the PR here is the right course of action to take. It appears _no one_ handles this in a libnative-like setting except for ruby.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39700483/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39701076",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-39701076",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 39701076,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzAxMDc2",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-07T07:02:12Z",
    "updated_at": "2014-04-07T07:02:12Z",
    "body": "@alexcrichton Those results aren't surprising to me. C++ is behaving correctly here, AFAIK (I don't believe iostream makes any guarantee about being blocking, so obeying the `O_NONBLOCK` makes sense). Go is the only one here that I think is actually wrong, I think Go should be doing the same thing I'm trying to do here (because AFAIK Go does not expose the underlying fd and instead just exposes a set of behaviors).\n\nRust's libnative is exposing a blocking I/O API. As such, clients of this API reasonably expect that they never have to deal with `EAGAIN` and `EWOULDBLOCK` and therefore any errors they see are legitimate errors. What's more, even if they do look for those errors, _there's no API to handle them_. We don't expose any equivalent to `select()` or `fcntl()` and so the only two possible responses are either busy-waiting on the I/O (which is a _terrible_ idea) or treating it as a hard error (which sucks).\n\nI do not believe that toggling `O_NONBLOCK` off when we expected a blocking operation is a hammer. I believe it is actually a very targeted approach that is explicitly trying to adjust the state of the file descriptor into that which we want it to be, namely, blocking. This is no more a hammer than automatically retrying when we get `EINTR` is.\n\nAlso, I am very surprised you're not seeing this issue on Linux. I would have expected Linux to behave in the same fashion as OS X.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39701076/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39701640",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-39701640",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 39701640,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzAxNjQw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-07T07:12:51Z",
    "updated_at": "2014-04-07T07:12:51Z",
    "body": "> This is no more a hammer than automatically retrying when we get EINTR is.\n\nI do not agree with this. I can precisely explain to why EINTR occurs, and why retrying will _always_ make progress. I cannot do the same for EAGAIN and flipping flags which can be modified/viewed from other processes. EINTR is purely a local solution, while modifying the nonblocking flag is globally affected.\n\n> What's more, even if they do look for those errors, there's no API to handle them\n\nLack of APIs for this does not justify this solution in my opinion. This is quite a rare error to see, and apis for select and such are planned for the future (and possibly with fcntl).\n\nYou have stated that these results are not surprising, and you believe that Rust should differ from essentially all of them. Every one of these languages is providing a blocking interface to I/O (just like libnative), yet none of them handle this error (except ruby). I will need further convincing that we need to travel down this path flipping nonblocking flags.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39701640/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39701918",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-39701918",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 39701918,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzAxOTE4",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-07T07:18:04Z",
    "updated_at": "2014-04-07T07:18:04Z",
    "body": "@alexcrichton Ah hah! Linux _does_ reproduce this, it just has a much higher internal buffer. I'm able to write 64k on Linux before it exhausts itself, instead of the 8k on OS X.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39701918/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39702168",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-39702168",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 39702168,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzAyMTY4",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-07T07:22:43Z",
    "updated_at": "2014-04-07T07:22:43Z",
    "body": "@alexcrichton I rebased and tweaked the test to write 1MB instead of 32kB. I haven't run this precise test on linux (because I'm not building rustc from source there) but the equivalent code that I based this test on fails on linux with the same \"Resource temporarily unavailable\" error.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39702168/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39702441",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-39702441",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 39702441,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzAyNDQx",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-07T07:27:49Z",
    "updated_at": "2014-04-07T07:27:49Z",
    "body": "> I do not agree with this. I can precisely explain to why EINTR occurs, and why retrying will always make progress. I cannot do the same for EAGAIN and flipping flags which can be modified/viewed from other processes. EINTR is purely a local solution, while modifying the nonblocking flag is globally affected.\n\nEINTR is because your call was interrupted. Retrying makes absolutely _no_ guarantee that the call will not be interrupted a second time.\n\nEAGAIN/EWOULDBLOCK means the fd is in non-blocking mode and turning that off makes _no_ guarantee that the fd will not be set back to nonblocking by another thread or, in the case of TTYs/FIFIOs, another process, before you reissue the read/write call.\n\nThe situations are identical. You just understand the first a lot better than the second (and the first is likely to be a lot more common). In both cases, progress is made and you retry.\n\n> Lack of APIs for this does not justify this solution in my opinion. This is quite a rare error to see, and apis for select and such are planned for the future (and possibly with fcntl).\n\nIt's an error that _has no solution_ without this change. Being rare does not make it meaningless. This whole problem was discovered by someone who failed to compile Rust because rustc hit the error while emitting build output. When someone is hitting the error while compiling Rust itself, without doing anything special, I think that warrants fixing.\n\nI stated that those results don't surprise me, partially because I believe at least some of those languages do in fact expose a way to tweak the non-blocking nature of I/O, and partially because I expect that most language developers haven't actually run into this problem or given any thought to it. But while I'm not surprised by those results, I don't necessarily think they're _correct_. If a given language exposes a way to get/set the O_NONBLOCK flag on its I/O primitives, then letting the caller handle it seems reasonable. If a language does not (like Rust), then letting the caller handle it is absolutely wrong because the caller _can't_. And no, I don't think this is an argument for Rust exposing a way to get/set the non-blocking flag on its I/O. I think we just need to handle the case properly.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39702441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/41318254",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-41318254",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 41318254,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzE4MjU0",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-24T18:55:57Z",
    "updated_at": "2014-04-24T18:55:57Z",
    "body": "This is not fixed. #13619 may fix a common reproduction scenario, but the underlying problem still exists and can be reproduced without libgreen's involvement.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/41318254/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/41339607",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-41339607",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 41339607,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzM5NjA3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-24T22:18:37Z",
    "updated_at": "2014-04-24T22:18:37Z",
    "body": "As [I commented](https://github.com/mozilla/rust/issues/13336#issuecomment-41339195) the root cause of this bug had noting to with libnative and this is a hugely invasive solution (it was the source of the bugs in libuv).\n\nI personally do not believe that this is something which should be handled by libnative.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/41339607/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/41340158",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-41340158",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 41340158,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzQwMTU4",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-24T22:24:54Z",
    "updated_at": "2014-04-24T22:25:06Z",
    "body": "I don't think you understand what actually causes this bug. The root cause of this bug is the way file descriptors work in linux/unix for various file types (character devices and FIFOs, not sure about others). I've [commented in #13336](https://github.com/mozilla/rust/issues/13336#issuecomment-41339901) about why I feel this bug still needs to be handled in libnative.\n\nFor the sake of sanity, I suggest any further discussion be restricted to #13336 so we don't keep copying information back and forth.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/41340158/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42148381",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-42148381",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 42148381,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMTQ4Mzgx",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-04T22:38:53Z",
    "updated_at": "2014-05-04T22:38:53Z",
    "body": "There isn't consensus that this is actually a bug, so I think it makes sense to leave this closed until it's agreed that there's something to fix here. I don't know if something this small deserves an RFC, but certainly seems controversial enough to merit one.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42148381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/53327004",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-53327004",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 53327004,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMzI3MDA0",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-25T20:41:27Z",
    "updated_at": "2014-08-25T20:41:27Z",
    "body": "This topic came up again in IRC. It's still an issue. servo/servo#2601 is likely a manifestation of it. This PR almost certainly needs a rebase, or maybe even a rewrite, at this point, but I'd like it to be considered again.\n\nThe fundamental point here is libnative makes guarantees about blocking behavior, and these guarantees are violated if the fd is `O_NONBLOCK`. Since fds that refer to certain types of file objects (notably, FIFOs and terminal devices) can have `O_NONBLOCK` toggled by a separate process, and this has nothing to do with sharing fds with children or inheriting them from parents, this is not something that the Rust program, or anything under the programmer's control, can deal with. The only solution that actually works is for libnative to toggle `O_NONBLOCK` off again whenever it hits this situation.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/53327004/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/53330345",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-53330345",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 53330345,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMzMwMzQ1",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-25T21:01:24Z",
    "updated_at": "2014-08-25T21:43:39Z",
    "body": "As mentioned by me several times in #13336, an alternative approach is to fall back to select() on `EAGAIN`/`EWOULDBLOCK`. Nobody voiced any support for that idea. But I'm willing to rewrite this PR for that approach if it would get this fixed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/53330345/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54766280",
    "html_url": "https://github.com/rust-lang/rust/pull/13355#issuecomment-54766280",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13355",
    "id": 54766280,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NzY2Mjgw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-08T00:21:57Z",
    "updated_at": "2014-09-08T00:21:57Z",
    "body": "Closing due to inactivity (13 days). I would recommend holding off until the libnative redesign has landed at which point it may be much clearer how to deal with this.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54766280/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
