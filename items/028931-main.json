{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/28931",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/28931/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/28931/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/28931/events",
  "html_url": "https://github.com/rust-lang/rust/pull/28931",
  "id": 110717515,
  "node_id": "MDExOlB1bGxSZXF1ZXN0NDczMDczMzk=",
  "number": 28931,
  "title": "Refactored `check::autoderef` in `librustc_typeck` to allow additional behaviour upon reaching the recursion limit",
  "user": {
    "login": "skeleten",
    "id": 1022884,
    "node_id": "MDQ6VXNlcjEwMjI4ODQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1022884?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/skeleten",
    "html_url": "https://github.com/skeleten",
    "followers_url": "https://api.github.com/users/skeleten/followers",
    "following_url": "https://api.github.com/users/skeleten/following{/other_user}",
    "gists_url": "https://api.github.com/users/skeleten/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/skeleten/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/skeleten/subscriptions",
    "organizations_url": "https://api.github.com/users/skeleten/orgs",
    "repos_url": "https://api.github.com/users/skeleten/repos",
    "events_url": "https://api.github.com/users/skeleten/events{/privacy}",
    "received_events_url": "https://api.github.com/users/skeleten/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "nikomatsakis",
    "id": 155238,
    "node_id": "MDQ6VXNlcjE1NTIzOA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nikomatsakis",
    "html_url": "https://github.com/nikomatsakis",
    "followers_url": "https://api.github.com/users/nikomatsakis/followers",
    "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
    "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
    "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
    "repos_url": "https://api.github.com/users/nikomatsakis/repos",
    "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2015-10-09T18:57:31Z",
  "updated_at": "2015-10-24T16:34:02Z",
  "closed_at": "2015-10-24T16:34:02Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/28931",
    "html_url": "https://github.com/rust-lang/rust/pull/28931",
    "diff_url": "https://github.com/rust-lang/rust/pull/28931.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/28931.patch",
    "merged_at": null
  },
  "body": "Fixes bug #19509 \nIn this bug, it relied for the `autoderef` method to terminate once it reaches a non-deref-able type and collecting all types before selecting the appropiate type.\nHowever, if there were cycles in the deref-types this would never happen and instead the function would hit its recursion limit resulting in an error, even if an apropiate type could've been found within the recursion limit. \n\nThis change refactores `autoderef` into another function `autoderef_with_recursion_option` and adding an additonal parameter describing the behaviour upon reaching the recursion limit. \nThe `autoderef` function calls `autoderef_with_recursion_option` with the default behaviour (error gracefully) while the problemsome function calls it with an option allowing it to not error, but return the last found type.\n\nAnother approach would've been to detect cycles directly by comparing it to a list of already checked types, however this would most likely have added more overhead.\n",
  "closed_by": {
    "login": "skeleten",
    "id": 1022884,
    "node_id": "MDQ6VXNlcjEwMjI4ODQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1022884?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/skeleten",
    "html_url": "https://github.com/skeleten",
    "followers_url": "https://api.github.com/users/skeleten/followers",
    "following_url": "https://api.github.com/users/skeleten/following{/other_user}",
    "gists_url": "https://api.github.com/users/skeleten/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/skeleten/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/skeleten/subscriptions",
    "organizations_url": "https://api.github.com/users/skeleten/orgs",
    "repos_url": "https://api.github.com/users/skeleten/repos",
    "events_url": "https://api.github.com/users/skeleten/events{/privacy}",
    "received_events_url": "https://api.github.com/users/skeleten/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/28931/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/28931/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
