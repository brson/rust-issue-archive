[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/159010931",
    "html_url": "https://github.com/rust-lang/rust/issues/29997#issuecomment-159010931",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29997",
    "id": 159010931,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1OTAxMDkzMQ==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-23T17:53:51Z",
    "updated_at": "2015-11-23T17:53:51Z",
    "body": "Minified:\n\n``` Rust\ntrait Mirror { type Image; }\nimpl<T> Mirror for T { type Image = T; }\n\nfn test<L,T>(l: L) where L: FnOnce(Option<<&T as Mirror>::Image>),\n                         for<'a> &'a T: Mirror\n{ l(None); }\nfn main() {\n    test::<_,u8>(|_| {});\n}\n```\n\n@nikomatsakis @eddyb : why is `fulfill_obligation` taking a `PolyTraitRef` rather than a regular `TraitRef`?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/159010931/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/173970236",
    "html_url": "https://github.com/rust-lang/rust/issues/29997#issuecomment-173970236",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29997",
    "id": 173970236,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3Mzk3MDIzNg==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-22T16:33:28Z",
    "updated_at": "2016-01-22T16:33:28Z",
    "body": "@arielb1 \n\nok, finally getting to some of my older notifications, sorry. An interesting question. Digging through the codebase, I see that there is only one call -- `get_vtable` -- where the generality of taking a polytraitref is used. But it makes sense there, no? An object type can be something like `Box<Fn(&i32)>`, after all.\n\nLet me look into your minified example a bit.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/173970236/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/174035345",
    "html_url": "https://github.com/rust-lang/rust/issues/29997#issuecomment-174035345",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29997",
    "id": 174035345,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NDAzNTM0NQ==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-22T20:18:06Z",
    "updated_at": "2016-01-22T20:18:06Z",
    "body": "I guess we should just erase regions in that case too.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/174035345/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/174177538",
    "html_url": "https://github.com/rust-lang/rust/issues/29997#issuecomment-174177538",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29997",
    "id": 174177538,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NDE3NzUzOA==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-23T11:54:41Z",
    "updated_at": "2016-01-23T11:54:41Z",
    "body": "The `PolyTraitRef` in `fulfill_obligation` seems to be of no good reason.\n\nThe root cause of the problem here is that typeck/trans assume that if `for<'a> \u03a8['a]: Trait` holds then `\u03a8['s]: Trait` holds after normalizing, and this does not work (maybe that is limited only to closures?)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/174177538/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284050106",
    "html_url": "https://github.com/rust-lang/rust/issues/29997#issuecomment-284050106",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29997",
    "id": 284050106,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDA1MDEwNg==",
    "user": {
      "login": "aidanhs",
      "id": 1050652,
      "node_id": "MDQ6VXNlcjEwNTA2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1050652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aidanhs",
      "html_url": "https://github.com/aidanhs",
      "followers_url": "https://api.github.com/users/aidanhs/followers",
      "following_url": "https://api.github.com/users/aidanhs/following{/other_user}",
      "gists_url": "https://api.github.com/users/aidanhs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aidanhs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aidanhs/subscriptions",
      "organizations_url": "https://api.github.com/users/aidanhs/orgs",
      "repos_url": "https://api.github.com/users/aidanhs/repos",
      "events_url": "https://api.github.com/users/aidanhs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aidanhs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-03T19:38:49Z",
    "updated_at": "2017-03-03T19:38:59Z",
    "body": "I've hit this I think. Other issues with visually similar error messages which I assume are related: https://github.com/rust-lang/rust/issues/33364#issuecomment-221601950, #39779.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284050106/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/303261008",
    "html_url": "https://github.com/rust-lang/rust/issues/29997#issuecomment-303261008",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29997",
    "id": 303261008,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzI2MTAwOA==",
    "user": {
      "login": "Rufflewind",
      "id": 6571068,
      "node_id": "MDQ6VXNlcjY1NzEwNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6571068?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rufflewind",
      "html_url": "https://github.com/Rufflewind",
      "followers_url": "https://api.github.com/users/Rufflewind/followers",
      "following_url": "https://api.github.com/users/Rufflewind/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rufflewind/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rufflewind/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rufflewind/subscriptions",
      "organizations_url": "https://api.github.com/users/Rufflewind/orgs",
      "repos_url": "https://api.github.com/users/Rufflewind/repos",
      "events_url": "https://api.github.com/users/Rufflewind/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rufflewind/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-23T01:04:27Z",
    "updated_at": "2017-05-23T01:04:27Z",
    "body": "Reposting #39779 here for future reference:\r\n\r\n---\r\n\r\nThis seems to [cause rustc to crash](https://is.gd/jEgny0) (link shows a slightly more complicated example than the reduced example below):\r\n\r\n~~~rust\r\ntrait Fun<'a> { type Output; }\r\n\r\nimpl<'a> Fun<'a> for () { type Output = &'a str; }\r\n\r\nfn with<F, G>(x: <F as Fun<'static>>::Output, g: G)\r\n    where F: for<'a> Fun<'a>,\r\n          G: for<'a> FnOnce(<F as Fun<'a>>::Output) {\r\n    g(x)\r\n}\r\n\r\nfn main() {\r\n    with::<(), _>(\"\", |_| ());\r\n}\r\n~~~\r\n\r\nIt looks like it forgot to normalize `<() as Fun<'a>>::Output` to `&'a str`?\r\n\r\n    error: internal compiler error:\r\n        src/librustc_trans/common.rs:473:\r\n        Encountered error\r\n            OutputTypeParameterMismatch(\r\n               Binder(<[closure] as FnOnce(<() as Fun<'a>>::Output))>,\r\n               Binder(<[closure] as FnOnce(&str))>,\r\n               Sorts(ExpectedFound {\r\n                   expected: &str,\r\n                   found: <() as Fun<'_>>::Output\r\n               })\r\n            )\r\n        selecting\r\n            Binder(<[closure] as FnOnce(&str)>)\r\n        during trans\r\n\r\n<details><summary>Crash log for 1.15.0-stable (10893a9a3 2017-01-19)</summary>\r\n\r\n```\r\nerror: internal compiler error: /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/librustc_trans/common.rs:473: Encountered error `OutputTypeParameterMismatch(Binder(<[closure@/tmp/bug.rs:12:23: 12:29] as std::ops::FnOnce<(<() as Fun<'a>>::Output,)>>), Binder(<[closure@/tmp/bug.rs:12:23: 12:29] as std::ops::FnOnce<(&str,)>>), Sorts(ExpectedFound { expected: &str, found: <() as Fun<'_>>::Output }))` selecting `Binder(<[closure@/tmp/bug.rs:12:23: 12:29] as std::ops::FnOnce<(&str,)>>)` during trans\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: run with `RUST_BACKTRACE=1` for a backtrace\r\n\r\nthread 'rustc' panicked at 'Box<Any>', /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/librustc_errors/lib.rs:376\r\nstack backtrace:\r\n   1:     0x7f867e11e52c - std::sys::imp::backtrace::tracing::imp::write::h1d59ca58eb86a1e2\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:42\r\n   2:     0x7f867e12cb1e - std::panicking::default_hook::{{closure}}::hc8550e2dc230bf9b\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panicking.rs:351\r\n   3:     0x7f867e12c6c3 - std::panicking::default_hook::he85ae9e5c9867198\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panicking.rs:361\r\n   4:     0x7f867e12cfbb - std::panicking::rust_panic_with_hook::h319375f6b98710b0\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panicking.rs:555\r\n   5:     0x7f867ca6fa78 - std::panicking::begin_panic::hcffa9fd2a04ec06f\r\n   6:     0x7f867ca8d595 - rustc::session::opt_span_bug_fmt::{{closure}}::h614c6fe11c4465e9\r\n   7:     0x7f867ca8d3aa - rustc::session::span_bug_fmt::h8b2f72c913194199\r\n   8:     0x7f867cb02fa7 - rustc_trans::common::fulfill_obligation::{{closure}}::{{closure}}::h765609b5f897b16b\r\n   9:     0x7f867caff22c - rustc_trans::common::fulfill_obligation::h5accac95e8a401b5\r\n  10:     0x7f867cafb98b - rustc_trans::collector::do_static_dispatch::hce598ea3ab1ce3a5\r\n  11:     0x7f867cafb00d - <rustc_trans::collector::MirNeighborCollector<'a, 'tcx> as rustc::mir::visit::Visitor<'tcx>>::visit_operand::hd92120f4e6379a7e\r\n  12:     0x7f867cafb58a - <rustc_trans::collector::MirNeighborCollector<'a, 'tcx> as rustc::mir::visit::Visitor<'tcx>>::visit_terminator_kind::hccb2193f3818a450\r\n  13:     0x7f867ca88286 - rustc::mir::visit::Visitor::visit_mir::hfb8959f7b6b5ba95\r\n  14:     0x7f867cafd449 - rustc_trans::collector::collect_neighbours::he1db279e25d9c10d\r\n  15:     0x7f867caf9522 - rustc_trans::collector::collect_items_rec::hbbb361a730e6b0d3\r\n  16:     0x7f867caf9844 - rustc_trans::collector::collect_items_rec::hbbb361a730e6b0d3\r\n  17:     0x7f867cae64d8 - rustc_trans::base::collect_and_partition_translation_items::{{closure}}::h742429e3883a12cb\r\n  18:     0x7f867cae1bc2 - rustc_trans::base::collect_and_partition_translation_items::hac7e8bb398fe3219\r\n  19:     0x7f867cad4e52 - rustc_trans::base::trans_crate::hf153b22edafcd3f0\r\n  20:     0x7f867e4e0e80 - rustc_driver::driver::phase_4_translate_to_llvm::h6ba7de0cd156758c\r\n  21:     0x7f867e4ad282 - rustc_driver::driver::compile_input::{{closure}}::h40e96e4888acf56e\r\n  22:     0x7f867e4df551 - rustc_driver::driver::phase_3_run_analysis_passes::{{closure}}::hfacc2eff9ff79a87\r\n  23:     0x7f867e4bd516 - rustc_driver::driver::phase_3_run_analysis_passes::h40916decd3c5ea98\r\n  24:     0x7f867e4ab220 - rustc_driver::driver::compile_input::hce31fd38e3368b28\r\n  25:     0x7f867e4f5ba4 - rustc_driver::run_compiler::hf9be2d0376d35b2a\r\n  26:     0x7f867e401f1b - std::panicking::try::do_call::h996393a0ecaa9347\r\n  27:     0x7f867e135dfa - __rust_maybe_catch_panic\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libpanic_unwind/lib.rs:98\r\n  28:     0x7f867e42a292 - <F as alloc::boxed::FnBox<A>>::call_box::h70b5304598a75c7d\r\n  29:     0x7f867e12b974 - std::sys::imp::thread::Thread::new::thread_start::hc16926852e47c008\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/liballoc/boxed.rs:623\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/sys_common/thread.rs:21\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/sys/unix/thread.rs:84\r\n  30:     0x7f8675f14453 - start_thread\r\n  31:     0x7f867ddee7de - __GI___clone\r\n  32:                0x0 - <unknown>\r\n```\r\n\r\n</details>\r\n\r\n<details><summary>Crash log for 1.17.0-nightly (c49d10207 2017-02-07)</summary>\r\n<pre><code>\r\n\r\n```\r\nerror: internal compiler error: /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/librustc_trans/common.rs:473: Encountered error `OutputTypeParameterMismatch(Binder(<[closure@/tmp/bug.rs:12:23: 12:29] as std::ops::FnOnce<(<() as Fun<'a>>::Output,)>>), Binder(<[closure@/tmp/bug.rs:12:23: 12:29] as std::ops::FnOnce<(&str,)>>), Sorts(ExpectedFound { expected: &str, found: <() as Fun<'_>>::Output }))` selecting `Binder(<[closure@/tmp/bug.rs:12:23: 12:29] as std::ops::FnOnce<(&str,)>>)` during trans\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: run with `RUST_BACKTRACE=1` for a backtrace\r\n\r\nthread 'rustc' panicked at 'Box<Any>', /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/librustc_errors/lib.rs:376\r\nstack backtrace:\r\n   1:     0x7f867e11e52c - std::sys::imp::backtrace::tracing::imp::write::h1d59ca58eb86a1e2\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:42\r\n   2:     0x7f867e12cb1e - std::panicking::default_hook::{{closure}}::hc8550e2dc230bf9b\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panicking.rs:351\r\n   3:     0x7f867e12c6c3 - std::panicking::default_hook::he85ae9e5c9867198\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panicking.rs:361\r\n   4:     0x7f867e12cfbb - std::panicking::rust_panic_with_hook::h319375f6b98710b0\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panicking.rs:555\r\n   5:     0x7f867ca6fa78 - std::panicking::begin_panic::hcffa9fd2a04ec06f\r\n   6:     0x7f867ca8d595 - rustc::session::opt_span_bug_fmt::{{closure}}::h614c6fe11c4465e9\r\n   7:     0x7f867ca8d3aa - rustc::session::span_bug_fmt::h8b2f72c913194199\r\n   8:     0x7f867cb02fa7 - rustc_trans::common::fulfill_obligation::{{closure}}::{{closure}}::h765609b5f897b16b\r\n   9:     0x7f867caff22c - rustc_trans::common::fulfill_obligation::h5accac95e8a401b5\r\n  10:     0x7f867cafb98b - rustc_trans::collector::do_static_dispatch::hce598ea3ab1ce3a5\r\n  11:     0x7f867cafb00d - <rustc_trans::collector::MirNeighborCollector<'a, 'tcx> as rustc::mir::visit::Visitor<'tcx>>::visit_operand::hd92120f4e6379a7e\r\n  12:     0x7f867cafb58a - <rustc_trans::collector::MirNeighborCollector<'a, 'tcx> as rustc::mir::visit::Visitor<'tcx>>::visit_terminator_kind::hccb2193f3818a450\r\n  13:     0x7f867ca88286 - rustc::mir::visit::Visitor::visit_mir::hfb8959f7b6b5ba95\r\n  14:     0x7f867cafd449 - rustc_trans::collector::collect_neighbours::he1db279e25d9c10d\r\n  15:     0x7f867caf9522 - rustc_trans::collector::collect_items_rec::hbbb361a730e6b0d3\r\n  16:     0x7f867caf9844 - rustc_trans::collector::collect_items_rec::hbbb361a730e6b0d3\r\n  17:     0x7f867cae64d8 - rustc_trans::base::collect_and_partition_translation_items::{{closure}}::h742429e3883a12cb\r\n  18:     0x7f867cae1bc2 - rustc_trans::base::collect_and_partition_translation_items::hac7e8bb398fe3219\r\n  19:     0x7f867cad4e52 - rustc_trans::base::trans_crate::hf153b22edafcd3f0\r\n  20:     0x7f867e4e0e80 - rustc_driver::driver::phase_4_translate_to_llvm::h6ba7de0cd156758c\r\n  21:     0x7f867e4ad282 - rustc_driver::driver::compile_input::{{closure}}::h40e96e4888acf56e\r\n  22:     0x7f867e4df551 - rustc_driver::driver::phase_3_run_analysis_passes::{{closure}}::hfacc2eff9ff79a87\r\n  23:     0x7f867e4bd516 - rustc_driver::driver::phase_3_run_analysis_passes::h40916decd3c5ea98\r\n  24:     0x7f867e4ab220 - rustc_driver::driver::compile_input::hce31fd38e3368b28\r\n  25:     0x7f867e4f5ba4 - rustc_driver::run_compiler::hf9be2d0376d35b2a\r\n  26:     0x7f867e401f1b - std::panicking::try::do_call::h996393a0ecaa9347\r\n  27:     0x7f867e135dfa - __rust_maybe_catch_panic\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libpanic_unwind/lib.rs:98\r\n  28:     0x7f867e42a292 - <F as alloc::boxed::FnBox<A>>::call_box::h70b5304598a75c7d\r\n  29:     0x7f867e12b974 - std::sys::imp::thread::Thread::new::thread_start::hc16926852e47c008\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/liballoc/boxed.rs:623\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/sys_common/thread.rs:21\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/sys/unix/thread.rs:84\r\n  30:     0x7f8675f14453 - start_thread\r\n  31:     0x7f867ddee7de - __GI___clone\r\n  32:                0x0 - <unknown>\r\n```\r\n\r\n</code></pre>\r\n</details>\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/303261008/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/338452339",
    "html_url": "https://github.com/rust-lang/rust/issues/29997#issuecomment-338452339",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29997",
    "id": 338452339,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODQ1MjMzOQ==",
    "user": {
      "login": "mikeyhew",
      "id": 6751033,
      "node_id": "MDQ6VXNlcjY3NTEwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6751033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeyhew",
      "html_url": "https://github.com/mikeyhew",
      "followers_url": "https://api.github.com/users/mikeyhew/followers",
      "following_url": "https://api.github.com/users/mikeyhew/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeyhew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeyhew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeyhew/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeyhew/orgs",
      "repos_url": "https://api.github.com/users/mikeyhew/repos",
      "events_url": "https://api.github.com/users/mikeyhew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeyhew/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-10-22T05:17:04Z",
    "updated_at": "2017-10-22T05:17:04Z",
    "body": "While working on a StreamingIterator trait, I got a similar ICE about an OutputTypeParameterMismatch.\r\n\r\n```rust\r\npub trait StreamingIterator<'a> {\r\n    type Item: 'a;\r\n\r\n    fn next(&'a mut self) -> Option<Self::Item>;\r\n}\r\n\r\npub trait StreamingIteratorExt: for<'a> StreamingIterator<'a> {\r\n    fn for_each<F>(mut self, mut func: F) where\r\n        Self: Sized,\r\n        F: for<'a> FnMut(<Self as StreamingIterator<'a>>::Item)\r\n    {\r\n        while let Some(item) = self.next() {\r\n            func(item)\r\n        }\r\n    }\r\n}\r\n\r\nimpl<I> StreamingIteratorExt for I where\r\n    I: for<'a>StreamingIterator<'a>\r\n{}\r\n\r\nimpl<'a, I: Iterator + 'a> StreamingIterator<'a> for I {\r\n    type Item = I::Item;\r\n\r\n    fn next(&'a mut self) -> Option<Self::Item> {\r\n        self.next()\r\n    }\r\n}\r\n\r\n#[test]\r\nfn test_basic_stuff() {\r\n    let it = vec![1i32,2,3].into_iter();\r\n\r\n    StreamingIteratorExt::for_each(it, |x| println!(\"{}\", x));\r\n}\r\n\r\n```\r\n\r\nAnd here's the error on Rust 1.21.0 stable\r\n\r\n```\r\nerror: internal compiler error: src/librustc/traits/trans/mod.rs:75: Encountered error \r\n\r\n`OutputTypeParameterMismatch(\r\n    Binder(<[closure@src/lib.rs:34:40: 34:61]\r\n            as std::ops::FnMut<(\r\n                <std::vec::IntoIter<i32> as StreamingIterator<'_>>::Item,\r\n            )>>),\r\n    Binder(<[closure@src/lib.rs:34:40: 34:61]\r\n            as std::ops::FnMut<(i32,)>>),\r\n    Sorts(ExpectedFound {\r\n        expected: i32,\r\n        found: <std::vec::IntoIter<i32> as StreamingIterator<'_>>::Item\r\n    })\r\n)`\r\n\r\nselecting `Binder(<[closure@src/lib.rs:34:40: 34:61] as std::ops::FnMut<(i32,)>>)` during trans\r\n```\r\n\r\n<details>\r\n<summary>Backtrace on Rust 1.21.0 stable </summary>\r\n\r\n``` \r\nthread 'rustc' panicked at 'Box<Any>', src/librustc_errors/lib.rs:437:8\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\nstack backtrace:\r\n   0: std::sys::imp::backtrace::tracing::imp::unwind_backtrace\r\n   1: std::panicking::default_hook::{{closure}}\r\n   2: std::panicking::default_hook\r\n   3: std::panicking::rust_panic_with_hook\r\n   4: std::panicking::begin_panic\r\n   5: rustc_errors::Handler::span_bug\r\n   6: rustc::session::opt_span_bug_fmt::{{closure}}\r\n   7: rustc::session::opt_span_bug_fmt\r\n   8: rustc::session::span_bug_fmt\r\n   9: rustc::traits::trans::<impl rustc::ty::context::TyCtxt<'a, 'tcx, 'tcx>>::trans_fulfill_obligation::{{closure}}\r\n  10: rustc::traits::trans::<impl rustc::ty::context::TyCtxt<'a, 'tcx, 'tcx>>::trans_fulfill_obligation\r\n  11: rustc_trans::monomorphize::resolve\r\n  12: <rustc_trans::collector::MirNeighborCollector<'a, 'tcx> as rustc::mir::visit::Visitor<'tcx>>::visit_terminator_kind\r\n  13: rustc::mir::visit::Visitor::visit_mir\r\n  14: rustc_trans::collector::collect_items_rec\r\n  15: rustc_trans::collector::collect_items_rec\r\n  16: rustc_trans::base::collect_and_partition_translation_items::{{closure}}\r\n  17: rustc_trans::base::trans_crate\r\n  18: rustc_driver::driver::phase_4_translate_to_llvm\r\n  19: rustc_driver::driver::compile_input::{{closure}}\r\n  20: rustc::ty::context::TyCtxt::create_and_enter\r\n  21: rustc_driver::driver::compile_input\r\n  22: rustc_driver::run_compiler\r\n```\r\n\r\n</details>\r\n\r\nNote that `<std::vec::IntoIter<i32> as StreamingIterator<'_>>::Item` **=** `i32`",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/338452339/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/427033628",
    "html_url": "https://github.com/rust-lang/rust/issues/29997#issuecomment-427033628",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29997",
    "id": 427033628,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzAzMzYyOA==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-10-04T14:10:21Z",
    "updated_at": "2018-10-04T14:10:21Z",
    "body": "Another minimal example (#53420):\r\n```Rust\r\ntrait Lt<'a> {\r\n    type T;\r\n}\r\nimpl<'a> Lt<'a> for () {\r\n    type T = ();\r\n}\r\n\r\nfn main() {\r\n    let _:fn(<() as Lt<'_>>::T) = |()| {};\r\n}\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/427033628/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/435582992",
    "html_url": "https://github.com/rust-lang/rust/issues/29997#issuecomment-435582992",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29997",
    "id": 435582992,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTU4Mjk5Mg==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-11-03T12:09:59Z",
    "updated_at": "2018-11-03T12:09:59Z",
    "body": "Is #33364 a duplicate of this?",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/435582992/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/510004903",
    "html_url": "https://github.com/rust-lang/rust/issues/29997#issuecomment-510004903",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29997",
    "id": 510004903,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDAwNDkwMw==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-07-10T10:24:39Z",
    "updated_at": "2019-07-10T10:24:39Z",
    "body": "closing as duplicate of #62529, which is where I will try to track future instances of this field of ICE.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/510004903/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
