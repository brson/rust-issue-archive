[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141467190",
    "html_url": "https://github.com/rust-lang/rust/issues/28493#issuecomment-141467190",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28493",
    "id": 141467190,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MTQ2NzE5MA==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-18T14:25:46Z",
    "updated_at": "2015-09-18T14:25:46Z",
    "body": "The `BTreeMap` expansion of this is:\n\n``` rust\nuse std::collections::BTreeMap;\n\nfn main() {\n    let _: BTreeMap<(), ()> = BTreeMap::new();\n}\n```\n\nNote that `BTreeMap<(), i32>` does not cause this problem.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141467190/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141468796",
    "html_url": "https://github.com/rust-lang/rust/issues/28493#issuecomment-141468796",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28493",
    "id": 141468796,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MTQ2ODc5Ng==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-18T14:28:51Z",
    "updated_at": "2015-09-18T14:28:51Z",
    "body": "Note also that this is only the case with jemalloc. The following runs successfully:\n\n``` rust\n#![feature(alloc_system)]\nextern crate alloc_system;\n\nuse std::collections::BTreeMap;\n\nfn main() {\n    let _: BTreeMap<(), ()> = BTreeMap::new();\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141468796/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141471031",
    "html_url": "https://github.com/rust-lang/rust/issues/28493#issuecomment-141471031",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28493",
    "id": 141471031,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MTQ3MTAzMQ==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-18T14:36:42Z",
    "updated_at": "2015-09-18T14:36:42Z",
    "body": "Actually, this is just related to calling jemalloc with 0 for the size:\n\n``` rust\n#![feature(alloc, heap_api)]\n\nextern crate alloc;\n\nfn main() {\n    let size = std::mem::size_of::<()>();\n    let align = std::mem::align_of::<()>();\n\n    unsafe {\n        alloc::heap::allocate(size, align);\n    }\n}\n```\n\n``` sh\n> valgrind ./foo\n==16282== Memcheck, a memory error detector\n==16282== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==16282== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info\n==16282== Command: ./foo\n==16282== \n==16282== Invalid read of size 1\n==16282==    at 0x11B7B1: je_mallocx (in /home/andrew/foo)\n==16282==    by 0x10C78F: heap::allocate::hef78f640aa355f8bPda (in /home/andrew/foo)\n==16282==    by 0x10C710: main::h2fbc6b3b4aacc11afaa (in /home/andrew/foo)\n==16282==    by 0x112D94: sys_common::unwind::try::try_fn::h14601444602367533931 (in /home/andrew/foo)\n==16282==    by 0x10FDA8: __rust_try (in /home/andrew/foo)\n==16282==    by 0x112A08: rt::lang_start::h7135051af8990a95Zkx (in /home/andrew/foo)\n==16282==    by 0x10C7C9: main (in /home/andrew/foo)\n==16282==  Address 0x200000000013dd7f is not stack'd, malloc'd or (recently) free'd\n==16282== \n==16282== \n==16282== Process terminating with default action of signal 11 (SIGSEGV)\n==16282==  General Protection Fault\n==16282==    at 0x11B7B1: je_mallocx (in /home/andrew/foo)\n==16282==    by 0x10C78F: heap::allocate::hef78f640aa355f8bPda (in /home/andrew/foo)\n==16282==    by 0x10C710: main::h2fbc6b3b4aacc11afaa (in /home/andrew/foo)\n==16282==    by 0x112D94: sys_common::unwind::try::try_fn::h14601444602367533931 (in /home/andrew/foo)\n==16282==    by 0x10FDA8: __rust_try (in /home/andrew/foo)\n==16282==    by 0x112A08: rt::lang_start::h7135051af8990a95Zkx (in /home/andrew/foo)\n==16282==    by 0x10C7C9: main (in /home/andrew/foo)\n==16282== \n==16282== HEAP SUMMARY:\n==16282==     in use at exit: 32 bytes in 1 blocks\n==16282==   total heap usage: 5 allocs, 4 frees, 976 bytes allocated\n==16282== \n==16282== LEAK SUMMARY:\n==16282==    definitely lost: 0 bytes in 0 blocks\n==16282==    indirectly lost: 0 bytes in 0 blocks\n==16282==      possibly lost: 0 bytes in 0 blocks\n==16282==    still reachable: 32 bytes in 1 blocks\n==16282==         suppressed: 0 bytes in 0 blocks\n==16282== Rerun with --leak-check=full to see details of leaked memory\n==16282== \n==16282== For counts of detected and suppressed errors, rerun with: -v\n==16282== ERROR SUMMARY: 2 errors from 1 contexts (suppressed: 0 from 0)\nSegmentation fault (core dumped)\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141471031/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141473123",
    "html_url": "https://github.com/rust-lang/rust/issues/28493#issuecomment-141473123",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28493",
    "id": 141473123,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MTQ3MzEyMw==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-18T14:46:04Z",
    "updated_at": "2015-09-18T14:46:04Z",
    "body": "We should probably apply a temporary fix for this (and audit all other uses of `alloc::heap::allocate`), though @gereeter's [`BTreeMap` rewrite](https://github.com/gereeter/btree-rewrite) will remove the direct allocation calls.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141473123/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141507728",
    "html_url": "https://github.com/rust-lang/rust/issues/28493#issuecomment-141507728",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28493",
    "id": 141507728,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MTUwNzcyOA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-18T17:00:58Z",
    "updated_at": "2015-09-18T17:00:58Z",
    "body": "triage: I-nominated\n\nSeems pretty serious and something we may want to fix soon!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141507728/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141507763",
    "html_url": "https://github.com/rust-lang/rust/issues/28493#issuecomment-141507763",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28493",
    "id": 141507763,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MTUwNzc2Mw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-18T17:01:08Z",
    "updated_at": "2015-09-18T17:01:08Z",
    "body": "cc @Gankro \n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141507763/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141507918",
    "html_url": "https://github.com/rust-lang/rust/issues/28493#issuecomment-141507918",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28493",
    "id": 141507918,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MTUwNzkxOA==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-18T17:01:52Z",
    "updated_at": "2015-09-18T17:01:52Z",
    "body": "I have a potential PR in progress, just running tests locally.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/141507918/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
