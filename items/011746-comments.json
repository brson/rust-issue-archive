[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33102952",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-33102952",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 33102952,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMTAyOTUy",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-23T07:37:58Z",
    "updated_at": "2014-01-23T07:41:00Z",
    "body": "For an example of why an absolute path is bad, consider building a library in a home directory or perhaps `/tmp`. The compiled binary now ends up with `/home/foo/build` or `/tmp/build-14a29fp` as a path to load libraries. It's very easy to deploy this library without thinking about the relative rpath and expose a significant vulnerability.\n\nIt's true that this is also possible with relative (`$ORIGIN`-based) paths, but it's _far_ less likely. A relative path can also be useful in a deployed package, while an absolute path is rarely correct and at best redundant.\n\nLinux distributions usually lint for _insecure rpaths_, rather than _all_ rpaths. So, an `$ORIGIN`-based path will be considered okay as long as it doesn't point outside of the directories owned by the package and they do not provide write permissions to non-root users.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33102952/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33717486",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-33717486",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 33717486,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNzE3NDg2",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-30T18:30:26Z",
    "updated_at": "2014-01-30T18:30:26Z",
    "body": "Accepted for 1.0, P-backcompat-lang.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33717486/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37026061",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37026061",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37026061,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDI2MDYx",
    "user": {
      "login": "lucab",
      "id": 98086,
      "node_id": "MDQ6VXNlcjk4MDg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/98086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lucab",
      "html_url": "https://github.com/lucab",
      "followers_url": "https://api.github.com/users/lucab/followers",
      "following_url": "https://api.github.com/users/lucab/following{/other_user}",
      "gists_url": "https://api.github.com/users/lucab/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lucab/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lucab/subscriptions",
      "organizations_url": "https://api.github.com/users/lucab/orgs",
      "repos_url": "https://api.github.com/users/lucab/repos",
      "events_url": "https://api.github.com/users/lucab/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lucab/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T14:00:21Z",
    "updated_at": "2014-03-07T18:05:08Z",
    "body": "No, relative `$ORIGIN`-based rpaths are also problematic from a security POV. See [CVE-2009-0876](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=520126) for a real world exploitation PoC due only to rpath usage.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37026061/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37038124",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37038124",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37038124,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDM4MTI0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T16:06:55Z",
    "updated_at": "2014-03-07T16:07:20Z",
    "body": "Sure, but having no absolute rpaths is better than having both `$ORIGIN` and absolute paths. The absolute paths are a bigger problem because they're _always_ wrong if you install a Rust library or binary as a package. At least the `$ORIGIN`-based ones can be right, and often are.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37038124/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37047015",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37047015",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37047015,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDQ3MDE1",
    "user": {
      "login": "o11c",
      "id": 964689,
      "node_id": "MDQ6VXNlcjk2NDY4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/964689?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/o11c",
      "html_url": "https://github.com/o11c",
      "followers_url": "https://api.github.com/users/o11c/followers",
      "following_url": "https://api.github.com/users/o11c/following{/other_user}",
      "gists_url": "https://api.github.com/users/o11c/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/o11c/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/o11c/subscriptions",
      "organizations_url": "https://api.github.com/users/o11c/orgs",
      "repos_url": "https://api.github.com/users/o11c/repos",
      "events_url": "https://api.github.com/users/o11c/events{/privacy}",
      "received_events_url": "https://api.github.com/users/o11c/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T17:31:17Z",
    "updated_at": "2014-03-07T17:35:04Z",
    "body": "I don't know if you can avoid all absolute rpaths if you configure with a custom BINDIR and LIBDIR. It should be possible if you only change PREFIX, or only change BINDIR and LIBDIR within prefix (i.e. ${PREFIX}/lib64).\n\nThink especially about the relatively common case where a rust package is installed by a user in ${HOME}. This absolutely needs an rpath ... and in the case there BINDIR=~/bin and LIBDIR=~/.local/lib, gets kind of hairy.\n\nIn fact, now that I think about it, my ~/bin is a symlink anyway, so relative rpaths wouldn't work.\n\nAs far as I understand it, rpaths are only a security problem when running executables with a set*id bit or setcap bits.\n\nOh, and about the \"install multiple deps when you can't write to root\" - the solution to that sounds like a sysroot (which == DESTDIR).\n\nSo:\ncompile libfoo, install with DESTDIR=/tmp/build, the actual lib is in /tmp/build/usr/lib\ncompile hellofoo with sysroot=/tmp/build\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37047015/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37048123",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37048123",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37048123,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDQ4MTIz",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T17:42:00Z",
    "updated_at": "2014-03-07T17:42:52Z",
    "body": "That's not when rpaths are meant to be used. A user can set `LD_LIBRARY_PATH` to add a directory to the library loading path, just like they can modify `PATH`. A relative rpath is used to give a program a hidden application-specific library path that's not meant to be included in the system library search paths via `ld.so.conf.d`.\n\n@o11c: It is _not_ just a security issue with setuid binaries. Rust binaries will have rpaths based on their build directory opening up the ability for non-root users to inject code when other users run the binary, like root. Rust won't be included in Fedora or Debian if it's making this kind of security faux pas - rpaths should be opt-in.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37048123/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37049405",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37049405",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37049405,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDQ5NDA1",
    "user": {
      "login": "o11c",
      "id": 964689,
      "node_id": "MDQ6VXNlcjk2NDY4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/964689?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/o11c",
      "html_url": "https://github.com/o11c",
      "followers_url": "https://api.github.com/users/o11c/followers",
      "following_url": "https://api.github.com/users/o11c/following{/other_user}",
      "gists_url": "https://api.github.com/users/o11c/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/o11c/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/o11c/subscriptions",
      "organizations_url": "https://api.github.com/users/o11c/orgs",
      "repos_url": "https://api.github.com/users/o11c/repos",
      "events_url": "https://api.github.com/users/o11c/events{/privacy}",
      "received_events_url": "https://api.github.com/users/o11c/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T17:54:11Z",
    "updated_at": "2014-03-07T17:54:11Z",
    "body": "Well, what _I_ always heard about LD_LIBRARY_PATH was \"don't use it; use rpath instead\". Particularly, asking users to set LD_LIBRARY_PATH globally just to be able to install rust packages as user is wrong. When installed as user, absolute rpaths should _definitely_ be used.\n\nYes, it's wrong to have an rpath pointing to the build directory, but that's not the same as it being wrong to have an absolute rpath at all.\n\nFor the virtualbox $ORIGIN attack, I would hope that root can be trusted not to accidentally run someone else's hard link to the binary. Therefore, it should be secure to have two rpaths: an absolute one to the install directory (where bindir and libdir may have no relation), and a relative one to the build directory (where the equivalent of bindir and libdir are known) for testing.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37049405/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37051436",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37051436",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37051436,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDUxNDM2",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T18:15:18Z",
    "updated_at": "2014-03-07T18:19:06Z",
    "body": "> Particularly, asking users to set LD_LIBRARY_PATH globally just to be able to install rust packages as user is wrong. When installed as user, absolute rpaths should definitely be used.\n\nI don't understand why you would say this. It's totally fine to set `LD_LIBRARY_PATH` for a specific user, to load libraries from a user-controlled directory. It's really not much different than adding a local directory to `PATH`, as you can even mask system binaries that way (which is not a bad thing). Unlike an absolute rpath, it won't require rebuilding _everything_ if the directory changes or the user's home directory is moved - for example, if the username needs to be changed.\n\nI am obviously not suggesting that it be done _globally_. The `/etc/ld.so.conf` file and `/etc/ld.so.conf.d` directory exist for system-wide library directories controlled by root.\n\n> Yes, it's wrong to have an rpath pointing to the build directory, but that's not the same as it being wrong to have an absolute rpath at all.\n\nIt's insecure to add an absolute rpath by default. I don't know of any other compiler doing this. I doubt that the Ubuntu PPA is removing this insecure rpath, for example.\n\n> For the virtualbox $ORIGIN attack, I would hope that root can be trusted not to accidentally run someone else's hard link to the binary. Therefore, it should be secure to have two rpaths: an absolute one to the install directory (where bindir and libdir may have no relation), and a relative one to the build directory (where the equivalent of bindir and libdir are known) for testing.\n\nI'm not talking about hard links. Adding rpaths by default with the compiler means files installed to root are going to accidentally end up with insecure rpaths. Other compilers are not doing this by default, so it makes Rust's behaviour very surprising. There's no such thing as an rpath on Windows so Rust can never provide a consistent, predictable behaviour if it uses this hack.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37051436/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37052340",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37052340",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37052340,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDUyMzQw",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T18:24:13Z",
    "updated_at": "2014-03-07T18:24:13Z",
    "body": "Rust won't be allowed in Fedora and Debian until this issue is fixed, and their policies are not going to change. At most, they'll patch this out of the compiler and Windows won't be the only platform behaving differently.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37052340/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37054730",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37054730",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37054730,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDU0NzMw",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T18:49:41Z",
    "updated_at": "2014-03-07T18:49:41Z",
    "body": "My understanding is Debian is likely to make at least temporary exceptions for Rust's remaining infidelities, but we should still keep trying to work toward a model that doesn't use rpath.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37054730/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37054934",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37054934",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37054934,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDU0OTM0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T18:52:06Z",
    "updated_at": "2014-03-07T18:52:32Z",
    "body": "Static linking is already used by default and the build process no longer needs rpaths. There's nothing blocking stripping it all out today and having users set them manually if they want them, as other languages do. It's not a technical issue anymore.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37054934/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37057419",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37057419",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37057419,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDU3NDE5",
    "user": {
      "login": "o11c",
      "id": 964689,
      "node_id": "MDQ6VXNlcjk2NDY4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/964689?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/o11c",
      "html_url": "https://github.com/o11c",
      "followers_url": "https://api.github.com/users/o11c/followers",
      "following_url": "https://api.github.com/users/o11c/following{/other_user}",
      "gists_url": "https://api.github.com/users/o11c/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/o11c/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/o11c/subscriptions",
      "organizations_url": "https://api.github.com/users/o11c/orgs",
      "repos_url": "https://api.github.com/users/o11c/repos",
      "events_url": "https://api.github.com/users/o11c/events{/privacy}",
      "received_events_url": "https://api.github.com/users/o11c/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T19:16:36Z",
    "updated_at": "2014-03-07T19:16:36Z",
    "body": "There is absolutely _nothing_ insecure about an rpath that is writable by the same set of users (i.e. just root) who can write to the binary itself (barring the set_id thing). There is *nothing_ fundamentally wrong with rpath. Just don't use it _wrong_. Neither Debian nor Fedora has an absolute ban on rpath, and Rust fits quite neatly into the explicitly permitted case.\n\nAnd there are very real cases where static linking simply cannot be used. One particular case I hit recently: when you need to link to an internal C shared library that is not in the default library path. I have to compile my rust library as crate type dylib and add the rpath myself. But anybody _linking_ to my rust library shouldn't have to know about internals - they only need the rpath to my library, which rustc currently happily provides.\n\nEverything should Just Work. If rpath isn't added by rust itself (which _can_ be done securely), you'll just end up with a bunch of ad-hoc scripts adding it in all the packages, which is infinitely harder to make secure.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37057419/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37058276",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37058276",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37058276,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDU4Mjc2",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T19:25:21Z",
    "updated_at": "2014-03-07T19:39:36Z",
    "body": "> There is absolutely nothing insecure about an rpath that is writable by the same set of users (i.e. just root) who can write to the binary itself (barring the set*id thing).\n\nRust adds rpaths pointing to the build directory, and these are often insecure when the binary is packaged and installed to a system directory. A package is usually build in a clean `chroot` as non-root or by the packager in their home directory, and the rpaths will point outside of the safe system directories. It's an unsafe default and the Ubuntu PPA proves that this issue will be overlooked.\n\n>  There is nothing fundamentally wrong with rpath. Just don't use it wrong. \n\nThere are correct use cases for rpaths, but adding an absolute and relative path to the build directory is not correct in many cases. It's a significant security risk. It's implicit, so \"don't use it wrong\" isn't an excuse. The defaults should be secure, and potentially risky options should be opt-in. You can't blame people for doing it wrong if Rust is doing it implicitly without letting them know. No other compiler seems to do this - it's a surprising default.\n\n> Neither Debian nor Fedora has an absolute ban on rpath, and Rust fits quite neatly into the explicitly permitted case.\n\nThey don't permit what Rust is doing. Fedora is certainly not going to add Rust to the repositories as long as it's implicitly adding rpaths which are not always safe. They've kept Chromium out of the repositories for smaller issues.\n\n> Everything should Just Work. If rpath isn't added by rust itself (which can be done securely), you'll just end up with a bunch of ad-hoc scripts adding it in all the packages, which is infinitely harder to make secure.\n\nThe default is static linking, and it works. Perhaps you're missing that Windows doesn't have this feature, so using it provides an inconsistent experience across platforms regardless of how it's done. Most packages work fine without using any rpaths, as they just make use of the regular system libraries or are a system library themselves.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37058276/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37058800",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37058800",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37058800,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDU4ODAw",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T19:30:20Z",
    "updated_at": "2014-03-07T19:32:21Z",
    "body": "I'm not sure what you mean by an ad-hoc script though. You can ask for an rpath by passing `-rpath=foo` to `link-args`. It should be an explicit decision rather than doing it by default when it's clearly not always safe.\n\nThe Ubuntu PPA is a good example of this - it builds in a directory, then ships the binaries and libraries as a package. However, these binaries/libraries have rpaths set outside of the system directories.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37058800/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37064070",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37064070",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37064070,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDY0MDcw",
    "user": {
      "login": "o11c",
      "id": 964689,
      "node_id": "MDQ6VXNlcjk2NDY4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/964689?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/o11c",
      "html_url": "https://github.com/o11c",
      "followers_url": "https://api.github.com/users/o11c/followers",
      "following_url": "https://api.github.com/users/o11c/following{/other_user}",
      "gists_url": "https://api.github.com/users/o11c/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/o11c/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/o11c/subscriptions",
      "organizations_url": "https://api.github.com/users/o11c/orgs",
      "repos_url": "https://api.github.com/users/o11c/repos",
      "events_url": "https://api.github.com/users/o11c/events{/privacy}",
      "received_events_url": "https://api.github.com/users/o11c/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T20:25:46Z",
    "updated_at": "2014-03-07T20:25:46Z",
    "body": "I completely agree that rust should not use absolute rpaths to the build directory. But the other cases - relative rpath to build directory and absolute rpath to install directory - are both secure and essential.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37064070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37064525",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37064525",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37064525,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDY0NTI1",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T20:30:26Z",
    "updated_at": "2014-03-07T20:30:26Z",
    "body": "A relative path to libraries used while building is still a security issue.\n\nAn absolute path to the location where libraries are installed is not, but `rustc` is not aware of an installation concept. I don't think building and installation should be strongly coupled together - it would be better to make it possible to build and then choose an install location (home directory, package, /usr/local) without rebuilding.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37064525/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37065921",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37065921",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37065921,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDY1OTIx",
    "user": {
      "login": "o11c",
      "id": 964689,
      "node_id": "MDQ6VXNlcjk2NDY4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/964689?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/o11c",
      "html_url": "https://github.com/o11c",
      "followers_url": "https://api.github.com/users/o11c/followers",
      "following_url": "https://api.github.com/users/o11c/following{/other_user}",
      "gists_url": "https://api.github.com/users/o11c/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/o11c/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/o11c/subscriptions",
      "organizations_url": "https://api.github.com/users/o11c/orgs",
      "repos_url": "https://api.github.com/users/o11c/repos",
      "events_url": "https://api.github.com/users/o11c/events{/privacy}",
      "received_events_url": "https://api.github.com/users/o11c/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T20:46:56Z",
    "updated_at": "2014-03-07T20:46:56Z",
    "body": "> A relative path to libraries used while building is still a security issue.\n\nCan you give an example of that? The VirtualBox case doesn't count, because that relies on hard-links to set_id, and if you're using set_id it's your own responsibility to take care of things.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37065921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37066795",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37066795",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37066795,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDY2Nzk1",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T20:57:22Z",
    "updated_at": "2014-03-07T20:58:46Z",
    "body": "Adding a package-specific path like `/usr/lib/package-name` is an acceptable and almost always secure usage of a relative rpath. There's no problem with a tool adding that automatically, but it needs to be aware of installation and add it _after building_, which `rustc` cannot do.\n\n`rustc` adds paths relative to the build directory for libraries it links against. This includes paths that should simply not be included at all like `$ORIGIN/../../usr/lib/rustlib/x86_64-unknown-linux-gnu/lib` along with potentially insecure paths based on the build system's directory hierarchy.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37066795/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37072469",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37072469",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37072469,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDcyNDY5",
    "user": {
      "login": "lucab",
      "id": 98086,
      "node_id": "MDQ6VXNlcjk4MDg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/98086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lucab",
      "html_url": "https://github.com/lucab",
      "followers_url": "https://api.github.com/users/lucab/followers",
      "following_url": "https://api.github.com/users/lucab/following{/other_user}",
      "gists_url": "https://api.github.com/users/lucab/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lucab/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lucab/subscriptions",
      "organizations_url": "https://api.github.com/users/lucab/orgs",
      "repos_url": "https://api.github.com/users/lucab/repos",
      "events_url": "https://api.github.com/users/lucab/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lucab/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T21:59:33Z",
    "updated_at": "2014-03-07T21:59:33Z",
    "body": "Uh, it looks like I ignited this discussion, so I think I should make a couple of clearer comments:\n- My comment above was just an answer to brson's `Absolute rpaths are supposed to be worse than relative rpaths (I'm not clear on why at the moment)`: they aren't, and both of them have security issues, even if with different threat models. And we have already PoC for both cases, so it isn't just theoretical paranoia.\n- I think we are really conflating two issues here: how to generate dynamic artifacts and how to handle user-level playground. The Debian/Fedora model works because all the .so you need\n  are in a (root privileged) system library path. Having an rpath there is a security issue, and as such we can't allow system-wide packaged binaries to ship with it. I'm currently packaging with `-disable-rpath` and everyone is happy. \n  However, the issue we are trying to address with rpath here is _user-level_ playground installation. This is the same as having a locally built but non-installed c library: you can't expect the loader to pick up the .so from your home, without resorting to dirty trick like rpath or preloading. OTOH, this is not how you would expect to ship system-wide software and libraries, and here we come back to why system dynamic libs don't have rpath. We should acknowledge the two scenarios and solve them, possibly with some help from rustpkg2.\n- I plan to do a short survey for other AOT-native-compiled languages before coming up with a final proposal. For sure rpath in system-wide libs must go away. However, the user-wide playground is still an issue that we share with other languages. For example, using a locally-built C .so (when you can't install it somewhere to LIBDIR) has the same problems.\n- Here we are also doing a bit of long-term system-wide design (rust as a system language, imagine talking about a systemd(1) or an apache2(1) replacement). I am not comfortable with @o11c arguments in this case: history has shown that rpaths have issues, and we'll probably have to fix the design again sooner or later. \n- Just forcing rpath indiscriminately is a problem. This isn't just Debian/Fedora policy nitpicking, as we can strip rpath from packages or patch around it.\n\nIn summary I'd say: in the grand final plan, rpaths are not ok and I don't plan to ship any packaged binaries with them. However, they are mostly used to ease the setup of user-level playgrounds. (Probably) this should be handled together by rust and rustpkg2 and requires a bit of careful design in the latter. I'm still far from coming up with a proper proposal for this, but I surely would contribute to rustpkg2 plans.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37072469/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37076022",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37076022",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37076022,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDc2MDIy",
    "user": {
      "login": "o11c",
      "id": 964689,
      "node_id": "MDQ6VXNlcjk2NDY4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/964689?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/o11c",
      "html_url": "https://github.com/o11c",
      "followers_url": "https://api.github.com/users/o11c/followers",
      "following_url": "https://api.github.com/users/o11c/following{/other_user}",
      "gists_url": "https://api.github.com/users/o11c/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/o11c/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/o11c/subscriptions",
      "organizations_url": "https://api.github.com/users/o11c/orgs",
      "repos_url": "https://api.github.com/users/o11c/repos",
      "events_url": "https://api.github.com/users/o11c/events{/privacy}",
      "received_events_url": "https://api.github.com/users/o11c/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T22:42:46Z",
    "updated_at": "2014-03-07T22:42:58Z",
    "body": "> we have already PoC for both cases, so it isn't just theoretical paranoia.\n\nEvery exploit I am aware of involves one of:\n- absolute or relative rpath to a world-writable directory\n- relative rpath in a set*id executable\n\nJust stop doing those things and you'll be fine.\n\nAlso note that not using rpath means shipping 50 different hashed versions of libstd-*.so in /usr/lib itself, which frankly is more likely to upset distros than leaving them under /usr/lib/rust.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37076022/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37077204",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37077204",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37077204,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDc3MjA0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T22:57:24Z",
    "updated_at": "2014-03-07T22:58:58Z",
    "body": "> Every exploit I am aware of involves one of:\n> - absolute or relative rpath to a world-writable directory\n> - relative rpath in a set*id executable\n\nIt doesn't need to be a world-writable directory, it just has to be writable by an unprivileged user. Since Rust is setting paths relative to the build directory without any knowledge about the final destination, I don't think it is unrealistic for insecure rpaths to be created.\n\n> Just stop doing those things and you'll be fine.\n\nIt's Rust setting the rpath, not the programmer. Insecure defaults are not the fault of the programmer or package. It's not a matter of having people \"stop doing those things\" as I stated in a previous reply.\n\n> Also note that not using rpath means shipping 50 different hashed versions of libstd-*.so in /usr/lib itself, which frankly is more likely to upset distros than leaving them under /usr/lib/rust.\n\nThere's no reason Rust would have to do this. One shared object and one archive are required to support dynamic linking, link-time optimization and static linking - that's _two_ files for each library, not _fifty_. Any other copies will be for cross-compilation and don't need to be available on the host itself. New directories can be added to the system's library search path by a package via `ld.conf.so.d` (like what Rust calls the `sysroot` and uses as a \"fallback\" rpath) but it's really overkill for this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37077204/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37083458",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37083458",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37083458,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDgzNDU4",
    "user": {
      "login": "o11c",
      "id": 964689,
      "node_id": "MDQ6VXNlcjk2NDY4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/964689?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/o11c",
      "html_url": "https://github.com/o11c",
      "followers_url": "https://api.github.com/users/o11c/followers",
      "following_url": "https://api.github.com/users/o11c/following{/other_user}",
      "gists_url": "https://api.github.com/users/o11c/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/o11c/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/o11c/subscriptions",
      "organizations_url": "https://api.github.com/users/o11c/orgs",
      "repos_url": "https://api.github.com/users/o11c/repos",
      "events_url": "https://api.github.com/users/o11c/events{/privacy}",
      "received_events_url": "https://api.github.com/users/o11c/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-08T00:53:19Z",
    "updated_at": "2014-03-08T00:53:19Z",
    "body": "> It doesn't need to be a world-writable directory, it just has to be writable by an unprivileged user.\n> I'm simplifying. I've also stopped mentioning setcap even though it has the same issues as set*id.\n> \n> > Also note that not using rpath means shipping 50 different hashed versions of libstd-*.so in /usr/lib itself, which frankly is more likely to upset distros than leaving them under /usr/lib/rust.\n> \n> There's no reason Rust would have to do this. One shared object and one archive are required to support dynamic linking, link-time optimization and static linking - that's _two_ files for each library, not _fifty_. \n\nFor one version of a library. But consider, once rust gets out of the \"recompile every day\" stage:\n\nAt the API level, each library can reasonably be expected to have 3 \"live\" versions: oldstable, stable, and testing. There is no correlation between which level of a package is used in any particular installation.\n\nSo if:\nlibstd has versions 1.0, 1.1, 1.2\nlibfoo has versions 2.0, 2.1, 2.2 and depends on libstd\nlibbar has versions 3.0, 3.1, 3.2 and depends on libfoo\nthen libbar may have 27 different libbar-hash.so files installed.\n\nIdeally, for a full build of a single package containing both foo and bar, the process is:\n- download source into /build\n- build foo with LIBDIR=/usr/lib, it adds an absolute rpath to the system libstd.\n- install foo with DESTDIR=/build/install, so the actual files are /build/install/usr/lib/rust/libfoo-*.so\n- build bar with SYSROOT=/build/install. When rust sees libfoo in $SYSROOT$LIBDIR/rust, it adds an absolute rpath of just $LIBDIR/rust instead of the full path. In order to run bar from the build dir (e.g. for testing), it _also_ needs a relative rpath of install/$LIBDIR/rust in order to find libfoo. This one _could_ be removed during installation, but since neither /usr/bin/install/ nor /usr/lib/rust/install/ is writable by user, there is no security problem except for the setuid hardlink case.\n- install bar with DESTDIR=/build/install\n- make the distro tarball for foobar out of the contents of /build/install\n\nIf foo and bar are separate packages, the process is much simplified; you can reasonably expect libfoo to be completely installed to the system before libbar begins.\n\n> New directories can be added to the system's library search path by a package via ld.conf.so.d \n> I'm not convinced this is portable between distros.\n\nFinally, while user-level playground is indeed a completely different story, I am worried that attempts to curb the use of rpath for system-level problems will lead to completely breaking it for user-level. Far better to have one solution that works for both system and user, with a small set of changes for a few rare setuid programs, than to have to maintain two completely different and incompatible solutions, one for system installs and one for user ones.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37083458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37910492",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37910492",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37910492,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTEwNDky",
    "user": {
      "login": "lucab",
      "id": 98086,
      "node_id": "MDQ6VXNlcjk4MDg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/98086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lucab",
      "html_url": "https://github.com/lucab",
      "followers_url": "https://api.github.com/users/lucab/followers",
      "following_url": "https://api.github.com/users/lucab/following{/other_user}",
      "gists_url": "https://api.github.com/users/lucab/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lucab/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lucab/subscriptions",
      "organizations_url": "https://api.github.com/users/lucab/orgs",
      "repos_url": "https://api.github.com/users/lucab/repos",
      "events_url": "https://api.github.com/users/lucab/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lucab/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-18T08:51:48Z",
    "updated_at": "2014-03-18T09:29:34Z",
    "body": "cc @wycats @carlhuda @carllerche\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37910492/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37977719",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37977719",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37977719,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTc3NzE5",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-18T19:34:11Z",
    "updated_at": "2014-03-18T19:35:08Z",
    "body": "Static linking is already the default, and I don't really see why dynamic linking is useful at a user level. It's simply a non-issue in my opinion. Dynamic linking with Rust is only useful as a way to reduce duplication between packages. There's no ABI compatibility at all right now (std::reflect) and there _won't be_ for idiomatic libraries that aren't doing contortions to support it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37977719/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37996808",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-37996808",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 37996808,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTk2ODA4",
    "user": {
      "login": "o11c",
      "id": 964689,
      "node_id": "MDQ6VXNlcjk2NDY4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/964689?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/o11c",
      "html_url": "https://github.com/o11c",
      "followers_url": "https://api.github.com/users/o11c/followers",
      "following_url": "https://api.github.com/users/o11c/following{/other_user}",
      "gists_url": "https://api.github.com/users/o11c/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/o11c/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/o11c/subscriptions",
      "organizations_url": "https://api.github.com/users/o11c/orgs",
      "repos_url": "https://api.github.com/users/o11c/repos",
      "events_url": "https://api.github.com/users/o11c/events{/privacy}",
      "received_events_url": "https://api.github.com/users/o11c/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-18T22:27:35Z",
    "updated_at": "2014-03-18T22:27:45Z",
    "body": "> Static linking is already the default, and I don't really see why dynamic linking is useful at a user level.\n\nBecause static linking _doesn't_ _work_ for my crate, which has moderately nasty C dependencies, unless I force all the complexity out to _every_ _single_ _caller_.\n\n> Dynamic linking with Rust is only useful as a way to reduce duplication \n\nNope. It's also a form of encapsulating away internal dependencies. Unless rust's #[link] becomes able to execute arbitrary scripts, rlib just can't do it.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37996808/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/185969596",
    "html_url": "https://github.com/rust-lang/rust/issues/11746#issuecomment-185969596",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11746",
    "id": 185969596,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NTk2OTU5Ng==",
    "user": {
      "login": "Ergus",
      "id": 6975176,
      "node_id": "MDQ6VXNlcjY5NzUxNzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6975176?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ergus",
      "html_url": "https://github.com/Ergus",
      "followers_url": "https://api.github.com/users/Ergus/followers",
      "following_url": "https://api.github.com/users/Ergus/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ergus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ergus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ergus/subscriptions",
      "organizations_url": "https://api.github.com/users/Ergus/orgs",
      "repos_url": "https://api.github.com/users/Ergus/repos",
      "events_url": "https://api.github.com/users/Ergus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ergus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-18T22:55:16Z",
    "updated_at": "2016-02-18T22:55:16Z",
    "body": "Hi guys, I am pretty new using rust. I am wrapping a C library to rust in Linux64 bit. I am trying to set the rpath like in gcc -Wl,-rpath,the path. But in rust there is not a clear documentation about that, the -C rpath option is doing nothing. I have different versions for the library so I need the rpath variable and LD_LIBRARY_PATH is not an option because I have several executables and th shared objects are in different path. I don't use cargo either because my software runs over CMake so I am using rustc directly.\nPlease some exact equivalent to:\ngcc -Wl,-rpath,${PWD}/../lib myfile.c -o myfile  ???\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/185969596/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
