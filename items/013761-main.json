{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/13761",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/13761/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/13761/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/13761/events",
  "html_url": "https://github.com/rust-lang/rust/pull/13761",
  "id": 32262606,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTUxODgyNjU=",
  "number": 13761,
  "title": "Add next_permutation and prev_permutation onto MutableTotalOrdVector<T>.",
  "user": {
    "login": "exscape",
    "id": 143653,
    "node_id": "MDQ6VXNlcjE0MzY1Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/143653?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/exscape",
    "html_url": "https://github.com/exscape",
    "followers_url": "https://api.github.com/users/exscape/followers",
    "following_url": "https://api.github.com/users/exscape/following{/other_user}",
    "gists_url": "https://api.github.com/users/exscape/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/exscape/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/exscape/subscriptions",
    "organizations_url": "https://api.github.com/users/exscape/orgs",
    "repos_url": "https://api.github.com/users/exscape/repos",
    "events_url": "https://api.github.com/users/exscape/events{/privacy}",
    "received_events_url": "https://api.github.com/users/exscape/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 7,
  "created_at": "2014-04-25T20:08:33Z",
  "updated_at": "2014-06-14T22:11:06Z",
  "closed_at": "2014-06-02T18:01:39Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/13761",
    "html_url": "https://github.com/rust-lang/rust/pull/13761",
    "diff_url": "https://github.com/rust-lang/rust/pull/13761.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/13761.patch",
    "merged_at": null
  },
  "body": "Okay, so first out, I'm no sure if this is okay as a pull request (without prior discussion or an RFC). However, considering that\n\n> Pull requests will be treated as \"review requests\"\n\nand the fact that the community is supposed to be friendly to strangers and beginners, I figured not too much could go wrong; worst case, the pull request is not accepted, right? :-)\nI looked at the existing RFCs, but all of them felt bigger in scope than simply adding a few function (causing no backwards incompatibility).\n\nAnyway. This adds two methods to mutable vectors (`MutableTotalOrdVector<T>`): next_permutation() and prev_permutation().\nThey mutate the vector to the next/previous lexicographic permutation, _in place_.  \nThe existing permutation functionality, [ImmutableCloneableVector::permutations()](http://static.rust-lang.org/doc/master/std/slice/trait.ImmutableCloneableVector.html#tymethod.permutations), uses iterators and clones the entire vector _each iteration_, resulting in bad performance. For even a 10-element vector, that causes 10! = 3628800 calls to clone(), on the entire 10-element vector.\nIt also uses a swapping algorithm which does not generate lexicographic permutations; if you want lexicographical permutations, as far as I can tell, Rust currently cannot provide that.\n\nSo does Rust need this? I don't know. I wanted to use it, and realized it didn't exist, so I created it. Others may disagree about the necessity, of course.\n\nSample benchmarks:\n\n```\ntest bench_iterated_permutations_one_iter           ... bench:       721 ns/iter (+/- 212)\ntest bench_lexicographic_permutations_one_iter      ... bench:        14 ns/iter (+/- 1)\ntest bench_iterated_permutations_bulk               ... bench:   2449743 ns/iter (+/- 328460)\ntest bench_lexicographic_permutations_bulk          ... bench:     69704 ns/iter (+/- 2235)\n```\n\n51x faster per single iteration (one permutation per benchmark iteration), 35x faster to loop through all 5040 permutations of range(0,7) per benchmark iteration.\n\nOne possible (style-ish) issue with this code is the return types: they return `true` if successful, and `false` if the vector was already at the first/last permutation. This makes looping rather easy, but I'm not sure if it's considered \"pretty\", so to speak. However, since iterators are much too expensive, at least if returning a cloned vector each iteration is the only way to make them work, I found no better way to solve this, and at least IMHO it looks fine.\nAlso, I'm not sure if the comments inside the actual functions is considered excessive or not, but that is of course easily changed, if that would be the case.  \n\nBTW, I have ran more tests than actually submitted; the full suite would be excessive to submit, but can be viewed [here](https://github.com/exscape/Rust/blob/c70a5869fbe255a817abeaee4d19407c31ae1974/permutation-tests.rs) (please excuse the messy code).\n",
  "closed_by": {
    "login": "alexcrichton",
    "id": 64996,
    "node_id": "MDQ6VXNlcjY0OTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexcrichton",
    "html_url": "https://github.com/alexcrichton",
    "followers_url": "https://api.github.com/users/alexcrichton/followers",
    "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
    "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
    "repos_url": "https://api.github.com/users/alexcrichton/repos",
    "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/13761/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/13761/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
