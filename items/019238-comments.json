[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64119729",
    "html_url": "https://github.com/rust-lang/rust/pull/19238#issuecomment-64119729",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19238",
    "id": 64119729,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTE5NzI5",
    "user": {
      "login": "rust-highfive",
      "id": 7378925,
      "node_id": "MDQ6VXNlcjczNzg5MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7378925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rust-highfive",
      "html_url": "https://github.com/rust-highfive",
      "followers_url": "https://api.github.com/users/rust-highfive/followers",
      "following_url": "https://api.github.com/users/rust-highfive/following{/other_user}",
      "gists_url": "https://api.github.com/users/rust-highfive/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rust-highfive/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rust-highfive/subscriptions",
      "organizations_url": "https://api.github.com/users/rust-highfive/orgs",
      "repos_url": "https://api.github.com/users/rust-highfive/repos",
      "events_url": "https://api.github.com/users/rust-highfive/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rust-highfive/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-23T14:30:22Z",
    "updated_at": "2014-11-23T14:30:22Z",
    "body": "<img src=\"http://www.joshmatthews.net/warning.svg\" alt=\"warning\" height=20> **Warning** <img src=\"http://www.joshmatthews.net/warning.svg\" alt=\"warning\" height=20>\n- These commits modify **unsafe code**. Please review it carefully!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64119729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64121482",
    "html_url": "https://github.com/rust-lang/rust/pull/19238#issuecomment-64121482",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19238",
    "id": 64121482,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTIxNDgy",
    "user": {
      "login": "mahkoh",
      "id": 1882250,
      "node_id": "MDQ6VXNlcjE4ODIyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1882250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahkoh",
      "html_url": "https://github.com/mahkoh",
      "followers_url": "https://api.github.com/users/mahkoh/followers",
      "following_url": "https://api.github.com/users/mahkoh/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahkoh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahkoh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahkoh/subscriptions",
      "organizations_url": "https://api.github.com/users/mahkoh/orgs",
      "repos_url": "https://api.github.com/users/mahkoh/repos",
      "events_url": "https://api.github.com/users/mahkoh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahkoh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-23T15:27:25Z",
    "updated_at": "2014-11-23T15:27:25Z",
    "body": "You can write a much more efficient getcwd on linux https://gist.github.com/anonymous/4673dd054506aa254086\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64121482/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64122846",
    "html_url": "https://github.com/rust-lang/rust/pull/19238#issuecomment-64122846",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19238",
    "id": 64122846,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTIyODQ2",
    "user": {
      "login": "nodakai",
      "id": 90726,
      "node_id": "MDQ6VXNlcjkwNzI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/90726?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nodakai",
      "html_url": "https://github.com/nodakai",
      "followers_url": "https://api.github.com/users/nodakai/followers",
      "following_url": "https://api.github.com/users/nodakai/following{/other_user}",
      "gists_url": "https://api.github.com/users/nodakai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nodakai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nodakai/subscriptions",
      "organizations_url": "https://api.github.com/users/nodakai/orgs",
      "repos_url": "https://api.github.com/users/nodakai/repos",
      "events_url": "https://api.github.com/users/nodakai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nodakai/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-23T16:05:29Z",
    "updated_at": "2014-11-23T16:05:29Z",
    "body": "@mahkoh You assumed the maximum path length to be 4096 bytes but that is not true on Linux ext4 (and perhaps on many other filesystems):\n\n```\n$ p=`printf \"test%0248ddir\" 0`; for k in {1..20}; do mkdir $p && cd $p; done\n$ pwd | wc\n      1       1    5134\n```\n\nThis is why I had to fall back to `Vec`.\n\nI'll consider using `GenericPathUnsafe::new_unchecked()`, thank you very much.  (But I don't expect more performance improvement than a few us.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64122846/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64122986",
    "html_url": "https://github.com/rust-lang/rust/pull/19238#issuecomment-64122986",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19238",
    "id": 64122986,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTIyOTg2",
    "user": {
      "login": "mahkoh",
      "id": 1882250,
      "node_id": "MDQ6VXNlcjE4ODIyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1882250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahkoh",
      "html_url": "https://github.com/mahkoh",
      "followers_url": "https://api.github.com/users/mahkoh/followers",
      "following_url": "https://api.github.com/users/mahkoh/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahkoh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahkoh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahkoh/subscriptions",
      "organizations_url": "https://api.github.com/users/mahkoh/orgs",
      "repos_url": "https://api.github.com/users/mahkoh/repos",
      "events_url": "https://api.github.com/users/mahkoh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahkoh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-23T16:09:38Z",
    "updated_at": "2014-11-23T16:09:38Z",
    "body": "The case for paths longer than the page size is very inefficient. See the glibc source. Allowing only paths of size 4096 should be sufficient as long as it's documented.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64122986/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64125166",
    "html_url": "https://github.com/rust-lang/rust/pull/19238#issuecomment-64125166",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19238",
    "id": 64125166,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTI1MTY2",
    "user": {
      "login": "nodakai",
      "id": 90726,
      "node_id": "MDQ6VXNlcjkwNzI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/90726?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nodakai",
      "html_url": "https://github.com/nodakai",
      "followers_url": "https://api.github.com/users/nodakai/followers",
      "following_url": "https://api.github.com/users/nodakai/following{/other_user}",
      "gists_url": "https://api.github.com/users/nodakai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nodakai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nodakai/subscriptions",
      "organizations_url": "https://api.github.com/users/nodakai/orgs",
      "repos_url": "https://api.github.com/users/nodakai/repos",
      "events_url": "https://api.github.com/users/nodakai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nodakai/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-23T17:04:15Z",
    "updated_at": "2014-11-23T17:05:07Z",
    "body": "@mahkoh \n\n> Allowing only paths of size 4096 should be sufficient as long as it's documented.\n\nI don't agree with you on this point.  Let's hear other people's opinions.  Personally I don't describe dropping support for a slow but legitimate case as \"efficient\".\n\nAccording to my benchmark on Ubuntu 12.04 (64 bit Sandy 3.4 GHz,) it typically takes 0.6 to 1.5 ms to retrieve a 25 K bytes long cwd with glibc.  This is indeed far slower than the <= `PAGESIZE` case (about 1 us,) but is not so slow to reject as an error, IMHO.\n\n``` c\n#include <stdio.h>\n#include <assert.h>\n#include <stdint.h>\n#include <unistd.h>\n\nenum { BUFLEN = 1024 * 1024 };\n\nstatic inline uint64_t rdtsc(uint64_t *id) {\n    uint64_t lo, hi;\n    __asm__ __volatile__ ( \"rdtscp\" : \"=a\"(lo), \"=d\"(hi), \"=c\"(*id) : :  );\n    return (hi << 32) | lo;\n}\n\nint main() {\n    int i, diff;\n    char buf[BUFLEN];\n\n    uint64_t t0, t1, id0, id1;\n    for (i = 0; i < 10; ++i) {\n        t0 = rdtsc(&id0);\n        if ( ! getcwd(buf, sizeof buf)) {\n            perror(\"getcwd(3)\");\n            return 10;\n        }\n        t1 = rdtsc(&id1);\n\n        assert(id0 == id1); /* run with taskset(1) */\n    }\n\n    printf(\"cwd==[%s]\\n\", buf);\n    diff = t1 - t0;\n    printf(\"%.3g cycles; %.3g usec\\n\", (double)diff, diff / 3.4e3);\n\n    return 0;\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64125166/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66170151",
    "html_url": "https://github.com/rust-lang/rust/pull/19238#issuecomment-66170151",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19238",
    "id": 66170151,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MTcwMTUx",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-08T19:21:31Z",
    "updated_at": "2014-12-08T19:21:31Z",
    "body": "Closing due to inactivity, but feel free to open with a rebase and my comments addressed!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66170151/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
