[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153916439",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-153916439",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 153916439,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MzkxNjQzOQ==",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-05T00:39:52Z",
    "updated_at": "2018-07-11T21:58:00Z",
    "body": "@alexcrichton Can you elaborate on the blockers?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153916439/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153918809",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-153918809",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 153918809,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MzkxODgwOQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-05T00:55:12Z",
    "updated_at": "2018-07-11T21:58:05Z",
    "body": "Certainly! Known issues to me:\n- `#[thread_local]` translates directly to the `thread_local` attribute in LLVM. This isn't supported on all platforms, and it's not even supported on all distributions within the same platform (e.g. 10.6 doesn't support it but 10.7 does). I don't think this is necessarily a blocker, but I also don't think we have many attributes and such which are so platform specific like this.\n- Statics that are thread local shouldn't require `Sync` - https://github.com/rust-lang/rust/issues/18001\n- Statics that are thread local should either not borrow for the `'static` lifetime or should be unsafe to access - https://github.com/rust-lang/rust/issues/17954\n- Statics can currently reference other thread local statics, but this is a bug - https://github.com/rust-lang/rust/issues/18712\n\nThat's at least what I can think of at this time!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153918809/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/185080025",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-185080025",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 185080025,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NTA4MDAyNQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-17T07:39:12Z",
    "updated_at": "2016-02-17T07:39:12Z",
    "body": "A note, we've [since implemented](https://github.com/rust-lang/rust/pull/30417) `cfg(target_thread_local)` which is in turn itself feature gated, but this may ease the \"this isn't implemented on all platforms\" worry.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/185080025/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/243506071",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-243506071",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 243506071,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzUwNjA3MQ==",
    "user": {
      "login": "alexandermerritt",
      "id": 3632069,
      "node_id": "MDQ6VXNlcjM2MzIwNjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3632069?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexandermerritt",
      "html_url": "https://github.com/alexandermerritt",
      "followers_url": "https://api.github.com/users/alexandermerritt/followers",
      "following_url": "https://api.github.com/users/alexandermerritt/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexandermerritt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexandermerritt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexandermerritt/subscriptions",
      "organizations_url": "https://api.github.com/users/alexandermerritt/orgs",
      "repos_url": "https://api.github.com/users/alexandermerritt/repos",
      "events_url": "https://api.github.com/users/alexandermerritt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexandermerritt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-08-30T16:56:25Z",
    "updated_at": "2016-08-30T16:56:25Z",
    "body": "Hi! Is there any update on the status? Nightly still requires statics to be `Sync`. I tried with:\n\n```\nrustc 1.13.0-nightly (acd3f796d 2016-08-28)\nbinary: rustc\ncommit-hash: acd3f796d26e9295db1eba1ef16e0d4cc3b96dd5\ncommit-date: 2016-08-28\nhost: x86_64-unknown-linux-gnu\nrelease: 1.13.0-nightly\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/243506071/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/314075455",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-314075455",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 314075455,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDA3NTQ1NQ==",
    "user": {
      "login": "mneumann",
      "id": 34112,
      "node_id": "MDQ6VXNlcjM0MTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/34112?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mneumann",
      "html_url": "https://github.com/mneumann",
      "followers_url": "https://api.github.com/users/mneumann/followers",
      "following_url": "https://api.github.com/users/mneumann/following{/other_user}",
      "gists_url": "https://api.github.com/users/mneumann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mneumann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mneumann/subscriptions",
      "organizations_url": "https://api.github.com/users/mneumann/orgs",
      "repos_url": "https://api.github.com/users/mneumann/repos",
      "events_url": "https://api.github.com/users/mneumann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mneumann/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-10T11:08:56Z",
    "updated_at": "2017-07-10T11:08:56Z",
    "body": "@alexcrichton Any news on ```#[thread_local]``` becoming stabilized? AFAIK, at the moment it is impossible on DragonFly to access ```errno``` variable from stable code, other than directly from libstd. This blocks crates like ```nix``` on DragonFly, which want to access errno as well, but libstd is not exposing it, and stable code is not allowed to use feature(thread_local).",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/314075455/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/314115129",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-314115129",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 314115129,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDExNTEyOQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-10T14:03:29Z",
    "updated_at": "2017-07-10T14:03:29Z",
    "body": "@mneumann no, no progress. I'd recommend a C shim for now.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/314115129/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/314126082",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-314126082",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 314126082,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDEyNjA4Mg==",
    "user": {
      "login": "mneumann",
      "id": 34112,
      "node_id": "MDQ6VXNlcjM0MTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/34112?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mneumann",
      "html_url": "https://github.com/mneumann",
      "followers_url": "https://api.github.com/users/mneumann/followers",
      "following_url": "https://api.github.com/users/mneumann/following{/other_user}",
      "gists_url": "https://api.github.com/users/mneumann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mneumann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mneumann/subscriptions",
      "organizations_url": "https://api.github.com/users/mneumann/orgs",
      "repos_url": "https://api.github.com/users/mneumann/repos",
      "events_url": "https://api.github.com/users/mneumann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mneumann/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-10T14:39:04Z",
    "updated_at": "2017-07-10T14:39:04Z",
    "body": "@alexcrichton thanks. I am doing a shim now https://github.com/mneumann/errno-dragonfly-rs. ",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/314126082/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/328177697",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-328177697",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 328177697,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyODE3NzY5Nw==",
    "user": {
      "login": "real-felix",
      "id": 18555389,
      "node_id": "MDQ6VXNlcjE4NTU1Mzg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/18555389?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/real-felix",
      "html_url": "https://github.com/real-felix",
      "followers_url": "https://api.github.com/users/real-felix/followers",
      "following_url": "https://api.github.com/users/real-felix/following{/other_user}",
      "gists_url": "https://api.github.com/users/real-felix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/real-felix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/real-felix/subscriptions",
      "organizations_url": "https://api.github.com/users/real-felix/orgs",
      "repos_url": "https://api.github.com/users/real-felix/repos",
      "events_url": "https://api.github.com/users/real-felix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/real-felix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-09-08T18:18:48Z",
    "updated_at": "2017-09-08T18:19:13Z",
    "body": "The optimizations are too aggressive ;)\r\n\r\nSee this code:\r\n\r\n```\r\n#![feature(thread_local)]\r\n\r\n#[thread_local]\r\npub static FOO: [&str; 1] = [ \"Hello\" ];\r\n\r\nfn change_foo(s: &'static str) {\r\n    FOO[0] = s;\r\n}\r\n\r\nfn main() {\r\n    println!(\"{}\", FOO[0]);\r\n    change_foo(\"Test\");\r\n    println!(\"{}\", FOO[0]);\r\n}\r\n```\r\n\r\nThe compiler does not detect the side effect in `change_foo` and removes the call in release. The output is:\r\n\r\n```\r\nHello\r\nHello\r\n```",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/328177697/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/328179176",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-328179176",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 328179176,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyODE3OTE3Ng==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-09-08T18:24:53Z",
    "updated_at": "2017-09-08T18:24:53Z",
    "body": "cc @eddyb, @Boiethios your example shouldn't actually compile because it should require `static mut`, not just `static`",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/328179176/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/328179752",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-328179752",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 328179752,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyODE3OTc1Mg==",
    "user": {
      "login": "real-felix",
      "id": 18555389,
      "node_id": "MDQ6VXNlcjE4NTU1Mzg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/18555389?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/real-felix",
      "html_url": "https://github.com/real-felix",
      "followers_url": "https://api.github.com/users/real-felix/followers",
      "following_url": "https://api.github.com/users/real-felix/following{/other_user}",
      "gists_url": "https://api.github.com/users/real-felix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/real-felix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/real-felix/subscriptions",
      "organizations_url": "https://api.github.com/users/real-felix/orgs",
      "repos_url": "https://api.github.com/users/real-felix/repos",
      "events_url": "https://api.github.com/users/real-felix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/real-felix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-09-08T18:27:22Z",
    "updated_at": "2017-09-08T18:27:22Z",
    "body": "It compiles with the last nightly rustc.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/328179752/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/328181492",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-328181492",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 328181492,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyODE4MTQ5Mg==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-09-08T18:34:28Z",
    "updated_at": "2017-09-08T18:34:56Z",
    "body": "Oh, drat, this is from my shortening of the lifetime, i.e https://github.com/rust-lang/rust/blob/dead08cb331343b84564628b139b657f93548320/src/librustc/middle/mem_categorization.rs#L657-L662\r\n@nikomatsakis what should we do here? I want a static lvalue, with a non-`'static` lifetime.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/328181492/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358170040",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-358170040",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 358170040,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODE3MDA0MA==",
    "user": {
      "login": "cramertj",
      "id": 5963049,
      "node_id": "MDQ6VXNlcjU5NjMwNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5963049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cramertj",
      "html_url": "https://github.com/cramertj",
      "followers_url": "https://api.github.com/users/cramertj/followers",
      "following_url": "https://api.github.com/users/cramertj/following{/other_user}",
      "gists_url": "https://api.github.com/users/cramertj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cramertj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cramertj/subscriptions",
      "organizations_url": "https://api.github.com/users/cramertj/orgs",
      "repos_url": "https://api.github.com/users/cramertj/repos",
      "events_url": "https://api.github.com/users/cramertj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cramertj/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-17T01:59:25Z",
    "updated_at": "2018-01-17T01:59:25Z",
    "body": " #18001, #17954 and https://github.com/rust-lang/rust/issues/18712 were fixed by https://github.com/rust-lang/rust/pull/43746.\r\n\r\n@alexcrichton @eddyb Do you know any other blockers, or is this ready for stabilization?",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358170040/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358203526",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-358203526",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 358203526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODIwMzUyNg==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-17T05:44:06Z",
    "updated_at": "2018-01-17T05:44:06Z",
    "body": "There's some emulation `clang` does IIRC, that we might want to do ourselves, to support `#[thread_local]` everywhere.\r\n\r\nAnd there's #47053 which results from my initial attempt to limit references to thread-local statics to the function they were created in.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358203526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358329382",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-358329382",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 358329382,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODMyOTM4Mg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-17T14:56:18Z",
    "updated_at": "2018-01-17T14:56:18Z",
    "body": "@cramertj I've personally been under the impression that we're holding out on stabilizing this for as long as possible. We've stabilized very few (AFAIK) platform-specific attributes like this and I at least personally haven't ever looked to hard into stabilizing this.\r\n\r\nOne blocker (in my mind at least) is what @eddyb mentioned where this is a \"portable\" attribute yet LLVM has a bunch of emulation on targets that don't actually support it (I think MinGW is an example). I don't believe we should allow the attribute on such targets, but we'd have to do a lot of investigation to figure out those targets.\r\n\r\nIs there motivation for stabilizing this though? That'd certainly provide some good motivation for digging out any remaining issues and looking at it very closely. I'd just personally been under the impression that there's little motivation to stabilize this other than it'd be a \"nice to have\" in situations here and there.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358329382/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358341070",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-358341070",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 358341070,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODM0MTA3MA==",
    "user": {
      "login": "Amanieu",
      "id": 278509,
      "node_id": "MDQ6VXNlcjI3ODUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amanieu",
      "html_url": "https://github.com/Amanieu",
      "followers_url": "https://api.github.com/users/Amanieu/followers",
      "following_url": "https://api.github.com/users/Amanieu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions",
      "organizations_url": "https://api.github.com/users/Amanieu/orgs",
      "repos_url": "https://api.github.com/users/Amanieu/repos",
      "events_url": "https://api.github.com/users/Amanieu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amanieu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-17T15:32:57Z",
    "updated_at": "2018-01-17T15:32:57Z",
    "body": "I am using `#[thread_local]` in my code in a `no_std` context: I allocate space for the TLS segment and set up the architecture TLS register to point to it. Therefore I think that it is important to expose the `#[thread_local]` attribute so that it can at least be used by low-level code.\r\n\r\nThe only thing that I'm not too happy about is that `Sync` is no longer required for `#[thread_local]`: this makes it more difficult to write signal-safe code, since all communication between signal handlers and the main thread should be done through atomic types.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358341070/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358381263",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-358381263",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 358381263,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODM4MTI2Mw==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-17T17:34:02Z",
    "updated_at": "2018-01-17T17:34:02Z",
    "body": "@Amanieu Signal/interrupt-safe code has other requirements which are not satisfied by current Rust.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358381263/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358382547",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-358382547",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 358382547,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODM4MjU0Nw==",
    "user": {
      "login": "Amanieu",
      "id": 278509,
      "node_id": "MDQ6VXNlcjI3ODUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amanieu",
      "html_url": "https://github.com/Amanieu",
      "followers_url": "https://api.github.com/users/Amanieu/followers",
      "following_url": "https://api.github.com/users/Amanieu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions",
      "organizations_url": "https://api.github.com/users/Amanieu/orgs",
      "repos_url": "https://api.github.com/users/Amanieu/repos",
      "events_url": "https://api.github.com/users/Amanieu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amanieu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-17T17:38:23Z",
    "updated_at": "2018-01-17T17:38:23Z",
    "body": "@eddyb Not really, all you need to do is treat the signal handler as a separate thread of execution. The *only* requirement you need to enforce safety is that objects which are accessed by both the main thread and the signal handler must be `Sync`.\r\n\r\nOf course you can still cause deadlocks if the main thread and signal handler both try to grab the same lock, but that's not a safety issue.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358382547/reactions",
      "total_count": 7,
      "+1": 6,
      "-1": 1,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/427730927",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-427730927",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 427730927,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzczMDkyNw==",
    "user": {
      "login": "dtolnay",
      "id": 1940490,
      "node_id": "MDQ6VXNlcjE5NDA0OTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dtolnay",
      "html_url": "https://github.com/dtolnay",
      "followers_url": "https://api.github.com/users/dtolnay/followers",
      "following_url": "https://api.github.com/users/dtolnay/following{/other_user}",
      "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions",
      "organizations_url": "https://api.github.com/users/dtolnay/orgs",
      "repos_url": "https://api.github.com/users/dtolnay/repos",
      "events_url": "https://api.github.com/users/dtolnay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dtolnay/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-10-08T06:18:35Z",
    "updated_at": "2018-10-08T06:18:35Z",
    "body": "@cramertj regarding remaining blockers, I would consider the behavior that @Boiethios reported above needs to be fixed before stabilization. I filed #54901 to follow up.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/427730927/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/511278048",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-511278048",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 511278048,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTI3ODA0OA==",
    "user": {
      "login": "josephlr",
      "id": 5506060,
      "node_id": "MDQ6VXNlcjU1MDYwNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5506060?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/josephlr",
      "html_url": "https://github.com/josephlr",
      "followers_url": "https://api.github.com/users/josephlr/followers",
      "following_url": "https://api.github.com/users/josephlr/following{/other_user}",
      "gists_url": "https://api.github.com/users/josephlr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/josephlr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/josephlr/subscriptions",
      "organizations_url": "https://api.github.com/users/josephlr/orgs",
      "repos_url": "https://api.github.com/users/josephlr/repos",
      "events_url": "https://api.github.com/users/josephlr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/josephlr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-07-15T05:28:38Z",
    "updated_at": "2019-07-15T05:28:38Z",
    "body": "Copying @gnzlbg's comment from https://github.com/rust-lang/libc/pull/1432\r\n\r\n> It appears that 1) `thread_local!` solves the problem for most people, and 2) the main uncertainty is that `#[thread_local]` isn't portable.\r\n> \r\n> Maybe we could reduce the scope of an initial version of `#[thread_local]` to `extern static` _declarations_. If the target does not support `#[thread_local]`, well then the `extern static` _declaration_ is incorrect since there cannot be a _definition_ anywhere, and using it would already be UB. We could add on top of this a \"best effort\" compilation error, e.g., if the compiler knows that the target doesn't support it.\r\n\r\nI agree with the above, [`thread_local!`](https://doc.rust-lang.org/std/macro.thread_local.html) and `#[thread_local]`  for `extern static` unblocks virtually all use-cases, and would allow interfaces to `errno` using stable Rust on all platforms (see the linked `libc` issue for more context).\r\n\r\nRight now there is no way (with stable Rust) to use C thread local variables via FFI without writing additional C glue code, [see the `errno-dragonfly` crate](https://github.com/mneumann/errno-dragonfly-rs) for an example of such a (necessary) hack. \r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/511278048/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/511306554",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-511306554",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 511306554,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTMwNjU1NA==",
    "user": {
      "login": "gnzlbg",
      "id": 904614,
      "node_id": "MDQ6VXNlcjkwNDYxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/904614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnzlbg",
      "html_url": "https://github.com/gnzlbg",
      "followers_url": "https://api.github.com/users/gnzlbg/followers",
      "following_url": "https://api.github.com/users/gnzlbg/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnzlbg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnzlbg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnzlbg/subscriptions",
      "organizations_url": "https://api.github.com/users/gnzlbg/orgs",
      "repos_url": "https://api.github.com/users/gnzlbg/repos",
      "events_url": "https://api.github.com/users/gnzlbg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnzlbg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-07-15T07:57:54Z",
    "updated_at": "2019-07-15T07:57:54Z",
    "body": "cc @joshtriplett: allowing `#[thread_local]` on `extern static`s might be something for the agenda of the WG-FFI, since interfacing with `errno` is kind of an important part of the C FFI puzzle.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/511306554/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/513129179",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-513129179",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 513129179,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzEyOTE3OQ==",
    "user": {
      "login": "joshtriplett",
      "id": 162737,
      "node_id": "MDQ6VXNlcjE2MjczNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/162737?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshtriplett",
      "html_url": "https://github.com/joshtriplett",
      "followers_url": "https://api.github.com/users/joshtriplett/followers",
      "following_url": "https://api.github.com/users/joshtriplett/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshtriplett/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshtriplett/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshtriplett/subscriptions",
      "organizations_url": "https://api.github.com/users/joshtriplett/orgs",
      "repos_url": "https://api.github.com/users/joshtriplett/repos",
      "events_url": "https://api.github.com/users/joshtriplett/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshtriplett/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-07-19T07:44:21Z",
    "updated_at": "2019-07-19T07:44:21Z",
    "body": "@gnzlbg Thanks! Agreed, we definitely need thread-local-variable support.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/513129179/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/549056545",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-549056545",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 549056545,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTA1NjU0NQ==",
    "user": {
      "login": "cbiffle",
      "id": 45247,
      "node_id": "MDQ6VXNlcjQ1MjQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/45247?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cbiffle",
      "html_url": "https://github.com/cbiffle",
      "followers_url": "https://api.github.com/users/cbiffle/followers",
      "following_url": "https://api.github.com/users/cbiffle/following{/other_user}",
      "gists_url": "https://api.github.com/users/cbiffle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cbiffle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cbiffle/subscriptions",
      "organizations_url": "https://api.github.com/users/cbiffle/orgs",
      "repos_url": "https://api.github.com/users/cbiffle/repos",
      "events_url": "https://api.github.com/users/cbiffle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cbiffle/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-11-02T15:59:33Z",
    "updated_at": "2019-11-02T15:59:33Z",
    "body": "Independent of the FFI need for `extern static`...\r\n\r\nLike @Amanieu from last year, I'm using `#[thread_local]` in a `no_std` context (an RTOS, in my case), with the OS runtime handling management of the TLS pointer and memory. (They and I differ on one point, which is that I'm delighted that `#[thread_local]` lifts the `Sync` requirement for `static`. It seems good and right.)\r\n\r\n`#[thread_local]` is currently the only unstable feature I *have* to rely on for program correctness. (I'm using a couple others for convenience, but I could lower them by hand if required. I cannot easily replicate the TLS link behavior by hand.)\r\n\r\nI haven't dug into the compiler side of this, so this question may be naive, but is the `has_elf_tls` LLVM target feature not sufficient to gate this? We have a few other language features (if not *attributes* per se) that are gated by target support -- for example, my platform doesn't have `AtomicU64`. So it doesn't seem entirely without precedent.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/549056545/reactions",
      "total_count": 5,
      "+1": 5,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/564941453",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-564941453",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 564941453,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NDk0MTQ1Mw==",
    "user": {
      "login": "tuxillo",
      "id": 130578,
      "node_id": "MDQ6VXNlcjEzMDU3OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/130578?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuxillo",
      "html_url": "https://github.com/tuxillo",
      "followers_url": "https://api.github.com/users/tuxillo/followers",
      "following_url": "https://api.github.com/users/tuxillo/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuxillo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuxillo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuxillo/subscriptions",
      "organizations_url": "https://api.github.com/users/tuxillo/orgs",
      "repos_url": "https://api.github.com/users/tuxillo/repos",
      "events_url": "https://api.github.com/users/tuxillo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuxillo/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-12-12T10:14:54Z",
    "updated_at": "2019-12-12T10:14:54Z",
    "body": "> @alexcrichton Any news on `#[thread_local]` becoming stabilized? AFAIK, at the moment it is impossible on DragonFly to access `errno` variable from stable code, other than directly from libstd. This blocks crates like `nix` on DragonFly, which want to access errno as well, but libstd is not exposing it, and stable code is not allowed to use feature(thread_local).\r\n\r\nWe now provide __errno_location() since this commit:\r\n\r\nhttps://gitweb.dragonflybsd.org/dragonfly.git/commitdiff/60d311380ff2bf02a87700a0f3e6eb53e6034920",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/564941453/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/581667920",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-581667920",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 581667920,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MTY2NzkyMA==",
    "user": {
      "login": "bstrie",
      "id": 865233,
      "node_id": "MDQ6VXNlcjg2NTIzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bstrie",
      "html_url": "https://github.com/bstrie",
      "followers_url": "https://api.github.com/users/bstrie/followers",
      "following_url": "https://api.github.com/users/bstrie/following{/other_user}",
      "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions",
      "organizations_url": "https://api.github.com/users/bstrie/orgs",
      "repos_url": "https://api.github.com/users/bstrie/repos",
      "events_url": "https://api.github.com/users/bstrie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bstrie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-02-03T23:23:11Z",
    "updated_at": "2020-02-03T23:23:11Z",
    "body": "The original issue suggests that the `thread_local` attribute in LLVM isn't supported across all platforms, but has platform support improved in the time since this issue was opened? Or do we expect that it will always remain nonportable? (Is there an LLVM tracking issue?)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/581667920/reactions",
      "total_count": 5,
      "+1": 5,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/673593212",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-673593212",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 673593212,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzU5MzIxMg==",
    "user": {
      "login": "nicbn",
      "id": 20824501,
      "node_id": "MDQ6VXNlcjIwODI0NTAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/20824501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicbn",
      "html_url": "https://github.com/nicbn",
      "followers_url": "https://api.github.com/users/nicbn/followers",
      "following_url": "https://api.github.com/users/nicbn/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicbn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicbn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicbn/subscriptions",
      "organizations_url": "https://api.github.com/users/nicbn/orgs",
      "repos_url": "https://api.github.com/users/nicbn/repos",
      "events_url": "https://api.github.com/users/nicbn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicbn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-08-13T16:59:09Z",
    "updated_at": "2020-08-13T16:59:09Z",
    "body": "Hello, `#[thread_local]` can currently be applied to fields of a struct without any errors or warnings (it won't work oc):\r\n\r\n```\r\n#![feature(thread_local)]\r\n\r\nuse std::sync::{Arc, Mutex};\r\n\r\n#[derive(Debug)]\r\nstruct Foo {\r\n    #[thread_local]\r\n    bar: &'static str,\r\n}\r\n\r\nfn main() {\r\n    let foo = Arc::new(Mutex::new(Foo {\r\n        bar: \"bar\",  \r\n    }));\r\n    \r\n    dbg!(foo.lock().unwrap().bar);\r\n    \r\n    let foo2 = foo.clone();\r\n    std::thread::spawn(move || {\r\n        foo2.lock().unwrap().bar = \"baz\";\r\n    }).join().unwrap();\r\n\r\n    dbg!(foo.lock().unwrap().bar);\r\n}\r\n```\r\n\r\nOutputs:\r\n```\r\n[src/main.rs:16] foo.lock().unwrap().bar = \"bar\"\r\n[src/main.rs:23] foo.lock().unwrap().bar = \"baz\"\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/673593212/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 2
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731238161",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-731238161",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 731238161,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTIzODE2MQ==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-11-20T15:33:07Z",
    "updated_at": "2020-11-20T17:28:53Z",
    "body": "By looking at the issue description, `#![feature(thread_local)]` seems unsound, but it's not caught by the `incomplete_features` lint:\r\nhttps://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=0d95cf5246b5b41ddc6776527fdc89e5",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731238161/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731246692",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-731246692",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 731246692,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTI0NjY5Mg==",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-11-20T15:48:20Z",
    "updated_at": "2020-11-20T15:48:20Z",
    "body": "Hm, that's fair... OTOH if we made `incomplete_features` fire we'd have to enable that lint in library/std, so we'd not easily notice when another unsound feature is enabled.\r\n\r\nIMO it would be better to just make all accesses to these statics unsafe.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731246692/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731249034",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-731249034",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 731249034,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTI0OTAzNA==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-11-20T15:52:35Z",
    "updated_at": "2020-11-20T17:33:20Z",
    "body": "@RalfJung Well, I just read https://github.com/rust-lang/rust/pull/71435#issuecomment-618018581 after commenting and am wondering whether I should edit and hide my comment or not.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731249034/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731264500",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-731264500",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 731264500,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTI2NDUwMA==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-11-20T16:19:31Z",
    "updated_at": "2020-11-20T17:33:28Z",
    "body": "@RalfJung It seems that #49682 is the only soundness problem, so this may already have implementation strategy: banning the case in #49682. Ignore me if so. Sorry for bothering.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731264500/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731293344",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-731293344",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 731293344,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTI5MzM0NA==",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-11-20T17:13:36Z",
    "updated_at": "2020-11-20T17:13:36Z",
    "body": "> Well, I just read #71435 (comment) after commenting and am wondering whether I should edit and hide my comment or not.\r\n\r\nHm, I do not see the relation to be honest (also I was wrong when I posted that -- there is an implementation strategy).\r\n\r\nhttps://github.com/rust-lang/rust/issues/54366 sounds like it might be a soundness issue if it also happens for `#[thread_local] static` (without `mut`).",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731293344/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731304628",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-731304628",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 731304628,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTMwNDYyOA==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-11-20T17:35:44Z",
    "updated_at": "2020-11-20T17:35:44Z",
    "body": "@RalfJung I think I was confused by confusing comments (not only yours) and probably misread some of them. Sorry. Ignore what I said before.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731304628/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731598002",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-731598002",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 731598002,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTU5ODAwMg==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-11-21T16:00:28Z",
    "updated_at": "2020-11-21T16:00:28Z",
    "body": "> Hm, that's fair... OTOH if we made `incomplete_features` fire we'd have to enable that lint in library/std, so we'd not easily notice when another unsound feature is enabled.\r\n> \r\n> IMO it would be better to just make all accesses to these statics unsafe.\r\n\r\n[`core`](https://github.com/rust-lang/rust/blob/539402cb0b0f1639a4be14e40eaf8db61a62ae41/library/core/src/lib.rs#L65), [`alloc`](https://github.com/rust-lang/rust/blob/539402cb0b0f1639a4be14e40eaf8db61a62ae41/library/alloc/src/lib.rs#L73) and [`stdarch`](https://github.com/rust-lang/stdarch/blob/777efaf5644706b36706a7a5c51edb63835e05ca/crates/core_arch/src/lib.rs#L5) have already used `#![allow(incomplete_features)]`. Is `std` special or `#![allow(incomplete_features)]`s in them are planned to be removed?\r\n\r\nAlso, I think adding an attribute that suppresses `incomplete_features` only for specified features could solve the noticing issue generally (also in `core`, `alloc` and `stdarch`).\r\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731598002/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731602233",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-731602233",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 731602233,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTYwMjIzMw==",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-11-21T16:34:33Z",
    "updated_at": "2020-11-21T16:34:33Z",
    "body": "> core, alloc and stdarch have already used #![allow(incomplete_features)]\r\n\r\nI'd hope there's work happening to get rid of that. :/ I thought since the move to min_specialization, things were better. I guess this is mostly due to const-generics.\r\nAt the very least there should be comments explaining why *unsound features* are enabled in the very foundation of Rust... but it seems not everyone agrees on sch a policy, seeing that this code was reviewed and landed. Oh well.\r\n\r\n> Also, I think adding an attribute that suppresses incomplete_features only for specified features could solve the noticing issue generally (also in core, alloc and stdarch).\r\n\r\nThat would help, yes.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/731602233/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/816628151",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-816628151",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 816628151,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNjYyODE1MQ==",
    "user": {
      "login": "Soveu",
      "id": 34382234,
      "node_id": "MDQ6VXNlcjM0MzgyMjM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/34382234?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Soveu",
      "html_url": "https://github.com/Soveu",
      "followers_url": "https://api.github.com/users/Soveu/followers",
      "following_url": "https://api.github.com/users/Soveu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Soveu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Soveu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Soveu/subscriptions",
      "organizations_url": "https://api.github.com/users/Soveu/orgs",
      "repos_url": "https://api.github.com/users/Soveu/repos",
      "events_url": "https://api.github.com/users/Soveu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Soveu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-04-09T11:51:04Z",
    "updated_at": "2021-04-09T11:51:04Z",
    "body": "With `relocation-model=static` compiler uses fs \"segment\" to access thread local variable like expected, but with `pic` it uses `__tls_get_addr()`\r\nShouldn't it use fs in both situation?\r\n\r\n```as\r\n// relocation-model=static\r\nexample::f:\r\n        mov     byte ptr fs:[example::FOO@TPOFF+3], 1\r\n        mov     qword ptr fs:[example::BAR@TPOFF], 2\r\n        ret\r\n```\r\n```as\r\n// relocation-model=pic\r\nexample::f:\r\n        sub     rsp, 8\r\n        lea     rdi, [rip + example::FOO@TLSLD]\r\n        call    __tls_get_addr@PLT\r\n        mov     byte ptr [rax + example::FOO@DTPOFF+3], 1\r\n        mov     qword ptr [rax + example::BAR@DTPOFF], 2\r\n        pop     rax\r\n        ret\r\n```\r\n\r\n[Link to godbolt](https://godbolt.org/z/fnP4h6r9o)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/816628151/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843467617",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-843467617",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 843467617,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MzQ2NzYxNw==",
    "user": {
      "login": "Chronos-Sk",
      "id": 9086844,
      "node_id": "MDQ6VXNlcjkwODY4NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9086844?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Chronos-Sk",
      "html_url": "https://github.com/Chronos-Sk",
      "followers_url": "https://api.github.com/users/Chronos-Sk/followers",
      "following_url": "https://api.github.com/users/Chronos-Sk/following{/other_user}",
      "gists_url": "https://api.github.com/users/Chronos-Sk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Chronos-Sk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Chronos-Sk/subscriptions",
      "organizations_url": "https://api.github.com/users/Chronos-Sk/orgs",
      "repos_url": "https://api.github.com/users/Chronos-Sk/repos",
      "events_url": "https://api.github.com/users/Chronos-Sk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Chronos-Sk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-05-18T19:21:19Z",
    "updated_at": "2021-05-18T21:18:40Z",
    "body": "As far as use cases go. All the bare-metal Arm targets seem to support `#[thread_local]` definitions. Not using `#[thread_local]` definitions leads to a lot of trouble because it appears there's no easy way, outside of compiler code, to figure out a type's memory layout in time to tell the linker what to do. It's possible to fully emulate TLS, of course, but that could be a lot of overhead for a bare-metal target.\r\n\r\nI don't have a problem, personally, sticking to Nightly for this, though.\r\n\r\nEdit: I would worry more about these soundness issues in my project, but accessing static muts is already unsafe, so there's a built-in caveat emptor. (Project docs: \"Safety: Don't let this reference escape the thread via...\")",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843467617/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843790757",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-843790757",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 843790757,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0Mzc5MDc1Nw==",
    "user": {
      "login": "josephlr",
      "id": 5506060,
      "node_id": "MDQ6VXNlcjU1MDYwNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5506060?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/josephlr",
      "html_url": "https://github.com/josephlr",
      "followers_url": "https://api.github.com/users/josephlr/followers",
      "following_url": "https://api.github.com/users/josephlr/following{/other_user}",
      "gists_url": "https://api.github.com/users/josephlr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/josephlr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/josephlr/subscriptions",
      "organizations_url": "https://api.github.com/users/josephlr/orgs",
      "repos_url": "https://api.github.com/users/josephlr/repos",
      "events_url": "https://api.github.com/users/josephlr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/josephlr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-05-19T06:38:40Z",
    "updated_at": "2021-05-19T06:43:27Z",
    "body": "@Soveu the POSIX/ELF AMD64 ABI has 4 models for accessing Thread-Local Storage. See this [doc on Thread-Local Storage models](https://akkadia.org/drepper/tls.pdf) for more information.\r\n\r\n  - Global Dynamic (Section 4.1.6)\r\n    - Uses a call to `__tls_get_addr()` for each global variable access\r\n    - Used for `extern`/`pub` variables if Rust _doesn't know_ if the code will be statically linked\r\n  - Local Dynamic (Section 4.2.6)\r\n    - Uses a call to `__tls_get_addr()` to get the current TLS offset, then uses relative offsets for subsequent accesses\r\n    - Used for private variables if Rust _doesn't know_ if the code will be statically linked\r\n  - Initial Exec (Section 4.3.6)\r\n    - Uses `fs` with the GOT and a `@GOTTPOFF` offset\r\n    - Used for `extern`/`pub` variables if Rust _knows_ if the code will be statically linked\r\n  - Local Exec (Section 4.4.6)\r\n    - Uses `fs` _without_ the GOT and a `@TPOFF` offset\r\n    - Used for private variables if Rust _knows_ if the library code be statically linked\r\n\r\nDepending on how you end up linking the binary (and if you use LTO) Rust/LLVM might use one of the \"Exec\" models even if your relocation model is `pic`. Using the `static` relocation model just tells LLVM that the code will definitely be statically linked.\r\n\r\n[This example playground](https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAM1QDsCBlZAQwBtMQBGAFlJvoCqAZ0wAFAB4gA5AAYppAFZdSrZrVDEArkIKkR7ZATx1KmWugDCqVpoC2tZWfQAZPLUwA5OwCNMxENwA7KQADqhChMa0Vjb2ymERRnSu7l62vv5BepgGSbQMBMzEBDF2DpzZuVEFRQQpnj5%2BAcE6taVxFa3F9WkZzQCUeqiaxMgcUgD0EwCkAEwAzGBg0wCsAEK0qAD6OuirACLTMgCCR6cLS6trVJjMBCOYEAQIxLfoW6yoLKz9B2dn2kwAGpdiAUDlWGCLBDpvM1v8TnN5ldnq9mO9Pt8/oiFldAXsVocTq0jMggQAVZxbUQAJQAkgA1EBA6GsViwiyaABs3Fh2CBsP2LIhYPcAHcIDJfnD/rj1qi3h8vmxsedket8aqSXgyZTqfSGVtjsyrqz2fNOQAOPmwtZA2YrLkHAXzIVXABa2BpAHkthZsM5nLb7Y6/jLETj1WsFeilVjCbKo5qEycQppvCDCqSKVTRAI1syzRzubz5vzBcK2aLMBKpbbEyiXorMSqU2q8SICUTjmmM9rdbn80aTesixbNNay8GHU7CS63etPT6/QGg3CQ7PDuHTic0LQdECl77/YHCzDx5Py67K5CQOLJdL4RH2xrO1qszqgbZNAQgbTGcyJbzkCMj1pGHaYF2Zz9l%2BP5/gaw4Chqk52jOzoVlcoHrmhCbbg2r6QaqvaZncn7fr%2BeYFkCQEVlhT4vmsybdsRMHkX%2BQ7GkhjEoRu6HXph06hrh9FnMRVC0F%2BzBuBA/QCoE9FAopOb6oyRpXOq%2BwAHQiAQECcI%2BZxKcp/4MtpmC6bMBknEZhlKXqlFqesGlmbp%2BlgccRn2fmLkQJZ7m2Ypmj7swNxyQpRlKSZjlrBpwGcO5EWRQawGzAliXsWs0WxRW8XbulGUpWlinTIE3Yld2UiDJCUgrPIDiyPIqDSDS2i/kIwyjMCSKcPIBDSHI/SDAA1iA8yBJpKyWis3BcpaACcCwOnNnDzCsKjSNwdX9Y10jyEIIAyKQfUNYMcCwEgaC2CEeDsGQFAQJd123XeeDAAgBCsAAnnwN0EH4%2B0QN422kN4bhFJ90g9aQl22GYBDerQX3A1gthqMA7DI3gryGHgABumD7Q1pCYOImDID%2B4xQ24f3VXIKh4N4xDg1YWCQ71xB4LYbODPwjDfBwPB8HQBDCGIkhE0oFSqOoIBaDo9PePtkCDKgIR5ITAC0FhAqrBAa%2Bw%2BPmvs8xAlrQKvC2eQa7YGA5IK13IHtORk3kpjmO05TE%2BYPSNP4FQJJEdAe/E4SB7QPvpE0nTOzjdA1MUwfR1UceFN0bgNJHft6KnJTWGUyhdHU6e9FHgztSMYxcFV0i1aQ9V001UhywQZK0K971fUCEC4IQJACgsFQsqgV03X4/fzPpQItTovXbYNpAjTNmljTInCcIEgSzDIU0rGt1WbXXwON3tB1HXPpBnYgIDDAQaa6Pdj2j1nkG91nvNMGwAu8LzosSMDYpMxCNzdaNUtpE0bt1IEYpCAIHNq1Vu7cPqfVnidYaXAuSaRkNwbBK1VqTSmvMHkICD71x2lIE%2Bh1joDWrlIWYYCG67TPqg0g%2BNiARBMNwIAA) should be able to show all 4 models (if you switch `pic` to `static`)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843790757/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843796808",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-843796808",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 843796808,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0Mzc5NjgwOA==",
    "user": {
      "login": "Chronos-Sk",
      "id": 9086844,
      "node_id": "MDQ6VXNlcjkwODY4NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9086844?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Chronos-Sk",
      "html_url": "https://github.com/Chronos-Sk",
      "followers_url": "https://api.github.com/users/Chronos-Sk/followers",
      "following_url": "https://api.github.com/users/Chronos-Sk/following{/other_user}",
      "gists_url": "https://api.github.com/users/Chronos-Sk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Chronos-Sk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Chronos-Sk/subscriptions",
      "organizations_url": "https://api.github.com/users/Chronos-Sk/orgs",
      "repos_url": "https://api.github.com/users/Chronos-Sk/repos",
      "events_url": "https://api.github.com/users/Chronos-Sk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Chronos-Sk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-05-19T06:48:48Z",
    "updated_at": "2021-05-19T08:06:49Z",
    "body": "There's also the `-Ztls-model` Nightly rustc flag, if you want to force a model to be used: https://doc.rust-lang.org/unstable-book/compiler-flags/tls-model.html.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843796808/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843828123",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-843828123",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 843828123,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MzgyODEyMw==",
    "user": {
      "login": "Soveu",
      "id": 34382234,
      "node_id": "MDQ6VXNlcjM0MzgyMjM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/34382234?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Soveu",
      "html_url": "https://github.com/Soveu",
      "followers_url": "https://api.github.com/users/Soveu/followers",
      "following_url": "https://api.github.com/users/Soveu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Soveu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Soveu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Soveu/subscriptions",
      "organizations_url": "https://api.github.com/users/Soveu/orgs",
      "repos_url": "https://api.github.com/users/Soveu/repos",
      "events_url": "https://api.github.com/users/Soveu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Soveu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-05-19T07:31:28Z",
    "updated_at": "2021-05-19T07:31:28Z",
    "body": "Interesting, I thought TLS is basically a thread-local copy of `.tdata` and `fs` holds an offset between `.tdata` and the copy",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843828123/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843917282",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-843917282",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 843917282,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MzkxNzI4Mg==",
    "user": {
      "login": "Soveu",
      "id": 34382234,
      "node_id": "MDQ6VXNlcjM0MzgyMjM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/34382234?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Soveu",
      "html_url": "https://github.com/Soveu",
      "followers_url": "https://api.github.com/users/Soveu/followers",
      "following_url": "https://api.github.com/users/Soveu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Soveu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Soveu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Soveu/subscriptions",
      "organizations_url": "https://api.github.com/users/Soveu/orgs",
      "repos_url": "https://api.github.com/users/Soveu/repos",
      "events_url": "https://api.github.com/users/Soveu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Soveu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-05-19T09:21:27Z",
    "updated_at": "2021-05-19T09:21:27Z",
    "body": "btw, is there a way to tell rustc to use `gs` for thread locals instead of `fs`?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843917282/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843934159",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-843934159",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 843934159,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MzkzNDE1OQ==",
    "user": {
      "login": "josephlr",
      "id": 5506060,
      "node_id": "MDQ6VXNlcjU1MDYwNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5506060?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/josephlr",
      "html_url": "https://github.com/josephlr",
      "followers_url": "https://api.github.com/users/josephlr/followers",
      "following_url": "https://api.github.com/users/josephlr/following{/other_user}",
      "gists_url": "https://api.github.com/users/josephlr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/josephlr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/josephlr/subscriptions",
      "organizations_url": "https://api.github.com/users/josephlr/orgs",
      "repos_url": "https://api.github.com/users/josephlr/repos",
      "events_url": "https://api.github.com/users/josephlr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/josephlr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-05-19T09:43:16Z",
    "updated_at": "2021-05-19T09:43:16Z",
    "body": "> btw, is there a way to tell rustc to use `gs` for thread locals instead of `fs`?\r\n\r\nI would also really like this (for Kernels and the like), but I don't think LLVM supports this (as it's not one of the 4 TLS models described above). You would have to get a 5th TLS model (maybe called `kernel`) added to LLVM to support this. ",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843934159/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843946900",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-843946900",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 843946900,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0Mzk0NjkwMA==",
    "user": {
      "login": "Soveu",
      "id": 34382234,
      "node_id": "MDQ6VXNlcjM0MzgyMjM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/34382234?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Soveu",
      "html_url": "https://github.com/Soveu",
      "followers_url": "https://api.github.com/users/Soveu/followers",
      "following_url": "https://api.github.com/users/Soveu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Soveu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Soveu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Soveu/subscriptions",
      "organizations_url": "https://api.github.com/users/Soveu/orgs",
      "repos_url": "https://api.github.com/users/Soveu/repos",
      "events_url": "https://api.github.com/users/Soveu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Soveu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-05-19T09:59:54Z",
    "updated_at": "2021-05-19T09:59:54Z",
    "body": "I heard some rumors that Redox does that, but I can't find how",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843946900/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843959170",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-843959170",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 843959170,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0Mzk1OTE3MA==",
    "user": {
      "login": "josephlr",
      "id": 5506060,
      "node_id": "MDQ6VXNlcjU1MDYwNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5506060?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/josephlr",
      "html_url": "https://github.com/josephlr",
      "followers_url": "https://api.github.com/users/josephlr/followers",
      "following_url": "https://api.github.com/users/josephlr/following{/other_user}",
      "gists_url": "https://api.github.com/users/josephlr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/josephlr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/josephlr/subscriptions",
      "organizations_url": "https://api.github.com/users/josephlr/orgs",
      "repos_url": "https://api.github.com/users/josephlr/repos",
      "events_url": "https://api.github.com/users/josephlr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/josephlr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-05-19T10:15:58Z",
    "updated_at": "2021-05-19T10:15:58Z",
    "body": "> I heard some rumors that Redox does that, but I can't find how\r\n\r\nLooks like they modified their binutils: https://gitlab.redox-os.org/redox-os/binutils-gdb/-/merge_requests/5",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/843959170/reactions",
      "total_count": 10,
      "+1": 6,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 4,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/844815790",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-844815790",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 844815790,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDgxNTc5MA==",
    "user": {
      "login": "Andy-Python-Programmer",
      "id": 62820092,
      "node_id": "MDQ6VXNlcjYyODIwMDky",
      "avatar_url": "https://avatars.githubusercontent.com/u/62820092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Andy-Python-Programmer",
      "html_url": "https://github.com/Andy-Python-Programmer",
      "followers_url": "https://api.github.com/users/Andy-Python-Programmer/followers",
      "following_url": "https://api.github.com/users/Andy-Python-Programmer/following{/other_user}",
      "gists_url": "https://api.github.com/users/Andy-Python-Programmer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Andy-Python-Programmer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Andy-Python-Programmer/subscriptions",
      "organizations_url": "https://api.github.com/users/Andy-Python-Programmer/orgs",
      "repos_url": "https://api.github.com/users/Andy-Python-Programmer/repos",
      "events_url": "https://api.github.com/users/Andy-Python-Programmer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Andy-Python-Programmer/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-05-20T07:40:48Z",
    "updated_at": "2021-05-20T07:40:48Z",
    "body": "> > I heard some rumors that Redox does that, but I can't find how\r\n> \r\n> Looks like they modified their binutils: https://gitlab.redox-os.org/redox-os/binutils-gdb/-/merge_requests/5\r\n\r\nWould have been better if they made this pull request to actual binutils then we all could use it.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/844815790/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/847144049",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-847144049",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 847144049,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NzE0NDA0OQ==",
    "user": {
      "login": "Chronos-Sk",
      "id": 9086844,
      "node_id": "MDQ6VXNlcjkwODY4NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9086844?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Chronos-Sk",
      "html_url": "https://github.com/Chronos-Sk",
      "followers_url": "https://api.github.com/users/Chronos-Sk/followers",
      "following_url": "https://api.github.com/users/Chronos-Sk/following{/other_user}",
      "gists_url": "https://api.github.com/users/Chronos-Sk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Chronos-Sk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Chronos-Sk/subscriptions",
      "organizations_url": "https://api.github.com/users/Chronos-Sk/orgs",
      "repos_url": "https://api.github.com/users/Chronos-Sk/repos",
      "events_url": "https://api.github.com/users/Chronos-Sk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Chronos-Sk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-05-24T15:55:35Z",
    "updated_at": "2021-05-24T15:55:35Z",
    "body": "Okay, I think I found a way to make things work using just `#[thread_local]` declarations, instead of full definitions. Only requires some form of `asm` support. [playground](https://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=758c23f2d77148d280ed3a0864908681)\r\n\r\nThe trick is figuring out how to link the extern declaration to a full definition without LLVM noticing and ignoring the original declaration. The `.equiv` asm directive seems to accomplish this with minimal voodoo magic.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/847144049/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/861556380",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-861556380",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 861556380,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MTU1NjM4MA==",
    "user": {
      "login": "marmeladema",
      "id": 1629419,
      "node_id": "MDQ6VXNlcjE2Mjk0MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1629419?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marmeladema",
      "html_url": "https://github.com/marmeladema",
      "followers_url": "https://api.github.com/users/marmeladema/followers",
      "following_url": "https://api.github.com/users/marmeladema/following{/other_user}",
      "gists_url": "https://api.github.com/users/marmeladema/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marmeladema/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marmeladema/subscriptions",
      "organizations_url": "https://api.github.com/users/marmeladema/orgs",
      "repos_url": "https://api.github.com/users/marmeladema/repos",
      "events_url": "https://api.github.com/users/marmeladema/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marmeladema/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-06-15T14:38:37Z",
    "updated_at": "2021-06-15T14:38:37Z",
    "body": "Would it be possible to partially stabilize this for let's say x86_64 architecture in user space code and by also not supporting problematic types like generators etc?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/861556380/reactions",
      "total_count": 18,
      "+1": 18,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/965642260",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-965642260",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 965642260,
    "node_id": "IC_kwDOAAsO6M45jogU",
    "user": {
      "login": "joshtriplett",
      "id": 162737,
      "node_id": "MDQ6VXNlcjE2MjczNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/162737?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshtriplett",
      "html_url": "https://github.com/joshtriplett",
      "followers_url": "https://api.github.com/users/joshtriplett/followers",
      "following_url": "https://api.github.com/users/joshtriplett/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshtriplett/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshtriplett/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshtriplett/subscriptions",
      "organizations_url": "https://api.github.com/users/joshtriplett/orgs",
      "repos_url": "https://api.github.com/users/joshtriplett/repos",
      "events_url": "https://api.github.com/users/joshtriplett/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshtriplett/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-11-10T18:53:50Z",
    "updated_at": "2021-11-10T18:53:50Z",
    "body": "Marking as impl-incomplete since it may still have soundness issues, and may misbehave on platforms without TLS support.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/965642260/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/998963161",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-998963161",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 998963161,
    "node_id": "IC_kwDOAAsO6M47ivfZ",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-12-21T17:27:14Z",
    "updated_at": "2022-05-12T22:13:21Z",
    "body": "### **EDIT**: original proposal here was unsound wrt scoped threads, see https://github.com/rust-lang/rust/issues/29594#issuecomment-1125466642\r\n\r\n<details>\r\n<summary>(click to open the original proposal)</summary>\r\n\r\nI'm not sure where this should go, and I don't have the time for a complete RFC, but \"a lifetime shorter than `'static`\" came up recently in the context of some `rustc` internal data structures (which are owned thread-locally, not coincidentally), so:\r\n\r\n<hr/>\r\n\r\n*(with apologies to any previous suggestions similar to this, that may have been dismissed in the past - I couldn't find anything in this very issue, at least)*\r\n\r\nIf we added a `'thread` lifetime, like `'static` but *strictly* shorter:\r\n* borrowing a `#[thread_local]` (and even `thread_local!`) could produce a `&'thread T` reference\r\n  * it should even be returnable from functions (as long as it doesn't leave the thread, see below)\r\n* to preserve lifetime parametericity, `&'thread T: Send + Sync` *has to* be true if `T: Sync` (just like with `&'a T` for any other `'a`), and soundness of `'thread` usage shouldn't require it\r\n  * in fact, it should be entirely possible to pass such a `&'thread T` \"down\" to a scoped thread, just like how `f(&THREAD_LOCAL)` (with `#[thread_local]`) or `THREAD_LOCAL.with(|data| f(data))` (with `thread_local!`) work today\r\n* everything that requires `T: 'static` today would still not allow anything containing these new `'thread` lifetimes, and that includes:\r\n  * potentially-detachable (i.e. non-scoped) threads\r\n    * any kind of communication between non-scoped threads is also indirectly affected by that bound, i.e. `mpsc::Receiver<T>: 'static` requires `T: 'static`\r\n    * this also extends to thread pools running `async` tasks: a `Future` from `async fn`, that is required to be `'static`, cannot keep a `&'thread T` across a suspension point\r\n  * `thread_local!`'s data type\r\n    * essentially stating \"no `&'thread T` can get from the normal thread execution, into `thread_local!` destructor execution\"\r\n    * a `thread_local!` destructor *could itself* obtain a `&'thread T` reference, but it would be limited in scope to that destructor's execution, since there would be no place available to stash it\r\n    * for this to be sound, I believe `#[thread_local]` also needs the `'static` bound, otherwise it could hold a reference to a `thread_local!`, that a different `thread_local!`'s destructor could read back\r\n* there are two styles for \"getting short-lived references\" APIs today:\r\n  * `fn with(&self, f: impl FnOnce(&T))`\r\n    * only option sound today for thread-local `T`s, `thread_local!` uses it\r\n  * `fn get(&self) -> &T` (`Deref`-like)\r\n    * with owned `self`, this is unsound because `Box::leak(Box::new(self)).get()` returns a `&'static T`, even if `self` itself is `!Send`/`!Sync`\r\n    * this is (incorrectly) used in a few places in `rustc`, today, and that's where this whole idea came from\r\n  * but with `'thread`, we could have the best of both worlds, and return `&'thread T`, to be more flexible than today's sound option (`with`) while (hopefully?) remaining sound\r\n    * only downside is `Deref` can't be implemented directly (except on a type that has `&'thread T` as a field itself)\r\n  * a `struct` with `PhantomData<&'thread ()>` would make that type never pass a `'static` bound check, so even `Box::leak(Box::new(self))` would only produce a `&'thread Self`, not a `&'static Self`, meaning a `Deref`-like API would actually remain sound\r\n    * though this sort of thing could complicate the implementation, unless it's only allowed by making the `struct` lifetime-generic and passing `'thread` in that way\r\n\r\nBased on the little I remember about how `'static` is implemented, there's a good chance of this being easy to fully implement (copy how `'static` is handled, but make it strictly \"shorter\" in the lattice), but I wouldn't bet on it just yet.\r\n\r\n**EDIT**:\r\n* while looking around for precedents, I found a full-fledged RFC (https://github.com/rust-lang/rfcs/pull/1705) from 2016, that I had completely forgot about - looking in it now to compare it...\r\n* oh, it made the classic mistake of proposing `&'thread T: !Send` (which is impossible because of lifetime parametericity, see above) instead of relying *only* on `'thread < 'static`:\r\n  > Any type depending on `'thread` (i.e., a type product of the type construction from `'thread`) is `!Send`, and thus bounded to the current thread.\r\n* @nikomatsakis caught onto that issue in this comment: https://github.com/rust-lang/rfcs/pull/1705#issuecomment-241499891\r\n* overall I feel like that RFC was not arguing for itself very well - the `fn`-scoped `#[thread_local]` limitation we ended up with instead is enough for soundness, and there is no talk about letting the `LocalKey` API of `thread_local!` use the `'thread` lifetime etc.\r\n\r\n</details>",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/998963161/reactions",
      "total_count": 7,
      "+1": 7,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/999809667",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-999809667",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 999809667,
    "node_id": "IC_kwDOAAsO6M47l-KD",
    "user": {
      "login": "newpavlov",
      "id": 329626,
      "node_id": "MDQ6VXNlcjMyOTYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/329626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/newpavlov",
      "html_url": "https://github.com/newpavlov",
      "followers_url": "https://api.github.com/users/newpavlov/followers",
      "following_url": "https://api.github.com/users/newpavlov/following{/other_user}",
      "gists_url": "https://api.github.com/users/newpavlov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/newpavlov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/newpavlov/subscriptions",
      "organizations_url": "https://api.github.com/users/newpavlov/orgs",
      "repos_url": "https://api.github.com/users/newpavlov/repos",
      "events_url": "https://api.github.com/users/newpavlov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/newpavlov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-12-22T19:22:05Z",
    "updated_at": "2021-12-22T19:25:52Z",
    "body": "@eddyb \r\nI really hope for this feature to be stabilized as soon as possible, but I must ask the following question:\r\n\r\n>it should be entirely possible to pass such a &'thread T \"down\" to a scoped thread\r\n\r\nIs it guaranteed that the same thread-local pointer stays valid when passed to a different thread? I can imagine a system which maps the same numeric pointer to different physical addresses for different threads via MMU magic.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/999809667/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/999811852",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-999811852",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 999811852,
    "node_id": "IC_kwDOAAsO6M47l-sM",
    "user": {
      "login": "Amanieu",
      "id": 278509,
      "node_id": "MDQ6VXNlcjI3ODUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amanieu",
      "html_url": "https://github.com/Amanieu",
      "followers_url": "https://api.github.com/users/Amanieu/followers",
      "following_url": "https://api.github.com/users/Amanieu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions",
      "organizations_url": "https://api.github.com/users/Amanieu/orgs",
      "repos_url": "https://api.github.com/users/Amanieu/repos",
      "events_url": "https://api.github.com/users/Amanieu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amanieu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-12-22T19:26:07Z",
    "updated_at": "2021-12-22T19:26:07Z",
    "body": "> Is it guaranteed that the same thread-local pointer stays valid when passed to a different thread? I can imagine a system which has the same numeric pointer to point to different physical addresses for different threads via MMU magic.\r\n\r\nThat is not allowed. Thread-local variables for different threads must have distinct addresses.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/999811852/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/999950666",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-999950666",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 999950666,
    "node_id": "IC_kwDOAAsO6M47mglK",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-12-23T00:05:31Z",
    "updated_at": "2021-12-23T00:05:31Z",
    "body": "> > Is it guaranteed that the same thread-local pointer stays valid when passed to a different thread? I can imagine a system which has the same numeric pointer to point to different physical addresses for different threads via MMU magic.\r\n> \r\n> That is not allowed. Thread-local variables for different threads must have distinct addresses.\r\n\r\n@newpavlov To expand a bit further: such a pointer could not, in Rust, use the type `&T`, and instead would have to be some kind of wrapper that only produces a `&T` if it can compute a \"global\" pointer (i.e. one valid across *all* threads).\r\n\r\nIf `T: Sync`, then `&T: Send` holds and the pointer can make its way into a different thread, as long as it's not *accessed* outside of its original scope. Even with a `!Sync` pointee, I'd still be wary of any further derived reference existing (`&Foo` doesn't give `Foo` as much control over the reference as a separate `FooRef` type would).\r\n\r\nThis applies to `thread_local!`'s `.with(|short_lived_ref| ...)` method today, which doesn't stop you in any way from e.g. spawning some scoped threads and capturing `short_lived_ref` in them, inside the closure.\r\n(And `#[thread_local] static`s have their equivalent, where `do_anything_with(&THREAD_LOCAL_STATIC)` passes the reference \"down the stack\" to a function that doesn't really see it as any other reference).",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/999950666/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1125466642",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1125466642",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1125466642,
    "node_id": "IC_kwDOAAsO6M5DFUIS",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-05-12T22:11:51Z",
    "updated_at": "2022-05-12T22:11:51Z",
    "body": "Reading back my sketch for for `'thread` above (https://github.com/rust-lang/rust/issues/29594#issuecomment-998963161), and specifically:\r\n> in fact, it should be entirely possible to pass such a `&'thread T` \"down\" to a scoped thread,\r\n\r\nI had some thoughts about interesting lattice interpretations of `'thread`, which is that it's somewhere between `'static` and all other stack-related lifetimes within a thread.\r\n\r\nWith detached threads requiring `'static` bounds to pass data between them, each detached thread ends up with a hierarchy of `'static > 'threadX > ...` (for some thread X), so `'thread` can be seen as a kind of combination (union/intersection aka join/meet, whichever is correct) of all `'threadX`.\r\n\r\nBut that only works for detached threads - for scoped threads you end up with `'threadX` lifetimes that can be arbitrarily small, which means `'thread` actually becomes isomorphic \"the empty lifetime\" (i.e. it has to be treated as shorter than any other lifetime, kind of like a \"bottom\" equivalent) and it's impossible to do almost anything with it, if you're to remain sound.\r\n\r\n### **In fewer words, my original proposal was unsound as stated.**\r\n\r\nAs an example, imagine `&'a Cell<&'thread T>` to a scoped thread - if it can place *its own* TLS references in there, those will become invalid when the scoped thread exits.\r\nBut if we take the correct interpretation mentioned earlier, that type is illegal, because `'thread` is shorter than any lifetime (including `'a`) - problem averted, right?\r\n\r\nWell but now you can never have `let x = &THREAD_LOCAL;` because `x` has a scope that's arguably longer than `'thread` (it's shorter than *the current thread*, but with just one `'thread` there's no way to distinguish).\r\nSo you're either useful and unsound wrt scoped threads, or sound but useless.\r\n\r\n<hr/>\r\n\r\nThere might be a way to salvage the hope of a `'thread` that doesn't need to interfere with `Sync`/`Send` at all, which I didn't come up with myself but was suggested to me by @eternaleye:\r\n\r\n`'thread` could become an implicit extra lifetime parameter to all functions. Given @tmandry and @nikomatsakis' discussions around varieties of contextual implicits, it could be seen as a compiler-implied `with 'thread`.\r\n\r\nTo limit compilation performance impact and whatnot, it would ideally only be nameable anywhere in the function if it shows up in the signature or `where` clauses, and calling a function that needs `'thread` from one that doesn't, could just use the outermost scope of the caller (effectively \"statically known top of the thread\", which is appropriate, given that the caller could literally be a thread entry-point for all we know).\r\n\r\nFor detached threads, we have the same solution: `'thread` won't pass the `'static` bounds required by e.g. `thread::spawn`, unless you have a `'thread: 'static` bound on the caller - which could either never be satisfiable, or, as an interesting twist, could perhaps be satisfiable inside `fn main` specifically, encoding in the language that \"the main thread lives forever\" (and yes this would also mean `&THREAD_LOCAL` from within `fn main` would be `&'static` - could have interesting implications).\r\n\r\nFor scoped threads, it boils down to \"only direct calls to functions pass `'thread`\" - the amount of dynamism (whether `fn` pointers or `dyn FnOnce`) involved forces the new thread's entry-point to effectively be `'thread`-polymorphic, and anything using `'thread` from the parent thread looks like it could be any stack lifetime.\r\n\r\nThe earlier example of `&'a Cell<&'thread T>` would just be a `&'a Cell<&'b T>`, and `&'b T` could only be created by the scoped thread using any other `&'b` references it may have gotten from its parent thread.\r\n\r\nIn fact, without some `with 'thread`-like abstraction at the trait `impl` level, even calling a trait method should probably leave the callee `'thread`-polymorphic for now.\r\nSo writing `'thread` anywhere other than in the signature/`where` clauses of a free function or inherent impl, should be an error (i.e. a type or trait definition should take an explicit lifetime parameter and not refer to `'thread`).\r\n\r\nA limited version of this feature could be implemented right away, and because it's *mostly* just desugaring to lifetime parameters (with only the choice of what's passed for the parameter in direct calls, and the lifetime in `&THREAD_LOCAL`'s type, being `'thread`-specific semantics), it's way more likely to be sound.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1125466642/reactions",
      "total_count": 4,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 3
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1519419785",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1519419785",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1519419785,
    "node_id": "IC_kwDOAAsO6M5akIGJ",
    "user": {
      "login": "peter-lyons-kehl",
      "id": 4270240,
      "node_id": "MDQ6VXNlcjQyNzAyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4270240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/peter-lyons-kehl",
      "html_url": "https://github.com/peter-lyons-kehl",
      "followers_url": "https://api.github.com/users/peter-lyons-kehl/followers",
      "following_url": "https://api.github.com/users/peter-lyons-kehl/following{/other_user}",
      "gists_url": "https://api.github.com/users/peter-lyons-kehl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/peter-lyons-kehl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/peter-lyons-kehl/subscriptions",
      "organizations_url": "https://api.github.com/users/peter-lyons-kehl/orgs",
      "repos_url": "https://api.github.com/users/peter-lyons-kehl/repos",
      "events_url": "https://api.github.com/users/peter-lyons-kehl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/peter-lyons-kehl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-04-24T05:51:00Z",
    "updated_at": "2023-04-24T05:51:00Z",
    "body": "`#[thread_local]` causes an Internal Compiler Error if used with proc macro-specific types (like `proc_macro::{Delimiter, Group, Ident, Punct, Spacing, Span, TokenStream, TokenTree}`). Could we either\r\n- document that it's not for proc macro-specific types, or\r\n- have a tracking issue for this, please?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1519419785/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1709242978",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1709242978",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1709242978,
    "node_id": "IC_kwDOAAsO6M5l4Ppi",
    "user": {
      "login": "cybersoulK",
      "id": 102260392,
      "node_id": "U_kgDOBhheqA",
      "avatar_url": "https://avatars.githubusercontent.com/u/102260392?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cybersoulK",
      "html_url": "https://github.com/cybersoulK",
      "followers_url": "https://api.github.com/users/cybersoulK/followers",
      "following_url": "https://api.github.com/users/cybersoulK/following{/other_user}",
      "gists_url": "https://api.github.com/users/cybersoulK/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cybersoulK/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cybersoulK/subscriptions",
      "organizations_url": "https://api.github.com/users/cybersoulK/orgs",
      "repos_url": "https://api.github.com/users/cybersoulK/repos",
      "events_url": "https://api.github.com/users/cybersoulK/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cybersoulK/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-09-06T23:13:12Z",
    "updated_at": "2023-09-06T23:13:12Z",
    "body": "https://github.com/rust-lang/rust/issues/115621\r\n\r\nsegment fault on windows. is it a misuse of the feature, or a bug?",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1709242978/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1709864270",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1709864270",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1709864270,
    "node_id": "IC_kwDOAAsO6M5l6nVO",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-09-07T09:57:29Z",
    "updated_at": "2023-09-07T09:57:29Z",
    "body": "Would it makes sense to just reject the attribute on targets where `target_thread_local` is not set?",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1709864270/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1709866517",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1709866517",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1709866517,
    "node_id": "IC_kwDOAAsO6M5l6n4V",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-09-07T09:59:00Z",
    "updated_at": "2023-09-07T10:02:36Z",
    "body": "> #[thread_local] causes an Internal Compiler Error if used with proc macro-specific types (like proc_macro::{Delimiter, Group, Ident, Punct, Spacing, Span, TokenStream, TokenTree}). Could we either\r\n\r\nThis has nothing to do with this tracking issue; it's about the entire proc-macro system being incompatible with thread-local state (no matter how that state got implemented).\r\n\r\nThis tracking issue is about thread-local state specifically implemented via the native mechanism of the linker (as opposed to something like pthread keys). The `thread_local!` macro has different implementations depending on the target; sometimes it uses linker-native thread-locals (internally using the feature tracked here), sometimes it uses slower but less fragile run-time OS-provided mechanisms.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1709866517/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867868082",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1867868082",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1867868082,
    "node_id": "IC_kwDOAAsO6M5vVWey",
    "user": {
      "login": "ChrisDenton",
      "id": 4459874,
      "node_id": "MDQ6VXNlcjQ0NTk4NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChrisDenton",
      "html_url": "https://github.com/ChrisDenton",
      "followers_url": "https://api.github.com/users/ChrisDenton/followers",
      "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions",
      "organizations_url": "https://api.github.com/users/ChrisDenton/orgs",
      "repos_url": "https://api.github.com/users/ChrisDenton/repos",
      "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChrisDenton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T16:25:26Z",
    "updated_at": "2023-12-22T16:25:26Z",
    "body": "I wonder if there's a path towards a minimal `thread_local` stabilization by being very restrictive?\r\n\r\nE.g.:\r\n\r\n* all access is by value only\r\n* only allow `Copy` types (or maybe even restrict it to only a subset of primitives)\r\n* don't allow lifetimes\r\n* don't allow composing `thread_local` with other lang attributes (they may interact in \"interesting\" ways)\r\n* make `thread_local` error if the platform does not support it. This would imply also stabilizing `target_thread_local` but maybe the name should be subject to bikeshedding first (e.g. `has_static_thread_local`) to be clear that it may still have runtime thread locals.\r\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867868082/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867870959",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1867870959",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1867870959,
    "node_id": "IC_kwDOAAsO6M5vVXLv",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T16:28:32Z",
    "updated_at": "2023-12-22T16:28:32Z",
    "body": "What is the motivation for that? Doesn't `thread_local! { static NAME = const { ... } }` suffice?",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867870959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867871798",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1867871798",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1867871798,
    "node_id": "IC_kwDOAAsO6M5vVXY2",
    "user": {
      "login": "ChrisDenton",
      "id": 4459874,
      "node_id": "MDQ6VXNlcjQ0NTk4NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChrisDenton",
      "html_url": "https://github.com/ChrisDenton",
      "followers_url": "https://api.github.com/users/ChrisDenton/followers",
      "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions",
      "organizations_url": "https://api.github.com/users/ChrisDenton/orgs",
      "repos_url": "https://api.github.com/users/ChrisDenton/repos",
      "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChrisDenton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T16:29:33Z",
    "updated_at": "2023-12-22T16:29:33Z",
    "body": "`no_std` mainly",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867871798/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867874844",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1867874844",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1867874844,
    "node_id": "IC_kwDOAAsO6M5vVYIc",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T16:33:01Z",
    "updated_at": "2023-12-22T16:33:43Z",
    "body": "Does that form of the macro need anything that requires `std`? Could there be a `core::thread_local! { ... }` macro  that makes that part of the functionality available without `std` (i.e., it would require `const` blocks)?",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867874844/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867876486",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1867876486",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1867876486,
    "node_id": "IC_kwDOAAsO6M5vVYiG",
    "user": {
      "login": "ChrisDenton",
      "id": 4459874,
      "node_id": "MDQ6VXNlcjQ0NTk4NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChrisDenton",
      "html_url": "https://github.com/ChrisDenton",
      "followers_url": "https://api.github.com/users/ChrisDenton/followers",
      "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions",
      "organizations_url": "https://api.github.com/users/ChrisDenton/orgs",
      "repos_url": "https://api.github.com/users/ChrisDenton/repos",
      "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChrisDenton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T16:34:51Z",
    "updated_at": "2023-12-22T16:34:51Z",
    "body": "We could make a macro I guess. It'd be pretty redundant though when/if `thread_local` proper is stabilized. Unless we decide to just have a macro and not the attribute.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867876486/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867877950",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1867877950",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1867877950,
    "node_id": "IC_kwDOAAsO6M5vVY4-",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T16:36:36Z",
    "updated_at": "2023-12-22T16:37:01Z",
    "body": "The API provided by `#[thread_local] static` and const-thread_local is pretty different I think. So your proposal does introduce redundancy that we currently don't have. There'd be two stable ways to do the same thing and two completely different mechanisms to ensure the necessary restrictions (such as \"no `'static` references\").",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867877950/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867879942",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1867879942",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1867879942,
    "node_id": "IC_kwDOAAsO6M5vVZYG",
    "user": {
      "login": "ChrisDenton",
      "id": 4459874,
      "node_id": "MDQ6VXNlcjQ0NTk4NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChrisDenton",
      "html_url": "https://github.com/ChrisDenton",
      "followers_url": "https://api.github.com/users/ChrisDenton/followers",
      "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions",
      "organizations_url": "https://api.github.com/users/ChrisDenton/orgs",
      "repos_url": "https://api.github.com/users/ChrisDenton/repos",
      "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChrisDenton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T16:39:05Z",
    "updated_at": "2023-12-22T16:39:05Z",
    "body": "The \"two ways to do things\" will occur whatever happens unless we simply don't stabilize `#[thread_local] static`.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867879942/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867881462",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1867881462",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1867881462,
    "node_id": "IC_kwDOAAsO6M5vVZv2",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T16:40:53Z",
    "updated_at": "2023-12-22T16:41:00Z",
    "body": "That is true. If the usecases are covered I don't see a reason to stabilize `#[thread_local] static`. It could be transitioned to an internal feature, an implementation detail of the public macros.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867881462/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867929865",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1867929865",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1867929865,
    "node_id": "IC_kwDOAAsO6M5vVlkJ",
    "user": {
      "login": "ChrisDenton",
      "id": 4459874,
      "node_id": "MDQ6VXNlcjQ0NTk4NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChrisDenton",
      "html_url": "https://github.com/ChrisDenton",
      "followers_url": "https://api.github.com/users/ChrisDenton/followers",
      "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions",
      "organizations_url": "https://api.github.com/users/ChrisDenton/orgs",
      "repos_url": "https://api.github.com/users/ChrisDenton/repos",
      "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChrisDenton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T17:39:07Z",
    "updated_at": "2023-12-22T17:39:07Z",
    "body": "`core::thread_local!` would also need [`LocalKey`](https://doc.rust-lang.org/std/thread/struct.LocalKey.html) moved into `core::thread` (or an equivalent to it). One thing that `thread_local!` forces that `#[thread_local]` doesn't is going through a shared reference. There would also still need to be a way to know if `thread_local` is supported in `no_std`.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867929865/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867988272",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1867988272",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1867988272,
    "node_id": "IC_kwDOAAsO6M5vVz0w",
    "user": {
      "login": "newpavlov",
      "id": 329626,
      "node_id": "MDQ6VXNlcjMyOTYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/329626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/newpavlov",
      "html_url": "https://github.com/newpavlov",
      "followers_url": "https://api.github.com/users/newpavlov/followers",
      "following_url": "https://api.github.com/users/newpavlov/following{/other_user}",
      "gists_url": "https://api.github.com/users/newpavlov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/newpavlov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/newpavlov/subscriptions",
      "organizations_url": "https://api.github.com/users/newpavlov/orgs",
      "repos_url": "https://api.github.com/users/newpavlov/repos",
      "events_url": "https://api.github.com/users/newpavlov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/newpavlov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T18:52:18Z",
    "updated_at": "2023-12-22T18:52:18Z",
    "body": ">What is the motivation for that? Doesn't thread_local! { static NAME = const { ... } } suffice?\r\n\r\nIIRC generated assembly for `thread_local!` was quite ugly when compared to equivalent `#[thread_local]` code. I haven't measured performance impact and do not know if it's possible to work around it with `std` changes, but it's still an example of non-zero-costness. Also, `#[thread_local]`-based code simply looks nicer and more ergonomic.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867988272/reactions",
      "total_count": 9,
      "+1": 9,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867993623",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1867993623",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1867993623,
    "node_id": "IC_kwDOAAsO6M5vV1IX",
    "user": {
      "login": "ChrisDenton",
      "id": 4459874,
      "node_id": "MDQ6VXNlcjQ0NTk4NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChrisDenton",
      "html_url": "https://github.com/ChrisDenton",
      "followers_url": "https://api.github.com/users/ChrisDenton/followers",
      "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions",
      "organizations_url": "https://api.github.com/users/ChrisDenton/orgs",
      "repos_url": "https://api.github.com/users/ChrisDenton/repos",
      "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChrisDenton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T18:59:47Z",
    "updated_at": "2023-12-22T19:06:03Z",
    "body": "For the new `thread_local! { static FOO: ... = const { ... }` syntax it should all be optimized down to a minimum. If not then we should really try to fix that.\r\n\r\nEDIT: assuming the type of `FOO` has no drop, of course.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1867993623/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1868005236",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1868005236",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1868005236,
    "node_id": "IC_kwDOAAsO6M5vV390",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T19:17:05Z",
    "updated_at": "2023-12-22T19:17:05Z",
    "body": "> Also, #[thread_local]-based code simply looks nicer and more ergonomic.\r\n\r\nIf they only work for `Copy` types and you can't take any references (and hence also not call any `&self`/`&mut self` methods), I am not sure if that's still true.\r\n\r\nAnd taking references would be unsound.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1868005236/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1868009278",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1868009278",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1868009278,
    "node_id": "IC_kwDOAAsO6M5vV48-",
    "user": {
      "login": "bjorn3",
      "id": 17426603,
      "node_id": "MDQ6VXNlcjE3NDI2NjAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bjorn3",
      "html_url": "https://github.com/bjorn3",
      "followers_url": "https://api.github.com/users/bjorn3/followers",
      "following_url": "https://api.github.com/users/bjorn3/following{/other_user}",
      "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions",
      "organizations_url": "https://api.github.com/users/bjorn3/orgs",
      "repos_url": "https://api.github.com/users/bjorn3/repos",
      "events_url": "https://api.github.com/users/bjorn3/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bjorn3/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T19:23:57Z",
    "updated_at": "2023-12-22T19:23:57Z",
    "body": "> And taking references would be unsound.\r\n\r\nBorrowck limits those references to the current function already I believe.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1868009278/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1868010505",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1868010505",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1868010505,
    "node_id": "IC_kwDOAAsO6M5vV5QJ",
    "user": {
      "login": "ChrisDenton",
      "id": 4459874,
      "node_id": "MDQ6VXNlcjQ0NTk4NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChrisDenton",
      "html_url": "https://github.com/ChrisDenton",
      "followers_url": "https://api.github.com/users/ChrisDenton/followers",
      "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions",
      "organizations_url": "https://api.github.com/users/ChrisDenton/orgs",
      "repos_url": "https://api.github.com/users/ChrisDenton/repos",
      "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChrisDenton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T19:26:07Z",
    "updated_at": "2023-12-22T19:26:07Z",
    "body": "Yes. The goal would be to eventually make full `#[thread_local]`  stabilized (once bugs, etc are fixed). But that's not happening any time soon and in the meantime a minimal stabilization would be useful.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1868010505/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1868081495",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1868081495",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1868081495,
    "node_id": "IC_kwDOAAsO6M5vWKlX",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T21:31:36Z",
    "updated_at": "2023-12-22T21:31:36Z",
    "body": "Oh interesting, I wasn't aware that borrowck had special treatment for thread_local statics.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1868081495/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1868109931",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1868109931",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1868109931,
    "node_id": "IC_kwDOAAsO6M5vWRhr",
    "user": {
      "login": "chorman0773",
      "id": 5026283,
      "node_id": "MDQ6VXNlcjUwMjYyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5026283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chorman0773",
      "html_url": "https://github.com/chorman0773",
      "followers_url": "https://api.github.com/users/chorman0773/followers",
      "following_url": "https://api.github.com/users/chorman0773/following{/other_user}",
      "gists_url": "https://api.github.com/users/chorman0773/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chorman0773/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chorman0773/subscriptions",
      "organizations_url": "https://api.github.com/users/chorman0773/orgs",
      "repos_url": "https://api.github.com/users/chorman0773/repos",
      "events_url": "https://api.github.com/users/chorman0773/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chorman0773/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-22T22:34:49Z",
    "updated_at": "2023-12-23T02:44:17Z",
    "body": "I'd be very interested in seeing this stablized. \r\nI use `#[thread_local]` in the interface code for my WIP OS, as an import/export for thread_local statics (https://github.com/LiliumOS/lilium-sys/blob/main/src/sys/io.rs#L44-L54). The handles here are thread-local (as handles themselves are thread-local resources in the OS) that are initialized by the USI (userspace standard interface) when you create a thread (This specific case is limited to a `Copy` type and you probably won't be be borrowing the handles often at all).\r\n\r\nIn general, being able to import an external TLS var without shim code written in C is useful (for example, if you want to grab `__errno`). This cannot be done with `LocalKey` and `std::thread_local!`. \r\n`#[thread_local]` would also enable using TLS in a no-std context, such as a kernel.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1868109931/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1868302371",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1868302371",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1868302371,
    "node_id": "IC_kwDOAAsO6M5vXAgj",
    "user": {
      "login": "newpavlov",
      "id": 329626,
      "node_id": "MDQ6VXNlcjMyOTYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/329626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/newpavlov",
      "html_url": "https://github.com/newpavlov",
      "followers_url": "https://api.github.com/users/newpavlov/followers",
      "following_url": "https://api.github.com/users/newpavlov/following{/other_user}",
      "gists_url": "https://api.github.com/users/newpavlov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/newpavlov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/newpavlov/subscriptions",
      "organizations_url": "https://api.github.com/users/newpavlov/orgs",
      "repos_url": "https://api.github.com/users/newpavlov/repos",
      "events_url": "https://api.github.com/users/newpavlov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/newpavlov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-23T14:10:51Z",
    "updated_at": "2023-12-23T14:10:51Z",
    "body": "@RalfJung \r\n>If they only work for Copy types and you can't take any references (and hence also not call any &self/&mut self methods), I am not sure if that's still true.\r\n\r\nHow about introducing a pointer-based variant of `#[thread_local]`? Something like this:\r\n```rust\r\n// Creates TLS value which stores 42 and creates \"pointer\" `FOO` to it.\r\n#[thread_local_ptr]\r\nstatic FOO: *mut u64 = 42u64;\r\n\r\nfn increment_foo() {\r\n    // SAFETY: reference to `FOO`does not escape execution thread\r\n    let foo: &mut u64  = unsafe { &mut *FOO };\r\n    *foo += 1;\r\n}\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1868302371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1868321003",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1868321003",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1868321003,
    "node_id": "IC_kwDOAAsO6M5vXFDr",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-23T16:01:46Z",
    "updated_at": "2023-12-23T16:01:46Z",
    "body": "@newpavlov it seems someone already taught the borrow checker about thread_local so taking references to them is actually sound. That's pretty cool.\r\n\r\nI don't like there being this API duplication and inconsistency between that and the `thread_local!` macro, but that's up to libs-api to figure out.\r\n\r\nWe'd have to be rather careful where we enable this feature; in the past, I think on some Windows targets we switched back-and-forth between \"true\" thread-local statics and some other implementation for the `thread_local!` macro. The macro gives us the flexibility to do that; `#[thread_local]` does not, so once we allow it somewhere, if we later figure out there is some platform issue then we are in trouble.\r\n\r\nI'm slightly bothered by thread-local statics pretending to be statics. They have very little in common with regular `static` in terms of their semantics. `&FOO` isn't even a constant, it is a function. We do reflect this in the MIR at least so bugs due to this are hopefully unlikely. And I don't have a proposal for a better syntax either so :shrug: ",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1868321003/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1874468467",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-1874468467",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 1874468467,
    "node_id": "IC_kwDOAAsO6M5vuh5z",
    "user": {
      "login": "Amanieu",
      "id": 278509,
      "node_id": "MDQ6VXNlcjI3ODUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amanieu",
      "html_url": "https://github.com/Amanieu",
      "followers_url": "https://api.github.com/users/Amanieu/followers",
      "following_url": "https://api.github.com/users/Amanieu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions",
      "organizations_url": "https://api.github.com/users/Amanieu/orgs",
      "repos_url": "https://api.github.com/users/Amanieu/repos",
      "events_url": "https://api.github.com/users/Amanieu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amanieu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-01-02T19:44:28Z",
    "updated_at": "2024-01-02T19:44:28Z",
    "body": "I have a few use cases for `#[thread_local]` that can't be satisfied by the standard library's `thread_local!` macro:\r\n- The code base is a `no_std` binary which doesn't depend on libc (it has its own TLS/stack initialization code).\r\n- It exports `#[thread_local]` variables for use by C code (`errno`).\r\n- It used to `#[thread_local]` variables in inline assembly (by symbol name), although that code has since been refactored and it not longer does that. It is possible to know the exact instruction sequence to use with the symbol because the whole code base is compiled with `-Z tls-model=local-exec`.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1874468467/reactions",
      "total_count": 26,
      "+1": 26,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2290675479",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-2290675479",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 2290675479,
    "node_id": "IC_kwDOAAsO6M6IiO8X",
    "user": {
      "login": "dead-claudia",
      "id": 4483844,
      "node_id": "MDQ6VXNlcjQ0ODM4NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4483844?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dead-claudia",
      "html_url": "https://github.com/dead-claudia",
      "followers_url": "https://api.github.com/users/dead-claudia/followers",
      "following_url": "https://api.github.com/users/dead-claudia/following{/other_user}",
      "gists_url": "https://api.github.com/users/dead-claudia/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dead-claudia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dead-claudia/subscriptions",
      "organizations_url": "https://api.github.com/users/dead-claudia/orgs",
      "repos_url": "https://api.github.com/users/dead-claudia/repos",
      "events_url": "https://api.github.com/users/dead-claudia/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dead-claudia/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-08-15T05:34:41Z",
    "updated_at": "2024-08-15T05:34:41Z",
    "body": "> `#[thread_local]` translates directly to the `thread_local` attribute in LLVM. This isn't supported on all platforms, and it's not even supported on all distributions within the same platform (e.g. 10.6 doesn't support it but 10.7 does). I don't think this is necessarily a blocker, but I also don't think we have many attributes and such which are so platform specific like this.\n\nWhat's the status of this? I see a lot of discussion around a hypothetical `cfg(target_thread_local)`, but nothing concrete?",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2290675479/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2290718000",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-2290718000",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 2290718000,
    "node_id": "IC_kwDOAAsO6M6IiZUw",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-08-15T05:58:38Z",
    "updated_at": "2024-08-15T05:58:38Z",
    "body": "It's not hypothetical, `cfg(target_thread_local)` exists on nightly. However, historically we have turned this on and off on some platforms to work around various bugs, so we should be careful before just blanket-exposing this on stable.\r\n\r\n> It used to #[thread_local] variables in inline assembly (by symbol name), although that code has since been refactored and it not longer does that. It is possible to know the exact instruction sequence to use with the symbol because the whole code base is compiled with -Z tls-model=local-exec.\r\n\r\nIf we just allow asm blocks to reference thread-locals, I worry it will lead to much confusion and errors. A thread-local is not just a normal symbol, after all -- but a Rust programmer might think it is, since in Rust code it behaves much like a static, but that's a sweet lie.\r\n\r\nUnfortunately the inline asm docs don't even give an example for how `sym` is used at all. They do mention this though:\r\n\r\n> <path> is allowed to point to a #[thread_local] static, in which case the asm code can combine the symbol with relocations (e.g. @plt, @TPOFF) to read from thread-local data.\r\n\r\nPresumably, it is UB to try to access that symbol without the exactly right set of relocations matching the current target and build flags? Seems like a pretty big footgun.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2290718000/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2293826479",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-2293826479",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 2293826479,
    "node_id": "IC_kwDOAAsO6M6IuQOv",
    "user": {
      "login": "Amanieu",
      "id": 278509,
      "node_id": "MDQ6VXNlcjI3ODUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amanieu",
      "html_url": "https://github.com/Amanieu",
      "followers_url": "https://api.github.com/users/Amanieu/followers",
      "following_url": "https://api.github.com/users/Amanieu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions",
      "organizations_url": "https://api.github.com/users/Amanieu/orgs",
      "repos_url": "https://api.github.com/users/Amanieu/repos",
      "events_url": "https://api.github.com/users/Amanieu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amanieu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-08-16T16:42:58Z",
    "updated_at": "2024-08-16T16:42:58Z",
    "body": "> Presumably, it is UB to try to access that symbol without the exactly right set of relocations matching the current target and build flags? Seems like a pretty big footgun.\r\n\r\nIt's always safe to use the most general relocations (which involve calling `__tls_get_addr`). It's the more specific ones like `@tpoff` which are only valid with certain TLS models (for example `local-exec` is only valid in executables, not shared libraries).",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2293826479/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2293840583",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-2293840583",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 2293840583,
    "node_id": "IC_kwDOAAsO6M6IuTrH",
    "user": {
      "login": "bjorn3",
      "id": 17426603,
      "node_id": "MDQ6VXNlcjE3NDI2NjAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bjorn3",
      "html_url": "https://github.com/bjorn3",
      "followers_url": "https://api.github.com/users/bjorn3/followers",
      "following_url": "https://api.github.com/users/bjorn3/following{/other_user}",
      "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions",
      "organizations_url": "https://api.github.com/users/bjorn3/orgs",
      "repos_url": "https://api.github.com/users/bjorn3/repos",
      "events_url": "https://api.github.com/users/bjorn3/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bjorn3/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-08-16T16:53:10Z",
    "updated_at": "2024-08-16T16:53:10Z",
    "body": "Using `__tls_get_addr` requires you to emit a very specific set of bytes and relocations (on x86 this includes redundant prefixes). Getting anything wrong will likely cause tls relaxation by the linker to either error or generate a corrupt binary. And even with the most general relocations you still have to deal with different object file formats using different ways of accessing TLS. We currently don't have any cfg's for the object file format, so doing something that works correct on any OS for a given architecture is not possible.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2293840583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2294799056",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-2294799056",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 2294799056,
    "node_id": "IC_kwDOAAsO6M6Ix9rQ",
    "user": {
      "login": "Qix-",
      "id": 885648,
      "node_id": "MDQ6VXNlcjg4NTY0OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/885648?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Qix-",
      "html_url": "https://github.com/Qix-",
      "followers_url": "https://api.github.com/users/Qix-/followers",
      "following_url": "https://api.github.com/users/Qix-/following{/other_user}",
      "gists_url": "https://api.github.com/users/Qix-/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Qix-/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Qix-/subscriptions",
      "organizations_url": "https://api.github.com/users/Qix-/orgs",
      "repos_url": "https://api.github.com/users/Qix-/repos",
      "events_url": "https://api.github.com/users/Qix-/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Qix-/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-08-17T08:55:05Z",
    "updated_at": "2024-08-17T08:55:05Z",
    "body": "Just curious, are there any thread-local modes that aren't based on ELF's thread structure system? e.g. on x86_64 will we eventually be able to simply emit instructions that use FS/GS segments directly instead of reading a pointer from a negative offset and de-referencing it?\r\n\r\nAs far as I can tell that's GNU's/ELF's TLS model that doesn't really translate nicely to `#![no_std]` code (sans-OS) on x86_64.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2294799056/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2878474022",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-2878474022",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 2878474022,
    "node_id": "IC_kwDOAAsO6M6rkgcm",
    "user": {
      "login": "pervognsen",
      "id": 123173,
      "node_id": "MDQ6VXNlcjEyMzE3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/123173?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pervognsen",
      "html_url": "https://github.com/pervognsen",
      "followers_url": "https://api.github.com/users/pervognsen/followers",
      "following_url": "https://api.github.com/users/pervognsen/following{/other_user}",
      "gists_url": "https://api.github.com/users/pervognsen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pervognsen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pervognsen/subscriptions",
      "organizations_url": "https://api.github.com/users/pervognsen/orgs",
      "repos_url": "https://api.github.com/users/pervognsen/repos",
      "events_url": "https://api.github.com/users/pervognsen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pervognsen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2025-05-14T02:45:32Z",
    "updated_at": "2025-05-14T02:46:01Z",
    "body": "> As far as I can tell that's GNU's/ELF's TLS model that doesn't really translate nicely to `#![no_std]` code (sans-OS) on x86_64.\n\nYou should be able to use tls-model=local-exec: https://rust.godbolt.org/z/Yd119fdj4. \n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2878474022/reactions",
      "total_count": 3,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2879218993",
    "html_url": "https://github.com/rust-lang/rust/issues/29594#issuecomment-2879218993",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29594",
    "id": 2879218993,
    "node_id": "IC_kwDOAAsO6M6rnWUx",
    "user": {
      "login": "Soveu",
      "id": 34382234,
      "node_id": "MDQ6VXNlcjM0MzgyMjM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/34382234?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Soveu",
      "html_url": "https://github.com/Soveu",
      "followers_url": "https://api.github.com/users/Soveu/followers",
      "following_url": "https://api.github.com/users/Soveu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Soveu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Soveu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Soveu/subscriptions",
      "organizations_url": "https://api.github.com/users/Soveu/orgs",
      "repos_url": "https://api.github.com/users/Soveu/repos",
      "events_url": "https://api.github.com/users/Soveu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Soveu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2025-05-14T08:11:39Z",
    "updated_at": "2025-05-14T08:11:39Z",
    "body": "I think tls model also changes to local-exec when the binary is statically linked",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2879218993/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
