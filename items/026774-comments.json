[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/135211754",
    "html_url": "https://github.com/rust-lang/rust/issues/26774#issuecomment-135211754",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26774",
    "id": 135211754,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNTIxMTc1NA==",
    "user": {
      "login": "eminence",
      "id": 402454,
      "node_id": "MDQ6VXNlcjQwMjQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/402454?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eminence",
      "html_url": "https://github.com/eminence",
      "followers_url": "https://api.github.com/users/eminence/followers",
      "following_url": "https://api.github.com/users/eminence/following{/other_user}",
      "gists_url": "https://api.github.com/users/eminence/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eminence/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eminence/subscriptions",
      "organizations_url": "https://api.github.com/users/eminence/orgs",
      "repos_url": "https://api.github.com/users/eminence/repos",
      "events_url": "https://api.github.com/users/eminence/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eminence/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-27T00:07:14Z",
    "updated_at": "2015-08-27T00:07:14Z",
    "body": "Reproduced as well, also on apple-darwin : OS X version 10.9.5\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/135211754/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/139103119",
    "html_url": "https://github.com/rust-lang/rust/issues/26774#issuecomment-139103119",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26774",
    "id": 139103119,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzOTEwMzExOQ==",
    "user": {
      "login": "eminence",
      "id": 402454,
      "node_id": "MDQ6VXNlcjQwMjQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/402454?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eminence",
      "html_url": "https://github.com/eminence",
      "followers_url": "https://api.github.com/users/eminence/followers",
      "following_url": "https://api.github.com/users/eminence/following{/other_user}",
      "gists_url": "https://api.github.com/users/eminence/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eminence/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eminence/subscriptions",
      "organizations_url": "https://api.github.com/users/eminence/orgs",
      "repos_url": "https://api.github.com/users/eminence/repos",
      "events_url": "https://api.github.com/users/eminence/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eminence/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-10T03:07:46Z",
    "updated_at": "2015-09-10T03:51:31Z",
    "body": "I've narrowed it down to the following:\n\n```\nmbp:cargo achin$ ./.travis.install.deps.sh  \n+ python src/etc/install-deps.py\nrunning: curl -o rustc-nightly-x86_64-apple-darwin.tar.gz https://static.rust-lang.org/dist/2015-08-13/rustc-nightly-x86_64-apple-darwin.tar.gz\nextracting rustc-nightly-x86_64-apple-darwin.tar.gz\nadding target libs for i686-apple-darwin\nrunning: curl -o rustc-nightly-i686-apple-darwin.tar.gz https://static.rust-lang.org/dist/2015-08-13/rustc-nightly-i686-apple-darwin.tar.gz\nmbp:cargo achin$ \n```\n\n```\nmbp:cargo achin$ cat a.rs  \npub fn main() {\n\n    }\n```\n\n```\nmbp:cargo achin$ env RUST_BACKTRACE=1 DYLD_LIBRARY_PATH=${PWD}/rustc/lib/ PATH=${PWD}/rustc/bin/:${PATH} rustc --crate-type lib a.rs -l static=z -L native=/opt/local/lib \nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nthread 'rustc' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Custom(Custom { kind: Other, error: StringError(\"failed to open archive\") }) }', ../src/libcore/result.rs:732\n\nstack backtrace:\n   1:        0x104193bc0 - sys::backtrace::write::ha29ed9eeda09b191Yts\n   2:        0x10419be01 - panicking::on_panic::h4f0311883f3e75d9Z7w\n   3:        0x10415f512 - rt::unwind::begin_unwind_inner::hcd1c9ab2da35c9410Cw\n   4:        0x104160107 - rt::unwind::begin_unwind_fmt::hfb293892a08f91906Bw\n   5:        0x10419b9f7 - rust_begin_unwind\n   6:        0x1041e76a0 - panicking::panic_fmt::h687aa220bbe8cf9dqgC\n   7:        0x1007fa2a1 - back::link::link_rlib::h928bc1e051a71c40nQb\n   8:        0x1007f72c3 - back::link::link_binary::h3416077127894b5fRCb\n   9:        0x10067b533 - driver::phase_6_link_output::haa465d1c10610748kRa\n  10:        0x100650ac0 - driver::compile_input::h71e7015e5f60fc20Tba\n  11:        0x10072e39e - run_compiler::he0b8e9edf87ff758C7b\n  12:        0x10072bf8b - boxed::F.FnBox<A>::call_box::h710433560290561307\n  13:        0x10072b8e2 - rt::unwind::try::try_fn::h4210567753699827351\n  14:        0x10419b9a8 - __rust_try\n  15:        0x104187e70 - rt::unwind::try::inner_try::h332543bb689c0967Tyw\n  16:        0x10072baa2 - boxed::F.FnBox<A>::call_box::h13997262008008063974\n  17:        0x10419ac5d - sys::thread::Thread::new::thread_start::h6180cb2a7d6f1601eXv\n  18:     0x7fff84ada898 - _pthread_body\n  19:     0x7fff84ada729 - _pthread_start\n```\n\nAll three parts seem necessary:  `--crate-type lib`, `-l static=z` and `L native=/opt/local/lib`\n\nSince it appears to be related to libz, maybe the following information is helpful:\n\n```\nmbp:cargo achin$ ls -l /opt//local/lib/libz.* \n-rwxr-xr-x  1 root  admin  157800 Nov 10  2013 /opt//local/lib/libz.1.2.8.dylib\nlrwxr-xr-x  1 root  admin      16 Nov 10  2013 /opt//local/lib/libz.1.dylib -> libz.1.2.8.dylib\n-rw-r--r--  1 root  admin  176424 Nov 10  2013 /opt//local/lib/libz.a\nlrwxr-xr-x  1 root  admin      16 Nov 10  2013 /opt//local/lib/libz.dylib -> libz.1.2.8.dylib\nmbp:cargo achin$ file /opt/local/lib/libz.*\n/opt/local/lib/libz.1.2.8.dylib: Mach-O universal binary with 2 architectures\n/opt/local/lib/libz.1.2.8.dylib (for architecture x86_64):      Mach-O 64-bit dynamically linked shared library x86_64\n/opt/local/lib/libz.1.2.8.dylib (for architecture i386):        Mach-O dynamically linked shared library i386\n/opt/local/lib/libz.1.dylib:     Mach-O universal binary with 2 architectures\n/opt/local/lib/libz.1.dylib (for architecture x86_64):  Mach-O 64-bit dynamically linked shared library x86_64\n/opt/local/lib/libz.1.dylib (for architecture i386):    Mach-O dynamically linked shared library i386\n/opt/local/lib/libz.a:           Mach-O universal binary with 2 architectures\n/opt/local/lib/libz.a (for architecture x86_64):        current ar archive random library\n/opt/local/lib/libz.a (for architecture i386):  current ar archive random library\n/opt/local/lib/libz.dylib:       Mach-O universal binary with 2 architectures\n/opt/local/lib/libz.dylib (for architecture x86_64):    Mach-O 64-bit dynamically linked shared library x86_64\n/opt/local/lib/libz.dylib (for architecture i386):      Mach-O dynamically linked shared library i386\n```\n\nOn a hunch, I rebuild libz (`port upgrade --enforce-variants zlib -universal`) to not be a universal binary, and that seemed to fix things.\n\nSo I guess the cause identified, but the fix is still unknown\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/139103119/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/139108894",
    "html_url": "https://github.com/rust-lang/rust/issues/26774#issuecomment-139108894",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26774",
    "id": 139108894,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzOTEwODg5NA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-10T03:52:42Z",
    "updated_at": "2015-09-10T03:52:42Z",
    "body": "It may be the case that `/opt/local/lib/libz.a` is a \"universal archive\" which may not be a literal `ar` archive on OSX (b/c it has multiple architectures inside). I'm not quite sure how to disassemble it into just one archive with one architecture, but perhaps that is the root of the problem?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/139108894/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/278795349",
    "html_url": "https://github.com/rust-lang/rust/issues/26774#issuecomment-278795349",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26774",
    "id": 278795349,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODc5NTM0OQ==",
    "user": {
      "login": "cyplo",
      "id": 217899,
      "node_id": "MDQ6VXNlcjIxNzg5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/217899?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cyplo",
      "html_url": "https://github.com/cyplo",
      "followers_url": "https://api.github.com/users/cyplo/followers",
      "following_url": "https://api.github.com/users/cyplo/following{/other_user}",
      "gists_url": "https://api.github.com/users/cyplo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cyplo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cyplo/subscriptions",
      "organizations_url": "https://api.github.com/users/cyplo/orgs",
      "repos_url": "https://api.github.com/users/cyplo/repos",
      "events_url": "https://api.github.com/users/cyplo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cyplo/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-02-09T22:29:02Z",
    "updated_at": "2017-02-09T22:29:02Z",
    "body": "Hi ! Is this still a problem ?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/278795349/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424072305",
    "html_url": "https://github.com/rust-lang/rust/issues/26774#issuecomment-424072305",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26774",
    "id": 424072305,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDA3MjMwNQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-09-24T18:13:41Z",
    "updated_at": "2018-09-24T18:13:41Z",
    "body": "With no substantial comments since 2015, and no response to the 2017 comment asking if this is still an issue, I'm going to close this. Please let us know if you're still seeing this!",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424072305/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
