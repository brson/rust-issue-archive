[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54740009",
    "html_url": "https://github.com/rust-lang/rust/issues/17060#issuecomment-54740009",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17060",
    "id": 54740009,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NzQwMDA5",
    "user": {
      "login": "nathantypanski",
      "id": 1385140,
      "node_id": "MDQ6VXNlcjEzODUxNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1385140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathantypanski",
      "html_url": "https://github.com/nathantypanski",
      "followers_url": "https://api.github.com/users/nathantypanski/followers",
      "following_url": "https://api.github.com/users/nathantypanski/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathantypanski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathantypanski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathantypanski/subscriptions",
      "organizations_url": "https://api.github.com/users/nathantypanski/orgs",
      "repos_url": "https://api.github.com/users/nathantypanski/repos",
      "events_url": "https://api.github.com/users/nathantypanski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathantypanski/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-07T07:46:48Z",
    "updated_at": "2014-09-07T07:46:48Z",
    "body": "Much more minimal example:\n\n```\n#![feature(unboxed_closures)]\n\nfn main(){\n    struct Foo<'a, T> {\n        fun:  Box<Fn<((), ), ((), T)> + 'a>\n    }\n\n    fn bar<'a, T> (h: Foo<'a, T>) -> Foo<'a, T>{\n        Foo {\n            fun: box |&: _: ()| {\n                h.fun.call(((), ))\n            }\n        }\n    }\n\n    bar(Foo {\n            fun: box |&: _: ()| {\n                ((), ())\n            }\n        }\n    );\n}\n```\n\n```\nscratch$ RUST_BACKTRACE=1 rustc 17060.rs \nerror: internal compiler error: fictitious type T in sizing_type_of()\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'Box<Any>', /home/nathan/m/prj/rust/rust/src/libsyntax/ast_util.rs:776\n\nstack backtrace:\n   1:     0x7fa99d669e10 - rt::backtrace::imp::write::h51aa68d0663f3b61QLq\n   2:     0x7fa99d66cf90 - failure::on_fail::h297efee10e7c3dcby7q\n   3:     0x7fa9a1c0c290 - unwind::begin_unwind_inner::h41358ca950f0d61262d\n   4:     0x7fa99e404190 - unwind::begin_unwind::h15398001123804529202\n   5:     0x7fa99e404820 - diagnostic::Handler::bug::hdef46b4ea651e464ufF\n   6:     0x7fa9a2214200 - driver::session::Session::bug::h02a5f48a9d9f9eb1uKC\n   7:     0x7fa9a25450b0 - middle::trans::type_of::sizing_type_of::ha11747c57b42fdbfmk9\n   8:     0x7fa9a262c640 - middle::trans::adt::mk_struct::h79b77082e9c2eac9tZt\n   9:     0x7fa9a253e330 - middle::trans::adt::represent_type::hf72895e4426bae54Kxt\n  10:     0x7fa9a25450b0 - middle::trans::type_of::sizing_type_of::ha11747c57b42fdbfmk9\n  11:     0x7fa9a2553ef0 - middle::trans::common::type_is_immediate::h3c54d101f2bd0772tU5\n  12:     0x7fa9a25a8cd0 - middle::trans::type_of::type_of_rust_fn::h12a37148d1de81c8Xg9\n  13:     0x7fa9a25b9260 - middle::trans::base::decl_rust_fn::h12564314a66abf06oGc\n  14:     0x7fa9a255f530 - middle::trans::closure::get_or_create_declaration_if_unboxed_closure::hd043bd5c8f2aeb2640i\n  15:     0x7fa9a257e770 - middle::trans::closure::trans_unboxed_closure::h8a471658ddbc27c9v6i\n  16:     0x7fa9a256b4a0 - middle::trans::expr::trans_rvalue_dps_unadjusted::hbdb735d1cb49bf56PY3\n  17:     0x7fa9a2533e70 - middle::trans::expr::trans_into::h123a8cb28868f2addC2\n  18:     0x7fa9a2574f00 - middle::trans::expr::trans_uniq_expr::h30b88a9c8d284f8fcL4\n  19:     0x7fa9a2575830 - middle::trans::expr::trans_unary::h6c1ede6e229c70fa7G4\n  20:     0x7fa9a256a850 - middle::trans::expr::trans_unadjusted::h171ecf2b051fc47dnp3\n  21:     0x7fa9a2534de0 - middle::trans::expr::trans::hb43b26a8c8c973dc9F2\n  22:     0x7fa9a2533e70 - middle::trans::expr::trans_into::h123a8cb28868f2addC2\n  23:     0x7fa9a257ccc0 - middle::trans::expr::trans_adt::hb19dfc5187fcff3azy4\n  24:     0x7fa9a257ffc0 - middle::trans::expr::trans_struct::closure.115770\n  25:     0x7fa9a256b4a0 - middle::trans::expr::trans_rvalue_dps_unadjusted::hbdb735d1cb49bf56PY3\n  26:     0x7fa9a2533e70 - middle::trans::expr::trans_into::h123a8cb28868f2addC2\n  27:     0x7fa9a2534130 - middle::trans::controlflow::trans_block::h3153dd2213ad6bf4esY\n  28:     0x7fa9a25cbda0 - middle::trans::base::trans_closure::hfafe5698ece5431ccIe\n  29:     0x7fa9a252a740 - middle::trans::base::trans_fn::h323ef7584c829916ZTe\n  30:     0x7fa9a252ac60 - middle::trans::monomorphize::monomorphic_fn::h318dd6b9156fceeabPX\n  31:     0x7fa9a2557fc0 - middle::trans::callee::trans_fn_ref_with_vtables::h60202876a6fead6aQm1\n  32:     0x7fa9a2556dd0 - middle::trans::callee::trans_fn_ref::h69bad953cd0bdaa7Y80\n  33:     0x7fa9a2560080 - middle::trans::callee::trans_call::closure.115515\n  34:     0x7fa9a253b740 - middle::trans::callee::trans_call_inner::hcef07a1a5f7c3620FN1\n  35:     0x7fa9a255fe20 - middle::trans::callee::trans_call::h464b09bb44d97480KH1\n  36:     0x7fa9a256b4a0 - middle::trans::expr::trans_rvalue_dps_unadjusted::hbdb735d1cb49bf56PY3\n  37:     0x7fa9a256a850 - middle::trans::expr::trans_unadjusted::h171ecf2b051fc47dnp3\n  38:     0x7fa9a2534de0 - middle::trans::expr::trans::hb43b26a8c8c973dc9F2\n  39:     0x7fa9a2533770 - middle::trans::controlflow::trans_stmt_semi::h26cd24ef900b92a3krY\n  40:     0x7fa9a2532fa0 - middle::trans::controlflow::trans_stmt::h94dc99c0f5a518693mY\n  41:     0x7fa9a2534130 - middle::trans::controlflow::trans_block::h3153dd2213ad6bf4esY\n  42:     0x7fa9a25cbda0 - middle::trans::base::trans_closure::hfafe5698ece5431ccIe\n  43:     0x7fa9a252a740 - middle::trans::base::trans_fn::h323ef7584c829916ZTe\n  44:     0x7fa9a2526950 - middle::trans::base::trans_item::h67be48931734de89Zbf\n  45:     0x7fa9a25d5420 - middle::trans::base::trans_crate::h06bc312b46497235q6f\n  46:     0x7fa9a2979960 - driver::driver::phase_4_translate_to_llvm::hc08ae48b078f56e24aC\n  47:     0x7fa9a2971960 - driver::driver::compile_input::h08ecbcbe3a7bcaeacNB\n  48:     0x7fa9a2a047f0 - driver::run_compiler::hfe0d6a906000c83cCCF\n  49:     0x7fa9a2a04710 - driver::main_args::closure.136314\n  50:     0x7fa9a2a16e60 - task::TaskBuilder<S>::try_future::closure.137484\n  51:     0x7fa9a2a16c60 - task::TaskBuilder<S>::spawn_internal::closure.137461\n  52:     0x7fa9a1f2b850 - task::spawn_opts::closure.8394\n  53:     0x7fa9a1c33f50 - rust_try_inner\n  54:     0x7fa9a1c33f40 - rust_try\n  55:     0x7fa9a1c09a10 - unwind::try::h99dc0bfd91bbea66gRd\n  56:     0x7fa9a1c09870 - task::Task::run::hcec539e97a50e30692c\n  57:     0x7fa9a1f2b5c0 - task::spawn_opts::closure.8340\n  58:     0x7fa9a1c0b330 - thread::thread_start::h1519d237f0e56dbfgod\n  59:     0x7fa99ca09060 - start_thread\n  60:     0x7fa9a18dd489 - __clone\n  61:                0x0 - <unknown>\n\nscratch$ rustc -v\nrustc 0.12.0-pre (c95aa9950 2014-09-04 03:01:03 +0000)\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54740009/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54740190",
    "html_url": "https://github.com/rust-lang/rust/issues/17060#issuecomment-54740190",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17060",
    "id": 54740190,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NzQwMTkw",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-07T07:57:07Z",
    "updated_at": "2014-09-07T07:57:07Z",
    "body": "cc https://github.com/rust-lang/rust/issues/16672, https://github.com/rust-lang/rust/issues/16791\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54740190/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59477179",
    "html_url": "https://github.com/rust-lang/rust/issues/17060#issuecomment-59477179",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17060",
    "id": 59477179,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NDc3MTc5",
    "user": {
      "login": "bkoropoff",
      "id": 2101303,
      "node_id": "MDQ6VXNlcjIxMDEzMDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2101303?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bkoropoff",
      "html_url": "https://github.com/bkoropoff",
      "followers_url": "https://api.github.com/users/bkoropoff/followers",
      "following_url": "https://api.github.com/users/bkoropoff/following{/other_user}",
      "gists_url": "https://api.github.com/users/bkoropoff/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bkoropoff/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bkoropoff/subscriptions",
      "organizations_url": "https://api.github.com/users/bkoropoff/orgs",
      "repos_url": "https://api.github.com/users/bkoropoff/repos",
      "events_url": "https://api.github.com/users/bkoropoff/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bkoropoff/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-17T07:39:39Z",
    "updated_at": "2014-10-17T07:39:39Z",
    "body": "Even smaller:\n\n``` rust\nfn main(){\n    fn bar<'a, T:'a> (t: T) -> Box<FnOnce<(),T> + 'a> {\n        box move |:| t\n    }\n    bar(());\n}\n```\n\nIt looks like the `ty_unboxed_closure` variant has no way to represent monomorphization of free variables.  It likely needs a `Substs` field added with appropriate plumbing.  I'll look into how much work this is tomorrow.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59477179/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59478084",
    "html_url": "https://github.com/rust-lang/rust/issues/17060#issuecomment-59478084",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17060",
    "id": 59478084,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NDc4MDg0",
    "user": {
      "login": "bkoropoff",
      "id": 2101303,
      "node_id": "MDQ6VXNlcjIxMDEzMDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2101303?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bkoropoff",
      "html_url": "https://github.com/bkoropoff",
      "followers_url": "https://api.github.com/users/bkoropoff/followers",
      "following_url": "https://api.github.com/users/bkoropoff/following{/other_user}",
      "gists_url": "https://api.github.com/users/bkoropoff/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bkoropoff/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bkoropoff/subscriptions",
      "organizations_url": "https://api.github.com/users/bkoropoff/orgs",
      "repos_url": "https://api.github.com/users/bkoropoff/repos",
      "events_url": "https://api.github.com/users/bkoropoff/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bkoropoff/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-17T07:50:48Z",
    "updated_at": "2014-10-17T07:50:48Z",
    "body": "This looks to be the same as #16791\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59478084/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59527837",
    "html_url": "https://github.com/rust-lang/rust/issues/17060#issuecomment-59527837",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17060",
    "id": 59527837,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NTI3ODM3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-17T15:15:06Z",
    "updated_at": "2014-10-17T15:15:06Z",
    "body": "Thanks @bkoropoff! Closing as a dupe.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59527837/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
