[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125007890",
    "html_url": "https://github.com/rust-lang/rust/issues/27300#issuecomment-125007890",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27300",
    "id": 125007890,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTAwNzg5MA==",
    "user": {
      "login": "Xirdus",
      "id": 4664749,
      "node_id": "MDQ6VXNlcjQ2NjQ3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4664749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Xirdus",
      "html_url": "https://github.com/Xirdus",
      "followers_url": "https://api.github.com/users/Xirdus/followers",
      "following_url": "https://api.github.com/users/Xirdus/following{/other_user}",
      "gists_url": "https://api.github.com/users/Xirdus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Xirdus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Xirdus/subscriptions",
      "organizations_url": "https://api.github.com/users/Xirdus/orgs",
      "repos_url": "https://api.github.com/users/Xirdus/repos",
      "events_url": "https://api.github.com/users/Xirdus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Xirdus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-26T15:23:26Z",
    "updated_at": "2015-07-26T15:23:26Z",
    "body": "I don't think we should make custom-tailored error messages for people trying to write code in their favorite language and then compile it with rustc. Just like we don't issue any special warning on assigning result of assignment to a variable, we shouldn't issue a warning when someone tries to write Ruby lambdas in Rust. People should learn that even if something looks similar, it doesn't mean that it works the same as in their old language.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125007890/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125010216",
    "html_url": "https://github.com/rust-lang/rust/issues/27300#issuecomment-125010216",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27300",
    "id": 125010216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTAxMDIxNg==",
    "user": {
      "login": "muja",
      "id": 3709726,
      "node_id": "MDQ6VXNlcjM3MDk3MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3709726?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muja",
      "html_url": "https://github.com/muja",
      "followers_url": "https://api.github.com/users/muja/followers",
      "following_url": "https://api.github.com/users/muja/following{/other_user}",
      "gists_url": "https://api.github.com/users/muja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muja/subscriptions",
      "organizations_url": "https://api.github.com/users/muja/orgs",
      "repos_url": "https://api.github.com/users/muja/repos",
      "events_url": "https://api.github.com/users/muja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muja/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-26T15:47:46Z",
    "updated_at": "2015-07-26T15:49:18Z",
    "body": "@Xirdus nobody said anything about custom tailored messages and the problem is that the code from Ruby **does** compile in the first place (see the very first code snippet). Changing that, however, would be a breaking change, so instead, I proposed the solution as a warning that actually makes sense! Maybe don't even change the warning, just make a \"note: did you mean `|x| { ... }`\" ? It would help a lot of people and Rubyists are a target group of the Rust language.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125010216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125010771",
    "html_url": "https://github.com/rust-lang/rust/issues/27300#issuecomment-125010771",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27300",
    "id": 125010771,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTAxMDc3MQ==",
    "user": {
      "login": "killercup",
      "id": 20063,
      "node_id": "MDQ6VXNlcjIwMDYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/20063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/killercup",
      "html_url": "https://github.com/killercup",
      "followers_url": "https://api.github.com/users/killercup/followers",
      "following_url": "https://api.github.com/users/killercup/following{/other_user}",
      "gists_url": "https://api.github.com/users/killercup/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/killercup/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/killercup/subscriptions",
      "organizations_url": "https://api.github.com/users/killercup/orgs",
      "repos_url": "https://api.github.com/users/killercup/repos",
      "events_url": "https://api.github.com/users/killercup/events{/privacy}",
      "received_events_url": "https://api.github.com/users/killercup/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-26T15:53:12Z",
    "updated_at": "2015-07-26T16:02:41Z",
    "body": "> This code compiles (and, in my opinion, it shouldn't):\n\nJust to clarify (for you and anyone who may stumble over this syntax in the future and find this issue):\n\n``` rust\nlet p = Some(45).and_then({|x|\n    Some(x * 2)\n});\n```\n\nis the same as\n\n``` rust\nlet p = Some(45).and_then({\n    // This is a block with only one expression.\n    // It returns this expression (the closure):\n    |x| { Some(x * 2) } // braces optional\n});\n```\n\nThis is totally legitimate and should compile.\n\nYour other example\n\n``` rust\nlet p = Some(45).and_then({|x|\n    println!(\"doubling {}\", x);\n    Some(x * 2)\n})\n```\n\ncould be written as\n\n``` rust\nlet p = Some(45).and_then({\n    |x| { println!(\"doubling {}\", x) }; // braces optional\n    Some(x * 2) // returns `Some(i32)`\n})\n```\n\nI understand why rustc's error message is confusing. A solution would be to reformat your code shown in the error and annotating the blocks. (This might make stuff _more_ confusing in other cases, though!)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125010771/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125011402",
    "html_url": "https://github.com/rust-lang/rust/issues/27300#issuecomment-125011402",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27300",
    "id": 125011402,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTAxMTQwMg==",
    "user": {
      "login": "muja",
      "id": 3709726,
      "node_id": "MDQ6VXNlcjM3MDk3MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3709726?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/muja",
      "html_url": "https://github.com/muja",
      "followers_url": "https://api.github.com/users/muja/followers",
      "following_url": "https://api.github.com/users/muja/following{/other_user}",
      "gists_url": "https://api.github.com/users/muja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/muja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/muja/subscriptions",
      "organizations_url": "https://api.github.com/users/muja/orgs",
      "repos_url": "https://api.github.com/users/muja/repos",
      "events_url": "https://api.github.com/users/muja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/muja/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-26T16:03:08Z",
    "updated_at": "2015-07-26T16:04:42Z",
    "body": "@killercup thanks for the response! So you're saying we need `rustfmt`? I'm all for that and if that fixes the issue, I don't see a problem!\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125011402/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125011662",
    "html_url": "https://github.com/rust-lang/rust/issues/27300#issuecomment-125011662",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27300",
    "id": 125011662,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTAxMTY2Mg==",
    "user": {
      "login": "killercup",
      "id": 20063,
      "node_id": "MDQ6VXNlcjIwMDYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/20063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/killercup",
      "html_url": "https://github.com/killercup",
      "followers_url": "https://api.github.com/users/killercup/followers",
      "following_url": "https://api.github.com/users/killercup/following{/other_user}",
      "gists_url": "https://api.github.com/users/killercup/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/killercup/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/killercup/subscriptions",
      "organizations_url": "https://api.github.com/users/killercup/orgs",
      "repos_url": "https://api.github.com/users/killercup/repos",
      "events_url": "https://api.github.com/users/killercup/events{/privacy}",
      "received_events_url": "https://api.github.com/users/killercup/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-26T16:06:24Z",
    "updated_at": "2015-07-26T16:06:24Z",
    "body": "@muja you can already use https://github.com/nrc/rustfmt! (That isn't integrated into the compiler, though, so the error snippets won't get pretty by themselves.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125011662/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125014595",
    "html_url": "https://github.com/rust-lang/rust/issues/27300#issuecomment-125014595",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27300",
    "id": 125014595,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTAxNDU5NQ==",
    "user": {
      "login": "stevenblenkinsop",
      "id": 3118803,
      "node_id": "MDQ6VXNlcjMxMTg4MDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3118803?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stevenblenkinsop",
      "html_url": "https://github.com/stevenblenkinsop",
      "followers_url": "https://api.github.com/users/stevenblenkinsop/followers",
      "following_url": "https://api.github.com/users/stevenblenkinsop/following{/other_user}",
      "gists_url": "https://api.github.com/users/stevenblenkinsop/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stevenblenkinsop/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stevenblenkinsop/subscriptions",
      "organizations_url": "https://api.github.com/users/stevenblenkinsop/orgs",
      "repos_url": "https://api.github.com/users/stevenblenkinsop/repos",
      "events_url": "https://api.github.com/users/stevenblenkinsop/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stevenblenkinsop/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-26T16:34:55Z",
    "updated_at": "2015-07-26T23:38:51Z",
    "body": "In the first case, there could plausibly be a hint if you try to use a closure parameter in a subsequent statement, such as\n\n```\n<anon>:4:14: 4:15 error: unresolved name `x` [E0425]\n<anon>:4         Some(x * 2)\n                      ^\n<anon>:2:33: 2:34 note: nearest candidate defined at 2:33...\n<anon>:2    let p = Some(45).and_then({|x|\n                                        ^\n<anon>:3:35: 3:36 note: ...but goes out of scope at 3:35\n<anon>:3        println!(\"doubling {}\", x);\n                                          ^\nerror: aborting due to previous error\n```\n\nFor the second case, plausibly, when the expression for a closure isn't a block, you could have a hint:\n\n```\n<anon>:2:22: 5:7 error: the trait `core::ops::FnOnce<(_,)>` is not implemented for the type `core::option::Option<_>` [E0277]\n<anon>:2     let p = Some(45).and_then({|x|\n<anon>:3         println!(\"doubling {}\", x);\n<anon>:4         Some(100 * 2)\n<anon>:5     });\n<anon>:2:22: 5:7 help: see the detailed explanation for E0277\n<anon>:4:9: 4:22 note: the expression at 4:9...\n<anon>:4         Some(100 * 2)\n                 ^~~~~~~~~~~~~\n<anon>:2:32: 3:35 note: ...may have been intended to be part of closure expression at 2:32...\n<anon>:2     let p = Some(45).and_then({|x|\n<anon>:3         println!(\"doubling {}\", x);\n<anon>:3:34: 3:35 note: ...but closure expression ends at 3:34\n<anon>:3         println!(\"doubling {}\", x);\n                                          ^\nerror: aborting due to previous error\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125014595/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125056820",
    "html_url": "https://github.com/rust-lang/rust/issues/27300#issuecomment-125056820",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27300",
    "id": 125056820,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyNTA1NjgyMA==",
    "user": {
      "login": "withoutboats",
      "id": 9063376,
      "node_id": "MDQ6VXNlcjkwNjMzNzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9063376?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/withoutboats",
      "html_url": "https://github.com/withoutboats",
      "followers_url": "https://api.github.com/users/withoutboats/followers",
      "following_url": "https://api.github.com/users/withoutboats/following{/other_user}",
      "gists_url": "https://api.github.com/users/withoutboats/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/withoutboats/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/withoutboats/subscriptions",
      "organizations_url": "https://api.github.com/users/withoutboats/orgs",
      "repos_url": "https://api.github.com/users/withoutboats/repos",
      "events_url": "https://api.github.com/users/withoutboats/events{/privacy}",
      "received_events_url": "https://api.github.com/users/withoutboats/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-27T01:20:40Z",
    "updated_at": "2015-07-27T01:24:11Z",
    "body": "Note that if the unbound variable error hadn't arisen (e.g. because `x` was defined in the outer scope), this code would have not compiled because the block evaluates to `Some(x * 2)`, which does not implement `FnOnce(()) -> Option<U>`. You just almost definitely never want to pass a block to any parameter that expects a function, so there's that.\n\nThere are a couple of different ways rustc could generate a more helpful error message here. If an unbound variable is found in an identifier in the same scope as a previous closure statement that uses that identifier, it could point out that the statement is not inside the closure. If a closure is the first statement of a block and not bound with a `let` statement, it could remind you of Rust's closure syntax. Both of these would be reasonable, and helpful to users confused about closure syntax, though I don't know how easy either of them is.\n\n> Just like we don't issue any special warning on assigning result of assignment to a variable\n\nThis is off-topic, but it would be undoubtedly more helpful if a user wrote e.g. `let x = let y = 0i32` and then attempted to use `x` as an `i32`, the compiler contained a note explaining why `x` was assigned to `()` and not a value of type `i32`. It is fundamentally good for the compiler to help correct confusion about the semantics of the language when that confusion leads to errors.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/125056820/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/360654483",
    "html_url": "https://github.com/rust-lang/rust/issues/27300#issuecomment-360654483",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27300",
    "id": 360654483,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDY1NDQ4Mw==",
    "user": {
      "login": "estebank",
      "id": 1606434,
      "node_id": "MDQ6VXNlcjE2MDY0MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/estebank",
      "html_url": "https://github.com/estebank",
      "followers_url": "https://api.github.com/users/estebank/followers",
      "following_url": "https://api.github.com/users/estebank/following{/other_user}",
      "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/estebank/subscriptions",
      "organizations_url": "https://api.github.com/users/estebank/orgs",
      "repos_url": "https://api.github.com/users/estebank/repos",
      "events_url": "https://api.github.com/users/estebank/events{/privacy}",
      "received_events_url": "https://api.github.com/users/estebank/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-26T01:13:56Z",
    "updated_at": "2018-01-26T01:13:56Z",
    "body": "Given #47763, overly verbose, but educative output actually pointing at the problem:\r\n\r\n```\r\nwarning: a closure's body is not determined by its enclosing block\r\n  --> $DIR/block-enclosed-closure.rs:14:33\r\n   |\r\n14 |     let _p = Some(45).and_then({|x|\r\n   |                                 ^^^ this closure's body is not determined by its enclosing block\r\n   |\r\nnote: this is the closure's block...\r\n  --> $DIR/block-enclosed-closure.rs:14:33\r\n   |\r\n14 |       let _p = Some(45).and_then({|x|\r\n   |  _________________________________^\r\n17 | |         println!(\"hi\");\r\n   | |______________________^\r\nnote: ...while this enclosing block...\r\n  --> $DIR/block-enclosed-closure.rs:14:32\r\n   |\r\n14 |       let _p = Some(45).and_then({|x|\r\n   |  ________________________________^\r\n17 | |         println!(\"hi\");\r\n18 | |         Some(x * 2)\r\n19 | |     });\r\n   | |_____^\r\nnote: ...implicitely returns\r\n  --> $DIR/block-enclosed-closure.rs:18:9\r\n   |\r\n18 |         Some(x * 2)\r\n   |         ^^^^^^^^^^^\r\nhelp: you should open the block *after* the closure's argument list\r\n   |\r\n14 |     let _p = Some(45).and_then(|x| {\r\n   |                                ^^^^^\r\n\r\nerror[E0425]: cannot find value `x` in this scope\r\n  --> $DIR/block-enclosed-closure.rs:18:14\r\n   |\r\n18 |         Some(x * 2)\r\n   |              ^ not found in this scope\r\n\r\nerror[E0277]: the trait bound `std::option::Option<_>: std::ops::FnOnce<({integer},)>` is not satisfied\r\n  --> $DIR/block-enclosed-closure.rs:14:23\r\n   |\r\n14 |     let _p = Some(45).and_then({|x|\r\n   |                       ^^^^^^^^ the trait `std::ops::FnOnce<({integer},)>` is not implemented for `std::option::Option<_>`\r\n\r\nerror: aborting due to 2 previous errors\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/360654483/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3344360589",
    "html_url": "https://github.com/rust-lang/rust/issues/27300#issuecomment-3344360589",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27300",
    "id": 3344360589,
    "node_id": "IC_kwDOAAsO6M7HVuSN",
    "user": {
      "login": "estebank",
      "id": 1606434,
      "node_id": "MDQ6VXNlcjE2MDY0MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/estebank",
      "html_url": "https://github.com/estebank",
      "followers_url": "https://api.github.com/users/estebank/followers",
      "following_url": "https://api.github.com/users/estebank/following{/other_user}",
      "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/estebank/subscriptions",
      "organizations_url": "https://api.github.com/users/estebank/orgs",
      "repos_url": "https://api.github.com/users/estebank/repos",
      "events_url": "https://api.github.com/users/estebank/events{/privacy}",
      "received_events_url": "https://api.github.com/users/estebank/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2025-09-28T22:45:13Z",
    "updated_at": "2025-09-28T22:45:13Z",
    "body": "For the second case where it is a literal, we emit:\n\n```\nerror[E0277]: expected a `FnOnce({integer})` closure, found `Option<{integer}>`\n    --> src/main.rs:2:31\n     |\n   2 |       let p = Some(45).and_then({|x|\n     |  ______________________--------_^\n     | |                      |\n     | |                      required by a bound introduced by this call\n   3 | |         println!(\"doubling {}\", x);\n   4 | |         Some(90)\n     | |         -------- this tail expression is of type `Option<{integer}>`\n   5 | |     });\n     | |_____^ expected an `FnOnce({integer})` closure, found `Option<{integer}>`\n     |\n     = help: the trait `FnOnce({integer})` is not implemented for `Option<{integer}>`\nnote: required by a bound in `Option::<T>::and_then`\n    --> /playground/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/option.rs:1537:12\n     |\n1535 |     pub const fn and_then<U, F>(self, f: F) -> Option<U>\n     |                  -------- required by a bound in this associated function\n1536 |     where\n1537 |         F: [const] FnOnce(T) -> Option<U> + [const] Destruct,\n     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `Option::<T>::and_then`\nhelp: you might have meant to create the closure instead of a block\n     |\n   2 |     let p = Some(45).and_then(|_| {|x|\n     |                               +++\n```\n\nWhere the output is too verbose, but we provide a suggestion.\n\nFor the case where we use the desired argument, we still don't handle it at all:\n\n```\nerror[E0425]: cannot find value `x` in this scope\n --> src/main.rs:4:14\n  |\n4 |         Some(x * 2)\n  |              ^ not found in this scope\n```\n\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3344360589/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
