[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57238466",
    "html_url": "https://github.com/rust-lang/rust/issues/17633#issuecomment-57238466",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17633",
    "id": 57238466,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MjM4NDY2",
    "user": {
      "login": "rust-slacker",
      "id": 8941810,
      "node_id": "MDQ6VXNlcjg5NDE4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8941810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rust-slacker",
      "html_url": "https://github.com/rust-slacker",
      "followers_url": "https://api.github.com/users/rust-slacker/followers",
      "following_url": "https://api.github.com/users/rust-slacker/following{/other_user}",
      "gists_url": "https://api.github.com/users/rust-slacker/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rust-slacker/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rust-slacker/subscriptions",
      "organizations_url": "https://api.github.com/users/rust-slacker/orgs",
      "repos_url": "https://api.github.com/users/rust-slacker/repos",
      "events_url": "https://api.github.com/users/rust-slacker/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rust-slacker/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-29T22:09:43Z",
    "updated_at": "2014-09-29T22:09:43Z",
    "body": "Maybe `vec.truncate` could use `std::intrinsics::needs_drop::<T>()` to decide if the loop is needed?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57238466/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57238949",
    "html_url": "https://github.com/rust-lang/rust/issues/17633#issuecomment-57238949",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17633",
    "id": 57238949,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MjM4OTQ5",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-29T22:13:58Z",
    "updated_at": "2014-09-29T22:13:58Z",
    "body": "It's already optimized out when optimizations are enabled. These loops could use `needs_drop` to improve performance when optimizations are disabled, but I don't think it's very important.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57238949/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57304619",
    "html_url": "https://github.com/rust-lang/rust/issues/17633#issuecomment-57304619",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17633",
    "id": 57304619,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MzA0NjE5",
    "user": {
      "login": "bvssvni",
      "id": 1743862,
      "node_id": "MDQ6VXNlcjE3NDM4NjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1743862?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bvssvni",
      "html_url": "https://github.com/bvssvni",
      "followers_url": "https://api.github.com/users/bvssvni/followers",
      "following_url": "https://api.github.com/users/bvssvni/following{/other_user}",
      "gists_url": "https://api.github.com/users/bvssvni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bvssvni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bvssvni/subscriptions",
      "organizations_url": "https://api.github.com/users/bvssvni/orgs",
      "repos_url": "https://api.github.com/users/bvssvni/repos",
      "events_url": "https://api.github.com/users/bvssvni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bvssvni/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-30T12:18:35Z",
    "updated_at": "2014-09-30T12:18:35Z",
    "body": "`vec.truncate` leads to 70% decreased performance in some cases for game development, where compiling with optimization has negative impact on productivity.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57304619/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57384911",
    "html_url": "https://github.com/rust-lang/rust/issues/17633#issuecomment-57384911",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17633",
    "id": 57384911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3Mzg0OTEx",
    "user": {
      "login": "nightpool",
      "id": 233815,
      "node_id": "MDQ6VXNlcjIzMzgxNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/233815?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nightpool",
      "html_url": "https://github.com/nightpool",
      "followers_url": "https://api.github.com/users/nightpool/followers",
      "following_url": "https://api.github.com/users/nightpool/following{/other_user}",
      "gists_url": "https://api.github.com/users/nightpool/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nightpool/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nightpool/subscriptions",
      "organizations_url": "https://api.github.com/users/nightpool/orgs",
      "repos_url": "https://api.github.com/users/nightpool/repos",
      "events_url": "https://api.github.com/users/nightpool/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nightpool/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-30T21:21:13Z",
    "updated_at": "2014-09-30T21:21:13Z",
    "body": "@bvssvni Even just O1 isn't reasonable for development?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57384911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57453238",
    "html_url": "https://github.com/rust-lang/rust/issues/17633#issuecomment-57453238",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17633",
    "id": 57453238,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDUzMjM4",
    "user": {
      "login": "bvssvni",
      "id": 1743862,
      "node_id": "MDQ6VXNlcjE3NDM4NjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1743862?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bvssvni",
      "html_url": "https://github.com/bvssvni",
      "followers_url": "https://api.github.com/users/bvssvni/followers",
      "following_url": "https://api.github.com/users/bvssvni/following{/other_user}",
      "gists_url": "https://api.github.com/users/bvssvni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bvssvni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bvssvni/subscriptions",
      "organizations_url": "https://api.github.com/users/bvssvni/orgs",
      "repos_url": "https://api.github.com/users/bvssvni/repos",
      "events_url": "https://api.github.com/users/bvssvni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bvssvni/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-01T12:01:43Z",
    "updated_at": "2014-10-01T12:01:43Z",
    "body": "It would be nice if adding a profile to Cargo.toml was not required for a such simple case.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57453238/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57488169",
    "html_url": "https://github.com/rust-lang/rust/issues/17633#issuecomment-57488169",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17633",
    "id": 57488169,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NDg4MTY5",
    "user": {
      "login": "rust-slacker",
      "id": 8941810,
      "node_id": "MDQ6VXNlcjg5NDE4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8941810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rust-slacker",
      "html_url": "https://github.com/rust-slacker",
      "followers_url": "https://api.github.com/users/rust-slacker/followers",
      "following_url": "https://api.github.com/users/rust-slacker/following{/other_user}",
      "gists_url": "https://api.github.com/users/rust-slacker/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rust-slacker/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rust-slacker/subscriptions",
      "organizations_url": "https://api.github.com/users/rust-slacker/orgs",
      "repos_url": "https://api.github.com/users/rust-slacker/repos",
      "events_url": "https://api.github.com/users/rust-slacker/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rust-slacker/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-01T15:55:31Z",
    "updated_at": "2014-10-01T15:55:31Z",
    "body": "Would it make sense to have cargo default to O1?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57488169/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59345704",
    "html_url": "https://github.com/rust-lang/rust/issues/17633#issuecomment-59345704",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17633",
    "id": 59345704,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MzQ1NzA0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-16T11:04:47Z",
    "updated_at": "2014-10-16T11:05:09Z",
    "body": "@rust-slacker: LLVM only fully supports debugging at `-O0`, unlike GCC which supports it at all optimization levels via a lot of work integrating support in passes.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59345704/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60282586",
    "html_url": "https://github.com/rust-lang/rust/issues/17633#issuecomment-60282586",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17633",
    "id": 60282586,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMjgyNTg2",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-23T18:09:48Z",
    "updated_at": "2014-10-23T18:09:48Z",
    "body": "Closing; I don't think we necessarily want to do this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/60282586/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/451707138",
    "html_url": "https://github.com/rust-lang/rust/issues/17633#issuecomment-451707138",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17633",
    "id": 451707138,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTcwNzEzOA==",
    "user": {
      "login": "kmeisthax",
      "id": 108736,
      "node_id": "MDQ6VXNlcjEwODczNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/108736?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kmeisthax",
      "html_url": "https://github.com/kmeisthax",
      "followers_url": "https://api.github.com/users/kmeisthax/followers",
      "following_url": "https://api.github.com/users/kmeisthax/following{/other_user}",
      "gists_url": "https://api.github.com/users/kmeisthax/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kmeisthax/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kmeisthax/subscriptions",
      "organizations_url": "https://api.github.com/users/kmeisthax/orgs",
      "repos_url": "https://api.github.com/users/kmeisthax/repos",
      "events_url": "https://api.github.com/users/kmeisthax/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kmeisthax/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-01-06T01:27:13Z",
    "updated_at": "2019-01-06T01:27:13Z",
    "body": "Fun fact: I may or may not have spent a few hours banging my head against performance issues that ultimately were resolved by replacing a truncate with a set_len. (See [this commit](https://github.com/kmeisthax/rapidtar/commit/92f4af2260b2a562d43cadf8db0227b4e340385b))\r\n\r\nYeah, I know the optimizer is supposed to handle it, and in a perfect world that would be it, but...\r\n\r\n- The procedure for enabling the optimizer is non-obvious to programmers learning Rust and constitutes a DX hazard. It's technically mentioned [in the book](https://doc.rust-lang.org/book/ch01-03-hello-cargo.html?highlight=optimize#building-for-release) but as an option that can be easily skimmed over, not a critical part of Rust's performance strategy.\r\n- As mentioned elsewhere, LLVM doesn't support debugging optimized code. If you cannot debug optimized code, then the optimizer is not useful for developers!\r\n- You're moving the mental overhead of the check from core Rust to user code (like I had to do, replacing a truncate call with a set_len call).\r\n  - Worse, someone might actually fork Vec and publish it on crates.io. Minor dependency proliferation isn't a good thing - [do we want to become npm](https://www.theregister.co.uk/2016/03/23/npm_left_pad_chaos/)?\r\n- The whole damned point of Rust is low-overhead, memory-safe native code. Objecting to removing overhead for the sake of \"the optimizer will take care of it\" is extremely un-Rust-like.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/451707138/reactions",
      "total_count": 26,
      "+1": 26,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
