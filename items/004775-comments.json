[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17288424",
    "html_url": "https://github.com/rust-lang/rust/issues/4775#issuecomment-17288424",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4775",
    "id": 17288424,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3Mjg4NDI0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-01T15:52:17Z",
    "updated_at": "2013-05-01T15:52:17Z",
    "body": "I tried to update this to current syntax to make sure it still does fail, but I wasn't even able to get this to compile. The closest I could get was:\n\n``` rust\nfn echo<T>(x:T) { io::println(fmt!(\"%?\", x)); }\n\npub trait OpInt {\n    fn call(&self, int, int) -> int;\n}\n\nimpl<'self> OpInt for &'self fn(int,int) -> int {\n    fn call(&self, a:int, b:int) -> int {\n        echo(\"I dont wanna die!\");\n        (*self)(a,b)\n    }\n}\n\nfn squarei(x:int, op:&OpInt) -> int { op.call(x, x) }\n\nfn muli(x:int, y:int) -> int {\n    echo(\"You will never get here.\");\n    x * y\n}\n\n\nfn main() {\n    echo(\"Entered main\");\n    let f: &fn(int, int) -> int = |x, y| muli(x, y);\n    let r = squarei(3, &f as &OpInt);\n    echo(r);\n}\n```\n\nwhich yielded the error:\n\n```\n./foo.rs:25:24: 25:25 error: illegal borrow: borrowed value does not live long enough\n./foo.rs:25     let r = squarei(3, &f as &OpInt);\n                                    ^\nnote: borrowed pointer must be valid for the static lifetime...\n./foo.rs:22:10: 27:1 note: ...but borrowed value is only valid for the block at 22:10\n./foo.rs:22 fn main() {\n./foo.rs:23     echo(\"Entered main\");\n./foo.rs:24     let f: &fn(int, int) -> int = |x, y| muli(x, y);\n./foo.rs:25     let r = squarei(3, &f as &OpInt);\n./foo.rs:26     echo(r);\n./foo.rs:27 }\nerror: aborting due to previous error\n```\n\nThere's probably a few things here. I've heard that the trait system isn't quite up to par of what it could be, and this may be both in terms of this being able to compile and for at runtime as well. Perhaps this should be blocked on #5527?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17288424/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17303158",
    "html_url": "https://github.com/rust-lang/rust/issues/4775#issuecomment-17303158",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/4775",
    "id": 17303158,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MzAzMTU4",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-01T20:04:55Z",
    "updated_at": "2013-05-01T20:04:55Z",
    "body": "Lets close this; this code was when I was experimenting with the language and does not represent any particular use case.  It's entirely possible that whatever hole was there (that the segfault is exploiting) has since been filled/fixed by changes to the type+borrow checkers.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17303158/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
