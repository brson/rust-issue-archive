[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16837578",
    "html_url": "https://github.com/rust-lang/rust/pull/6010#issuecomment-16837578",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6010",
    "id": 16837578,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2ODM3NTc4",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-04-23T03:38:25Z",
    "updated_at": "2013-04-23T03:38:25Z",
    "body": "Nice fixes. Thanks.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16837578/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16883801",
    "html_url": "https://github.com/rust-lang/rust/pull/6010#issuecomment-16883801",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6010",
    "id": 16883801,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2ODgzODAx",
    "user": {
      "login": "Dretch",
      "id": 1428731,
      "node_id": "MDQ6VXNlcjE0Mjg3MzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1428731?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Dretch",
      "html_url": "https://github.com/Dretch",
      "followers_url": "https://api.github.com/users/Dretch/followers",
      "following_url": "https://api.github.com/users/Dretch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Dretch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Dretch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Dretch/subscriptions",
      "organizations_url": "https://api.github.com/users/Dretch/orgs",
      "repos_url": "https://api.github.com/users/Dretch/repos",
      "events_url": "https://api.github.com/users/Dretch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Dretch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-04-23T20:21:17Z",
    "updated_at": "2013-04-23T20:21:17Z",
    "body": "@graydon \n\n>  Might consider moving the sole waitpid (I agree duplication is bad!) back to os, as it's not running-program-specific\n\nI think the waitpid function might actually make more sense if it was a method on `core::run::Program`.\n\nOn unix a process can only wait on its children, and allowing calls to waitpid without going through Program could lead to race conditions because after calling waitpid the pid can be re-used which means that the Program finish method (or the Program destructor...) might actually wait on a different process.\n\nOn windows a process can wait (i.e. WaitForSingleObject) on the children of other processes, but I guess it would be OK to _not_ present an API for doing this via `core::run`, because you can't do it on unix.\n\nIt is probably also worth mentioning that the ProgRepr destructor does a waitpid to wait for the process to exit, unless the process has already been waited on. I think this might be a bit unexpected, so maybe the documentation for `core::run` should make it more obvious. It might also be possible to avoid waiting for the process to exit in the destructor, but it looks like that could involve (on unix) signal handlers and/or global mutable state to avoid race conditions and/or zombie processes.\n\n> Might consider changing the structure return to an out-pointer, as our FFI sometimes has trouble with structure returns. Lame excuse but possibly a risk at this point.\n> Might consider rewriting run_program.cpp in rust, period. I think the unsafe dialect is strong enough to handle it now. It wasn't when run_program was written.\n\nI agree that sounds sensible and I shall consider attempting follow-ups.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16883801/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16884068",
    "html_url": "https://github.com/rust-lang/rust/pull/6010#issuecomment-16884068",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6010",
    "id": 16884068,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2ODg0MDY4",
    "user": {
      "login": "Dretch",
      "id": 1428731,
      "node_id": "MDQ6VXNlcjE0Mjg3MzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1428731?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Dretch",
      "html_url": "https://github.com/Dretch",
      "followers_url": "https://api.github.com/users/Dretch/followers",
      "following_url": "https://api.github.com/users/Dretch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Dretch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Dretch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Dretch/subscriptions",
      "organizations_url": "https://api.github.com/users/Dretch/orgs",
      "repos_url": "https://api.github.com/users/Dretch/repos",
      "events_url": "https://api.github.com/users/Dretch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Dretch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-04-23T20:26:20Z",
    "updated_at": "2013-04-23T20:26:20Z",
    "body": "I rebased because BORS told me to ;)\n\nr?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/16884068/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
