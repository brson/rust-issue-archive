{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/17533",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/17533/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/17533/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/17533/events",
  "html_url": "https://github.com/rust-lang/rust/pull/17533",
  "id": 43913609,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MjE3NzkyNTA=",
  "number": 17533,
  "title": "debuginfo: Make sure that all calls to drop glue are associated with debug locations.",
  "user": {
    "login": "michaelwoerister",
    "id": 1825894,
    "node_id": "MDQ6VXNlcjE4MjU4OTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelwoerister",
    "html_url": "https://github.com/michaelwoerister",
    "followers_url": "https://api.github.com/users/michaelwoerister/followers",
    "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelwoerister/orgs",
    "repos_url": "https://api.github.com/users/michaelwoerister/repos",
    "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelwoerister/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 1,
  "created_at": "2014-09-25T12:31:31Z",
  "updated_at": "2014-09-29T03:58:19Z",
  "closed_at": "2014-09-29T03:58:11Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/17533",
    "html_url": "https://github.com/rust-lang/rust/pull/17533",
    "diff_url": "https://github.com/rust-lang/rust/pull/17533.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/17533.patch",
    "merged_at": "2014-09-29T03:58:19Z"
  },
  "body": "This PR makes rustc emit debug locations for _all_ call and invoke statements in LLVM IR, if they are contained within a function that debuginfo is enabled for. This is important because LLVM does not handle the case where a function body containing debuginfo is inlined into another function with debuginfo, but the inlined call statement does not have a debug location. In this case, LLVM will not know where (in terms of source code coordinates) the function was inlined to and we end up with some statements still linked to the source locations in there original, non-inlined function without any indication that they are indeed an inline-copy. Later, when generating DWARF from the IR, LLVM will interpret this as corrupt IR and abort.\n\nUnfortunately, the undesirable case described above can still occur when using LTO. If there is a crate compiled without debuginfo calling into a crate compiled with debuginfo, we again end up with the conditions triggering the error. This is why some LTO tests still fail with the dreaded assertion, if the standard library was built with debuginfo enabled. That is, `RUSTFLAGS_STAGE2=-g make rustc-stage2` will succeed but `RUSTFLAGS_STAGE2=-g make check` will still fail after this PR has been merged. I will open a separate issue for this problem.\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/17533/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/17533/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
