{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/14264",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/14264/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/14264/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/14264/events",
  "html_url": "https://github.com/rust-lang/rust/pull/14264",
  "id": 33739043,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTYwMjM1NzQ=",
  "number": 14264,
  "title": "More efficient Vec::reserve strategy",
  "user": {
    "login": "stepancheg",
    "id": 28969,
    "node_id": "MDQ6VXNlcjI4OTY5",
    "avatar_url": "https://avatars.githubusercontent.com/u/28969?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stepancheg",
    "html_url": "https://github.com/stepancheg",
    "followers_url": "https://api.github.com/users/stepancheg/followers",
    "following_url": "https://api.github.com/users/stepancheg/following{/other_user}",
    "gists_url": "https://api.github.com/users/stepancheg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stepancheg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stepancheg/subscriptions",
    "organizations_url": "https://api.github.com/users/stepancheg/orgs",
    "repos_url": "https://api.github.com/users/stepancheg/repos",
    "events_url": "https://api.github.com/users/stepancheg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stepancheg/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 5,
  "created_at": "2014-05-17T20:23:27Z",
  "updated_at": "2014-06-20T01:25:40Z",
  "closed_at": "2014-05-18T03:29:35Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/14264",
    "html_url": "https://github.com/rust-lang/rust/pull/14264",
    "diff_url": "https://github.com/rust-lang/rust/pull/14264.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/14264.patch",
    "merged_at": null
  },
  "body": "Before this commit new capacity was always chosen as the next power of\ntwo for requested capacity.\n\nIt is inefficient in scenarios where several elements are pushed to the\nvector at once, and it is final operations. Example:\n\n```\nlet v = Vec::new();\nv.grow(10, false);\n// do something with vector\n```\n\nWith patch applied, new capacity is chosen as max of current capacity\ndoubled and requested capacity.\n\nBefore this patch resulting capacity of the vector from the example\nabove is 16. With patch applied, capacity is 10.\n\nSimilar strategy is used, for instance, to reserve capacity of a vector in\nlibc++ (1) (`vector::__recommend()`) or to reserve capacity of ArrayList\nin OpenJDK (2) (`ArrayList.grow()`).\n\nPatch also includes minor adjustment that does not affect reallocations:\ncapacity is compared to `self.cap`, not to `self.len` in `reserve()`.\n\n(1) http://llvm.org/viewvc/llvm-project/libcxx/trunk/include/vector?view=markup\n(2) http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/ArrayList.java\n",
  "closed_by": {
    "login": "stepancheg",
    "id": 28969,
    "node_id": "MDQ6VXNlcjI4OTY5",
    "avatar_url": "https://avatars.githubusercontent.com/u/28969?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stepancheg",
    "html_url": "https://github.com/stepancheg",
    "followers_url": "https://api.github.com/users/stepancheg/followers",
    "following_url": "https://api.github.com/users/stepancheg/following{/other_user}",
    "gists_url": "https://api.github.com/users/stepancheg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stepancheg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stepancheg/subscriptions",
    "organizations_url": "https://api.github.com/users/stepancheg/orgs",
    "repos_url": "https://api.github.com/users/stepancheg/repos",
    "events_url": "https://api.github.com/users/stepancheg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stepancheg/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/14264/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/14264/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
