[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31331634",
    "html_url": "https://github.com/rust-lang/rust/issues/11196#issuecomment-31331634",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11196",
    "id": 31331634,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzMxNjM0",
    "user": {
      "login": "lifthrasiir",
      "id": 323836,
      "node_id": "MDQ6VXNlcjMyMzgzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/323836?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lifthrasiir",
      "html_url": "https://github.com/lifthrasiir",
      "followers_url": "https://api.github.com/users/lifthrasiir/followers",
      "following_url": "https://api.github.com/users/lifthrasiir/following{/other_user}",
      "gists_url": "https://api.github.com/users/lifthrasiir/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lifthrasiir/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lifthrasiir/subscriptions",
      "organizations_url": "https://api.github.com/users/lifthrasiir/orgs",
      "repos_url": "https://api.github.com/users/lifthrasiir/repos",
      "events_url": "https://api.github.com/users/lifthrasiir/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lifthrasiir/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-30T02:54:04Z",
    "updated_at": "2013-12-30T02:54:35Z",
    "body": "Besides from the obvious ABI compatibility issue, this proposal severely limits the user's ability to selectively disable monomorphization. For example, if a function `fn f<T: Trait>(x: &T)` is big enough and used with multiple different `T`s, the user should be able to \"refactor\" this into `fn f(x: &Trait)` at expense of virtual method call overheads, in order to get a smaller binary.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31331634/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31336981",
    "html_url": "https://github.com/rust-lang/rust/issues/11196#issuecomment-31336981",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11196",
    "id": 31336981,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzM2OTgx",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-30T08:26:25Z",
    "updated_at": "2013-12-30T08:26:25Z",
    "body": "The proposal is by no means set in stone, but here's a quick way of disabling monomorphization:\n\n``` rust\nfn f_virtual<T: Trait>(x: &T) {\n    f(x as &Trait)\n}\n// Maybe this attribute could disable monomorphization by itself?\n// Or we could have another attribute, like #[virtual_trait_args].\n#[inline(never)]\nfn f(x: &Trait) {...}\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31336981/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31354060",
    "html_url": "https://github.com/rust-lang/rust/issues/11196#issuecomment-31354060",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11196",
    "id": 31354060,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzU0MDYw",
    "user": {
      "login": "SiegeLord",
      "id": 480550,
      "node_id": "MDQ6VXNlcjQ4MDU1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/480550?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SiegeLord",
      "html_url": "https://github.com/SiegeLord",
      "followers_url": "https://api.github.com/users/SiegeLord/followers",
      "following_url": "https://api.github.com/users/SiegeLord/following{/other_user}",
      "gists_url": "https://api.github.com/users/SiegeLord/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SiegeLord/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SiegeLord/subscriptions",
      "organizations_url": "https://api.github.com/users/SiegeLord/orgs",
      "repos_url": "https://api.github.com/users/SiegeLord/repos",
      "events_url": "https://api.github.com/users/SiegeLord/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SiegeLord/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-30T16:34:10Z",
    "updated_at": "2013-12-30T16:34:10Z",
    "body": "I'd rather have a general solution that interacts well with the rest of the language rather than a special case one (note how T, U, V remain where they are!) that doesn't. I'd look at what other languages with traits/concepts/etc do and see if it's any better. E.g. in D it is also more syntactically light to use dynamic dispatch, and yet most use static dispatch anyway. Here is what a complicated function signature with type constraints looks like in D:\n\n``` d\nvoid fill(Range1, Range2)(Range1 range, Range2 filler)\n    if (isInputRange!Range1\n        && (isForwardRange!Range2\n            || (isInputRange!Range2 && isInfinite!Range2))\n        && is(typeof(Range1.init.front = Range2.init.front)))\n{\n\n}\n```\n\nI.e. the type constraints (the code that starts after the `if`) go after the function name/arguments. C++ also has types and type bounds separate. Maybe that's a palatable solution? We even reserve the `where` keyword which could be used for the purpose:\n\n``` rust\nfn map2fn<T, U, V, F1, F2>(x: T, f1: F1, f2: F2) -> V\n    where<F1: Fn<U, V>, F2: Fn<U, V>>\n{\n    f2(f1(x))\n}\n\n// OR\n\nfn map2fn(x: T, f1: F1, f2: F2) -> V\n    where<T, U, V, F1: Fn<U, V>, F2: Fn<U, V>>\n{\n    f2(f1(x))\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31354060/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31369262",
    "html_url": "https://github.com/rust-lang/rust/issues/11196#issuecomment-31369262",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11196",
    "id": 31369262,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzY5MjYy",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-30T21:16:08Z",
    "updated_at": "2013-12-30T21:16:08Z",
    "body": "@eddyb, re virtualisation, I believe @lifthrasiir is just pointing out that the proposed syntax only works for traits not contained in any pointers, specifically (and most importantly), you can't write `fn foo<T: Trait>(x: &T)` in short hand as `fn foo(x: &Trait)` without some other disambiguation.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/31369262/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32243505",
    "html_url": "https://github.com/rust-lang/rust/issues/11196#issuecomment-32243505",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11196",
    "id": 32243505,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjQzNTA1",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-14T07:20:08Z",
    "updated_at": "2014-01-14T07:20:08Z",
    "body": "Even without the speculation about `&Trait` being optimized to `<T: Trait> &T`, this should still work for the non-reference version, if only to keep the same closure type syntax in some cases, if `|..Args| -> Ret` becomes sugar for `Fn<..Args, Ret>`.\nIs there any issue with passing a closure unboxed instead of boxed? The closure's body wouldn't actually be copied, since we already pass larger-than-register-sized objects by reference.\nAnd I've just remembered about the awkward lifetime syntax - `'a |..Args| -> Ret` - with sugar that becomes `&'a |..Args| -> Ret`, which is just a `&'a Trait`.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32243505/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45032590",
    "html_url": "https://github.com/rust-lang/rust/issues/11196#issuecomment-45032590",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11196",
    "id": 45032590,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDMyNTkw",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-03T23:16:26Z",
    "updated_at": "2014-06-03T23:16:26Z",
    "body": "I've now written an RFC that includes something like this proposal: https://github.com/rust-lang/rfcs/pull/105\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45032590/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56625080",
    "html_url": "https://github.com/rust-lang/rust/issues/11196#issuecomment-56625080",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11196",
    "id": 56625080,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NjI1MDgw",
    "user": {
      "login": "rust-highfive",
      "id": 7378925,
      "node_id": "MDQ6VXNlcjczNzg5MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7378925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rust-highfive",
      "html_url": "https://github.com/rust-highfive",
      "followers_url": "https://api.github.com/users/rust-highfive/followers",
      "following_url": "https://api.github.com/users/rust-highfive/following{/other_user}",
      "gists_url": "https://api.github.com/users/rust-highfive/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rust-highfive/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rust-highfive/subscriptions",
      "organizations_url": "https://api.github.com/users/rust-highfive/orgs",
      "repos_url": "https://api.github.com/users/rust-highfive/repos",
      "events_url": "https://api.github.com/users/rust-highfive/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rust-highfive/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-24T05:00:06Z",
    "updated_at": "2014-09-24T05:00:06Z",
    "body": "This issue has been moved to the RFCs repo: rust-lang/rfcs#302\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/56625080/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
