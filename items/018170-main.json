{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/18170",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/18170/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/18170/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/18170/events",
  "html_url": "https://github.com/rust-lang/rust/pull/18170",
  "id": 46221746,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MjI5ODc3ODE=",
  "number": 18170,
  "title": "Remove use of Option<T> inside of RingBuf",
  "user": {
    "login": "ghost",
    "id": 10137,
    "node_id": "MDQ6VXNlcjEwMTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ghost",
    "html_url": "https://github.com/ghost",
    "followers_url": "https://api.github.com/users/ghost/followers",
    "following_url": "https://api.github.com/users/ghost/following{/other_user}",
    "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
    "organizations_url": "https://api.github.com/users/ghost/orgs",
    "repos_url": "https://api.github.com/users/ghost/repos",
    "events_url": "https://api.github.com/users/ghost/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ghost/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 21,
  "created_at": "2014-10-19T23:44:01Z",
  "updated_at": "2014-11-08T19:32:53Z",
  "closed_at": "2014-10-31T04:53:36Z",
  "author_association": "NONE",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/18170",
    "html_url": "https://github.com/rust-lang/rust/pull/18170",
    "diff_url": "https://github.com/rust-lang/rust/pull/18170.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/18170.patch",
    "merged_at": null
  },
  "body": "Fix for task in Metabug #18009\n\nThis changes much of about how RingBuf functions. `lo`, `nelts` are replaced by a more traditional `head` and`tail`. The `Vec<Option<T>>` is replaced by a bare pointer that is managed by the `RingBuf` itself. This also expects the ring buffer to always be size that is a power of 2.\n\nThis change also includes a number of new tests to cover the some areas that could be of concern with manual memory management.\n\nThe benchmarks have been reworked since the old ones were benchmarking of the Ring buffers growth rather then the actual test.\n## Benchmark\n\n**Before:**\n\n```\ntest ringbuf::tests::bench_grow_1025                       ... bench:      9200 ns/iter (+/- 100)\ntest ringbuf::tests::bench_iter_1000                       ... bench:      1341 ns/iter (+/- 34)\ntest ringbuf::tests::bench_mut_iter_1000                   ... bench:      2250 ns/iter (+/- 44)\ntest ringbuf::tests::bench_new                             ... bench:        22 ns/iter (+/- 0)\ntest ringbuf::tests::bench_pop_100                         ... bench:       351 ns/iter (+/- 3)\ntest ringbuf::tests::bench_pop_front_100                   ... bench:      1169 ns/iter (+/- 61)\ntest ringbuf::tests::bench_push_back_100                   ... bench:       244 ns/iter (+/- 3)\ntest ringbuf::tests::bench_push_front_100                  ... bench:       246 ns/iter (+/- 5)\n```\n\n**After:**\n\n```\ntest ringbuf::tests::bench_grow_1025                       ... bench:      4278 ns/iter (+/- 38)\ntest ringbuf::tests::bench_iter_1000                       ... bench:      1074 ns/iter (+/- 15)\ntest ringbuf::tests::bench_mut_iter_1000                   ... bench:      1074 ns/iter (+/- 7)\ntest ringbuf::tests::bench_new                             ... bench:        19 ns/iter (+/- 0)\ntest ringbuf::tests::bench_pop_100                         ... bench:       145 ns/iter (+/- 2)\ntest ringbuf::tests::bench_pop_front_100                   ... bench:       229 ns/iter (+/- 1)\ntest ringbuf::tests::bench_push_back_100                   ... bench:       178 ns/iter (+/- 0)\ntest ringbuf::tests::bench_push_front_100                  ... bench:       171 ns/iter (+/- 0)\n```\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/18170/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/18170/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
