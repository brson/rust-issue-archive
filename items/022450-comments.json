[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74711610",
    "html_url": "https://github.com/rust-lang/rust/issues/22450#issuecomment-74711610",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22450",
    "id": 74711610,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzExNjEw",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-17T17:33:09Z",
    "updated_at": "2015-02-17T17:33:09Z",
    "body": "(If you are wondering why it is so important to be able to recompile the source generated by `--pretty=expanded`, the easy answer is: It is what we do in our own `pretty` test suite (where we make sure that the output parses and typechecks, but do not run it through trans.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74711610/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74711742",
    "html_url": "https://github.com/rust-lang/rust/issues/22450#issuecomment-74711742",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22450",
    "id": 74711742,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzExNzQy",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-17T17:33:49Z",
    "updated_at": "2015-02-17T17:33:49Z",
    "body": "(oh, and in case its not clear: the workaround presented by `add1_paren_block` above is actually not a satisfactory workaround at all, because of #22451.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74711742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/84389792",
    "html_url": "https://github.com/rust-lang/rust/issues/22450#issuecomment-84389792",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22450",
    "id": 84389792,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0Mzg5Nzky",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-21T16:59:49Z",
    "updated_at": "2015-03-21T16:59:49Z",
    "body": "see also #20937\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/84389792/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/224056376",
    "html_url": "https://github.com/rust-lang/rust/issues/22450#issuecomment-224056376",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22450",
    "id": 224056376,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNDA1NjM3Ng==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-06T19:06:04Z",
    "updated_at": "2016-06-06T19:06:04Z",
    "body": "Triage: no change\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/224056376/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/298269340",
    "html_url": "https://github.com/rust-lang/rust/issues/22450#issuecomment-298269340",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22450",
    "id": 298269340,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODI2OTM0MA==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-01T01:01:10Z",
    "updated_at": "2017-05-01T01:01:10Z",
    "body": "Note: the specific issue here is related to https://github.com/rust-lang/rust/issues/17930, since that suggests that `} as u64` should be allowed.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/298269340/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424083563",
    "html_url": "https://github.com/rust-lang/rust/issues/22450#issuecomment-424083563",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22450",
    "id": 424083563,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDA4MzU2Mw==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-09-24T18:48:40Z",
    "updated_at": "2018-09-24T18:48:40Z",
    "body": "Triage: no change\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424083563/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1870814708",
    "html_url": "https://github.com/rust-lang/rust/issues/22450#issuecomment-1870814708",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22450",
    "id": 1870814708,
    "node_id": "IC_kwDOAAsO6M5vgl30",
    "user": {
      "login": "dtolnay",
      "id": 1940490,
      "node_id": "MDQ6VXNlcjE5NDA0OTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dtolnay",
      "html_url": "https://github.com/dtolnay",
      "followers_url": "https://api.github.com/users/dtolnay/followers",
      "following_url": "https://api.github.com/users/dtolnay/following{/other_user}",
      "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions",
      "organizations_url": "https://api.github.com/users/dtolnay/orgs",
      "repos_url": "https://api.github.com/users/dtolnay/repos",
      "events_url": "https://api.github.com/users/dtolnay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dtolnay/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-28T04:36:32Z",
    "updated_at": "2023-12-28T04:36:32Z",
    "body": "Fixed by #119105. Output of `rustc --edition=2021 -Zunpretty=expanded main.rs`:\r\n\r\n**Before:** invalid syntax.\r\n\r\n```rust\r\n#![feature(prelude_import)]\r\n#![allow(unused_parens)]\r\n#[prelude_import]\r\nuse std::prelude::rust_2021::*;\r\n#[macro_use]\r\nextern crate std;\r\n\r\nmacro_rules! add1_block { ($e:expr) => { { let val = 1; $e + val } } }\r\n\r\nmacro_rules! add1_paren_block { ($e:expr) => { ({ let val = 1; $e + val }) } }\r\n\r\nfn main() {\r\n    let w = { let val = 1; 2 + val };\r\n    let x = { { let val = 1; 3 + val } as u64 };\r\n    let y = ({ let val = 1; 4 + val });\r\n    let z = { ({ let val = 1; 5 + val }) as u64 };\r\n\r\n    {\r\n        ::std::io::_print(format_args!(\"w: {0} x: {1} y: {2} z: {3}\\n\", w, x,\r\n                y, z));\r\n    };\r\n}\r\n```\r\n\r\n```console\r\nerror: expected expression, found `as`\r\n   |\r\n14 |     let x = { { let val = 1; 3 + val } as u64 };\r\n   |                                        ^^ expected expression\r\n   |\r\nhelp: parentheses are required to parse this as an expression\r\n   |\r\n14 |     let x = { ({ let val = 1; 3 + val }) as u64 };\r\n   |               +                        +\r\n```\r\n\r\n**After:** valid.\r\n\r\n```rust\r\n#![feature(prelude_import)]\r\n#![allow(unused_parens)]\r\n#[prelude_import]\r\nuse std::prelude::rust_2021::*;\r\n#[macro_use]\r\nextern crate std;\r\n\r\nmacro_rules! add1_block { ($e:expr) => { { let val = 1; $e + val } } }\r\n\r\nmacro_rules! add1_paren_block { ($e:expr) => { ({ let val = 1; $e + val }) } }\r\n\r\nfn main() {\r\n    let w = { let val = 1; 2 + val };\r\n    let x = { ({ let val = 1; 3 + val }) as u64 };\r\n    let y = ({ let val = 1; 4 + val });\r\n    let z = { ({ let val = 1; 5 + val }) as u64 };\r\n\r\n    {\r\n        ::std::io::_print(format_args!(\"w: {0} x: {1} y: {2} z: {3}\\n\", w, x,\r\n                y, z));\r\n    };\r\n}\r\n```",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1870814708/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
