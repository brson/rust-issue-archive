{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/14271",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/14271/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/14271/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/14271/events",
  "html_url": "https://github.com/rust-lang/rust/pull/14271",
  "id": 33744140,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTYwMjU4NTE=",
  "number": 14271,
  "title": "Add an `Iterator::batch` transformer and explicit size hints for `FromIterator` and `Extend`",
  "user": {
    "login": "erickt",
    "id": 84711,
    "node_id": "MDQ6VXNlcjg0NzEx",
    "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/erickt",
    "html_url": "https://github.com/erickt",
    "followers_url": "https://api.github.com/users/erickt/followers",
    "following_url": "https://api.github.com/users/erickt/following{/other_user}",
    "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/erickt/subscriptions",
    "organizations_url": "https://api.github.com/users/erickt/orgs",
    "repos_url": "https://api.github.com/users/erickt/repos",
    "events_url": "https://api.github.com/users/erickt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/erickt/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 8,
  "created_at": "2014-05-18T02:48:36Z",
  "updated_at": "2014-06-12T17:33:50Z",
  "closed_at": "2014-06-12T17:33:50Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/14271",
    "html_url": "https://github.com/rust-lang/rust/pull/14271",
    "diff_url": "https://github.com/rust-lang/rust/pull/14271.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/14271.patch",
    "merged_at": null
  },
  "body": "This pull request is focused on adding a `Iterator::batch` transformer. `batch` allows you to batch up multiple values from a stream into one value. For example, this can be used for transforming a stream of a monotonically increasing infinite iterator like `count(0, 1)` into a stream of `vec!(0, 1, 2)`, `vec!(3, 4, 5)`, and etc. It can also be seen as a low level transformer primitive that could be used to implement a variety of iterator transformers, as you could use it to implement `map`, `filter`, `reduce`, and more.\n\nAlong the way this also adds support for passing an explicit size hints to `.collect()`, `.from_iter()` and `.extend()` in the form of `.collect_with_capacity()`, `.from_iter_with_capacity()` and `.extend_with_capacity()`. Iterator size hints and `.collect()` calls are generally conservative in the size of collections they preallocate. For example, a filter call like `let xs: Vec<int> = range(1, 5).filter(|x| x != 3).collect()` would initially allocate a zero-sized `Vec<T>` because the `.filter()` gives a lower bound of `0`, and `collect` always uses the lower bounds. There is no way for the user to inform `.collect()` to preallocate space for 4 items. Similarly, there isn't a way to overallocate a collection with `.collect()`. These new methods allow the user to have better control over the memory allocation while still using generic methods.\n\nI have to admit though, I'm not sure if it's better to create methods like `.collect_with_capacity()`, or if we should rename `.size_hint()` to `.size_bounds()`, provide a new `Iterator.size_hint()` that may be outside the bounds of the values, and a `.sized_by()` transformer that lets a user to provide a different hint than the lower bounds.\n\nFinally, it also adds some `.reserve_additional` methods on some collections, and cleans up some dead code.\n",
  "closed_by": {
    "login": "alexcrichton",
    "id": 64996,
    "node_id": "MDQ6VXNlcjY0OTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexcrichton",
    "html_url": "https://github.com/alexcrichton",
    "followers_url": "https://api.github.com/users/alexcrichton/followers",
    "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
    "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
    "repos_url": "https://api.github.com/users/alexcrichton/repos",
    "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/14271/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/14271/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
