[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63917183",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-63917183",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 63917183,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzOTE3MTgz",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-21T02:48:33Z",
    "updated_at": "2014-11-21T02:48:33Z",
    "body": "cc @cmr \ncc https://github.com/rust-lang/rust/pull/19116\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63917183/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63917189",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-63917189",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 63917189,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzOTE3MTg5",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-21T02:48:38Z",
    "updated_at": "2014-11-21T02:48:38Z",
    "body": "r? @alexcrichton \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63917189/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63919845",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-63919845",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 63919845,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzOTE5ODQ1",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-21T03:30:43Z",
    "updated_at": "2014-11-21T03:30:43Z",
    "body": "cc @xales\n\nLooks good to me!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63919845/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63937165",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-63937165",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 63937165,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzOTM3MTY1",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-21T08:02:54Z",
    "updated_at": "2014-11-21T08:02:54Z",
    "body": "cc @carllerche\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63937165/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63938444",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-63938444",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 63938444,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzOTM4NDQ0",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-21T08:17:30Z",
    "updated_at": "2014-11-21T08:24:25Z",
    "body": "Great!\n\nAs discuss in #15643, it would be interesting to expose a less raw object like `FileDesc` instead of directly exposing `fd_t`-like. This way, it's possible to use a more safe and abstract `FileDesc` wrapper to control some resources (e.g. keep the automatic file descriptor closing feature).\n\nAdditionally, a safer `FileDesc` could have this properties:\n- a safe read-only object with this available functions: `fstat`, `fd`, `handle`, `tell`\n- a writable object with this available functions: `read`, `write`, `seek`, `dataseek`, `fsync`, `truncate`\n- unsafe functions: `new`, `unwrap`\n- add a safe `Clone` trait using `dup`-like (e.g. `libc::fcntl(self.fd, libc::F_DUPFD_CLOEXEC)`)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63938444/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63938704",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-63938704",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 63938704,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzOTM4NzA0",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-21T08:20:41Z",
    "updated_at": "2014-11-21T08:20:41Z",
    "body": "@l0kod Definitely! I'm quite excited about these abstractions developing over time.\n\nThat said, I wanted to start conservatively by exposing the raw object and letting the community experiment with abstractions in external crates like the ones you describe, before we commit to anything in `libstd`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63938704/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63938920",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-63938920",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 63938920,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzOTM4OTIw",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-21T08:23:33Z",
    "updated_at": "2014-11-21T08:23:33Z",
    "body": "`FileDesc`-like interface will also discourage the direct/only use of lifetime-less (and inherently unsafe) `fd_t` for FFI wrappers.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63938920/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64006304",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64006304",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64006304,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDA2MzA0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-21T17:26:20Z",
    "updated_at": "2014-11-21T17:26:20Z",
    "body": "This is an interesting design with respect to an extension-trait-per-object rather than an extension trait per piece of functionality, but I agree that `use std::os::unix::prelude::*` is pretty reasonable for getting around any ergonomic concern, and this improves discoverability as you know exactly what trait to look at to see what fancy methods are available.\n\nOver time I think we'll need to figure out how to deal with the rustdoc problem to show windows extension traits as well as unix ones, but we can deal with that later. Overall I like the direction this is going in for providing platform-specific functionality.\n\ncc @brson, I'm curious as to your opinion with this organization as well.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64006304/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64008761",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64008761",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64008761,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDA4NzYx",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-21T17:43:38Z",
    "updated_at": "2014-11-21T17:43:38Z",
    "body": "@alexcrichton \n\n> This is an interesting design with respect to an extension-trait-per-object rather than an extension trait per piece of functionality\n\nSo, my original thought there was that these extension traits would diverge over time, and I think in the long run we probably will want type-specific extensions like this.\n\nThat said, thinking more about the functionality being proposed here, there's actually a good use case for exposing this via more generic traits, so that the `os::unix` etc. API can eventually work generically over them. I will revise.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64008761/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64010468",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64010468",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64010468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDEwNDY4",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-21T17:55:40Z",
    "updated_at": "2014-11-21T17:55:40Z",
    "body": "Updated with improved design.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64010468/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64079274",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64079274",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64079274,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDc5Mjc0",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T12:51:39Z",
    "updated_at": "2014-11-22T12:51:39Z",
    "body": "I like this design as well, but I hope we will regain the `FileDesc`-like safety soon instead of the raw `Fd`, `Handle` and `Socket`.\n\nMoreover, having different function names for unix and windows seems to make OS-independent code more cumbersome to write. Not sure if it's a good idea but, what if we had an OS-independent file descriptor type? Maybe something like `IoHandle<T>`, with `T` implemented for `Fd`, `Handle` and `Socket`? This trait could manage the file descriptor lifetime with `Drop`, a safe duplication with `Clone` and expose the raw value with `Deref<T>`.\n\nReplacing `as_raw_fd(&self) -> Fd` with `as_iohandle(&self) -> &IoHandle<T>` would allow safe and OS-independent APIs. This should also replace `fd(&self)` and `handle(&self)`.\nHandling mutability safely is still a problem.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64079274/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64079875",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64079875",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64079875,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDc5ODc1",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T13:14:17Z",
    "updated_at": "2014-11-22T13:14:17Z",
    "body": "`Deref<Mutex<T>>` for `IoHandle<T>` should solve the mutability problem :)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64079875/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64080036",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64080036",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64080036,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDgwMDM2",
    "user": {
      "login": "mahkoh",
      "id": 1882250,
      "node_id": "MDQ6VXNlcjE4ODIyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1882250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahkoh",
      "html_url": "https://github.com/mahkoh",
      "followers_url": "https://api.github.com/users/mahkoh/followers",
      "following_url": "https://api.github.com/users/mahkoh/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahkoh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahkoh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahkoh/subscriptions",
      "organizations_url": "https://api.github.com/users/mahkoh/orgs",
      "repos_url": "https://api.github.com/users/mahkoh/repos",
      "events_url": "https://api.github.com/users/mahkoh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahkoh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T13:20:56Z",
    "updated_at": "2014-11-22T13:20:56Z",
    "body": "There is no mutability safety problem.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64080036/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64080397",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64080397",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64080397,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDgwMzk3",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T13:36:48Z",
    "updated_at": "2014-11-22T13:36:48Z",
    "body": "> There is no mutability safety problem.\n\nLook at #15643 for background information. Basically it could be unsafe to write or even read from a file descriptor because of concurrent access or file descriptor wrappers state.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64080397/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64080944",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64080944",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64080944,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDgwOTQ0",
    "user": {
      "login": "mahkoh",
      "id": 1882250,
      "node_id": "MDQ6VXNlcjE4ODIyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1882250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahkoh",
      "html_url": "https://github.com/mahkoh",
      "followers_url": "https://api.github.com/users/mahkoh/followers",
      "following_url": "https://api.github.com/users/mahkoh/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahkoh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahkoh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahkoh/subscriptions",
      "organizations_url": "https://api.github.com/users/mahkoh/orgs",
      "repos_url": "https://api.github.com/users/mahkoh/repos",
      "events_url": "https://api.github.com/users/mahkoh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahkoh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T13:54:27Z",
    "updated_at": "2014-11-22T13:54:27Z",
    "body": "> Basically it could be unsafe to write or even read from a file descriptor because of concurrent access or file descriptor wrappers state.\n\nThere is nothing unsafe about this. See http://doc.rust-lang.org/reference.html#behavior-considered-undefined\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64080944/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64081201",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64081201",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64081201,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDgxMjAx",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T14:03:50Z",
    "updated_at": "2014-11-22T14:03:50Z",
    "body": "This is low level FFI unsafe behavior. Again, read #15643 for more details.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64081201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64081553",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64081553",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64081553,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDgxNTUz",
    "user": {
      "login": "mahkoh",
      "id": 1882250,
      "node_id": "MDQ6VXNlcjE4ODIyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1882250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahkoh",
      "html_url": "https://github.com/mahkoh",
      "followers_url": "https://api.github.com/users/mahkoh/followers",
      "following_url": "https://api.github.com/users/mahkoh/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahkoh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahkoh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahkoh/subscriptions",
      "organizations_url": "https://api.github.com/users/mahkoh/orgs",
      "repos_url": "https://api.github.com/users/mahkoh/repos",
      "events_url": "https://api.github.com/users/mahkoh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahkoh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T14:17:27Z",
    "updated_at": "2014-11-22T14:17:27Z",
    "body": "> This is **low level FFI unsafe behavior**. \n\nYou should first define what this even means.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64081553/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64081852",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64081852",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64081852,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDgxODUy",
    "user": {
      "login": "pythonesque",
      "id": 923144,
      "node_id": "MDQ6VXNlcjkyMzE0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/923144?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pythonesque",
      "html_url": "https://github.com/pythonesque",
      "followers_url": "https://api.github.com/users/pythonesque/followers",
      "following_url": "https://api.github.com/users/pythonesque/following{/other_user}",
      "gists_url": "https://api.github.com/users/pythonesque/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pythonesque/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pythonesque/subscriptions",
      "organizations_url": "https://api.github.com/users/pythonesque/orgs",
      "repos_url": "https://api.github.com/users/pythonesque/repos",
      "events_url": "https://api.github.com/users/pythonesque/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pythonesque/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T14:27:24Z",
    "updated_at": "2014-11-22T14:31:21Z",
    "body": "@l0kod I don't think this is unsafe.  Can you give me an example of a situation where sharing a file descriptor could cause memory unsafety?  AFAIK, the kernel already synchronizes updates, refcounts, etc.  In the mmap case, trying to access truncated memory will result in a SIGBUS, you can't cause memory unsafety that way.  If as I suspect, there is no way to cause memory unsafety this way, then it is not in the scope of things that should be protected with an unsafe block.  If someone wants to write a higher level library that makes additional guarantees, that's fine, but Rust is under no obligation to protect that library.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64081852/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64082731",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64082731",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64082731,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDgyNzMx",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T14:58:59Z",
    "updated_at": "2014-11-22T14:58:59Z",
    "body": "One main goal of Rust is safety and safety is not only about memory but about behavior as well, especially for file descriptor (e.g. `Drop` trait goal). Take a look at [my first comment](https://github.com/rust-lang/rust/pull/19169#issuecomment-63938444) or [other](https://github.com/rust-lang/rust/pull/15643#issuecomment-48848511), [comments](https://github.com/rust-lang/rust/pull/15643#issuecomment-48848698), [describing](https://github.com/rust-lang/rust/pull/15643#issuecomment-52473136), [the](https://github.com/rust-lang/rust/pull/15643#issuecomment-52617736), [unsafe](https://github.com/rust-lang/rust/pull/15643#issuecomment-53058681), [behaviors](https://github.com/rust-lang/rust/pull/15643#issuecomment-53492729).\n\nPlease read the entire #15643 thread before other questions/comments.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64082731/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64083683",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64083683",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64083683,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDgzNjgz",
    "user": {
      "login": "pythonesque",
      "id": 923144,
      "node_id": "MDQ6VXNlcjkyMzE0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/923144?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pythonesque",
      "html_url": "https://github.com/pythonesque",
      "followers_url": "https://api.github.com/users/pythonesque/followers",
      "following_url": "https://api.github.com/users/pythonesque/following{/other_user}",
      "gists_url": "https://api.github.com/users/pythonesque/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pythonesque/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pythonesque/subscriptions",
      "organizations_url": "https://api.github.com/users/pythonesque/orgs",
      "repos_url": "https://api.github.com/users/pythonesque/repos",
      "events_url": "https://api.github.com/users/pythonesque/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pythonesque/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T15:28:13Z",
    "updated_at": "2014-11-22T16:05:59Z",
    "body": "Sorry, I don't buy that.\n\nFirst off, while safety in general may be a desirable goal, Rust's \"unsafe\" feature is very much _only_ about memory safety.  It is not for things other than memory safety.  For example, deadlock is a much more common problem than close-then-open, and everyone agrees that code that can deadlock is incorrect, but Rust does not require that all code that can potentially deadlock be marked as unsafe, nor does it require libraries to protect against deadlock.  Same with leaking memory--it's entirely legal in Rust.  You're encouraged to avoid it, but it is not _unsafe._  It is not considered unsafe to perform an overlong bit shift, or cause a stack overflow, or have races where they don't impact memory safety (it's easy to screw up by overusing Relaxed atomics).  What is different about file descriptors that warrants the use of unsafe?\n\nSecondly, saying a function _might_ be written to rely on an assumption for memory safety, so don't violate that assumption in safe code, doesn't make sense.  Unless you make the assumption explicitly part of the definition of unsafe in the document above, other code can expose the file descriptors safely, and then your code will still not work.  This is not dogmatism, this is fundamentally the whole reason unsafe works--that _all_ code is required to enforce the invariants.  Functions _cannot_ rely on file descriptors not being used by other threads, etc., for memory safety, unless that is explicitly stated in the definition of unsafe.  The unsafe traits system is not here yet, but is designed to help provide additional invariants, maybe you can figure out a way to do something with that (but I doubt it).\n\nThirdly, _none_ of the behaviors you listed (close, then open, execve) are memory unsafe.  So I have no idea why this matters.  If you want protection from this kind of abuse, you have to do it through the kernel anyway.\n\nI read all your comments.  None of them explain why this is memory unsafe or why your proposal will help make other code safe.  Please stop recommending this, it doesn't make sense.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64083683/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64095812",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64095812",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64095812,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDk1ODEy",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T21:16:42Z",
    "updated_at": "2014-11-22T21:16:42Z",
    "body": "Again, as discussed in #15643, **it's not (directly) about memory safety** but about safe file descriptor handling. Some examples:\n- file descriptor leak (can quickly fulfill the file descriptor pool per process)\n- Rust should provide features to cleanly manage file descriptor already opened at execution as well\n- concurrent inconsistent write(2), e.g. multiple tasks write at the same time in the same FD\n- concurrent lseek(2), e.g. with  read(2), which lead to corrupt data\n- file descriptor closing, e.g. store raw FD1, close FD1, write to FD1 (which is close)\n- file descriptor replacing, e.g. store raw FD1, close FD1, open a new file (FD2), write to FD1 (which is now FD2)\n- some file descriptor (e.g. open /proc/self/mem, mmap or memfd) can be a representation of the process memory, which would then impact the memory safety\n- keep in mind that FFI can use file descriptor and manage them in your back (safe wrapper could prevent bugs)\n\n**Using a raw file descriptor is unsafe**. This errors can be security bugs as well. We can prevent most of them with a good file descriptor interface for functions using them (e.g. FFI). `FileDesc` already have some safety with `Drop`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64095812/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64095839",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64095839",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64095839,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDk1ODM5",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T21:17:57Z",
    "updated_at": "2014-11-22T21:17:57Z",
    "body": "Here are some sketchy thoughts:\n\n``` rust\nstruct IoHandle<T> {\n    handle: Mutex<T>,\n}\n\nimpl IoHandle<T> {\n    pub unsafe fn new(handle: T) {\n        IoHandle{ handle: Mutex::new(handle) }\n    }\n\n    // Use select! with the file descriptor\n    pub fn event(&self) -> Receiver { \u2026 }\n}\n\nimpl Deref<Mutex<Fd>> for IoHandle<Fd> {\n    fn deref(&self) -> &Mutex<Fd> {\n        &self.handle\n    }\n}\n\nimpl Drop for IoHandle<Fd> {\n    fn drop(&mut self) {\n        let _ = unsafe { libc::close(*self.lock()) };\n    }\n}\n\nimpl Clone for IoHandle<Fd> {\n    fn clone(&self) -> IoHandle<Fd> {\n        let fd = unsafe { libc::fcntl(*self.lock(), libc::F_DUPFD_CLOEXEC) };\n        if fd == -1 {\n            panic!(last_error());\n        }\n        unsafe { IoHandle::new(fd) }\n    }\n}\n\ntrait AsIoHandle<T, W> {\n    fn as_iohandle(&self) -> &IoHandle<T>;\n    fn from_iohandle(IoHandle<T>) -> W;\n}\n\nimpl File {\n    fn path(&'a self) -> Option<&'a Path> { \u2026 }\n    fn open_at(&self, path: &Path) -> IoResult<File> { \u2026 }\n}\n\nimpl AsIoHandle for File {\n    #[cfg(windows)]\n    fn from_iohandle(&self, IoHandle<Handle>) -> IoResult<File> { \u2026 }\n    #[cfg(unix)]\n    fn from_iohandle(&self, IoHandle<Fd>) -> IoResult<File> { \u2026 }\n\n    #[cfg(windows)]\n    fn as_iohandle(&self) -> &IoHandle<Handle> { \u2026 }\n    #[cfg(unix)]\n    fn as_iohandle(&self) -> &IoHandle<Fd> { \u2026 }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64095839/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64097526",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64097526",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64097526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDk3NTI2",
    "user": {
      "login": "pythonesque",
      "id": 923144,
      "node_id": "MDQ6VXNlcjkyMzE0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/923144?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pythonesque",
      "html_url": "https://github.com/pythonesque",
      "followers_url": "https://api.github.com/users/pythonesque/followers",
      "following_url": "https://api.github.com/users/pythonesque/following{/other_user}",
      "gists_url": "https://api.github.com/users/pythonesque/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pythonesque/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pythonesque/subscriptions",
      "organizations_url": "https://api.github.com/users/pythonesque/orgs",
      "repos_url": "https://api.github.com/users/pythonesque/repos",
      "events_url": "https://api.github.com/users/pythonesque/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pythonesque/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T22:11:17Z",
    "updated_at": "2014-11-22T22:12:26Z",
    "body": "Please reread my previous comment.  It doesn't matter whether these things are unsafe by some other definition of safety, Rust's unsafe is only about memory safety and furthermore _cannot work_ for anything other than memory safety.  If you want to make raw file descriptors to be unsafe in general, please file an RFC to change the definition of unsafe.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64097526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64097674",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64097674",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64097674,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDk3Njc0",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T22:16:46Z",
    "updated_at": "2014-11-22T22:16:46Z",
    "body": "@l0kod \n\n> Replacing `as_raw_fd(&self) -> Fd` with `as_iohandle(&self) -> &IoHandle<T>` would allow safe and OS-independent APIs. \n\nI may be missing something, but I don't think this would really change things: the `T` would still vary by platform.\n\nFundamentally, these `os::platform` modules are intended for platform-specific APIs, and should be made as idiomatic for each platform as possible. Platform-independent APIs, on the other hand, can live in `std::io`.\n\n@l0kod @mahkoh @pythonesque \n\nI think there are a lot of interesting questions about what kind of safer/higher-level, but platform-specific abstractions we can provide here. But as I said above, the intent of this PR is just to expose the lowest-level hooks into `std::io` so that the broader Cargo ecosystem can explore abstractions on top of them; I'd rather that experimentation happen externally for now (that's the general migration path into `std` in any case).\n\nIt'd be good if we can turn the conversation back to issues about this PR in particular, and handle questions about abstractions on top elsewhere.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64097674/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64098404",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64098404",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64098404,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDk4NDA0",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T22:44:33Z",
    "updated_at": "2014-11-22T22:44:33Z",
    "body": "> I may be missing something, but I don't think this would really change things: the T would still vary by platform.\n\nYou're right about the specific `T` by platform but the `IoHandle<T>` add a generic wrapper interface common to all platform that should help to add more (safety) features to this type (or trait) in the future (e.g. `Drop` implementation). In my example, the `as_iohandle()`, `from_iohandle()` or `event()` could benefit from this.\nThe return by reference is important for a (future) clean ownership too.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64098404/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64503580",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64503580",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64503580,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NTAzNTgw",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-26T01:52:20Z",
    "updated_at": "2014-11-26T01:52:20Z",
    "body": "ping @alexcrichton -- I still feel that we should land this initial, unopinonated version that just exposes the raw types, and then bring in better abstractions after some external experimentation.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64503580/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64723419",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-64723419",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 64723419,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NzIzNDE5",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-26T23:03:15Z",
    "updated_at": "2014-11-26T23:03:15Z",
    "body": "@aturon, could it be possible to expose the FileDesc struct alone (temporary) to be able to use it?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64723419/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66929563",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-66929563",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 66929563,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTI5NTYz",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-14T21:03:46Z",
    "updated_at": "2014-12-14T21:03:46Z",
    "body": "The [MIO library](https://github.com/carllerche/mio/) from @carllerche use something similar to `FileDesc` with an [`IoDesc` for auto-closing](https://github.com/carllerche/mio/blob/master/src/os/posix.rs).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66929563/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69456820",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-69456820",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 69456820,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NDU2ODIw",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-10T14:03:42Z",
    "updated_at": "2015-01-10T14:03:42Z",
    "body": "To conclude, using `Fd` could be safe as long as the `AsRawFd` (implementation) is not dropped before the end of the `Fd` use (i.e. function taking `AsRawFd`) except if the `AsRawFd` implementation need a consistent/known inner `Fd` state\u2026\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/69456820/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/96191971",
    "html_url": "https://github.com/rust-lang/rust/pull/19169#issuecomment-96191971",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19169",
    "id": 96191971,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk2MTkxOTcx",
    "user": {
      "login": "l0kod",
      "id": 1286585,
      "node_id": "MDQ6VXNlcjEyODY1ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0kod",
      "html_url": "https://github.com/l0kod",
      "followers_url": "https://api.github.com/users/l0kod/followers",
      "following_url": "https://api.github.com/users/l0kod/following{/other_user}",
      "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions",
      "organizations_url": "https://api.github.com/users/l0kod/orgs",
      "repos_url": "https://api.github.com/users/l0kod/repos",
      "events_url": "https://api.github.com/users/l0kod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/l0kod/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-25T12:35:00Z",
    "updated_at": "2015-04-25T12:35:00Z",
    "body": "cc rust-lang/rfcs#1043\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/96191971/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
