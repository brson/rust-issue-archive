[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130489665",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-130489665",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 130489665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDQ4OTY2NQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-13T00:28:58Z",
    "updated_at": "2015-08-13T00:28:58Z",
    "body": "cc @pnkfelix \n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130489665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169014713",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-169014713",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 169014713,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2OTAxNDcxMw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-05T14:25:11Z",
    "updated_at": "2016-01-05T14:25:11Z",
    "body": "It\u2019s already possible to indirectly use `allocate` and `deallocate` in stable Rust:\n\n``` rust\nfn allocate<T>(count: usize) -> *mut T {\n    let mut v = Vec::with_capacity(count);\n    let ptr = v.as_mut_ptr();\n    std::mem::forget(v);\n    ptr\n}\n\nfn deallocate<T>(ptr: *mut T, count: usize) {\n    std::mem::drop(Vec::from_raw_parts(ptr, 0, count));\n}\n```\n\nAny future GC support (mentioned in the `#[unstable(feature=\"heap_api\"))` message) will need to deal with this.\n\nWhile this hack has the merit of existing (and enabling many libraries to making themselves available on stable Rust),\n- It\u2019s ugly\n- It\u2019s hard to discover if you haven\u2019t seen it before\n- It\u2019s sometimes awkward to use. For example, [Tendril](https://github.com/servo/tendril/blob/master/src/tendril.rs) wants to do something like `Rc<str>` where a reference count is in a header next to (before) that bytes that make up a string. The header needs to be memory-aligned, but the amount of bytes is arbitrary. Tendril ends up calculating the next multiple of `size_of::<Header>` in order to find out what capacity of `Vec<Header>` to allocate for a given number of bytes.\n\nWhile I\u2019m not attached to the details of the current `alloc::heap` API, I think it\u2019s important for Stable Rust to have _a_ more straightforward way to allocate/deallocate memory.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169014713/reactions",
      "total_count": 10,
      "+1": 10,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169021833",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-169021833",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 169021833,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2OTAyMTgzMw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-05T14:53:09Z",
    "updated_at": "2016-01-05T14:54:30Z",
    "body": "Random idea for a (more rustic?) RAII-based API for `alloc::heap`:\n\n``` rust\n/// Allocated but not-necessarily-initialized memory.\nstruct Buffer {\n    ptr: Unique<u8>,\n    size: usize,\n    align: usize,\n}\n\nimpl Drop for Buffer {\n    /* deallocate */\n}\n\nimpl Buffer {\n    fn new(size: usize, align: usize) -> Result<Self, ()> {\n        /* allocate, but avoid undefined behavior by asserting or something\n           (maybe skip calling allocate() on `size == 0`?) */\n    }\n\n    // Maybe skip those and keep the unsafe functions API?\n    fn into_ptr(self) -> *mut u8 { /* forget self */ }\n    unsafe fn from_raw_parts(ptr: *mut u8, size: usize, align: usize) -> Self { /* */ }\n\n    fn as_ptr(&self) -> *const u8 { self.ptr }\n    fn as_mut_ptr(&mut self) -> *mut u8 { self.ptr }\n    fn size(&self) -> usize { self.size }  // Call this len?\n    fn align(&self) -> usize { self.align }\n\n    // The caller is responsible for not reading uninitialized memory\n    unsafe fn as_slice(&self) -> &[u8] { /* ... */ }  \n    unsafe fn as_mut_slice(&mut self) -> &mut [u8] { /* ... */ }\n\n    fn reallocate(&mut self, new_size: usize) -> Result<(), ()> { /* ... */ }\n    fn reallocate_in_place(&mut self, new_size: usize) -> Result<(), ()> { /* ... */ }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/169021833/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/198063321",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-198063321",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 198063321,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODA2MzMyMQ==",
    "user": {
      "login": "kamalmarhubi",
      "id": 50936,
      "node_id": "MDQ6VXNlcjUwOTM2",
      "avatar_url": "https://avatars.githubusercontent.com/u/50936?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kamalmarhubi",
      "html_url": "https://github.com/kamalmarhubi",
      "followers_url": "https://api.github.com/users/kamalmarhubi/followers",
      "following_url": "https://api.github.com/users/kamalmarhubi/following{/other_user}",
      "gists_url": "https://api.github.com/users/kamalmarhubi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kamalmarhubi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kamalmarhubi/subscriptions",
      "organizations_url": "https://api.github.com/users/kamalmarhubi/orgs",
      "repos_url": "https://api.github.com/users/kamalmarhubi/repos",
      "events_url": "https://api.github.com/users/kamalmarhubi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kamalmarhubi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-17T20:11:23Z",
    "updated_at": "2016-03-17T20:11:23Z",
    "body": "> It\u2019s already possible to indirectly use allocate and deallocate in stable Rust:\n\nthis doesn't get you access to the `align` parameter though\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/198063321/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/198089347",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-198089347",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 198089347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODA4OTM0Nw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-17T21:30:50Z",
    "updated_at": "2016-03-17T21:30:50Z",
    "body": "Not directly, but you can influence alignment by carefully picking `T` in `Vec::<T>::with_capacity`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/198089347/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/198211596",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-198211596",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 198211596,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODIxMTU5Ng==",
    "user": {
      "login": "kamalmarhubi",
      "id": 50936,
      "node_id": "MDQ6VXNlcjUwOTM2",
      "avatar_url": "https://avatars.githubusercontent.com/u/50936?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kamalmarhubi",
      "html_url": "https://github.com/kamalmarhubi",
      "followers_url": "https://api.github.com/users/kamalmarhubi/followers",
      "following_url": "https://api.github.com/users/kamalmarhubi/following{/other_user}",
      "gists_url": "https://api.github.com/users/kamalmarhubi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kamalmarhubi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kamalmarhubi/subscriptions",
      "organizations_url": "https://api.github.com/users/kamalmarhubi/orgs",
      "repos_url": "https://api.github.com/users/kamalmarhubi/repos",
      "events_url": "https://api.github.com/users/kamalmarhubi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kamalmarhubi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-18T05:16:56Z",
    "updated_at": "2016-03-18T05:16:56Z",
    "body": "@SimonSapin ooh nice! I'd have to read up on alignment rules to figure out if there's a type that would let me align to a page boundary or not, but nice trick :-)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/198211596/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/198438262",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-198438262",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 198438262,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODQzODI2Mg==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-18T16:29:02Z",
    "updated_at": "2016-03-18T16:29:02Z",
    "body": "@kamalmarhubi This stackoverflow answer is probably the most relevant thing that is actually implemented today: http://stackoverflow.com/questions/32428153/how-can-i-align-a-struct-to-a-specifed-byte-boundary\n\n(Longer term we'll presumably put in something better. The `Allocator` trait I'm proposing has `Layout` objects to describe blocks of memory that allow one to specify alignment constraints.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/198438262/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/198469045",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-198469045",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 198469045,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODQ2OTA0NQ==",
    "user": {
      "login": "kamalmarhubi",
      "id": 50936,
      "node_id": "MDQ6VXNlcjUwOTM2",
      "avatar_url": "https://avatars.githubusercontent.com/u/50936?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kamalmarhubi",
      "html_url": "https://github.com/kamalmarhubi",
      "followers_url": "https://api.github.com/users/kamalmarhubi/followers",
      "following_url": "https://api.github.com/users/kamalmarhubi/following{/other_user}",
      "gists_url": "https://api.github.com/users/kamalmarhubi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kamalmarhubi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kamalmarhubi/subscriptions",
      "organizations_url": "https://api.github.com/users/kamalmarhubi/orgs",
      "repos_url": "https://api.github.com/users/kamalmarhubi/repos",
      "events_url": "https://api.github.com/users/kamalmarhubi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kamalmarhubi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-18T17:50:21Z",
    "updated_at": "2016-03-18T17:50:21Z",
    "body": "@pnkfelix thanks for the link. Sounds like I'm out of luck for page boundary alignment though! I am also unclear if the allocator would hate me for `SPLICE_F_GIFT` pages to the kernel. I should probably set up my own anonymous mapping for this anyway...\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/198469045/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/198593007",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-198593007",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 198593007,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODU5MzAwNw==",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-19T00:26:45Z",
    "updated_at": "2016-03-19T00:26:45Z",
    "body": "It took me several seconds to realize that \"aligning to a page boundary\" actually wasn't a tongue-in-cheek joke about text rendering...\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/198593007/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/243009177",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-243009177",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 243009177,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzAwOTE3Nw==",
    "user": {
      "login": "lilith",
      "id": 107935,
      "node_id": "MDQ6VXNlcjEwNzkzNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/107935?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilith",
      "html_url": "https://github.com/lilith",
      "followers_url": "https://api.github.com/users/lilith/followers",
      "following_url": "https://api.github.com/users/lilith/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilith/subscriptions",
      "organizations_url": "https://api.github.com/users/lilith/orgs",
      "repos_url": "https://api.github.com/users/lilith/repos",
      "events_url": "https://api.github.com/users/lilith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilith/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-08-29T00:24:19Z",
    "updated_at": "2016-08-29T00:24:19Z",
    "body": "I noticed that `set_oom_handler` mentions this issue and provides _not a scrutinized interface_ as the reason for instability. \n\nEchoing @glandium, my focus is: \n\n> ```\n> what can rust code do to gracefully handle memory allocation failure?\n> ```\n\nPer https://github.com/rust-lang/rust/issues/33082#issuecomment-218919567, I understand the answer is: \n\n> Currently, in stable Rust, nothing. All collections and pointers in the standard library end up calling that oom routine if a memory allocation fails. We plan on stabilizing the ability to handle this eventually, but that's pretty far off.\n\nI'm focused on server use cases - particularly those where large allocations are both common and recoverable. I think [a strong case for OOM recoverability has been made in several ways](https://internals.rust-lang.org/t/could-we-support-unwinding-from-oom-at-least-for-collections/3673/21).\n\nI would, ideally, like to see\n- APIs which trigger allocations flagged in some fashion (and ideally documented). Has this been considered?\n- The stabilization of `set_oom_handler` or another method for making OOM recoverable.\n\nLooking at actionable options, I appear to be presented with:\n1. Re-implementation of all allocating functions I encounter. Is [this list](https://internals.rust-lang.org/t/could-we-support-unwinding-from-oom-at-least-for-collections/3673/21) actually exhaustive, or only for collections? \n2. Looking for actionable work I can perform to accelerate stabilization of `set_oom_handler`. What would be most helpful?\n3. Using nightly Rust for production server software. Is this something other people are doing?\n\nAnd last, is this the right place to discuss, or should this be a separate issue?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/243009177/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/244504584",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-244504584",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 244504584,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDUwNDU4NA==",
    "user": {
      "login": "lilith",
      "id": 107935,
      "node_id": "MDQ6VXNlcjEwNzkzNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/107935?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilith",
      "html_url": "https://github.com/lilith",
      "followers_url": "https://api.github.com/users/lilith/followers",
      "following_url": "https://api.github.com/users/lilith/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilith/subscriptions",
      "organizations_url": "https://api.github.com/users/lilith/orgs",
      "repos_url": "https://api.github.com/users/lilith/repos",
      "events_url": "https://api.github.com/users/lilith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilith/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-02T22:47:43Z",
    "updated_at": "2016-09-10T02:49:46Z",
    "body": "I've seen a lot of push-back about whether Rust should offer graceful handling of malloc failure. A few points that recur:\n- _If any malloc fails, there's no hope of recovery anyway._ - This is false, as delayed or smaller mallocs are likely to succeed. Malloc failure can be temporary, and is typically (in most allocators) specific to the size of the block requested. Anything involving a work queue can deal gracefully with this by reducing the number of concurrent workers or skipping the task. Simply retrying a few hundred milliseconds later may resolve the problem. On some operating systems, fragmentation causes large malloc failure at below 50% utilization. Imperfect implementations of virtual memory (and allocators!) make the fundamental reasoning behind this myth quite useless. **TLDR; Common predictions of future behavior of malloc are unlikely to correspond with reality.**\n- _Overcommit is enabled by default on most linux distros, so malloc failure is delayed till memory access anyway_ - This [myth](https://www.etalabs.net/overcommit.html) stems from a misunderstanding of overcommit 0. An overcommit **heuristic** is enabled. Failure _may_ be delayed, but is only likely to occur when the heuristic fails. The default behavior _reduces swap usage_. It does that by failing mallocs, but using a less detailed method of accounting. **TLDR; \"overcommit enabled\"=\"overcommit  fractionally more likely\"**\n- _C developers don't bother handling malloc; Rust developers shouldn't be expected to, either._ - Despite the ease of comprehensively testing software for graceful malloc failure handling (swap out malloc fn ptr, iterate failure on nth and later calls, or fuzz failures), this remains a prevalent perception. I've performed this kind of testing against many C libraries with great results; malloc failure is nearly always handled gracefully. This may be uncommon in _applications_, but correct malloc handling is quite common in the embedded, library, systems, and server space, which appears to be where Rust is targeted. Graceful malloc failure handling has also been witnessed in many mobile apps. It would appear that a lot of C/C++/Java/C#/Swift/etc developers are putting effort into this, and many are succeeding.  **TLDR; Relative justifications of laziness unfounded after actual inspection.**\n\nAnd a few recurring points about panic-on-OOM specifically: \n- _Unwinding may allocate, causing undefined behavior if OOM panics_ - **Double panic aborts, so this concern is unfounded.**\n- _Crate authors assume OOM never panics, but always aborts_ - **This is [already an invalid assumption](https://github.com/rust-lang/rust/issues/26951)** - OOM _can_ panic **[Update: but only in the case of capactiy overflows?]**, although most often it aborts. Of the discussions I've read, most involve at least one person being very surprised by a (primarily) `abort` behavior, having assumed a recoverable behavior as is present in many other languages. Perhaps a poll could measure which behavior (panic vs. abort) is less surprising?\n- _Recoverable OOM could fragment the ecosystem_ -  I don't have specifics about how this might occur, but I would imagine a scenario where `catch_panic` is used without expectation that an OOM panic is possible. This concern has legs, but would support a strategy to make panic the default - process abort is always going to work, but increasing the scenarios in which OOM panics might trigger unexpected code paths. So `#![feature(abort_on_oom)]` couldn't cause unexpected behavior (only absence of behavior), while `#![feature(panic_on_oom)]` could cause unexpected behavior in an improperly used `catch_panic`. Rust seems to favor more conservative/forwards-compatible approaches, so `abort_on_oom` as opt-in would seem to be consistent with that philosophy. \n\nI have not yet found any sound arguments as to why OOM should not panic by default (vs. current behavior - panic sometimes, but usually abort). \n\nPerhaps I should write a rust app that demonstrates how malloc failure isn't what people expect, and link to it here.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/244504584/reactions",
      "total_count": 13,
      "+1": 11,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/244508646",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-244508646",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 244508646,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDUwODY0Ng==",
    "user": {
      "login": "lilith",
      "id": 107935,
      "node_id": "MDQ6VXNlcjEwNzkzNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/107935?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilith",
      "html_url": "https://github.com/lilith",
      "followers_url": "https://api.github.com/users/lilith/followers",
      "following_url": "https://api.github.com/users/lilith/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilith/subscriptions",
      "organizations_url": "https://api.github.com/users/lilith/orgs",
      "repos_url": "https://api.github.com/users/lilith/repos",
      "events_url": "https://api.github.com/users/lilith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilith/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-02T23:19:33Z",
    "updated_at": "2016-09-03T02:33:12Z",
    "body": "I am concerned that as `catch_panic` was stabilized a few weeks ago, crates may start using it with false assumptions about panic vs. abort on OOM (currently [_either_](https://github.com/rust-lang/rust/issues/26951) can occur, which is actually a good thing - they cannot _correctly_ assume OOM exclusively aborts, although the docs aren't clear about this). \n\nAs code paths dependent upon this may start appearing, the likelihood of breakage decreases the earlier OOM behavior is changed (or clearly documented to be changing, or documented as changeable). \n\nTo present a couple strawmen that, through simplicity, might be faster to stabilize: \n\n## Opt-in to Panic\n\n`#![feature(panic_on_oom)]` - a subset of `#![feature(oom)]`\n- Causes OOM to attempt a panic instead of abort, and defines the panic value for `catch_panic` users.\n- Double panics still abort.\n- Will be overridden by  `#![feature(oom)]`\n- Has no corresponding API methods.\n- As a stable feature, will be referenced in `catch_panic` and other relevant documentation, to encourage crate authors to support the behavior, for those (potentially theoretical?) crates who depend on certain behavior from `catch_panic`. \n\n## Out-out of panic\n\n`#![feature(abort_on_oom)]` - a subset of `#![feature(oom)]`\n- Causes an abort in all OOM scenarios\n- Otherwise same as above.\n\nWould either of these be easier to fast-track for stabilization (compared to stabilizing `alloc` or `oom`)?\n\nEDIT: Is there concern that libstd may not be robust in the face of panic-on-OOM due to unsafe bits with un-exercised OOM failure states? If so, perhaps this could be opened as an issue for me to work on? With custom allocators this can be pretty straightforward to test. \n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/244508646/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/244600064",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-244600064",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 244600064,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDYwMDA2NA==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-04T12:15:10Z",
    "updated_at": "2016-09-04T12:17:19Z",
    "body": "@nathanaeljones \n\nOOM _always_ aborts. It's only capacity overflows that panic, which `Vec` is required to handle correctly. Other collections may not be as careful.\n\nFor example, `BTreeMap` does not guard its allocations with a capacity overflow, and is a fairly complicated bit of code.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/244600064/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/244606127",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-244606127",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 244606127,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDYwNjEyNw==",
    "user": {
      "login": "Amanieu",
      "id": 278509,
      "node_id": "MDQ6VXNlcjI3ODUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amanieu",
      "html_url": "https://github.com/Amanieu",
      "followers_url": "https://api.github.com/users/Amanieu/followers",
      "following_url": "https://api.github.com/users/Amanieu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions",
      "organizations_url": "https://api.github.com/users/Amanieu/orgs",
      "repos_url": "https://api.github.com/users/Amanieu/repos",
      "events_url": "https://api.github.com/users/Amanieu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amanieu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-04T14:20:43Z",
    "updated_at": "2016-09-04T14:20:43Z",
    "body": "@nathanaeljones \n\nAs the person who implemented `set_oom_handler`, I'd like to provided a bit of background about why this function was added. Previously, running out of memory would result in a call to `instrinsics::abort`, which is an undefined instruction and causes the process to crash with an \"Illegal instruction\" message.\n\nSince this behavior was confusing many people, I added this function, which is used by libstd to set an OOM handler that prints \"Out of memory\" to standard error before calling `libc::abort`, which crashes the process with an \"Abort\" message.\n\nThis functionality couldn't have been put into liballoc directly since that crate is used in bare metal systems and kernels which don't have a standard error to print to and don't have an abort function to call. So the default behavior is to call `intrinsics::abort` while allowing it to be overridden by a more user-friendly OOM handler.\n\nTLDR: `set_oom_handler` was never meant to be used by applications, it is just a way for libstd to print a nicer error message on OOM.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/244606127/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/244606266",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-244606266",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 244606266,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDYwNjI2Ng==",
    "user": {
      "login": "Amanieu",
      "id": 278509,
      "node_id": "MDQ6VXNlcjI3ODUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amanieu",
      "html_url": "https://github.com/Amanieu",
      "followers_url": "https://api.github.com/users/Amanieu/followers",
      "following_url": "https://api.github.com/users/Amanieu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions",
      "organizations_url": "https://api.github.com/users/Amanieu/orgs",
      "repos_url": "https://api.github.com/users/Amanieu/repos",
      "events_url": "https://api.github.com/users/Amanieu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amanieu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-04T14:23:37Z",
    "updated_at": "2016-09-04T14:23:37Z",
    "body": "@nathanaeljones \n\nRegarding your proposal of panicking on OOM, the biggest issue I can see is that unsafe code may leave inconsistent state if a panic occurs where it does not expect one. This inconsistent state could result in memory unsafety and could even be used by exploits that can trigger OOM conditions.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/244606266/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/244784794",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-244784794",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 244784794,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDc4NDc5NA==",
    "user": {
      "login": "lilith",
      "id": 107935,
      "node_id": "MDQ6VXNlcjEwNzkzNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/107935?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilith",
      "html_url": "https://github.com/lilith",
      "followers_url": "https://api.github.com/users/lilith/followers",
      "following_url": "https://api.github.com/users/lilith/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilith/subscriptions",
      "organizations_url": "https://api.github.com/users/lilith/orgs",
      "repos_url": "https://api.github.com/users/lilith/repos",
      "events_url": "https://api.github.com/users/lilith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilith/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-05T16:47:41Z",
    "updated_at": "2016-09-09T21:40:42Z",
    "body": "@Amanieu The first step to either improving robust OOM-panic handling in libstd or creating replacement APIs is to identify which APIs perform allocations. Is there an automated way to do this? I would love to see such APIs flagged in documentation, although a simple list would suffice. Is there already a compiler plugin for this?\n\nFor APIs whose state is contained in a single region of memory, my default testing approach would be to employ a custom allocator to exhaustively force *alloc failures, while requiring that post-panic state involves a bit-for-bit match with the original. I would hope those writing unsafe code in libstd put allocations as early as possible. \n\nAlso, thank you for explaining the motivation behind `set_oom_handler` \n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/244784794/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/254086645",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-254086645",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 254086645,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NDA4NjY0NQ==",
    "user": {
      "login": "tiffany352",
      "id": 1254344,
      "node_id": "MDQ6VXNlcjEyNTQzNDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1254344?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tiffany352",
      "html_url": "https://github.com/tiffany352",
      "followers_url": "https://api.github.com/users/tiffany352/followers",
      "following_url": "https://api.github.com/users/tiffany352/following{/other_user}",
      "gists_url": "https://api.github.com/users/tiffany352/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tiffany352/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tiffany352/subscriptions",
      "organizations_url": "https://api.github.com/users/tiffany352/orgs",
      "repos_url": "https://api.github.com/users/tiffany352/repos",
      "events_url": "https://api.github.com/users/tiffany352/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tiffany352/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-17T00:02:47Z",
    "updated_at": "2016-10-17T00:02:47Z",
    "body": "I'd like for the OOM API to be stabilized in some form. I currently have a sandboxed process which performs calculations on bignums, and OOMs frequently result. Because there is no stabilized API for reporting and handling OOM failures, I have to assume that _all_ aborts are OOMs, which is not always the case. I don't need to be able to recover from an OOM failure - I just need to signal to the parent process that it was an OOM and not some other crash.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/254086645/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/269316825",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-269316825",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 269316825,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTMxNjgyNQ==",
    "user": {
      "login": "yorickpeterse",
      "id": 86065,
      "node_id": "MDQ6VXNlcjg2MDY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/86065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickpeterse",
      "html_url": "https://github.com/yorickpeterse",
      "followers_url": "https://api.github.com/users/yorickpeterse/followers",
      "following_url": "https://api.github.com/users/yorickpeterse/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickpeterse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickpeterse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickpeterse/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickpeterse/orgs",
      "repos_url": "https://api.github.com/users/yorickpeterse/repos",
      "events_url": "https://api.github.com/users/yorickpeterse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickpeterse/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-12-27T11:59:19Z",
    "updated_at": "2016-12-27T11:59:19Z",
    "body": "Perhaps this is not the right place to ask, but what's the progress on the `alloc` library, and `alloc::heap` in particular? I'm currently working on a programming language and the only hard reason this requires nightly is the use of `alloc::heap` as I have to allocate memory with a specific alignment.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/269316825/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290224143",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-290224143",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 290224143,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDIyNDE0Mw==",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-29T20:59:40Z",
    "updated_at": "2017-03-29T20:59:40Z",
    "body": "Nominating for libs team discussion.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290224143/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290226084",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-290226084",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 290226084,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDIyNjA4NA==",
    "user": {
      "login": "yorickpeterse",
      "id": 86065,
      "node_id": "MDQ6VXNlcjg2MDY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/86065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickpeterse",
      "html_url": "https://github.com/yorickpeterse",
      "followers_url": "https://api.github.com/users/yorickpeterse/followers",
      "following_url": "https://api.github.com/users/yorickpeterse/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickpeterse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickpeterse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickpeterse/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickpeterse/orgs",
      "repos_url": "https://api.github.com/users/yorickpeterse/repos",
      "events_url": "https://api.github.com/users/yorickpeterse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickpeterse/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-29T21:06:56Z",
    "updated_at": "2017-03-29T21:07:08Z",
    "body": "In my previous comment I mentioned I was using `alloc::heap` but I didn't show any code. If it's of any use, the code can be found here: https://github.com/YorickPeterse/inko/blob/4e81de458af096dff47f29ce9aff47900becb14d/vm/src/immix/block.rs#L118",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290226084/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290234837",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-290234837",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 290234837,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDIzNDgzNw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-29T21:41:10Z",
    "updated_at": "2017-03-29T21:41:10Z",
    "body": "> It\u2019s already possible to indirectly use `allocate` and `deallocate` in stable Rust\r\n\r\nThere\u2019s even a crate for it: https://crates.io/crates/memalloc",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290234837/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290241270",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-290241270",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 290241270,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDI0MTI3MA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-29T22:06:55Z",
    "updated_at": "2017-03-30T17:08:50Z",
    "body": "Proposal:\r\n\r\n**Edit:** removed drive-by changes per discussion below.\r\n\r\n* <s>Make `allocate` `reallocate` and `reallocate_inplace` return `Result` to indicate errors in a more idiomatic way. Details of the error type(s) to be determined</s>\r\n* <s>Return `Err(_)` rather than invoke undefined behavior for zero size or non-power-of-two alignment</s>\r\n* <s>Make `allocate` not `unsafe`</s>\r\n* Reexport `alloc::heap` as `std::heap`\r\n* Stabilize `std::heap` and its content\r\n* Leave the `alloc` crate unstable, tracked in #27783\r\n* Leave the `oom` module unstable, file a new tracking issue for it.\r\n  * Details of a settable OOM handler (including whether it should be settable at all) can be left to a future RFC.\r\n  * In the meantime, `std::process::abort` is an appropriate OOM handler. (Is it? The current default OOM handler is `core::intrinsics::abort`. How are they different? Do the differences matter?)\r\n\r\n@aturon how does this sound?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290241270/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290242509",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-290242509",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 290242509,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDI0MjUwOQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-29T22:12:44Z",
    "updated_at": "2017-03-29T22:12:44Z",
    "body": "And of course, before stabilizing:\r\n\r\n* Document for each `unsafe` function exactly what invariants callers need to maintain.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290242509/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290260675",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-290260675",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 290260675,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDI2MDY3NQ==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-29T23:51:02Z",
    "updated_at": "2017-03-29T23:51:02Z",
    "body": "If we insist on building more ergonomic APIs, I think we should expose the current ones as-is, suffixed with `_raw` or something. Just so there's absolutely zero blocker on getting them out, and everyone knows they're using the kinda janky \"look it works\" one.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290260675/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 1,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290299127",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-290299127",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 290299127,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDI5OTEyNw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-30T04:27:28Z",
    "updated_at": "2017-03-30T04:27:28Z",
    "body": "I proposed small changes in passing because that seemed an easy improvement, but I\u2019m not particularly attached to them. And I don\u2019t think they\u2019re worth doubling the API surface. @Gankro What\u2019s the value of the `_raw` functions if the other ones are only slightly different?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290299127/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290444409",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-290444409",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 290444409,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDQ0NDQwOQ==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-30T15:19:36Z",
    "updated_at": "2017-03-30T15:19:36Z",
    "body": "There is little to know value; I've just seen this API get punted from stabilization time and time again over hemming and hawing over potential improvements, when everyone just needs *some* way to allocate with a given size and alignment. So basically I'm desperate to do anything it takes to get this landed. I had already been planning to suggest this rename precisely to get them \"out of the way\" of premium name real-estate.\r\n\r\nI personally don't think our lowest level allocation functions should provide any help or do anything on top of the system allocator. This is a critical code path. We should definitely provide higher level abstractions that do the sorts of things you suggest, but the API as it exists should be preserved and pushed out ASAP.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290444409/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290475354",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-290475354",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 290475354,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDQ3NTM1NA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-30T17:02:03Z",
    "updated_at": "2017-03-30T17:02:03Z",
    "body": "Sounds fair enough. I\u2019ve edited my \"proposal\" message above to skip the changes.\r\n\r\nI don\u2019t have an opinion on the rename.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/290475354/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/297151578",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-297151578",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 297151578,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NzE1MTU3OA==",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-04-25T20:15:22Z",
    "updated_at": "2017-04-25T20:15:22Z",
    "body": "Discussed briefly in the libs meeting today; I proposed that we need to get all of the allocator stakeholders together to discuss our plan (in light of [@sfackler's RFC](https://github.com/rust-lang/rfcs/pull/1974), etc).\r\n\r\nThe goal would be to lay out a definite plan of action for incremental stabilization of pieces of the allocator system, trying to get something stable ASAP.\r\n\r\nIf you'd like to take part in this discussion, please leave a comment and I'll be in touch.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/297151578/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/297168796",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-297168796",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 297168796,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NzE2ODc5Ng==",
    "user": {
      "login": "yorickpeterse",
      "id": 86065,
      "node_id": "MDQ6VXNlcjg2MDY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/86065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickpeterse",
      "html_url": "https://github.com/yorickpeterse",
      "followers_url": "https://api.github.com/users/yorickpeterse/followers",
      "following_url": "https://api.github.com/users/yorickpeterse/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickpeterse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickpeterse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickpeterse/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickpeterse/orgs",
      "repos_url": "https://api.github.com/users/yorickpeterse/repos",
      "events_url": "https://api.github.com/users/yorickpeterse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickpeterse/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-04-25T21:21:39Z",
    "updated_at": "2017-04-25T21:21:48Z",
    "body": "@aturon I'm happy to share any feedback/thoughts/grumpy remarks/etc.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/297168796/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/297755631",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-297755631",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 297755631,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5Nzc1NTYzMQ==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-04-27T15:50:32Z",
    "updated_at": "2017-04-27T15:50:32Z",
    "body": "I'd like to be involved.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/297755631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/302754526",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-302754526",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 302754526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjc1NDUyNg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-19T16:48:51Z",
    "updated_at": "2017-05-19T16:48:51Z",
    "body": "Ok! We've now had a chance to get many of the stakeholders together and chat about the current state of affairs. Action items coming out of this moot:\r\n\r\n* Everyone's on board with https://github.com/rust-lang/rfcs/pull/1974, comfortable merging and implementing.\r\n* The `std::heap` API is poposed in https://github.com/rust-lang/rfcs/pull/1974 and can likely be stabilized far ahead of the \"swap the global allocator\" logic proposed in the RFC.\r\n* At that point we'll probably close this issue, as the relevant high-impact pieces will be stable.\r\n* Custom *local* allocators are covered by https://github.com/rust-lang/rust/issues/32838, in addition to custom allocators in collections, I'll leave a comment over there.\r\n\r\nSo with that in mind hopefully we can aim to start closing out this issue soon!",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/302754526/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/309501482",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-309501482",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 309501482,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwOTUwMTQ4Mg==",
    "user": {
      "login": "rolandsteiner",
      "id": 1015390,
      "node_id": "MDQ6VXNlcjEwMTUzOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1015390?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolandsteiner",
      "html_url": "https://github.com/rolandsteiner",
      "followers_url": "https://api.github.com/users/rolandsteiner/followers",
      "following_url": "https://api.github.com/users/rolandsteiner/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolandsteiner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolandsteiner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolandsteiner/subscriptions",
      "organizations_url": "https://api.github.com/users/rolandsteiner/orgs",
      "repos_url": "https://api.github.com/users/rolandsteiner/repos",
      "events_url": "https://api.github.com/users/rolandsteiner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolandsteiner/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-06-19T16:56:43Z",
    "updated_at": "2017-06-19T16:57:12Z",
    "body": "[I hope this is the right place to ask]\r\n\r\nPlaying around with aligned allocation using alloc::heap::allocate, I noticed that usable_size() does not steadily increase by a factor of 2 with increasing requests, but instead jumps in reported (effectively allocated?) storage after 2K directly to 16K.\r\nThat is, when requesting an allocation just larger than 2K, usable_size() will report 16K, even if 4K or 8K would have sufficed. Is this known or expected? \r\n\r\nPlayground: https://is.gd/HGhRYR",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/309501482/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/309505680",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-309505680",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 309505680,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwOTUwNTY4MA==",
    "user": {
      "login": "ssokolow",
      "id": 46915,
      "node_id": "MDQ6VXNlcjQ2OTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/46915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ssokolow",
      "html_url": "https://github.com/ssokolow",
      "followers_url": "https://api.github.com/users/ssokolow/followers",
      "following_url": "https://api.github.com/users/ssokolow/following{/other_user}",
      "gists_url": "https://api.github.com/users/ssokolow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ssokolow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ssokolow/subscriptions",
      "organizations_url": "https://api.github.com/users/ssokolow/orgs",
      "repos_url": "https://api.github.com/users/ssokolow/repos",
      "events_url": "https://api.github.com/users/ssokolow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ssokolow/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-06-19T17:11:56Z",
    "updated_at": "2017-06-19T17:17:00Z",
    "body": "@rolandsteiner Have you tried requesting the system allocator to see if that behaviour changes?\r\n\r\n...because I know jemalloc rounds allocations up as part of its approach for combatting memory fragmentation in long-running programs.\r\n\r\n**EDIT:** Yep. I just tried adding `alloc_system` to your example and now the allocations match the requests. https://is.gd/ce43nS\r\n\r\nYou'll have to ask the jemalloc devs what rationale they used to decide against having a 4K or 8K arena.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/309505680/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/309735290",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-309735290",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 309735290,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwOTczNTI5MA==",
    "user": {
      "login": "rolandsteiner",
      "id": 1015390,
      "node_id": "MDQ6VXNlcjEwMTUzOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1015390?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolandsteiner",
      "html_url": "https://github.com/rolandsteiner",
      "followers_url": "https://api.github.com/users/rolandsteiner/followers",
      "following_url": "https://api.github.com/users/rolandsteiner/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolandsteiner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolandsteiner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolandsteiner/subscriptions",
      "organizations_url": "https://api.github.com/users/rolandsteiner/orgs",
      "repos_url": "https://api.github.com/users/rolandsteiner/repos",
      "events_url": "https://api.github.com/users/rolandsteiner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolandsteiner/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-06-20T12:17:26Z",
    "updated_at": "2017-06-20T12:17:26Z",
    "body": "@ssokolow Thanks for the follow-up! I was mainly puzzled because this behavior is only triggered by the requested alignment, not size (i.e., a 4K or 8K request on a 2K alignment returns a 4K/8K block just fine). \r\n\r\nThis means, one cannot naively request a single 4K page. But perhaps the playground server runs on a different architecture that uses 16K pages (?).",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/309735290/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/309776385",
    "html_url": "https://github.com/rust-lang/rust/issues/27700#issuecomment-309776385",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27700",
    "id": 309776385,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwOTc3NjM4NQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-06-20T14:35:12Z",
    "updated_at": "2017-06-20T14:35:12Z",
    "body": "Upon review of the allocator-related tracking issues we actually have quite a lot now! I'm going to close this in favor of https://github.com/rust-lang/rust/issues/32838 as the stabilization of the `std::heap` module is now quite likely to use those traits. \r\n\r\nI'll be copying over some of the points at the top of this tracking issue to that issue as well.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/309776385/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
