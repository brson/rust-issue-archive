{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/16009",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16009/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16009/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16009/events",
  "html_url": "https://github.com/rust-lang/rust/pull/16009",
  "id": 38822747,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTg5MzM3MzI=",
  "number": 16009,
  "title": "librustc: WIP patch for upgrading the way rvalues are treated.",
  "user": {
    "login": "pcwalton",
    "id": 157897,
    "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pcwalton",
    "html_url": "https://github.com/pcwalton",
    "followers_url": "https://api.github.com/users/pcwalton/followers",
    "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
    "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
    "organizations_url": "https://api.github.com/users/pcwalton/orgs",
    "repos_url": "https://api.github.com/users/pcwalton/repos",
    "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pcwalton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 2,
  "created_at": "2014-07-26T17:55:09Z",
  "updated_at": "2014-08-14T02:19:45Z",
  "closed_at": "2014-08-14T02:19:45Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/16009",
    "html_url": "https://github.com/rust-lang/rust/pull/16009",
    "diff_url": "https://github.com/rust-lang/rust/pull/16009.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/16009.patch",
    "merged_at": null
  },
  "body": "WIP. Do not merge.\n\n@nikomatsakis I'd like to get your feedback on this. I've implemented a patch which fixes #14587, but it has some nasty fallout in other parts of the codebase.\n\nI first tried to make all rvalues treated like lvalues. This ran into problems with method chaining: `foo.bar().baz()` would not work anymore if `baz` required `&mut self`, as it thought it was a double borrow. I believe this is because of the rvalue temporary rules.\n\nThe next thing, which is in this patch, was to formulate the notion of \"aliasable rvalues\". These are rvalues that could be aliasable because they're about to be unpacked into a pattern. Local initializers, match values, and for loop heads fall into this list. This causes a few strange errors:\n\n```\n/Users/pcwalton/Source/rust/src/libcollections/treemap.rs:554:17: 554:18 error: cannot move out of `<rvalue>` because it is borrowed\n/Users/pcwalton/Source/rust/src/libcollections/treemap.rs:554             let n: &mut TreeNode<K, V> = &mut **n;\n                                                                              ^\n/Users/pcwalton/Source/rust/src/libcollections/treemap.rs:554:42: 554:50 note: borrow of `*<rvalue>` occurs here\n/Users/pcwalton/Source/rust/src/libcollections/treemap.rs:554             let n: &mut TreeNode<K, V> = &mut **n;\n```\n\nThis may be related to the rvalue scope extension rules. I haven't dug into that to see whether it's the case.\n\nAny thoughts as to the right way to go here?\n",
  "closed_by": {
    "login": "pcwalton",
    "id": 157897,
    "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pcwalton",
    "html_url": "https://github.com/pcwalton",
    "followers_url": "https://api.github.com/users/pcwalton/followers",
    "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
    "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
    "organizations_url": "https://api.github.com/users/pcwalton/orgs",
    "repos_url": "https://api.github.com/users/pcwalton/repos",
    "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pcwalton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/16009/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16009/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
