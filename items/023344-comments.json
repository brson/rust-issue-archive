[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/79201031",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-79201031",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 79201031,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MjAxMDMx",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-13T18:07:14Z",
    "updated_at": "2015-03-13T18:07:14Z",
    "body": "cc @retep998, @aturon \n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/79201031/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/79201360",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-79201360",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 79201360,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MjAxMzYw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-13T18:07:34Z",
    "updated_at": "2015-03-13T18:07:34Z",
    "body": "The code for all this currently lives in `src/libstd/sys/windows/stdio.rs`, but it may move over time.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/79201360/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/79452960",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-79452960",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 79452960,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5NDUyOTYw",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-13T21:52:28Z",
    "updated_at": "2015-03-13T21:52:28Z",
    "body": "The Windows console just deals with an opaque sequence of `WCHAR` so it offers no guarantees regarding how it gives you surrogates.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/79452960/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/119900205",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-119900205",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 119900205,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExOTkwMDIwNQ==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-09T10:21:38Z",
    "updated_at": "2015-07-09T10:21:38Z",
    "body": "Some notes on Stdin as it is today:\n\nThere seem to be some inefficiencies, the [allocation of a 4 kB vector](https://github.com/rust-lang/rust/blob/9c3ba763891b0fe626adefc19ad7908b0862a41c/src/libstd/sys/windows/stdio.rs#L97) can possibly be turned into an array on the stack. A new String is then allocated again from that result.\n\nThe [MemReader comment should go,](https://github.com/rust-lang/rust/blob/9c3ba763891b0fe626adefc19ad7908b0862a41c/src/libstd/sys/windows/stdio.rs#L115) it used to talk about an unwrap that's no longer there.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/119900205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164950238",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-164950238",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 164950238,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NDk1MDIzOA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-16T01:02:43Z",
    "updated_at": "2015-12-16T01:02:43Z",
    "body": "As reported in #30399, an easy way to trigger this:\n\n``` rust\n    let v = vec![255u8; 5000];\n    let s = String::from_utf8_lossy(&v);\n    // println!(\"Len {}\", s.len());\n    println!(\"{}\", s);\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164950238/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/168628470",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-168628470",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 168628470,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2ODYyODQ3MA==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-04T10:01:05Z",
    "updated_at": "2016-01-04T10:02:06Z",
    "body": "I just ran into this issue while doing `cargo list --tree` in one of my projects presumably because it prints out some box drawing characters and one of them straddled a write boundary.\n\n```\nthread '<main>' panicked at 'failed printing to stdout: text was not valid unicode', ../src/libstd\\io\\stdio.rs:588\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/168628470/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228158526",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-228158526",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 228158526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODE1ODUyNg==",
    "user": {
      "login": "luser",
      "id": 286001,
      "node_id": "MDQ6VXNlcjI4NjAwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luser",
      "html_url": "https://github.com/luser",
      "followers_url": "https://api.github.com/users/luser/followers",
      "following_url": "https://api.github.com/users/luser/following{/other_user}",
      "gists_url": "https://api.github.com/users/luser/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luser/subscriptions",
      "organizations_url": "https://api.github.com/users/luser/orgs",
      "repos_url": "https://api.github.com/users/luser/repos",
      "events_url": "https://api.github.com/users/luser/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luser/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-23T19:29:40Z",
    "updated_at": "2016-06-23T19:29:40Z",
    "body": "This is a real bummer because you can't write non-UTF-8 data to stdout via the std::io APIs, which is not a limitation in C. The simplest example here would be a program that wants to write arbitrary binary data to stdout (expecting it to be piped somewhere), but I hit this today with my program that runs a command, captures its stdout, and then later writes that data to its own stdout. If the stdout from the command was not valid UTF-8 that fails. (The program in question was the Visual C++ installed with the French locale running in a Windows VM with the system locale set to US English.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228158526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228160752",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-228160752",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 228160752,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODE2MDc1Mg==",
    "user": {
      "login": "luser",
      "id": 286001,
      "node_id": "MDQ6VXNlcjI4NjAwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luser",
      "html_url": "https://github.com/luser",
      "followers_url": "https://api.github.com/users/luser/followers",
      "following_url": "https://api.github.com/users/luser/following{/other_user}",
      "gists_url": "https://api.github.com/users/luser/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luser/subscriptions",
      "organizations_url": "https://api.github.com/users/luser/orgs",
      "repos_url": "https://api.github.com/users/luser/repos",
      "events_url": "https://api.github.com/users/luser/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luser/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-23T19:38:43Z",
    "updated_at": "2016-06-23T19:38:43Z",
    "body": "I gather this code is written this way because we want to be able to write Rust strings (which can contain Unicode) to the console, but it's kind of limiting.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228160752/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228178368",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-228178368",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 228178368,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODE3ODM2OA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-23T20:46:09Z",
    "updated_at": "2016-06-23T20:46:15Z",
    "body": "@luser unfortunately (as I'm led to believe) that's actually a somewhat impossible operation on Windows. The captured output is all byte-oriented as that's how the stdout pipes are set up for a spawned program, but when printing that to a console (not a pipe) it's expected to be a u16-oriented stream, so a conversion needs to happen.\n\nI'm not sure if there's a system API for writing bytes to a console, however, other than just the u16 units we're doing today.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228178368/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228208528",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-228208528",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 228208528,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODIwODUyOA==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-23T22:46:43Z",
    "updated_at": "2016-06-23T22:46:43Z",
    "body": "Sure you can write bytes to the console by calling `WriteConsoleA` instead of `WriteConsoleW`, but it'll be interpreted as whatever the current code page is. While you can change the console output code page using `SetConsoleOutputCP`, trying to use UTF-8 will still suffer as it also has issues with multi byte codepoints straddling write boundaries. Trying to use `SetConsoleCP` to read UTF-8 is even worse as multi byte codepoints simply do not work. Rust takes the approach of trying to be as unicode friendly as possible by using wide functions. If you don't like that default and think unicode is a waste of time, then by all means feel free to call the appropriate system functions and write to stdout yourself in whatever manner you feel like.\n\n> The simplest example here would be a program that wants to write arbitrary binary data to stdout (expecting it to be piped somewhere),\n\nIf stdout _is_ piped then Rust won't check that what you're outputting is UTF-8 and will gladly just throw those bytes through the pipe. The only time it matters is when you're interacting with the Windows Console which is a **terrible** place to read/write arbitrary binary data, and if your program tries to spew binary data to the console then that's just bad design.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228208528/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228311275",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-228311275",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 228311275,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODMxMTI3NQ==",
    "user": {
      "login": "luser",
      "id": 286001,
      "node_id": "MDQ6VXNlcjI4NjAwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luser",
      "html_url": "https://github.com/luser",
      "followers_url": "https://api.github.com/users/luser/followers",
      "following_url": "https://api.github.com/users/luser/following{/other_user}",
      "gists_url": "https://api.github.com/users/luser/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luser/subscriptions",
      "organizations_url": "https://api.github.com/users/luser/orgs",
      "repos_url": "https://api.github.com/users/luser/repos",
      "events_url": "https://api.github.com/users/luser/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luser/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-24T10:26:00Z",
    "updated_at": "2016-06-24T10:26:00Z",
    "body": "I think it's unfortunate that the issue I ran into (run a subprocess, capture its output, write that to stdout) doesn't work reliably out-of-the box, and I think that's pretty legitimate.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228311275/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228336717",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-228336717",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 228336717,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODMzNjcxNw==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-24T12:48:04Z",
    "updated_at": "2016-06-24T12:48:04Z",
    "body": "It is working as reliably as it can. If you pass it UTF-8 data it does the conversion to UTF-16 and everything works fine. If you pass it data that isn't UTF-8, well now what? It certainly can't losslessly convert it to UTF-16, so that's out. As for writing it out with `WriteConsoleA`, well, what code page do you want to use? In C it \"works\" because it simply writes out the bytes using `WriteConsoleA` and doesn't care what the current code page is. That means what glyph your characters will display as depends on what the current code page is, thereby completely butchering unicode.\n\nIn your case, if the program you're capturing the output of is not outputting UTF-8 but rather some other code page, then the solution is for you to figure out which code page it is and use a crate like https://github.com/lifthrasiir/rust-encoding to convert it to UTF-8 before writing it out. If the output is binary, why the heck are you trying to write binary data to the console?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228336717/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228364864",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-228364864",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 228364864,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODM2NDg2NA==",
    "user": {
      "login": "luser",
      "id": 286001,
      "node_id": "MDQ6VXNlcjI4NjAwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luser",
      "html_url": "https://github.com/luser",
      "followers_url": "https://api.github.com/users/luser/followers",
      "following_url": "https://api.github.com/users/luser/following{/other_user}",
      "gists_url": "https://api.github.com/users/luser/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luser/subscriptions",
      "organizations_url": "https://api.github.com/users/luser/orgs",
      "repos_url": "https://api.github.com/users/luser/repos",
      "events_url": "https://api.github.com/users/luser/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luser/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-24T14:42:54Z",
    "updated_at": "2016-06-24T14:42:54Z",
    "body": "Presumably the output is already in the system codepage, but `std::process::Output`'s `stdout` member is a `Vec<u8>`, just bytes, and the `Write` trait takes a `&[u8]`, which is usually just bytes, so yes, it's surprising that somewhere in the middle there something is trying to treat the data as UTF-8.\n\nAnd yes, I understand that system codepages are a mess, and the historical legacy of \"everything is ASCII\" in C is terrible, but this seems like a fairly straightforward use case, and to do what would be 2 lines in C I'll have to jump through a number of hoops in Rust.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228364864/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228377093",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-228377093",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 228377093,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODM3NzA5Mw==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-24T15:29:09Z",
    "updated_at": "2016-06-24T15:29:09Z",
    "body": "Rust has to default to using the wide versions so that Rust strings, which are known to always be UTF-8, can be written to the console correctly. Changing this behavior would be a serious regression for all the people that currently rely on unicode in the console.\n\nMaybe one day libstd will have a more extensive API for interacting with stdout, including choosing how to deal with code pages, but that will take time and likely an RFC (feel free to create one if you can think of a good design), but until then your best option is to call [WriteConsoleA](https://retep998.github.io/doc/kernel32/fn.WriteConsoleA.html) yourself or create a library that does so for you, or even just call the libc functions if you really want.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228377093/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228860202",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-228860202",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 228860202,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODg2MDIwMg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-27T20:09:12Z",
    "updated_at": "2016-06-27T20:09:12Z",
    "body": "@luser yeah it's true that that this is unfortunately harder to do than in C, but it's unfortunate fallout from our decision to be much more principled about UTF-8 (especially in strings). The interface here is \"write an arbitrary blob of bytes to stdout\" rather than \"write this process's output to stdout\". The former doesn't have much of an interpretation if it's _not_ unicode, but the latter should almost always be possible to ferry through without incident.\n\nIt may be worth exploring attempting to interpret the input as unicode and wherever that fails call the ansi functions which take bytes instead. That way you may be interleaving calls to the byte and wide apis, but maybe it'd work out? That'd at least get us to an infallible `write` implementation, although may give incorrect results.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228860202/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228874321",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-228874321",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 228874321,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODg3NDMyMQ==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-27T21:01:57Z",
    "updated_at": "2016-06-27T21:01:57Z",
    "body": "It would most definitely give incorrect results when your input is in a code page that doesn't match the ascii portion of UTF-8, as during wide calls those bytes would be interpreted as UTF-8, while if some invalid UTF-8 is encountered it would do a narrow call and interpret those bytes as whatever the console code page is. I'd really prefer if we had separate APIs for writing unicode data and writing arbitrary blobs in the current code page.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228874321/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/416438485",
    "html_url": "https://github.com/rust-lang/rust/issues/23344#issuecomment-416438485",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23344",
    "id": 416438485,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjQzODQ4NQ==",
    "user": {
      "login": "abonander",
      "id": 3198595,
      "node_id": "MDQ6VXNlcjMxOTg1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3198595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abonander",
      "html_url": "https://github.com/abonander",
      "followers_url": "https://api.github.com/users/abonander/followers",
      "following_url": "https://api.github.com/users/abonander/following{/other_user}",
      "gists_url": "https://api.github.com/users/abonander/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abonander/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abonander/subscriptions",
      "organizations_url": "https://api.github.com/users/abonander/orgs",
      "repos_url": "https://api.github.com/users/abonander/repos",
      "events_url": "https://api.github.com/users/abonander/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abonander/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-08-28T03:23:15Z",
    "updated_at": "2018-08-28T03:23:46Z",
    "body": "In the interim, can we make the error message a little bit more Windows- and stdlib-specific? \"text was not valid unicode\" is really generic and can make it seem like the error is coming from somewhere other than the stdlib. I went so far as to grep my entire local Cargo cache to make sure it wasn't coming from a library somewhere in the below issue.\r\n\r\ncc https://github.com/abonander/multipart/issues/106",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/416438485/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
