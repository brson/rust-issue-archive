[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1357153",
    "html_url": "https://github.com/rust-lang/rust/issues/10#issuecomment-1357153",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10",
    "id": 1357153,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNTcxNTM=",
    "user": {
      "login": "robarnold",
      "id": 326113,
      "node_id": "MDQ6VXNlcjMyNjExMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/326113?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robarnold",
      "html_url": "https://github.com/robarnold",
      "followers_url": "https://api.github.com/users/robarnold/followers",
      "following_url": "https://api.github.com/users/robarnold/following{/other_user}",
      "gists_url": "https://api.github.com/users/robarnold/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robarnold/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robarnold/subscriptions",
      "organizations_url": "https://api.github.com/users/robarnold/orgs",
      "repos_url": "https://api.github.com/users/robarnold/repos",
      "events_url": "https://api.github.com/users/robarnold/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robarnold/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-06-13T04:57:20Z",
    "updated_at": "2011-06-13T04:57:20Z",
    "body": "Seems like this is not high-pri but good in the long term. Assigning to myself if you don't mind.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1357153/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1357158",
    "html_url": "https://github.com/rust-lang/rust/issues/10#issuecomment-1357158",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10",
    "id": 1357158,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNTcxNTg=",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-06-13T04:59:47Z",
    "updated_at": "2011-06-13T04:59:47Z",
    "body": "Its presence (or absence) relates pretty heavily to the set of abstractions we present to users for IO and concurrency. IOW a concurrency system is only as good as the IO subsystem that services it. So I'd like to get it sorted out sooner rather than later. But if you want to dig in, feel free.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1357158/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1395232",
    "html_url": "https://github.com/rust-lang/rust/issues/10#issuecomment-1395232",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10",
    "id": 1395232,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzOTUyMzI=",
    "user": {
      "login": "robarnold",
      "id": 326113,
      "node_id": "MDQ6VXNlcjMyNjExMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/326113?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robarnold",
      "html_url": "https://github.com/robarnold",
      "followers_url": "https://api.github.com/users/robarnold/followers",
      "following_url": "https://api.github.com/users/robarnold/following{/other_user}",
      "gists_url": "https://api.github.com/users/robarnold/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robarnold/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robarnold/subscriptions",
      "organizations_url": "https://api.github.com/users/robarnold/orgs",
      "repos_url": "https://api.github.com/users/robarnold/repos",
      "events_url": "https://api.github.com/users/robarnold/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robarnold/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-06-19T02:15:08Z",
    "updated_at": "2011-06-19T02:15:08Z",
    "body": "I have a WIP on my fork if you'd like to check it out for some initial feedback.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1395232/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2980367",
    "html_url": "https://github.com/rust-lang/rust/issues/10#issuecomment-2980367",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10",
    "id": 2980367,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODAzNjc=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-12-01T20:48:42Z",
    "updated_at": "2011-12-01T21:13:59Z",
    "body": "The aio code we have had since summer was bitrotted so I removed it a few weeks ago (I apologize robarnold - I should have discussed it with you).\n\nIn 7476a39e47d4c5d8e1a349adf590ee329501a0a8 I checked in the beginnings of a different approach. What I would like to do is produce a low-level Rust API that closely mirrors the C uv API, with similar performance characteristics, with minimal runtime C++ code. So the user starts an event loop which calls event handler functions, just like uv.\n\nTo do so I propose going through the libuv test suite and duplicating each test case in Rust until we have a complete implementation. At that point we can write some networking libraries. I think this is a good approach because writing these bindings is going to be a major test of both our task system and FFI so we need rock solid tests.\n\nPretty early you run into the issue of dealing with native callbacks, and resolving it is going to require some significant changes to the runtime scheduling code.\n\nThis is what I propose:\n- Separate rust_scheduler into rust_domain and rust_sched_thread. rust_domain is 'the scheduler' and rust_sched_thread manages the per-thread resources like the C stack and context switching.\n- Instead of the kernel having a fixed set of schedulers, it now has a dynamic set of domains which each have a fixed number of threads.\n- Implement std::task::spawn_domain which creates a new domain with some specified number of threads (in the future this can be refined with other types of domain).\n- Calling uv::run spawns 2 single-threaded domains: an event loop and an event handler, then waits for the event loop to exit. The event loop will spend all its time blocked in C code so must be in its own domain and the handler will need to respond very quickly to events so shouldn't have to deal with other tasks being scheduled ahead of it.\n- The event loop handles the native events and synchronously dispatches them to the event handler task which then presents them to the user as a Rust callback. There are several options for how to implement this and I think over time there will be opportunities to optimize, with the ultimate optimization being a mechanism to actually call Rust code from C code, eliminating the event handler task.\n- We define all of our uv handles with one extra field: rustfn, a pointer to a Rust function. When the user registers a callback, we put that callback in rustfn and register our own native function to handle the dispatch back to Rust code.\n\nIt gets more vague from here as I've only scratched the surface of the libuv API, but I believe this lays out a promising path.\n\nI'm still open to somebody else implementing it as I don't expect to get back to libuv until sometime after 0.1.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2980367/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3880349",
    "html_url": "https://github.com/rust-lang/rust/issues/10#issuecomment-3880349",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10",
    "id": 3880349,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODAzNDk=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-02-09T01:42:14Z",
    "updated_at": "2012-02-09T01:42:14Z",
    "body": "We have `task::spawn_sched` now.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3880349/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3975063",
    "html_url": "https://github.com/rust-lang/rust/issues/10#issuecomment-3975063",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10",
    "id": 3975063,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzUwNjM=",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-02-15T05:04:45Z",
    "updated_at": "2012-02-15T05:04:45Z",
    "body": "While this is not perfect yet, the uv bindings certainly exist now, no? Can we close this and open new bugs for further issues we encounter with the uv bindings?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3975063/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3988500",
    "html_url": "https://github.com/rust-lang/rust/issues/10#issuecomment-3988500",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10",
    "id": 3988500,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODg1MDA=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-02-15T20:36:03Z",
    "updated_at": "2012-02-15T20:36:03Z",
    "body": "Sure.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3988500/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
