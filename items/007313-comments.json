[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19895743",
    "html_url": "https://github.com/rust-lang/rust/issues/7313#issuecomment-19895743",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7313",
    "id": 19895743,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODk1NzQz",
    "user": {
      "login": "gavinb",
      "id": 158326,
      "node_id": "MDQ6VXNlcjE1ODMyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/158326?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavinb",
      "html_url": "https://github.com/gavinb",
      "followers_url": "https://api.github.com/users/gavinb/followers",
      "following_url": "https://api.github.com/users/gavinb/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavinb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavinb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavinb/subscriptions",
      "organizations_url": "https://api.github.com/users/gavinb/orgs",
      "repos_url": "https://api.github.com/users/gavinb/repos",
      "events_url": "https://api.github.com/users/gavinb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavinb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-24T08:57:25Z",
    "updated_at": "2013-06-24T08:57:25Z",
    "body": "Hi @brson, just to clarify the scope of this change...\n\nIs this only to change the use of `libc` types in the interfaces published by modules in `libstd`, but to leave implementation details that use types such as `c_int` and `c_size_t`? Or should it be virtually a global replacement, with no use of `libc` types outside of `libc` itself?\n\nWhat about in the external declarations of libc functions - which style should be used, as per an example in `cmath`?\n\n```\nunsafe fn acos(n: c_double) -> c_double;\nunsafe fn acos(n: f64) -> f64;\n```\n\nIOW if we can be certain that the usage of a c_int is consistently defined on each supported arch/os, should i32 be substituted globally?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19895743/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19922894",
    "html_url": "https://github.com/rust-lang/rust/issues/7313#issuecomment-19922894",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7313",
    "id": 19922894,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5OTIyODk0",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-24T17:41:49Z",
    "updated_at": "2013-06-24T17:41:49Z",
    "body": "The general guideline I suggest is that `extern` fns should use C types to match the C code, but Rust functions shouldn't. As one example, some of the lang items - the interface between the compiler and the library - in unstable::lang are defined in terms of C types, not Rust types.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19922894/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20041251",
    "html_url": "https://github.com/rust-lang/rust/issues/7313#issuecomment-20041251",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7313",
    "id": 20041251,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDQxMjUx",
    "user": {
      "login": "gavinb",
      "id": 158326,
      "node_id": "MDQ6VXNlcjE1ODMyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/158326?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavinb",
      "html_url": "https://github.com/gavinb",
      "followers_url": "https://api.github.com/users/gavinb/followers",
      "following_url": "https://api.github.com/users/gavinb/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavinb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavinb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavinb/subscriptions",
      "organizations_url": "https://api.github.com/users/gavinb/orgs",
      "repos_url": "https://api.github.com/users/gavinb/repos",
      "events_url": "https://api.github.com/users/gavinb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavinb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-26T11:40:08Z",
    "updated_at": "2013-06-26T11:40:08Z",
    "body": "Thanks, @brson. I performed a little analysis of the `libc` types used in `libstd` and found the following:\n\n```\ntype            frequency\nc_void          306\nc_int           264\nc_char          126\nsize_t          119\nc_double        113\nc_float         101\nFILE            55\nintptr_t        48\nuintptr_t       44\npid_t           10\nDIR             5\nssize_t         4\ndirent_t        4\nc_uchar         4\nmode_t          3\nc_long          3\nc_ulong         1\n```\n\nThe type `c_void` seems to be used mainly as a generic pointer. I could either change these to *u8, or define a new generic `bufptr` type (in `lang` or `sys`?) to use instead.\n\nThe `c_char` type is frequently used for heap pointers, and should probably be replaced with `*u8`. Similarly, when used for strings, I think this usage should be replaced with `*u8` to be consistent with the `str` type being a `[u8]`. So there's probably little call for `*i8` any more, and I think existing usage of such should be changed to `*u8` for consistency.\n\nThe `c_double` and `c_float` are overwhelmingly used in the `extern` declarations in `cmath` and the like, so there will be few changes there, if any.\n\nThe `intptr_t` and `uintptr_t` can be replaced with `uint` and `int` respectively. And `size_t` can become `uint`.\n\nAfter having a stab at changing things piecemeal and then discovering inconsistencies lurking in every corner (eg. strings sometimes being `c_char` and sometimes `*i8`), I thought I should step back and analyse it properly first.\n\nSo, how does that sound as a plan of attack?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/20041251/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23279766",
    "html_url": "https://github.com/rust-lang/rust/issues/7313#issuecomment-23279766",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7313",
    "id": 23279766,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMjc5NzY2",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-26T17:28:08Z",
    "updated_at": "2013-08-26T17:28:08Z",
    "body": "@gavinb Sounds good.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23279766/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26502626",
    "html_url": "https://github.com/rust-lang/rust/issues/7313#issuecomment-26502626",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7313",
    "id": 26502626,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NTAyNjI2",
    "user": {
      "login": "bstrie",
      "id": 865233,
      "node_id": "MDQ6VXNlcjg2NTIzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bstrie",
      "html_url": "https://github.com/bstrie",
      "followers_url": "https://api.github.com/users/bstrie/followers",
      "following_url": "https://api.github.com/users/bstrie/following{/other_user}",
      "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions",
      "organizations_url": "https://api.github.com/users/bstrie/orgs",
      "repos_url": "https://api.github.com/users/bstrie/repos",
      "events_url": "https://api.github.com/users/bstrie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bstrie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-17T13:11:37Z",
    "updated_at": "2013-10-17T13:11:59Z",
    "body": "Is our `std::util::Void` type a drop-in replacement for `c_void`?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26502626/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26528323",
    "html_url": "https://github.com/rust-lang/rust/issues/7313#issuecomment-26528323",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7313",
    "id": 26528323,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NTI4MzIz",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-17T17:11:03Z",
    "updated_at": "2013-10-17T17:11:03Z",
    "body": "@bstrie: yeah, they're both just uninhabited enums, although neither compiles to the LLVM type that's expected for `void`\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26528323/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
