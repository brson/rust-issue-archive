{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/10678",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/10678/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/10678/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/10678/events",
  "html_url": "https://github.com/rust-lang/rust/pull/10678",
  "id": 23338895,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTAzMTEzMzY=",
  "number": 10678,
  "title": "Implement a lock-free work-stealing deque",
  "user": {
    "login": "alexcrichton",
    "id": 64996,
    "node_id": "MDQ6VXNlcjY0OTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexcrichton",
    "html_url": "https://github.com/alexcrichton",
    "followers_url": "https://api.github.com/users/alexcrichton/followers",
    "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
    "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
    "repos_url": "https://api.github.com/users/alexcrichton/repos",
    "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 1,
  "created_at": "2013-11-26T19:11:11Z",
  "updated_at": "2014-06-14T16:28:24Z",
  "closed_at": "2013-11-29T21:41:38Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/10678",
    "html_url": "https://github.com/rust-lang/rust/pull/10678",
    "diff_url": "https://github.com/rust-lang/rust/pull/10678.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/10678.patch",
    "merged_at": "2013-11-29T21:41:39Z"
  },
  "body": "This adds an implementation of the Chase-Lev work-stealing deque to libstd\nunder std::rt::deque. I've been unable to break the implementation of the deque\nitself, and it's not super highly optimized just yet (everything uses a SeqCst\nmemory ordering).\n\nThe major snag in implementing the chase-lev deque is that the buffers used to\nstore data internally cannot get deallocated back to the OS. In the meantime, a\nshared buffer pool (synchronized by a normal mutex) is used to\ndeallocate/allocate buffers from. This is done in hope of not overcommitting too\nmuch memory. It is in theory possible to eventually free the buffers, but one\nmust be very careful in doing so.\n\nI was unable to get some good numbers from src/test/bench tests (I don't think\nmany of them are slamming the work queue that much), but I was able to get some\ngood numbers from one of my own tests. In a recent rewrite of select::select(),\nI found that my implementation was incredibly slow due to contention on the\nshared work queue. Upon switching to the parallel deque, I saw the contention\ndrop to 0 and the runtime go from 1.6s to 0.9s with the most amount of time\nspent in libuv awakening the schedulers (plus allocations).\n\nCloses #4877\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/10678/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/10678/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
