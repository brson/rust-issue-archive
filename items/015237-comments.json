[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47425605",
    "html_url": "https://github.com/rust-lang/rust/pull/15237#issuecomment-47425605",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15237",
    "id": 47425605,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDI1NjA1",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-28T11:58:48Z",
    "updated_at": "2014-06-28T11:58:48Z",
    "body": "FWIW, this isn't allowing markdown, this is allowing _HTML_ to be included inline. Could you update the commit message?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47425605/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47426191",
    "html_url": "https://github.com/rust-lang/rust/pull/15237#issuecomment-47426191",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15237",
    "id": 47426191,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDI2MTkx",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-28T12:27:38Z",
    "updated_at": "2014-06-28T12:28:07Z",
    "body": "Thanks for doing this work!\n\nUnfortunately there's ways in which this can be improved:\n- the options can be renamed from `--markdown-...` (which reflected that they could only be used with standalone markdown files) to `--html-...` (reflecting that they include raw html)\n- now that both forms of documentation generation use these files, the reading should move to be common to both (i.e. in `lib.rs`). I'm thinking something like this:\n\nIn [markdown.rs](https://github.com/rust-lang/rust/blob/e6d6c8beaa6a0b77334bdbed7105b3c3c17420be/src/librustdoc/markdown.rs#L73) (it should probably move elsewhere, but I'm not sure the best way to manage it... maybe move `load_string`, `load_or_return!` and `load_external_files` to their own `external_files` module?):\n\n``` rust\npub struct ExternalHtml {\n    pub in_header: String,\n    pub before_content: String,\n    pub after_content: String\n}\n\nimpl ExternalHtml {\n    pub fn load(in_header: &[String], before_content: &[String],\n                after_content: &[String]) -> Option<ExternalHtml> {\n        match (load_external_files(in_header),\n               load_external_files(before_content),\n               load_external_files(after_content)) {\n            (Some(ih), Some(bc), Some(ac)) => {\n                Some(ExternalHtml {\n                    in_header: ih,\n                    before_content: bc,\n                    after_content: ac\n                })\n            }\n             _ => None\n        }\n    }\n}\n\n...\n\npub fn render(..., external_html: &ExternalHtml) { ...\n```\n\nIn [`lib.rs`](https://github.com/rust-lang/rust/blob/e6d6c8beaa6a0b77334bdbed7105b3c3c17420be/src/librustdoc/lib.rs#L178)\n\n``` rust\nuse markdown::ExternalHtml;\n\n// ...\n\n// possibly on on L178\nlet external_files = match ExternalHtml::load(matches.opt_strs(\"html-in-header\").as_slice(), \n                                              matches.opt_strs(\"html-before-content\").as_slice(), \n                                              matches.opt_strs(\"html-after-content\").as_slice()) {\n     Some(ef) => ef,\n     None => return 3,\n};\n\n// ...\n        (false, true) => return markdown::render(input, output.unwrap_or(Path::new(\"doc\")),\n                                                 &matches, &external_html),\n\n// ...\n\n            match html::render::run(krate, output.unwrap_or(Path::new(\"doc\")), &external_html) {\n\n// ...\n```\n\nThen `render::run` would change to take an `ExternalHtml` and `Layout` would gain an `external_html` field.\n\nIf you have any questions, just ask (here or IRC (huon)).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47426191/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47426509",
    "html_url": "https://github.com/rust-lang/rust/pull/15237#issuecomment-47426509",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15237",
    "id": 47426509,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDI2NTA5",
    "user": {
      "login": "zzmp",
      "id": 5403956,
      "node_id": "MDQ6VXNlcjU0MDM5NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5403956?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zzmp",
      "html_url": "https://github.com/zzmp",
      "followers_url": "https://api.github.com/users/zzmp/followers",
      "following_url": "https://api.github.com/users/zzmp/following{/other_user}",
      "gists_url": "https://api.github.com/users/zzmp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zzmp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zzmp/subscriptions",
      "organizations_url": "https://api.github.com/users/zzmp/orgs",
      "repos_url": "https://api.github.com/users/zzmp/repos",
      "events_url": "https://api.github.com/users/zzmp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zzmp/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-28T12:46:39Z",
    "updated_at": "2014-06-28T12:46:39Z",
    "body": "I just responded to all your line comments, only to see that you had the same concerns when I finally got to your final comment :)\n\nI'll go over this more thoroughly tomorrow, and I'll be sure to reach out if I have more questions.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47426509/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47426802",
    "html_url": "https://github.com/rust-lang/rust/pull/15237#issuecomment-47426802",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15237",
    "id": 47426802,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDI2ODAy",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-28T13:00:55Z",
    "updated_at": "2014-06-28T13:00:55Z",
    "body": "> It does not update the man rustdoc page, nor does it update the documentation in the rustdoc manual.\n\nIf you could, it would be good to update them (`man/rustdoc.1` and `src/doc/rustdoc.md` respectively), but I'm happy to do them later.\n\n(At the very least, you should change the argument names in `rustdoc.md` when you change these ones, so that it's not incorrect, even if it doesn't describe the full changes you have made.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47426802/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47435561",
    "html_url": "https://github.com/rust-lang/rust/pull/15237#issuecomment-47435561",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15237",
    "id": 47435561,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDM1NTYx",
    "user": {
      "login": "zzmp",
      "id": 5403956,
      "node_id": "MDQ6VXNlcjU0MDM5NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5403956?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zzmp",
      "html_url": "https://github.com/zzmp",
      "followers_url": "https://api.github.com/users/zzmp/followers",
      "following_url": "https://api.github.com/users/zzmp/following{/other_user}",
      "gists_url": "https://api.github.com/users/zzmp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zzmp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zzmp/subscriptions",
      "organizations_url": "https://api.github.com/users/zzmp/orgs",
      "repos_url": "https://api.github.com/users/zzmp/repos",
      "events_url": "https://api.github.com/users/zzmp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zzmp/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-28T19:00:47Z",
    "updated_at": "2014-06-28T19:00:47Z",
    "body": "I can do them when I fix everything else up. I really just could not find them.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47435561/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47444224",
    "html_url": "https://github.com/rust-lang/rust/pull/15237#issuecomment-47444224",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15237",
    "id": 47444224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDQ0MjI0",
    "user": {
      "login": "zzmp",
      "id": 5403956,
      "node_id": "MDQ6VXNlcjU0MDM5NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5403956?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zzmp",
      "html_url": "https://github.com/zzmp",
      "followers_url": "https://api.github.com/users/zzmp/followers",
      "following_url": "https://api.github.com/users/zzmp/following{/other_user}",
      "gists_url": "https://api.github.com/users/zzmp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zzmp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zzmp/subscriptions",
      "organizations_url": "https://api.github.com/users/zzmp/orgs",
      "repos_url": "https://api.github.com/users/zzmp/repos",
      "events_url": "https://api.github.com/users/zzmp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zzmp/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-29T02:37:42Z",
    "updated_at": "2014-06-29T02:37:57Z",
    "body": "@huonw, I believe I've changed everything discussed.\n\nThis exposes _more_ of rustdoc, in exposing functions and a macro that convert an array of strings (filepaths) to a string. It is in the `rustdoc` crate, so I don't think it is an issue.\n\nI've also changed how the header/footer are generated. There are now explicit sections in all generated documentation for the header/footer, which are left blank if none are provided through the flags (but not removed from the DOM). They are given 0 padding in `main.css`, so as not to change the appearance if not included.\nThis was done so that they would always fall in the same column as the documentation, and never in the column of the cratelist. It was a deliberate decision, but is definitely opinionated.\nThe footer also appears at the bottom of the documentation, not at the bottom of the page. If the crate list is longer than the docs, the footer will appear below the docs (and not the crate list).\n\nI can squash this into one commit, but wanted to leave it separate to make it easier to review. I can squash it if you'd like.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/47444224/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
