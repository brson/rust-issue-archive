[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48218380",
    "html_url": "https://github.com/rust-lang/rust/issues/15504#issuecomment-48218380",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15504",
    "id": 48218380,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MjE4Mzgw",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-07T18:18:22Z",
    "updated_at": "2014-07-07T18:18:22Z",
    "body": "cc @jbclements\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48218380/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48219674",
    "html_url": "https://github.com/rust-lang/rust/issues/15504#issuecomment-48219674",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15504",
    "id": 48219674,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MjE5Njc0",
    "user": {
      "login": "jbclements",
      "id": 226617,
      "node_id": "MDQ6VXNlcjIyNjYxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/226617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbclements",
      "html_url": "https://github.com/jbclements",
      "followers_url": "https://api.github.com/users/jbclements/followers",
      "following_url": "https://api.github.com/users/jbclements/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbclements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbclements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbclements/subscriptions",
      "organizations_url": "https://api.github.com/users/jbclements/orgs",
      "repos_url": "https://api.github.com/users/jbclements/repos",
      "events_url": "https://api.github.com/users/jbclements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbclements/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-07T18:26:01Z",
    "updated_at": "2014-07-07T18:26:01Z",
    "body": "Okay, let's see.\n\nFirst things first: you're right that methods are currently different from functions; that's because hygiene\nisn't yet complete for methods. I hope to finish that later today :).\n\nNext, Hygiene. The basic idea is that in general, macros such as your `check_len` are fragile; specifically, a programmer who comes to this code later and edits the `baz` function might change the name of the `xs` argument, and all uses of `xs` inside that function. That programmer will probably be unhappy and confused when the code stops working. The basic idea behind hygiene is that bindings have lexical scope, even in the presence of macros.\n\nIn this instance, the easiest fix would simply be to put the definition of the `check_len` macro inside of the function itself. Alternatively, you could have the macro accept the name `xs` explicitly. I'd be happy to show you some example code, if you like.\n\nThanks for your question!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48219674/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48235992",
    "html_url": "https://github.com/rust-lang/rust/issues/15504#issuecomment-48235992",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15504",
    "id": 48235992,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MjM1OTky",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-07T20:27:38Z",
    "updated_at": "2014-07-07T20:27:38Z",
    "body": "> Next, Hygiene. The basic idea is that in general, macros such as your check_len are fragile; specifically, a programmer who comes to this code later and edits the baz function might change the name of the xs argument, and all uses of xs inside that function. That programmer will probably be unhappy and confused when the code stops working. \n\nThat makes sense.\n\n> The basic idea behind hygiene is that bindings have lexical scope, even in the presence of macros.\n\nWith these hygiene rules, would it be possible for the compiler to catch these kind of errors in the macro _definiton_? Because, right now, all errors point to the macro _expansions_. If you used a bad macro ten times, you'll get ten errors - it'll be better (less noisy) if the compiler pointed directly at the culprit: the macro definition.\n\n> the easiest fix would simply be to put the definition of the check_len macro inside of the function itself\n\nIn that case, I would end with two equal macro definitions: one in `bar()` and another in `baz()`. Right?\n\n> Alternatively, you could have the macro accept the name xs explicitly.\n\nSomething like this?\n\n``` rust\nmacro_rules! check_len {\n    ($collection:ident) => { $collection.len() == 0 }\n}\n```\n\n@jbclements Thanks for your answer!\n\n(Should I leave this issue open until the method hygiene patch lands, or just close it?)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48235992/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48252514",
    "html_url": "https://github.com/rust-lang/rust/issues/15504#issuecomment-48252514",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15504",
    "id": 48252514,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MjUyNTE0",
    "user": {
      "login": "jbclements",
      "id": 226617,
      "node_id": "MDQ6VXNlcjIyNjYxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/226617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbclements",
      "html_url": "https://github.com/jbclements",
      "followers_url": "https://api.github.com/users/jbclements/followers",
      "following_url": "https://api.github.com/users/jbclements/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbclements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbclements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbclements/subscriptions",
      "organizations_url": "https://api.github.com/users/jbclements/orgs",
      "repos_url": "https://api.github.com/users/jbclements/repos",
      "events_url": "https://api.github.com/users/jbclements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbclements/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-07T23:01:52Z",
    "updated_at": "2014-07-07T23:01:52Z",
    "body": "Re: catching the errors in the definition: the problem here is that there are things that macros don't know about their contexts. There are certain macros that can be used as patterns or as expressions or as statements; the compiler doesn't know how it'll be used until it plugs it in. Another way of saying that: this is still an area of active research!\n\nYou can go ahead and close this now, if you like.  Naturally, you can also wait, if you prefer that.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48252514/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48673453",
    "html_url": "https://github.com/rust-lang/rust/issues/15504#issuecomment-48673453",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15504",
    "id": 48673453,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjczNDUz",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-10T22:33:18Z",
    "updated_at": "2014-07-10T22:33:18Z",
    "body": "@jbclements :+1: \nFixed in #15537. Closing.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48673453/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
