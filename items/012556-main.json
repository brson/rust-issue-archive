{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/12556",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/12556/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/12556/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/12556/events",
  "html_url": "https://github.com/rust-lang/rust/pull/12556",
  "id": 28299517,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTI5MzMwMzA=",
  "number": 12556,
  "title": "rustc: Support various flavors of linkages",
  "user": {
    "login": "alexcrichton",
    "id": 64996,
    "node_id": "MDQ6VXNlcjY0OTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexcrichton",
    "html_url": "https://github.com/alexcrichton",
    "followers_url": "https://api.github.com/users/alexcrichton/followers",
    "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
    "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
    "repos_url": "https://api.github.com/users/alexcrichton/repos",
    "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 6,
  "created_at": "2014-02-26T00:49:44Z",
  "updated_at": "2014-06-18T09:41:21Z",
  "closed_at": "2014-03-11T18:11:59Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/12556",
    "html_url": "https://github.com/rust-lang/rust/pull/12556",
    "diff_url": "https://github.com/rust-lang/rust/pull/12556.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/12556.patch",
    "merged_at": "2014-03-11T18:11:59Z"
  },
  "body": "It is often convenient to have forms of weak linkage or other various types of\nlinkage. Sadly, just using these flavors of linkage are not compatible with\nRust's typesystem and how it considers some pointers to be non-null.\n\nAs a compromise, this commit adds support for weak linkage to external symbols,\nbut it requires that this is only placed on extern statics of type `*T`.\nCodegen-wise, we get translations like:\n\n``` rust\n    // rust code\n    extern {\n        #[linkage = \"extern_weak\"]\n        static foo: *i32;\n    }\n\n    // generated IR\n    @foo = extern_weak global i32\n    @_some_internal_symbol = internal global *i32 @foo\n```\n\nAll references to the rust value of `foo` then reference `_some_internal_symbol`\ninstead of the symbol `_foo` itself. This allows us to guarantee that the\naddress of `foo` will never be null while the value may sometimes be null.\n\nAn example was implemented in `std::rt::thread` to determine if\n`__pthread_get_minstack()` is available at runtime, and a test is checked in to\nuse it for a static value as well. Function pointers a little odd because you\nstill need to transmute the pointer value to a function pointer, but it's\nthankfully better than not having this capability at all.\n\nThanks to @bnoordhuis for the original patch, most of this work is still his!\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/12556/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/12556/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
