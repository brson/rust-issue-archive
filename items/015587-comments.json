[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48662456",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-48662456",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 48662456,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjYyNDU2",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-10T20:50:40Z",
    "updated_at": "2014-07-10T20:50:57Z",
    "body": "I don't think rust-lang/rfcs#88 is relevant here; that's relevant to `vec![1,2,3]` because it provides a good way to initialize the `Vec` with the correct capacity for the number of arguments. But with your `vec![0, ..n]` there's no use for counting arguments.\n\nThe `[0, ..n]` array syntax requires the element to be `Copy`. Does your proposed `vec![0, ..n]` syntax have the same requirement? Or does it require `Clone` instead? Offhand it looks like it's just shorthand for `Vec::from_elem()`, which uses the `Clone` bound. I'm also not convinced that we need any shorthand for `Vec::from_elem()`. It's already reasonably short. `vec![]` itself is useful because there's no one-line equivalent that can be written as a function (because it needs to move each value, so it can't take a slice, and we don't have integral generics, so it can't take a fixed-size array).\n\nFWIW, extending `vec![]` to support `vec![0, ..n]` syntax does not actually require a procedural macro, as long as it's being translated into `Vec::from_elem()`. It just needs a new matcher added to the top of the macro (not the bottom, that doesn't work), making the whole macro look like\n\n``` rust\nmacro_rules! vec{\n    ($e:expr, ..$n:expr) => { ::std::vec::Vec::from_elem($n, $e) };\n    ($($e:expr),*) => {{\n        let mut _temp = ::std::vec::Vec::new();\n        $(_temp.push($e);)*\n        _temp\n    }};\n    ($($e:expr),+,) => (vec!($($e),+));\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48662456/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48670227",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-48670227",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 48670227,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjcwMjI3",
    "user": {
      "login": "Kimundi",
      "id": 2903206,
      "node_id": "MDQ6VXNlcjI5MDMyMDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2903206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kimundi",
      "html_url": "https://github.com/Kimundi",
      "followers_url": "https://api.github.com/users/Kimundi/followers",
      "following_url": "https://api.github.com/users/Kimundi/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kimundi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kimundi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kimundi/subscriptions",
      "organizations_url": "https://api.github.com/users/Kimundi/orgs",
      "repos_url": "https://api.github.com/users/Kimundi/repos",
      "events_url": "https://api.github.com/users/Kimundi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kimundi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-10T21:59:20Z",
    "updated_at": "2014-07-10T22:05:10Z",
    "body": "Oh right, I totally got the dependency on https://github.com/rust-lang/rfcs/pull/88 backwards.\n\nI still think it would make sense to mirror the syntax of `[foo, ..bar]`, it could just dispatch to `from_elem()` as you said.\n\nThis should either involve a `Clone` bound and an arbitrary `uint` value on the premise that `Vec` can only be constructed at runtime, or a `Copy` bound and a requirement for the `uint` to be a constexpr, to be semantically and syntactically identical to `[expr, ..constexr]`\n\nWhether or not to extend `vec!` at all depends on how idiomatic its use is considered. Personally I always use `vec![]` instead of `Vec::new()`, for example.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48670227/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48673409",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-48673409",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 48673409,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjczNDA5",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-10T22:32:44Z",
    "updated_at": "2014-07-10T22:32:44Z",
    "body": "Personally, I think supporting `vec![expr, ..n]` is a reasonable idea. And I think it should be literally equivalent to `Vec::from_elem(n, expr)`, i.e. no constexpr, and `Clone` instead of `Copy`. IIRC we want to eventually be able to provide an implementation of `Clone` for all types that are `Copy` (if they don't otherwise provide it), but in the meantime we tend to assume that any type that needs some sort of copying like that needs to implement `Clone`. There are many good reasons why array construction uses `Copy` instead of `Clone`, but those reasons don't apply to `Vec`.\n\nGiven that, I would support a PR that modifies the definition of `vec![]` as I listed above.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48673409/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48674217",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-48674217",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 48674217,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4Njc0MjE3",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-10T22:41:53Z",
    "updated_at": "2014-07-10T22:41:53Z",
    "body": "What about expanding to\n\n``` rust\n($init: expr, .. $n: expr) => {{\n    let n = $n;\n    let v = Vec::with_capacity(n);\n    for _ in range(0, n) { v.push($init) }\n    v\n}}\n```\n\ni.e. don't require `Clone` or `Copy`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48674217/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48677412",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-48677412",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 48677412,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4Njc3NDEy",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-10T23:23:49Z",
    "updated_at": "2014-07-10T23:23:49Z",
    "body": "@huonw That's inconsistent with array literals. I submitted a PR a while back as #14272 (closed due to inactivity) that added an `ary![expr, ..n]` procedural macro that did have that behavior (of duplicating the expression instead of copying the resulting value), although it was not clear if this was behavior that anyone besides me actually wanted. But that was very explicitly trying to diverge from array initialization semantics; the request here for `vec![]` would be to try to match the semantics as reasonably as possible except using a `Vec` instead of an array.\n\nNote that with your version the following code:\n\n``` rust\nlet x = vec![{println!(\"wat\"); 3u}, ..5];\n```\n\nwould print \"wat\" 5 times, but the equivalent array expression only prints \"wat\" once.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48677412/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48677502",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-48677502",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 48677502,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4Njc3NTAy",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-10T23:25:01Z",
    "updated_at": "2014-07-10T23:25:01Z",
    "body": "FWIW, if you want that expression-duplicating behavior with `Vec`, we already have `Vec::from_fn()` that will do it (using a closure).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48677502/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48718256",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-48718256",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 48718256,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NzE4MjU2",
    "user": {
      "login": "Kimundi",
      "id": 2903206,
      "node_id": "MDQ6VXNlcjI5MDMyMDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2903206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kimundi",
      "html_url": "https://github.com/Kimundi",
      "followers_url": "https://api.github.com/users/Kimundi/followers",
      "following_url": "https://api.github.com/users/Kimundi/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kimundi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kimundi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kimundi/subscriptions",
      "organizations_url": "https://api.github.com/users/Kimundi/orgs",
      "repos_url": "https://api.github.com/users/Kimundi/repos",
      "events_url": "https://api.github.com/users/Kimundi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kimundi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-11T11:00:34Z",
    "updated_at": "2014-07-11T11:00:34Z",
    "body": "Yeah, if we want to emulate the `[expr, ..expr]` syntax, then it should only evaluate the first expression once, or else you get weird and very rare bugs.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48718256/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58753961",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-58753961",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 58753961,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NzUzOTYx",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-11T15:49:31Z",
    "updated_at": "2014-10-11T15:49:31Z",
    "body": "After #17920 introduced `into_vec` and changed the definition of `vec!`, the desired syntax is pretty close to just work.\n\nToday, you'd expect `vec![0u, ..16]` to expand to:\n\n``` rust\n{\n    use std::slice::BoxedSlice;\n    let xs: ::std::boxed::Box<[_]> = box() [0u, ..16];\n    xs.into_vec()\n}\n```\n\nExcept that it doesn't because the macro definition expects `$($e:expr),*,` (expressions separated by commas) as arguments, but `..16` is not an expression (because `..` is parsed as a token).\n\nTo make this work, we'll have to change `vec!` from being a MBE to a \"procedural macro\", where it retains pretty much the same expansion it has today, but it doesn't parse the arguments as a list, instead it just passes the full token tree to `box () [$TOKEN_TREE]`. (I'm skimming the details of this last part, but I think is doable)\n\nAnyhow, such change probably merits an RFC?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58753961/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58754206",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-58754206",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 58754206,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NzU0MjA2",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-11T15:56:44Z",
    "updated_at": "2014-10-11T16:09:47Z",
    "body": "@japaric: I don't think it needs an RFC. The syntax is defined as part of the core language for fixed-size arrays and `vec![]` should just be passing through to those.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58754206/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58754611",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-58754611",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 58754611,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NzU0NjEx",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-11T16:08:34Z",
    "updated_at": "2014-10-11T16:09:03Z",
    "body": "I correct myself, this can be done using macros by example. This appears to work:\n\n``` rust\n#![feature(macro_rules)]\n\nmacro_rules! my_vec {\n    ($value:expr, ..$repeat:expr) => ({\n        use std::slice::BoxedSlice;\n        let xs: ::std::boxed::Box<[_]> = box() [$value, ..$repeat];\n        xs.into_vec()\n    });\n    ($($x:expr),*) => ({\n        use std::slice::BoxedSlice;\n        let xs: ::std::boxed::Box<[_]> = box() [$($x),*];\n        xs.into_vec()\n    });\n}\n\nfn main() {\n    println!(\"{}\", my_vec![0u, ..16]);\n    println!(\"{}\", my_vec![0u, 1]);\n}\n```\n\nPrints:\n\n```\n[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n[0, 1]\n```\n\n(I would send a PR, but I'm on my way out)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58754611/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58754673",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-58754673",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 58754673,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NzU0Njcz",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-11T16:10:25Z",
    "updated_at": "2014-10-11T16:10:25Z",
    "body": "It would be nicer if it could just pass through all of the tokens opaquely. I don't know how to do that or if it's actually possible.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58754673/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58762612",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-58762612",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 58762612,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NzYyNjEy",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-11T20:02:59Z",
    "updated_at": "2014-10-11T20:02:59Z",
    "body": "> It would be nicer if it could just pass through all of the tokens opaquely.\n\nIs there any advantage of doing it that way? I think the macro definition above covers all the initialization patterns we currently have. (modulo trailing comma, but that's easy to add)\n\n>  I don't know how to do that or if it's actually possible.\n\nI'll be working with syntax extensions later today, I'll check whether this is feasible or not, and report it here.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58762612/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58770856",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-58770856",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 58770856,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NzcwODU2",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-12T01:52:25Z",
    "updated_at": "2014-10-12T01:52:25Z",
    "body": "It's certainly doable, here's an [out of tree implementation](https://github.com/japaric/tor.rs). I'll reproduce the important part of the README here for posteriority:\n\n---\n\n`tor!($SOMETHING)` expands into:\n\n``` rust\n{\n    use std::slice::BoxedSlice;\n    use std::boxed::HEAP;\n    let xs = box (HEAP) [$SOMETHING];\n    xs.into_vec()\n}\n```\n\n---\n\nBoth `tor![0u, 1]` and `tor![0u, ..4]` work as expected, and things like `tor![0u, ..]` and `tor![0u 1]` fail to parse, and the error message points to the right span. The implementation is way longer (100 lines) than the current macro by example though.\n\nDo let me know if I should send a PR with the syntax extension version or with the macro by example version.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58770856/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58770911",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-58770911",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 58770911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NzcwOTEx",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-12T01:56:08Z",
    "updated_at": "2014-10-12T01:57:32Z",
    "body": "It seems to me that this can be done via the following (the `expr!` hack is a work around for https://github.com/rust-lang/rust/issues/9364).\n\n``` rust\n#![feature(macro_rules)]\n\nmacro_rules! expr {\n    ($e: expr) => { $e }\n}\nmacro_rules! vec {\n    ($($contents: tt)*) => {\n       {\n            use std::slice::BoxedSlice;\n            use std::boxed::HEAP;\n            let xs = expr!(box (HEAP) [$($contents)*]);\n            xs.into_vec()\n        }\n    }\n}\n\nfn main() {\n    println!(\"{}\", vec![1u, 2, 3]);\n    println!(\"{}\", vec![1u, .. 10]);\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58770911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58771074",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-58771074",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 58771074,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NzcxMDc0",
    "user": {
      "login": "japaric",
      "id": 5018213,
      "node_id": "MDQ6VXNlcjUwMTgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/japaric",
      "html_url": "https://github.com/japaric",
      "followers_url": "https://api.github.com/users/japaric/followers",
      "following_url": "https://api.github.com/users/japaric/following{/other_user}",
      "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/japaric/subscriptions",
      "organizations_url": "https://api.github.com/users/japaric/orgs",
      "repos_url": "https://api.github.com/users/japaric/repos",
      "events_url": "https://api.github.com/users/japaric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/japaric/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-12T02:07:34Z",
    "updated_at": "2014-10-12T02:07:34Z",
    "body": "If it can be done with just `macro_rules!`, we should use that.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/58771074/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64106092",
    "html_url": "https://github.com/rust-lang/rust/issues/15587#issuecomment-64106092",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15587",
    "id": 64106092,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTA2MDky",
    "user": {
      "login": "icorderi",
      "id": 2915919,
      "node_id": "MDQ6VXNlcjI5MTU5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2915919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/icorderi",
      "html_url": "https://github.com/icorderi",
      "followers_url": "https://api.github.com/users/icorderi/followers",
      "following_url": "https://api.github.com/users/icorderi/following{/other_user}",
      "gists_url": "https://api.github.com/users/icorderi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/icorderi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/icorderi/subscriptions",
      "organizations_url": "https://api.github.com/users/icorderi/orgs",
      "repos_url": "https://api.github.com/users/icorderi/repos",
      "events_url": "https://api.github.com/users/icorderi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/icorderi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-23T04:13:36Z",
    "updated_at": "2014-11-23T04:13:36Z",
    "body": "+1 to the syntax addition\n\n``` rust\nlet x = vec![0u8,..1024*1024];\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64106092/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
