[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22664800",
    "html_url": "https://github.com/rust-lang/rust/issues/8506#issuecomment-22664800",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8506",
    "id": 22664800,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNjY0ODAw",
    "user": {
      "login": "carl-eastlund",
      "id": 1545750,
      "node_id": "MDQ6VXNlcjE1NDU3NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1545750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carl-eastlund",
      "html_url": "https://github.com/carl-eastlund",
      "followers_url": "https://api.github.com/users/carl-eastlund/followers",
      "following_url": "https://api.github.com/users/carl-eastlund/following{/other_user}",
      "gists_url": "https://api.github.com/users/carl-eastlund/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carl-eastlund/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carl-eastlund/subscriptions",
      "organizations_url": "https://api.github.com/users/carl-eastlund/orgs",
      "repos_url": "https://api.github.com/users/carl-eastlund/repos",
      "events_url": "https://api.github.com/users/carl-eastlund/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carl-eastlund/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-14T20:30:08Z",
    "updated_at": "2013-08-14T20:30:08Z",
    "body": "I've simplified the reproducing program:\n\n```\nenum Either {\n    One,\n    Other{left:@str,right:@str}\n}\n\nstatic one : Either = One;\n\nfn main () {\n}\n```\n\nIf I remove the Other case, or change its contents to non-pointers, or remove one of its fields, the code compiles and runs successfully.  If I remove the static definition of one = One, the code compiles and runs successfully.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22664800/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32699134",
    "html_url": "https://github.com/rust-lang/rust/issues/8506#issuecomment-32699134",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8506",
    "id": 32699134,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjk5MTM0",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-19T02:08:48Z",
    "updated_at": "2014-01-19T02:08:48Z",
    "body": "Triage. Example that doesn't require gated features.\n\n``` rust\n#[allow(dead_code)];\n\nenum Either {\n    One,\n    Other(~int, int)\n}\n\nstatic one : Either = One;\n\nfn main () {}\n```\n\nThe things that @carl-eastlund noticed still hold: `Other` needs to have more than one thing, with at least one a pointer (any of ~, @ or & cause the crash, but `*` doesn't: so presumably this is caused by something to do with non-nullable pointers).\n\ncc @jld.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32699134/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32822417",
    "html_url": "https://github.com/rust-lang/rust/issues/8506#issuecomment-32822417",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8506",
    "id": 32822417,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyODIyNDE3",
    "user": {
      "login": "jld",
      "id": 254973,
      "node_id": "MDQ6VXNlcjI1NDk3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/254973?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jld",
      "html_url": "https://github.com/jld",
      "followers_url": "https://api.github.com/users/jld/followers",
      "following_url": "https://api.github.com/users/jld/following{/other_user}",
      "gists_url": "https://api.github.com/users/jld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jld/subscriptions",
      "organizations_url": "https://api.github.com/users/jld/orgs",
      "repos_url": "https://api.github.com/users/jld/repos",
      "events_url": "https://api.github.com/users/jld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jld/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-21T05:23:54Z",
    "updated_at": "2014-01-21T05:23:54Z",
    "body": "What happens in that case is that `adt::trans_const` puts a `C_null` in the field with the pointer and a `C_undef` in any others; `build_const_struct` wraps the undef in a layer of struct to distinguish it from the regular undefs used for alignment padding.  Except apparently that's not how it works (anymore? ever?), and the wrapped undef actually is undef.\n\nSo we could just make those fields null instead, and get rid of the `wrapped` stuff.\n\nAnother approach would be to precompute all the field offsets and const-padding-ness when the `adt::Struct` is created, instead of testing whether the fields of the const are undef, because we'd want that info anyway for TBAA metadata.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32822417/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
