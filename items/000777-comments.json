[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1678487",
    "html_url": "https://github.com/rust-lang/rust/issues/777#issuecomment-1678487",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/777",
    "id": 1678487,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2Nzg0ODc=",
    "user": {
      "login": "jruderman",
      "id": 692547,
      "node_id": "MDQ6VXNlcjY5MjU0Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/692547?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jruderman",
      "html_url": "https://github.com/jruderman",
      "followers_url": "https://api.github.com/users/jruderman/followers",
      "following_url": "https://api.github.com/users/jruderman/following{/other_user}",
      "gists_url": "https://api.github.com/users/jruderman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jruderman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jruderman/subscriptions",
      "organizations_url": "https://api.github.com/users/jruderman/orgs",
      "repos_url": "https://api.github.com/users/jruderman/repos",
      "events_url": "https://api.github.com/users/jruderman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jruderman/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-07-29T03:12:42Z",
    "updated_at": "2011-07-29T03:12:42Z",
    "body": "Switch the operands around and we get a different error message:\n\n```\nfn my_err(s: str) -> ! { log_err s; fail; }\nfn main() { 3u == my_err(\"bye\"); }\n```\n\nAssertion failed: (getOperand(0)->getType() == getOperand(1)->getType() && \"Both operands to ICmp instruction are not of the same type!\"), function ICmpInst, file /Users/jruderman/code/llvm/include/llvm/Instructions.h, line 643.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1678487/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1707077",
    "html_url": "https://github.com/rust-lang/rust/issues/777#issuecomment-1707077",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/777",
    "id": 1707077,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MDcwNzc=",
    "user": {
      "login": "jruderman",
      "id": 692547,
      "node_id": "MDQ6VXNlcjY5MjU0Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/692547?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jruderman",
      "html_url": "https://github.com/jruderman",
      "followers_url": "https://api.github.com/users/jruderman/followers",
      "following_url": "https://api.github.com/users/jruderman/following{/other_user}",
      "gists_url": "https://api.github.com/users/jruderman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jruderman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jruderman/subscriptions",
      "organizations_url": "https://api.github.com/users/jruderman/orgs",
      "repos_url": "https://api.github.com/users/jruderman/repos",
      "events_url": "https://api.github.com/users/jruderman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jruderman/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-08-02T07:21:39Z",
    "updated_at": "2011-08-02T07:21:39Z",
    "body": "Here's a version that uses early-ret instead of bang:\n\n```\nfn wsucc(n: int) -> int {\n    { ret n + 1 } == 0;\n}\nfn main() {}\n```\n\nIt's interesting that if I replace \"==\" with \"+\" I get \"error: binary operation + cannot be applied to type `_|_`\".  Why is that the case for \"+\" but not for \"==\"?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1707077/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1712648",
    "html_url": "https://github.com/rust-lang/rust/issues/777#issuecomment-1712648",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/777",
    "id": 1712648,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MTI2NDg=",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-08-02T20:05:21Z",
    "updated_at": "2011-08-02T20:05:21Z",
    "body": "\"error: binary operation + cannot be applied to type `_|_`\" is a typechecker bug -- values of type `_|_` are usable in any context. I'll look into that too.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1712648/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1714552",
    "html_url": "https://github.com/rust-lang/rust/issues/777#issuecomment-1714552",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/777",
    "id": 1714552,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MTQ1NTI=",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-08-03T00:28:25Z",
    "updated_at": "2011-08-03T00:28:25Z",
    "body": "The first two programs enjoyed different results because trans was assuming both sides of the `==` had the same type, and was choosing what to do based on the RHS type.\n\nIf it chooses `_|_`, then we see the first error message (about the bad cast) because it was falling into cmp glue, since `_|_` is not a scalar type.\n\nIf it chooses uint, then we see the second error message, because it tries to generate an unsigned int comparison but `my_err` has the wrong return type.\n\nSo far as I can tell, the correct thing to do is to just not generate code for the comparison if one operand is divergently typed. I have a fix which I'm about to check in.\n\nNext I'll look at the early-ret version.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1714552/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
