[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3353696",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-3353696",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 3353696,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTM2OTY=",
    "user": {
      "login": "marijnh",
      "id": 144427,
      "node_id": "MDQ6VXNlcjE0NDQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marijnh",
      "html_url": "https://github.com/marijnh",
      "followers_url": "https://api.github.com/users/marijnh/followers",
      "following_url": "https://api.github.com/users/marijnh/following{/other_user}",
      "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions",
      "organizations_url": "https://api.github.com/users/marijnh/orgs",
      "repos_url": "https://api.github.com/users/marijnh/repos",
      "events_url": "https://api.github.com/users/marijnh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marijnh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-01-04T12:05:18Z",
    "updated_at": "2012-01-04T12:05:18Z",
    "body": "You'd still not be able to make `iter` pure, since it calls one of its arguments and can't prove that this argument is pure.\n\nYou can add more rules to handle that, but it just goes down deeper and deeper. As we found out before (there was an effect system early last year that was dumped again), you can't really do any kind of sane purity checking on a language like Rust. I would prefer going back to a system where you can simply annotate a function that you want to use as a predicate as pure (or, preferably, `pred`), and give up on any checking of this purity.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3353696/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3353878",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-3353878",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 3353878,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTM4Nzg=",
    "user": {
      "login": "kud1ing",
      "id": 391975,
      "node_id": "MDQ6VXNlcjM5MTk3NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/391975?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kud1ing",
      "html_url": "https://github.com/kud1ing",
      "followers_url": "https://api.github.com/users/kud1ing/followers",
      "following_url": "https://api.github.com/users/kud1ing/following{/other_user}",
      "gists_url": "https://api.github.com/users/kud1ing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kud1ing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kud1ing/subscriptions",
      "organizations_url": "https://api.github.com/users/kud1ing/orgs",
      "repos_url": "https://api.github.com/users/kud1ing/repos",
      "events_url": "https://api.github.com/users/kud1ing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kud1ing/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-01-04T12:27:47Z",
    "updated_at": "2012-01-04T12:29:28Z",
    "body": "It would not be possible to add the \"pure\" declaration to a higher-order function's arguments? Like\n\n```\npure fn any<T>(v: [T], f: pure fn(T) -> bool) -> bool\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3353878/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3353951",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-3353951",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 3353951,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTM5NTE=",
    "user": {
      "login": "marijnh",
      "id": 144427,
      "node_id": "MDQ6VXNlcjE0NDQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marijnh",
      "html_url": "https://github.com/marijnh",
      "followers_url": "https://api.github.com/users/marijnh/followers",
      "following_url": "https://api.github.com/users/marijnh/following{/other_user}",
      "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions",
      "organizations_url": "https://api.github.com/users/marijnh/orgs",
      "repos_url": "https://api.github.com/users/marijnh/repos",
      "events_url": "https://api.github.com/users/marijnh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marijnh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-01-04T12:35:29Z",
    "updated_at": "2012-01-04T12:35:29Z",
    "body": "We could make purity part of a function's type. But that still doesn't come close to solving the problem. Consider this:\n\n```\nfn count_zeroes(x: [int]) -> uint {\n    let cnt = 0u;\n    vec::iter(x, {|elt| if (elt == 0) { cnt += 1u; }});\n    ret cnt;\n}\n```\n\nIs this pure? The block passed to `iter` sure isn't. (And sure, you can come up with more and more rules to cover more and more cases, but it'll get really complicated and hard to understand. Also, actually annotating all pure functions, not just those that are used as predicates, is very much like \"const correctness\" in C++ -- people will forget or not bother, and as a result the whole system, which requires consistency, falls apart.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3353951/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3354123",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-3354123",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 3354123,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTQxMjM=",
    "user": {
      "login": "kud1ing",
      "id": 391975,
      "node_id": "MDQ6VXNlcjM5MTk3NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/391975?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kud1ing",
      "html_url": "https://github.com/kud1ing",
      "followers_url": "https://api.github.com/users/kud1ing/followers",
      "following_url": "https://api.github.com/users/kud1ing/following{/other_user}",
      "gists_url": "https://api.github.com/users/kud1ing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kud1ing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kud1ing/subscriptions",
      "organizations_url": "https://api.github.com/users/kud1ing/orgs",
      "repos_url": "https://api.github.com/users/kud1ing/repos",
      "events_url": "https://api.github.com/users/kud1ing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kud1ing/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-01-04T12:52:29Z",
    "updated_at": "2012-01-04T12:55:02Z",
    "body": "My naive defininition of \"pure\" is: \"a pure function can do whatever it wants, unless that impureness does not escape its scope\".\n- The block `{|elt| if (elt == 0) { cnt += 1u; }}` is not pure, since it affects state outside of its scope.\n-  \"count_zeroes()\" would still be pure, because its impure implentation does not escape its scope.\n\nDoes that make sense?\n\nOr simpler:\n\n```\npure fn a_number() -> uint {\n    let cnt = 0u;\n    cnt += 42u;\n    ret cnt;\n}\n```\n\nWould use state-manipulation internally, but it would not escape.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3354123/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3354145",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-3354145",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 3354145,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTQxNDU=",
    "user": {
      "login": "marijnh",
      "id": 144427,
      "node_id": "MDQ6VXNlcjE0NDQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marijnh",
      "html_url": "https://github.com/marijnh",
      "followers_url": "https://api.github.com/users/marijnh/followers",
      "following_url": "https://api.github.com/users/marijnh/following{/other_user}",
      "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions",
      "organizations_url": "https://api.github.com/users/marijnh/orgs",
      "repos_url": "https://api.github.com/users/marijnh/repos",
      "events_url": "https://api.github.com/users/marijnh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marijnh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-01-04T12:54:16Z",
    "updated_at": "2012-01-04T12:54:16Z",
    "body": "Sure that makes sense. _Formalizing_ that sensible definition is where the problem lies.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3354145/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3354336",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-3354336",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 3354336,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTQzMzY=",
    "user": {
      "login": "kud1ing",
      "id": 391975,
      "node_id": "MDQ6VXNlcjM5MTk3NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/391975?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kud1ing",
      "html_url": "https://github.com/kud1ing",
      "followers_url": "https://api.github.com/users/kud1ing/followers",
      "following_url": "https://api.github.com/users/kud1ing/following{/other_user}",
      "gists_url": "https://api.github.com/users/kud1ing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kud1ing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kud1ing/subscriptions",
      "organizations_url": "https://api.github.com/users/kud1ing/orgs",
      "repos_url": "https://api.github.com/users/kud1ing/repos",
      "events_url": "https://api.github.com/users/kud1ing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kud1ing/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-01-04T13:13:53Z",
    "updated_at": "2012-01-04T13:14:02Z",
    "body": "There seemed to be a paper \u201cGrafting Functional Support on Top of an Imperative Language\u201d by Andrei Alexandrescu on D's implementation of purity, but i can not find it.\n\nTheir definition of \"pure\" can be found here: http://www.d-programming-language.org/function.html\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3354336/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3377909",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-3377909",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 3377909,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNzc5MDk=",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-01-05T22:55:39Z",
    "updated_at": "2012-01-05T22:55:39Z",
    "body": "Marijn -- I'm confused about this comment \"I would prefer going back to a system where you can simply annotate a function that you want to use as a predicate as pure (or, preferably, pred), and give up on any checking of this purity.\" This is exactly what unchecked blocks do, which I added back in August or September. (I can't remember what the exact syntax we decided on was.) Or did those go away?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3377909/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3381744",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-3381744",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 3381744,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODE3NDQ=",
    "user": {
      "login": "marijnh",
      "id": 144427,
      "node_id": "MDQ6VXNlcjE0NDQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marijnh",
      "html_url": "https://github.com/marijnh",
      "followers_url": "https://api.github.com/users/marijnh/followers",
      "following_url": "https://api.github.com/users/marijnh/following{/other_user}",
      "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions",
      "organizations_url": "https://api.github.com/users/marijnh/orgs",
      "repos_url": "https://api.github.com/users/marijnh/repos",
      "events_url": "https://api.github.com/users/marijnh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marijnh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-01-06T07:44:57Z",
    "updated_at": "2012-01-06T07:44:57Z",
    "body": "We have unchecked blocks, but we also have an attempt at formal purity checking. I'm proposing we get rid of the second, since it's just annoying and broken, and just implicitly not check purity, just believing the programmer whenever he/she annotates a function as pure.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3381744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3388351",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-3388351",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 3388351,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODgzNTE=",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-01-06T18:16:56Z",
    "updated_at": "2012-01-06T18:16:56Z",
    "body": "I feel like we already discussed the \"get rid of purity checking\" possibility back in the summer when we were discussing these issues thoroughly -- has anything changed since then?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3388351/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3388466",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-3388466",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 3388466,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODg0NjY=",
    "user": {
      "login": "marijnh",
      "id": 144427,
      "node_id": "MDQ6VXNlcjE0NDQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marijnh",
      "html_url": "https://github.com/marijnh",
      "followers_url": "https://api.github.com/users/marijnh/followers",
      "following_url": "https://api.github.com/users/marijnh/following{/other_user}",
      "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions",
      "organizations_url": "https://api.github.com/users/marijnh/orgs",
      "repos_url": "https://api.github.com/users/marijnh/repos",
      "events_url": "https://api.github.com/users/marijnh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marijnh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-01-06T18:25:32Z",
    "updated_at": "2012-01-06T18:25:32Z",
    "body": "What was the conclusion of that discussion?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3388466/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3388647",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-3388647",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 3388647,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODg2NDc=",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-01-06T18:39:00Z",
    "updated_at": "2012-01-06T18:39:00Z",
    "body": "The conclusion was that it's important to give the programmer the freedom to choose to write their typestate predicates a restricted sublanguage that is statically guaranteed to be pure, because otherwise they're not getting strong guarantees from the compiler. At the same time, they also have the freedom to use unchecked blocks to say \"trust me\"; leaving purity checking in doesn't take away freedom from someone who _only_ wants to use the \"unchecked block\" option. They can just throw an unchecked block around all predicates.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3388647/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3600913",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-3600913",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 3600913,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDA5MTM=",
    "user": {
      "login": "ssylvan",
      "id": 1365415,
      "node_id": "MDQ6VXNlcjEzNjU0MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365415?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ssylvan",
      "html_url": "https://github.com/ssylvan",
      "followers_url": "https://api.github.com/users/ssylvan/followers",
      "following_url": "https://api.github.com/users/ssylvan/following{/other_user}",
      "gists_url": "https://api.github.com/users/ssylvan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ssylvan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ssylvan/subscriptions",
      "organizations_url": "https://api.github.com/users/ssylvan/orgs",
      "repos_url": "https://api.github.com/users/ssylvan/repos",
      "events_url": "https://api.github.com/users/ssylvan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ssylvan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-01-22T03:25:17Z",
    "updated_at": "2012-01-22T03:29:26Z",
    "body": "Would something like Haskell's ST monad help? Not necessarily explicitly using a monad of course (indeed, it would be ideal if you didn't even know this was going on under the covers!). \n\nThe general idea is that each mutable value would be tagged with a specific type variable (one that's \"fresh\" for the given \"pure\" function), and every time you do something with mutable variable you just thread this type variable through everything (making sure they match). Then at the end you strip it out in the \"runST\" call. Since the result value's type doesn't have access to this type variable, it couldn't posssibly contain any mutable references leaking side effects.\n\nMaybe typestate could be used to do the same kind of tracking (with modifications). They key point is that anything impure is associated with a fresh \"tag\" introduced by the \"pure\" annotation, and that you ensure that nothing tagged with this \"tag\" can escape the function, statically.\n\nBTW, this not only means you can modify local variables on the stack, you can modify local heap allocations too.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3600913/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5100689",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-5100689",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 5100689,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDA2ODk=",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-04-12T21:07:03Z",
    "updated_at": "2012-04-12T21:07:03Z",
    "body": "Assigning this to myself, but I don't think it's wise to spend time on it until we reach a clearer consensus about what we want in the long term w.r.t typestate and purity checking (if anything) -- see #2178.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5100689/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5528663",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-5528663",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 5528663,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1Mjg2NjM=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-05-05T17:04:12Z",
    "updated_at": "2012-05-05T17:04:12Z",
    "body": "as part of the borrowing check that I am working on, I have all the capabilities to solve this in a nice way (as I already have to know which data is interior to the stack frame and what is not).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5528663/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5528734",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-5528734",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 5528734,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1Mjg3MzQ=",
    "user": {
      "login": "ssylvan",
      "id": 1365415,
      "node_id": "MDQ6VXNlcjEzNjU0MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1365415?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ssylvan",
      "html_url": "https://github.com/ssylvan",
      "followers_url": "https://api.github.com/users/ssylvan/followers",
      "following_url": "https://api.github.com/users/ssylvan/following{/other_user}",
      "gists_url": "https://api.github.com/users/ssylvan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ssylvan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ssylvan/subscriptions",
      "organizations_url": "https://api.github.com/users/ssylvan/orgs",
      "repos_url": "https://api.github.com/users/ssylvan/repos",
      "events_url": "https://api.github.com/users/ssylvan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ssylvan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-05-05T17:12:04Z",
    "updated_at": "2012-05-05T17:12:04Z",
    "body": "It would be interesting to add some kind of warning about a function that's really pure not being marked as such. Then you can measure how many functions are really pure in a code base. If the pure to impure ratio on some real programs is more than, say, 50% (or even lower), maybe the modifier should be inverted so that pure is the default.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5528734/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5661374",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-5661374",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 5661374,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NjEzNzQ=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-05-11T21:12:49Z",
    "updated_at": "2012-05-11T21:12:49Z",
    "body": "you can now modify local state (that is, state which is uniquely tied to the current stack frame) in pure fns.  there is still the question of allowing pure fns to invoke closures and so forth---I think this is best addressed by an adapted version of the Lighweight Polymorphic Effects functions, which basically allow a function to be \"as pure as its argument closures are\"---but that seems like a separate issue.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5661374/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5667744",
    "html_url": "https://github.com/rust-lang/rust/issues/1422#issuecomment-5667744",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1422",
    "id": 5667744,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2Njc3NDQ=",
    "user": {
      "login": "kud1ing",
      "id": 391975,
      "node_id": "MDQ6VXNlcjM5MTk3NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/391975?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kud1ing",
      "html_url": "https://github.com/kud1ing",
      "followers_url": "https://api.github.com/users/kud1ing/followers",
      "following_url": "https://api.github.com/users/kud1ing/following{/other_user}",
      "gists_url": "https://api.github.com/users/kud1ing/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kud1ing/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kud1ing/subscriptions",
      "organizations_url": "https://api.github.com/users/kud1ing/orgs",
      "repos_url": "https://api.github.com/users/kud1ing/repos",
      "events_url": "https://api.github.com/users/kud1ing/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kud1ing/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-05-12T11:29:08Z",
    "updated_at": "2012-05-12T11:29:08Z",
    "body": "Great, thanks.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/5667744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
