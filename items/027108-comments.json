[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/122548199",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-122548199",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 122548199,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMjU0ODE5OQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-18T14:10:12Z",
    "updated_at": "2015-07-18T14:10:12Z",
    "body": ":+1: \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/122548199/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/122571618",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-122571618",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 122571618,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMjU3MTYxOA==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-18T17:52:00Z",
    "updated_at": "2015-07-18T17:52:00Z",
    "body": "I'm all for this change as long as it's benchmarked to not cause a noticeable regression. (I agree with your assessment that it shouldn't)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/122571618/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131196532",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-131196532",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 131196532,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMTE5NjUzMg==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-14T18:04:56Z",
    "updated_at": "2015-08-14T18:07:39Z",
    "body": "Hashing an strings of length n will be n + 1 bytes before and n + 8 bytes after. Siphash adds one byte and hashes in 8-byte blocks, so very short strings bumped up to the next size, using 2 \\* 2 + 4 = 8 siphash rounds vs. previous 2 \\* 1 + 4 = 6. I'm sure you can measure the difference.\n\nAlso, this is a change to what the `Hash` trait emits for `str`, so it's a breaking change no matter which hash function is used. I understand it can be a minor change, I think it's fine to change this in a new rust release.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/131196532/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/240347544",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-240347544",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 240347544,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MDM0NzU0NA==",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-08-17T08:30:39Z",
    "updated_at": "2016-08-17T08:30:39Z",
    "body": "This would be optimized if https://github.com/rust-lang/rfcs/pull/1666 is accepted.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/240347544/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/240392862",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-240392862",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 240392862,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MDM5Mjg2Mg==",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-08-17T12:11:06Z",
    "updated_at": "2016-08-17T12:11:06Z",
    "body": "@arthurprs I don\u2019t see how rust-lang/rfcs#1666 would have any bearing on this. All this should need is\n\n``` diff\ndiff --git a/src/libcore/hash/mod.rs b/src/libcore/hash/mod.rs\nindex 051eb97..85427d0 100644\n--- a/src/libcore/hash/mod.rs\n+++ b/src/libcore/hash/mod.rs\n@@ -328,8 +328,7 @@ mod impls {\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     impl Hash for str {\n         fn hash<H: Hasher>(&self, state: &mut H) {\n-            state.write(self.as_bytes());\n-            state.write_u8(0xff)\n+            self.as_bytes().hash(state)\n         }\n     }\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/240392862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/240395463",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-240395463",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 240395463,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MDM5NTQ2Mw==",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-08-17T12:24:59Z",
    "updated_at": "2016-08-17T12:25:59Z",
    "body": "Yes, but &[u8].hash() is internally\n\n```\n    #[stable(feature = \"rust1\", since = \"1.0.0\")]\n    impl<T: Hash> Hash for [T] {\n        fn hash<H: Hasher>(&self, state: &mut H) {\n            self.len().hash(state);\n            Hash::hash_slice(self, state)\n        }\n    }\n\n```\n\nAnd that `self.len().hash(state);` would be optimized to a single branch (or nothing at all if LLVM is that that) if the RFC is accepted.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/240395463/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/344837415",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-344837415",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 344837415,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDgzNzQxNQ==",
    "user": {
      "login": "dtolnay",
      "id": 1940490,
      "node_id": "MDQ6VXNlcjE5NDA0OTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dtolnay",
      "html_url": "https://github.com/dtolnay",
      "followers_url": "https://api.github.com/users/dtolnay/followers",
      "following_url": "https://api.github.com/users/dtolnay/following{/other_user}",
      "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions",
      "organizations_url": "https://api.github.com/users/dtolnay/orgs",
      "repos_url": "https://api.github.com/users/dtolnay/repos",
      "events_url": "https://api.github.com/users/dtolnay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dtolnay/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-16T07:21:47Z",
    "updated_at": "2017-11-16T07:21:47Z",
    "body": "I agree that it would be desirable for `str` and `[u8]` to hash the same. Does anyone have an estimate of the worst case, how much this would affect performance of realistic usage of hash map with string keys?",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/344837415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/344853453",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-344853453",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 344853453,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDg1MzQ1Mw==",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-16T08:42:25Z",
    "updated_at": "2017-11-16T08:42:25Z",
    "body": "We can always make &[u8] hash to be similar to &str (appending 0xFF) and not the other way around if any performance regression is a concern. It's purely implementation detail.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/344853453/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/344853694",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-344853694",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 344853694,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDg1MzY5NA==",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-16T08:43:26Z",
    "updated_at": "2017-11-16T08:43:26Z",
    "body": "My preliminary benchmarking of hashing `[u8]` and `str` shows no measurable difference on nightly-x86_64-pc-windows-msvc, regardless of data size (up to a test file of 3.2 megabytes)\u2014it\u2019s always well within \u03b5 (though admittedly \u03b5 is always at least \u2153 of the total) with one winning sometimes and the other other times. I therefore think we can make this change without concern.\r\n\r\nHere\u2019s one of my tests:\r\n\r\n```rust\r\n#![feature(test)]\r\n\r\nuse std::hash::Hash;\r\nuse std::collections::hash_map::DefaultHasher;\r\n\r\nextern crate test;\r\nuse test::Bencher;\r\n\r\n#[bench]\r\nfn hash_str(b: &mut Bencher) {\r\n    let mut hasher = DefaultHasher::new();\r\n    b.iter(|| {\r\n        include_str!(\"x.rs\").hash(&mut hasher);\r\n    });\r\n}\r\n\r\n#[bench]\r\nfn hash_bytes(b: &mut Bencher) {\r\n    let mut hasher = DefaultHasher::new();\r\n    b.iter(|| {\r\n        include_bytes!(\"x.rs\").hash(&mut hasher);\r\n    });\r\n}\r\n```\r\n\r\nI had been thinking of specializing the `[T]` implementation on all integer types, to make just one `write` call with the entire slice rather than one per element (as `Hash::hash_slice` does), but it looks like that may not be necessary; it may well be a zero-cost abstraction (though I haven\u2019t looked at the ASM produced). (I presume we\u2019re OK with libcore using specialization, seeing as it has `#![feature(specialization)]` in it.)",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/344853694/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/344854164",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-344854164",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 344854164,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDg1NDE2NA==",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-16T08:45:25Z",
    "updated_at": "2017-11-16T08:45:25Z",
    "body": "@arthurprs I presume the length thing is to help with types with few possibilities, e.g. zero-sized types, so that a two-element `[()]` is more likely to hash differently to a three-element `[()]`. It bears a certain resemblance to techniques to strengthen against length-extension attacks, also. Not sure whether it\u2019s useful in practice.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/344854164/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/344855237",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-344855237",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 344855237,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDg1NTIzNw==",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-16T08:50:06Z",
    "updated_at": "2017-11-16T08:50:20Z",
    "body": "There's definitely a difference, but you need to use very small sequences, from 0 to 17 bytes. It'll also differ among hashers depending on the internal block size. I have plenty of test code around, I'll compile a test for this in a bit.\r\n\r\n@chris-morgan Precisely, they use different techniques to achieve the same (prefixing the usize len / appending a 0xFF).",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/344855237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/344862201",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-344862201",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 344862201,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDg2MjIwMQ==",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-16T09:17:19Z",
    "updated_at": "2017-11-16T09:17:19Z",
    "body": "Fnv and others byte-at-a-time will take a sizeable hit.\r\n\r\nSiphash has an internal block size of 8 and it's more expensive overall so its less susceptible to the change.\r\n\r\n```\r\n\u279c  hash-rs git:(rfc-extend-hasher) \u2717 cargo benchcmp sip13::str_:: sip13::slice:: benches.txt\r\n name             sip13::str_:: ns/iter  sip13::slice:: ns/iter  diff ns/iter   diff % \r\n bytes_000000001  13 (76 MB/s)           15 (66 MB/s)                       2   15.38% \r\n bytes_000000002  13 (153 MB/s)          15 (133 MB/s)                      2   15.38% \r\n bytes_000000004  13 (307 MB/s)          13 (307 MB/s)                      0    0.00% \r\n bytes_000000007  18 (388 MB/s)          16 (437 MB/s)                     -2  -11.11% \r\n bytes_000000008  15 (533 MB/s)          16 (500 MB/s)                      1    6.67% \r\n bytes_000000009  16 (562 MB/s)          17 (529 MB/s)                      1    6.25% \r\n bytes_000000012  15 (800 MB/s)          16 (750 MB/s)                      1    6.67% \r\n bytes_000000016  16 (1000 MB/s)         18 (888 MB/s)                      2   12.50% \r\n bytes_000000017  17 (1000 MB/s)         19 (894 MB/s)                      2   11.76% \r\n\u279c  hash-rs git:(rfc-extend-hasher) \u2717 cargo benchcmp fnv::str_:: fnv::slice:: benches.txt\r\n name             fnv::str_:: ns/iter  fnv::slice:: ns/iter  diff ns/iter   diff % \r\n bytes_000000001  1 (1000 MB/s)        4 (250 MB/s)                     3  300.00% \r\n bytes_000000002  2 (1000 MB/s)        5 (400 MB/s)                     3  150.00% \r\n bytes_000000004  2 (2000 MB/s)        5 (800 MB/s)                     3  150.00% \r\n bytes_000000007  4 (1750 MB/s)        7 (1000 MB/s)                    3   75.00% \r\n bytes_000000008  3 (2666 MB/s)        8 (1000 MB/s)                    5  166.67% \r\n bytes_000000009  4 (2250 MB/s)        8 (1125 MB/s)                    4  100.00% \r\n bytes_000000012  5 (2400 MB/s)        10 (1200 MB/s)                   5  100.00% \r\n bytes_000000016  7 (2285 MB/s)        13 (1230 MB/s)                   6   85.71% \r\n bytes_000000017  9 (1888 MB/s)        13 (1307 MB/s)                   4   44.44%\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/344862201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/344897136",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-344897136",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 344897136,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDg5NzEzNg==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-16T11:34:48Z",
    "updated_at": "2017-11-16T11:34:48Z",
    "body": "Another real example of needing the length, tuples. They use no field separator themselves. We need to avoid hash dos with pairs of slices too.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/344897136/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345187102",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-345187102",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 345187102,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTE4NzEwMg==",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-17T09:12:37Z",
    "updated_at": "2017-11-17T09:12:37Z",
    "body": "We could make [u8] append a 0xFF like str, this will essentially guarantee no perf regressions. In _theory_ this could be a breaking change though.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345187102/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345205924",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-345205924",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 345205924,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTIwNTkyNA==",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-17T10:30:05Z",
    "updated_at": "2017-11-17T10:30:05Z",
    "body": "I return to what I suggested: specialisation of the implementation on `[T]` for all integer types? That resolves the perf issue in types like `[u8]`.\r\n\r\nI suppose it would also allow others to perform the same specialisation on their own integer newtype arrays if they really cared about it.\r\n\r\nI will also mention that `str` can reasonably be changed to use a length prefix rather than a 0xff suffix quite independently of this, by implementing that the fast way rather than saying \u201chash self.as_bytes()\u201d which can be the slow way.\r\n\r\n@arthurprs You\u2019d need to do that for all `[T]`, not just `[u8]`, because if you use trait objects you lose the specialisation. Not sure if that change would be ideal for arbitrary types or not.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345205924/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345209338",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-345209338",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 345209338,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTIwOTMzOA==",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-17T10:43:44Z",
    "updated_at": "2017-11-17T10:45:19Z",
    "body": "> I return to what I suggested: specialisation of the implementation on [T] for all integer types? That resolves the perf issue in types like [u8].\r\n\r\nI may be missing something here. Isn't that already done? https://github.com/rust-lang/rust/blob/b32267f2c1344d37c4aa30eccd5a9ab77642b3e6/src/libcore/hash/mod.rs#L559\r\n\r\nand the len prefix comes from https://github.com/rust-lang/rust/blob/b32267f2c1344d37c4aa30eccd5a9ab77642b3e6/src/libcore/hash/mod.rs#L647\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345209338/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345211606",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-345211606",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 345211606,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTIxMTYwNg==",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-17T10:52:52Z",
    "updated_at": "2017-11-17T10:52:52Z",
    "body": "@arthurprs I\u2019m talking about [the implementation of `Hash` for `[T]`](https://github.com/rust-lang/rust/blob/b32267f2c1344d37c4aa30eccd5a9ab77642b3e6/src/libcore/hash/mod.rs#L644-L650), not the `hash_slice` method on the implementations of `Hash` for integer types `T`.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345211606/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345227308",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-345227308",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 345227308,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTIyNzMwOA==",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-17T12:08:12Z",
    "updated_at": "2017-11-17T12:08:12Z",
    "body": "I fell we are talking about the same thing though. What are you proposing exactly?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345227308/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345431943",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-345431943",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 345431943,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTQzMTk0Mw==",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-18T10:03:30Z",
    "updated_at": "2017-11-18T10:05:03Z",
    "body": "I was proposing specializing the actual `Hash` implementation for `[T]` (`impl<T: Hash> Hash for [T]` \u2192 `default impl<T: Hash> Hash for [T]` plus the barrage of `impl Hash for [u8]` *et al.*); I had neglected to notice that the `Hash` implementations on those integer types already override the trait\u2019s default method for `hash_slice`, thus obviating specialization of the `[T]` implementation (which would be a legitimate approach these days, potentially even preferable to the `hash_slice` method; as `Hash` already can\u2019t be a trait object I see no downsides to it at a brief glance).\r\n\r\nOK, so `[u8]` and `str` *do* hash all of their data in just one call, leaving the difference as that of hashing a usize versus a u8. Correct?",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345431943/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345435432",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-345435432",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 345435432,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTQzNTQzMg==",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-18T11:15:16Z",
    "updated_at": "2017-11-18T11:15:16Z",
    "body": "> OK, so [u8] and str do hash all of their data in just one call, leaving the difference as that of hashing a usize versus a u8. Correct?\r\n\r\nExactly.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345435432/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345437526",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-345437526",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 345437526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTQzNzUyNg==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-18T11:56:50Z",
    "updated_at": "2017-11-18T12:07:03Z",
    "body": "@arthurprs appending 0xFF to [u8] is not protecting against manufactured collisions.\r\n\r\nExample:\r\n\r\n```rust\r\n// the 257 (&[u8], &[u8]) tuples here all hash the same way.\r\n// if hashing uses 0xFF-termination instead of length prefix.\r\nlet data = [0xFFu8; 256];\r\nlet mut map = HashSet::new();\r\nfor i in 0..data.len() + 1 { map.insert(data.split_at(i)); }\r\n```\r\n\r\nThe problem with this is that it gives an hash function indpendent way of generating arbitrarily many collisions, so it's the hash-dos problem, which we want to protect against by default, or at least when using the default hasher.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345437526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345437841",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-345437841",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 345437841,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTQzNzg0MQ==",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-18T12:02:51Z",
    "updated_at": "2017-11-18T12:02:51Z",
    "body": "My understanding is that the len prefix (slices) and 0xFF suffix (str) is added to prevent stuff like `(\"1\", \"\")` from hashing the same as `(\"\", \"1\")`. Not sure what's the name of that.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345437841/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345437892",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-345437892",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 345437892,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTQzNzg5Mg==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-18T12:03:45Z",
    "updated_at": "2017-11-18T12:06:20Z",
    "body": "That's the same as my split example. It's crucial that the 0xFF byte never appears in a str's representation. And it doesn't, by the utf-8 invariant.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345437892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/493972819",
    "html_url": "https://github.com/rust-lang/rust/issues/27108#issuecomment-493972819",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27108",
    "id": 493972819,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5Mzk3MjgxOQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-05-20T12:48:29Z",
    "updated_at": "2019-05-20T12:48:29Z",
    "body": "Triage: not aware of any changes here",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/493972819/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
