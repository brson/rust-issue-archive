[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160629655",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-160629655",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 160629655,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDYyOTY1NQ==",
    "user": {
      "login": "Geal",
      "id": 119296,
      "node_id": "MDQ6VXNlcjExOTI5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/119296?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Geal",
      "html_url": "https://github.com/Geal",
      "followers_url": "https://api.github.com/users/Geal/followers",
      "following_url": "https://api.github.com/users/Geal/following{/other_user}",
      "gists_url": "https://api.github.com/users/Geal/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Geal/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Geal/subscriptions",
      "organizations_url": "https://api.github.com/users/Geal/orgs",
      "repos_url": "https://api.github.com/users/Geal/repos",
      "events_url": "https://api.github.com/users/Geal/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Geal/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-30T13:41:35Z",
    "updated_at": "2015-11-30T13:41:35Z",
    "body": "@bluss provided a reduced test case: http://is.gd/0vOZs0\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160629655/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160637279",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-160637279",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 160637279,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDYzNzI3OQ==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-30T13:59:13Z",
    "updated_at": "2015-11-30T13:59:13Z",
    "body": "I'm pretty sure this is an LLVM/backend issue. LLVM's bounds-check removal analysis is really brittle. It's possible there's better flags we could be passing it to try to eliminate bounds checks. I seem to recall @huonw mentioning one once?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160637279/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160638389",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-160638389",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 160638389,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDYzODM4OQ==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-30T14:01:52Z",
    "updated_at": "2015-11-30T14:01:52Z",
    "body": "[This kind of thing (playground)](http://is.gd/GsYNhH) elides the bounds check for `input[i]` but not for `input[..i]`, which is mysterious.\n\n``` rust\npub fn split_at(input: &[u8]) -> &[u8] {\n    for i in 0..input.len() {\n        if input[i] == b' ' {\n            return &input[..i]\n        }\n    }\n    &[]\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160638389/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160675564",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-160675564",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 160675564,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDY3NTU2NA==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-30T16:16:52Z",
    "updated_at": "2015-11-30T16:16:52Z",
    "body": "LLVM removes the first bounds check, because that is the same as the loop condition, i.e. `i < input.len()`. But for the second bounds is `i <= input.len()`,  and LLVM only handles propagation in such cases if the value is compared to a constant, which is not the case here.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160675564/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160706443",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-160706443",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 160706443,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDcwNjQ0Mw==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-30T17:57:46Z",
    "updated_at": "2015-11-30T17:57:46Z",
    "body": "@dotdash That's unfortunate. Do you know if that is a reason for the original example too?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160706443/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160753361",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-160753361",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 160753361,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDc1MzM2MQ==",
    "user": {
      "login": "Keruspe",
      "id": 222942,
      "node_id": "MDQ6VXNlcjIyMjk0Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/222942?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Keruspe",
      "html_url": "https://github.com/Keruspe",
      "followers_url": "https://api.github.com/users/Keruspe/followers",
      "following_url": "https://api.github.com/users/Keruspe/following{/other_user}",
      "gists_url": "https://api.github.com/users/Keruspe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Keruspe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Keruspe/subscriptions",
      "organizations_url": "https://api.github.com/users/Keruspe/orgs",
      "repos_url": "https://api.github.com/users/Keruspe/repos",
      "events_url": "https://api.github.com/users/Keruspe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Keruspe/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-30T20:33:14Z",
    "updated_at": "2015-11-30T20:33:14Z",
    "body": "What could be the reason for llvm to keep bound checks when using nom but not when using chomp?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160753361/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160877686",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-160877686",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 160877686,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDg3NzY4Ng==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-01T06:58:15Z",
    "updated_at": "2015-12-01T06:58:15Z",
    "body": "@Geal could you provide the IR and the asm code for that function? I know the asm is in those pdfs, but I have a hard time reading that. You can get them with `--emit llvm-ir,asm` which should produce a `.ll` and a `.s` file. Thanks!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160877686/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160893498",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-160893498",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 160893498,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDg5MzQ5OA==",
    "user": {
      "login": "Geal",
      "id": 119296,
      "node_id": "MDQ6VXNlcjExOTI5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/119296?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Geal",
      "html_url": "https://github.com/Geal",
      "followers_url": "https://api.github.com/users/Geal/followers",
      "following_url": "https://api.github.com/users/Geal/following{/other_user}",
      "gists_url": "https://api.github.com/users/Geal/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Geal/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Geal/subscriptions",
      "organizations_url": "https://api.github.com/users/Geal/orgs",
      "repos_url": "https://api.github.com/users/Geal/repos",
      "events_url": "https://api.github.com/users/Geal/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Geal/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-01T08:32:37Z",
    "updated_at": "2015-12-01T08:32:37Z",
    "body": "@dotdash here: https://gist.github.com/Geal/e7ebe638862828420863\n\nIt might be slightly different, since I built with a more recent rustc (1.6.0-dev (4867df4a2 2015-11-29) ), but the performance is the same.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160893498/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160947121",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-160947121",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 160947121,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDk0NzEyMQ==",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-01T12:02:04Z",
    "updated_at": "2015-12-01T12:03:03Z",
    "body": "> I'm pretty sure this is an LLVM/backend issue. LLVM's bounds-check removal analysis is really brittle. It's possible there's better flags we could be passing it to try to eliminate bounds checks. I seem to recall @huonw mentioning one once?\n\nIRCE: https://github.com/rust-lang/rust/issues/22987\n\nhttp://llvm.org/docs/Frontend/PerformanceTips.html also says:\n\n> For languages with numerous rarely executed guard conditions (e.g. null checks, type checks, range checks) consider adding an extra execution or two of LoopUnswith and LICM to your pass order. The standard pass order, which is tuned for C and C++ applications, may not be sufficient to remove all dischargeable checks from loops.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/160947121/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/163594754",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-163594754",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 163594754,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MzU5NDc1NA==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-10T12:22:59Z",
    "updated_at": "2015-12-10T12:22:59Z",
    "body": "@Geal the remaining checks are the ones that check that start is less than or equal to end for the range. Due to the the ranges including the end, that makes the actual bounds check go away. What I wonder is why there is a check that compares against 2 here: https://gist.github.com/Geal/e7ebe638862828420863#file-nom_http-ll-L216\n\nI can't seem to figure out to which part of the code that belongs. Any idea?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/163594754/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/249358216",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-249358216",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 249358216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0OTM1ODIxNg==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-24T10:40:55Z",
    "updated_at": "2016-10-03T02:56:25Z",
    "body": "Triage: rustc 1.13.0-nightly (4f9812a59 2016-09-21)\n- All three test cases in https://github.com/rust-lang/rust/issues/30112#issuecomment-160629655 **still have** bounds checks\n\n``` rust\n#![crate_type=\"lib\"]\n\npub fn split_to(input: &[u8]) -> &[u8] {\n    match input.iter().position(|x| *x == b' ') {\n        Some(i) => &input[..i],\n        None => &[],\n    }\n}\n\npub fn split_from(input: &[u8]) -> &[u8] {\n    match input.iter().position(|x| *x == b' ') {\n        Some(i) => &input[i..],\n        None => &[],\n    }\n}\n\npub fn find(input: &[u8]) -> Option<&u8> {\n    match input.iter().position(|x| *x == b' ') {\n        Some(i) => Some(&input[i]),\n        None => None,\n    }\n}\n```\n- The test case in https://github.com/rust-lang/rust/issues/30112#issuecomment-160638389 **elides** the bounds check. Not in stable, but current beta and nightly.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/249358216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/249358309",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-249358309",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 249358309,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0OTM1ODMwOQ==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-24T10:43:46Z",
    "updated_at": "2016-09-24T10:43:46Z",
    "body": "The optimizer likes the indices best at this point. No bounds checks here (beta & nightly)\n\n``` rust\npub fn split_to(input: &[u8]) -> &[u8] {\n    match (0..input.len()).find(|&i| input[i] == b' ') {\n        Some(i) => &input[..i],\n        None => &[],\n    }\n}\n```\n\nOptimization is simple: The range ensures `i < input.len()`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/249358309/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/472101249",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-472101249",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 472101249,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MjEwMTI0OQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-12T17:28:15Z",
    "updated_at": "2019-03-12T17:28:15Z",
    "body": "Triage: I'm not great with asm, but https://godbolt.org/z/wj6kYl\r\n\r\nIt appears that `split_to` is partially unrolled in today's nightly, but still checks the bounds. split_to2, like was said above, compiles to very straightforward code with no checks.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/472101249/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/906565957",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-906565957",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 906565957,
    "node_id": "IC_kwDOAAsO6M42CRlF",
    "user": {
      "login": "EgorBo",
      "id": 523221,
      "node_id": "MDQ6VXNlcjUyMzIyMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/523221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EgorBo",
      "html_url": "https://github.com/EgorBo",
      "followers_url": "https://api.github.com/users/EgorBo/followers",
      "following_url": "https://api.github.com/users/EgorBo/following{/other_user}",
      "gists_url": "https://api.github.com/users/EgorBo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EgorBo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EgorBo/subscriptions",
      "organizations_url": "https://api.github.com/users/EgorBo/orgs",
      "repos_url": "https://api.github.com/users/EgorBo/repos",
      "events_url": "https://api.github.com/users/EgorBo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EgorBo/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-08-26T16:34:38Z",
    "updated_at": "2021-10-02T21:39:38Z",
    "body": "https://godbolt.org/z/Wb46fYsPK\r\n\r\nIf I understand it correctly - after I altered the default order of LLVM passes and inserted IRCE there (I also added additional LICM and unswitch if I remember correctly - I just followed [Pass Ordering](https://llvm.org/docs/Frontend/PerformanceTips.html#pass-ordering) tips.) it managed to \"clone\" the loop and have a fast loop where it doesn't poll for bounds checks \ud83d\ude0f \r\n\r\n![image](https://user-images.githubusercontent.com/523221/131004658-490c7c7b-b358-458f-9ad0-9b7a7520da0d.png)\r\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/906565957/reactions",
      "total_count": 4,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1193072445",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-1193072445",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 1193072445,
    "node_id": "IC_kwDOAAsO6M5HHNc9",
    "user": {
      "login": "saethlin",
      "id": 12105168,
      "node_id": "MDQ6VXNlcjEyMTA1MTY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/12105168?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saethlin",
      "html_url": "https://github.com/saethlin",
      "followers_url": "https://api.github.com/users/saethlin/followers",
      "following_url": "https://api.github.com/users/saethlin/following{/other_user}",
      "gists_url": "https://api.github.com/users/saethlin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saethlin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saethlin/subscriptions",
      "organizations_url": "https://api.github.com/users/saethlin/orgs",
      "repos_url": "https://api.github.com/users/saethlin/repos",
      "events_url": "https://api.github.com/users/saethlin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saethlin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-07-23T06:40:56Z",
    "updated_at": "2022-07-23T06:40:56Z",
    "body": "Looks to me like all the bounds checks in the original examples are gone now: https://godbolt.org/z/fcexGna7s",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1193072445/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1831307640",
    "html_url": "https://github.com/rust-lang/rust/issues/30112#issuecomment-1831307640",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30112",
    "id": 1831307640,
    "node_id": "IC_kwDOAAsO6M5tJ4l4",
    "user": {
      "login": "workingjubilee",
      "id": 46493976,
      "node_id": "MDQ6VXNlcjQ2NDkzOTc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46493976?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/workingjubilee",
      "html_url": "https://github.com/workingjubilee",
      "followers_url": "https://api.github.com/users/workingjubilee/followers",
      "following_url": "https://api.github.com/users/workingjubilee/following{/other_user}",
      "gists_url": "https://api.github.com/users/workingjubilee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/workingjubilee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/workingjubilee/subscriptions",
      "organizations_url": "https://api.github.com/users/workingjubilee/orgs",
      "repos_url": "https://api.github.com/users/workingjubilee/repos",
      "events_url": "https://api.github.com/users/workingjubilee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/workingjubilee/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-11-29T06:42:38Z",
    "updated_at": "2023-11-29T06:42:38Z",
    "body": "Thanks for checking! I think this can be closed then?",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1831307640/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
