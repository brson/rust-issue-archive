[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40160097",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-40160097",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 40160097,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMTYwMDk3",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-11T00:33:45Z",
    "updated_at": "2014-04-11T00:33:45Z",
    "body": "Why is \"sharing AST nodes is bad for the various analysis passes\"?\n\nThe justification for a smart pointer here seems pretty weak to me. The biggest advantage, that it's immutable, is easily solved by immutably rooting the entire AST.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40160097/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40160139",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-40160139",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 40160139,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMTYwMTM5",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-11T00:34:24Z",
    "updated_at": "2014-04-11T00:34:24Z",
    "body": "That said, I don't strongly oppose `P`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40160139/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40173230",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-40173230",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 40173230,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMTczMjMw",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-11T06:02:17Z",
    "updated_at": "2014-04-11T06:03:33Z",
    "body": "@brson I need to expand on that - if you have sharing, you can trivially bypass, say, borrock, and create an unsafe program without the `unsafe` keyword. I can't demo this because of all the folding passes that   deduplicate such nodes (macro expansion used to produce them).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40173230/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40465232",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-40465232",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 40465232,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDY1MjMy",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-15T10:09:17Z",
    "updated_at": "2014-04-15T10:09:17Z",
    "body": "OK, it took me a while to understand your point about sharing, but I think @eddyb you are saying: if the AST is not a tree but a DAG, that'd be bad, and hence `@T` is bad, because it permits a DAG?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40465232/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40465281",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-40465281",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 40465281,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDY1Mjgx",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-15T10:09:50Z",
    "updated_at": "2014-04-15T10:09:50Z",
    "body": "If that is what you are saying, I certainly agree, we want the AST to be a tree, and I can see that it's beneficial to choose types that enforce that.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40465281/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40465323",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-40465323",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 40465323,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDY1MzIz",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-15T10:10:25Z",
    "updated_at": "2014-04-15T10:10:25Z",
    "body": "(Though I think the current pass which deduplicates and assigns indices is not a terrible thing.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40465323/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40465649",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-40465649",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 40465649,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDY1NjQ5",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-15T10:14:04Z",
    "updated_at": "2014-04-15T10:14:04Z",
    "body": "All that said, I think that overall I still prefer the (more radical) idea of changing the AST into an array and making pointers into newtype'd indices into the array. This does not address your concern about enforcing the tree requirements, nor does it necessarily provide the ability for the folder to reuse memory, but it does address a lot of other nice things:\n- AST map goes away\n- It's easy to see how we can pass \"pointers\" to an AST node wherever we want them\n- We don't need to store indices in the tree or ever do a renumbering, the numbering is implicit\n\nDo you have any kind of measurements suggesting that folding is a significant part of our execution time? I don't recall ever getting that impression from profiles.\n\n(Under your scheme here, one solution to the AST map would be to allocate the `P<>` nodes in an arena, in which case the AST map could store `&'ast P<>` pointers.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40465649/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40471522",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-40471522",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 40471522,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDcxNTIy",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-15T11:35:12Z",
    "updated_at": "2014-04-15T11:35:12Z",
    "body": "Folding doesn't take that much time, maybe a couple seconds here (the simplistic in-place implementation halves that time).\nIn-place folding does, however, reduce temporary heap pressure (and we maybe get 100MB less in the trans peak just from not repeatedly allocating and freeing nodes during folding).\n\nYes, an arena would work for the AST map, though I would've preferred a \"stable vector\" of inlined items, alongside the crate. Those form the roots of the AST forest that we map, anything they point to will have the same lifetime.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40471522/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42081638",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-42081638",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 42081638,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMDgxNjM4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-02T21:36:47Z",
    "updated_at": "2014-05-02T21:36:47Z",
    "body": "Closing due to inactivity, but feel free to reopen with a rebase! This looks like it may have significant wins, and I'd love to see those wins in rustc! (trying to keep the queue size down for now).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42081638/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43447746",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-43447746",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 43447746,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDQ3NzQ2",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-18T18:45:19Z",
    "updated_at": "2014-05-18T18:45:19Z",
    "body": "Reopening at @eddyb's request.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43447746/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43456927",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-43456927",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 43456927,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDU2OTI3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-18T23:28:13Z",
    "updated_at": "2014-05-18T23:28:13Z",
    "body": "I've canceled the build for this. There appears to not be a lot of discussion on this PR about this, and I'm unaware of other discussion that has happened through other channels. This is a massive change to the AST, and I want to make sure that this it the right direction we want to go in before committing to this.\n\nI don't want to block this longer, I just want to make sure that there's enough consensus that we want to go in this direction. I like the idea here, but I don't see any data supporting this change and why it should be made (although it sounds like in-place folding is more efficient).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43456927/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43456977",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-43456977",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 43456977,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDU2OTc3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-18T23:30:25Z",
    "updated_at": "2014-05-18T23:30:25Z",
    "body": "Additionally, this seems pretty radical from what we're already doing, and perhaps different from what one may expect. Is there documentation in the code about the rationale for a design such as this? I looked in `ptr.rs` but found no documentation.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43456977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43463636",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-43463636",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 43463636,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDYzNjM2",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-19T03:29:39Z",
    "updated_at": "2014-05-19T03:29:39Z",
    "body": "To me, this is a simple refactor from `@` to a non-`@` type (`Gc` doesn't count, because it's still `@`). It uses `P` rather than hard-coding a specific type to make it easier to experiment.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43463636/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43463990",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-43463990",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 43463990,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDYzOTkw",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-19T03:42:03Z",
    "updated_at": "2014-05-19T03:42:03Z",
    "body": "And this doesn't seem like that big of a change, mostly just fallout. Until we move to a different AST represention entirely (#7929 has some ideas), this seems pretty benign.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43463990/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43498241",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-43498241",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 43498241,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDk4MjQx",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-19T12:58:15Z",
    "updated_at": "2014-05-19T12:59:05Z",
    "body": "Ok, I think I've glanced over the whole thing:\n- I'm concerned by the work-arounds for #13703, they seem to be fine, but... `unsafe`/`transmute` is always sad.\n- I'm doubly-concerned by the current implementation of in-place mapping.\n- There's also the introduction of a swathe of new raw pointers.\n- I found one typo (had written `true` when `false` was what was in the old code); with a patch this size, there may be more that I missed.\n- @cmr: if you're set up for it, making a memory profile of this would be interesting.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43498241/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43520662",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-43520662",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 43520662,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTIwNjYy",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-19T15:43:59Z",
    "updated_at": "2014-05-19T15:43:59Z",
    "body": "Should add a test for whatever that true/false thing broke. I can't really do any memory benches right now, but the last time I took one this was not a huge win.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43520662/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43530999",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-43530999",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 43530999,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTMwOTk5",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-19T17:14:19Z",
    "updated_at": "2014-05-19T17:14:19Z",
    "body": "The true/false thing didn't break anything because it marked trait method definitions without a body (non-default methods) as an inlined item.\nSince it's not something that can be instantiated, there is no real damage or associated test.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43530999/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43700904",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-43700904",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 43700904,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzAwOTA0",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-21T00:46:11Z",
    "updated_at": "2014-05-21T00:46:11Z",
    "body": "I wonder if we can escape some unsafety with something like\n\n``` rust\nimpl<T> RefCell<T> {\n    /// Take a borrow that's \"permanent\", i.e. no further mutable borrows\n    /// will be permitted after this call.\n    ///\n    /// This provides a borrow that lasts as long as the RefCell (unlike\n    /// .borrow(), which is restricted to the scope of the returned Ref).\n    fn perma_borrow<'a>(&'a self) -> &'a T {\n        // take an immutable borrow, setting the BorrowFlag without ever\n        // cleaning it up\n        match self.borrow() {\n            WRITING => fail!(...),\n            borrow => {\n                self.borrow.set(borrow + 1);\n                unsafe { &*self.value.get() }\n            }\n        }\n    }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43700904/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43703213",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-43703213",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 43703213,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzAzMjEz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-21T01:31:50Z",
    "updated_at": "2014-05-21T01:31:50Z",
    "body": "There are still 8 separate unsafe blocks being introduced as part of this. Some of them are annotated with #13703, but this sounds like a subtle issue and I would be wary to rely on it being fixed to make code safe without having the issue fixed itself.\n\nOther unsafe blocks are allowing references to escape a `RefCell` and dealing with inlined items.\n\nWhy do these sources of unsafeness exist? Shouldn't using `Rc<T>` for `P` obviate the need for all unsafe code?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/43703213/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45827874",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-45827874",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 45827874,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODI3ODc0",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-12T04:00:26Z",
    "updated_at": "2014-06-12T04:00:26Z",
    "body": "I'm sorry this branch didn't work out @eddyb.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45827874/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45833470",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-45833470",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 45833470,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODMzNDcw",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-12T06:11:48Z",
    "updated_at": "2014-06-12T06:11:48Z",
    "body": "Well, one day we will have to remove `@T` completely, not just pretend to, and it's not like monthly rebases are impossible :).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/45833470/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54772121",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-54772121",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 54772121,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NzcyMTIx",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-08T02:53:44Z",
    "updated_at": "2014-09-08T02:53:44Z",
    "body": "@brson I'm sorry I couldn't keep my word, but here it is.\nPerfectly safe `ast_map` without shared ownership.\nThe only `unsafe` added in the entire PR are for in-place folding - the `Vec` one should be part of std IMO.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54772121/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54772352",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-54772352",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 54772352,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NzcyMzUy",
    "user": {
      "login": "tomjakubowski",
      "id": 667901,
      "node_id": "MDQ6VXNlcjY2NzkwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/667901?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tomjakubowski",
      "html_url": "https://github.com/tomjakubowski",
      "followers_url": "https://api.github.com/users/tomjakubowski/followers",
      "following_url": "https://api.github.com/users/tomjakubowski/following{/other_user}",
      "gists_url": "https://api.github.com/users/tomjakubowski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tomjakubowski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tomjakubowski/subscriptions",
      "organizations_url": "https://api.github.com/users/tomjakubowski/orgs",
      "repos_url": "https://api.github.com/users/tomjakubowski/repos",
      "events_url": "https://api.github.com/users/tomjakubowski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tomjakubowski/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-08T02:59:09Z",
    "updated_at": "2014-09-08T02:59:09Z",
    "body": "There's an open PR for in-place map (that also allows for mapping `T -> U` where `U` and `T` are the same size) https://github.com/rust-lang/rust/pull/16853\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54772352/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55299154",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-55299154",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 55299154,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1Mjk5MTU0",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-11T17:32:57Z",
    "updated_at": "2014-09-11T17:32:57Z",
    "body": "It seems this PR is the only one not failing on Travis.\nI can't help but wonder how many bugs `@T` still has...\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55299154/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55302023",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-55302023",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 55302023,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MzAyMDIz",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-11T17:52:45Z",
    "updated_at": "2014-09-11T18:05:11Z",
    "body": "This seems to have worked out beautifully. Thanks, @eddyb.\n\nI r+'d this on the notion that the cleanup is a win no matter what, allowing us to purge `Gc`, but some indication of the performance/memory changes here would be nice.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55302023/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55302109",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-55302109",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 55302109,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MzAyMTA5",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-11T17:53:22Z",
    "updated_at": "2014-09-11T17:53:22Z",
    "body": ":heart_eyes: \n\nSo psyched for this. Purge the `Gc<T>`!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55302109/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55524357",
    "html_url": "https://github.com/rust-lang/rust/pull/13316#issuecomment-55524357",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13316",
    "id": 55524357,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NTI0MzU3",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-14T12:41:06Z",
    "updated_at": "2014-09-14T22:30:45Z",
    "body": "There are only two uses of `@T`/`Gc<T>` left in the compiler (and both of them need to be `Copy`, so just using `Rc` is unacceptable).\nOne is in `syntax::codemap::Span` for `expn_info` (see #15594 - an integer instead of a pointer should work).\nThe other one is in `rustc::middle::def::Def`'s `DefUpvar` variant. I believe that it just wraps `DefLocal | DefArg | DefBinding` and only the number of \"wraps\" matters, the extra information being redundant.\nI will experiment with `Def` for now (**EDIT**: done, see #17259).\nIf you want to help remove `Gc` from `Span` or the hundreds of tests abusing it, please drop by in IRC and ping me (`eddyb`).\n\n---\n\nThanks everyone for your help in making this happen, and @nikomatsakis for #16453 (which arrived just when I finally had time to work on Rust again).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55524357/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
