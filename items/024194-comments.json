[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90942840",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-90942840",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 90942840,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkwOTQyODQw",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-08T15:02:07Z",
    "updated_at": "2015-04-08T15:02:07Z",
    "body": "hmmm, I'm not so sure if it's a regression. It still works for vectors: http://is.gd/yNAFF6 . Maybe it never worked for boxes?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90942840/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221403773",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-221403773",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 221403773,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTQwMzc3Mw==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-24T21:16:00Z",
    "updated_at": "2016-05-24T21:16:00Z",
    "body": "So, where do we go with this ticket? Was/is this a regression? is it worth tracking?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221403773/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221431443",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-221431443",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 221431443,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTQzMTQ0Mw==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-24T23:23:52Z",
    "updated_at": "2016-05-24T23:23:52Z",
    "body": "@steveklabnik Probably a regression from when we moved from actual zeroing-drop to using the non-zero drop pattern. The check for that pattern basically says \"leak this if the adress matches the drop pattern\", so LLVM cannot remove the allocation because that would change semantics. Dynamic drop will fix this, and I think we should keep this open to track that, just to make sure.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221431443/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284178727",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-284178727",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 284178727,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDE3ODcyNw==",
    "user": {
      "login": "wesleywiser",
      "id": 831192,
      "node_id": "MDQ6VXNlcjgzMTE5Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/831192?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wesleywiser",
      "html_url": "https://github.com/wesleywiser",
      "followers_url": "https://api.github.com/users/wesleywiser/followers",
      "following_url": "https://api.github.com/users/wesleywiser/following{/other_user}",
      "gists_url": "https://api.github.com/users/wesleywiser/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wesleywiser/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wesleywiser/subscriptions",
      "organizations_url": "https://api.github.com/users/wesleywiser/orgs",
      "repos_url": "https://api.github.com/users/wesleywiser/repos",
      "events_url": "https://api.github.com/users/wesleywiser/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wesleywiser/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-04T20:31:14Z",
    "updated_at": "2017-03-04T20:31:14Z",
    "body": "This appears to be fixed: https://is.gd/kT0Gs9 Is this worth creating some kind of regression test for? ",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284178727/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284190525",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-284190525",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 284190525,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDE5MDUyNQ==",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-04T22:49:45Z",
    "updated_at": "2017-03-04T22:49:45Z",
    "body": "We could test it by adding a run pass test that uses a custom allocator (which doesn't allocate, but panics).",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284190525/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284192255",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-284192255",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 284192255,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDE5MjI1NQ==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-04T23:20:43Z",
    "updated_at": "2017-03-04T23:20:43Z",
    "body": "tentatively needstest, then. Maybe a src/test/codegen test?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284192255/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/303190435",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-303190435",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 303190435,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzE5MDQzNQ==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-22T19:01:11Z",
    "updated_at": "2017-05-22T19:01:11Z",
    "body": "Seems to not work again on nightly.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/303190435/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/303229658",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-303229658",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 303229658,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzIyOTY1OA==",
    "user": {
      "login": "est31",
      "id": 8872119,
      "node_id": "MDQ6VXNlcjg4NzIxMTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/est31",
      "html_url": "https://github.com/est31",
      "followers_url": "https://api.github.com/users/est31/followers",
      "following_url": "https://api.github.com/users/est31/following{/other_user}",
      "gists_url": "https://api.github.com/users/est31/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/est31/subscriptions",
      "organizations_url": "https://api.github.com/users/est31/orgs",
      "repos_url": "https://api.github.com/users/est31/repos",
      "events_url": "https://api.github.com/users/est31/events{/privacy}",
      "received_events_url": "https://api.github.com/users/est31/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-22T21:50:25Z",
    "updated_at": "2017-05-22T21:50:25Z",
    "body": "I've used @Mark-Simulacrum 's bisection tool to find out the regressing commit. It was the LLVM 4.0 upgrade, commit 0777c757a6832dc5f8f218377f99960f5477311f .",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/303229658/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/305546454",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-305546454",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 305546454,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTU0NjQ1NA==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-06-01T16:24:28Z",
    "updated_at": "2017-06-01T16:24:28Z",
    "body": "Assigning myself just so it stays on my to-do list. Not immediately working on it, though. Feel free to take over if you want.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/305546454/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/305546904",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-305546904",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 305546904,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTU0NjkwNA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-06-01T16:26:03Z",
    "updated_at": "2017-06-01T16:26:03Z",
    "body": "Historically this optimization was done by https://github.com/rust-lang/llvm/commit/4daef480d1241d040a247440d24013cbdeb741e7 but this commit was not carried forward to our [current branch](https://github.com/rust-lang/llvm/commits/rust-llvm-2017-04-13) when the 4.0 upgrade was done because it no longer applies cleanly (IIRC)",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/305546904/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/305981742",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-305981742",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 305981742,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTk4MTc0Mg==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-06-03T15:25:09Z",
    "updated_at": "2017-06-03T15:25:09Z",
    "body": "Sadly, I couldn\u2019t make the patch above to work. In fact, some testing seems to indicate that the responsibility for eliding allocations has been moved out of LLVM into clang.\r\n\r\nNamely, code like this\r\n\r\n```\r\n#include<stdlib.h>\r\nvoid wowzers(int y) {\r\n    void *z = malloc(y);\r\n    if(z != NULL) free(z);\r\n}\r\n```\r\n\r\nwhen compiled with `clang test.c -emit-llvm -S -O3 -fno-builtin` (clang version being 4.0) has the allocations in the produced IR\r\n\r\n```\r\n; Function Attrs: nounwind sspstrong uwtable\r\ndefine void @wowzers(i32) local_unnamed_addr #0 {\r\n  %2 = zext i32 %0 to i64\r\n  %3 = tail call noalias i8* @malloc(i64 %2) #2\r\n  %4 = icmp eq i8* %3, null\r\n  br i1 %4, label %6, label %5\r\n; <label>:5:                                      ; preds = %1\r\n  tail call void @free(i8* nonnull %3) #2\r\n  br label %6\r\n; <label>:6:                                      ; preds = %1, %5\r\n  ret void\r\n}\r\n```\r\n\r\nwhereas if the special handling of the built-ins is not disabled (i.e. without `-fno-builtin`), it compiles to a `ret void` even with `-O0`.\r\n\r\nThis seems to suggest to me that, unless we do some serious patchwork on LLVM (pretty sure we don\u2019t want to do that), it falls onto rustc to optimise out heap allocations now.\r\n\r\nThis could also very well be a bug. I have a test case on hand that does optimise out on 3.9 but not on 4.0. I might do a bisection.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/305981742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/305984642",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-305984642",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 305984642,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTk4NDY0Mg==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-06-03T16:10:54Z",
    "updated_at": "2017-06-03T16:10:54Z",
    "body": "Okay, never mind. I got it to work.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/305984642/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/308791157",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-308791157",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 308791157,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwODc5MTE1Nw==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-06-15T16:14:42Z",
    "updated_at": "2017-06-15T16:14:42Z",
    "body": "The LLVM upgrade reintroduces optimisation for _rust_allocate, but the optimisation for __rust_allocate_zeroed was backed out due to weird UB-like behaviour with bitvec iterators in rustc_data_structures.\r\n\r\nShould investigate eventually. Assigning myself.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/308791157/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/308791300",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-308791300",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 308791300,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwODc5MTMwMA==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-06-15T16:15:04Z",
    "updated_at": "2017-06-15T16:15:04Z",
    "body": "cc @arielb1 you were interested in this yesterday.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/308791300/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317261259",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-317261259",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 317261259,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzI2MTI1OQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-23T15:31:40Z",
    "updated_at": "2017-07-23T15:31:40Z",
    "body": "I believe this is no longer a regression, so untagging as a regression.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317261259/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/377912330",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-377912330",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 377912330,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzkxMjMzMA==",
    "user": {
      "login": "nox",
      "id": 123095,
      "node_id": "MDQ6VXNlcjEyMzA5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/123095?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nox",
      "html_url": "https://github.com/nox",
      "followers_url": "https://api.github.com/users/nox/followers",
      "following_url": "https://api.github.com/users/nox/following{/other_user}",
      "gists_url": "https://api.github.com/users/nox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nox/subscriptions",
      "organizations_url": "https://api.github.com/users/nox/orgs",
      "repos_url": "https://api.github.com/users/nox/repos",
      "events_url": "https://api.github.com/users/nox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nox/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-02T11:37:29Z",
    "updated_at": "2018-04-02T11:37:29Z",
    "body": "It's not very clear to me whether this is still actionable. The original snippet doesn't seem to be misoptimised anymore. Can someone produce a new snippet that demonstrates the continued existence of the issue? Should the issue be closed?\r\n\r\nCc @rust-lang/wg-codegen ",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/377912330/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378183387",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-378183387",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 378183387,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODE4MzM4Nw==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-03T09:13:40Z",
    "updated_at": "2018-04-03T09:13:40Z",
    "body": "This should stay open as only a handful of alllocating functions are\ncurrently handled (i.e. malloc equivalent but not realloc IIRC).\n\nOn Mon, Apr 2, 2018, 14:37 Anthony Ramine <notifications@github.com> wrote:\n\n> It's not very clear to me whether this is still actionable. The original\n> snippet doesn't seem to be misoptimised anymore. Can someone produce a new\n> snippet that demonstrates the continued existence of the issue? Should the\n> issue be closed?\n>\n> Cc @rust-lang/wg-codegen\n> <https://github.com/orgs/rust-lang/teams/wg-codegen>\n>\n> \u2014\n> You are receiving this because you modified the open/close state.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/rust-lang/rust/issues/24194#issuecomment-377912330>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AApc0mikNK6SdwDWKu-Gccdw9qaNIrHUks5tkg2RgaJpZM4D8f_0>\n> .\n>\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378183387/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378183765",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-378183765",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 378183765,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODE4Mzc2NQ==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-03T09:15:03Z",
    "updated_at": "2018-04-03T09:15:03Z",
    "body": "Or was it calloc-equivalent.\n\nOn Tue, Apr 3, 2018, 12:13 Simonas Kazlauskas <s@kazlauskas.me> wrote:\n\n> This should stay open as only a handful of alllocating functions are\n> currently handled (i.e. malloc equivalent but not realloc IIRC).\n>\n> On Mon, Apr 2, 2018, 14:37 Anthony Ramine <notifications@github.com>\n> wrote:\n>\n>> It's not very clear to me whether this is still actionable. The original\n>> snippet doesn't seem to be misoptimised anymore. Can someone produce a new\n>> snippet that demonstrates the continued existence of the issue? Should the\n>> issue be closed?\n>>\n>> Cc @rust-lang/wg-codegen\n>> <https://github.com/orgs/rust-lang/teams/wg-codegen>\n>>\n>> \u2014\n>> You are receiving this because you modified the open/close state.\n>> Reply to this email directly, view it on GitHub\n>> <https://github.com/rust-lang/rust/issues/24194#issuecomment-377912330>,\n>> or mute the thread\n>> <https://github.com/notifications/unsubscribe-auth/AApc0mikNK6SdwDWKu-Gccdw9qaNIrHUks5tkg2RgaJpZM4D8f_0>\n>> .\n>>\n>\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378183765/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378186871",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-378186871",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 378186871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODE4Njg3MQ==",
    "user": {
      "login": "nox",
      "id": 123095,
      "node_id": "MDQ6VXNlcjEyMzA5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/123095?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nox",
      "html_url": "https://github.com/nox",
      "followers_url": "https://api.github.com/users/nox/followers",
      "following_url": "https://api.github.com/users/nox/following{/other_user}",
      "gists_url": "https://api.github.com/users/nox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nox/subscriptions",
      "organizations_url": "https://api.github.com/users/nox/orgs",
      "repos_url": "https://api.github.com/users/nox/repos",
      "events_url": "https://api.github.com/users/nox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nox/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-03T09:25:41Z",
    "updated_at": "2018-04-03T09:25:41Z",
    "body": "@nagisa Any snippet demonstrating the issue?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378186871/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378202846",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-378202846",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 378202846,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODIwMjg0Ng==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-03T10:24:59Z",
    "updated_at": "2018-04-03T10:24:59Z",
    "body": "```rust\r\n#![feature(allocator_api)]\r\nuse std::heap::{Heap, Layout, Alloc};\r\n\r\npub unsafe fn alloc_zeroed_doesnt_optimise() {\r\n    let _ = Heap.alloc_zeroed(Layout::from_size_align_unchecked(4, 8));\r\n}\r\n\r\nextern \"C\" {\r\n    fn foo(x: *mut u8);\r\n}\r\n\r\npub unsafe fn alloc_zeroed_should_optimise_rezeroing() {\r\n    let a = Heap.alloc_zeroed(Layout::from_size_align_unchecked(16, 8)).unwrap();\r\n    let slc = ::std::slice::from_raw_parts_mut(a, 16);\r\n    for i in slc.iter_mut() {\r\n        *i = 0;\r\n    }\r\n    foo(slc.as_mut_ptr());\r\n}\r\n```",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378202846/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/402754480",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-402754480",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 402754480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjc1NDQ4MA==",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-07-05T15:07:48Z",
    "updated_at": "2018-07-05T15:07:48Z",
    "body": "For searchability purposes, the functions are now called `__rust_alloc_zeroed` and `__rust_dealloc`.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/402754480/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/402754966",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-402754966",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 402754966,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMjc1NDk2Ng==",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-07-05T15:09:17Z",
    "updated_at": "2018-07-05T15:09:17Z",
    "body": "This was [noticed in the wild on Stack Overflow](https://stackoverflow.com/a/51190927/155423).",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/402754966/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/435912182",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-435912182",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 435912182,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTkxMjE4Mg==",
    "user": {
      "login": "nikic",
      "id": 216080,
      "node_id": "MDQ6VXNlcjIxNjA4MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/216080?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikic",
      "html_url": "https://github.com/nikic",
      "followers_url": "https://api.github.com/users/nikic/followers",
      "following_url": "https://api.github.com/users/nikic/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikic/subscriptions",
      "organizations_url": "https://api.github.com/users/nikic/orgs",
      "repos_url": "https://api.github.com/users/nikic/repos",
      "events_url": "https://api.github.com/users/nikic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikic/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-11-05T15:18:00Z",
    "updated_at": "2018-11-05T15:18:00Z",
    "body": "It would be nice if we didn't have to patch LLVM to support custom allocation functions. Unfortunately the last discussion on that topic didn't really end up anywhere: http://lists.llvm.org/pipermail/llvm-dev/2016-January/093625.html",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/435912182/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/435917482",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-435917482",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 435917482,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTkxNzQ4Mg==",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-11-05T15:31:25Z",
    "updated_at": "2018-11-05T15:31:25Z",
    "body": "The only way around that is to guarantee this optimization via MIR optimizations. But our MIR optimization story is nowhere near the level required for that.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/435917482/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/435918539",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-435918539",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 435918539,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTkxODUzOQ==",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-11-05T15:34:08Z",
    "updated_at": "2018-11-05T15:34:08Z",
    "body": "Couldn't this be generalized by having a \"pure, no side-effects\" unsafe attribute?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/435918539/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3521932889",
    "html_url": "https://github.com/rust-lang/rust/issues/24194#issuecomment-3521932889",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24194",
    "id": 3521932889,
    "node_id": "IC_kwDOAAsO6M7R7G5Z",
    "user": {
      "login": "clubby789",
      "id": 13556931,
      "node_id": "MDQ6VXNlcjEzNTU2OTMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/13556931?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/clubby789",
      "html_url": "https://github.com/clubby789",
      "followers_url": "https://api.github.com/users/clubby789/followers",
      "following_url": "https://api.github.com/users/clubby789/following{/other_user}",
      "gists_url": "https://api.github.com/users/clubby789/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/clubby789/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/clubby789/subscriptions",
      "organizations_url": "https://api.github.com/users/clubby789/orgs",
      "repos_url": "https://api.github.com/users/clubby789/repos",
      "events_url": "https://api.github.com/users/clubby789/events{/privacy}",
      "received_events_url": "https://api.github.com/users/clubby789/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2025-11-12T13:25:19Z",
    "updated_at": "2025-11-12T13:25:19Z",
    "body": "This was closed by #42410\nTest: https://github.com/rust-lang/rust/blob/95aeb4696545eb4c9cbb68516f2912770e3846ea/tests/codegen-llvm/alloc-optimisation.rs",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3521932889/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
