[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7541519",
    "html_url": "https://github.com/rust-lang/rust/issues/3117#issuecomment-7541519",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3117",
    "id": 7541519,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDE1MTk=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-08-07T01:27:00Z",
    "updated_at": "2012-08-07T01:27:00Z",
    "body": "I am not sure how useful such a thing would be in the standard library.  My big concern is the matter of lifetime\u2014how do you signal when the thing is freed?  This seems to (in the general case) require a GC or be prone to malloc/free-like dangling pointers.  I'd kind of rather that people think about their task design in a more holistic sense where these answers will hopefully fall out of the application.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7541519/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7541555",
    "html_url": "https://github.com/rust-lang/rust/issues/3117#issuecomment-7541555",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3117",
    "id": 7541555,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDE1NTU=",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-08-07T01:30:42Z",
    "updated_at": "2012-08-07T01:31:47Z",
    "body": "@nikomatsakis So, pipes let the receiver know when the other endpoint is dropped. My thought was for the server task to internally keep a list of active endpoints -- whenever one closes, it removes it from the list, and when the list becomes empty, the server exits entirely.\n\nBasically this would achieve refcounting isomorphic to how exclusive arcs do it today. The weaken_task bit mentioned above \"solves\" the circular reference problem - I mean, repeatedly generating circular references and dropping them would still result in memory blowup, but at least the runtime knows how to clean them up when the whole program exits (so there's not actually a \"leak\" in the assertion-failure-runtime-crash sense of the word).\n\nI dunno, I've always kind of taken it for granted that people will want shared mutable state.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7541555/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7543012",
    "html_url": "https://github.com/rust-lang/rust/issues/3117#issuecomment-7543012",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3117",
    "id": 7543012,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDMwMTI=",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-08-07T03:38:05Z",
    "updated_at": "2012-08-07T03:38:05Z",
    "body": "I see.  I knew that you and @eholk were discussing this so I should have phrased it more like a question.  Interesting: the failure more with weak tasks is certainly not ideal.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7543012/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7560878",
    "html_url": "https://github.com/rust-lang/rust/issues/3117#issuecomment-7560878",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3117",
    "id": 7560878,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NjA4Nzg=",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-08-07T17:39:40Z",
    "updated_at": "2012-08-07T17:39:40Z",
    "body": "We talked about this and decided it wasn't wise to do. Whether or not the library forbids cycles, `arc::exclusive` achieves the same functionality. And allowing task cycles means task leaks... it wouldn't be right to make a library that purported to provide generalised shared state that would silently leak memory when writing a doubly linked list.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7560878/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
