[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32596810",
    "html_url": "https://github.com/rust-lang/rust/issues/10028#issuecomment-32596810",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10028",
    "id": 32596810,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTk2ODEw",
    "user": {
      "login": "sanxiyn",
      "id": 45249,
      "node_id": "MDQ6VXNlcjQ1MjQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sanxiyn",
      "html_url": "https://github.com/sanxiyn",
      "followers_url": "https://api.github.com/users/sanxiyn/followers",
      "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions",
      "organizations_url": "https://api.github.com/users/sanxiyn/orgs",
      "repos_url": "https://api.github.com/users/sanxiyn/repos",
      "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sanxiyn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-17T11:01:05Z",
    "updated_at": "2014-01-17T11:01:05Z",
    "body": "NonCopyable::new was removed in #10575. Can you provide a test case not depending on NonCopyable::new?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32596810/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32674458",
    "html_url": "https://github.com/rust-lang/rust/issues/10028#issuecomment-32674458",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10028",
    "id": 32674458,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjc0NDU4",
    "user": {
      "login": "MicahChalmer",
      "id": 698400,
      "node_id": "MDQ6VXNlcjY5ODQwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/698400?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MicahChalmer",
      "html_url": "https://github.com/MicahChalmer",
      "followers_url": "https://api.github.com/users/MicahChalmer/followers",
      "following_url": "https://api.github.com/users/MicahChalmer/following{/other_user}",
      "gists_url": "https://api.github.com/users/MicahChalmer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MicahChalmer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MicahChalmer/subscriptions",
      "organizations_url": "https://api.github.com/users/MicahChalmer/orgs",
      "repos_url": "https://api.github.com/users/MicahChalmer/repos",
      "events_url": "https://api.github.com/users/MicahChalmer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MicahChalmer/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-18T04:38:01Z",
    "updated_at": "2014-01-18T04:38:01Z",
    "body": "Yup, I can still reproduce it.  You need two files for it.  The first is a library crate, which compiles fine--let's call it `issue10028.rs`:\n\n``` rust\n#[crate_type=\"lib\"];\n\n#[unsafe_no_drop_flag]\npub struct ZeroLengthThingWithDestructor;\nimpl Drop for ZeroLengthThingWithDestructor {\n    fn drop(&mut self) {}\n}\nimpl ZeroLengthThingWithDestructor {\n    pub fn new() -> ZeroLengthThingWithDestructor {\n        ZeroLengthThingWithDestructor\n    }\n}\n```\n\nThe library crate compiles fine.  Now try to compile this file that uses it with `rustc -O` (allowing it to find the library built from above) and you'll see the same ICE described above:\n\n``` rust\nextern mod issue10028;\nuse issue10028::ZeroLengthThingWithDestructor;\n\nstruct Foo {\n    zero_length_thing: ZeroLengthThingWithDestructor\n}\n\nfn make_foo() -> Foo {\n    Foo { zero_length_thing: ZeroLengthThingWithDestructor::new() }\n}\n\nfn main() {\n    let _f:Foo = make_foo();\n}\n```\n\nThis is basically the same test case I had before--I just replaced `NonCopyable` with another struct that is the same as the old `NonCopyable` before the `new` method was eliminated.\n\nIf you combine them into the same crate (even `issue10028.rs` is still its own file as a module) then the problem does not occur.  It has to be in a separate crate from the one being compiled.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32674458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36420226",
    "html_url": "https://github.com/rust-lang/rust/issues/10028#issuecomment-36420226",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10028",
    "id": 36420226,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDIwMjI2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-01T09:14:02Z",
    "updated_at": "2014-03-01T09:14:02Z",
    "body": "This has been fixed, flagging as needstest\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36420226/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
