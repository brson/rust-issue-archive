[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71327952",
    "html_url": "https://github.com/rust-lang/rust/issues/21590#issuecomment-71327952",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21590",
    "id": 71327952,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzI3OTUy",
    "user": {
      "login": "jdm",
      "id": 27658,
      "node_id": "MDQ6VXNlcjI3NjU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/27658?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jdm",
      "html_url": "https://github.com/jdm",
      "followers_url": "https://api.github.com/users/jdm/followers",
      "following_url": "https://api.github.com/users/jdm/following{/other_user}",
      "gists_url": "https://api.github.com/users/jdm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jdm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jdm/subscriptions",
      "organizations_url": "https://api.github.com/users/jdm/orgs",
      "repos_url": "https://api.github.com/users/jdm/repos",
      "events_url": "https://api.github.com/users/jdm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jdm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-24T17:22:19Z",
    "updated_at": "2015-01-24T17:23:01Z",
    "body": "It wasn't actually memory corruption; it was the presence of NonNull (via the Box) within one of the types contained in the Option that was the target of the transmute. This caused the enum layout optimization code to deduce that it could use the NonNull value as the discriminant for the transmuted Option, which is what caused us to see Some values where the pre-transmute value was None.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71327952/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71328175",
    "html_url": "https://github.com/rust-lang/rust/issues/21590#issuecomment-71328175",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21590",
    "id": 71328175,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzI4MTc1",
    "user": {
      "login": "jdm",
      "id": 27658,
      "node_id": "MDQ6VXNlcjI3NjU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/27658?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jdm",
      "html_url": "https://github.com/jdm",
      "followers_url": "https://api.github.com/users/jdm/followers",
      "following_url": "https://api.github.com/users/jdm/following{/other_user}",
      "gists_url": "https://api.github.com/users/jdm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jdm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jdm/subscriptions",
      "organizations_url": "https://api.github.com/users/jdm/orgs",
      "repos_url": "https://api.github.com/users/jdm/repos",
      "events_url": "https://api.github.com/users/jdm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jdm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-24T17:27:14Z",
    "updated_at": "2015-01-24T17:27:14Z",
    "body": "For clarity, this is essentially what we had:\n\n``` rust\nstruct PreTransmute {\n    ptr: *const (),\n}\n\nstruct PostTransmute {\n    ptr: Box<Something>,\n}\n\nlet some_value: RefCell<Option<PreTransmute>> = RefCell::new(None);\nlet tmp = some_value.borrow();\nlet some_other_value: Ref<Option<PostTransmute>> = unsafe { mem::transmute(tmp) };\n```\n\nand some_other_value would now be classified as Some.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71328175/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71333492",
    "html_url": "https://github.com/rust-lang/rust/issues/21590#issuecomment-71333492",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21590",
    "id": 71333492,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzMzNDky",
    "user": {
      "login": "kmcallister",
      "id": 444997,
      "node_id": "MDQ6VXNlcjQ0NDk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/444997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kmcallister",
      "html_url": "https://github.com/kmcallister",
      "followers_url": "https://api.github.com/users/kmcallister/followers",
      "following_url": "https://api.github.com/users/kmcallister/following{/other_user}",
      "gists_url": "https://api.github.com/users/kmcallister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kmcallister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kmcallister/subscriptions",
      "organizations_url": "https://api.github.com/users/kmcallister/orgs",
      "repos_url": "https://api.github.com/users/kmcallister/repos",
      "events_url": "https://api.github.com/users/kmcallister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kmcallister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-24T19:30:23Z",
    "updated_at": "2015-01-24T19:30:23Z",
    "body": "This seems like a generalization of `-W fat-pointer-transmutes`, which is currently broken (#19676).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71333492/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71366320",
    "html_url": "https://github.com/rust-lang/rust/issues/21590#issuecomment-71366320",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21590",
    "id": 71366320,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzY2MzIw",
    "user": {
      "login": "Thiez",
      "id": 204550,
      "node_id": "MDQ6VXNlcjIwNDU1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/204550?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Thiez",
      "html_url": "https://github.com/Thiez",
      "followers_url": "https://api.github.com/users/Thiez/followers",
      "following_url": "https://api.github.com/users/Thiez/following{/other_user}",
      "gists_url": "https://api.github.com/users/Thiez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Thiez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Thiez/subscriptions",
      "organizations_url": "https://api.github.com/users/Thiez/orgs",
      "repos_url": "https://api.github.com/users/Thiez/repos",
      "events_url": "https://api.github.com/users/Thiez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Thiez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-25T10:58:23Z",
    "updated_at": "2015-01-25T10:58:23Z",
    "body": "Since struct layout is undefined, transmuting one type to another is probably a bad idea in the general case, unless they're both `#[repr(C)]`, or when you're transmuting to and from an array of bytes or something. Which does seems like a good usecase that might be negatively affected by the change suggested in this issue.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71366320/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/181522443",
    "html_url": "https://github.com/rust-lang/rust/issues/21590#issuecomment-181522443",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21590",
    "id": 181522443,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4MTUyMjQ0Mw==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-08T19:05:18Z",
    "updated_at": "2016-02-08T19:05:18Z",
    "body": "Triage: no change that I'm aware of.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/181522443/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424068581",
    "html_url": "https://github.com/rust-lang/rust/issues/21590#issuecomment-424068581",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21590",
    "id": 424068581,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDA2ODU4MQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-09-24T18:02:09Z",
    "updated_at": "2018-09-24T18:02:09Z",
    "body": "Triage: no changes I'm aware of",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424068581/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1172542028",
    "html_url": "https://github.com/rust-lang/rust/issues/21590#issuecomment-1172542028",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21590",
    "id": 1172542028,
    "node_id": "IC_kwDOAAsO6M5F45JM",
    "user": {
      "login": "asquared31415",
      "id": 34665709,
      "node_id": "MDQ6VXNlcjM0NjY1NzA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/34665709?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/asquared31415",
      "html_url": "https://github.com/asquared31415",
      "followers_url": "https://api.github.com/users/asquared31415/followers",
      "following_url": "https://api.github.com/users/asquared31415/following{/other_user}",
      "gists_url": "https://api.github.com/users/asquared31415/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/asquared31415/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/asquared31415/subscriptions",
      "organizations_url": "https://api.github.com/users/asquared31415/orgs",
      "repos_url": "https://api.github.com/users/asquared31415/repos",
      "events_url": "https://api.github.com/users/asquared31415/events{/privacy}",
      "received_events_url": "https://api.github.com/users/asquared31415/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-07-01T16:57:53Z",
    "updated_at": "2022-07-01T16:59:36Z",
    "body": "This cannot be made an error specifically with raw pointers because it may be okay.  The following code is valid (though odd):\r\n```rust\r\nlet arr: [u8; 4] = [1, 2, 3, 4];\r\nlet arr_ptr: *const u8 = arr.as_ptr();\r\nunsafe {\r\n    let u32_ptr: *const u32 = core::mem::transmute::<_, *const u32>(arr_ptr);\r\n    let u32_val = u32_ptr.read_unaligned();\r\n    assert_eq!(u32_val.to_ne_bytes(), arr);\r\n}\r\n```\r\nOf course, transmuting between pointers should not be done, in favor of `.cast` or `as`, and Clippy will tell you this, but it's perfectly valid because the pointer is a pointer to the whole array and can be used to access more than just one u8.\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1172542028/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2094678530",
    "html_url": "https://github.com/rust-lang/rust/issues/21590#issuecomment-2094678530",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21590",
    "id": 2094678530,
    "node_id": "IC_kwDOAAsO6M582kIC",
    "user": {
      "login": "workingjubilee",
      "id": 46493976,
      "node_id": "MDQ6VXNlcjQ2NDkzOTc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46493976?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/workingjubilee",
      "html_url": "https://github.com/workingjubilee",
      "followers_url": "https://api.github.com/users/workingjubilee/followers",
      "following_url": "https://api.github.com/users/workingjubilee/following{/other_user}",
      "gists_url": "https://api.github.com/users/workingjubilee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/workingjubilee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/workingjubilee/subscriptions",
      "organizations_url": "https://api.github.com/users/workingjubilee/orgs",
      "repos_url": "https://api.github.com/users/workingjubilee/repos",
      "events_url": "https://api.github.com/users/workingjubilee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/workingjubilee/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-05-05T08:15:43Z",
    "updated_at": "2024-05-05T08:15:43Z",
    "body": "As @asquared31415 noted this cannot be made an error (breaks backcompat, churns too much code) and is a duplicate otherwise with issues like https://github.com/rust-lang/rust/issues/34249 which recommend linting against transmutes of pointers in a more general fashion.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2094678530/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
