[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66384037",
    "html_url": "https://github.com/rust-lang/rust/issues/19680#issuecomment-66384037",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19680",
    "id": 66384037,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2Mzg0MDM3",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-10T00:19:13Z",
    "updated_at": "2014-12-10T00:19:13Z",
    "body": "Assuming I'm using the flags correctly, '-C prefer-dynamic':\n\n```\n$ rustc -L . -C prefer-dynamic main.rs\nerror: cannot satisfy dependencies so `std` only shows up once\nnote: having upstream crates all available in one format will likely make this go away\nerror: cannot satisfy dependencies so `rand` only shows up once\nnote: having upstream crates all available in one format will likely make this go away\nerror: cannot satisfy dependencies so `rustrt` only shows up once\nnote: having upstream crates all available in one format will likely make this go away\nerror: cannot satisfy dependencies so `core` only shows up once\nnote: having upstream crates all available in one format will likely make this go away\nerror: cannot satisfy dependencies so `alloc` only shows up once\nnote: having upstream crates all available in one format will likely make this go away\nerror: cannot satisfy dependencies so `libc` only shows up once\nnote: having upstream crates all available in one format will likely make this go away\nerror: cannot satisfy dependencies so `collections` only shows up once\nnote: having upstream crates all available in one format will likely make this go away\nerror: cannot satisfy dependencies so `unicode` only shows up once\nnote: having upstream crates all available in one format will likely make this go away\nerror: aborting due to 8 previous errors\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66384037/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66401784",
    "html_url": "https://github.com/rust-lang/rust/issues/19680#issuecomment-66401784",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19680",
    "id": 66401784,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDAxNzg0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-10T04:04:06Z",
    "updated_at": "2014-12-10T04:04:06Z",
    "body": "Building a dynamic library defaults to statically linking all dependencies, so `test_crate` has static versions of the standard library and friends which confuses the compiler. If you compile `test_crate` with `-C prefer-dynamic` you should be good to go.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66401784/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66406113",
    "html_url": "https://github.com/rust-lang/rust/issues/19680#issuecomment-66406113",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19680",
    "id": 66406113,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDA2MTEz",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-10T05:22:02Z",
    "updated_at": "2014-12-10T05:22:02Z",
    "body": "Ah, that solves it. Thank you!\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66406113/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97310835",
    "html_url": "https://github.com/rust-lang/rust/issues/19680#issuecomment-97310835",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19680",
    "id": 97310835,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk3MzEwODM1",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-29T05:26:36Z",
    "updated_at": "2015-04-29T05:36:52Z",
    "body": "@alexcrichton I'm not able to tell cargo to use `-C prefer-dynamic`. As a result, it's not possible to use cargo with both rust libraries and c shared libraries. Changing my project to use rustc for these activities is not really an option either because the rust ecosystem is so heavily biased towards using cargo. Is it really not possible to build a rust shared library that compiles against both *.so and *.rlib components?\n\nEdit: Nevermind. I read your comment a little more closely and realized a subtlety. I'm building both a dylib and a binary file with my cargo file, and it was the binary file that was creating the problems when I changed the objective to building a shared library. Removing src/main.rs fixed the error messages. Here is what I was getting:\n\nerror: cannot satisfy dependencies so `std` only shows up once\nhelp: having upstream crates all available in one format will likely make this go away\nerror: cannot satisfy dependencies so `core` only shows up once\nhelp: having upstream crates all available in one format will likely make this go away\nerror: cannot satisfy dependencies so `collections` only shows up once\nhelp: having upstream crates all available in one format will likely make this go away\nerror: cannot satisfy dependencies so `rustc_unicode` only shows up once\nhelp: having upstream crates all available in one format will likely make this go away\nerror: cannot satisfy dependencies so `alloc` only shows up once\nhelp: having upstream crates all available in one format will likely make this go away\nerror: cannot satisfy dependencies so `libc` only shows up once\nhelp: having upstream crates all available in one format will likely make this go away\nerror: cannot satisfy dependencies so `rand` only shows up once\nhelp: having upstream crates all available in one format will likely make this go away\nerror: aborting due to 7 previous errors\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97310835/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97470922",
    "html_url": "https://github.com/rust-lang/rust/issues/19680#issuecomment-97470922",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19680",
    "id": 97470922,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk3NDcwOTIy",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-29T15:28:50Z",
    "updated_at": "2015-04-29T15:28:50Z",
    "body": "@Russell91 you may want to be sure that this is part of your Cargo.toml:\n\n``` toml\n[lib]\n# ...\ncrate-types = [\"rlib\", \"dylib\", \"bin\"]\n```\n\nThat way the binary being generated should favor the rlib and you'll also have a dylib available to you. Otherwise I think that error message is likely working as intended, but I'd have to take a peek at the project to make sure.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97470922/reactions",
      "total_count": 9,
      "+1": 7,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97551453",
    "html_url": "https://github.com/rust-lang/rust/issues/19680#issuecomment-97551453",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19680",
    "id": 97551453,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk3NTUxNDUz",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-29T19:26:27Z",
    "updated_at": "2015-04-29T19:26:27Z",
    "body": "@alexcrichton, just adding \"rlib\" to the list of crate-type fixed the problem.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/97551453/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/242913274",
    "html_url": "https://github.com/rust-lang/rust/issues/19680#issuecomment-242913274",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19680",
    "id": 242913274,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MjkxMzI3NA==",
    "user": {
      "login": "eltiare",
      "id": 3036,
      "node_id": "MDQ6VXNlcjMwMzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eltiare",
      "html_url": "https://github.com/eltiare",
      "followers_url": "https://api.github.com/users/eltiare/followers",
      "following_url": "https://api.github.com/users/eltiare/following{/other_user}",
      "gists_url": "https://api.github.com/users/eltiare/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eltiare/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eltiare/subscriptions",
      "organizations_url": "https://api.github.com/users/eltiare/orgs",
      "repos_url": "https://api.github.com/users/eltiare/repos",
      "events_url": "https://api.github.com/users/eltiare/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eltiare/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-08-27T12:02:05Z",
    "updated_at": "2016-08-27T12:02:05Z",
    "body": "Note that it's `crate-type` and not `crate-types`\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/242913274/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1046360124",
    "html_url": "https://github.com/rust-lang/rust/issues/19680#issuecomment-1046360124",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19680",
    "id": 1046360124,
    "node_id": "IC_kwDOAAsO6M4-XjA8",
    "user": {
      "login": "cdecompilador",
      "id": 36774000,
      "node_id": "MDQ6VXNlcjM2Nzc0MDAw",
      "avatar_url": "https://avatars.githubusercontent.com/u/36774000?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cdecompilador",
      "html_url": "https://github.com/cdecompilador",
      "followers_url": "https://api.github.com/users/cdecompilador/followers",
      "following_url": "https://api.github.com/users/cdecompilador/following{/other_user}",
      "gists_url": "https://api.github.com/users/cdecompilador/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cdecompilador/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cdecompilador/subscriptions",
      "organizations_url": "https://api.github.com/users/cdecompilador/orgs",
      "repos_url": "https://api.github.com/users/cdecompilador/repos",
      "events_url": "https://api.github.com/users/cdecompilador/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cdecompilador/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-02-21T00:29:25Z",
    "updated_at": "2022-02-21T00:29:25Z",
    "body": "But wait, doing the `rlib` statically links everything? Lets say I have a binary wich has as dependency just libA which is \"dylib\", the expected behaviour should be that the generated executable shouldn't be able to run without the libA.so, but adding the \"rlib\" makes it static link, why? and why bevy doing some weird trick has dynamic linking working properly with just \"dylib\" option?",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1046360124/reactions",
      "total_count": 8,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 8
    },
    "performed_via_github_app": null
  }
]
