[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71228522",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-71228522",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 71228522,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMjI4NTIy",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-23T17:18:23Z",
    "updated_at": "2015-01-23T17:18:23Z",
    "body": "The solution here seems to be to adjust the infer lifetimes for temporaries generated from the `<iter>` in `for <pat> in <iter> { ... }`.\n\nI have a patch to do this on my branch, and so far it seems to work, but @nikomatsakis has pointed out to me that I may be better off waiting until after #20790 lands.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71228522/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71228677",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-71228677",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 71228677,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMjI4Njc3",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-23T17:19:20Z",
    "updated_at": "2015-01-23T17:19:20Z",
    "body": "(Nonetheless, there may be similar or related issues in other syntactic forms, such as `if let <pat> = <expr> { ... }`.  At the very least, I will be able to use this bug as a reference point in FIXME notes.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71228677/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73989740",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-73989740",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 73989740,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczOTg5NzQw",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-11T23:43:10Z",
    "updated_at": "2015-02-11T23:44:38Z",
    "body": "(This was largely addressed by #21984.  I am not sure whether there is much more we can actually do here.  You can search for FIXME's in this commit bdb9f3e26666ef7cd0c3b78e4ddba886d7c49e82 for most of the fallout that was caused by this in the end (its mostly with `if let`, along with one semicolon I had to add to a test; it was not that bad.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73989740/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74242619",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-74242619",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 74242619,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MjQyNjE5",
    "user": {
      "login": "ebfull",
      "id": 3794471,
      "node_id": "MDQ6VXNlcjM3OTQ0NzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3794471?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ebfull",
      "html_url": "https://github.com/ebfull",
      "followers_url": "https://api.github.com/users/ebfull/followers",
      "following_url": "https://api.github.com/users/ebfull/following{/other_user}",
      "gists_url": "https://api.github.com/users/ebfull/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ebfull/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ebfull/subscriptions",
      "organizations_url": "https://api.github.com/users/ebfull/orgs",
      "repos_url": "https://api.github.com/users/ebfull/repos",
      "events_url": "https://api.github.com/users/ebfull/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ebfull/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-13T11:50:24Z",
    "updated_at": "2015-02-13T11:50:24Z",
    "body": "I think I'm having a similar issue:\n\n``` rust\nuse std::collections::HashMap;\nuse std::sync::Mutex;\n\nfn i_used_to_be_able_to(foo: &Mutex<HashMap<usize, usize>>) -> Vec<(usize, usize)> {\n    let mut foo = foo.lock().unwrap();\n\n    foo.drain().collect()\n}\n\nfn but_after_nightly_update_now_i_gotta(foo: &Mutex<HashMap<usize, usize>>) -> Vec<(usize, usize)> {\n    let mut foo = foo.lock().unwrap();\n\n    return foo.drain().collect();\n}\n\nfn main() {}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74242619/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74300312",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-74300312",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 74300312,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MzAwMzEy",
    "user": {
      "login": "felipesere",
      "id": 1850188,
      "node_id": "MDQ6VXNlcjE4NTAxODg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1850188?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/felipesere",
      "html_url": "https://github.com/felipesere",
      "followers_url": "https://api.github.com/users/felipesere/followers",
      "following_url": "https://api.github.com/users/felipesere/following{/other_user}",
      "gists_url": "https://api.github.com/users/felipesere/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/felipesere/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/felipesere/subscriptions",
      "organizations_url": "https://api.github.com/users/felipesere/orgs",
      "repos_url": "https://api.github.com/users/felipesere/repos",
      "events_url": "https://api.github.com/users/felipesere/events{/privacy}",
      "received_events_url": "https://api.github.com/users/felipesere/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-13T18:20:35Z",
    "updated_at": "2015-02-13T18:23:55Z",
    "body": "I get the above mentioned error when running rustc `rustc 1.0.0-nightly (3ef8ff1f8 2015-02-12 00:38:24 +0000)`\nWith the following code:\n\n```\n    std::old_io::stdio::stdin().lock().lines().map( |line| {\n        line.unwrap().trim().to_string()\n    }).collect()\n```\n\nWhen using `rustc 1.0.0-nightly (00df3251f 2015-02-08 23:24:33 +0000)` I don't get the error.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74300312/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74367933",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-74367933",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 74367933,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MzY3OTMz",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-14T09:08:07Z",
    "updated_at": "2015-02-14T09:08:07Z",
    "body": "@felipesere Your example, I think, is running afoul of the failure of the region system's model to precisely track the destruction order for r-value temporaries; see #22323.\n\nAfter rewriting your example to accommodate that short-coming, we have this:\n\n``` rust\nfn lines() -> Vec<String> {\n    let mut stdin = std::old_io::stdio::stdin();\n    let mut locked = stdin.lock();\n    locked.lines().map( |line| {\n        line.unwrap().trim().to_string()\n    }).collect()\n}\n```\n\nwhich compiles for me.  So I do not think this is an instance of this ticket, but rather of #22323 \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74367933/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74368007",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-74368007",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 74368007,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MzY4MDA3",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-14T09:11:09Z",
    "updated_at": "2015-02-14T09:12:13Z",
    "body": "@ebfull your example is very interesting.  (I am not yet sure whether the underlying cause is the same as the one that led to this ticket, but I definitely would like to fix it.)\n\ncc #22321 \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74368007/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74438455",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-74438455",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 74438455,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NDM4NDU1",
    "user": {
      "login": "drbawb",
      "id": 235438,
      "node_id": "MDQ6VXNlcjIzNTQzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/235438?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/drbawb",
      "html_url": "https://github.com/drbawb",
      "followers_url": "https://api.github.com/users/drbawb/followers",
      "following_url": "https://api.github.com/users/drbawb/following{/other_user}",
      "gists_url": "https://api.github.com/users/drbawb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/drbawb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/drbawb/subscriptions",
      "organizations_url": "https://api.github.com/users/drbawb/orgs",
      "repos_url": "https://api.github.com/users/drbawb/repos",
      "events_url": "https://api.github.com/users/drbawb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/drbawb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-15T21:37:20Z",
    "updated_at": "2015-02-15T21:38:49Z",
    "body": "I think I'm bumping up against this, I have a function that acquires a `RwLock` in a trailing expression. Though it's a `match` expression, not a `for` loop.\n\nThe code looks similar to this:\n\n``` rust\ntype Context = Arc<RwLock<HashMap<Uuid, User>>>;\n\nfn disconnect_user(ctx: Context, uid: Uuid) -> Result<String, String> {\n    // ....\n   match ctx.write().unwrap().remove(&uid) {\n         Some(user) => { Ok(format!(\"user removed\")) },\n         None => { Err(format!(\"user not removed\")) },\n    }\n}\n```\n\nWhich yields this error on the latest nightly (`b63cee4a1 2015-02-14`):\n\n```\nsrc/supervisor/handlers/connections.rs:162:8: 162:11 error: `ctx` does not live long enough\nsrc/supervisor/handlers/connections.rs:162      match ctx.users.write().ok().unwrap().remove(&uid) {\n                                                      ^~~\nsrc/supervisor/handlers/connections.rs:153:78: 186:2 note: reference must be valid for the destruction scope surrounding block at 153:77...\nsrc/supervisor/handlers/connections.rs:153 pub fn disconnect_user(req: &Request, env: &mut Env) -> Result<String,String>{\nsrc/supervisor/handlers/connections.rs:154      let ctx = env.get::<Arc<Context>>().unwrap().clone();\nsrc/supervisor/handlers/connections.rs:155      let io  = env.get::<Sender<Envelope>>().unwrap().clone();\nsrc/supervisor/handlers/connections.rs:156      let uid = req.uid.clone();\nsrc/supervisor/handlers/connections.rs:157 \nsrc/supervisor/handlers/connections.rs:158      let reason = req.payload.as_ref().and_then(|pl| {\n                                           ...\nsrc/supervisor/handlers/connections.rs:154:54: 186:2 note: ...but borrowed value is only valid for the block suffix following statement 0 at 154:53\nsrc/supervisor/handlers/connections.rs:154      let ctx = env.get::<Arc<Context>>().unwrap().clone();\nsrc/supervisor/handlers/connections.rs:155      let io  = env.get::<Sender<Envelope>>().unwrap().clone();\nsrc/supervisor/handlers/connections.rs:156      let uid = req.uid.clone();\nsrc/supervisor/handlers/connections.rs:157 \nsrc/supervisor/handlers/connections.rs:158      let reason = req.payload.as_ref().and_then(|pl| {\nsrc/supervisor/handlers/connections.rs:159              json::decode(&pl[]).ok()\n                                           ...\nerror: aborting due to previous error\n```\n\nI seem to be able to work around it in two ways. I can either bind the result of the match exprsession to a variable and return that instead, or I can bind `context`'s lock guard to a variable and perform the `match` on that.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74438455/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74508522",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-74508522",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 74508522,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NTA4NTIy",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-16T13:33:14Z",
    "updated_at": "2015-02-16T13:33:14Z",
    "body": "@drbawb yes, I suspect this is the same issue.  I doubt I will be fixing this any time soon (i.e., I do not think it is a 1.0 blocker issue), so while I do hope to fix it eventually, I think you will need to live with the workarounds for now.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74508522/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221390842",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-221390842",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 221390842,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTM5MDg0Mg==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-24T20:25:10Z",
    "updated_at": "2016-05-24T20:25:23Z",
    "body": "A full reproduction of @pnkfelix 's early example compiles today without the `()`:\n\n```\nuse std::rc::Rc;\nuse std::rc::Weak;\nuse std::cell::RefCell;\n\nstruct Owner {\n    name: String,\n    gadgets: RefCell<Vec<Weak<Gadget>>>,\n}\n\nstruct Gadget {\n    id: i32,\n    owner: Rc<Owner>,\n}\n\nfn main() {\n    let gadget_owner : Rc<Owner> = Rc::new(\n        Owner { \n            name: \"Gadget Man\".to_string(),\n            gadgets: RefCell::new(Vec::new())\n        }\n        );\n\n    let gadget1 = Rc::new(Gadget{id: 1, owner: gadget_owner.clone()});\n    let gadget2 = Rc::new(Gadget{id: 2, owner: gadget_owner.clone()});\n\n    gadget_owner.gadgets.borrow_mut().push(Rc::downgrade(&gadget1.clone()));\n    gadget_owner.gadgets.borrow_mut().push(Rc::downgrade(&gadget2.clone()));\n\n    for gadget_opt in gadget_owner.gadgets.borrow().iter() {\n        let gadget = gadget_opt.upgrade().unwrap();\n        println!(\"Gadget {} owned by {}\", gadget.id, gadget.owner.name);\n    }\n}\n```\n\nThat said, obviously this issue is about a bit more than that, and as he said:\n\n> (I'm filing this bug before landing the PR so that I can annotation each of the corresponding cases with a FIXME so that I can go back and address them after I get a chance to investigate this properly.)\n\n@pnkfelix where does this stand today?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221390842/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221485764",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-221485764",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 221485764,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTQ4NTc2NA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-25T06:35:50Z",
    "updated_at": "2016-05-25T06:35:50Z",
    "body": "@steveklabnik it seems like the cases of interest here got fixed via independent changes elsewhere in `rustc`\n\nIt might be interesting to track down which PR did this, but  given that we have made a number of refinements to the region system since this was filed,  I'm not astounded that it was fixed .... merely mildly surprised  \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221485764/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228331214",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-228331214",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 228331214,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODMzMTIxNA==",
    "user": {
      "login": "niconii",
      "id": 10183419,
      "node_id": "MDQ6VXNlcjEwMTgzNDE5",
      "avatar_url": "https://avatars.githubusercontent.com/u/10183419?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/niconii",
      "html_url": "https://github.com/niconii",
      "followers_url": "https://api.github.com/users/niconii/followers",
      "following_url": "https://api.github.com/users/niconii/following{/other_user}",
      "gists_url": "https://api.github.com/users/niconii/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/niconii/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/niconii/subscriptions",
      "organizations_url": "https://api.github.com/users/niconii/orgs",
      "repos_url": "https://api.github.com/users/niconii/repos",
      "events_url": "https://api.github.com/users/niconii/events{/privacy}",
      "received_events_url": "https://api.github.com/users/niconii/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-24T12:18:28Z",
    "updated_at": "2016-06-24T12:18:28Z",
    "body": "This problem seems to still crop up with code like this, which doesn't compile unless `;` or an expression is added after the if-let:\n\n``` rust\nuse std::sync::Mutex;\n\nfn main() {\n    let counter = Mutex::new(0);\n\n    if let Ok(_) = counter.lock() { }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228331214/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/248355056",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-248355056",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 248355056,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0ODM1NTA1Ng==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-20T16:27:24Z",
    "updated_at": "2016-09-20T16:27:24Z",
    "body": "reopening based on discussion at #22252\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/248355056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/296918854",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-296918854",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 296918854,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjkxODg1NA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-04-25T05:50:44Z",
    "updated_at": "2017-04-25T05:50:44Z",
    "body": "(I will try to accumulate a representative set of currently failing examples in the description for ease of reference)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/296918854/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/312447832",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-312447832",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 312447832,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjQ0NzgzMg==",
    "user": {
      "login": "Kixunil",
      "id": 1178779,
      "node_id": "MDQ6VXNlcjExNzg3Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1178779?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kixunil",
      "html_url": "https://github.com/Kixunil",
      "followers_url": "https://api.github.com/users/Kixunil/followers",
      "following_url": "https://api.github.com/users/Kixunil/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kixunil/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kixunil/subscriptions",
      "organizations_url": "https://api.github.com/users/Kixunil/orgs",
      "repos_url": "https://api.github.com/users/Kixunil/repos",
      "events_url": "https://api.github.com/users/Kixunil/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kixunil/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-01T18:20:30Z",
    "updated_at": "2017-07-01T18:25:41Z",
    "body": "Any news on this? I have this example:\r\n\r\n```rust\r\nfn from_stdin(min: u64) -> Vec<u64> {\r\n    use std::io::BufRead;\r\n\r\n    let stdin = std::io::stdin();\r\n    let stdin = stdin.lock();\r\n\r\n    stdin.lines()\r\n         .map(Result::unwrap)\r\n         .map(|val| val.parse())\r\n         .map(Result::unwrap)\r\n         .filter(|val| *val >= min)\r\n         .collect()\r\n}\r\n```\r\n\r\nEdit: this fixes it:\r\n```rust\r\nfn from_stdin(min: u64) -> Vec<u64> {\r\n    use std::io::BufRead;\r\n\r\n    let stdin = std::io::stdin();\r\n    let stdin = stdin.lock();\r\n\r\n    let res = stdin.lines()\r\n         .map(Result::unwrap)\r\n         .map(|val| val.parse())\r\n         .map(Result::unwrap)\r\n         .filter(|val| *val >= min)\r\n         .collect();\r\n    res\r\n}\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/312447832/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/315785577",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-315785577",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 315785577,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTc4NTU3Nw==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-17T15:15:27Z",
    "updated_at": "2017-07-17T15:15:27Z",
    "body": "It definitely seems like we ought to be able to accept that example, but right now there has been no progress. I think it'd be worth revisiting these rules once we do the NLL work, since that will change the need for a strict region hierarchy, and might make things a bit easier to manage (not sure).",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/315785577/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/321158567",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-321158567",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 321158567,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTE1ODU2Nw==",
    "user": {
      "login": "Thiez",
      "id": 204550,
      "node_id": "MDQ6VXNlcjIwNDU1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/204550?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Thiez",
      "html_url": "https://github.com/Thiez",
      "followers_url": "https://api.github.com/users/Thiez/followers",
      "following_url": "https://api.github.com/users/Thiez/following{/other_user}",
      "gists_url": "https://api.github.com/users/Thiez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Thiez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Thiez/subscriptions",
      "organizations_url": "https://api.github.com/users/Thiez/orgs",
      "repos_url": "https://api.github.com/users/Thiez/repos",
      "events_url": "https://api.github.com/users/Thiez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Thiez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-09T05:44:37Z",
    "updated_at": "2017-08-09T05:44:37Z",
    "body": "Some more testcases:\r\n\r\n```rust\r\n// This is fine\r\nfn drain_good(mut a: Vec<u32>) -> Vec<u32> {\r\n    a.drain(..).collect::<Vec<u32>>()\r\n}\r\n\r\n// This is not\r\nfn drain_bad(a: Vec<u32>) -> Vec<u32> {\r\n    let mut a = a;\r\n    a.drain(..).collect::<Vec<u32>>()\r\n}\r\n\r\n// But this is fine again.\r\nfn drain_explicit_return(a: Vec<u32>) -> Vec<u32> {\r\n    let mut a = a;\r\n    return a.drain(..).collect::<Vec<u32>>();\r\n}\r\n```\r\n\r\nAnd using just member access:\r\n\r\n```rust\r\nstruct S{ n: u8 }\r\nstruct T<'a>{ s: &'a S }\r\nimpl<'a> Drop for T<'a> { fn drop(&mut self){} }\r\n\r\n// This is fine\r\nfn test_good() -> u8 {\r\n    let s = S{ n: 5 };\r\n    return T{ s: &s }.s.n;\r\n}\r\n\r\n// This isn't.\r\nfn test_bad() -> u8 {\r\n    let s = S{ n: 5 };\r\n    T{ s: &s }.s.n\r\n}\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/321158567/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/324003463",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-324003463",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 324003463,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDAwMzQ2Mw==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-22T11:53:42Z",
    "updated_at": "2017-08-22T11:53:42Z",
    "body": "I keep seeing this issue occurring and annoying ppl. Is there a way to solve this?\r\n\r\nNote that, this being a destructor ordering issue rather than a lifetime issue (the code prohibited by this would use-after-free), this won't change after MIR borrowck",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/324003463/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/324103618",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-324103618",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 324103618,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDEwMzYxOA==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-22T17:55:33Z",
    "updated_at": "2017-08-22T17:55:33Z",
    "body": "Forgive my ignorance but, isn't [this](https://github.com/nikomatsakis/nll-rfc/blob/master/0000-nonlexical-lifetimes.md) the solution?",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/324103618/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/324122165",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-324122165",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 324122165,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDEyMjE2NQ==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-22T19:05:56Z",
    "updated_at": "2017-08-22T19:05:56Z",
    "body": "Not for all cases.\r\n\r\nFor example,\r\n```Rust\r\nuse std::sync::Mutex;\r\n\r\nfn main() {\r\n    let counter = Mutex::new(0);\r\n\r\n    if let Ok(_) = counter.lock() { }\r\n}\r\n```\r\n\r\nis desugared into:\r\n```Rust\r\n    counter = Mutex::new(0);\r\n    counter_ref = &counter;\r\n    lock = Mutex::lock(counter_ref);\r\n    if let Ok(_) = lock {} else {}\r\n// end of scope of function\r\n    drop(counter); // this frees the mutex\r\n// end of scope of lock\r\n    drop(lock); // this tries to unlock a lock after it was freed - UB!\r\n```\r\n\r\nBecause NLL does not change when destructors are run, this code would still try to do a use-after-free, and therefore would (hopefully!) keep not compiling.\r\n\r\nI must note that `vec.drain(..).collect()` can't do a use-after-free in this way, and therefore some variant of NLL (I'm talking about it with @nikomatsakis) might allow it, but slight variants can do a use-after-free through unwinding (e.g. `vec.drain(..).take(something[0]).collect()`, which would do the use-after-free if the index goes out of bounds).",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/324122165/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/324129353",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-324129353",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 324129353,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDEyOTM1Mw==",
    "user": {
      "login": "kwanyyoss",
      "id": 6327030,
      "node_id": "MDQ6VXNlcjYzMjcwMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6327030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kwanyyoss",
      "html_url": "https://github.com/kwanyyoss",
      "followers_url": "https://api.github.com/users/kwanyyoss/followers",
      "following_url": "https://api.github.com/users/kwanyyoss/following{/other_user}",
      "gists_url": "https://api.github.com/users/kwanyyoss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kwanyyoss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kwanyyoss/subscriptions",
      "organizations_url": "https://api.github.com/users/kwanyyoss/orgs",
      "repos_url": "https://api.github.com/users/kwanyyoss/repos",
      "events_url": "https://api.github.com/users/kwanyyoss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kwanyyoss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-22T19:35:33Z",
    "updated_at": "2017-08-22T19:35:33Z",
    "body": "I thought destructors should generally be called in the reverse order of the objects' construction...",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/324129353/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/324129453",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-324129453",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 324129453,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDEyOTQ1Mw==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-22T19:35:55Z",
    "updated_at": "2017-08-22T19:35:55Z",
    "body": "Thats... only true within a single struct",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/324129453/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/324131830",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-324131830",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 324131830,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDEzMTgzMA==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-22T19:46:06Z",
    "updated_at": "2017-08-22T19:46:06Z",
    "body": "For more details about the case where NLL matters, see nikomatsakis/nll-rfc#42",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/324131830/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/326681067",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-326681067",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 326681067,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjY4MTA2Nw==",
    "user": {
      "login": "Kixunil",
      "id": 1178779,
      "node_id": "MDQ6VXNlcjExNzg3Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1178779?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kixunil",
      "html_url": "https://github.com/Kixunil",
      "followers_url": "https://api.github.com/users/Kixunil/followers",
      "following_url": "https://api.github.com/users/Kixunil/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kixunil/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kixunil/subscriptions",
      "organizations_url": "https://api.github.com/users/Kixunil/orgs",
      "repos_url": "https://api.github.com/users/Kixunil/repos",
      "events_url": "https://api.github.com/users/Kixunil/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kixunil/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-09-01T20:50:49Z",
    "updated_at": "2017-09-01T20:50:49Z",
    "body": "> Thats... only true within a single struct\r\n\r\nI don't understand. Can you elaborate? Why would dropping in non-reverse order be ever desirable?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/326681067/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/338009729",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-338009729",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 338009729,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODAwOTcyOQ==",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-10-19T19:18:45Z",
    "updated_at": "2017-10-19T19:18:45Z",
    "body": "From lang team meeting: need to investigate how this fits in with NLL work. @nikomatsakis to follow up. No other lang team opinions at this time.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/338009729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/348746562",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-348746562",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 348746562,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODc0NjU2Mg==",
    "user": {
      "login": "kwanyyoss",
      "id": 6327030,
      "node_id": "MDQ6VXNlcjYzMjcwMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6327030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kwanyyoss",
      "html_url": "https://github.com/kwanyyoss",
      "followers_url": "https://api.github.com/users/kwanyyoss/followers",
      "following_url": "https://api.github.com/users/kwanyyoss/following{/other_user}",
      "gists_url": "https://api.github.com/users/kwanyyoss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kwanyyoss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kwanyyoss/subscriptions",
      "organizations_url": "https://api.github.com/users/kwanyyoss/orgs",
      "repos_url": "https://api.github.com/users/kwanyyoss/repos",
      "events_url": "https://api.github.com/users/kwanyyoss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kwanyyoss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-12-03T07:42:20Z",
    "updated_at": "2017-12-03T07:42:20Z",
    "body": "> I don't understand. Can you elaborate? Why would dropping in non-reverse order be ever desirable?\r\n\r\nThe Rust Book currently shows that local variables are dropped in [LIFO order](https://doc.rust-lang.org/nightly/book/second-edition/ch15-03-drop.html).  It should be done that way.  It follows from the fundamental concepts of a runtime stack and RAII.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/348746562/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/357400013",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-357400013",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 357400013,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzQwMDAxMw==",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-13T01:42:19Z",
    "updated_at": "2018-01-13T01:42:19Z",
    "body": "Examples from [Stack Overflow](https://stackoverflow.com/q/43590162/155423):\r\n\r\n```rust\r\nuse std::io::{BufRead, stdin};\r\n\r\nfn foo() -> usize {\r\n    let stdin = stdin();\r\n    let stdinlock = stdin.lock();\r\n    stdinlock\r\n        .lines()\r\n        .count()\r\n}\r\n\r\nfn main() {}\r\n```\r\n\r\nWorkarounds include an explicit return:\r\n\r\n```rust\r\nreturn stdinlock\r\n    .lines()\r\n    .count();\r\n```\r\n\r\nAnd a temporary variable:\r\n\r\n```rust\r\nlet x = stdinlock\r\n    .lines()\r\n    .count();\r\nx\r\n```\r\n\r\nThe same question has been [asked for `MutexGuard`](https://stackoverflow.com/q/48236107/155423).\r\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/357400013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/357400120",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-357400120",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 357400120,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzQwMDEyMA==",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-13T01:43:58Z",
    "updated_at": "2018-01-13T01:43:58Z",
    "body": "The original code [**does** work with NLL](https://play.rust-lang.org/?gist=822386cf3fabce6c7611e2790200e268&version=nightly):\r\n\r\n```rust\r\n#![feature(nll)]\r\n\r\nuse std::io::{stdin, BufRead};\r\n\r\nfn foo() -> usize {\r\n    let stdin = stdin();\r\n    let stdinlock = stdin.lock();\r\n    stdinlock\r\n        .lines()\r\n        .count()\r\n}\r\n\r\nfn main() {}\r\n```\r\n\r\n1.25.0-nightly (2018-01-11 73ac5d6a80f26c692f1e084b72d69637d7de2c8c)",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/357400120/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/357400440",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-357400440",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 357400440,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzQwMDQ0MA==",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-13T01:48:21Z",
    "updated_at": "2018-01-13T01:48:21Z",
    "body": "Skimming through the examples in this issue, about 1/3 don't include enough code to reproduce the error (like the ones in the original post), 1/3 are not fixed with today's NLL implementation, and 1/3 are indeed fixed. \ud83e\udd37\u200d\u2640\ufe0f ",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/357400440/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/390791810",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-390791810",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 390791810,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDc5MTgxMA==",
    "user": {
      "login": "Thiez",
      "id": 204550,
      "node_id": "MDQ6VXNlcjIwNDU1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/204550?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Thiez",
      "html_url": "https://github.com/Thiez",
      "followers_url": "https://api.github.com/users/Thiez/followers",
      "following_url": "https://api.github.com/users/Thiez/following{/other_user}",
      "gists_url": "https://api.github.com/users/Thiez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Thiez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Thiez/subscriptions",
      "organizations_url": "https://api.github.com/users/Thiez/orgs",
      "repos_url": "https://api.github.com/users/Thiez/repos",
      "events_url": "https://api.github.com/users/Thiez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Thiez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-05-21T21:42:18Z",
    "updated_at": "2018-05-21T21:42:18Z",
    "body": "I'd like to amend my struct-only testcases with the following case:\r\n\r\n```rust\r\nstruct S{ n: u8 }\r\nstruct T<'a>{ s: &'a S }\r\nimpl<'a> Drop for T<'a> { fn drop(&mut self){} }\r\n\r\n// The `if-else` makes it work...\r\nfn test_if_else() -> u8 {\r\n    let s = S{ n: 5 };\r\n    if true {\r\n        T{ s: &s }.s.n\r\n    } else {\r\n        T{ s: &s }.s.n\r\n    }\r\n}\r\n```\r\n\r\nThis compiles, *but* replacing the entire `if-else` with `T{ s: &s }.s.n` will give an error, also on nightly with NLL enabled. Error without NLL: \r\n\r\n```\r\nerror[E0597]: `s` does not live long enough\r\n  --> src/main.rs:17:16\r\n   |\r\n17 |         T{ s: &s }.s.n\r\n   |                ^ borrowed value does not live long enough\r\n18 |     \r\n19 | }\r\n   | - `s` dropped here while still borrowed\r\n   |\r\n   = note: values in a scope are dropped in the opposite order they are created\r\n```\r\n\r\nWith NLL:\r\n\r\n```\r\nerror[E0597]: `s` does not live long enough\r\n  --> src/main.rs:17:15\r\n   |\r\n17 |         T{ s: &s }.s.n\r\n   |         ------^^--\r\n   |         |     |\r\n   |         |     borrowed value does not live long enough\r\n   |         borrow may end up in a temporary, created here\r\n18 |     \r\n19 | }\r\n   | -\r\n   | |\r\n   | borrowed value only lives until here\r\n   | temporary later dropped here, potentially using the reference\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/390791810/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/421044930",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-421044930",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 421044930,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMTA0NDkzMA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-09-13T15:17:52Z",
    "updated_at": "2018-09-13T15:17:52Z",
    "body": "This issue was discussed (or at least alluded to) in today's compiler team meeting. I'm going to treat addressing it as part of overall potential NLL work, so I'm 1. tagging with A-NLL, and 2. putting on the Release milestone.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/421044930/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424378438",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-424378438",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 424378438,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDM3ODQzOA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-09-25T14:57:24Z",
    "updated_at": "2018-09-25T14:57:24Z",
    "body": "(Shifting effort into making a diagnostic to address this pain point; see #54556.)\r\n\r\nWIth that shift, this bug is dedicated to the hypothetical attempt to \"fix\" this problem in some way that isn't just changing diagnostics.\r\n\r\nBut also with that shift, this bug is no longer part of the NLL work, nor on the Rust 2018 release milestone.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/424378438/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/426963631",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-426963631",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 426963631,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNjk2MzYzMQ==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-10-04T10:16:02Z",
    "updated_at": "2018-10-04T10:16:02Z",
    "body": "Some months ago @Thiez wrote an interesting [note](https://github.com/rust-lang/rust/issues/21114#issuecomment-390791810) that pointed out an oddity where a tail expression with `if _ { EXPR } else { EXPR }` in the block tail position was compiling, while just `EXPR` in the tail expression (which you would think has the same dynamic semantics) was not compiling.\r\n\r\nI investigated, and discovered something interesting: Apparently the two forms do *not* have the same dynamic semantics, because the temporaries for the `EXPR` in `if _ { EXPR } else { EXPR }` are dropped sooner than for `EXPR` alone.\r\n\r\nHere is a concrete demonstration illustrating this ([play](https://play.rust-lang.org/?gist=cb65b1d73da27884cc3c90c62ea8263a&version=nightly&mode=debug&edition=2015):\r\n\r\n```rust\r\n#![feature(nll)]\r\n\r\nstruct T(&'static str, u8);\r\nimpl Drop for T {\r\n    fn drop(&mut self){ println!(\"Dropping T {:?}\", self.0); }\r\n}\r\n\r\nfn ends_with_if_else() -> u8 {\r\n    println!(\"entered `ends_with_if_else`\");\r\n    let _tmp = T(\"temp\", 0);\r\n    if true { T(\"expr\", 1).1 } else { T(\"expr\", 2).1 }\r\n}\r\n\r\nfn ends_with_tail() -> u8 {\r\n    println!(\"entered `ends_with_tail`\");\r\n    let _tmp = T(\"temp\", 3);\r\n    T(\"expr\", 4).1\r\n}\r\n\r\nfn main() {\r\n    {\r\n        let _outer1 = T(\"outer1\", 5);\r\n        println!(\"invoke method `ends_with_if_else`\");\r\n        ends_with_if_else();\r\n        println!(\"returned from `ends_with_if_else`\");\r\n    }\r\n\r\n    println!(\"\");\r\n\r\n    {\r\n        let _outer2 = T(\"outer2\", 6);\r\n        println!(\"invoke method `ends_with_tail`\");\r\n        ends_with_tail();\r\n        println!(\"returned from `ends_with_tail`\");\r\n    }\r\n}\r\n```\r\n\r\nThis prints:\r\n\r\n```\r\ninvoke method `ends_with_if_else`\r\nentered `ends_with_if_else`\r\nDropping T \"expr\"\r\nDropping T \"temp\"\r\nreturned from `ends_with_if_else`\r\nDropping T \"outer1\"\r\n\r\ninvoke method `ends_with_tail`\r\nentered `ends_with_tail`\r\nDropping T \"temp\"\r\nDropping T \"expr\"\r\nreturned from `ends_with_tail`\r\nDropping T \"outer2\"\r\n``` \r\n\r\nThe implication is that our current temporary r-value rules do not let temporaries from the tails of `if/else` expressions bubble out to the `if/else` itself.\r\n\r\nThis discrepancy is perhaps unfortunate, but I don't know if it would make sense to try to change it. If we were to try to change it, we should probably attach such a change to a particular Rust edition shift (and we're too close to the release of the 2018 edition to attempt it there.)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/426963631/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/427625147",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-427625147",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 427625147,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzYyNTE0Nw==",
    "user": {
      "login": "kwanyyoss",
      "id": 6327030,
      "node_id": "MDQ6VXNlcjYzMjcwMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6327030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kwanyyoss",
      "html_url": "https://github.com/kwanyyoss",
      "followers_url": "https://api.github.com/users/kwanyyoss/followers",
      "following_url": "https://api.github.com/users/kwanyyoss/following{/other_user}",
      "gists_url": "https://api.github.com/users/kwanyyoss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kwanyyoss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kwanyyoss/subscriptions",
      "organizations_url": "https://api.github.com/users/kwanyyoss/orgs",
      "repos_url": "https://api.github.com/users/kwanyyoss/repos",
      "events_url": "https://api.github.com/users/kwanyyoss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kwanyyoss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-10-07T04:32:30Z",
    "updated_at": "2018-10-07T04:32:30Z",
    "body": "\r\n> The implication is that our current temporary r-value rules do not let temporaries from the tails of `if/else` expressions bubble out to the `if/else` itself.\r\n\r\nI am confused.  I thought the behavior of \"ends_with_if_else\" is the good one.\r\n\r\n> \r\n> This discrepancy is perhaps unfortunate, but I don't know if it would make sense to try to change it. If we were to try to change it, we should probably attach such a change to a particular Rust edition shift (and we're too close to the release of the 2018 edition to attempt it there.)\r\n\r\nI added \"let ret = ...\" to the last statements and ended with a naked \"ret\" as returned value from both \"ends_with_tail\" and \"ends_with_if_else\".  The behavior of the new forms looks completely correct to me: [Playground](https://play.rust-lang.org/?gist=ebb66645915d73bbe12b81e5bac5e122&version=nightly&mode=debug&edition=2015)\r\n\r\n```\r\ninvoke method `ends_with_if_else`\r\nentered `ends_with_if_else`\r\nDropping T \"expr\"\r\nresult obtained\r\nDropping T \"temp\"\r\nreturned from `ends_with_if_else`\r\nDropping T \"outer1\"\r\n\r\ninvoke method `ends_with_tail`\r\nentered `ends_with_tail`\r\nDropping T \"expr\"\r\nresult obtained\r\nDropping T \"temp\"\r\nreturned from `ends_with_tail`\r\nDropping T \"outer2\"\r\n```\r\n\r\n\"expr\" was dropped even before \"result obtained\" as it should be.  I suppose this was also what @Thiez wanted.\r\n\r\nWhy is `let ret = T(\"expr\", 4).1; ret` not the same as `T(\"expr\", 4).1`? I even tried `let ret = &T(\"expr\", 4).1; *ret` and `let ret = &T(\"expr\", 4); ret.1`.  \"expr\" was dropped before \"temp\" in all 3 cases with \"let ret =\".\r\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/427625147/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/428373388",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-428373388",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 428373388,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyODM3MzM4OA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-10-09T22:21:36Z",
    "updated_at": "2018-10-16T12:55:58Z",
    "body": "@kwanyyoss wrote:\r\n\r\n> Why is `let ret = T(\"expr\", 4).1; ret` not the same as `T(\"expr\", 4).1`?\r\n\r\nBecause the former is assigning its result into a `let`-bound variable of the block, while the latter is passing its result back *outside* of the block directly, without going through a `let`-statement.\r\n\r\nFor better or for worse, the [temporary r-value lifetime rules][rules] we have chosen dictate that the temporaries are dropped at different times for these two scenarios.\r\n\r\n[rules]: https://doc.rust-lang.org/nightly/reference/expressions.html#temporary-lifetimes\r\n\r\nThere is much background discussion of this, as well as proposals for revising our semantics here. See e.g. \r\n * http://smallcultfollowing.com/babysteps/blog/2014/01/09/rvalue-lifetimes-in-rust/#appendix-b-tail-expressions-in-block\r\n * https://github.com/rust-lang/rust/pull/11585\r\n * https://github.com/rust-lang/rust/issues/12032\r\n * https://github.com/rust-lang/rust/issues/15023#issuecomment-191439057\r\n * https://github.com/rust-lang/rust/issues/49118#issuecomment-393113887",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/428373388/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/430167198",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-430167198",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 430167198,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDE2NzE5OA==",
    "user": {
      "login": "kwanyyoss",
      "id": 6327030,
      "node_id": "MDQ6VXNlcjYzMjcwMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6327030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kwanyyoss",
      "html_url": "https://github.com/kwanyyoss",
      "followers_url": "https://api.github.com/users/kwanyyoss/followers",
      "following_url": "https://api.github.com/users/kwanyyoss/following{/other_user}",
      "gists_url": "https://api.github.com/users/kwanyyoss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kwanyyoss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kwanyyoss/subscriptions",
      "organizations_url": "https://api.github.com/users/kwanyyoss/orgs",
      "repos_url": "https://api.github.com/users/kwanyyoss/repos",
      "events_url": "https://api.github.com/users/kwanyyoss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kwanyyoss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-10-16T09:26:43Z",
    "updated_at": "2018-10-16T09:26:43Z",
    "body": "Thanks @pnkfelix for the reply and references!\r\n\r\nI think the problem with this case is that the return value is just a \"u8\".  As long as the type is \"Copy\", it is hard to see why the lifetime of any temporary where the final value came from needs to be extended.  Along this line, I wonder if extending the lifetime of the entire tail expression may be too broad.  Does it make sense to extended (the lifetime of) only the last object created by the tail expression rather than the whole expression?\r\n\r\nI can find descriptions of how C++ deals with return objects and temporaries using copy constructors.  The way I understand it is that it is basically doing a \"placement new\" into an ancestor stack frame/scope.  Is there a similar treatise of how Rust returns objects or bubbles up the value of a `{}` block?  I doubt whether \"Clone\" is involved.\r\n\r\nI think there is still a common belief that `return <expr>;` at the end of a function is the same as `<expr>`.  I hope this issue will bring forth a section in Rust documentation on why they are not the same. ",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/430167198/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/430181511",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-430181511",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 430181511,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDE4MTUxMQ==",
    "user": {
      "login": "Havvy",
      "id": 731722,
      "node_id": "MDQ6VXNlcjczMTcyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/731722?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Havvy",
      "html_url": "https://github.com/Havvy",
      "followers_url": "https://api.github.com/users/Havvy/followers",
      "following_url": "https://api.github.com/users/Havvy/following{/other_user}",
      "gists_url": "https://api.github.com/users/Havvy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Havvy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Havvy/subscriptions",
      "organizations_url": "https://api.github.com/users/Havvy/orgs",
      "repos_url": "https://api.github.com/users/Havvy/repos",
      "events_url": "https://api.github.com/users/Havvy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Havvy/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-10-16T10:11:43Z",
    "updated_at": "2018-10-16T10:20:35Z",
    "body": "There's discussion about [temporary lifetimes in the Reference](https://doc.rust-lang.org/nightly/reference/expressions.html#temporary-lifetimes) but having an explicit section on this would make sense.\r\n\r\nEdit: Filed https://github.com/rust-lang-nursery/reference/issues/452",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/430181511/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/430224759",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-430224759",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 430224759,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDIyNDc1OQ==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-10-16T12:50:48Z",
    "updated_at": "2018-10-16T12:50:48Z",
    "body": "@kwanyyoss wrote: \r\n\r\n> I think the problem with this case is that the return value is just a \"u8\". As long as the type is \"Copy\", it is hard to see why the lifetime of any temporary where the final value came from needs to be extended. \r\n\r\nPart of the goal here is to have temporary r-value rules that are *uniform*, in the sense that they come directly from the syntactic structure from the program, and not from e.g. the types that have been inferred nor the results of the borrow-check analysis.\r\n\r\nHere's further elaboration of this point:\r\n\r\n * https://github.com/rust-lang/rust/issues/49118#issuecomment-393113887 \r\n * https://github.com/rust-lang/rust/issues/49118#issuecomment-402223926\r\n\r\n> Does it make sense to extended (the lifetime of) only the last object created by the tail expression rather than the whole expression?\r\n\r\nI don't know. My most immediate reaction to that is that it would really complicate encoding the cases where you *need* those intermediate values to survive long enough.\r\n\r\n(And of course, the interpretation of your question depends very much on how one interprets the phrase \"the last object created\" ...)\r\n\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/430224759/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/430229421",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-430229421",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 430229421,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDIyOTQyMQ==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-10-16T13:05:20Z",
    "updated_at": "2018-10-16T13:05:37Z",
    "body": "I wrote up above: \r\n\r\n> My most immediate reaction to that is that it would really complicate encoding the cases where you need those intermediate values to survive long enough.\r\n\r\nAs an attempt to illustrate this: people already complain about the fact that they are forced to add extra `let`-bindings of intermediate results in cases like this:\r\n\r\n```rust\r\nfn does_not_work() {\r\n    let x = &std::env::args().collect::<Vec<_>>().as_slice()[1..];\r\n    println!(\"{:?}\", x);\r\n}\r\n\r\nfn works() {\r\n    println!(\"{:?}\", &std::env::args().collect::<Vec<_>>().as_slice()[1..]);\r\n}\r\n```\r\n\r\n(See https://github.com/rust-lang/rust/issues/15023 )\r\n\r\nI suspect your proposal would further exacerbate this already present problem. But I have not done any experiment to validate that suspicion.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/430229421/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/437373108",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-437373108",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 437373108,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzM3MzEwOA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-11-09T14:20:17Z",
    "updated_at": "2018-11-09T14:20:17Z",
    "body": "I actually think this issue as described is effectively resolved now, under NLL at least.\r\n\r\nThere are related topics in terms of temporary lifetimes being unintuitive (#37612, #46413) and proposals to improve them (#15023).\r\n\r\nBut this specific issue was about how the dropck rules caused a number of cases to appear to regress, and as far as I can tell, NLL fixes those instances.\r\n\r\nSo I am going to tag this issue as NLL-fixed-by-NLL to reflect that.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/437373108/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/487539515",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-487539515",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 487539515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NzUzOTUxNQ==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-04-29T11:07:30Z",
    "updated_at": "2019-04-29T11:07:30Z",
    "body": "NLL (migrate mode) is enabled in all editions as of PR #59114.\r\n\r\nI went through all the cases listed in the table in the description; 2015 and 2018 editions indeed now match in their behaviors.\r\n\r\nThe only case in the table that was not addressed by NLL migrate mode, is:\r\n\r\n| [jonas-schievink demo][] | \ud83e\udd22| \ud83e\udd22 |  \u2705  | #42574\r\n\r\n[jonas-schievink demo]: https://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=366c0fb4a21ffacdf98008fa60d30c38\r\n\r\n(Note that you need to comment out the `#![feature(nll)]` to observe the undesirable behavior.)\r\n\r\nSince #42574 remains open as a bug, we can safely close this ticket as fixed by PR #59114.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/487539515/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/488299436",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-488299436",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 488299436,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4ODI5OTQzNg==",
    "user": {
      "login": "ZhangHanDong",
      "id": 27893,
      "node_id": "MDQ6VXNlcjI3ODkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/27893?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ZhangHanDong",
      "html_url": "https://github.com/ZhangHanDong",
      "followers_url": "https://api.github.com/users/ZhangHanDong/followers",
      "following_url": "https://api.github.com/users/ZhangHanDong/following{/other_user}",
      "gists_url": "https://api.github.com/users/ZhangHanDong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ZhangHanDong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ZhangHanDong/subscriptions",
      "organizations_url": "https://api.github.com/users/ZhangHanDong/orgs",
      "repos_url": "https://api.github.com/users/ZhangHanDong/repos",
      "events_url": "https://api.github.com/users/ZhangHanDong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ZhangHanDong/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-05-01T14:35:53Z",
    "updated_at": "2019-05-01T14:35:53Z",
    "body": "@pnkfelix  https://github.com/rust-lang/rust/issues/49616  has not been resolved yet ",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/488299436/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/533487338",
    "html_url": "https://github.com/rust-lang/rust/issues/21114#issuecomment-533487338",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21114",
    "id": 533487338,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMzQ4NzMzOA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-09-20T09:47:30Z",
    "updated_at": "2019-09-20T09:59:49Z",
    "body": "@ZhangHanDong : The issue in #49616 is that you have a `RefMut` created as a temporary, and it is dropped after the `RefCell` it refers to.\r\n\r\nThe reason the destructor runs at that time is because the temporaries in the tail expression of a block are specified as being dropped *after* the locals of that block are dropped.\r\n\r\nI don't know if there's a reasonable way to resolve that, apart from changing the language to allow us to run such destructors *earlier* (which is the effect one gets in that case by putting a semi-colon after the tail expression).\r\n\r\nBut in any case, the error message ([play](https://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=a54f16fe254228cc42c23e1554dbe78b)) *does* describe what is happening, and does tell you how to resolve it. This is not something that NLL was ever going to address; NLL is about changes to the static semantics of the language, but the problem you are describing in #49616 is an issue with the *dynamic semantics*.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/533487338/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
