{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/23282",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/23282/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/23282/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/23282/events",
  "html_url": "https://github.com/rust-lang/rust/pull/23282",
  "id": 60701126,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MzA5Njg1NDQ=",
  "number": 23282,
  "title": "Change the `Fn` traits to use inheritance, not bridge impls",
  "user": {
    "login": "nikomatsakis",
    "id": 155238,
    "node_id": "MDQ6VXNlcjE1NTIzOA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nikomatsakis",
    "html_url": "https://github.com/nikomatsakis",
    "followers_url": "https://api.github.com/users/nikomatsakis/followers",
    "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
    "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
    "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
    "repos_url": "https://api.github.com/users/nikomatsakis/repos",
    "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "nrc",
    "id": 762626,
    "node_id": "MDQ6VXNlcjc2MjYyNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nrc",
    "html_url": "https://github.com/nrc",
    "followers_url": "https://api.github.com/users/nrc/followers",
    "following_url": "https://api.github.com/users/nrc/following{/other_user}",
    "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nrc/subscriptions",
    "organizations_url": "https://api.github.com/users/nrc/orgs",
    "repos_url": "https://api.github.com/users/nrc/repos",
    "events_url": "https://api.github.com/users/nrc/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nrc/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "nrc",
      "id": 762626,
      "node_id": "MDQ6VXNlcjc2MjYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nrc",
      "html_url": "https://github.com/nrc",
      "followers_url": "https://api.github.com/users/nrc/followers",
      "following_url": "https://api.github.com/users/nrc/following{/other_user}",
      "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nrc/subscriptions",
      "organizations_url": "https://api.github.com/users/nrc/orgs",
      "repos_url": "https://api.github.com/users/nrc/repos",
      "events_url": "https://api.github.com/users/nrc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nrc/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2015-03-11T17:57:09Z",
  "updated_at": "2015-03-25T05:09:07Z",
  "closed_at": "2015-03-25T05:09:07Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/23282",
    "html_url": "https://github.com/rust-lang/rust/pull/23282",
    "diff_url": "https://github.com/rust-lang/rust/pull/23282.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/23282.patch",
    "merged_at": "2015-03-25T05:09:07Z"
  },
  "body": "The primary motivation here is to sidestep #19032 -- for a time, I thought that we should improve coherence or otherwise extend the language, but I now think that any such changes will require more time to bake. In the meantime, inheritance amongst the fn traits is both logically correct _and_ a simple solution to that obstacle. This change introduces inheritance and modifies the compiler so that it can properly generate impls for closures and fns.\n\nThings enabled by this PR (but not included in this PR):\n1. An impl of `FnMut` for `&mut F` where `F : FnMut` (https://github.com/rust-lang/rust/issues/23015).\n2. A better version of `Thunk` I've been calling `FnBox`.\n\nI did not include either of these in the PR because:\n1. Adding the impls in 1 currently induces a coherence conflict with the pattern trait. This is interesting and merits some discussion. \n2. `FnBox` deserves to be a PR of its own.\n\nThe main downside to this design is (a) the need to write impls by hand; (b) the possibility of implementing `FnMut` with different semantics from `Fn`, etc. Point (a) is minor -- in particular, it does not affect normal closure usage -- and could be addressed in the future in many ways (better defaults; convenient macros; specialization; etc). Point (b) is unfortunate but \"just a bug\" from my POV, and certainly not unique to these traits (c.f. Copy/Clone, PartialEq/Eq, etc). (Until we lift the feature-gate on implementing the Fn traits, in any case, there is room to correct both of these if we find a nice way.)\n\nNote that I believe this change is reversible in the future if we decide on another course of action, due to the feature gate on implementing the `Fn` traits, though I do not (currently) think we should reverse it.\n\nFixes #18835.\n\nr? @nrc \n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/23282/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/23282/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
