[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87460573",
    "html_url": "https://github.com/rust-lang/rust/issues/23834#issuecomment-87460573",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23834",
    "id": 87460573,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDYwNTcz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-29T19:27:47Z",
    "updated_at": "2015-03-29T19:27:47Z",
    "body": "The reproduction looks like it may have forgotten `#![no_std]` in the library itself, perhaps that was left out by accident?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87460573/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87461065",
    "html_url": "https://github.com/rust-lang/rust/issues/23834#issuecomment-87461065",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23834",
    "id": 87461065,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDYxMDY1",
    "user": {
      "login": "Virtlink",
      "id": 647530,
      "node_id": "MDQ6VXNlcjY0NzUzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/647530?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Virtlink",
      "html_url": "https://github.com/Virtlink",
      "followers_url": "https://api.github.com/users/Virtlink/followers",
      "following_url": "https://api.github.com/users/Virtlink/following{/other_user}",
      "gists_url": "https://api.github.com/users/Virtlink/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Virtlink/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Virtlink/subscriptions",
      "organizations_url": "https://api.github.com/users/Virtlink/orgs",
      "repos_url": "https://api.github.com/users/Virtlink/repos",
      "events_url": "https://api.github.com/users/Virtlink/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Virtlink/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-29T19:31:58Z",
    "updated_at": "2015-03-29T19:34:41Z",
    "body": "These lines are present in the `lib.rs` of both `libcore` and `liballoc` when I get the errors:\n\n```\n#![feature(no_std)]\n#![no_std]\n```\n\nIt happens without changing a thing in the original source files. In my kernel's main file I do have `#![no_std]`, but I still get those errors. In the reproduction instructions above I don't even have a library that uses those dependencies, I'm just trying to build `liballoc` on its own.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87461065/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87462223",
    "html_url": "https://github.com/rust-lang/rust/issues/23834#issuecomment-87462223",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23834",
    "id": 87462223,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDYyMjIz",
    "user": {
      "login": "rprichard",
      "id": 1572855,
      "node_id": "MDQ6VXNlcjE1NzI4NTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1572855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rprichard",
      "html_url": "https://github.com/rprichard",
      "followers_url": "https://api.github.com/users/rprichard/followers",
      "following_url": "https://api.github.com/users/rprichard/following{/other_user}",
      "gists_url": "https://api.github.com/users/rprichard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rprichard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rprichard/subscriptions",
      "organizations_url": "https://api.github.com/users/rprichard/orgs",
      "repos_url": "https://api.github.com/users/rprichard/repos",
      "events_url": "https://api.github.com/users/rprichard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rprichard/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-29T19:49:14Z",
    "updated_at": "2015-03-29T19:49:14Z",
    "body": "The reproduction failed for me:\n\n```\n./test.sh: 14: cd: can't cd to ../lib/libcore\n```\n\nThe `cd ../lib/libcore` should be `cd ../libcore`, I think.  The same problem happens with `cd ../lib/liballoc` -- it should be `cd ../liballoc`.\n\nWith those two changes, I'm able to reproduce the duplicate entry errors.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87462223/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87464856",
    "html_url": "https://github.com/rust-lang/rust/issues/23834#issuecomment-87464856",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23834",
    "id": 87464856,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDY0ODU2",
    "user": {
      "login": "Virtlink",
      "id": 647530,
      "node_id": "MDQ6VXNlcjY0NzUzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/647530?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Virtlink",
      "html_url": "https://github.com/Virtlink",
      "followers_url": "https://api.github.com/users/Virtlink/followers",
      "following_url": "https://api.github.com/users/Virtlink/following{/other_user}",
      "gists_url": "https://api.github.com/users/Virtlink/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Virtlink/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Virtlink/subscriptions",
      "organizations_url": "https://api.github.com/users/Virtlink/orgs",
      "repos_url": "https://api.github.com/users/Virtlink/repos",
      "events_url": "https://api.github.com/users/Virtlink/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Virtlink/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-29T19:58:06Z",
    "updated_at": "2015-03-29T20:15:56Z",
    "body": "@rprichard You're right. I fixed the error in my reproduction.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87464856/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87469254",
    "html_url": "https://github.com/rust-lang/rust/issues/23834#issuecomment-87469254",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23834",
    "id": 87469254,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDY5MjU0",
    "user": {
      "login": "rprichard",
      "id": 1572855,
      "node_id": "MDQ6VXNlcjE1NzI4NTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1572855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rprichard",
      "html_url": "https://github.com/rprichard",
      "followers_url": "https://api.github.com/users/rprichard/followers",
      "following_url": "https://api.github.com/users/rprichard/following{/other_user}",
      "gists_url": "https://api.github.com/users/rprichard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rprichard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rprichard/subscriptions",
      "organizations_url": "https://api.github.com/users/rprichard/orgs",
      "repos_url": "https://api.github.com/users/rprichard/repos",
      "events_url": "https://api.github.com/users/rprichard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rprichard/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-29T20:24:41Z",
    "updated_at": "2015-03-29T20:24:41Z",
    "body": "It looks like `rustc` is pulling in lang items from both the `libcore` you compiled and the `libcore` from the system root.  I tried setting the sysroot to an empty directory, but then the build failed, because it couldn't find `libc`.  `liballoc` needs `libc` unless `external_funcs` or `external_crate` is set.\n\n`Cargo.toml` specifies `external_funcs`, but `cargo` does not actually pass it to `rustc`.  Here's the `cargo --verbose` output:\n\n```\nProcess didn't exit successfully: `rustc src/lib.rs --crate-name alloc --crate-type lib -g -C metadata=4b6a8ab3fd4b7ba5 -C extra-filename=-4b6a8ab3fd4b7ba5 --out-dir /home/rprichard/mess/TEST/alloctest/lib/liballoc/target/debug --emit=dep-info,link -L dependency=/home/rprichard/mess/TEST/alloctest/lib/liballoc/target/debug -L dependency=/home/rprichard/mess/TEST/alloctest/lib/liballoc/target/debug/deps --extern core=/home/rprichard/mess/TEST/alloctest/lib/liballoc/target/debug/deps/libcore-fa8a124aff706daf.rlib`\n```\n\nThis manifest change fixes it:\n\nIn `lib/liballoc/Cargo.toml`, replace:\n\n```\n[features]\nexternal_funcs = []\n```\n\nwith:\n\n```\n[features]\ndefault = [\"external_funcs\"]\nexternal_funcs = []\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87469254/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87471492",
    "html_url": "https://github.com/rust-lang/rust/issues/23834#issuecomment-87471492",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23834",
    "id": 87471492,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDcxNDky",
    "user": {
      "login": "Virtlink",
      "id": 647530,
      "node_id": "MDQ6VXNlcjY0NzUzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/647530?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Virtlink",
      "html_url": "https://github.com/Virtlink",
      "followers_url": "https://api.github.com/users/Virtlink/followers",
      "following_url": "https://api.github.com/users/Virtlink/following{/other_user}",
      "gists_url": "https://api.github.com/users/Virtlink/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Virtlink/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Virtlink/subscriptions",
      "organizations_url": "https://api.github.com/users/Virtlink/orgs",
      "repos_url": "https://api.github.com/users/Virtlink/repos",
      "events_url": "https://api.github.com/users/Virtlink/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Virtlink/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-29T20:33:17Z",
    "updated_at": "2015-03-29T20:33:17Z",
    "body": "@rprichard Yes! Thank you! That solves it.\n\nIs this intended behavior or a bug?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87471492/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87472465",
    "html_url": "https://github.com/rust-lang/rust/issues/23834#issuecomment-87472465",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23834",
    "id": 87472465,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDcyNDY1",
    "user": {
      "login": "rprichard",
      "id": 1572855,
      "node_id": "MDQ6VXNlcjE1NzI4NTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1572855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rprichard",
      "html_url": "https://github.com/rprichard",
      "followers_url": "https://api.github.com/users/rprichard/followers",
      "following_url": "https://api.github.com/users/rprichard/following{/other_user}",
      "gists_url": "https://api.github.com/users/rprichard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rprichard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rprichard/subscriptions",
      "organizations_url": "https://api.github.com/users/rprichard/orgs",
      "repos_url": "https://api.github.com/users/rprichard/repos",
      "events_url": "https://api.github.com/users/rprichard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rprichard/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-29T20:37:24Z",
    "updated_at": "2015-03-29T20:37:24Z",
    "body": "Not sure; I'm fairly unfamiliar with cargo.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87472465/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87711898",
    "html_url": "https://github.com/rust-lang/rust/issues/23834#issuecomment-87711898",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23834",
    "id": 87711898,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NzExODk4",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-30T14:56:06Z",
    "updated_at": "2015-03-30T14:56:06Z",
    "body": "@alexcrichton is this intended Cargo behavior or not?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87711898/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87741155",
    "html_url": "https://github.com/rust-lang/rust/issues/23834#issuecomment-87741155",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23834",
    "id": 87741155,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NzQxMTU1",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-30T16:22:41Z",
    "updated_at": "2015-03-30T16:22:41Z",
    "body": "Yes it looks like `liballoc` [depends on `libc`](https://github.com/rust-lang/rust/blob/14192d6df5cc714e5c9a3ca70b08f2514d977be2/src/liballoc/lib.rs#L89-L90) so if you're not specifying the `external_funcs` feature then it will pull that in, which then transitively depends on the libcore in the main distribution, causing the duplicates here.\n\nIn short, I do believe this is all intended behavior!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87741155/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87835680",
    "html_url": "https://github.com/rust-lang/rust/issues/23834#issuecomment-87835680",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23834",
    "id": 87835680,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3ODM1Njgw",
    "user": {
      "login": "Virtlink",
      "id": 647530,
      "node_id": "MDQ6VXNlcjY0NzUzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/647530?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Virtlink",
      "html_url": "https://github.com/Virtlink",
      "followers_url": "https://api.github.com/users/Virtlink/followers",
      "following_url": "https://api.github.com/users/Virtlink/following{/other_user}",
      "gists_url": "https://api.github.com/users/Virtlink/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Virtlink/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Virtlink/subscriptions",
      "organizations_url": "https://api.github.com/users/Virtlink/orgs",
      "repos_url": "https://api.github.com/users/Virtlink/repos",
      "events_url": "https://api.github.com/users/Virtlink/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Virtlink/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-30T21:26:15Z",
    "updated_at": "2015-03-30T21:26:39Z",
    "body": "@alexcrichton I did specify the `external_funcs` feature in `liballoc` `Cargo.toml`:\n\n```\n[package]\nname = \"alloc\"\nversion = \"0.0.1\"\nauthors = [ \"some@example.com\" ]\n\n[features]\nexternal_funcs = []\n\n[dependencies.core]\npath = \"../libcore\"\n```\n\nApparently it needs to be set as the default:\n\n```\n[features]\ndefault = [\"external_funcs\"]\nexternal_funcs = []\n```\n\nThis wasn't the case before. Is that really intended?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/87835680/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
