[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/46895004",
    "html_url": "https://github.com/rust-lang/rust/issues/15123#issuecomment-46895004",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15123",
    "id": 46895004,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODk1MDA0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-23T20:07:39Z",
    "updated_at": "2014-06-23T20:07:39Z",
    "body": "This appears to be a bug in jemalloc:\n\n``` rust\nextern crate alloc;\n\nfn main() {\n    unsafe {\n        println!(\"{}\", alloc::heap::allocate(0 - 1, 8));\n    }\n}\n```\n\n```\n$ lldb ./foo \nr\nCurrent executable set to './foo' (x86_64).\n(lldb) r\nProcess 48594 launched: './foo' (x86_64)\nProcess 48594 stopped\n* thread #1: tid = 0xb9eef, 0x000000010006fa2c foo`je_mallocx [inlined] je_small_size2bin_lookup + 15 at arena.h:552, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=EXC_I386_GPFLT)\n    frame #0: 0x000000010006fa2c foo`je_mallocx [inlined] je_small_size2bin_lookup + 15 at arena.h:552\n(lldb) bt\n* thread #1: tid = 0xb9eef, 0x000000010006fa2c foo`je_mallocx [inlined] je_small_size2bin_lookup + 15 at arena.h:552, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=EXC_I386_GPFLT)\n  * frame #0: 0x000000010006fa2c foo`je_mallocx [inlined] je_small_size2bin_lookup + 15 at arena.h:552\n    frame #1: 0x000000010006fa1d foo`je_mallocx [inlined] je_small_size2bin + 13 at arena.h:564\n    frame #2: 0x000000010006fa10 foo`je_mallocx [inlined] je_tcache_alloc_small at tcache.h:266\n    frame #3: 0x000000010006fa10 foo`je_mallocx [inlined] je_arena_malloc + 215 at arena.h:1074\n    frame #4: 0x000000010006f939 foo`je_mallocx [inlined] je_ipalloct(alignment=<unavailable>) + 22 at jemalloc_internal.h:686\n    frame #5: 0x000000010006f923 foo`je_mallocx [inlined] imallocx(alignment=<unavailable>, arena=<unavailable>) at jemalloc.c:1373\n    frame #6: 0x000000010006f923 foo`je_mallocx(size=<unavailable>, flags=<unavailable>) + 4051 at jemalloc.c:1456\n    frame #7: 0x0000000100001765 foo`heap::imp::allocate::hc6636e5636f6474b8ba::v0.0 + 117\n    frame #8: 0x00000001000016e2 foo`heap::allocate::hb186c7c7af3e0a9fQba::v0.0 + 66\n    frame #9: 0x000000010000159e foo`main::hb85e3e3480a04aa0faa::v0.0 + 78\n    frame #10: 0x0000000100046579 foo`start::closure.7382 + 105\n    frame #11: 0x00000001000592f8 foo`task::Task::run::closure.5182 + 56\n    frame #12: 0x000000010005c7dc foo`rust_try + 12\n    frame #13: 0x000000010005af4a foo`unwind::try::hb6705ce8e0cb20d2LCd::v0.11.0.pre + 74\n    frame #14: 0x00000001000591c5 foo`task::Task::run::hf9d6a095707c904bXSc::v0.11.0.pre + 101\n    frame #15: 0x000000010004636e foo`start::h8ff60cbf268dcceaVre::v0.11.0.pre + 574\n    frame #16: 0x000000010004611c foo`lang_start::h3504ba38985a4483fre::v0.11.0.pre + 124\n    frame #17: 0x000000010000168f foo`main + 79\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/46895004/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/46898330",
    "html_url": "https://github.com/rust-lang/rust/issues/15123#issuecomment-46898330",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15123",
    "id": 46898330,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODk4MzMw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-23T20:35:48Z",
    "updated_at": "2014-06-23T20:35:48Z",
    "body": "Reported as https://github.com/jemalloc/jemalloc/issues/90\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/46898330/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/53145716",
    "html_url": "https://github.com/rust-lang/rust/issues/15123#issuecomment-53145716",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15123",
    "id": 53145716,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMTQ1NzE2",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-23T07:44:22Z",
    "updated_at": "2014-08-23T07:44:22Z",
    "body": "This is still a segfault in Rust. There are various ways to write it, also `Vec::<u8>::with_capacity(-1)`\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/53145716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/53146940",
    "html_url": "https://github.com/rust-lang/rust/issues/15123#issuecomment-53146940",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15123",
    "id": 53146940,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMTQ2OTQw",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-23T08:39:46Z",
    "updated_at": "2014-08-23T08:39:46Z",
    "body": "Quote from https://github.com/jemalloc/jemalloc/issues/90:\n\n> From the manual re: mallocx(): Behavior is undefined if size is 0, or if request size overflows due to size class and/or alignment constraints.\n\nSo we need to be checking the size for these overflows (I don't know how this can be done properly...).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/53146940/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55453679",
    "html_url": "https://github.com/rust-lang/rust/issues/15123#issuecomment-55453679",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15123",
    "id": 55453679,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDUzNjc5",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-12T20:03:12Z",
    "updated_at": "2014-09-12T20:03:19Z",
    "body": "The specific issue here is fixed, and I've opened #17207 for the remaining problem.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55453679/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
