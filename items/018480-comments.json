[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61679730",
    "html_url": "https://github.com/rust-lang/rust/pull/18480#issuecomment-61679730",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18480",
    "id": 61679730,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNjc5NzMw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-04T17:28:09Z",
    "updated_at": "2014-11-04T17:28:09Z",
    "body": "Hm, this is bouncing primarily because this doesn't compile:\n\n``` rust\nconst FOO: &'static [u8, ..3] = [1, 2, 3];\n\nfn main() {\n    let a = [1u8, 2, 3].as_slice();\n    match a {\n        FOO => {}\n        _ => {}\n    }\n}\n```\n\n@jakub-, do you know if this would be an easy change to make to checking matches?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/61679730/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/62146958",
    "html_url": "https://github.com/rust-lang/rust/pull/18480#issuecomment-62146958",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18480",
    "id": 62146958,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMTQ2OTU4",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-07T13:50:16Z",
    "updated_at": "2014-11-07T13:50:28Z",
    "body": "@alexcrichton Just to say, I didn't miss your comment, will investigate soon!\n\nAt the first glance, for the above to work it would require an implicit coercion which we try to stay away from in patterns, I think. We definitely need more principled thinking here before 1.0, though!\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/62146958/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63239338",
    "html_url": "https://github.com/rust-lang/rust/pull/18480#issuecomment-63239338",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18480",
    "id": 63239338,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMjM5MzM4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-16T21:07:49Z",
    "updated_at": "2014-11-16T21:07:49Z",
    "body": "I'll reopen this when I have a chance to fix this.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63239338/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73910206",
    "html_url": "https://github.com/rust-lang/rust/pull/18480#issuecomment-73910206",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18480",
    "id": 73910206,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczOTEwMjA2",
    "user": {
      "login": "geofft",
      "id": 74644,
      "node_id": "MDQ6VXNlcjc0NjQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/74644?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/geofft",
      "html_url": "https://github.com/geofft",
      "followers_url": "https://api.github.com/users/geofft/followers",
      "following_url": "https://api.github.com/users/geofft/following{/other_user}",
      "gists_url": "https://api.github.com/users/geofft/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/geofft/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/geofft/subscriptions",
      "organizations_url": "https://api.github.com/users/geofft/orgs",
      "repos_url": "https://api.github.com/users/geofft/repos",
      "events_url": "https://api.github.com/users/geofft/events{/privacy}",
      "received_events_url": "https://api.github.com/users/geofft/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-11T16:20:25Z",
    "updated_at": "2015-02-11T16:20:25Z",
    "body": "@alexcrichton Can you help me understand what is the conceptual issue with that code snippet not compiling? Is it that there would be no way to match a `&[u8]` against a bytestring literal, because match patterns are patterns, not full expressions (so you can't even insist on people calling `.as_slice()`)? The buildbot links no longer work so I can't see the actual tests that failed.\n\nWhat are the implications of allowing this specific coercion in match patterns? Given that they have to be constants, the specific case of allowing either sized or unsized arrays to match an unsized array seems like it ought to be fine (for any array type), but I'm sure there's complexity here that I'm missing.\n\nI'm interested in this feature (as I understand it, it's required for C-ABI dynamic libraries to export string constants / static pointers to strings without [trickery](https://github.com/whipsch/export_cstr)) so I'd like to know what needs to be done to get this change into 1.0.\n\nIt would also be fine for my use case if there were special syntax to make a bytestring (or string!) literal sized, but they remained unsized by default; it would certainly be a readability improvement over using an external macro.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73910206/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73920643",
    "html_url": "https://github.com/rust-lang/rust/pull/18480#issuecomment-73920643",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18480",
    "id": 73920643,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczOTIwNjQz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-11T17:11:09Z",
    "updated_at": "2015-02-11T17:11:09Z",
    "body": "@geofft the problem was getting this code to compile:\n\n``` rust\nconst FOO: &'static [u8; 3] = [1, 2, 3];\n\nfn main() {\n    let a = [1u8, 2, 3].as_slice();\n    match a {\n        FOO => {}\n        _ => {}\n    }\n}\n```\n\nThis would prevent match arms using `b\"foo\"` as a pattern, for example.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73920643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73985409",
    "html_url": "https://github.com/rust-lang/rust/pull/18480#issuecomment-73985409",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18480",
    "id": 73985409,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczOTg1NDA5",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-11T23:10:35Z",
    "updated_at": "2015-02-11T23:10:35Z",
    "body": "@alexcrichton \nI tried to implement this (again) last week and a straightforward workaround succesfully compiled:\n\n```\n// From libstd/path.rs\n fn parse_single_component(comp: &[u8]) -> Option<Component> {\n+    const DOT: &'static [u8] = b\".\";\n+    const DOTDOT: &'static [u8] = b\"..\";\n+    const EMPTY: &'static [u8] = b\"\";\n     match comp {\n-        b\".\" => Some(Component::CurDir),\n-        b\"..\" => Some(Component::ParentDir),\n-        b\"\" => None,\n+        DOT => Some(Component::CurDir),\n+        DOTDOT => Some(Component::ParentDir),\n+        EMPTY => None,\n         _ => Some(Component::Normal(unsafe { u8_slice_as_os_str(comp) }))\n     }\n }\n```\n\nThe true problem is in the LLVM error #17233 , which apparently is't related to b\"...\" being a DST, as @huonw assumed, because it appears exactly when I change b\"...\" to be a _non_-DST and try to compile libstd. I'd really like to have this LLVM issue fixed, but have no idea how to do it myself. (Any chances that #21744 will resolve it?)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73985409/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73988398",
    "html_url": "https://github.com/rust-lang/rust/pull/18480#issuecomment-73988398",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18480",
    "id": 73988398,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczOTg4Mzk4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-11T23:32:55Z",
    "updated_at": "2015-02-11T23:32:55Z",
    "body": "I suspect this is likely a problem in our own compiler vs LLVM, and I wouldn't personally take this patch with the require workaround you listed unfortunately (although it should in theory be easy to fix, I just don't know where to do so)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/73988398/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/82908940",
    "html_url": "https://github.com/rust-lang/rust/pull/18480#issuecomment-82908940",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18480",
    "id": 82908940,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyOTA4OTQw",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-18T11:18:55Z",
    "updated_at": "2015-03-18T11:18:55Z",
    "body": "@geofft \nIt is implemented now, the PR was merged today.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/82908940/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/83050345",
    "html_url": "https://github.com/rust-lang/rust/pull/18480#issuecomment-83050345",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18480",
    "id": 83050345,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMDUwMzQ1",
    "user": {
      "login": "geofft",
      "id": 74644,
      "node_id": "MDQ6VXNlcjc0NjQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/74644?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/geofft",
      "html_url": "https://github.com/geofft",
      "followers_url": "https://api.github.com/users/geofft/followers",
      "following_url": "https://api.github.com/users/geofft/following{/other_user}",
      "gists_url": "https://api.github.com/users/geofft/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/geofft/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/geofft/subscriptions",
      "organizations_url": "https://api.github.com/users/geofft/orgs",
      "repos_url": "https://api.github.com/users/geofft/repos",
      "events_url": "https://api.github.com/users/geofft/events{/privacy}",
      "received_events_url": "https://api.github.com/users/geofft/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-18T16:38:07Z",
    "updated_at": "2015-03-18T16:38:07Z",
    "body": "oh awesome! I'll play around with it when the next nightly hits. From the discussion on #22838, sounds like you went with the approach of having bytestring literals in patterns work as either `&[u8]` or `&[u8; N]`? That sounds perfect.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/83050345/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85783714",
    "html_url": "https://github.com/rust-lang/rust/pull/18480#issuecomment-85783714",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18480",
    "id": 85783714,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1NzgzNzE0",
    "user": {
      "login": "geofft",
      "id": 74644,
      "node_id": "MDQ6VXNlcjc0NjQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/74644?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/geofft",
      "html_url": "https://github.com/geofft",
      "followers_url": "https://api.github.com/users/geofft/followers",
      "following_url": "https://api.github.com/users/geofft/following{/other_user}",
      "gists_url": "https://api.github.com/users/geofft/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/geofft/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/geofft/subscriptions",
      "organizations_url": "https://api.github.com/users/geofft/orgs",
      "repos_url": "https://api.github.com/users/geofft/repos",
      "events_url": "https://api.github.com/users/geofft/events{/privacy}",
      "received_events_url": "https://api.github.com/users/geofft/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-25T01:56:47Z",
    "updated_at": "2015-03-25T01:56:47Z",
    "body": "@petrochenkov Thanks a bunch, I can [now use bytestring literals in static variables](https://github.com/geofft/bashplugin-rust/commit/1d847ca148573bb5d9531faee15aed0154c57e79). Double-casting `as *const u8 as *const libc::c_char` is a little awkward but totally manageable.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/85783714/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
