[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24173631",
    "html_url": "https://github.com/rust-lang/rust/pull/9091#issuecomment-24173631",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9091",
    "id": 24173631,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MTczNjMx",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-10T16:13:27Z",
    "updated_at": "2013-09-10T16:13:59Z",
    "body": "`vec::bytes` did have what I wanted, thanks! Checking again, it looks like `copy_from` does end up optimizing decently well, but not in to a memmove like `vec::bytes::copy_memory` does.\n\nIncidentally, it looks like the compiler is generating code that actually calls `cast::transmute` even when compiling with `-O`:\n\n``` asm\n00000000000009f0 <_ZN4cast9transmute19hb053f0de10ad2e82an4v0.0E>:\n 9f0:   64 48 3b 24 25 70 00    cmp    %fs:0x70,%rsp\n 9f7:   00 00 \n 9f9:   77 1a                   ja     a15 <_ZN4cast9transmute19hb053f0de10ad2e82an4v0.0E+0x25>\n 9fb:   49 ba 08 00 00 00 00    movabs $0x8,%r10\n a02:   00 00 00 \n a05:   49 bb 00 00 00 00 00    movabs $0x0,%r11\n a0c:   00 00 00 \n a0f:   e8 70 00 00 00          callq  a84 <__morestack>\n a14:   c3                      retq   \n a15:   55                      push   %rbp\n a16:   48 89 e5                mov    %rsp,%rbp\n a19:   48 89 f0                mov    %rsi,%rax\n a1c:   5d                      pop    %rbp\n a1d:   c3                      retq   \n a1e:   90                      nop\n a1f:   90                      nop\n\n0000000000000a20 <_ZN9fast_copy16hcf3bdb59c72c85b4v0.0E>:\n a20:   64 48 3b 24 25 70 00    cmp    %fs:0x70,%rsp\n a27:   00 00 \n a29:   77 1a                   ja     a45 <_ZN9fast_copy16hcf3bdb59c72c85b4v0.0E+0x25>\n a2b:   49 ba 28 00 00 00 00    movabs $0x28,%r10\n a32:   00 00 00 \n a35:   49 bb 00 00 00 00 00    movabs $0x0,%r11\n a3c:   00 00 00 \n a3f:   e8 40 00 00 00          callq  a84 <__morestack>\n a44:   c3                      retq   \n a45:   55                      push   %rbp\n a46:   48 89 e5                mov    %rsp,%rbp\n a49:   41 57                   push   %r15\n a4b:   41 56                   push   %r14\n a4d:   53                      push   %rbx\n a4e:   50                      push   %rax\n a4f:   4c 8b 36                mov    (%rsi),%r14\n a52:   4c 8b 7e 08             mov    0x8(%rsi),%r15\n a56:   48 8b 32                mov    (%rdx),%rsi\n a59:   48 8b 5a 08             mov    0x8(%rdx),%rbx\n a5d:   e8 8e ff ff ff          callq  9f0 <_ZN4cast9transmute19hb053f0de10ad2e82an4v0.0E>\n a62:   49 39 df                cmp    %rbx,%r15\n a65:   49 0f 42 df             cmovb  %r15,%rbx\n a69:   4c 89 f7                mov    %r14,%rdi\n a6c:   48 89 c6                mov    %rax,%rsi\n a6f:   48 89 da                mov    %rbx,%rdx\n a72:   e8 f9 fd ff ff          callq  870 <memmove@plt>\n a77:   48 83 c4 08             add    $0x8,%rsp\n a7b:   5b                      pop    %rbx\n a7c:   41 5e                   pop    %r14\n a7e:   41 5f                   pop    %r15\n a80:   5d                      pop    %rbp\n a81:   c3                      retq   \n a82:   66 90                   xchg   %ax,%ax\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24173631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24173863",
    "html_url": "https://github.com/rust-lang/rust/pull/9091#issuecomment-24173863",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9091",
    "id": 24173863,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MTczODYz",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-10T16:16:35Z",
    "updated_at": "2013-09-10T16:16:35Z",
    "body": "Use `-Z no-monomorphic-collapse` and the call to transmute can be inlined.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24173863/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24194096",
    "html_url": "https://github.com/rust-lang/rust/pull/9091#issuecomment-24194096",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9091",
    "id": 24194096,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MTk0MDk2",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-10T20:59:38Z",
    "updated_at": "2013-09-10T20:59:38Z",
    "body": "Maybe add a FIXME for the Writer flush issue? Also, I think libuv prefers 64K size buffers, but is this module too generic to encode that default here?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24194096/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24208568",
    "html_url": "https://github.com/rust-lang/rust/pull/9091#issuecomment-24208568",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9091",
    "id": 24208568,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MjA4NTY4",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-11T02:08:17Z",
    "updated_at": "2013-09-11T02:08:17Z",
    "body": "64k buffers by default seems pretty excessive. I'll put a note in the docs that 64k will give you the best throughput, though.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/24208568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
