[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19144599",
    "html_url": "https://github.com/rust-lang/rust/issues/7012#issuecomment-19144599",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7012",
    "id": 19144599,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MTQ0NTk5",
    "user": {
      "login": "Blei",
      "id": 52674,
      "node_id": "MDQ6VXNlcjUyNjc0",
      "avatar_url": "https://avatars.githubusercontent.com/u/52674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Blei",
      "html_url": "https://github.com/Blei",
      "followers_url": "https://api.github.com/users/Blei/followers",
      "following_url": "https://api.github.com/users/Blei/following{/other_user}",
      "gists_url": "https://api.github.com/users/Blei/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Blei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Blei/subscriptions",
      "organizations_url": "https://api.github.com/users/Blei/orgs",
      "repos_url": "https://api.github.com/users/Blei/repos",
      "events_url": "https://api.github.com/users/Blei/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Blei/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-08T07:27:31Z",
    "updated_at": "2013-06-08T07:27:31Z",
    "body": "This doesn't compile on incoming. Especially the types don't match, `test1` should actually a `u32` array. After making it compile, it prints `true`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19144599/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19144772",
    "html_url": "https://github.com/rust-lang/rust/issues/7012#issuecomment-19144772",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7012",
    "id": 19144772,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MTQ0Nzcy",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-08T07:42:55Z",
    "updated_at": "2013-06-08T07:42:55Z",
    "body": "@Blei Hi Blei, my bad, I have fixed the code, could you please confirm this works on incomming? If it is fixed in incomming I will close.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19144772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19144942",
    "html_url": "https://github.com/rust-lang/rust/issues/7012#issuecomment-19144942",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7012",
    "id": 19144942,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MTQ0OTQy",
    "user": {
      "login": "Blei",
      "id": 52674,
      "node_id": "MDQ6VXNlcjUyNjc0",
      "avatar_url": "https://avatars.githubusercontent.com/u/52674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Blei",
      "html_url": "https://github.com/Blei",
      "followers_url": "https://api.github.com/users/Blei/followers",
      "following_url": "https://api.github.com/users/Blei/following{/other_user}",
      "gists_url": "https://api.github.com/users/Blei/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Blei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Blei/subscriptions",
      "organizations_url": "https://api.github.com/users/Blei/orgs",
      "repos_url": "https://api.github.com/users/Blei/repos",
      "events_url": "https://api.github.com/users/Blei/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Blei/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-08T07:59:22Z",
    "updated_at": "2013-06-08T07:59:22Z",
    "body": "Hmm, this prints `false` even on incoming. Definitely a bug.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19144942/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19145374",
    "html_url": "https://github.com/rust-lang/rust/issues/7012#issuecomment-19145374",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7012",
    "id": 19145374,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MTQ1Mzc0",
    "user": {
      "login": "Aatch",
      "id": 342416,
      "node_id": "MDQ6VXNlcjM0MjQxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aatch",
      "html_url": "https://github.com/Aatch",
      "followers_url": "https://api.github.com/users/Aatch/followers",
      "following_url": "https://api.github.com/users/Aatch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions",
      "organizations_url": "https://api.github.com/users/Aatch/orgs",
      "repos_url": "https://api.github.com/users/Aatch/repos",
      "events_url": "https://api.github.com/users/Aatch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aatch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-08T08:34:24Z",
    "updated_at": "2013-06-08T08:34:24Z",
    "body": "As some more information, I did some more checking, and this is almost certainly a bug in codegen.\n\nIf you make the comparison a function, marked no-inline, then LLVM compresses it down to a single `ret 0` instruction after optimization, so whatever we generate is wrong. Unfortunately there is a lot of IR without optimizations, I don't have the motivation to pour through ~2000 lines of code trying to find the error.\n\nI'm also nominating this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19145374/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19146215",
    "html_url": "https://github.com/rust-lang/rust/issues/7012#issuecomment-19146215",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7012",
    "id": 19146215,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MTQ2MjE1",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-08T09:52:23Z",
    "updated_at": "2013-06-08T09:52:23Z",
    "body": "The length is incorrectly set for vector slices in fields in static structs.\n\n``` rust\nstruct signature<'self> {\n    pattern   : &'self [u32] \n}\n\nstruct signature2<'self> {\n    pattern   : &'self str,\n}\n\nstatic test1: signature<'static> =  signature {\n    pattern:   &[0x243f6a88u32,0x85a308d3u32,0x13198a2eu32,0x03707344u32,0xa4093822u32,0x299f31d0u32],\n};\nstatic test2: signature2<'static> =  signature2 {\n    pattern:   \"Hello!\",\n};\n\nstatic test3: &'static [u32] = &[0x243f6a88u32,0x85a308d3u32,0x13198a2eu32,0x03707344u32,0xa4093822u32,0x299f31d0u32];\n\nfn main() {\n    println(fmt!(\"Static &[u32] field:\\t%2u\", test1.pattern.len()));\n    println(fmt!(\"Static &str field:\\t%2u\", test2.pattern.len()));\n    println(fmt!(\"Static &[u32]:\\t\\t%2u\", test3.len()));\n}\n```\n\nResults in\n\n```\nStatic &[u32] field:     4\nStatic &str field:       6\nStatic &[u32]:           6\n```\n\nCorresponding llvm code:\n\n```\n@const = private constant [6 x i32] [i32 608135816, i32 -2052912941, i32 320440878, i32 57701188, i32 -1542899678, i32 698298832]\n@const1 = private constant { i32*, i64 } { i32* getelementptr inbounds ([6 x i32]* @const, i32 0, i32 0), i64 24 }\n@_ZN5test116_69389145026f68d3_00E = internal constant { { { i32*, i64 }*, i64 } } { { { i32*, i64 }*, i64 } { { i32*, i64 }* @const1, i64 16 } }\n@str2900 = internal constant [7 x i8] c\"Hello!\\00\"\n@_ZN5test217_86eff3e34b82f2c13_00E = internal constant { { i8*, i64 } } { { i8*, i64 } { i8* getelementptr inbounds ([7 x i8]* @str2900, i32 0, i32 0), i64 7 } }\n@const2 = private constant [6 x i32] [i32 608135816, i32 -2052912941, i32 320440878, i32 57701188, i32 -1542899678, i32 698298832]\n@_ZN5test314_8a97a17587e323_00E = internal constant { i32*, i64 } { i32* getelementptr inbounds ([6 x i32]* @const2, i32 0, i32 0), i64 24 }\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19146215/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19160239",
    "html_url": "https://github.com/rust-lang/rust/issues/7012#issuecomment-19160239",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7012",
    "id": 19160239,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MTYwMjM5",
    "user": {
      "login": "Aatch",
      "id": 342416,
      "node_id": "MDQ6VXNlcjM0MjQxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aatch",
      "html_url": "https://github.com/Aatch",
      "followers_url": "https://api.github.com/users/Aatch/followers",
      "following_url": "https://api.github.com/users/Aatch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions",
      "organizations_url": "https://api.github.com/users/Aatch/orgs",
      "repos_url": "https://api.github.com/users/Aatch/repos",
      "events_url": "https://api.github.com/users/Aatch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aatch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-09T03:35:33Z",
    "updated_at": "2013-06-09T03:35:33Z",
    "body": "Between the two of us, me and @dotdash have isolated this down to an auto-borrowing bug.\n\nBasically for this:\n\n``` rust\nstatic test : Foo<'static> = Foo {\n    field: &'static [1,2,3]\n};\n```\n\nThe `[1,2,3]` part of the expression is auto-borrowed, then the `&'static` part causes it to slice. So, it actually constructs a `&'static &'static [uint]`, in terms of the code gen.\n\nOne workaround (that will likely break when this is fixed) is to do this:\n\n``` rust\nstatic test : Foo<'static> = Foo {\n    field: [1,2,3]\n}\n```\n\nas the vector expression is still auto-borrowed.\n\nI ran up against my understanding of the compiler internals, but I narrowed it down to some wrong logic concerning the adjustments table. What, where or when this happens is beyond my knowledge, unfortunately.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19160239/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19402164",
    "html_url": "https://github.com/rust-lang/rust/issues/7012#issuecomment-19402164",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7012",
    "id": 19402164,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NDAyMTY0",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-13T16:10:06Z",
    "updated_at": "2013-06-13T16:10:06Z",
    "body": "This seems similar to #5688.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19402164/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19768842",
    "html_url": "https://github.com/rust-lang/rust/issues/7012#issuecomment-19768842",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7012",
    "id": 19768842,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzY4ODQy",
    "user": {
      "login": "basic-calculus",
      "id": 4070335,
      "node_id": "MDQ6VXNlcjQwNzAzMzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4070335?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/basic-calculus",
      "html_url": "https://github.com/basic-calculus",
      "followers_url": "https://api.github.com/users/basic-calculus/followers",
      "following_url": "https://api.github.com/users/basic-calculus/following{/other_user}",
      "gists_url": "https://api.github.com/users/basic-calculus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/basic-calculus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/basic-calculus/subscriptions",
      "organizations_url": "https://api.github.com/users/basic-calculus/orgs",
      "repos_url": "https://api.github.com/users/basic-calculus/repos",
      "events_url": "https://api.github.com/users/basic-calculus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/basic-calculus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-20T17:34:19Z",
    "updated_at": "2013-06-20T17:34:19Z",
    "body": "Unfortunately, this workaround isn't good enough for my purposes because it can not be uniformly applied. See the following example for details.\n\n```\nstruct Foo(&'static [&'static [uint]]);\n\nstatic works: Foo = Foo([&'static [0, 1, 2, 3]]);\n// static fails: Foo = Foo([[0, 1, 2, 3]]);\n\nfn main() {\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19768842/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22854682",
    "html_url": "https://github.com/rust-lang/rust/issues/7012#issuecomment-22854682",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7012",
    "id": 22854682,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODU0Njgy",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-19T07:22:46Z",
    "updated_at": "2013-08-19T07:22:46Z",
    "body": "The code example in the original issue now works, flagging as needstest\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22854682/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
