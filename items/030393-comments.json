[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164833082",
    "html_url": "https://github.com/rust-lang/rust/pull/30393#issuecomment-164833082",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30393",
    "id": 164833082,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NDgzMzA4Mg==",
    "user": {
      "login": "michaelwoerister",
      "id": 1825894,
      "node_id": "MDQ6VXNlcjE4MjU4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelwoerister",
      "html_url": "https://github.com/michaelwoerister",
      "followers_url": "https://api.github.com/users/michaelwoerister/followers",
      "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelwoerister/orgs",
      "repos_url": "https://api.github.com/users/michaelwoerister/repos",
      "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelwoerister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-15T17:23:05Z",
    "updated_at": "2015-12-15T17:23:05Z",
    "body": "Nice `:)`\nI'll take a thorough look at this tomorrow.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164833082/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164902469",
    "html_url": "https://github.com/rust-lang/rust/pull/30393#issuecomment-164902469",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30393",
    "id": 164902469,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NDkwMjQ2OQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-15T21:27:50Z",
    "updated_at": "2015-12-15T21:27:50Z",
    "body": "Hmm, my measurements suggest more overhead than I expected. Compiling trans goes from 85sec to 89sec (a 5% increase). I am going to do some tweaks to see what the effect is. \n\nIn working through this, I have been wrestling with a few emotions :)\n1. A pleasant surprise at how elegantly this instrumentation works out.\n2. A happiness that this approach gives us overly conservative results unless we intentionally tweak things (so long as we remember to use DepTrackingMaps and so forth).\n\nBut also:\n1. A wariness of overhead. After all, I've only instrumented a fraction of the tables, for example! (But I've also made basically zero effort to optimize.)\n2. I haven't decided on the best way to handle IVar yet (though it doesn't seem super hard to handle)\n3. This system can even make people _overconfident_ by the fact that it handles much, but not ALL, automatically.\n\nSo overall I am basically debating about whether it'd be easier/better to \"derive\" dependencies from first principles by walking the HIR/MIR. But when I tried to draw up a list of things to be concerned about, I confess the list started to seem quite long. I'm going to try and draw it up more thoroughly now, since I want to make a comprehensive set of tests anyhow, which may inform my ultimate opinion.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164902469/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164938789",
    "html_url": "https://github.com/rust-lang/rust/pull/30393#issuecomment-164938789",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30393",
    "id": 164938789,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NDkzODc4OQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-15T23:52:44Z",
    "updated_at": "2015-12-15T23:53:12Z",
    "body": "Actually, I think I was being misled by the old \"shifting measurement target\" phenomena. If I measure libsyntax, I don't see the same perf regression. I do see a shift of ~1% though.\n\nUpdate: note that librustc_trans has changed, and includes some amount of new code, whereas libsyntax has not.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164938789/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165122217",
    "html_url": "https://github.com/rust-lang/rust/pull/30393#issuecomment-165122217",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30393",
    "id": 165122217,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTEyMjIxNw==",
    "user": {
      "login": "bors",
      "id": 3372342,
      "node_id": "MDQ6VXNlcjMzNzIzNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bors",
      "html_url": "https://github.com/bors",
      "followers_url": "https://api.github.com/users/bors/followers",
      "following_url": "https://api.github.com/users/bors/following{/other_user}",
      "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
      "organizations_url": "https://api.github.com/users/bors/orgs",
      "repos_url": "https://api.github.com/users/bors/repos",
      "events_url": "https://api.github.com/users/bors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bors/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-16T14:18:00Z",
    "updated_at": "2015-12-16T14:18:00Z",
    "body": ":umbrella: The latest upstream changes (presumably #30410) made this pull request unmergeable. Please resolve the merge conflicts.\n",
    "author_association": "COLLABORATOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165122217/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165171856",
    "html_url": "https://github.com/rust-lang/rust/pull/30393#issuecomment-165171856",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30393",
    "id": 165171856,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTE3MTg1Ng==",
    "user": {
      "login": "michaelwoerister",
      "id": 1825894,
      "node_id": "MDQ6VXNlcjE4MjU4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelwoerister",
      "html_url": "https://github.com/michaelwoerister",
      "followers_url": "https://api.github.com/users/michaelwoerister/followers",
      "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelwoerister/orgs",
      "repos_url": "https://api.github.com/users/michaelwoerister/repos",
      "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelwoerister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-16T16:48:40Z",
    "updated_at": "2015-12-16T16:48:40Z",
    "body": "OK, I've looked through the PR and my overall impressions are:\n1. It's really nice how the dependency tracking happens really almost completely transparently.\n2. The transparency of the approach is also a bit of a downside: It's easy to introduce unnecessary dependency edges by inadvertently accessing data that does not strictly need to be accessed.\n3. It's very important to connect _all_ relevant pieces of data to the tracking infrastructure. Otherwise it's easy to miss introducing edges.\n4. It's also important to keep the number of 'global' nodes small, unless they are leaf nodes. Although that is less of an issue than I thought initially, as long as the global nodes (like Coherence) don't depend on more than they need to.\n5. It's easy to lose track of what is actually going on, i.e. what the dependency graph actually looks like. We should try to make debugging this as easy as possible, for example by having a test suite that lets us easily pinpoint where possible regressions have been introduced.\n6. As @nmatsakis suggested on IRC, having a special 'read-only' task in addition to 'ignore' -- for things like save-analysis that are not supposed to introduce new nodes to the dep-graph -- is a good idea for catching errors.\n7. More information about the performance implications would indeed be interesting.\n8. Maybe it would be good to be able specify runtime-checked conditions like \"nodes of type x must never depend on nodes of type y\" to guard against regressions. Although I don't have a concrete example yet (maybe things from external crates)\n\nI'd also be interested in hearing more about the hybrid approach (mentioned by @nmatsakis on IRC) between calculating dependencies explicitly and doing it via instrumentation.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165171856/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165184127",
    "html_url": "https://github.com/rust-lang/rust/pull/30393#issuecomment-165184127",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30393",
    "id": 165184127,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTE4NDEyNw==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-16T17:26:08Z",
    "updated_at": "2015-12-16T17:26:08Z",
    "body": "@michaelwoerister \n\nI basically agree with everything you wrote. Let me give some off-the-cuff thoughts:\n\n> It's also important to keep the number of 'global' nodes small, unless they are leaf nodes. Although that is less of an issue than I thought initially, as long as the global nodes (like Coherence) don't depend on more than they need to.\n\nIt's a bit unclear how imp't this is. Certainly introducing the notion of \"read-only\" nodes, that don't produce outputs, will cover most of the existing \"global\" cases (e.g., lints). Though lints are also a good case study in that some amount of thought should be put into when to \"re-run\" the lint pass -- but I think it's the kind of thing where it's not worth making things too fine-grained and incremental. \n\n> It's easy to lose track of what is actually going on, i.e. what the dependency graph actually looks like. We should try to make debugging this as easy as possible, for example by having a test suite that lets us easily pinpoint where possible regressions have been introduced.\n\nYes. So what I had hoped to do in this respect was to beef up that test suite. Basically I plan to systematically try to uncover the kinds of changes and what kinds of rebuilds should be triggered and lay those out as test cases. I am toying around with the best way to organize all of this.\n\nIn any case, this seems to be one of the core trade-offs: if we use this approach, we will wind up with a less explicit notion of what the graph is, but on the other hand we don't have to think quite as actively about it. You just have to identify \"shared state\" and make sure to use a `DepTrackingMap` or other similar tool. But I think then another consequence will be that we will get less incremental support in some cases unless we dive in and do some special treatment: one example I've been thinking over is trait selection, where I think we'll probably ultimately want some amount of custom logic.\n\nI'm now sort of debating around a kind of hybrid scheme, where we scrape some of the dependencies by walking the (fully typed) HIR (or maybe MIR), and generate the rest dynamically. This has the downside that we must actively think about what our dependencies are or things will get out of sync -- precisely what I was trying to avoid -- but the upside that the dep graph will probably be cleaner. I think we'll find that in some cases though it's too hard to make something precise and we wind up with approximations: e.g., we'll probably have a de-facto edge from every function to the set of traits (and names in general) that are in scope, even if those traits didn't wind up being important for method resolution or something. I have to experiment a bit to see what that means.\n\n> Maybe it would be good to be able specify runtime-checked conditions like \"nodes of type x must never depend on nodes of type y\" to guard against regressions. Although I don't have a concrete example yet (maybe things from external crates)\n\nCertainly the test cases can help here, though one could imagine `debug_assert`-like things that trigger over ALL inputs, and not just the ones identified in the test suites.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165184127/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165199197",
    "html_url": "https://github.com/rust-lang/rust/pull/30393#issuecomment-165199197",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30393",
    "id": 165199197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTE5OTE5Nw==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-16T18:13:38Z",
    "updated_at": "2015-12-16T18:13:38Z",
    "body": "@jonas-schievink \n\n>  Why not default to a file in the current working directory instead?\n\nYeah, no reason. I'll change it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165199197/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165199630",
    "html_url": "https://github.com/rust-lang/rust/pull/30393#issuecomment-165199630",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30393",
    "id": 165199630,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTE5OTYzMA==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-16T18:14:40Z",
    "updated_at": "2015-12-16T18:14:40Z",
    "body": "I think given the uncertainty, maybe the best way to proceed is:\n1. Add in a `-Z incr-comp` flag and do not create the dependency graph unless it is passed.\n2. Land the patch as is (which should introduce basically zero overhead, though I will check).\n3. Continue iterating locally :)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165199630/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165269809",
    "html_url": "https://github.com/rust-lang/rust/pull/30393#issuecomment-165269809",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30393",
    "id": 165269809,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTI2OTgwOQ==",
    "user": {
      "login": "michaelwoerister",
      "id": 1825894,
      "node_id": "MDQ6VXNlcjE4MjU4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelwoerister",
      "html_url": "https://github.com/michaelwoerister",
      "followers_url": "https://api.github.com/users/michaelwoerister/followers",
      "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelwoerister/orgs",
      "repos_url": "https://api.github.com/users/michaelwoerister/repos",
      "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelwoerister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-16T22:14:28Z",
    "updated_at": "2015-12-16T22:14:28Z",
    "body": "> I think given the uncertainty, maybe the best way to proceed is: ...\n\nAgreed.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165269809/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165274613",
    "html_url": "https://github.com/rust-lang/rust/pull/30393#issuecomment-165274613",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30393",
    "id": 165274613,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTI3NDYxMw==",
    "user": {
      "login": "michaelwoerister",
      "id": 1825894,
      "node_id": "MDQ6VXNlcjE4MjU4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelwoerister",
      "html_url": "https://github.com/michaelwoerister",
      "followers_url": "https://api.github.com/users/michaelwoerister/followers",
      "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelwoerister/orgs",
      "repos_url": "https://api.github.com/users/michaelwoerister/repos",
      "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelwoerister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-16T22:32:04Z",
    "updated_at": "2015-12-16T22:33:26Z",
    "body": "> It's a bit unclear how imp't this is. Certainly introducing the notion of \"read-only\" nodes, that don't produce outputs, will cover most of the existing \"global\" cases (e.g., lints). Though lints are also a good case study in that some amount of thought should be put into when to \"re-run\" the lint pass -- but I think it's the kind of thing where it's not worth making things too fine-grained and incremental.\n\nYes, I agree. Incrementalizing those can always be done later but I would only attempt do so if there's promise of real performance wins (which I doubt)\n\n> I think we'll find that in some cases though it's too hard to make something precise and we wind up with approximations: e.g., we'll probably have a de-facto edge from every function to the set of traits (and names in general) that are in scope, even if those traits didn't wind up being important for method resolution or something. I have to experiment a bit to see what that means.\n\nIn theory, if compiler internal datastructures are set up the right way, there is no reason for things to go wrong, so to speak. It helps to think in terms of pieces of data depending on other pieces of data and have dependency nodes for those pieces of data (and not so much for tasks producing them). Although that might mean restructuring some of the code that naturally was written without incremental compilation in mind.\n\nEDIT: Although the \"In theory\" at the beginning of the previous paragraph should give away that this is all conjecture on my part `:)`\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165274613/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165545952",
    "html_url": "https://github.com/rust-lang/rust/pull/30393#issuecomment-165545952",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/30393",
    "id": 165545952,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTU0NTk1Mg==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-17T18:50:05Z",
    "updated_at": "2015-12-17T18:50:05Z",
    "body": "So I've been pushing on this branch a bit more. I think I'm going to close this PR for now and re-open it in a day or so. Given the minimally invasive nature, I don't expect rebasing to be too painful.\n\nAnyway, I also hope to write up a kind of \"readme\" that explains the general ideas a bit more clearly.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165545952/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
