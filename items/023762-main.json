{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/23762",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/23762/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/23762/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/23762/events",
  "html_url": "https://github.com/rust-lang/rust/issues/23762",
  "id": 64652293,
  "node_id": "MDU6SXNzdWU2NDY1MjI5Mw==",
  "number": 23762,
  "title": "Order of operands to equality expression matters when inferring a AsRef implementation",
  "user": {
    "login": "shepmaster",
    "id": 174509,
    "node_id": "MDQ6VXNlcjE3NDUwOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/shepmaster",
    "html_url": "https://github.com/shepmaster",
    "followers_url": "https://api.github.com/users/shepmaster/followers",
    "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
    "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
    "organizations_url": "https://api.github.com/users/shepmaster/orgs",
    "repos_url": "https://api.github.com/users/shepmaster/repos",
    "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
    "received_events_url": "https://api.github.com/users/shepmaster/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [
    {
      "id": 37544,
      "node_id": "MDU6TGFiZWwzNzU0NA==",
      "url": "https://api.github.com/repos/rust-lang/rust/labels/A-type-system",
      "name": "A-type-system",
      "color": "f7e101",
      "default": false,
      "description": "Area: Type system"
    },
    {
      "id": 60329014,
      "node_id": "MDU6TGFiZWw2MDMyOTAxNA==",
      "url": "https://api.github.com/repos/rust-lang/rust/labels/P-low",
      "name": "P-low",
      "color": "eb6420",
      "default": false,
      "description": "Low priority"
    },
    {
      "id": 178802147,
      "node_id": "MDU6TGFiZWwxNzg4MDIxNDc=",
      "url": "https://api.github.com/repos/rust-lang/rust/labels/I-needs-decision",
      "name": "I-needs-decision",
      "color": "e11d21",
      "default": false,
      "description": "Issue: In need of a decision."
    },
    {
      "id": 211668100,
      "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=",
      "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler",
      "name": "T-compiler",
      "color": "bfd4f2",
      "default": false,
      "description": "Relevant to the compiler team, which will review and decide on the PR/issue."
    },
    {
      "id": 604454086,
      "node_id": "MDU6TGFiZWw2MDQ0NTQwODY=",
      "url": "https://api.github.com/repos/rust-lang/rust/labels/A-inference",
      "name": "A-inference",
      "color": "f7e101",
      "default": false,
      "description": "Area: Type inference"
    },
    {
      "id": 650731663,
      "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=",
      "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug",
      "name": "C-bug",
      "color": "f5f1fd",
      "default": false,
      "description": "Category: This is a bug."
    },
    {
      "id": 4172483496,
      "node_id": "LA_kwDOAAsO6M74swuo",
      "url": "https://api.github.com/repos/rust-lang/rust/labels/T-types",
      "name": "T-types",
      "color": "bfd4f2",
      "default": false,
      "description": "Relevant to the types team, which will review and decide on the PR/issue."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 4,
  "created_at": "2015-03-26T22:59:56Z",
  "updated_at": "2025-04-22T12:41:00Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "sub_issues_summary": {
    "total": 0,
    "completed": 0,
    "percent_completed": 0
  },
  "issue_dependencies_summary": {
    "blocked_by": 0,
    "total_blocked_by": 0,
    "blocking": 0,
    "total_blocking": 0
  },
  "body": "This may be related to or the same as #23673, but I wanted to file it anyway as it seems to have a slightly different flavor.\n\n``` rust\n#![feature(convert)]\n\nstruct Container {\n    i: u8,\n    b: bool,\n}\n\nimpl AsRef<u8> for Container {\n    fn as_ref(&self) -> &u8 {\n        &self.i\n    }\n}\n\n// A second implementation to make the `as_ref` ambiguous without further information\nimpl AsRef<bool> for Container {\n    fn as_ref(&self) -> &bool {\n        &self.b\n    }\n}\n\nfn main() {\n    let c = Container { i: 42, b: true };\n\n    // Succeeds\n    &42u8 == c.as_ref();\n\n    // Fails\n    c.as_ref() == &42u8;\n}\n```\n\nFails with \n\n```\ntype annotations required: cannot resolve `Container : core::convert::AsRef<_>` [E0283]\n```\n\nHowever, if you flip the order of the arguments to the equality operator, then the code compiles and the correct type is inferred. It seems as if both forms should work the same.\n\nOriginally from this [Stack Overflow question](http://stackoverflow.com/q/29278940/155423)\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/23762/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/23762/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "issue"
  }
}
