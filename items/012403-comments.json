[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35547304",
    "html_url": "https://github.com/rust-lang/rust/pull/12403#issuecomment-35547304",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12403",
    "id": 35547304,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTQ3MzA0",
    "user": {
      "login": "flaper87",
      "id": 13816,
      "node_id": "MDQ6VXNlcjEzODE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/13816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flaper87",
      "html_url": "https://github.com/flaper87",
      "followers_url": "https://api.github.com/users/flaper87/followers",
      "following_url": "https://api.github.com/users/flaper87/following{/other_user}",
      "gists_url": "https://api.github.com/users/flaper87/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flaper87/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flaper87/subscriptions",
      "organizations_url": "https://api.github.com/users/flaper87/orgs",
      "repos_url": "https://api.github.com/users/flaper87/repos",
      "events_url": "https://api.github.com/users/flaper87/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flaper87/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-19T20:55:31Z",
    "updated_at": "2014-02-19T20:55:31Z",
    "body": ":+1: \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35547304/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35548765",
    "html_url": "https://github.com/rust-lang/rust/pull/12403#issuecomment-35548765",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12403",
    "id": 35548765,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTQ4NzY1",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-19T21:09:21Z",
    "updated_at": "2014-02-19T21:09:21Z",
    "body": "Hurray!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35548765/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35556231",
    "html_url": "https://github.com/rust-lang/rust/pull/12403#issuecomment-35556231",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12403",
    "id": 35556231,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTU2MjMx",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-19T22:13:06Z",
    "updated_at": "2014-02-19T22:13:06Z",
    "body": "This looks good (modulo nits) -- but there is something very questionable about supporting type parameter bounds in drop to begin with. I guess any such def'n requires `#[unsafe_dtor]`? The problem is, imagine I define a destructor like\n\n```\nimpl<T:Foo> Drop for S<T> { ... }\n```\n\nand now I have `s: S<U>` where `U` does not implement `Foo` -- what happens when `s` is dropped? Wacko.\n\nIt only makes sense if we can guarantee that all instances of `S` are instantiated with types that meet `Foo`. Therefore, I think permitting bounds on destructors only really makes sense if we permit them on structure definitions as well. Which we ought to do. But that's a separate PR, I guess.\n\nLong story short: r+ with nits addressed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35556231/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35606009",
    "html_url": "https://github.com/rust-lang/rust/pull/12403#issuecomment-35606009",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12403",
    "id": 35606009,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NjA2MDA5",
    "user": {
      "login": "glaebhoerl",
      "id": 1216629,
      "node_id": "MDQ6VXNlcjEyMTY2Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1216629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glaebhoerl",
      "html_url": "https://github.com/glaebhoerl",
      "followers_url": "https://api.github.com/users/glaebhoerl/followers",
      "following_url": "https://api.github.com/users/glaebhoerl/following{/other_user}",
      "gists_url": "https://api.github.com/users/glaebhoerl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glaebhoerl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glaebhoerl/subscriptions",
      "organizations_url": "https://api.github.com/users/glaebhoerl/orgs",
      "repos_url": "https://api.github.com/users/glaebhoerl/repos",
      "events_url": "https://api.github.com/users/glaebhoerl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glaebhoerl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-20T10:21:33Z",
    "updated_at": "2014-02-20T10:23:42Z",
    "body": "@nikomatsakis:\n\n> I have `s: S<U>` where `U` does not implement `Foo` -- what happens when s is dropped? Wacko.\n> \n> It only makes sense if we can guarantee that all instances of `S` are instantiated with types that meet `Foo`.\n\nI think there's another interpretation that's equally reasonable.\n\nIf you have\n\n```\nstruct S<T> { a: Rc<int>, b: Option<~S<T>>, c: T }\n```\n\nwithout a `Drop` impl for `S`, then `S` still has a destructor, which will run the destructors of its fields.\n\nFollowing similar logic, if you have\n\n```\nimpl<T: Foo> Drop for S<T> { ... }\n```\n\nyou could say that for `A: Foo`, the destructor for `S<A>` consists of the `Drop` impl you wrote plus the destructors of its fields, while for `B: !Foo`, the destructor for `S<B>` consists only of the latter (as if you had not written a `Drop` impl).\n\nAlong the same lines, you could also write things such as\n\n```\nimpl Drop for S<bool> { ... }\nimpl Drop for S<char> { ... }\n```\n\nin which case the destructors for `S<bool>` and `S<char>` would run different user-provided code followed by the same field-destructors, and `S<double>` would only run the field destructors. The same coherence rules would presumably apply as for all other traits (so you couldn't have the `impl<T: Foo>` _and_ the impls for individual types, because they potentially overlap).\n\nThe basic insight is that while they run together, the programmer-defined `Drop` impl and the compiler-generated drop glue for the fields are logically distinct entities. See #11855 for more thoughts along similar lines.\n\nAs in that other issue, while I believe all of this checks out on a logical/theoretical level, a big question is how it squares with the code humans might actually want to write, and their expectations. But even under the above semantics, if the programmer wants to rule out any `S<B>` where `B: !Foo`, she can just make its fields private and only export a smart constructor `fn new<T: Foo>() -> S<T>`, so the two things are at least somewhat orthogonal.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35606009/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35616164",
    "html_url": "https://github.com/rust-lang/rust/pull/12403#issuecomment-35616164",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12403",
    "id": 35616164,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NjE2MTY0",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-20T12:22:08Z",
    "updated_at": "2014-02-20T12:22:08Z",
    "body": "On Thu, Feb 20, 2014 at 02:21:36AM -0800, G\u00e1bor Lehel wrote:\n\n> I think there's another interpretation that's equally reasonable.\n\nYes, I considered this interpretation and rejected it, though it does\nseem like it logically works. I mostly rejected it because it made\nthings in the compiler more complicated than I wanted them to be and I\ndidn't want to dive into thinking it all the way through. Lazy on my\npart. It probably does work out, though, at least I can't see a reason\nthat it wouldn't right now.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35616164/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
