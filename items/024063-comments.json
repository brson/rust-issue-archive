[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/89554142",
    "html_url": "https://github.com/rust-lang/rust/issues/24063#issuecomment-89554142",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24063",
    "id": 89554142,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg5NTU0MTQy",
    "user": {
      "login": "frankmcsherry",
      "id": 5741500,
      "node_id": "MDQ6VXNlcjU3NDE1MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5741500?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frankmcsherry",
      "html_url": "https://github.com/frankmcsherry",
      "followers_url": "https://api.github.com/users/frankmcsherry/followers",
      "following_url": "https://api.github.com/users/frankmcsherry/following{/other_user}",
      "gists_url": "https://api.github.com/users/frankmcsherry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frankmcsherry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frankmcsherry/subscriptions",
      "organizations_url": "https://api.github.com/users/frankmcsherry/orgs",
      "repos_url": "https://api.github.com/users/frankmcsherry/repos",
      "events_url": "https://api.github.com/users/frankmcsherry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frankmcsherry/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-04T11:39:42Z",
    "updated_at": "2015-04-04T11:39:42Z",
    "body": "Ah, I should add: it is the partially completed `impl` that lead to the ICE. With that commented out, all is well. With it present (empty function bodies or not) we get an ICE.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/89554142/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/89801317",
    "html_url": "https://github.com/rust-lang/rust/issues/24063#issuecomment-89801317",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24063",
    "id": 89801317,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg5ODAxMzE3",
    "user": {
      "login": "frankmcsherry",
      "id": 5741500,
      "node_id": "MDQ6VXNlcjU3NDE1MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5741500?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frankmcsherry",
      "html_url": "https://github.com/frankmcsherry",
      "followers_url": "https://api.github.com/users/frankmcsherry/followers",
      "following_url": "https://api.github.com/users/frankmcsherry/following{/other_user}",
      "gists_url": "https://api.github.com/users/frankmcsherry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frankmcsherry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frankmcsherry/subscriptions",
      "organizations_url": "https://api.github.com/users/frankmcsherry/orgs",
      "repos_url": "https://api.github.com/users/frankmcsherry/repos",
      "events_url": "https://api.github.com/users/frankmcsherry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frankmcsherry/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-05T16:27:27Z",
    "updated_at": "2015-04-05T16:27:55Z",
    "body": "The following is smaller and still causes the ICE, but still leaves the other crate untouched.\n\n``` rust\nextern crate timely;\n\nuse timely::progress::Graph;\nuse timely::example::stream::Stream;\n\npub trait Test<G: Graph> {\n    fn test(&mut self) -> Stream<G, u64>;\n}\n\nimpl<G: Graph> Test<G> for () {\n    fn test(&mut self) -> Stream<G, u64> {\n\n    }\n}\n```\n\nThe associated snippet in the Cargo.toml is \n\n```\n[dependencies.timely]\nversion=\"0.0.4\"\npath=\"../timely-dataflow\"\n```\n\nin case this reveals something incorrect. It occurs to me that the only non-ICEing programs I've written have been part of the `timely` build (as examples) and that I haven't actually had a non-ICE program use the crate, so maybe I'm just bad at cargo?\n\nI tried creating a simple crate `test` with a `Graph` trait and a `Stream` struct parameterized by it, and then pulled it in with no problems (it doesn't do anything useful, but it doesn't ICE otherwise). So, probably some sort of issue with complexity in the `timely` crate, I guess?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/89801317/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90592928",
    "html_url": "https://github.com/rust-lang/rust/issues/24063#issuecomment-90592928",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24063",
    "id": 90592928,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkwNTkyOTI4",
    "user": {
      "login": "frankmcsherry",
      "id": 5741500,
      "node_id": "MDQ6VXNlcjU3NDE1MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5741500?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frankmcsherry",
      "html_url": "https://github.com/frankmcsherry",
      "followers_url": "https://api.github.com/users/frankmcsherry/followers",
      "following_url": "https://api.github.com/users/frankmcsherry/following{/other_user}",
      "gists_url": "https://api.github.com/users/frankmcsherry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frankmcsherry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frankmcsherry/subscriptions",
      "organizations_url": "https://api.github.com/users/frankmcsherry/orgs",
      "repos_url": "https://api.github.com/users/frankmcsherry/repos",
      "events_url": "https://api.github.com/users/frankmcsherry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frankmcsherry/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-07T14:52:54Z",
    "updated_at": "2015-04-07T14:52:54Z",
    "body": "Simplifying further (from a repro point of view) the following Cargo.toml snippet also explodes things without requiring mysterious local files from my laptop:\n\n```\n[dependencies.timely]\ngit=\"https://github.com/frankmcsherry/timely-dataflow\"\n```\n\nStill in effect on \n\n```\nEchidnatron% cargo --version          \ncargo 0.0.1-pre-nightly (3499c8e 2015-04-05) (built 2015-04-05)\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90592928/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91054990",
    "html_url": "https://github.com/rust-lang/rust/issues/24063#issuecomment-91054990",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24063",
    "id": 91054990,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkxMDU0OTkw",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-08T22:30:22Z",
    "updated_at": "2015-04-08T22:30:22Z",
    "body": "cc @nikomatsakis \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91054990/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91281247",
    "html_url": "https://github.com/rust-lang/rust/issues/24063#issuecomment-91281247",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24063",
    "id": 91281247,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkxMjgxMjQ3",
    "user": {
      "login": "frankmcsherry",
      "id": 5741500,
      "node_id": "MDQ6VXNlcjU3NDE1MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5741500?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frankmcsherry",
      "html_url": "https://github.com/frankmcsherry",
      "followers_url": "https://api.github.com/users/frankmcsherry/followers",
      "following_url": "https://api.github.com/users/frankmcsherry/following{/other_user}",
      "gists_url": "https://api.github.com/users/frankmcsherry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frankmcsherry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frankmcsherry/subscriptions",
      "organizations_url": "https://api.github.com/users/frankmcsherry/orgs",
      "repos_url": "https://api.github.com/users/frankmcsherry/repos",
      "events_url": "https://api.github.com/users/frankmcsherry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frankmcsherry/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-09T16:27:58Z",
    "updated_at": "2015-04-09T16:27:58Z",
    "body": "I have some more information for this (and a fix from my point of view, so not blocking): \n\nThe `Stream` type needs its second argument to implement a `Data` trait, and adding the following line fixes things.\n\n``` rust\nuse timely::communication::Data;\n```\n\nSo, still an ICE, but the root cause is definitely user error (and Rust not being able to find out why `u64` satisfies the constraint that `Stream` requires). I wouldn't have guessed that this was needed, but in either case it makes Rust stop exploding. :)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91281247/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/93689744",
    "html_url": "https://github.com/rust-lang/rust/issues/24063#issuecomment-93689744",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24063",
    "id": 93689744,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNjg5NzQ0",
    "user": {
      "login": "frankmcsherry",
      "id": 5741500,
      "node_id": "MDQ6VXNlcjU3NDE1MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5741500?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frankmcsherry",
      "html_url": "https://github.com/frankmcsherry",
      "followers_url": "https://api.github.com/users/frankmcsherry/followers",
      "following_url": "https://api.github.com/users/frankmcsherry/following{/other_user}",
      "gists_url": "https://api.github.com/users/frankmcsherry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frankmcsherry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frankmcsherry/subscriptions",
      "organizations_url": "https://api.github.com/users/frankmcsherry/orgs",
      "repos_url": "https://api.github.com/users/frankmcsherry/repos",
      "events_url": "https://api.github.com/users/frankmcsherry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frankmcsherry/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-16T09:25:28Z",
    "updated_at": "2015-04-16T09:25:28Z",
    "body": "I have a fairly minimal _change_ that causes the ICE to happen; the actual crate is quite large and I'm not really sure how to simplify it yet. Note, the ICE happens when you try to build _against_ the crate, not when you build the crate itself.\n\n``` rust\n// ICEs with assertion failed: bound_list_is_sorted(&bounds.projection_bounds)\nfor index in 0..count_map.len() {\n    while let Some((ref time, delta)) = count_map[index].pop() {\n        self.frontier[index].update(time, delta);\n    }\n}\n```\n\nIf you swap in the following roughly equivalent lines of code (or, weirdly, change `self.frontier[index]` to `self.frontier[0]`), the ICE goes away.\n\n``` rust\n// no ICE; I would have thought \"identical\" to the above...\nfor index in 0..count_map.len() {\n    while let Some((time, delta)) = count_map[index].pop() {\n        self.frontier[index].update(&time, delta);\n    }\n}\n```\n\nAdditionally, if you mark the first version as `#[inline(always)]` the ICE vanishes.\n\nThe issue manifests for me against [this commit](https://github.com/frankmcsherry/timely-dataflow/commit/9c1e2c01126e23ab62ac070f4243902af53304b9) of timely dataflow, [uncommenting lines 25-27 in this notificator.rs](https://github.com/frankmcsherry/timely-dataflow/blob/master/src/progress/notificator.rs), using a program that just does\n\n``` rust\nextern crate timely;\n\nuse timely::example::*;\nuse timely::communication::*;\nuse timely::progress::nested::subgraph::new_graph;\n\nfn triangles<C: Communicator>(communicator: C) {\n    let mut computation = new_graph::<u64, C>(communicator);\n    let (mut input, mut stream) = computation.new_input::<u32>();\n}\n```\n\nMy hunch would be that the crate summary Rust produces has some glitches, and forcing the inline avoids them. If nothing else, this keeps me on my toes with respect to testing to avoid mysterious ICE-based regressions. ;)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/93689744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
