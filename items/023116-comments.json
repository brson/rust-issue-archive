[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/77560435",
    "html_url": "https://github.com/rust-lang/rust/issues/23116#issuecomment-77560435",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23116",
    "id": 77560435,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NTYwNDM1",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-06T13:46:11Z",
    "updated_at": "2015-03-06T13:46:11Z",
    "body": "triage: P-backcompat-lang (1.0 beta) -- soundness violation\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/77560435/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/77587966",
    "html_url": "https://github.com/rust-lang/rust/issues/23116#issuecomment-77587966",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23116",
    "id": 77587966,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NTg3OTY2",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-06T16:27:42Z",
    "updated_at": "2015-03-06T16:27:42Z",
    "body": "Another test case:\n\n``` rust\n#![allow(dead_code)]\nuse std::fmt::Debug;\nstruct S(Box<Debug + 'static>);\nimpl S {\n    fn bar<'a>(&'a mut self)->&'a mut Box<Debug + 'a> {\n        let ref mut x = self.0;\n        x // should error!\n    }\n}\nfn main() {}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/77587966/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/77595109",
    "html_url": "https://github.com/rust-lang/rust/issues/23116#issuecomment-77595109",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23116",
    "id": 77595109,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NTk1MTA5",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-06T17:05:42Z",
    "updated_at": "2015-03-06T17:05:42Z",
    "body": "This is a little bit more complex than I originally gave it credit for. In particular, the interaction between `let ref` and coercion is sort of non-obvious. Rather than trying to be too smart, I am currently thinking that I will apply a very simple rule of this form: if there are no ref bindings, we permit coercion on `let` and subtyping in general. Otherwise, we do no coercion on let and require an exact match. This seems to be safe and sane.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/77595109/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/77631573",
    "html_url": "https://github.com/rust-lang/rust/issues/23116#issuecomment-77631573",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23116",
    "id": 77631573,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NjMxNTcz",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-06T20:40:30Z",
    "updated_at": "2015-03-06T20:41:02Z",
    "body": "Some comments on my current plans (from the commit):\n\nWhen matching against a pattern (either via `match` or `let`) that contains ref-bindings, do not permit any upcasting from the type of the value being matched. Similarly, do not permit coercion in a `let`.\n\nThis is a [breaking-change] in that it closes a type hole that previously existed, and in that coercion is not performed. You should be able to work around the latter by converting:\n\n``` rust\nlet ref mut x: T = expr;\n```\n\ninto\n\n``` rust\nlet x: T = expr;\nlet ref mut x = x;\n```\n\nRestricting coercion not to apply in the case of `let ref` or `let ref mut` is sort of unexciting to me, but seems the best solution:\n1. Mixing coercion and `let ref` or `let ref mut` is a bit odd, because you are taking\n   the address of a (coerced) temporary, but only sometimes. It's not syntactically evident,\n   in other words, what's going on. When you're doing a coercion, you're kind of\n2. Put another way, I would like to preserve the relationship that\n   `equality <= subtyping <= coercion <= as-coercion`, where this is\n   an indication of the number of `(T1,T2)` pairs that are accepted by\n   the various relations. Trying to mix `let ref mut` and coercion\n   would create another kind of relation that is like coercion, but\n   acts differently in the case where a precise match is needed.\n3. In any case, this is strictly more conservative than what we had\n   before and we can undo it in the future if we find a way to make\n   coercion mix with type equality.\n\nThe change to match I feel ok about but similarly unthrilled. There is some subtle text already concerning whether to use eqtype or subtype for identifier bindings. The best fix I think would be to always have match use strict equality but use subtyping on identifier bindings, but the comment `(*)` explains why that's not working at the moment. As above, I think we can change this as we clean up the code there.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/77631573/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
