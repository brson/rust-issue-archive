[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153528782",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-153528782",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 153528782,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MzUyODc4Mg==",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-04T00:00:22Z",
    "updated_at": "2015-11-04T00:00:22Z",
    "body": "Nominating for stabilization in 1.6.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153528782/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154135722",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-154135722",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 154135722,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDEzNTcyMg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-05T17:48:32Z",
    "updated_at": "2015-11-05T17:48:32Z",
    "body": "The libs team decided to not move this into FCP, some worries around this being:\n- Checking the state and then accessing hits TLS twice, which may be too slow for some use cases.\n- This is very similar to `RefCell::borrow_state` which has also not yet been stabilized. It's likely that the `enum` here wants to move to boolean accessors so we can add more states in the future.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154135722/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/176618691",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-176618691",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 176618691,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NjYxODY5MQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-29T07:25:59Z",
    "updated_at": "2016-01-29T07:25:59Z",
    "body": "Although I nominated this for 1.8, libs decided to remove the nomination as I forgot that the reason this is not in FCP yet is because you hit TLS twice when querying the state.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/176618691/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/240532137",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-240532137",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 240532137,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MDUzMjEzNw==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-08-17T20:10:06Z",
    "updated_at": "2016-08-17T20:10:06Z",
    "body": "I think this would be better expressed like `RefCell::try_borrow`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/240532137/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/313870162",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-313870162",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 313870162,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzg3MDE2Mg==",
    "user": {
      "login": "PlasmaPower",
      "id": 6006498,
      "node_id": "MDQ6VXNlcjYwMDY0OTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6006498?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PlasmaPower",
      "html_url": "https://github.com/PlasmaPower",
      "followers_url": "https://api.github.com/users/PlasmaPower/followers",
      "following_url": "https://api.github.com/users/PlasmaPower/following{/other_user}",
      "gists_url": "https://api.github.com/users/PlasmaPower/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PlasmaPower/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PlasmaPower/subscriptions",
      "organizations_url": "https://api.github.com/users/PlasmaPower/orgs",
      "repos_url": "https://api.github.com/users/PlasmaPower/repos",
      "events_url": "https://api.github.com/users/PlasmaPower/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PlasmaPower/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-08T17:37:50Z",
    "updated_at": "2017-07-08T17:37:50Z",
    "body": "See also: https://github.com/rust-lang/rfcs/pull/2030",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/313870162/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/314286526",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-314286526",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 314286526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDI4NjUyNg==",
    "user": {
      "login": "PlasmaPower",
      "id": 6006498,
      "node_id": "MDQ6VXNlcjYwMDY0OTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6006498?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PlasmaPower",
      "html_url": "https://github.com/PlasmaPower",
      "followers_url": "https://api.github.com/users/PlasmaPower/followers",
      "following_url": "https://api.github.com/users/PlasmaPower/following{/other_user}",
      "gists_url": "https://api.github.com/users/PlasmaPower/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PlasmaPower/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PlasmaPower/subscriptions",
      "organizations_url": "https://api.github.com/users/PlasmaPower/orgs",
      "repos_url": "https://api.github.com/users/PlasmaPower/repos",
      "events_url": "https://api.github.com/users/PlasmaPower/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PlasmaPower/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-11T00:19:58Z",
    "updated_at": "2017-07-11T00:19:58Z",
    "body": "PR for `try_with` (similar to `RefCell::try_borrow`) wrapped into this feature: #43158",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/314286526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/336404971",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-336404971",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 336404971,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjQwNDk3MQ==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-10-13T09:45:46Z",
    "updated_at": "2017-10-13T09:45:46Z",
    "body": "The documenation for `LocalKey::state` says:\r\n\r\n> A key is initially in the `Uninitialized state` whenever a thread starts. It will remain in this state up until the first call to with within a thread has run the initialization expression successfully. Once the initialization expression succeeds, the key transitions to the `Valid` state which will guarantee that future calls to with will succeed within the thread.\r\n\r\nBut then it also mentions:\r\n\r\n> Keys may remain in the `Destroyed` state after destruction has completed. Keys without destructors (e.g. with types that are `Copy`), may never enter the `Destroyed` state.\r\n\r\nDo we really want to make the first guarantee? Is it not reasonable for `Copy` types to skip the `Uninitialized` state altogether and start right off in the `Valid` state?",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/336404971/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/336612405",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-336612405",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 336612405,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjYxMjQwNQ==",
    "user": {
      "login": "joshlf",
      "id": 1046063,
      "node_id": "MDQ6VXNlcjEwNDYwNjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1046063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshlf",
      "html_url": "https://github.com/joshlf",
      "followers_url": "https://api.github.com/users/joshlf/followers",
      "following_url": "https://api.github.com/users/joshlf/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshlf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshlf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshlf/subscriptions",
      "organizations_url": "https://api.github.com/users/joshlf/orgs",
      "repos_url": "https://api.github.com/users/joshlf/repos",
      "events_url": "https://api.github.com/users/joshlf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshlf/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-10-14T05:50:28Z",
    "updated_at": "2017-10-14T05:50:28Z",
    "body": "+1 to that.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/336612405/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/336925418",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-336925418",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 336925418,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjkyNTQxOA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-10-16T15:34:37Z",
    "updated_at": "2017-10-16T15:34:37Z",
    "body": "@stjepang sounds reasonable to me!",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/336925418/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/337169741",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-337169741",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 337169741,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNzE2OTc0MQ==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-10-17T09:14:01Z",
    "updated_at": "2017-10-17T09:14:01Z",
    "body": "> Checking the state and then accessing hits TLS twice, which may be too slow for some use cases.\r\n\r\nThis issue should be resolved now that we have `LocalKey::try_with`.\r\n\r\n> This is very similar to `RefCell::borrow_state` which has also not yet been stabilized. It's likely that the enum here wants to move to boolean accessors so we can add more states in the future.\r\n\r\n`borrow_state` was rejected in favor of `try_borrow`.\r\nApart from `Unitialized`, `Valid`, and `Destroyed` state, what may the additional states even be? Is this still a concern? If not, are we ready to kick off FCP?",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/337169741/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/337314992",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-337314992",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 337314992,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNzMxNDk5Mg==",
    "user": {
      "login": "joshlf",
      "id": 1046063,
      "node_id": "MDQ6VXNlcjEwNDYwNjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1046063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshlf",
      "html_url": "https://github.com/joshlf",
      "followers_url": "https://api.github.com/users/joshlf/followers",
      "following_url": "https://api.github.com/users/joshlf/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshlf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshlf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshlf/subscriptions",
      "organizations_url": "https://api.github.com/users/joshlf/orgs",
      "repos_url": "https://api.github.com/users/joshlf/repos",
      "events_url": "https://api.github.com/users/joshlf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshlf/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-10-17T17:57:48Z",
    "updated_at": "2017-10-17T17:57:48Z",
    "body": "> Apart from `Unitialized`, `Valid`, and `Destroyed` state, what may the additional states even be? Is this still a concern?\r\n\r\nIn #43491, I proposed adding a fourth `Initializing` state between `Uninitialized` and `Valid`. The idea was to allow detection of initialization loops. My particular goal was to support allocators (e.g., elfmalloc relies on crossbeam, which in turn allocates, etc), and I opened PR #43550, but it was eventually closed when we discovered that there was no good way to transition keys into `Initializing` _before_ performing any allocation on platforms that don't support the `#[thread_local]` attribute. Instead, I updated the documentation (#44396) to clarify that recursively-dependent initializers are not supported.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/337314992/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345559180",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-345559180",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 345559180,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTU1OTE4MA==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-19T23:25:28Z",
    "updated_at": "2017-11-19T23:25:28Z",
    "body": "Until we decide what to do with `LocalKeyState`, could we stabilize the `try_with` method only?\r\nI don't see any blockers for that.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345559180/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/357812092",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-357812092",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 357812092,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzgxMjA5Mg==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-15T23:30:37Z",
    "updated_at": "2018-01-15T23:30:37Z",
    "body": "Nominating. I propose that we stabilize the [`LocalKey::try_with`](https://doc.rust-lang.org/nightly/std/thread/struct.LocalKey.html#method.try_with) method and deprecate the [`LocalKey::state`](https://doc.rust-lang.org/nightly/std/thread/struct.LocalKey.html#method.state) method and associated enum. I don't see a good usecase for the enum given this method.\r\n\r\ncc @rust-lang/libs ",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/357812092/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/359967671",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-359967671",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 359967671,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTk2NzY3MQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-23T23:29:34Z",
    "updated_at": "2018-01-23T23:29:34Z",
    "body": "I agree with @Mark-Simulacrum's assessment and would be ok stabilizing `try_with`!\r\n\r\n@rfcbot fcp merge",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/359967671/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/359967672",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-359967672",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 359967672,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTk2NzY3Mg==",
    "user": {
      "login": "rfcbot",
      "id": 20760818,
      "node_id": "MDQ6VXNlcjIwNzYwODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20760818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rfcbot",
      "html_url": "https://github.com/rfcbot",
      "followers_url": "https://api.github.com/users/rfcbot/followers",
      "following_url": "https://api.github.com/users/rfcbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/rfcbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rfcbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rfcbot/subscriptions",
      "organizations_url": "https://api.github.com/users/rfcbot/orgs",
      "repos_url": "https://api.github.com/users/rfcbot/repos",
      "events_url": "https://api.github.com/users/rfcbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rfcbot/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-23T23:29:34Z",
    "updated_at": "2018-02-14T17:54:23Z",
    "body": "Team member @alexcrichton has proposed to merge this. The next step is review by the rest of the tagged teams:\n\n* [x] @BurntSushi\n* [x] @Kimundi\n* [x] @KodrAus\n* [x] @alexcrichton\n* [x] @aturon\n* [x] @dtolnay\n* [x] @sfackler\n* [x] @withoutboats\n\nNo concerns currently listed.\n\nOnce these reviewers reach consensus, this will enter its final comment period. If you spot a major issue that hasn't been raised at any point in this process, please speak up!\n\nSee [this document](https://github.com/anp/rfcbot-rs/blob/master/README.md) for info about what commands tagged team members can give me.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/359967672/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/365690908",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-365690908",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 365690908,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTY5MDkwOA==",
    "user": {
      "login": "rfcbot",
      "id": 20760818,
      "node_id": "MDQ6VXNlcjIwNzYwODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20760818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rfcbot",
      "html_url": "https://github.com/rfcbot",
      "followers_url": "https://api.github.com/users/rfcbot/followers",
      "following_url": "https://api.github.com/users/rfcbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/rfcbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rfcbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rfcbot/subscriptions",
      "organizations_url": "https://api.github.com/users/rfcbot/orgs",
      "repos_url": "https://api.github.com/users/rfcbot/repos",
      "events_url": "https://api.github.com/users/rfcbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rfcbot/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-02-14T17:55:48Z",
    "updated_at": "2018-02-14T17:55:48Z",
    "body": ":bell: **This is now entering its final comment period**, as per the [review above](https://github.com/rust-lang/rust/issues/27716#issuecomment-359967672). :bell:",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/365690908/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/368246670",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-368246670",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 368246670,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2ODI0NjY3MA==",
    "user": {
      "login": "rfcbot",
      "id": 20760818,
      "node_id": "MDQ6VXNlcjIwNzYwODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20760818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rfcbot",
      "html_url": "https://github.com/rfcbot",
      "followers_url": "https://api.github.com/users/rfcbot/followers",
      "following_url": "https://api.github.com/users/rfcbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/rfcbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rfcbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rfcbot/subscriptions",
      "organizations_url": "https://api.github.com/users/rfcbot/orgs",
      "repos_url": "https://api.github.com/users/rfcbot/repos",
      "events_url": "https://api.github.com/users/rfcbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rfcbot/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-02-24T17:57:18Z",
    "updated_at": "2018-02-24T17:57:18Z",
    "body": "The final comment period is now complete.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/368246670/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/420357570",
    "html_url": "https://github.com/rust-lang/rust/issues/27716#issuecomment-420357570",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27716",
    "id": 420357570,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMDM1NzU3MA==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-09-11T17:38:13Z",
    "updated_at": "2018-09-11T17:38:29Z",
    "body": "I regret stabilizing `LocalKey::try_with` with the current signature. :(\r\n\r\nSo the signature of `LocalKey::try_with` is:\r\n\r\n```rust\r\npub fn try_with<F, R>(&'static self, f: F) -> Result<R, AccessError>\r\nwhere\r\n    F: FnOnce(&T) -> R;\r\n```\r\n\r\nWe should've gone with the following instead:\r\n\r\n```rust\r\npub fn try_with<F, R>(&'static self, f: F) -> R\r\nwhere\r\n    F: FnOnce(Result<&T, AccessError>) -> R;\r\n```\r\n\r\nWhy? I have a situation with this helper function:\r\n\r\n```rust\r\npub fn with_context<F, R>(f: F) -> R\r\nwhere\r\n    F: FnOnce(&Arc<Context>) -> R,\r\n{\r\n    CONTEXT.try_with(|cx| f(cx)).unwrap_or_else(|_| f(&Context::new()))\r\n}\r\n```\r\n\r\nUnfortunately, the helper function doesn't compile:\r\n\r\n```rust\r\nerror[E0382]: capture of moved value: `f`\r\n   --> src/internal/context.rs:162:53\r\n    |\r\n162 |     CONTEXT.try_with(|cx| f(cx)).unwrap_or_else(|_| f(&Context::new()))\r\n    |                      ----                           ^ value captured here after move\r\n    |                      |\r\n    |                      value moved (into closure) here\r\n    |\r\n    = note: move occurs because `f` has type `F`, which does not implement the `Copy` trait\r\n```\r\n\r\nSo `F` has to be `FnMut` or additionally `Copy`, which is annoying.\r\n\r\nHad we gone with the other signature for `LocalKey::with`, this would be easy to do:\r\n\r\n```rust\r\npub fn with_context<F, R>(f: F) -> R\r\nwhere\r\n    F: FnOnce(&Arc<Context>) -> R,\r\n{\r\n    CONTEXT.try_with(|cx| {\r\n        match cx {\r\n            Ok(cx) => f(cx),\r\n            Err(..) => f(&Context::new()),\r\n        }\r\n    })\r\n}\r\n```",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/420357570/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
