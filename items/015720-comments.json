[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49305773",
    "html_url": "https://github.com/rust-lang/rust/pull/15720#issuecomment-49305773",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15720",
    "id": 49305773,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MzA1Nzcz",
    "user": {
      "login": "pczarn",
      "id": 3356767,
      "node_id": "MDQ6VXNlcjMzNTY3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3356767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pczarn",
      "html_url": "https://github.com/pczarn",
      "followers_url": "https://api.github.com/users/pczarn/followers",
      "following_url": "https://api.github.com/users/pczarn/following{/other_user}",
      "gists_url": "https://api.github.com/users/pczarn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pczarn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pczarn/subscriptions",
      "organizations_url": "https://api.github.com/users/pczarn/orgs",
      "repos_url": "https://api.github.com/users/pczarn/repos",
      "events_url": "https://api.github.com/users/pczarn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pczarn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-17T13:26:17Z",
    "updated_at": "2014-07-17T14:24:23Z",
    "body": "Had to write a branchless `bucket.next()` to keep the search code both efficient and safe. ~~It speeds up LLVM passes: ...~~\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49305773/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49306088",
    "html_url": "https://github.com/rust-lang/rust/pull/15720#issuecomment-49306088",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15720",
    "id": 49306088,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MzA2MDg4",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-17T13:28:56Z",
    "updated_at": "2014-07-17T13:28:56Z",
    "body": "Are you sure that that is from this patch? `stage0` can be quite old, and thus missing other optimisations that have happened in the meantime. (The \"correct\" comparison would be two stage1s or (preferably) stage2s, one with the patch, one without.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49306088/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49313216",
    "html_url": "https://github.com/rust-lang/rust/pull/15720#issuecomment-49313216",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15720",
    "id": 49313216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MzEzMjE2",
    "user": {
      "login": "pczarn",
      "id": 3356767,
      "node_id": "MDQ6VXNlcjMzNTY3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3356767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pczarn",
      "html_url": "https://github.com/pczarn",
      "followers_url": "https://api.github.com/users/pczarn/followers",
      "following_url": "https://api.github.com/users/pczarn/following{/other_user}",
      "gists_url": "https://api.github.com/users/pczarn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pczarn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pczarn/subscriptions",
      "organizations_url": "https://api.github.com/users/pczarn/orgs",
      "repos_url": "https://api.github.com/users/pczarn/repos",
      "events_url": "https://api.github.com/users/pczarn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pczarn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-17T14:23:46Z",
    "updated_at": "2014-07-17T14:23:46Z",
    "body": "That's right, let's compare two stage1s.\n\n```\nstage1 before the patch\ntime: 0.216 s   parsing\ntime: 0.010 s   gated feature checking\ntime: 0.000 s   crate injection\ntime: 0.034 s   configuration 1\ntime: 0.001 s   plugin loading\ntime: 0.000 s   plugin registration\ntime: 0.487 s   expansion\ntime: 0.038 s   configuration 2\ntime: 0.036 s   maybe building test harness\ntime: 0.000 s   prelude injection\ntime: 0.044 s   assigning node ids and indexing ast\ntime: 0.003 s   checking that all macro invocations are gone\ntime: 0.008 s   external crate/lib resolution\ntime: 0.007 s   language item collection\ntime: 0.095 s   resolution\ntime: 0.004 s   lifetime resolution\ntime: 0.000 s   looking for entry point\ntime: 0.004 s   looking for plugin registrar\ntime: 0.006 s   freevar finding\ntime: 0.011 s   region resolution\ntime: 0.004 s   loop checking\ntime: 0.008 s   stability index\ntime: 0.024 s   type collecting\ntime: 0.007 s   variance inference\ntime: 0.065 s   coherence checking\ntime: 1.416 s   type checking\ntime: 0.005 s   check static items\ntime: 0.013 s   const marking\ntime: 0.004 s   const checking\ntime: 0.041 s   privacy checking\ntime: 0.007 s   intrinsic checking\ntime: 0.006 s   effect checking\ntime: 0.039 s   match checking\ntime: 0.016 s   liveness checking\ntime: 0.139 s   borrow checking\ntime: 0.031 s   kind checking\ntime: 0.006 s   reachability checking\ntime: 0.020 s   death checking\ntime: 0.106 s   lint checking\ntime: 0.000 s   resolving dependency formats\ntime: 2.257 s   translation\n  time: 0.356 s llvm function passes\n  time: 6.334 s llvm module passes\n  time: 3.113 s codegen passes\ntime: 9.950 s   LLVM passes\n  time: 0.096 s running linker\ntime: 0.870 s   linking\n\nreal    0m16.262s\nuser    0m15.487s\nsys 0m0.343s\n\nstage1 with the patch\ntime: 0.226 s   parsing\ntime: 0.010 s   gated feature checking\ntime: 0.000 s   crate injection\ntime: 0.036 s   configuration 1\ntime: 0.001 s   plugin loading\ntime: 0.000 s   plugin registration\ntime: 0.496 s   expansion\ntime: 0.040 s   configuration 2\ntime: 0.038 s   maybe building test harness\ntime: 0.000 s   prelude injection\ntime: 0.044 s   assigning node ids and indexing ast\ntime: 0.003 s   checking that all macro invocations are gone\ntime: 0.009 s   external crate/lib resolution\ntime: 0.007 s   language item collection\ntime: 0.091 s   resolution\ntime: 0.004 s   lifetime resolution\ntime: 0.000 s   looking for entry point\ntime: 0.004 s   looking for plugin registrar\ntime: 0.007 s   freevar finding\ntime: 0.010 s   region resolution\ntime: 0.004 s   loop checking\ntime: 0.007 s   stability index\ntime: 0.023 s   type collecting\ntime: 0.007 s   variance inference\ntime: 0.066 s   coherence checking\ntime: 1.392 s   type checking\ntime: 0.005 s   check static items\ntime: 0.015 s   const marking\ntime: 0.004 s   const checking\ntime: 0.042 s   privacy checking\ntime: 0.007 s   intrinsic checking\ntime: 0.006 s   effect checking\ntime: 0.041 s   match checking\ntime: 0.016 s   liveness checking\ntime: 0.135 s   borrow checking\ntime: 0.033 s   kind checking\ntime: 0.007 s   reachability checking\ntime: 0.020 s   death checking\ntime: 0.101 s   lint checking\ntime: 0.000 s   resolving dependency formats\ntime: 2.226 s   translation\n  time: 0.352 s llvm function passes\n  time: 6.361 s llvm module passes\n  time: 3.167 s codegen passes\ntime: 10.025 s  LLVM passes\n  time: 0.101 s running linker\ntime: 0.749 s   linking\n\nreal    0m16.169s\nuser    0m15.493s\nsys 0m0.347s\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49313216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49531407",
    "html_url": "https://github.com/rust-lang/rust/pull/15720#issuecomment-49531407",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15720",
    "id": 49531407,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NTMxNDA3",
    "user": {
      "login": "pczarn",
      "id": 3356767,
      "node_id": "MDQ6VXNlcjMzNTY3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3356767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pczarn",
      "html_url": "https://github.com/pczarn",
      "followers_url": "https://api.github.com/users/pczarn/followers",
      "following_url": "https://api.github.com/users/pczarn/following{/other_user}",
      "gists_url": "https://api.github.com/users/pczarn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pczarn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pczarn/subscriptions",
      "organizations_url": "https://api.github.com/users/pczarn/orgs",
      "repos_url": "https://api.github.com/users/pczarn/repos",
      "events_url": "https://api.github.com/users/pczarn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pczarn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-19T22:39:50Z",
    "updated_at": "2014-07-22T10:29:27Z",
    "body": "This is nearly ready for a merge. I'm going check a few details and document them.\n\n~~Note to myself: check that the map never reaches the capacity~~\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/49531407/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/50089953",
    "html_url": "https://github.com/rust-lang/rust/pull/15720#issuecomment-50089953",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15720",
    "id": 50089953,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDg5OTUz",
    "user": {
      "login": "pczarn",
      "id": 3356767,
      "node_id": "MDQ6VXNlcjMzNTY3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3356767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pczarn",
      "html_url": "https://github.com/pczarn",
      "followers_url": "https://api.github.com/users/pczarn/followers",
      "following_url": "https://api.github.com/users/pczarn/following{/other_user}",
      "gists_url": "https://api.github.com/users/pczarn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pczarn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pczarn/subscriptions",
      "organizations_url": "https://api.github.com/users/pczarn/orgs",
      "repos_url": "https://api.github.com/users/pczarn/repos",
      "events_url": "https://api.github.com/users/pczarn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pczarn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-24T23:06:58Z",
    "updated_at": "2014-07-26T19:21:22Z",
    "body": "~~The most recent build has failed on a test for a recent LLVM bug, https://github.com/rust-lang/rust/issues/15793. Oddly, only comments have changed between builds.~~\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/50089953/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/50246024",
    "html_url": "https://github.com/rust-lang/rust/pull/15720#issuecomment-50246024",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15720",
    "id": 50246024,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMjQ2MDI0",
    "user": {
      "login": "pczarn",
      "id": 3356767,
      "node_id": "MDQ6VXNlcjMzNTY3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3356767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pczarn",
      "html_url": "https://github.com/pczarn",
      "followers_url": "https://api.github.com/users/pczarn/followers",
      "following_url": "https://api.github.com/users/pczarn/following{/other_user}",
      "gists_url": "https://api.github.com/users/pczarn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pczarn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pczarn/subscriptions",
      "organizations_url": "https://api.github.com/users/pczarn/orgs",
      "repos_url": "https://api.github.com/users/pczarn/repos",
      "events_url": "https://api.github.com/users/pczarn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pczarn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-26T19:26:21Z",
    "updated_at": "2014-07-26T20:48:48Z",
    "body": "The build passes once again. Everything is resolved so far and ready for a merge.\n\nI hope I didn't accidentally remove anything during rebase.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/50246024/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/50692211",
    "html_url": "https://github.com/rust-lang/rust/pull/15720#issuecomment-50692211",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15720",
    "id": 50692211,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNjkyMjEx",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-30T23:02:33Z",
    "updated_at": "2014-07-30T23:02:33Z",
    "body": "I was running some JSON tests today and got these results:\n\n```\nlibserialize::json + TreeMap (default) :  21805 ns/iter (+/- 949)\nlibserialize::json + HashMap (old) : 25397 ns/iter (+/- 815)\nlibserialize::json + new HashMap (new) : 23245 ns/iter (+/- 795)\n```\n\nSo it's an improvement but it still doesn't match the JSON decoder using TreeMap.\nI tried a few micro benchmarks inserting 9 small strings into both Maps and the new HashMap is slight faster ~5%. So the ~7% slower JSON decoder sounds funky to me.\n\nI don't have the expertise to check the reason, but someone more experienced may find it worth a look.\n\nCode\n\n```\n\nextern crate time;\nextern crate test;\n\n\nextern crate serialize;\nuse serialize::json;\n\n\nuse std::rand::Rng;\nuse std::rand;\nuse test::Bencher;\nuse std::collections::{TreeMap, HashMap};\n\npub struct TestStruct1  {\n    data_int1: int,\n    data_int2: int,\n    data_int3: int,\n    data_str1: String,\n    data_str2: String,\n    data_str3: String,\n    data_map: Option<Vec<Box<TestStruct1>>>,\n    data_vector: Vec<u8>,\n    data_vector_s: Vec<String>,\n}\n\n#[bench]\nfn bench_decode(b: &mut Bencher) {\n    let mut object = TestStruct1\n         {data_int1: -999, data_int2: 999, data_int3: 9999, data_str1:\"toto\".to_string(), data_str2:\"toto\".to_string(), data_str3:\"toto\".to_string(),\n         data_vector:vec![2,3,4,5], data_vector_s:vec![\"hi\".to_string(), \"mom\".to_string()], data_map:None};\n\n    object = TestStruct1\n         {data_int1: -999, data_int2: 999, data_int3: 9999,  data_str1:\"toto\".to_string(), data_str2:\"toto\".to_string(), data_str3:\"toto\".to_string(),\n         data_vector:vec![2,3,4,5], data_vector_s:vec![\"hi\".to_string(), \"mom\".to_string()], data_map:Some(vec![box object])};\n\n    object = TestStruct1\n         {data_int1: -999, data_int2: 999, data_int3: 9999, data_str1:\"toto\".to_string(), data_str2:\"toto\".to_string(), data_str3:\"toto\".to_string(),\n         data_vector:vec![2,3,4,5], data_vector_s:vec![\"hi\".to_string(), \"mom\".to_string()], data_map:Some(vec![box object])};\n\n     // Serialize using `json::encode`\n    let encoded = json::encode(&object);\n\n    b.iter( || {\n        let _ = json::from_str(encoded.as_slice());\n    });\n}\n\n\n#[bench]\nfn bench_hashmap_insert(b: &mut Bencher) {\n\n    let v0: Vec<int> = rand::task_rng().gen_iter::<int>().take(9).collect();\n\n    let mut v: Vec<String> = Vec::new();\n\n    for i in v0.iter() {\n        v.push(\"test_\".to_string() + i.to_string());\n    }\n\n    b.iter(|| {\n        let mut m = HashMap::new();\n\n        for i_s in v.iter() {\n            m.insert(i_s.clone(), i_s);\n        }\n    });\n}\n\n\n\n#[bench]\nfn bench_treemap_insert(b: &mut Bencher) {\n\n\n    let v0: Vec<int> = rand::task_rng().gen_iter::<int>().take(9).collect();\n\n    let mut v: Vec<String> = Vec::new();\n\n    for i in v0.iter() {\n        v.push(\"test_\".to_string() +  i.to_string());\n    }\n\n    b.iter(|| {\n        let mut m = TreeMap::new();\n\n        for i_s in v.iter() {\n            m.insert(i_s.clone(), i_s);\n        }\n    });\n}\n\n\n```\n\nJSON used:\n\n```\n{\n    \"data_int1\": -999,\n    \"data_int2\": 999,\n    \"data_int3\": 9999,\n    \"data_str1\": \"toto\",\n    \"data_str2\": \"toto\",\n    \"data_str3\": \"toto\",\n    \"data_map\": [\n        {\n            \"data_int1\": -999,\n            \"data_int2\": 999,\n            \"data_int3\": 9999,\n            \"data_str1\": \"toto\",\n            \"data_str2\": \"toto\",\n            \"data_str3\": \"toto\",\n            \"data_map\": [\n                {\n                    \"data_int1\": -999,\n                    \"data_int2\": 999,\n                    \"data_int3\": 9999,\n                    \"data_str1\": \"toto\",\n                    \"data_str2\": \"toto\",\n                    \"data_str3\": \"toto\",\n                    \"data_map\": null,\n                    \"data_vector\": [\n                        2,\n                        3,\n                        4,\n                        5\n                    ],\n                    \"data_vector_s\": [\n                        \"hi\",\n                        \"mom\"\n                    ]\n                }\n            ],\n            \"data_vector\": [\n                2,\n                3,\n                4,\n                5\n            ],\n            \"data_vector_s\": [\n                \"hi\",\n                \"mom\"\n            ]\n        }\n    ],\n    \"data_vector\": [\n        2,\n        3,\n        4,\n        5\n    ],\n    \"data_vector_s\": [\n        \"hi\",\n        \"mom\"\n    ]\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/50692211/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/50878987",
    "html_url": "https://github.com/rust-lang/rust/pull/15720#issuecomment-50878987",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15720",
    "id": 50878987,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODc4OTg3",
    "user": {
      "login": "pczarn",
      "id": 3356767,
      "node_id": "MDQ6VXNlcjMzNTY3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3356767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pczarn",
      "html_url": "https://github.com/pczarn",
      "followers_url": "https://api.github.com/users/pczarn/followers",
      "following_url": "https://api.github.com/users/pczarn/following{/other_user}",
      "gists_url": "https://api.github.com/users/pczarn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pczarn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pczarn/subscriptions",
      "organizations_url": "https://api.github.com/users/pczarn/orgs",
      "repos_url": "https://api.github.com/users/pczarn/repos",
      "events_url": "https://api.github.com/users/pczarn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pczarn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-01T12:35:57Z",
    "updated_at": "2014-08-01T12:36:14Z",
    "body": "@arthurprs Benchmarking insertion is not reliable since it depends on the allocator. Does serialization create an empty map for every structure? The difference would be best measured with a profiler.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/50878987/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/50890394",
    "html_url": "https://github.com/rust-lang/rust/pull/15720#issuecomment-50890394",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15720",
    "id": 50890394,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODkwMzk0",
    "user": {
      "login": "arthurprs",
      "id": 715958,
      "node_id": "MDQ6VXNlcjcxNTk1OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/715958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurprs",
      "html_url": "https://github.com/arthurprs",
      "followers_url": "https://api.github.com/users/arthurprs/followers",
      "following_url": "https://api.github.com/users/arthurprs/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurprs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurprs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurprs/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurprs/orgs",
      "repos_url": "https://api.github.com/users/arthurprs/repos",
      "events_url": "https://api.github.com/users/arthurprs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurprs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-01T14:28:11Z",
    "updated_at": "2014-08-01T14:31:50Z",
    "body": "I tried to, but since I have little experience with rust internals and C-ish profilers I couldn't identify the reason.\n\nThe object building code is bellow, it's pretty simple. The only changes I made was replacing TreeMap with HashMap.\n\n```\n\npub enum Json {\n    Number(f64),\n    String(String),\n    Boolean(bool),\n    List(List),\n    Object(Object),\n    Null,\n}\n\npub type Object = HashMap<String, Json>;\n\n\n    fn build_object(&mut self) -> Result<Json, BuilderError> {\n        self.bump();\n\n        let mut values = HashMap::new();\n\n        loop {\n            match self.token {\n                Some(ObjectEnd) => { return Ok(Object(values)); }\n                Some(Error(e)) => { return Err(e); }\n                None => { break; }\n                _ => {}\n            }\n            let key = match self.parser.stack().top() {\n                Some(Key(k)) => { k.to_string() }\n                _ => { fail!(\"invalid state\"); }\n            };\n            match self.build_value() {\n                Ok(value) => { values.insert(key, value); }\n                Err(e) => { return Err(e); }\n            }\n            self.bump();\n        }\n        return self.parser.error(EOFWhileParsingObject);\n    }\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/50890394/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52591289",
    "html_url": "https://github.com/rust-lang/rust/pull/15720#issuecomment-52591289",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15720",
    "id": 52591289,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTkxMjg5",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-19T05:12:49Z",
    "updated_at": "2014-08-19T05:12:49Z",
    "body": "Closing due to inactivity, but feel free to reopen with a rebase!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52591289/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52781346",
    "html_url": "https://github.com/rust-lang/rust/pull/15720#issuecomment-52781346",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15720",
    "id": 52781346,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNzgxMzQ2",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-20T13:57:43Z",
    "updated_at": "2014-08-20T13:57:43Z",
    "body": "Argh! @pczarn I completely forgot about this pull request -- if you do rebase, please ping me and I will try to review promptly.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52781346/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
