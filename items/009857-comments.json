[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26297052",
    "html_url": "https://github.com/rust-lang/rust/pull/9857#issuecomment-26297052",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9857",
    "id": 26297052,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2Mjk3MDUy",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-14T23:21:10Z",
    "updated_at": "2013-10-14T23:21:10Z",
    "body": "This fixes a problem described on [dev-servo](https://groups.google.com/forum/#!topic/mozilla.dev.servo/7M_rtMoUMsg)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26297052/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26298330",
    "html_url": "https://github.com/rust-lang/rust/pull/9857#issuecomment-26298330",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9857",
    "id": 26298330,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2Mjk4MzMw",
    "user": {
      "login": "sanxiyn",
      "id": 45249,
      "node_id": "MDQ6VXNlcjQ1MjQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sanxiyn",
      "html_url": "https://github.com/sanxiyn",
      "followers_url": "https://api.github.com/users/sanxiyn/followers",
      "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions",
      "organizations_url": "https://api.github.com/users/sanxiyn/orgs",
      "repos_url": "https://api.github.com/users/sanxiyn/repos",
      "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sanxiyn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-14T23:48:46Z",
    "updated_at": "2013-10-14T23:48:46Z",
    "body": "CC #9831.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26298330/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26301027",
    "html_url": "https://github.com/rust-lang/rust/pull/9857#issuecomment-26301027",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9857",
    "id": 26301027,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzAxMDI3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-15T00:50:20Z",
    "updated_at": "2013-10-15T00:50:20Z",
    "body": "The patch itself looks fine to me, but I'm a little confused about what's going on here. This seems to be indicative of a larger problem if we've got runnable tasks that are waking up schedulers they can't run on. I'm not really sure why a task wouldn't be run on a scheduler, and if it's targeted at a specific scheduler then it seems like we shouldn't be waking up other schedulers regardless.\n\nCould you explain a bit more about what's happening? I'm not sure why the main scheduler is determining that it can't run this task, and I'm also not sure why the task is waking up the main scheduler if it can't be run on it.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26301027/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26372082",
    "html_url": "https://github.com/rust-lang/rust/pull/9857#issuecomment-26372082",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9857",
    "id": 26372082,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzcyMDgy",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-15T21:04:29Z",
    "updated_at": "2013-10-15T21:07:06Z",
    "body": "@alexcrichton \n\nSchedulers run on a single thread. Within the runtime, some subset of the schedulers are work stealing schedulers, some are not. The work stealing schedulers are collaborating to schedule tasks across threads. The non-work stealing schedulers are currently used solely for 'single-threaded schedulers' in which one task is assigned it's own scheduler and it's own thread.\n\nThere are two [reasons](https://github.com/mozilla/rust/blob/master/src/libstd/rt/sched.rs#L459) that a scheduler may not be able to run a task:\n- If the task is 'homed', e.g. if it is tied to a single-thread scheduler or is doing I/O, then it can only run on the 'home' scheduler.\n- If the scheduler has the 'run_anything' flag unset, i.e. it is tied to a specific homed task.\n\nTasks that are homed to a specific scheduler are sent directly to that scheduler for execution - they do not wake up any other schedulers. Tasks that are not homed but can't be run on the local scheduler are sent instead to a scheduler-designated 'friend' scheduler for reevaluation.\n\nAll schedulers share a `SleeperList` which contains a stack of work-stealing schedulers that are waiting for work. When a work-stealing scheduler discovers that there is no work to do it pushes it's handle to the list and idles. When a scheduler makes work available it pops a scheduler handle from the sleeper list and sends it a message to wake up and steal.\n\nWhat was happening here is that the main thread scheduler, which is a single-threaded scheduler that runs the homed main task, was pushing itself to the sleeper list as if it were a work-stealing scheduler. It would get woken up to look for work, steal random, unhomed tasks, but because the main thread scheduler's 'run_anything' flag is false could not actually run the tasks, so it would send it to its friend scheduler.\n\nAnother way to phrase this change might be to make Scheduler not push to the SleeperList when the `run_anything` flag is false. This change as written though specifically makes the main thread scheduler's set up identical to those created with `spawn(SingleThreaded)`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26372082/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26393044",
    "html_url": "https://github.com/rust-lang/rust/pull/9857#issuecomment-26393044",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9857",
    "id": 26393044,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzkzMDQ0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-16T05:00:59Z",
    "updated_at": "2013-10-16T05:00:59Z",
    "body": "Thanks for the explanation! I think it's fine to have the identical setup, and I also think that it makes the most sense.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26393044/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
