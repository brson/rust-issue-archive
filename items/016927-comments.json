[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54268012",
    "html_url": "https://github.com/rust-lang/rust/pull/16927#issuecomment-54268012",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16927",
    "id": 54268012,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MjY4MDEy",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-03T08:47:11Z",
    "updated_at": "2014-09-03T08:47:11Z",
    "body": "Can somebody with access to a Mac help debugging this? I can't reproduce the problem on linux.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54268012/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54309085",
    "html_url": "https://github.com/rust-lang/rust/pull/16927#issuecomment-54309085",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16927",
    "id": 54309085,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzA5MDg1",
    "user": {
      "login": "vhbit",
      "id": 140199,
      "node_id": "MDQ6VXNlcjE0MDE5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/140199?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vhbit",
      "html_url": "https://github.com/vhbit",
      "followers_url": "https://api.github.com/users/vhbit/followers",
      "following_url": "https://api.github.com/users/vhbit/following{/other_user}",
      "gists_url": "https://api.github.com/users/vhbit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vhbit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vhbit/subscriptions",
      "organizations_url": "https://api.github.com/users/vhbit/orgs",
      "repos_url": "https://api.github.com/users/vhbit/repos",
      "events_url": "https://api.github.com/users/vhbit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vhbit/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-03T14:53:13Z",
    "updated_at": "2014-09-03T14:53:13Z",
    "body": "I can reproduce it on Mac, checked a couple of produced `core`s and the common pattern is:\n\n```\nthread #9: tid = 0x0008, 0x000000010a9164f8 librustc_llvm-4e7c5e5c.dylib`void std::__1::__tree_balance_after_insert<std::__1::__tree_node_base<void*>*>(std::__1::__tree_node_base<void*>*, std::__1::__tree_node_base<void*>*) + 328, stop reason = signal SIGSTOP\n    frame #0: 0x000000010a9164f8 librustc_llvm-4e7c5e5c.dylib`void std::__1::__tree_balance_after_insert<std::__1::__tree_node_base<void*>*>(std::__1::__tree_node_base<void*>*, std::__1::__tree_node_base<void*>*) + 328\nlibrustc_llvm-4e7c5e5c.dylib`void std::__1::__tree_balance_after_insert<std::__1::__tree_node_base<void*>*>(std::__1::__tree_node_base<void*>*, std::__1::__tree_node_base<void*>*) + 328:\n-> 0x10a9164f8:  movq   (%rcx), %rdx\n   0x10a9164fb:  testq  %rdx, %rdx\n   0x10a9164fe:  movq   %rdx, 0x8(%rax)\n   0x10a916502:  je     0x10a916508               ; void std::__1::__tree_balance_after_insert<std::__1::__tree_node_base<void*>*>(std::__1::__tree_node_base<void*>*, std::__1::__tree_node_base<void*>*) + 344\n```\n\nThe fun thing is that crashes aren't stable, i.e. rerunning tests indefinitely will make all of them pass. Also it happens only on tests from `rustdoc`. \n\nSo most probably LLVM internally uses non-thread-safe tree and if `rustdoc` test runner uses concurrency extensively (I'm not familiar with it but considering every `core` has 14 threads it's very likely) - it might be just a matter of luck on how long LLVM will not fail.\n\n@alexcrichton?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54309085/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54309443",
    "html_url": "https://github.com/rust-lang/rust/pull/16927#issuecomment-54309443",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16927",
    "id": 54309443,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzA5NDQz",
    "user": {
      "login": "vhbit",
      "id": 140199,
      "node_id": "MDQ6VXNlcjE0MDE5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/140199?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vhbit",
      "html_url": "https://github.com/vhbit",
      "followers_url": "https://api.github.com/users/vhbit/followers",
      "following_url": "https://api.github.com/users/vhbit/following{/other_user}",
      "gists_url": "https://api.github.com/users/vhbit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vhbit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vhbit/subscriptions",
      "organizations_url": "https://api.github.com/users/vhbit/orgs",
      "repos_url": "https://api.github.com/users/vhbit/repos",
      "events_url": "https://api.github.com/users/vhbit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vhbit/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-03T14:55:35Z",
    "updated_at": "2014-09-03T14:55:35Z",
    "body": "Here are a couple of [full stacktraces](https://gist.github.com/vhbit/727c73839c87b5de1d6a)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54309443/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54309657",
    "html_url": "https://github.com/rust-lang/rust/pull/16927#issuecomment-54309657",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16927",
    "id": 54309657,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzA5NjU3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-03T14:56:54Z",
    "updated_at": "2014-09-03T14:56:54Z",
    "body": "Yeah I was able to reproduce what @vhbit was seeing as well. It looks like LLVM is not exactly threadsafe where it says it's threadsafe (bug in LLVM, sadly).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54309657/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
