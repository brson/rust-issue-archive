[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22737931",
    "html_url": "https://github.com/rust-lang/rust/issues/8516#issuecomment-22737931",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8516",
    "id": 22737931,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzM3OTMx",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-15T23:18:59Z",
    "updated_at": "2013-08-15T23:18:59Z",
    "body": "I tried looking into this a bit. The failed assertion is in `middle::trans::adt::trans_const()`, when it checks for `NullablePointer`. After determining that this is the null case, it asserts that `vals.len()` is `0`, and that's the assertion that fails.\n\nI'm not particularly familiar with this code (or really, any of the compiler yet), but the null case in this enum is of course `One(())`. I imagine the one value that's present is the `()`. The docstr for `NullablePointer` says that the null case \"is inhabited by at most one value\". This seems to be at odds with the assertion that checks `vals.len() == 0` (assuming that `vals` here is what the docstr is referring to).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22737931/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22739726",
    "html_url": "https://github.com/rust-lang/rust/issues/8516#issuecomment-22739726",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8516",
    "id": 22739726,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzM5NzI2",
    "user": {
      "login": "jld",
      "id": 254973,
      "node_id": "MDQ6VXNlcjI1NDk3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/254973?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jld",
      "html_url": "https://github.com/jld",
      "followers_url": "https://api.github.com/users/jld/followers",
      "following_url": "https://api.github.com/users/jld/following{/other_user}",
      "gists_url": "https://api.github.com/users/jld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jld/subscriptions",
      "organizations_url": "https://api.github.com/users/jld/orgs",
      "repos_url": "https://api.github.com/users/jld/repos",
      "events_url": "https://api.github.com/users/jld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jld/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-16T00:05:24Z",
    "updated_at": "2013-08-16T00:05:24Z",
    "body": "Indeed, that assertion is wrong and should be deleted.  A variant with size-0 contents is eligible to be a null pointer, but since size-0 types like `()` exist, it can have a nonzero number of fields.\n\nThe test `nullable-pointer-iotareduction.rs` would have caught that \u2014 the type used there is `enum E<T> { Thing(int, T), Nothing((), ((), ()), [i8, ..0]) }`, for exactly this reason \u2014 but somehow I forgot to test `static`s.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22739726/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35330217",
    "html_url": "https://github.com/rust-lang/rust/issues/8516#issuecomment-35330217",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8516",
    "id": 35330217,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzMwMjE3",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-17T22:46:44Z",
    "updated_at": "2014-02-17T22:46:44Z",
    "body": "Updated code, new assertion:\n\n``` rust\n#[feature(struct_variant)];             \n\nenum Either {                           \n    One(()),                            \n    Other { left:~str, right:~str}      \n}                                       \n\nstatic one : Either = One(());          \nfn main () {}                           \n```\n\n```\nfoo.rs:3:1: 6:2 warning: code is never used: `Either`, #[warn(dead_code)] on by default                                        \nfoo.rs:3 enum Either {                                                                                                         \nfoo.rs:4     One(()),                                                                                                          \nfoo.rs:5     Other { left:~str, right:~str}                                                                                    \nfoo.rs:6 }                                                                                                                     \nfoo.rs:8:1: 8:31 warning: code is never used: `one`, #[warn(dead_code)] on by default                                          \nfoo.rs:8 static one : Either = One(());                                                                                        \n         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~                                                                                        \nerror: internal compiler error: unexpected failure                                                                             \nThis message reflects a bug in the Rust compiler.                                                                              \nWe would appreciate a bug report: http://static.rust-lang.org/doc/master/complement-bugreport.html                             \nnote: the compiler hit an unexpected failure path. this is a bug                                                               \nOk(task 'rustc' failed at 'assertion failed: !is_undef(wrapped)', /build/rust-git/src/rust/src/librustc/middle/trans/adt.rs:796\n)                                                                                                                              \n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35330217/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36450694",
    "html_url": "https://github.com/rust-lang/rust/issues/8516#issuecomment-36450694",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8516",
    "id": 36450694,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDUwNjk0",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-02T10:18:49Z",
    "updated_at": "2014-03-02T10:18:49Z",
    "body": "This doesn't need `#[feature(struct_variant)];`, the source of the problem is `One(())`.\n@carl-eastlund, could you update the issue description?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36450694/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36457430",
    "html_url": "https://github.com/rust-lang/rust/issues/8516#issuecomment-36457430",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8516",
    "id": 36457430,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDU3NDMw",
    "user": {
      "login": "carl-eastlund",
      "id": 1545750,
      "node_id": "MDQ6VXNlcjE1NDU3NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1545750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/carl-eastlund",
      "html_url": "https://github.com/carl-eastlund",
      "followers_url": "https://api.github.com/users/carl-eastlund/followers",
      "following_url": "https://api.github.com/users/carl-eastlund/following{/other_user}",
      "gists_url": "https://api.github.com/users/carl-eastlund/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/carl-eastlund/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/carl-eastlund/subscriptions",
      "organizations_url": "https://api.github.com/users/carl-eastlund/orgs",
      "repos_url": "https://api.github.com/users/carl-eastlund/repos",
      "events_url": "https://api.github.com/users/carl-eastlund/events{/privacy}",
      "received_events_url": "https://api.github.com/users/carl-eastlund/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-02T15:53:11Z",
    "updated_at": "2014-03-02T15:53:11Z",
    "body": "I haven't looked at Rust or this issue in several months; if there's\nsomething in the issue that only I can update, you'll have to spell out\nwhat I need to change it to.  A lot of these details are paged out of my\nmind right now.\n\nCarl Eastlund\n\nOn Sun, Mar 2, 2014 at 5:19 AM, Eduard Burtescu notifications@github.comwrote:\n\n> This doesn't need #[feature(struct_variant)];, the source of the problem\n> is One(()).\n> @carl-eastlund https://github.com/carl-eastlund, could you update the\n> issue description?\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/mozilla/rust/issues/8516#issuecomment-36450694\n> .\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36457430/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36457850",
    "html_url": "https://github.com/rust-lang/rust/issues/8516#issuecomment-36457850",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8516",
    "id": 36457850,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDU3ODUw",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-02T16:08:19Z",
    "updated_at": "2014-03-02T16:08:19Z",
    "body": "@eddyb the issue description doesn't really need updating, especially since there's no specifics still.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36457850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36707056",
    "html_url": "https://github.com/rust-lang/rust/issues/8516#issuecomment-36707056",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8516",
    "id": 36707056,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NzA3MDU2",
    "user": {
      "login": "jld",
      "id": 254973,
      "node_id": "MDQ6VXNlcjI1NDk3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/254973?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jld",
      "html_url": "https://github.com/jld",
      "followers_url": "https://api.github.com/users/jld/followers",
      "following_url": "https://api.github.com/users/jld/following{/other_user}",
      "gists_url": "https://api.github.com/users/jld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jld/subscriptions",
      "organizations_url": "https://api.github.com/users/jld/orgs",
      "repos_url": "https://api.github.com/users/jld/repos",
      "events_url": "https://api.github.com/users/jld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jld/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-05T03:35:44Z",
    "updated_at": "2014-03-05T03:35:44Z",
    "body": "I'm sure I commented on this somewhere at some point since I wrote that last comment \u2014 I was assuming that an undef could be wrapped in a struct to make it not-undef (because undef is used for alignment padding, because we have to add our own for constants in some cases), but that doesn't actually work.  So the `!is_undef` assertion actually does indicate that stuff would break otherwise.  The code that fills in undef for the unused fields of non-nullary null pointer variants should just use `C_null`, I think.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36707056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36707651",
    "html_url": "https://github.com/rust-lang/rust/issues/8516#issuecomment-36707651",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8516",
    "id": 36707651,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NzA3NjUx",
    "user": {
      "login": "jld",
      "id": 254973,
      "node_id": "MDQ6VXNlcjI1NDk3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/254973?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jld",
      "html_url": "https://github.com/jld",
      "followers_url": "https://api.github.com/users/jld/followers",
      "following_url": "https://api.github.com/users/jld/following{/other_user}",
      "gists_url": "https://api.github.com/users/jld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jld/subscriptions",
      "organizations_url": "https://api.github.com/users/jld/orgs",
      "repos_url": "https://api.github.com/users/jld/repos",
      "events_url": "https://api.github.com/users/jld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jld/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-05T03:50:03Z",
    "updated_at": "2014-03-05T03:50:03Z",
    "body": "\u2026and that's #8506.  I'll close this, because the failure this was initially opened for was fixed in 5487f15bbfae92747373a9b9e11b67db3a82c7d5 / #11441, but I apparently forgot the \u201cCloses\u201d annotation on the commit.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/36707651/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
