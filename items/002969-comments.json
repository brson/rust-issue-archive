[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11111515",
    "html_url": "https://github.com/rust-lang/rust/issues/2969#issuecomment-11111515",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2969",
    "id": 11111515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExMTExNTE1",
    "user": {
      "login": "catamorphism",
      "id": 427212,
      "node_id": "MDQ6VXNlcjQyNzIxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/catamorphism",
      "html_url": "https://github.com/catamorphism",
      "followers_url": "https://api.github.com/users/catamorphism/followers",
      "following_url": "https://api.github.com/users/catamorphism/following{/other_user}",
      "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions",
      "organizations_url": "https://api.github.com/users/catamorphism/orgs",
      "repos_url": "https://api.github.com/users/catamorphism/repos",
      "events_url": "https://api.github.com/users/catamorphism/events{/privacy}",
      "received_events_url": "https://api.github.com/users/catamorphism/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-12-06T23:37:47Z",
    "updated_at": "2012-12-06T23:37:47Z",
    "body": "Reproduced as of b60a0be424c9e3ef6266ef4da17397ea90db9694\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/11111515/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/15303708",
    "html_url": "https://github.com/rust-lang/rust/issues/2969#issuecomment-15303708",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2969",
    "id": 15303708,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MzAzNzA4",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-03-22T15:38:53Z",
    "updated_at": "2013-03-22T15:39:16Z",
    "body": "According to my experiments with the current rustc, the statement \"if you were to change it to a mutable loan, it's okay\" is false, and therefore changing the error message in the manner described would be a mistake.\n\nThat is, from what I can tell, rustc treats this:\n\n``` rust\nfn foo01() { // local vector, mutable borrow\n    let x = [1, 2, 4];\n    let v : &mut int = &mut x[2];\n    x[2] = 6; // error: assigning to mutable vec content prohibited due to outstanding loan\n    fail_unless!( *v == 6 );\n}\n```\n\nthe same way that it treats this:\n\n``` rust\nfn foo11() { // owned vector, mutable borrow\n    let x = ~[1, 2, 4];\n    let v : &mut int = &mut x[2];\n    x[2] = 6; // error: assigning to mutable vec content prohibited due to outstanding loan\n    fail_unless!( *v == 6 );\n}\n```\n\nand that is very different from how it treats this:\n\n``` rust\nfn foo21() { // heap-mutable vector, mutable borrow\n    let x = @mut [1, 2, 4];\n    let v : &mut int = &mut x[2];\n    x[2] = 6;\n    fail_unless!( *v == 6 );\n}\n```\n\nFor the case of the owned vector, the error message makes perfect sense, regardless of whether the loan is mutable or immutable.  (And I'm pretty sure we have intentionally given stack-local allocation a semantics matching that of owned allocations.)\n\n---\n\nThe only other scenario that I can imagine this bug is trying to describe, is when we have a heap-mutable vector and an immutable-borrow, like this:\n\n``` rust\nfn foo20() { // heap-mutable vector, immutable borrow\n    let x = @mut [1, 2, 4];\n    let v : &int = &x[2]; // error: illegal borrow unless pure: creating immutable alias to mutable vec content\n    x[2] = 6; // note: impure due to assigning to mutable vec content\n    fail_unless!( *v == 6 );\n}\n```\n\nBut rustc emits different error messages (shown above) for these two cases.\n\n---\n\nSo, I am closing this bug as it is not-a-bug, AFAICT.  Feel free to reopen if I have misunderstood the issue or incorrectly translated the example to the current syntax.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/15303708/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
