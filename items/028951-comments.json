[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147114080",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-147114080",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 147114080,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzExNDA4MA==",
    "user": {
      "login": "bstrie",
      "id": 865233,
      "node_id": "MDQ6VXNlcjg2NTIzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bstrie",
      "html_url": "https://github.com/bstrie",
      "followers_url": "https://api.github.com/users/bstrie/followers",
      "following_url": "https://api.github.com/users/bstrie/following{/other_user}",
      "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions",
      "organizations_url": "https://api.github.com/users/bstrie/orgs",
      "repos_url": "https://api.github.com/users/bstrie/repos",
      "events_url": "https://api.github.com/users/bstrie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bstrie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-10T18:24:56Z",
    "updated_at": "2015-10-10T18:24:56Z",
    "body": "Let's use this as a tracking issue to begin discussing blockers that need to be resolved. @eddyb mentions that we should start by removing trailing padding... whatever that means. :P\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147114080/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147116598",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-147116598",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 147116598,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzExNjU5OA==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-10T18:50:11Z",
    "updated_at": "2015-10-10T18:50:11Z",
    "body": "C mixes pointers and arrays in various ways and thus requires that the size of any type is a multiple of the alignment.\nWe don't have to do this, except for `#[repr(C)]` structs, so `((u16, u8), u8)` could be 4 bytes instead of 6 (that it currently is).\n`ptr.offset(n)` would continue to work by rounding up the size to be a multiple of the alignment, and we currently don't make guarantees about `size_of` so nobody should mix pointers to sequences and addresses/sizes.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147116598/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147118849",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-147118849",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 147118849,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzExODg0OQ==",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-10T19:29:16Z",
    "updated_at": "2015-10-10T19:33:25Z",
    "body": "@eddyb \nThat sounds.. unsettling.\nIf `size_of<T>` will still report size of single `T` and not \"in-array\" `T`, then the first thing it will break is `std::Vec` (and who knows what else in external crates).\nOn the other hand if `size_of<T>` will report size of \"in-array\" `T`, then nothing bad will probably happen, just some pessimization. A new function `min_size_of` will probably be useful, e.g. for single allocations.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147118849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147121100",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-147121100",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 147121100,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzEyMTEwMA==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-10T19:54:28Z",
    "updated_at": "2015-10-10T19:54:28Z",
    "body": "I was thinking only about pointers + `.offset` vs addresses + size_of, so I missed the cases where the size of `[T; n]` is computed for runtime `n`.\nMaybe it's time for a grep across crates.io, to find all the fragile uses.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147121100/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147122234",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-147122234",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 147122234,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzEyMjIzNA==",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-10T20:12:17Z",
    "updated_at": "2015-10-10T20:12:17Z",
    "body": "A quick grep across stdlib tells that whole libcollections and libarena is one big fragile use.\nIt's interesting, that most of `size_of` results either multiplied on something, either compared with 0, or used on something where calculation method doesn't matter, like on `u64` to count bits. Cases where the size of a single element is needed seem to be rare.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147122234/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147199447",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-147199447",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 147199447,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzE5OTQ0Nw==",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-11T14:08:31Z",
    "updated_at": "2015-10-11T14:08:31Z",
    "body": "BTW, what is the algorithm for the optimal structure packing? (Let's start with \"in-array\" packing, which is more important to optimize.)\nA quick googling doesn't give an answer.\nThe article above mentions sorting by alignment, but it's not always optimal, counterexample - \n4 fields `x(s:1,a:2), y(s:1,a:2), z(s:1,a:1), w(s:1,a:1)`, the optimal packing\n`|x|z|y|w|` is not sorted by alignment.\nThe algorithm should be a part of ABI (if it's ever stabilized), so it shouldn't involve solving NP hard problems or something :D\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147199447/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147215891",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-147215891",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 147215891,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzIxNTg5MQ==",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-11T16:24:47Z",
    "updated_at": "2015-10-11T16:24:47Z",
    "body": "NP hard problems are not really concerning if `n` is 4 :P\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147215891/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 2,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147369442",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-147369442",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 147369442,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzM2OTQ0Mg==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-12T11:26:23Z",
    "updated_at": "2015-10-12T11:27:15Z",
    "body": "> On the other hand if size_of<T> will report size of \"in-array\" T, then nothing bad will probably happen, just some pessimization. A new function `min_size_of` will probably be useful, e.g. for single allocations.\n\nThis is an interesting point.  The user-defined allocator API that I've been working on has some utility methods for doing stuff with sizes and alignment; I, like @eddyb, had assumed that we should make `size_of` method provided by that API not be required to return a value that is a multiple of the alignment (and instead there is a separate function to calculate the size of such padding).\n\nBut after seeing the discussion here, I am wondering if that is wise ... given the precedent that has been set by C, and the likelihood of widespread assumptions about the `size_of` API, maybe I should have `size_of` round up to multiple-of-alignment, and add a second method, `size_of_one`, that does not.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147369442/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147372432",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-147372432",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 147372432,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzM3MjQzMg==",
    "user": {
      "login": "ranma42",
      "id": 1506030,
      "node_id": "MDQ6VXNlcjE1MDYwMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1506030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ranma42",
      "html_url": "https://github.com/ranma42",
      "followers_url": "https://api.github.com/users/ranma42/followers",
      "following_url": "https://api.github.com/users/ranma42/following{/other_user}",
      "gists_url": "https://api.github.com/users/ranma42/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ranma42/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ranma42/subscriptions",
      "organizations_url": "https://api.github.com/users/ranma42/orgs",
      "repos_url": "https://api.github.com/users/ranma42/repos",
      "events_url": "https://api.github.com/users/ranma42/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ranma42/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-12T11:45:53Z",
    "updated_at": "2015-10-12T11:45:53Z",
    "body": "I am wary about having the same type T with different layout or size depending on the context where it is used (array vs single value, for example).\nI definitely expect some code to use `size_of` in order to create slices of values of a type and unsafely copy them. This would break if in-array and single element had different in-memory representation (example: if in-array is padded and is slice-copied to a non-padded single element, something else is getting overwritten by the padding) or if the type changed layout in different contexts.\n\nNonetheless AFAICT there should be no problem with rearranging the fields of a struct as long as the layout (padding included) is the same for all of the uses of the type.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147372432/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147382383",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-147382383",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 147382383,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzM4MjM4Mw==",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-12T12:29:14Z",
    "updated_at": "2015-10-12T13:05:00Z",
    "body": "@ranma42 \n\"Useful\" part of layout of `T` will have to be the same everywhere, because a reference `&T` doesn't know where it points to - in array or not, but it needs to know offsets of all fields. So, ~~the single instances will have to have in-array layout (because, again, it's more important to optimize) and~~ the only possible difference is presence or absence of the final padding.\nEdit: but treating a single element as slice (`[T]` with dynamic size, not [T; 1]) (http://doc.rust-lang.org/nightly/std/slice/fn.mut_ref_slice.html and friends) still can pose problems, it needs investigation.\nEdit2: The strikethrough line is wrong, if the structure is optimally packed without the final padding, then it's optimally packed with the final padding as well, the opposite is not true.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147382383/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162323074",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-162323074",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 162323074,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MjMyMzA3NA==",
    "user": {
      "login": "Amanieu",
      "id": 278509,
      "node_id": "MDQ6VXNlcjI3ODUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amanieu",
      "html_url": "https://github.com/Amanieu",
      "followers_url": "https://api.github.com/users/Amanieu/followers",
      "following_url": "https://api.github.com/users/Amanieu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions",
      "organizations_url": "https://api.github.com/users/Amanieu/orgs",
      "repos_url": "https://api.github.com/users/Amanieu/repos",
      "events_url": "https://api.github.com/users/Amanieu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amanieu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-06T15:15:31Z",
    "updated_at": "2015-12-06T15:15:31Z",
    "body": "Some [notes](https://github.com/apple/swift/blob/master/docs/ABI.rst#fragile-struct-and-tuple-layout) from the Swift ABI related to this.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162323074/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162323492",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-162323492",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 162323492,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MjMyMzQ5Mg==",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-06T15:24:50Z",
    "updated_at": "2015-12-06T15:24:50Z",
    "body": "@sfackler \n\n> NP hard problems are not really concerning if n is 4 :P\n\nStructures like [this](https://github.com/rust-lang/rust/issues/29540) have to conform to ABI as well.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162323492/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/208814731",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-208814731",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 208814731,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwODgxNDczMQ==",
    "user": {
      "login": "Amanieu",
      "id": 278509,
      "node_id": "MDQ6VXNlcjI3ODUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Amanieu",
      "html_url": "https://github.com/Amanieu",
      "followers_url": "https://api.github.com/users/Amanieu/followers",
      "following_url": "https://api.github.com/users/Amanieu/following{/other_user}",
      "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions",
      "organizations_url": "https://api.github.com/users/Amanieu/orgs",
      "repos_url": "https://api.github.com/users/Amanieu/repos",
      "events_url": "https://api.github.com/users/Amanieu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Amanieu/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-12T09:30:23Z",
    "updated_at": "2016-04-12T09:30:23Z",
    "body": "> The algorithm should be a part of ABI (if it's ever stabilized), so it shouldn't involve solving NP hard problems or something :D\n\nActually I don't think we need to make the struct packing algorithm part of the ABI. Instead we can just put the chosen struct layout in the metadata of the crate which defines the struct. The only downside is that two different structs with the same contents are not guaranteed to have the same layout.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/208814731/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/208816087",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-208816087",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 208816087,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwODgxNjA4Nw==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-12T09:35:04Z",
    "updated_at": "2016-04-12T09:35:04Z",
    "body": "@Amanieu At least in theory, layouts have to be deterministic, but can depend on the crate SVH (as a seed).\nIn practice, the items taken into consideration have to be part of the dependency subgraph of the type itself, for incremental recompilation.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/208816087/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/269017079",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-269017079",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 269017079,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTAxNzA3OQ==",
    "user": {
      "login": "ahicks92",
      "id": 6968705,
      "node_id": "MDQ6VXNlcjY5Njg3MDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6968705?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahicks92",
      "html_url": "https://github.com/ahicks92",
      "followers_url": "https://api.github.com/users/ahicks92/followers",
      "following_url": "https://api.github.com/users/ahicks92/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahicks92/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahicks92/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahicks92/subscriptions",
      "organizations_url": "https://api.github.com/users/ahicks92/orgs",
      "repos_url": "https://api.github.com/users/ahicks92/repos",
      "events_url": "https://api.github.com/users/ahicks92/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahicks92/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-12-23T16:52:16Z",
    "updated_at": "2016-12-23T16:52:16Z",
    "body": "I think #37429 addresses this  for the most part, but note that it's being turned off by #38523.  There is a thread on it [here](https://internals.rust-lang.org/t/rolling-out-or-unrolling-struct-field-reorderings/4485/7).\r\n\r\nThere is more exotic stuff being discussed here, in particular the Swift ABI.  I think it might be worth doing someday, but I doubt it will help much.  Especially as compared to the amount of work required to make it happen given that it wasn't planned for from the start, and the potential pessimization of using packed structs for everything in LLVM.  That said, I thought field reordering would help tremendously and it didn't help tremendously, so perhaps I'm wrong about this too.\r\n\r\n@bstrie wants to know if they can close this; I'd leave it open for now.  The functionality is in and working, but it's not rolled out yet.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/269017079/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/302388928",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-302388928",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 302388928,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjM4ODkyOA==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-18T12:26:55Z",
    "updated_at": "2017-05-18T12:26:55Z",
    "body": "I think we turned this back on with optimization fuel; I'm uncertain whether there's any reason to keep this open. cc @camlorn @eddyb ",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/302388928/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/302391659",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-302391659",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 302391659,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjM5MTY1OQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-18T12:39:54Z",
    "updated_at": "2017-05-18T12:39:54Z",
    "body": "Yes, in #40377.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/302391659/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/304462868",
    "html_url": "https://github.com/rust-lang/rust/issues/28951#issuecomment-304462868",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28951",
    "id": 304462868,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDQ2Mjg2OA==",
    "user": {
      "login": "ahicks92",
      "id": 6968705,
      "node_id": "MDQ6VXNlcjY5Njg3MDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6968705?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahicks92",
      "html_url": "https://github.com/ahicks92",
      "followers_url": "https://api.github.com/users/ahicks92/followers",
      "following_url": "https://api.github.com/users/ahicks92/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahicks92/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahicks92/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahicks92/subscriptions",
      "organizations_url": "https://api.github.com/users/ahicks92/orgs",
      "repos_url": "https://api.github.com/users/ahicks92/repos",
      "events_url": "https://api.github.com/users/ahicks92/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahicks92/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-27T16:39:44Z",
    "updated_at": "2017-05-27T16:39:44Z",
    "body": "Yeah, someone can close this.\r\n\r\nWe can technically do better, but not without a major refactor on order with the one I already did, and not without losing performance elsewhere.  Since we already do better than most other languages (the only one I know of that does better is Swift), I think it's more than sufficient.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/304462868/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
