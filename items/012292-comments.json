[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35155850",
    "html_url": "https://github.com/rust-lang/rust/issues/12292#issuecomment-35155850",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12292",
    "id": 35155850,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTU1ODUw",
    "user": {
      "login": "mneumann",
      "id": 34112,
      "node_id": "MDQ6VXNlcjM0MTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/34112?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mneumann",
      "html_url": "https://github.com/mneumann",
      "followers_url": "https://api.github.com/users/mneumann/followers",
      "following_url": "https://api.github.com/users/mneumann/following{/other_user}",
      "gists_url": "https://api.github.com/users/mneumann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mneumann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mneumann/subscriptions",
      "organizations_url": "https://api.github.com/users/mneumann/orgs",
      "repos_url": "https://api.github.com/users/mneumann/repos",
      "events_url": "https://api.github.com/users/mneumann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mneumann/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-15T13:12:56Z",
    "updated_at": "2014-02-15T13:12:56Z",
    "body": "I am volunteering to provide a patch (as I am also working on the rust-msgpack and rust-toml libraries, which needs to be changed as well), if we can agree upon a <code>DecodeResult</code> type (is <code>&str</code> enough?). \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35155850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35155998",
    "html_url": "https://github.com/rust-lang/rust/issues/12292#issuecomment-35155998",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12292",
    "id": 35155998,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTU1OTk4",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-15T13:20:46Z",
    "updated_at": "2014-02-15T13:20:46Z",
    "body": "It seems like Encodable should do something similar if we do do this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35155998/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35156466",
    "html_url": "https://github.com/rust-lang/rust/issues/12292#issuecomment-35156466",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12292",
    "id": 35156466,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTU2NDY2",
    "user": {
      "login": "mneumann",
      "id": 34112,
      "node_id": "MDQ6VXNlcjM0MTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/34112?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mneumann",
      "html_url": "https://github.com/mneumann",
      "followers_url": "https://api.github.com/users/mneumann/followers",
      "following_url": "https://api.github.com/users/mneumann/following{/other_user}",
      "gists_url": "https://api.github.com/users/mneumann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mneumann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mneumann/subscriptions",
      "organizations_url": "https://api.github.com/users/mneumann/orgs",
      "repos_url": "https://api.github.com/users/mneumann/repos",
      "events_url": "https://api.github.com/users/mneumann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mneumann/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-15T13:43:56Z",
    "updated_at": "2014-02-15T13:43:56Z",
    "body": "Yes, so in case the underlying Encoder fails with an IoError, we can propagate it back. The big question is only, what will the type of EncodeResult/DecodeResult be? \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35156466/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35156503",
    "html_url": "https://github.com/rust-lang/rust/issues/12292#issuecomment-35156503",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12292",
    "id": 35156503,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTU2NTAz",
    "user": {
      "login": "mneumann",
      "id": 34112,
      "node_id": "MDQ6VXNlcjM0MTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/34112?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mneumann",
      "html_url": "https://github.com/mneumann",
      "followers_url": "https://api.github.com/users/mneumann/followers",
      "following_url": "https://api.github.com/users/mneumann/following{/other_user}",
      "gists_url": "https://api.github.com/users/mneumann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mneumann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mneumann/subscriptions",
      "organizations_url": "https://api.github.com/users/mneumann/orgs",
      "repos_url": "https://api.github.com/users/mneumann/repos",
      "events_url": "https://api.github.com/users/mneumann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mneumann/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-15T13:46:13Z",
    "updated_at": "2014-02-15T13:50:43Z",
    "body": "For performance reasons, I don't like to bloat up the return values of each <code>read_xxx</code> method very much. Especially as errors are very rare, so I'd prefer something like\n\n``` rust\npub enum DecodeError = ...\npub type DecodeResult<T> = Result<T, ~DecodeError>\n```\n\nwhich would only add one extra word (but of course incurrs an allocation in the error case).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35156503/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35157119",
    "html_url": "https://github.com/rust-lang/rust/issues/12292#issuecomment-35157119",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12292",
    "id": 35157119,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTU3MTE5",
    "user": {
      "login": "mneumann",
      "id": 34112,
      "node_id": "MDQ6VXNlcjM0MTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/34112?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mneumann",
      "html_url": "https://github.com/mneumann",
      "followers_url": "https://api.github.com/users/mneumann/followers",
      "following_url": "https://api.github.com/users/mneumann/following{/other_user}",
      "gists_url": "https://api.github.com/users/mneumann/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mneumann/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mneumann/subscriptions",
      "organizations_url": "https://api.github.com/users/mneumann/orgs",
      "repos_url": "https://api.github.com/users/mneumann/repos",
      "events_url": "https://api.github.com/users/mneumann/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mneumann/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-15T14:15:53Z",
    "updated_at": "2014-02-15T14:15:53Z",
    "body": "As the underlying error can be manifold (it can be an IoError or a protocol error), it would be better to just signal an error condition, and being able to retrieve the exact error condition (e.g. the IoError) from the Decoder or Encoder struct. Also the error heavily depends on the underlying Encoder/Decoder. For example a Decoder which is based on a MemReader would not need an IoError.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35157119/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37077472",
    "html_url": "https://github.com/rust-lang/rust/issues/12292#issuecomment-37077472",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12292",
    "id": 37077472,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDc3NDcy",
    "user": {
      "login": "wycats",
      "id": 4,
      "node_id": "MDQ6VXNlcjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wycats",
      "html_url": "https://github.com/wycats",
      "followers_url": "https://api.github.com/users/wycats/followers",
      "following_url": "https://api.github.com/users/wycats/following{/other_user}",
      "gists_url": "https://api.github.com/users/wycats/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wycats/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wycats/subscriptions",
      "organizations_url": "https://api.github.com/users/wycats/orgs",
      "repos_url": "https://api.github.com/users/wycats/repos",
      "events_url": "https://api.github.com/users/wycats/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wycats/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-07T23:00:39Z",
    "updated_at": "2014-03-07T23:01:38Z",
    "body": "I agree with this. I was implementing a Decoder and the only real way to propagate errors at the moment is to store the error information in the Decoder and move on. However, this means you're forced to continue parsing a source that you already know is invalid (or explicitly handle this in `read_struct_field`).\n\nIn my experience so far, IoError is actually not the predominant kind of error. Instead, a common problem is that the struct indicates that it wants a uint but the source gave you a string.\n\nFor example, if you had a struct like this: `struct Article { title: ~str, body: ~str }` and you were deserializing a JSON like: `{ \"title\": 1 }`, you would have two errors (missing a mandatory `body` field and incorrect type provided for `title`).\n\nThese kinds of errors need to be handled by virtually all decoders, and should be supported out of the box rather than requiring an error field in the struct plus extra work in the handlers.\n\nAlso, the current approach requires each of the handlers to still return a dummy value (`0` for `uint`, for example), even though there was **no actual value** in the source. This is a lot of overhead when building a Decoder that could be eliminated by allowing a `Result` to be returned.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37077472/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37299896",
    "html_url": "https://github.com/rust-lang/rust/issues/12292#issuecomment-37299896",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12292",
    "id": 37299896,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3Mjk5ODk2",
    "user": {
      "login": "arjantop",
      "id": 52403,
      "node_id": "MDQ6VXNlcjUyNDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/52403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arjantop",
      "html_url": "https://github.com/arjantop",
      "followers_url": "https://api.github.com/users/arjantop/followers",
      "following_url": "https://api.github.com/users/arjantop/following{/other_user}",
      "gists_url": "https://api.github.com/users/arjantop/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arjantop/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arjantop/subscriptions",
      "organizations_url": "https://api.github.com/users/arjantop/orgs",
      "repos_url": "https://api.github.com/users/arjantop/repos",
      "events_url": "https://api.github.com/users/arjantop/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arjantop/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-11T14:17:37Z",
    "updated_at": "2014-03-11T14:18:10Z",
    "body": "Every encoder/decoder will deal with errors differently so my suggestion is to change traits to this:\n\n```\ntrait Decoder<E> {\n    fn read_uint(&self) -> Result<uint, E>;\n}\n\ntrait Decodable<E, D: Decoder<E>> {\n    fn decode(d: &mut D) -> Result<Self, E>;\n}\n\nimpl<E, D: Decoder<E>> Decodable<E, D> for uint {\n    fn decode(d: &mut D) -> Result<uint, E> {\n        d.read_uint()\n    }\n}\n\ntrait Encoder<E> {\n    fn emit_uint(&self, v: uint) -> Result<(), E>;\n}\n\ntrait Encodable<E, S: Encoder<E>> {\n    fn encode(&self, s: &mut S) -> Result<(), E>;\n}\n\nimpl<E, S: Encoder<E>> Encodable<E, S> for uint {\n    fn encode(&self, s: &mut S) -> Result<(), E> {\n        s.emit_uint(*self)\n    }\n}\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37299896/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37347349",
    "html_url": "https://github.com/rust-lang/rust/issues/12292#issuecomment-37347349",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12292",
    "id": 37347349,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzQ3MzQ5",
    "user": {
      "login": "erickt",
      "id": 84711,
      "node_id": "MDQ6VXNlcjg0NzEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erickt",
      "html_url": "https://github.com/erickt",
      "followers_url": "https://api.github.com/users/erickt/followers",
      "following_url": "https://api.github.com/users/erickt/following{/other_user}",
      "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erickt/subscriptions",
      "organizations_url": "https://api.github.com/users/erickt/orgs",
      "repos_url": "https://api.github.com/users/erickt/repos",
      "events_url": "https://api.github.com/users/erickt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erickt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-11T20:43:58Z",
    "updated_at": "2014-03-11T20:43:58Z",
    "body": "I feel @arjantop's solution is the right one. We'll need some way of communicating malformed values. The excess typarams is a bit of a shame though. I long for the day associated types (#5033) gets implemented.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37347349/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37476369",
    "html_url": "https://github.com/rust-lang/rust/issues/12292#issuecomment-37476369",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12292",
    "id": 37476369,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDc2MzY5",
    "user": {
      "login": "arjantop",
      "id": 52403,
      "node_id": "MDQ6VXNlcjUyNDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/52403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arjantop",
      "html_url": "https://github.com/arjantop",
      "followers_url": "https://api.github.com/users/arjantop/followers",
      "following_url": "https://api.github.com/users/arjantop/following{/other_user}",
      "gists_url": "https://api.github.com/users/arjantop/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arjantop/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arjantop/subscriptions",
      "organizations_url": "https://api.github.com/users/arjantop/orgs",
      "repos_url": "https://api.github.com/users/arjantop/repos",
      "events_url": "https://api.github.com/users/arjantop/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arjantop/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-03-12T22:20:28Z",
    "updated_at": "2014-03-12T22:20:28Z",
    "body": "The other solution would be using IoResult but i'm not convinced it's the right type for this. I think custom types with apropriate error information are the best way. For decoding only EndOfFile, InvalidInput and OtherIoError are useful and any error information must be included in message string.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/37476369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
