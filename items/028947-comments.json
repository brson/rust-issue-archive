[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147222807",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-147222807",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 147222807,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzIyMjgwNw==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-11T17:19:55Z",
    "updated_at": "2015-10-11T17:19:55Z",
    "body": "I am able to reproduce this on my native linux system.  I have not yet tried in a VM yet. Its a pretty bad show-stopper for Linux work (at least if one wants to use `--enable-debug` in a usable manner).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147222807/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147223332",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-147223332",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 147223332,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzIyMzMzMg==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-11T17:29:33Z",
    "updated_at": "2015-10-11T17:29:33Z",
    "body": "JFYI, I started looking into this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147223332/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147371376",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-147371376",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 147371376,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzM3MTM3Ng==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-12T11:38:20Z",
    "updated_at": "2015-10-16T13:44:47Z",
    "body": "~~(this problem does not reproduce on Mac OS X, which may be fortunate or unfortunate, depending on one's POV...)~~\n\nUpdate: Now I _have_ reproduced it on OS X.  I am not sure where my earlier attempt to reproduce went wrong.  Anyway, this heightens my desire to get this fixed considerably...\n\ncc @nrc \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147371376/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147668501",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-147668501",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 147668501,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzY2ODUwMQ==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-13T10:01:16Z",
    "updated_at": "2015-10-13T10:01:16Z",
    "body": "@dotdash have you made much progress, e.g. have you made a reduced test case, or have insight into what's wrong?\n\nI am wondering in part because I am willing to spend time looking at this, but I do not want to waste or duplicate effort.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147668501/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147670351",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-147670351",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 147670351,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzY3MDM1MQ==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-13T10:08:26Z",
    "updated_at": "2015-10-13T10:08:26Z",
    "body": "Not much progress yet. For some reason, the `inlinedAt` chain for the\n`dbg.value` calls is missing. AFAICT so far, our debug info looks fine (I\nmight be missing something though), so I'm looking at the LLVM code to see\nhow inlining  handles debug info and how the conversion from `dbg.declare`\nto `dbg.value` works.\n\n2015-10-13 12:01 GMT+02:00 Felix S Klock II notifications@github.com:\n\n> @dotdash https://github.com/dotdash have you made much progress, e.g.\n> have you made a reduced test case, or have insight into what's wrong?\n> \n> I am wondering in part because I am willing to spend time looking at this,\n> but I do not want to waste or duplicate effort.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/rust-lang/rust/issues/28947#issuecomment-147668501.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147670351/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147743437",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-147743437",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 147743437,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0Nzc0MzQzNw==",
    "user": {
      "login": "sanxiyn",
      "id": 45249,
      "node_id": "MDQ6VXNlcjQ1MjQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sanxiyn",
      "html_url": "https://github.com/sanxiyn",
      "followers_url": "https://api.github.com/users/sanxiyn/followers",
      "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions",
      "organizations_url": "https://api.github.com/users/sanxiyn/orgs",
      "repos_url": "https://api.github.com/users/sanxiyn/repos",
      "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sanxiyn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-13T15:05:51Z",
    "updated_at": "2015-10-13T15:05:51Z",
    "body": "Something weird is going on. `-verify-each` causes the error to disappear.\n\n```\n$ rustc -g --emit llvm-bc src/libsyntax/lib.rs\n$ opt -O2 -disable-output syntax.bc\nLLVM ERROR: Broken function found, compilation aborted!\n$ opt -O2 -verify-each -disable-output syntax.bc\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147743437/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148125171",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148125171",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148125171,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODEyNTE3MQ==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-14T17:24:54Z",
    "updated_at": "2015-10-15T15:02:20Z",
    "body": "Reproduced on a hardened gentoo linux (here's all you need to know about the system: http://dpaste.com/1DQ0EFB.txt ) as follows:\n\n```\n$ ./configure --prefix=/home/zazdxscf/build/1nonpkgs/rust/usr/local --disable-rpath --enable-manage-submodules --disable-clang --enable-ccache --enable-dist-host-only --disable-valgrind --disable-helgrind --disable-valgrind-rpass --python=/usr/bin/python2 --enable-optimize --enable-optimize-cxx --enable-optimize-llvm --enable-debug --enable-debuginfo --enable-debug-assertions --enable-debuginfo-tests --enable-llvm-assertions --enable-debug-jemalloc --disable-local-rust\n...\n$ time ( time make -j1 -- all NO_REBUILD=1 TIME_PASSES=1 TIME_LLVM_PASSES=1 RUSTFLAGS=\"--verbose\" && time make check )\ncfg: version 1.5.0-dev (294ef5b15 2015-10-14)\ncfg: build triple x86_64-unknown-linux-gnu\ncfg: host triples x86_64-unknown-linux-gnu\ncfg: target triples x86_64-unknown-linux-gnu\ncfg: enabling debug assertions (CFG_ENABLE_DEBUG_ASSERTIONS)\ncfg: enabling debuginfo (CFG_ENABLE_DEBUGINFO)\ncfg: host for x86_64-unknown-linux-gnu is x86_64\ncfg: os for x86_64-unknown-linux-gnu is unknown-linux-gnu\ncfg: good valgrind for x86_64-unknown-linux-gnu is 1\ncfg: using CC=ccache gcc (CFG_CC)\ncfg: disabling valgrind run-pass tests\nrustc: x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/libsyntax\ntime: 0.381; rss: 58MB  parsing\ntime: 0.124; rss: 59MB  configuration 1\n...\n...\ntime: 25.515; rss: 929MB    translation\n  time: 9.382; rss: 631MB   llvm function passes\n  time: 202.128; rss: 738MB llvm module passes\n!dbg attachment points at wrong subprogram for function\n!156164 = !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !156148, file: !156148, line: 38, type: !42689, isLocal: true, isDefinition: true, scopeLine: 38, flags: DIFlagPrototyped, isOptimized: true, function: i64 (%closure.1236*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.69460E, templateParams: !1036, variables: !156165)\ni64 (%closure.1236*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.69460E\n  tail call void @llvm.dbg.value(metadata %\"ext::expand::IdentRenamer\"* %rename_fld.i.857, i64 0, metadata !156543, metadata !189756), !dbg !766304\n!766304 = !DILocation(line: 113, scope: !156537, inlinedAt: !766305)\n!766306 = distinct !DILexicalBlock(scope: !766307, file: !156148, line: 129, column: 56)\n!159806 = !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !156148, file: !156148, line: 129, type: !159807, isLocal: true, isDefinition: true, scopeLine: 129, flags: DIFlagPrototyped, isOptimized: true, templateParams: !1036, variables: !159809)\nLLVM ERROR: Broken function found, compilation aborted!\n/home/zazdxscf/build/1nonpkgs/rust/rust/mk/target.mk:164: recipe for target 'x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.syntax' failed\nmake: *** [x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.syntax] Error 1\n```\n\nrust commit tested: 294ef5b158601b09e2a3ca49af124c63a9cf9528\n\nIn trying to follow sanxiyn's comment above, changing the above RUSTFLAGS to:\n`RUSTFLAGS=\"--verbose -C llvm-args=-verify-each\"`\nfails after a while(I'm probably doing it wrong):\n\n```\n...\ntime: 0.820; rss: 327MB lint checking\ntime: 0.000; rss: 327MB resolving dependency formats\nrustc: Unknown command line argument '-verify-each'.  Try: 'rustc -help'\nrustc: Did you mean '-verify-scev'?\n/home/zazdxscf/build/1nonpkgs/rust/rust/mk/target.mk:164: recipe for target 'x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.syntax' failed\nmake: *** [x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.syntax] Error 1\n```\n\nNo idea where to stick that `-verify-each` at the moment, so that `make` would work with it. Any ideas?\n\n**EDIT1:** It actually went past it with `-verify-scev` I'm guessing due to llvm version that rust compilation uses, instead of my installed version(3.7.0) which does have the `-verify-each` \nBut the original reported issue still happens (with -verify-scev): !dbg attachment points at wrong subprogram for function\n\n**EDIT2:** I'm still getting the error that maybe I meant to use `-verify-scev` when trying with my own llvm and my own (local)rust, after a make clean and removal of directory `rust/x86_64-unknown-linux-gnu/` then a configure then make\n\n```\n$ make clean\n...\n$ rm -rf x86_64-unknown-linux-gnu\n...\n$ ./configure --prefix=/home/zazdxscf/build/1nonpkgs/rust/usr/local --disable-rpath --enable-manage-submodules --disable-clang --enable-ccache --enable-dist-host-only --disable-valgrind --disable-helgrind --disable-valgrind-rpass --python=/usr/bin/python2 --enable-optimize --enable-optimize-cxx --enable-optimize-llvm --enable-debug --enable-debuginfo --enable-debug-assertions --enable-debuginfo-tests --enable-llvm-assertions --enable-debug-jemalloc --disable-local-rust --enable-local-rust --local-rust-root=/usr --llvm-root=/usr\n...\n$ make -j1 -- all NO_REBUILD=1 TIME_PASSES=1 TIME_LLVM_PASSES=1 'RUSTFLAGS=--verbose -C llvm-args=-verify-each'\n...\ntime: 0.073; rss: 172MB stability checking\ntime: 0.000; rss: 172MB unused lib feature checking\nsrc/libcore/lib.rs:82:12: 82:29 warning: unused or unknown feature, #[warn(unused_features)] on by default\nsrc/libcore/lib.rs:82 #![feature(unwind_attributes)]\n                                 ^~~~~~~~~~~~~~~~~\nsrc/libcore/panicking.rs:65:9: 65:18 warning: unused attribute, #[warn(unused_attributes)] on by default\nsrc/libcore/panicking.rs:65         #[unwind]\n                                    ^~~~~~~~~\ntime: 1.496; rss: 172MB lint checking\ntime: 0.000; rss: 172MB resolving dependency formats\nrustc: Unknown command line argument '-verify-each'.  Try: 'rustc -help'\nrustc: Did you mean '-verify-scev'?\n/home/zazdxscf/build/1nonpkgs/rust/rust/mk/target.mk:164: recipe for target 'x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.core' failed\nmake: *** [x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.core] Error 1\n```\n\nDoes rustc maybe have a whitelisted llvm-args that's allowing to passthru ? Or how does it fail to use my llvm(3.7.0) which clearly does have that `opt`ion ?\n**EDIT3:** One more thing, I accidentally had `--disable-local-rust` with `--enable-local-rust` of which only the former took place but when I removed it:\n\n```\ntime: 0.006; rss: 49MB  gated macro checking\ntime: 0.000; rss: 49MB  crate injection\nsrc/libcore/lib.rs:1:1: 1:1 error: can't find crate for `std`\nsrc/libcore/lib.rs:1 // Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n                     ^\nerror: aborting due to previous error\n/home/zazdxscf/build/1nonpkgs/rust/rust/mk/target.mk:164: recipe for target 'x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.core' failed\nmake: *** [x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.core] Error 101\n```\n\nbut maybe I got the `--local-rust-root=\"/usr\"` wrong, I've no idea which is right since it fails the same with `/usr/local` . I'll stick with supplied rustc then.\n\n**EDIT4:** ok, the reason `-verify-each` fails is because it's passed to `llc` instead of to `opt` (commands) and for some reason llc doesn't have it but opt does.\n\n**EDIT5:** tested with git llvm (3.8.0) and the error still happens:\n\n```\n$ make -j1 -- all NO_REBUILD=1 TIME_PASSES=1 TIME_LLVM_PASSES=1 'RUSTFLAGS=--verbose -Z verbose -Z print-link-args -Z debug-llvm -Z          unstable-options -C llvm-args=\"-verify-debug-info -verify-dom-info -verify-loop-info -verify-regalloc -verify-region-info -verify-scev\"'\n...\nrustc: x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/libsyntax\n...\ntime: 25.511; rss: 928MB    translation\n  time: 9.280; rss: 631MB   llvm function passes\n  time: 200.468; rss: 740MB llvm module passes\n!dbg attachment points at wrong subprogram for function\n!156127 = !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !156111, file: !156111, line: 38, type: !42675, isLocal: true, isDefinition: true, scopeLine: 38, flags: DIFlagPrototyped, isOptimized: true, function: i64 (%closure.1236*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.69395E, templateParams: !1032, variables: !156128)\ni64 (%closure.1236*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.69395E\n  tail call void @llvm.dbg.value(metadata %\"ext::expand::IdentRenamer\"* %rename_fld.i.857, i64 0, metadata !156506, metadata !189686), !dbg !765837\n!765837 = !DILocation(line: 113, scope: !156500, inlinedAt: !765838)\n!765839 = distinct !DILexicalBlock(scope: !765840, file: !156111, line: 129, column: 56)\n!159769 = !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !156111, file: !156111, line: 129, type: !159770, isLocal: true, isDefinition: true, scopeLine: 129, flags: DIFlagPrototyped, isOptimized: true, templateParams: !1032, variables: !159772)\nLLVM ERROR: Broken function found, compilation aborted!\n/home/zazdxscf/build/1nonpkgs/rust/rust/mk/target.mk:164: recipe for target 'x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.syntax' failed\nmake: *** [x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.syntax] Error 1\n\nreal    16m51.405s\nuser    15m38.200s\nsys 0m49.577s\n```\n\nlatest rust commit tested 1ad1b7d947b389d71b5d150d2fe92a6311c21c28\nMaybe I'll get back to rust some other time.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148125171/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148508146",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148508146",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148508146,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODUwODE0Ng==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-15T20:15:14Z",
    "updated_at": "2015-10-15T20:15:14Z",
    "body": "triage: P-medium\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148508146/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148513113",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148513113",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148513113,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODUxMzExMw==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-15T20:36:55Z",
    "updated_at": "2015-10-15T20:37:01Z",
    "body": "I would really like to see a narrowed test case for this bug. I've tried to start working my way down from libsyntax but keep getting interrupted (or flummoxed -- my usual tools for this like `--unpretty everybody_loops` did not yield immediate results...)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148513113/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148518085",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148518085",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148518085,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODUxODA4NQ==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-15T20:52:44Z",
    "updated_at": "2015-10-15T20:52:44Z",
    "body": "I tried stripping most \"unrelated\" functions from the generated IR for libsyntax, but even that made the bug disappear at some point.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148518085/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148520685",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148520685",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148520685,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODUyMDY4NQ==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-15T21:03:29Z",
    "updated_at": "2015-10-15T21:03:29Z",
    "body": "(at some point we may have to ask ourselves if we are willing to revert the lowering PR, if only to allow us to finally set up gating bors via the buildbot with `--enable-optimize --enable-debug` ...)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148520685/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148704071",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148704071",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148704071,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODcwNDA3MQ==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-16T12:28:35Z",
    "updated_at": "2015-10-16T12:30:41Z",
    "body": "**tldr;** I don't know how helpful this is but, using `--disable-debuginfo` does not cause the issue.\n\nIn other words, this causes the issue `--disable-debug --enable-debuginfo --enable-optimize --llvm-root=/usr` (tested)\n\nLast tested commit beeaea4a70766f7cc78abdc6b5991f124f349ca5, with `--disable-debuginfo` which doesn't cause the issue and then by changing it to enable, as follows:\n\n``` bash\n$ ./configure --prefix=/home/zazdxscf/build/1nonpkgs/rust/usr/local --disable-rpath --enable-manage-submodules --disable-clang --enable-ccache --enable-dist-host-only --disable-valgrind --disable-helgrind --disable-valgrind-rpass --python=/usr/bin/python2 --enable-optimize --enable-optimize-cxx --enable-optimize-llvm --enable-debug --disable-debuginfo --enable-debug-assertions --enable-debuginfo-tests --enable-llvm-assertions --enable-debug-jemalloc --disable-llvm-version-check --disable-local-rust --llvm-root=/usr\n...\n$ make -j1 -- all NO_REBUILD=1 TIME_PASSES=1 TIME_LLVM_PASSES=1 'RUSTFLAGS=--verbose -Z verbose -Z print-link-args -Z debug-llvm '\n...\ntime: 20.675; rss: 703MB    translation\n  time: 7.623; rss: 402MB   llvm function passes\n  time: 154.266; rss: 482MB llvm module passes\n  time: 61.107; rss: 516MB  codegen passes\n  time: 0.007; rss: 482MB   codegen passes\n//so it passed with --disable-debuginfo\n//next: changed --disable-debuginfo into --enable-debuginfo to make it fail\n...\n$ make clean\n...\n$ ./configure --prefix=/home/zazdxscf/build/1nonpkgs/rust/usr/local --disable-rpath --enable-manage-submodules --disable-clang --enable-ccache --enable-dist-host-only --disable-valgrind --disable-helgrind --disable-valgrind-rpass --python=/usr/bin/python2 --enable-optimize --enable-optimize-cxx --enable-optimize-llvm --enable-debug --enable-debuginfo --enable-debug-assertions --enable-debuginfo-tests --enable-llvm-assertions --enable-debug-jemalloc --disable-llvm-version-check --disable-local-rust --llvm-root=/usr\n...\n$ time make -j1 -- all NO_REBUILD=1 TIME_PASSES=1 TIME_LLVM_PASSES=1 'RUSTFLAGS=--verbose -Z verbose -Z print-link-args -Z debug-llvm '\n...\nrustc: x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/libsyntax\ntime: 0.391; rss: 58MB  parsing\ntime: 0.127; rss: 59MB  configuration 1\ntime: 0.000; rss: 59MB  recursion limit\ntime: 0.009; rss: 59MB  gated macro checking\ntime: 0.000; rss: 59MB  crate injection\ntime: 0.019; rss: 61MB  macro loading\ntime: 0.000; rss: 61MB  plugin loading\ntime: 0.000; rss: 61MB  plugin registration\ntime: 1.831; rss: 94MB  expansion\ntime: 0.036; rss: 94MB  complete gated feature checking 1\ntime: 0.322; rss: 94MB  configuration 2\ntime: 0.166; rss: 94MB  maybe building test harness\ntime: 0.154; rss: 94MB  prelude injection\ntime: 0.021; rss: 94MB  checking that all macro invocations are gone\ntime: 0.037; rss: 94MB  complete gated feature checking 2\ntime: 0.196; rss: 103MB assigning node ids and indexing ast\ntime: 0.024; rss: 103MB external crate/lib resolution\ntime: 0.044; rss: 103MB language item collection\ntime: 0.696; rss: 148MB resolution\ntime: 0.033; rss: 143MB lifetime resolution\ntime: 0.000; rss: 143MB looking for entry point\ntime: 0.021; rss: 143MB looking for plugin registrar\ntime: 0.263; rss: 158MB region resolution\ntime: 0.022; rss: 158MB loop checking\ntime: 0.024; rss: 158MB static item recursion checking\ntime: 0.151; rss: 161MB type collecting\ntime: 0.044; rss: 161MB variance inference\ntime: 0.455; rss: 202MB coherence checking\ntime: 23.707; rss: 308MB    type checking\ntime: 4.946; rss: 319MB const checking\ntime: 0.198; rss: 320MB privacy checking\ntime: 0.005; rss: 320MB stability index\ntime: 0.067; rss: 320MB intrinsic checking\ntime: 0.051; rss: 320MB effect checking\ntime: 1.123; rss: 320MB match checking\ntime: 0.176; rss: 327MB liveness checking\ntime: 9.925; rss: 327MB borrow checking\ntime: 5.309; rss: 327MB rvalue checking\ntime: 0.064; rss: 327MB reachability checking\ntime: 0.152; rss: 327MB death checking\ntime: 0.178; rss: 327MB stability checking\ntime: 0.000; rss: 327MB unused lib feature checking\ntime: 0.801; rss: 327MB lint checking\ntime: 0.000; rss: 327MB resolving dependency formats\ntime: 25.456; rss: 928MB    translation\n  time: 9.374; rss: 631MB   llvm function passes\n  time: 201.226; rss: 740MB llvm module passes\n!dbg attachment points at wrong subprogram for function\n!156127 = !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !156111, file: !156111, line: 38, type: !42675, isLocal: true, isDefinition: true, scopeLine: 38, flags: DIFlagPrototyped, isOptimized: true, function: i64 (%closure.1236*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.69395E, templateParams: !1032, variables: !156128)\ni64 (%closure.1236*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.69395E\n  tail call void @llvm.dbg.value(metadata %\"ext::expand::IdentRenamer\"* %rename_fld.i.857, i64 0, metadata !156506, metadata !189686), !dbg !765837\n!765837 = !DILocation(line: 113, scope: !156500, inlinedAt: !765838)\n!765839 = distinct !DILexicalBlock(scope: !765840, file: !156111, line: 129, column: 56)\n!159769 = !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !156111, file: !156111, line: 129, type: !159770, isLocal: true, isDefinition: true, scopeLine: 129, flags: DIFlagPrototyped, isOptimized: true, templateParams: !1032, variables: !159772)\nLLVM ERROR: Broken function found, compilation aborted!\n/home/zazdxscf/build/1nonpkgs/rust/rust/mk/target.mk:164: recipe for target 'x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.syntax' failed\nmake: *** [x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.syntax] Error 1\n\nreal    9m11.276s\nuser    8m21.940s\nsys 0m40.597s\n```\n\nSo, replacing `--disable-debuginfo` with `--enable-debuginfo` in the above, causes the issue. Btw, `--enable-debug` implies `--enable-debuginfo` unless `--disable-debuginfo` is specified.\n\nIf it matters,\n$ llc --version\nLLVM (http://llvm.org/):\n  LLVM version 3.8.0svn\n  Optimized build.\n  Default target: x86_64-pc-linux-gnu\n  Host CPU: (unknown)\n\n  Registered Targets:\n    amdgcn - AMD GCN GPUs\n    cpp    - C++ backend\n    r600   - AMD GPUs HD2XXX-HD6XXX\n    x86    - 32-bit X86: Pentium-Pro and above\n    x86-64 - 64-bit X86: EM64T and AMD64\n\nNow that I think about it, it's actually in the issue's title `-g` is the `--enable-debuginfo` ... also in sanxiyn's comment, which makes me want to test this:\n\n``` bash\n$ time x86_64-unknown-linux-gnu/stage0/bin/rustc -g --emit llvm-bc src/libsyntax/lib.rs\nreal    1m23.926s\nuser    1m20.543s\nsys 0m3.040s\n\n$ time opt -O2 -disable-output syntax.bc\nreal    4m24.718s\nuser    4m23.393s\nsys 0m0.653s\n//oh wait, what? this worked this time?! WHAT? :) without -verify-each and with --enable-debuginfo that was left from above.\n//I don't get it; is it my 3.8.0 llc ? I don't remember if I used this llc version to test this\n...\n```\n\nGoing to try using llvm that comes with rust next.\n\n<del>Btw, compiling the llvm that comes with rust (when I don't specify `--llvm-root=/usr`  to configure) doesn't use ccache even though I've `--enable-ccache` set.</del>\n\n**EDIT1:** Actually I was wrong, it DOES USE CCACHE! (I was just looking in the wrong ccache folder! with ccache -s)\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148704071/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148705345",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148705345",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148705345,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODcwNTM0NQ==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-16T12:36:20Z",
    "updated_at": "2015-10-16T12:36:20Z",
    "body": "Note that rustc generates different IR even pre-optimization when using `-O`. For example, lifetime intrinsics aren't used (and thus don't show up in the IR/bitcode) if `-O` isn't used.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148705345/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148719732",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148719732",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148719732,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODcxOTczMg==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-16T13:42:13Z",
    "updated_at": "2015-10-16T13:42:13Z",
    "body": "@sanxiyn `-verify-each` only inserts the verifier after each pass given on the command line, not after those inserted by `-O2`. It also removes the final verifier run. IOW with `opt -verify-each -O2`, the verifier doesn't run at all.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148719732/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148722407",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148722407",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148722407,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODcyMjQwNw==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-16T13:52:26Z",
    "updated_at": "2015-10-16T13:54:05Z",
    "body": "**tl;dr** it now fails with `-verify-each` too; and works without `-g` (as implied in the issue's title)\n\nVery nice, thanks dotdash for the help. While I basically have no idea what I'm doing, I can now reproduce (again) sanxiyn's comment by adding `-O` to rustc which adds 20meg to the output syntax.bc file (it's 45 meg now).\n\n``` bash\n$ time LD_LIBRARY_PATH='/home/zazdxscf/build/1nonpkgs/rust/rust/x86_64-unknown-linux-gnu/stage0/lib' x86_64-unknown-linux-gnu/stage0/bin/rustc -O -g --emit llvm-bc src/libsyntax/lib.rs\n\nreal    4m45.443s\nuser    4m41.333s\nsys 0m3.127s\n\n$ time opt -O2 -disable-output syntax.bc\n!dbg attachment points at wrong subprogram for function\n!154953 = distinct !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !154937, file: !154937, line: 38, type: !42660, isLocal: true, isDefinition: true, scopeLine: 38, flags: DIFlagPrototyped, isOptimized: true, function: i64 (%closure.1235*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.68893E, templateParams: !1032, variables: !154954)\ni64 (%closure.1235*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.68893E\n  tail call void @llvm.dbg.value(metadata %\"ext::expand::IdentRenamer\"* %rename_fld.i.763, i64 0, metadata !155332, metadata !188522), !dbg !882290\n!882290 = !DILocation(line: 113, scope: !155326, inlinedAt: !882291)\n!882292 = distinct !DILexicalBlock(scope: !882293, file: !154937, line: 129, column: 56)\n!158595 = distinct !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !154937, file: !154937, line: 129, type: !158596, isLocal: true, isDefinition: true, scopeLine: 129, flags: DIFlagPrototyped, isOptimized: true, templateParams: !1032, variables: !158598)\nopt: syntax.bc: error: input module is broken!\n\nreal    0m12.978s\nuser    0m12.263s\nsys 0m0.657s\n\n$ time opt -O2 -verify-each -disable-output syntax.bc\n!dbg attachment points at wrong subprogram for function\n!154953 = distinct !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !154937, file: !154937, line: 38, type: !42660, isLocal: true, isDefinition: true, scopeLine: 38, flags: DIFlagPrototyped, isOptimized: true, function: i64 (%closure.1235*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.68893E, templateParams: !1032, variables: !154954)\ni64 (%closure.1235*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.68893E\n  tail call void @llvm.dbg.value(metadata %\"ext::expand::IdentRenamer\"* %rename_fld.i.763, i64 0, metadata !155332, metadata !188522), !dbg !882290\n!882290 = !DILocation(line: 113, scope: !155326, inlinedAt: !882291)\n!882292 = distinct !DILexicalBlock(scope: !882293, file: !154937, line: 129, column: 56)\n!158595 = distinct !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !154937, file: !154937, line: 129, type: !158596, isLocal: true, isDefinition: true, scopeLine: 129, flags: DIFlagPrototyped, isOptimized: true, templateParams: !1032, variables: !158598)\nopt: syntax.bc: error: input module is broken!\n\nreal    0m12.416s\nuser    0m11.690s\nsys 0m0.673s\n//yup, fails with -verify-each too  (also tested by adding all other -verify* options, still no change)\n\n//even with the llvm that comes with rust, still fails with -verify-each unless I'm doing it wrong and it uses stuff from the svn llvm that I've installed\n$ time LD_LIBRARY_PATH='/home/zazdxscf/build/1nonpkgs/rust/rust/x86_64-unknown-linux-gnu/llvm/Release+Asserts/lib' x86_64-unknown-linux-gnu/llvm/Release+Asserts/bin/opt -O2 -verify-each -disable-output syntax.bc \n!dbg attachment points at wrong subprogram for function\n!154953 = !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !154937, file: !154937, line: 38, type: !42660, isLocal: true, isDefinition: true, scopeLine: 38, flags: DIFlagPrototyped, isOptimized: true, function: i64 (%closure.1235*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.68893E, templateParams: !1032, variables: !154954)\ni64 (%closure.1235*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.68893E\n  tail call void @llvm.dbg.value(metadata %\"ext::expand::IdentRenamer\"* %rename_fld.i.763, i64 0, metadata !155332, metadata !188522), !dbg !882290\n!882290 = !DILocation(line: 113, scope: !155326, inlinedAt: !882291)\n!882292 = distinct !DILexicalBlock(scope: !882293, file: !154937, line: 129, column: 56)\n!158595 = !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !154937, file: !154937, line: 129, type: !158596, isLocal: true, isDefinition: true, scopeLine: 129, flags: DIFlagPrototyped, isOptimized: true, templateParams: !1032, variables: !158598)\nx86_64-unknown-linux-gnu/llvm/Release+Asserts/bin/opt: syntax.bc: error: input module is broken!\n\nreal    0m14.177s\nuser    0m13.450s\nsys 0m0.630s\n\n$ opt --version\nLLVM (http://llvm.org/):\n  LLVM version 3.8.0svn\n  Optimized build.\n  Default target: x86_64-pc-linux-gnu\n  Host CPU: (unknown)\n\n//so what I wanted to try before was  not using -g  to see if the issue disappears and it does:\n$ time LD_LIBRARY_PATH='/home/zazdxscf/build/1nonpkgs/rust/rust/x86_64-unknown-linux-gnu/stage0/lib' x86_64-unknown-linux-gnu/stage0/bin/rustc -O --emit llvm-bc src/libsyntax/lib.rs\n\nreal    3m40.865s\nuser    3m37.717s\nsys 0m2.530s\n\n$ time opt -O2 -disable-output syntax.bc\nreal    1m29.530s\nuser    1m28.343s\nsys 0m0.910s\n\n```\n\n**EDIT:** dotdash's previous comment explains why -verify-each doesn't work anymore.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148722407/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148724712",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148724712",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148724712,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODcyNDcxMg==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-16T14:01:15Z",
    "updated_at": "2015-10-16T14:01:15Z",
    "body": "It fails with `-verify-each` in that case, because the output you got from rustc was already optimized, i.e. broken, and the verifier runs early (during function passes, IIRC). To get the unoptimized IR even from a build with `-O`, use `-Csave-temps`. That gives you a `syntax.0.no-opt.bc` file which has no optimizations applied at all.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148724712/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148731985",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148731985",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148731985,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODczMTk4NQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-16T14:27:09Z",
    "updated_at": "2015-10-16T14:27:09Z",
    "body": "Felix raised the quesiton with me on IRC if we consider this\nP-high. I'm not sure, but we may have misclassified -- `-O -g` is\npretty important! (Not that it makes that big a difference in practice\nI guess.) I guess what I don't know is how many programs are affected\nby this problem (and I guess cargo makes `-O -g` hard to do?)\n\nOn Thu, Oct 15, 2015 at 02:04:03PM -0700, Felix S Klock II wrote:\n\n> (at some point we may have to ask ourselves if we are willing to revert the lowering PR, if only to allow us to finally set up gating bors via the buildbot with `--enable-optimize --enable-debug` ...)\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/rust-lang/rust/issues/28947#issuecomment-148520685\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148731985/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148736101",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148736101",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148736101,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODczNjEwMQ==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-16T14:44:25Z",
    "updated_at": "2015-10-16T15:09:40Z",
    "body": "But doesn't that mean that in the case of NOT passing `-O`, with `-Csave-temps` I should be getting the same file contents for `syntax.0.no-opt.bc` and `syntax.bc` ? Or is there some kind of optimization going on nonetheless? There's about 900KB difference.\n\n``` bash\n$ time x86_64-unknown-linux-gnu/stage0/bin/rustc -g --emit llvm-bc -Csave-temps src/libsyntax/lib.rs\n\nreal    1m27.220s\nuser    1m22.487s\nsys 0m4.070s\n\n$ la *.bc\n-rw-r--r-- 1 zazdxscf zazdxscf 25854804 16.10.2015 16:20 syntax.0.bc\n-rw-r--r-- 1 zazdxscf zazdxscf 24978784 16.10.2015 16:20 syntax.0.no-opt.bc\n-rw-r--r-- 1 zazdxscf zazdxscf 25854804 16.10.2015 16:20 syntax.bc\n-rw-r--r-- 1 zazdxscf zazdxscf  3356724 16.10.2015 16:20 syntax.metadata.bc\n\n$ time opt -O2 -disable-output syntax.0.no-opt.bc\n\nreal    4m21.647s\nuser    4m20.130s\nsys 0m0.747s\n\n$ time opt -O2 -disable-output syntax.bc\n\nreal    4m22.069s\nuser    4m20.267s\nsys 0m1.027s\n\n```\n\nHere's with -O \n\n```\n$ time x86_64-unknown-linux-gnu/stage0/bin/rustc -O -g --emit llvm-bc -Csave-temps src/libsyntax/lib.rs\n\nreal    4m49.277s\nuser    4m43.473s\nsys 0m4.227s\n\n$ ls -la *.bc\n-rw-r--r-- 1 zazdxscf zazdxscf 45058444 Oct 16 16:33 syntax.0.bc\n-rw-r--r-- 1 zazdxscf zazdxscf 30834276 Oct 16 16:30 syntax.0.no-opt.bc\n-rw-r--r-- 1 zazdxscf zazdxscf 45058444 Oct 16 16:33 syntax.bc\n-rw-r--r-- 1 zazdxscf zazdxscf  3356804 Oct 16 16:33 syntax.metadata.bc\n\n$ time opt -O2 -disable-output syntax.bc\n!dbg attachment points at wrong subprogram for function\n!154953 = distinct !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !154937, file: !154937, line: 38, type: !42660, isLocal: true, isDefinition: true, scopeLine: 38, flags: DIFlagPrototyped, isOptimized: true, function: i64 (%closure.1235*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.68893E, templateParams: !1032, variables: !154954)\ni64 (%closure.1235*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.68893E\n  tail call void @llvm.dbg.value(metadata %\"ext::expand::IdentRenamer\"* %rename_fld.i.763, i64 0, metadata !155332, metadata !188522), !dbg !882290\n!882290 = !DILocation(line: 113, scope: !155326, inlinedAt: !882291)\n!882292 = distinct !DILexicalBlock(scope: !882293, file: !154937, line: 129, column: 56)\n!158595 = distinct !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !154937, file: !154937, line: 129, type: !158596, isLocal: true, isDefinition: true, scopeLine: 129, flags: DIFlagPrototyped, isOptimized: true, templateParams: !1032, variables: !158598)\nopt: syntax.bc: error: input module is broken!\n\nreal    0m13.200s\nuser    0m12.507s\nsys 0m0.627s\n//the above also fails with -verify-each also, for obvious reasons as mentioned above by dotdash\n\n$ time opt -O2 -disable-output syntax.0.no-opt.bc\n\nreal    5m15.866s\nuser    5m13.743s\nsys 0m0.807s\n//yup works without -verify-each\n```\n\nWhat's curious though, is that previously I was able to reproduce this: https://github.com/rust-lang/rust/issues/28947#issuecomment-147743437\nbut now not anymore(as seen above) and I've no idea why\nIOW, without passing `-O` to rustc, the issue would occur unless `-verify-each`.\nBut now it only occurs when rustc does it's optimize(`-O`) with output in `syntax.bc` file, but not when `opt` does its   on `syntax.0.no-opt.bc` (as seen above) [-verify-each not needed]\n\nIs there a way to see what command(s) rustc invokes to generate that `syntax.bc` from that `syntax.0.no-opt.bc` when `-O` is specified? Maybe we can see what args it passes to `opt` so that we can apply the same args when invoking `opt` manually... I don't know.\n\n**EDIT:** also note the almost 5 meg difference between the two `syntax.0.no-opt.bc` for when using and not using `-O` , or maybe I misunderstood dotdash's comment? `To get the unoptimized IR even from a build with -O, use -Csave-temps. That gives you a syntax.0.no-opt.bc file which has no optimizations applied at all.`\n**EDIT2:** What if, the issue would go away if only we had an up to date rustc (currently: $ x86_64-unknown-linux-gnu/stage0/bin/rustc --version\nrustc 1.4.0-dev (1af31d497 2015-08-11)\n) maybe due to some llvm fix(in case llvm stuff is embded in rustc; or a llvm update in case rustc needs llvm to compile stuff) or else I can't explain what I'm seeing here and why I cannot reproduce this anymore https://github.com/rust-lang/rust/issues/28947#issuecomment-147743437\nBut then again, I don't know much so... :)\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148736101/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148755316",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148755316",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148755316,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODc1NTMxNg==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-16T16:02:03Z",
    "updated_at": "2015-10-16T17:37:40Z",
    "body": "I can now confirm that https://github.com/rust-lang/rust/issues/28947#issuecomment-147743437 can only be reproduced with `opt` from version 3.7.0 but not from 3.8.0 (svn/git)\n\n```\n//3.8.0 svn\n$ time opt -O2 -disable-output syntax.bc\nreal    4m22.447s\nuser    4m20.920s\nsys 0m0.633s\n\n//3.7.0\n$ time opt -O2 -disable-output syntax.bc\n!dbg attachment points at wrong subprogram for function\n!65002 = !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !64994, file: !64994, line: 38, type: !29584, isLocal: true, isDefinition: true, scopeLine: 38, flags: DIFlagPrototyped, isOptimized: false, function: i64 (%closure.1236*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.69391E, templateParams: !1032, variables: !1032)\ni64 (%closure.1236*, %\"ast::Expr\"*)* @_ZN3ext6expand11expand_expr13closure.69391E\n  tail call void @llvm.dbg.value(metadata %\"ext::expand::IdentRenamer\"* %rename_fld.i.686, i64 0, metadata !715374, metadata !76148), !dbg !717137\n!717137 = !DILocation(line: 113, scope: !65097, inlinedAt: !717138)\n!717139 = distinct !DILexicalBlock(scope: !717140, file: !64994, line: 129, column: 56)\n!65968 = !DISubprogram(name: \"fnfn\", linkageName: \"fnfn\", scope: !64994, file: !64994, line: 129, type: !65969, isLocal: true, isDefinition: true, scopeLine: 129, flags: DIFlagPrototyped, isOptimized: false, templateParams: !1032, variables: !1032)\nLLVM ERROR: Broken function found, compilation aborted!\n\nreal    3m43.535s\nuser    3m42.020s\nsys 0m0.753s\n\n```\n\nTherefore, if rustc has llvm code embeded in it(I don't know this) then a recompile(with llvm 3.8.0 that is) should fix this, right? the stage 0 rustc that gets downloaded I mean (which currently was this: rustc 1.4.0-dev (1af31d4 2015-08-11) )\n\nSo, the issue should be gone with a rustc that <del>uses</del> is compiled with llvm 3.8.0 or whicever commit in llvm fixed this.\n\n**EDIT:** the 3.8.0 llvm was at commit: f657b6395ac5c9fa57a3d4c871d7f32c565b11fe\nthe 3.7.0  was, I don't know it's the one that comes with gentoo:\n$ opt --version\nLLVM (http://llvm.org/):\n  LLVM version 3.7.0\n  Optimized build.\n  Default target: x86_64-pc-linux-gnu\n  Host CPU: (unknown)\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148755316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148766388",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148766388",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148766388,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODc2NjM4OA==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-16T16:51:01Z",
    "updated_at": "2015-10-17T10:10:41Z",
    "body": "I too am affected.\n\nEDIT: \n\n> at some point we may have to ask ourselves if we are willing to revert the lowering PR\n\nThis is not an option, really, because it would delay landing `<-` indefinitely.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148766388/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148789948",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148789948",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148789948,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODc4OTk0OA==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-16T18:16:31Z",
    "updated_at": "2015-10-16T18:28:05Z",
    "body": "In my attempt to compile myself a rustc for stage0 to use it to recompile rust with `--enable-debuginfo` I'm failing because of this llvm commit https://github.com/llvm-mirror/llvm/commit/6f565c0e974e7b420697eba15c16095813ae3d67\n**EDIT2:** also this commit: https://github.com/llvm-mirror/llvm/commit/aa50fa7c2f6a22d97a11336d7281377dcfcafc9d\n\nMore exactly, when compiling rust with `--disable-debuginfo`, the error is :\n\n``` bash\n$ ./configure --prefix=/home/zazdxscf/build/1nonpkgs/rust/usr/local --disable-rpath --enable-manage-submodules --disable-clang --enable-ccache --enable-dist-host-only --disable-valgrind --disable-helgrind --disable-valgrind-rpass --python=/usr/bin/python2 --enable-optimize --enable-optimize-cxx --enable-optimize-llvm --enable-debug --disable-debuginfo --enable-debug-assertions --enable-debuginfo-tests --enable-llvm-assertions --enable-debug-jemalloc --disable-local-rust --disable-llvm-version-check --llvm-root=/usr\n...\n//this is a rerun after the error happened already:\n$ make -j1 -- all NO_REBUILD=1 TIME_PASSES=1 TIME_LLVM_PASSES=1 'RUSTFLAGS=--verbose -Z verbose -Z print-link-args'\ncfg: version 1.5.0-dev (24228fee1 2015-10-16)\ncfg: build triple x86_64-unknown-linux-gnu\ncfg: host triples x86_64-unknown-linux-gnu\ncfg: target triples x86_64-unknown-linux-gnu\ncfg: enabling debug assertions (CFG_ENABLE_DEBUG_ASSERTIONS)\ncfg: host for x86_64-unknown-linux-gnu is x86_64\ncfg: os for x86_64-unknown-linux-gnu is unknown-linux-gnu\ncfg: good valgrind for x86_64-unknown-linux-gnu is 1\ncfg: using CC=ccache gcc (CFG_CC)\ncfg: disabling valgrind run-pass tests\ncompile: x86_64-unknown-linux-gnu/rustllvm/RustWrapper.o\n/home/zazdxscf/build/1nonpkgs/rust/rust/src/rustllvm/RustWrapper.cpp: In function 'LLVMOpaqueMetadata* LLVMDIBuilderCreateSubroutineType(DIBuilderRef, LLVMMetadataRef, LLVMMetadataRef)':\n/home/zazdxscf/build/1nonpkgs/rust/rust/src/rustllvm/RustWrapper.cpp:325:56: error: no matching function for call to 'llvm::DIBuilder::createSubroutineType(llvm::DIFile*, llvm::DITypeRefArray)'\n         DITypeRefArray(unwrap<MDTuple>(ParameterTypes))));\n                                                        ^\nIn file included from /home/zazdxscf/build/1nonpkgs/rust/rust/src/rustllvm/rustllvm.h:56:0,\n                 from /home/zazdxscf/build/1nonpkgs/rust/rust/src/rustllvm/RustWrapper.cpp:11:\n/usr/include/llvm/IR/DIBuilder.h:382:23: note: candidate: llvm::DISubroutineType* llvm::DIBuilder::createSubroutineType(llvm::DITypeRefArray, unsigned int)\n     DISubroutineType *createSubroutineType(DITypeRefArray ParameterTypes,\n                       ^\n/usr/include/llvm/IR/DIBuilder.h:382:23: note:   no known conversion for argument 1 from 'llvm::DIFile*' to 'llvm::DITypeRefArray'\n/home/zazdxscf/build/1nonpkgs/rust/rust/src/rustllvm/RustWrapper.cpp: In function 'LLVMOpaqueMetadata* LLVMDIBuilderCreateVariable(DIBuilderRef, unsigned int, LLVMMetadataRef, const char*, LLVMMetadataRef, unsigned int, LLVMMetadataRef, bool, unsigned int, int64_t*, unsigned int, unsigned int)':\n/home/zazdxscf/build/1nonpkgs/rust/rust/src/rustllvm/RustWrapper.cpp:505:26: error: 'class llvm::DIBuilder' has no member named 'createLocalVariable'\n     return wrap(Builder->createLocalVariable(Tag,\n                          ^\n/home/zazdxscf/build/1nonpkgs/rust/rust/mk/rustllvm.mk:60: recipe for target 'x86_64-unknown-linux-gnu/rustllvm/RustWrapper.o' failed\nmake: *** [x86_64-unknown-linux-gnu/rustllvm/RustWrapper.o] Error 1\n\nreal    0m8.069s\nuser    0m6.697s\nsys 0m1.237s\n```\n\nShould I maybe try to find out which commit(s) on top of 3.7.0 actually fixes the originally reported issue? instead of trying to make rust compile for 3.8.0 (which I know has the issue fixed) [the issue I'm referring to, in case I'm not being clear, is  `LLVM ERROR: Broken function found, compilation aborted!`  as reported in first comment]\n\nHmm, apparently this: https://github.com/llvm-mirror/llvm/commit/9b380854cd58c7627401a7b5f03cb3a793e285f0\n**EDIT1:** probably not that, I only searched for the msg, there's also this https://github.com/llvm-mirror/llvm/commit/5db31461109dbf8e9a12a78e3128849461d1a2e2\nBut this one's mentioning something related at least:  https://github.com/llvm-mirror/llvm/commit/b683b297f60055c82d612b942fe4e4768662e279\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148789948/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148906313",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148906313",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148906313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODkwNjMxMw==",
    "user": {
      "login": "sanxiyn",
      "id": 45249,
      "node_id": "MDQ6VXNlcjQ1MjQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sanxiyn",
      "html_url": "https://github.com/sanxiyn",
      "followers_url": "https://api.github.com/users/sanxiyn/followers",
      "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions",
      "organizations_url": "https://api.github.com/users/sanxiyn/orgs",
      "repos_url": "https://api.github.com/users/sanxiyn/repos",
      "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sanxiyn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-17T10:40:46Z",
    "updated_at": "2015-10-17T10:40:46Z",
    "body": "Re @nikomatsakis \"how many programs are affected by this problem\", can we use Crater run to find out? (If so, I also hope this may provide a smaller test case.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148906313/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148920483",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148920483",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148920483,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODkyMDQ4Mw==",
    "user": {
      "login": "sanxiyn",
      "id": 45249,
      "node_id": "MDQ6VXNlcjQ1MjQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sanxiyn",
      "html_url": "https://github.com/sanxiyn",
      "followers_url": "https://api.github.com/users/sanxiyn/followers",
      "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions",
      "organizations_url": "https://api.github.com/users/sanxiyn/orgs",
      "repos_url": "https://api.github.com/users/sanxiyn/repos",
      "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sanxiyn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-17T14:44:53Z",
    "updated_at": "2015-10-17T14:44:53Z",
    "body": "Bisecting LLVM against `opt -O2 -disable-output syntax.bc` led to [LLVM r245588](http://llvm.org/viewvc/llvm-project?view=revision&revision=245588). Backporting the patch to Rust's fork of LLVM seems to fix the issue.\n\nI said \"seems\", because fixing `--enable-debug --enable-optimize` build itself requires snapshot. On the other hand, normal rustc built against fixed LLVM does successfully compile libsyntax with `-O -g`.\n\nWe also should nominate the patch for LLVM 3.7.1.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148920483/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148922129",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148922129",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148922129,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODkyMjEyOQ==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-17T15:07:15Z",
    "updated_at": "2015-10-17T15:07:15Z",
    "body": "Thanks so much sanxiyn for finding that commit! It would've taken me days to learn how to find it, not having the experience and know how.\n\nThe same commit in git is here: https://github.com/llvm-mirror/llvm/commit/0f8344c168e59002843f4b124f4146f783d31cd7\nappending `.patch` to the url gives the wget-able patch.\n\nLLVM people did say they cherry-picked commits for 3.7.0, so maybe they already did pick (or will easily do so) this commit for 3.7.1\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148922129/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148923671",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148923671",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148923671,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODkyMzY3MQ==",
    "user": {
      "login": "sanxiyn",
      "id": 45249,
      "node_id": "MDQ6VXNlcjQ1MjQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sanxiyn",
      "html_url": "https://github.com/sanxiyn",
      "followers_url": "https://api.github.com/users/sanxiyn/followers",
      "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions",
      "organizations_url": "https://api.github.com/users/sanxiyn/orgs",
      "repos_url": "https://api.github.com/users/sanxiyn/repos",
      "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sanxiyn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-17T15:20:42Z",
    "updated_at": "2015-10-17T15:20:42Z",
    "body": "The patch is not included in LLVM 3.7.0 release and is not included in release_37 branch, so it is not the case they already picked it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148923671/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148924925",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148924925",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148924925,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODkyNDkyNQ==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-17T15:28:54Z",
    "updated_at": "2015-10-17T17:54:21Z",
    "body": "For 3.7.1 I meant, but you're right it's not already picked (although some others are) https://github.com/llvm-mirror/llvm/commits/release_37\n\n**EDIT:** I've tried to locally backport that patch to the llvm submodule(the llvm that comes with rust) but don't really know how (keeps getting reset to HEAD, and when it doesn't it fails by not finding some 'utility' include file) so I recompiled my system llvm 3.7.0 with the patch, but something's still failing when compiling rust:\n\n```\n...\ncompile: x86_64-unknown-linux-gnu/rustllvm/RustWrapper.o\n/home/zazdxscf/build/1nonpkgs/rust/rust/src/rustllvm/RustWrapper.cpp: In function 'LLVMOpaqueValue* LLVMRustBuildLandingPad(LLVMBuilderRef, LLVMTypeRef, LLVMValueRef, unsigned int, const char*, LLVMValueRef)':\n/home/zazdxscf/build/1nonpkgs/rust/rust/src/rustllvm/RustWrapper.cpp:954:69: error: invalid conversion from 'LLVMValueRef {aka LLVMOpaqueValue*}' to 'unsigned int' [-fpermissive]\n     return LLVMBuildLandingPad(Builder, Ty, PersFn, NumClauses, Name);\n                                                                     ^\n/home/zazdxscf/build/1nonpkgs/rust/rust/src/rustllvm/RustWrapper.cpp:954:69: error: invalid conversion from 'unsigned int' to 'const char*' [-fpermissive]\n/home/zazdxscf/build/1nonpkgs/rust/rust/src/rustllvm/RustWrapper.cpp:954:69: error: too many arguments to function 'LLVMOpaqueValue* LLVMBuildLandingPad(LLVMBuilderRef, LLVMTypeRef, unsigned int, const char*)'\nIn file included from /usr/include/llvm/IR/Value.h:17:0,\n                 from /usr/include/llvm/IR/User.h:24,\n                 from /usr/include/llvm/IR/Instruction.h:22,\n                 from /usr/include/llvm/IR/BasicBlock.h:19,\n                 from /usr/include/llvm/IR/IRBuilder.h:21,\n                 from /home/zazdxscf/build/1nonpkgs/rust/rust/src/rustllvm/rustllvm.h:11,\n                 from /home/zazdxscf/build/1nonpkgs/rust/rust/src/rustllvm/RustWrapper.cpp:11:\n/usr/include/llvm-c/Core.h:2677:14: note: declared here\n LLVMValueRef LLVMBuildLandingPad(LLVMBuilderRef B, LLVMTypeRef Ty,\n              ^\n/home/zazdxscf/build/1nonpkgs/rust/rust/mk/rustllvm.mk:60: recipe for target 'x86_64-unknown-linux-gnu/rustllvm/RustWrapper.o' failed\nmake: *** [x86_64-unknown-linux-gnu/rustllvm/RustWrapper.o] Error 1\n```\n\nI guess I'll wait until rust's llvm gets that patch.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148924925/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148954335",
    "html_url": "https://github.com/rust-lang/rust/issues/28947#issuecomment-148954335",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28947",
    "id": 148954335,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODk1NDMzNQ==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-17T21:51:19Z",
    "updated_at": "2015-10-17T21:51:30Z",
    "body": "Thanks for identifying the commit that fixed this issue upstream. I'm going to cherry-pick that commit to our LLVM fork and create a PR to update to that and disable -g in stage0 until we have a new snapshot.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148954335/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
