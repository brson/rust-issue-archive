[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130766175",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-130766175",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 130766175,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMDc2NjE3NQ==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-13T17:16:57Z",
    "updated_at": "2015-08-13T17:16:57Z",
    "body": "At least [this](https://github.com/rust-lang/rfcs/pull/1228#discussion_r35830880) needs to be decided before this can become stable.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/130766175/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/146711893",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-146711893",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 146711893,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NjcxMTg5Mw==",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-08T23:04:12Z",
    "updated_at": "2015-10-08T23:08:43Z",
    "body": "I've adapted this issue from being explicitly focused on just the library aspects of placement new to encompassing both that and the compiler impl (since they're fairly intertwined). I've also been thinking about this a little recently.\n\nGeneral links:\n- RFC https://github.com/rust-lang/rfcs/pull/1228 changes the syntax from `in X { Y }` to `X <- Y`\n- https://github.com/rust-lang/rust/issues/22181\n\n### Trait proliferation\n\nWe currently have [`Place`](http://doc.rust-lang.org/nightly/std/ops/trait.Place.html),[`Placer`](http://doc.rust-lang.org/nightly/std/ops/trait.Placer.html) & [`InPlace`](http://doc.rust-lang.org/nightly/std/ops/trait.InPlace.html) and [`BoxPlace`](http://doc.rust-lang.org/nightly/std/ops/trait.BoxPlace.html) & [`Boxed`](http://doc.rust-lang.org/nightly/std/ops/trait.Boxed.html). The `Place` trait is trying to abstract out a commonality between `BoxPlace` and `InPlace`: the `pointer` method. The lang team discussed this and decided that this may be unnecessary abstraction, since its not obvious how important it is to share these details at the trait level (NB. one can still share the code itself if a type impls both `BoxPlace` and `InPlace` and since one can, say, call one `pointer(&mut self) -> *mut T` method from the other).\n\n### `Placer` blanket impl\n\nThe `Placer`:(`InPlace`+`Place`) relationship is very similar to the `IntoIterator`:`Iterator` one: The former is designed to convert into the later so that one can use `in` (respectively `for` & iterator adaptors/consumers) with things that aren't directly `InPlace`s (e.g. `in vec { elem }`/`vec <- elem`) or `Iterator` (e.g. `for _ in &[1, 2, 3]`). `IntoIterator` has a blanket impl\n\n``` rust\nimpl<I> IntoIterator for I where I: Iterator {\n     type Item = I::Item;\n     type IntoIter = I;\n     fn into_iter(self) -> I { self }\n}\n```\n\nwhich means that all `Iterator`s can be transparently used in places that expect `IntoIterator`, without the creator of the `Iterator` having to remember or write anything more.\n\nIt'd be interesting if a similar thing could happen with `Placer` and `InPlace`, i.e. have:\n\n``` rust\nimpl<Data, P> Placer<Data> for P where P: InPlace<Data> {\n    type Place = P;\n    fn make_place(self) -> P { self }\n}\n```\n\nHowever this hits a coherence error, https://github.com/rust-lang/rust/issues/28881.\n\n(Combined with merging `Place` and `InPlace`, this would mean creating many `Placer`s would only require implementing a single trait, `InPlace`, rather than the 3 it does today.)\n\n### Fallible placement\n\nHandling fallible placement allocations is a little idiosyncratic, but seems possible, by handling failure in `in X { Y }` (aka `X <- Y`) when creating `X` itself, not by having the whole expression return a `Result` to indicate problems.\n\nI find this a little unintuitive for both implementers and users. For implementers, one is basically forced to do the allocation immediately when creating the `Placer`, and then pass through the pointer (i.e. `Placer::make_place` and `Place::pointer` just return an already-created value), making the layers of traits seems a bit strange. For users, it feels more natural to have `X <- Y` return `Result<_, _>`, but only when `X` is something that can fail, which possibly requires HKTs to encode (and may not be worth it).\n\nThe broad thoughts was that this wasn't _that_ strange, and that it won't come up that often (i.e. heavily biased toward OS/embedded development), but that it's very nice that there is some possibility to write this.\n\nThis is a version of `Box` that supports placement `in` and allows allocation failures to be recovered from (people may be most interested in the `main`/`func` example at the start, and/or how the procotol is implemented after that; the details of `MyBox` itself at the end aren't so important):\n\n``` rust\n#![feature(placement_in_syntax, placement_new_protocol)]\n\nfn main() {\n    let x: Result<_, _> = MyBox::place().map(|p| in p { 1 }); // ....map(|p| p <- 1)\n    // with `try { ... ? ... }` this could also be:\n    // let x = try { in MyBox::place()? { 1 } }; // ... try { MyBoxPlace()? <- 1 };\n    println!(\"{}\", *x.unwrap());\n\n    println!(\"{}\", *func(2).unwrap());\n}\n\nfn func(val: i32) -> Result<MyBox<i32>, BadAlloc> {\n    let mut x = in try!(MyBox::place()) { val }; // ... try!(MyBox::place()) <- val\n    *x += 10;\n    Ok(x)\n}\n\n// implementation of the `in`  procotol:\n\npub struct MyBoxPlace<T> {\n    ptr: *mut T\n}\n#[derive(Debug)]\npub struct BadAlloc;\n\nimpl<T> MyBox<T> {\n    pub fn place() -> Result<MyBoxPlace<T>, BadAlloc> {\n        let p = unsafe {malloc(mem::size_of::<T>())};\n        if p.is_null() {\n            Err(BadAlloc)\n        } else {\n            Ok(MyBoxPlace { ptr: p as *mut T })\n        }\n    }\n}\nimpl<T> ops::Placer<T> for MyBoxPlace<T> {\n    type Place = Self;\n    fn make_place(self) -> Self { self }\n}\nimpl<T> ops::Place<T> for MyBoxPlace<T> {\n    fn pointer(&mut self) -> *mut T { self.ptr }\n}\n\nimpl<T> ops::InPlace<T> for MyBoxPlace<T> {\n    type Owner = MyBox<T>;\n    unsafe fn finalize(self) -> MyBox<T> {\n        let p = self.ptr as *const T;\n        mem::forget(self);\n        MyBox { ptr: p }   \n    }\n}\nimpl<T> Drop for MyBoxPlace<T> {\n    fn drop(&mut self) {\n        unsafe {\n            free(self.ptr as *mut u8);\n        }\n    }\n}\n\n\n// implementation of the pointer itself\n\nuse std::{mem, ops, ptr};\n\nextern {\n    fn malloc(x: usize) -> *mut u8;\n    fn free(p: *mut u8);\n}\n\n/// Custom `Box`\npub struct MyBox<T> {\n    ptr: *const T\n}\n\n// make `MyBox` behave like a pointer\nimpl<T> ops::Deref for MyBox<T> {\n    type Target = T;\n    fn deref(&self) -> &T {\n        unsafe {&*self.ptr}    \n    }\n}\nimpl<T> ops::DerefMut for MyBox<T> {\n    fn deref_mut(&mut self) -> &mut T {\n        unsafe {&mut *(self.ptr as *mut T)}\n    }\n}\n// etc.\n\nimpl<T> Drop for MyBox<T> {\n    fn drop(&mut self) {\n        unsafe {\n            drop(ptr::read(self.ptr));\n            free(self.ptr as *mut u8);\n        }\n    }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/146711893/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147002671",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-147002671",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 147002671,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzAwMjY3MQ==",
    "user": {
      "login": "briansmith",
      "id": 16816,
      "node_id": "MDQ6VXNlcjE2ODE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/16816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/briansmith",
      "html_url": "https://github.com/briansmith",
      "followers_url": "https://api.github.com/users/briansmith/followers",
      "following_url": "https://api.github.com/users/briansmith/following{/other_user}",
      "gists_url": "https://api.github.com/users/briansmith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/briansmith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/briansmith/subscriptions",
      "organizations_url": "https://api.github.com/users/briansmith/orgs",
      "repos_url": "https://api.github.com/users/briansmith/repos",
      "events_url": "https://api.github.com/users/briansmith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/briansmith/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-09T22:34:33Z",
    "updated_at": "2015-10-09T22:34:33Z",
    "body": "How would this handle this use case? This is trying to create a way to store any instance of a trait `T` in a way that they can be copied around, without knowing anything about the concrete type except that it implements the `T` trait and that the concrete type is small enough to fit in the buffer.\n\n```\nconst MAX_SIZE: usize = 128;\n\nstruct StaticBox<T> {\n  buffer: [u8; MAX_SIZE]\n}\n\nimpl StaticBox<T> {\n  fn as_ref(&self) -> &T {\n    // We know an instance of T has been allocated in self.buffer, but\n    // how do we get it out?\n    unimplemented!();\n  }\n}\n\ntrait T {\n  fn new() -> T;\n  fn do_something(&self);\n}\n\nstruct A { a: u8 }\nimpl T for A {\n  fn new() { A { a: 1 } }\n  fn do_something() { unimplemented!() }\n}\n\nstruct B { b: [u64; 8] }\nimpl T for B {\n  fn new() { B { b: [0; 8] } }\n  fn do_something() { unimplemented!() }\n}\n\nfn create_and_return_a_T() -> StaticBox<T> {\n  let x: StaticBox<T> = unimplemented!(); // initialize an instance of `A` inside |x|.\n  x\n}\n\nfn main() {\n  let a = create_and_return_a_T();\n  let b: &T = a.as_ref();\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147002671/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147071260",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-147071260",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 147071260,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzA3MTI2MA==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-10T10:16:09Z",
    "updated_at": "2015-10-10T10:16:09Z",
    "body": "@briansmith \n\nI imagine you would want an array of `u64` - for alignment - instead of an array of `u8`. Anyway, I don't think there is a safe way of doing this (do we have a placer impl for raw pointers?)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/147071260/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148022424",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-148022424",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 148022424,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODAyMjQyNA==",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-14T11:24:45Z",
    "updated_at": "2015-10-14T11:24:45Z",
    "body": "cc https://github.com/rust-lang/rfcs/issues/1286\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148022424/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148049870",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-148049870",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 148049870,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODA0OTg3MA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-14T13:31:49Z",
    "updated_at": "2015-10-14T13:31:49Z",
    "body": "FYI draft of FAQ here https://internals.rust-lang.org/t/placemet-nwbi-faq-new-box-in-left-arrow/2789\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148049870/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148062681",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-148062681",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 148062681,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODA2MjY4MQ==",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-14T14:13:00Z",
    "updated_at": "2015-10-14T14:13:00Z",
    "body": "> Q(9). Which stdlib datatypes currently support placement-in?\n> A. None, currently.  :smile:\n> We are still finalizing the protocol API and have not added Placer support to any of the standard library types.\n\nI still think it's important to have placement insertion for basic collections (`Vec` and `HashMap`) implemented, tested and benchmarked (!) before finalizing the protocol. Fewer chances to do something wrong this way.\nIn particular we need to make sure that performance doesn't regress on small types (~pointer sized) compared to non-placement insertion (by marking the new code for exceptional case as cold or something like that?).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148062681/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148071277",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-148071277",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 148071277,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODA3MTI3Nw==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-14T14:40:47Z",
    "updated_at": "2015-10-14T14:40:47Z",
    "body": "@petrochenkov I don't think I have ever suggested stabilizing the protocol before it has been implemented for all the collection types that we can think of.  :)  (Feel free to point out where I may have misled...)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148071277/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148071623",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-148071623",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 148071623,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0ODA3MTYyMw==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-14T14:42:00Z",
    "updated_at": "2015-10-14T14:42:00Z",
    "body": "@petrochenkov but I can see how the answer written there can be misinterpreted.\n\nI'll try to change that specific text; for the most part, I hope that discussion about the FAQ itself can be restricted to that internals thread.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/148071623/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150130876",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-150130876",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 150130876,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MDEzMDg3Ng==",
    "user": {
      "login": "comex",
      "id": 47517,
      "node_id": "MDQ6VXNlcjQ3NTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/comex",
      "html_url": "https://github.com/comex",
      "followers_url": "https://api.github.com/users/comex/followers",
      "following_url": "https://api.github.com/users/comex/following{/other_user}",
      "gists_url": "https://api.github.com/users/comex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/comex/subscriptions",
      "organizations_url": "https://api.github.com/users/comex/orgs",
      "repos_url": "https://api.github.com/users/comex/repos",
      "events_url": "https://api.github.com/users/comex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/comex/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-22T07:26:59Z",
    "updated_at": "2015-10-22T07:27:16Z",
    "body": "(I started writing the following as a comment on the FAQ thread on internals, before I saw it was partially addressed here, but I'll post it in full anyway...)\n\nSo why does the placer protocol need two types/traits?  As I understand it, a method like \"emplace_back\" would normally return basically a wrapper object with a reference to the container in question; Rust would then call `make_place()`, whose implementation would actually reserve space in the container, returning a `Place` which could then be `finalize()`d (or else dropped normally if the expression on the right of the `<-` panicked).  But why not cut out the middle operation and have `emplace_back()` itself do the allocation and return a `Place`, which `<-` would accept on the left instead of a `Placer`?\n\nOne drawback would be that global allocators would have to look like `heap() <- foo` rather than `HEAP <- foo`.  But the former arguably looks better anyway due to not being in all caps, and more importantly, this removes an important asymmetry when it comes to fallible allocators:\n\nFallible allocators (i.e. allocators that can fail without panicking) cannot implement `Placer` the expected way, where the `make_place` implementation is what does the actual grunt work of allocation, because of course there is no way to tell the compiler to stop before writing data in.  This could be worked around in the `Placer` protocol itself, e.g. by having `make_place` return a `Result<Self::Place, Self::Place::Owner>` (where if it returned `Err(owner)`, the `<-` expression would evaluate to `owner` without evaluating the right hand side), but that would be both complicated and really weird, since the syntax would have no indication that the right hand side could sometimes just not be evaluated.\n\nIn lieu of that, such allocators would have to allocate before returning a `Placer`, so the `Placer` would just be a wrapper around a `Place`.  e.g. `fn fallible_alloc<T>() -> Result<Placer<T>, ()>`, and then user code would typically look like `try!(fallible_alloc()) <- expr`, which is not bad at all and makes the control flow divergence more explicit.\n\nWhich is fine, but means that the ability to use constants as `Placers` which, as far as I can tell, is the only advantage of having a separate `Placer` trait, does not work for fallible allocators, creating the aforementioned asymmetry.  Since it's not a very big advantage and often results in unnecessary wrapper object juggling anyway, it seems to me more sensible to get rid of it. \n\n...this is the point where I stopped writing, and now I see that the question of allowing Placers to fail has been touched on above, and one additional advantage of having a separate Placer is mentioned - that you can have short forms like `vec <- elem` rather than needing an explicit emplace method (however named).  This is something, but I'm not convinced it's worth it personally, so I maintain the conclusion of the last paragraph.\n\n(Sidenote - even if Rust's standard library doesn't care to deal with allocation failure, when it comes to the language itself, Rust's use of explicit option types rather than null pointers should make safety in the presence of allocation failure considerably _easier_ than in C.  Just saying.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/150130876/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162011919",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-162011919",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 162011919,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MjAxMTkxOQ==",
    "user": {
      "login": "Stebalien",
      "id": 310393,
      "node_id": "MDQ6VXNlcjMxMDM5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Stebalien",
      "html_url": "https://github.com/Stebalien",
      "followers_url": "https://api.github.com/users/Stebalien/followers",
      "following_url": "https://api.github.com/users/Stebalien/following{/other_user}",
      "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions",
      "organizations_url": "https://api.github.com/users/Stebalien/orgs",
      "repos_url": "https://api.github.com/users/Stebalien/repos",
      "events_url": "https://api.github.com/users/Stebalien/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Stebalien/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-04T16:27:41Z",
    "updated_at": "2015-12-04T16:27:41Z",
    "body": "@huonw, are the following traits not sufficient to reduce trait proliferation?\n\n``` rust\ntrait Placer<Data: ?Sized> {\n    type Place: Place<Data>;\n    fn make_place(&mut self) -> Self::Place;\n}\n\nunsafe trait Place<Data: ?Sized> {\n    type Owner;\n    fn pointer(&mut self) -> *mut Data;\n    unsafe fn finalize(self) -> Self::Owner;\n}\n\ntrait Boxer<Data: ?Sized>: Sized {\n    type Place: Place<Data, Owner=Self>;\n    fn make_place() -> Self::Place;\n}\n\nimpl<T> Boxer<T> for Box<T> { /* ... */ }\n\nimpl<T> Place<T> for IntermediateBox<T> { /* ... */ }\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162011919/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/238391155",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-238391155",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 238391155,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzODM5MTE1NQ==",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-08-08T22:00:06Z",
    "updated_at": "2016-08-08T22:00:06Z",
    "body": "Wanted for WebRender.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/238391155/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/266271321",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-266271321",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 266271321,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NjI3MTMyMQ==",
    "user": {
      "login": "bstrie",
      "id": 865233,
      "node_id": "MDQ6VXNlcjg2NTIzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bstrie",
      "html_url": "https://github.com/bstrie",
      "followers_url": "https://api.github.com/users/bstrie/followers",
      "following_url": "https://api.github.com/users/bstrie/following{/other_user}",
      "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions",
      "organizations_url": "https://api.github.com/users/bstrie/orgs",
      "repos_url": "https://api.github.com/users/bstrie/repos",
      "events_url": "https://api.github.com/users/bstrie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bstrie/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-12-11T09:11:28Z",
    "updated_at": "2016-12-11T09:11:28Z",
    "body": "Should the stabilization of `box_syntax` or the design of placement new affect `box_patterns` (https://github.com/rust-lang/rust/issues/29641)? Wondering if that gate should be tracked in this issue as well.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/266271321/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/274515044",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-274515044",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 274515044,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NDUxNTA0NA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-01-23T15:17:19Z",
    "updated_at": "2017-01-23T15:17:19Z",
    "body": "Status update: https://internals.rust-lang.org/t/lang-team-minutes-feature-status-report-placement-in-and-box/4646",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/274515044/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/283532401",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-283532401",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 283532401,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MzUzMjQwMQ==",
    "user": {
      "login": "aidanhs",
      "id": 1050652,
      "node_id": "MDQ6VXNlcjEwNTA2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1050652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aidanhs",
      "html_url": "https://github.com/aidanhs",
      "followers_url": "https://api.github.com/users/aidanhs/followers",
      "following_url": "https://api.github.com/users/aidanhs/following{/other_user}",
      "gists_url": "https://api.github.com/users/aidanhs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aidanhs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aidanhs/subscriptions",
      "organizations_url": "https://api.github.com/users/aidanhs/orgs",
      "repos_url": "https://api.github.com/users/aidanhs/repos",
      "events_url": "https://api.github.com/users/aidanhs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aidanhs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-02T01:58:04Z",
    "updated_at": "2018-01-16T16:47:04Z",
    "body": "I'm a little unclear of the expected semantics for expressions for placement and when you can guarantee not touching the stack. The closest I've found to an explanation among the assorted RFCs/discussion is the draft in https://github.com/rust-lang/rfcs/pull/470, [section 2](https://github.com/pnkfelix/rfcs/blob/fsk-placement-box-rfc/text/0000-placement-box.md#section-2-semantics) which says \"Evaluate the `<value-expr>` and write the result directly into the backing storage.\" and the [FAQs](https://internals.rust-lang.org/t/placement-nwbi-faq-new-box-in-left-arrow/2789) similarly say \"evaluates VALUE into the previously allocated memory (that is, do not put it onto a temporary stack slot)\".\r\n\r\nThe above seems a bit vague and I'm having difficulty predicting what's going to work without blowing up the stack. I've put together a quiz of 4 simple examples, and you have to try and guess which will work in debug and which in release (ideally they'd [behave identically](https://github.com/rust-lang/rfcs/pull/1228#issuecomment-145356539) I think?). I'm on Linux, `rustc 1.17.0-nightly (be760566c 2017-02-28)`, ulimit stack limit 8MB):\r\n**(edit: most of these now work as of 2018-01-16, but you can make trivial tweaks to make them overflow the stack again)**\r\n```\r\n// printlns are to prevent optimisation\r\n#![feature(placement_in_syntax)]\r\n#![feature(collection_placement)]\r\nuse std::collections::LinkedList;\r\nfn main() {\r\n    // [T; 10*1024*1024]\r\n    let mut ll = LinkedList::new(); // EXAMPLE 1: T = u8\r\n    ll.back_place() <- [0u8; 10*1024*1024];\r\n    println!(\"{}\", ll.front().unwrap()[0]+1);\r\n    let mut ll = LinkedList::new(); // EXAMPLE 2: T = usize\r\n    ll.back_place() <- [0usize; 10*1024*1024];\r\n    println!(\"{}\", ll.front().unwrap()[0]+1);\r\n\r\n    // [[[[[T; 10]; 32]; 32]; 32]; 32] // 10*32^4 == 10*1024*1024\r\n    let mut ll = LinkedList::new(); // EXAMPLE 3: T = u8\r\n    ll.back_place() <- [[[[[0u8; 10]; 32]; 32]; 32]; 32];\r\n    println!(\"{}\", ll.front().unwrap()[0][0][0][0][0]+1);\r\n    let mut ll = LinkedList::new(); // EXAMPLE 4: T = usize\r\n    ll.back_place() <- [[[[[0usize; 10]; 32]; 32]; 32]; 32];\r\n    println!(\"{}\", ll.front().unwrap()[0][0][0][0][0]+1);\r\n}\r\n```\r\n\r\n<details><summary>Click to see answers</summary><p>\r\n\r\nNone of them work on debug mode, only 2 (`[usize; 10*1024*1024]`) works in release mode (yes, this contrasts to 1 (`[u8; 10*1024*1024]`) which is a smaller type yet fails).\r\n\r\n</p></details>\r\n\r\n-----\r\n\r\nI'd also like to understand more about how placement-in behaves with more complex value expressions, but given I can't even predict the behaviour given the most trivial constructor for a type, that may be looking ahead a little.\r\n\r\nIs there something I'm missing/doing wrong? Or perhaps this is a current known limitation of the (desugaring) implementation that will be fixed? If so, is there a todo I've missed (I can't see a relevant checkbox at the top of this issue)?\r\n\r\n(**edit**: removed `{}` to address comment below, makes no difference)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/283532401/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/283564163",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-283564163",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 283564163,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MzU2NDE2Mw==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-02T05:57:39Z",
    "updated_at": "2017-03-02T05:57:39Z",
    "body": "Putting the expression within a block ({}) moves its result, so rust has to\nhave where to move from and that ends up being the stack.\n\nOn Mar 2, 2017 3:58 AM, \"aidanhs\" <notifications@github.com> wrote:\n\n> I'm a little unclear of the expected semantics for expressions for\n> placement and when you can guarantee not touching the stack. The closest\n> I've found to an explanation among the assorted RFCs/discussion is the\n> draft in rust-lang/rfcs#470 <https://github.com/rust-lang/rfcs/pull/470>, section\n> 2\n> <https://github.com/pnkfelix/rfcs/blob/fsk-placement-box-rfc/text/0000-placement-box.md#section-2-semantics>\n> which says \"Evaluate the <value-expr> and write the result directly into\n> the backing storage.\" and the FAQs\n> <https://internals.rust-lang.org/t/placement-nwbi-faq-new-box-in-left-arrow/2789>\n> similarly say \"evaluates VALUE into the previously allocated memory (that\n> is, do not put it onto a temporary stack slot)\".\n>\n> The above seems a bit vague and I'm having difficulty predicting what's\n> going to work without blowing up the stack. I've put together a quiz of 4\n> simple examples, and you have to try and guess which will work in debug and\n> which in release (ideally they'd behave identically\n> <https://github.com/rust-lang/rfcs/pull/1228#issuecomment-145356539> I\n> think?). I'm on Linux, rustc 1.17.0-nightly (be760566c 2017-02-28),\n> ulimit stack limit 8MB):\n>\n> // printlns are to prevent optimisation\n> #![feature(placement_in_syntax)]\n> #![feature(collection_placement)]\n> use std::collections::LinkedList;\n> fn main() {\n>     // [T; 10*1024*1024]\n>     let mut ll = LinkedList::new(); // 1: T = u8\n>     ll.back_place() <- { [0u8; 10*1024*1024] };\n>     println!(\"{}\", ll.front().unwrap()[0]+1);\n>     let mut ll = LinkedList::new(); // 2: T = usize\n>     ll.back_place() <- { [0usize; 10*1024*1024] };\n>     println!(\"{}\", ll.front().unwrap()[0]+1);\n>\n>     // [[[[[T; 10]; 32]; 32]; 32]; 32] // 10*32^4 == 10*1024*1024\n>     let mut ll = LinkedList::new(); // 3: T = u8\n>     ll.back_place() <- { [[[[[0u8; 10]; 32]; 32]; 32]; 32] };\n>     println!(\"{}\", ll.front().unwrap()[0][0][0][0][0]+1);\n>     let mut ll = LinkedList::new(); // 4: T = usize\n>     ll.back_place() <- { [[[[[0usize; 10]; 32]; 32]; 32]; 32] };\n>     println!(\"{}\", ll.front().unwrap()[0][0][0][0][0]+1);\n> }\n>\n> Click to see answers\n>\n> None of them work on debug mode, only 2 ([usize; 10*1024*1024]) works in\n> release mode (yes, this contrasts to 1 ([u8; 10*1024*1024]) which is a\n> smaller type yet fails).\n>\n> ------------------------------\n>\n> I'd also like to understand more about how placement-in behaves with more\n> complex value expressions, but given I can't even predict the behaviour\n> given the most trivial constructor for a type, that may be looking ahead a\n> little.\n>\n> Is there something I'm missing/doing wrong? Or perhaps this is a current\n> known limitation of the (desugaring) implementation that will be fixed? If\n> so, is there a todo I've missed (I can't see a relevant checkbox at the top\n> of this issue)?\n>\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/rust-lang/rust/issues/27779#issuecomment-283532401>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AApc0onxXJfZQCinrEKxYNxRrnwj5Ihdks5rhiJQgaJpZM4Fqnws>\n> .\n>\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/283564163/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/283665001",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-283665001",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 283665001,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MzY2NTAwMQ==",
    "user": {
      "login": "aidanhs",
      "id": 1050652,
      "node_id": "MDQ6VXNlcjEwNTA2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1050652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aidanhs",
      "html_url": "https://github.com/aidanhs",
      "followers_url": "https://api.github.com/users/aidanhs/followers",
      "following_url": "https://api.github.com/users/aidanhs/following{/other_user}",
      "gists_url": "https://api.github.com/users/aidanhs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aidanhs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aidanhs/subscriptions",
      "organizations_url": "https://api.github.com/users/aidanhs/orgs",
      "repos_url": "https://api.github.com/users/aidanhs/repos",
      "events_url": "https://api.github.com/users/aidanhs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aidanhs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-02T14:19:12Z",
    "updated_at": "2017-03-02T14:19:12Z",
    "body": "Did you try it? Removing the `{}` seems to make no difference whatsoever.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/283665001/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285562402",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-285562402",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 285562402,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTU2MjQwMg==",
    "user": {
      "login": "aidanhs",
      "id": 1050652,
      "node_id": "MDQ6VXNlcjEwNTA2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1050652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aidanhs",
      "html_url": "https://github.com/aidanhs",
      "followers_url": "https://api.github.com/users/aidanhs/followers",
      "following_url": "https://api.github.com/users/aidanhs/following{/other_user}",
      "gists_url": "https://api.github.com/users/aidanhs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aidanhs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aidanhs/subscriptions",
      "organizations_url": "https://api.github.com/users/aidanhs/orgs",
      "repos_url": "https://api.github.com/users/aidanhs/repos",
      "events_url": "https://api.github.com/users/aidanhs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aidanhs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-10T03:20:24Z",
    "updated_at": "2017-03-10T03:20:54Z",
    "body": "Ah, I guess [this](https://github.com/rust-lang/rfcs/pull/809#issuecomment-73152108) explains why it didn't work above (though I'm not sure how it was ever going to work in debug mode if it relies on LLVM optimizing?):\r\n\r\n> regarding return-value-optimization: the intention is that the desugaring described in the RFC hopefully presents the code in a manner where LLVM can optimize it accordingly. If we observe that LLVM fails to optimize the code as desired, then we can instead switch from a macro-based implementation to more integrated support within the whole compiler pipeline; but that will hopefully be unnecessary.\r\n\r\nMy inability to use the placement new feature aside, I've been working on something that would benefit greatly from placement, but the current design seems subideal. Consider serde deserialization with a large `T` that no part of should touch the stack:\r\n```\r\nlinkedlist.back_place() <- bincode::deserialize_from(&mut reader, SizeLimit::Infinite);\r\n```\r\nEven if RVO was *guaranteed* for this function, serde recurses to gather the fields so you'd get temporaries on the stack anyway (unless the RVO depth was guaranteed to be effectively infinite!).\r\n\r\nWhen thinking about this I stumbled across [this comment](https://github.com/rust-lang/rfcs/pull/809#issuecomment-73550618) which suggests that a lack of familiarity with C++ placement (I have no familiarity) could inhibit understanding of the Rust design. I went and did some reading, but found the C++ implementation to map poorly onto typical Rust code.\r\n\r\nSpecifically, the approximate Rust equivalent to a C++ constructor has a `&mut self` receiver and you can delete+new fields in-place at your leisure. But Rust construction generally happens via return value rather than mutation, so this placement-new design creates a place (like C++), gets the pointer (like C++)...but then has trouble passing the pointer through for in-place initialisation of each field, so defers to compulsory RVO and says \"the result ends up here\". Wait, what happens to the fields that get constructed into temporaries as part of creating the result!? They too can be big!\r\n\r\nI think there's an opportunity here for Rust placement-new to be faster than C++, simply because C++ has to run the default constructor for object members before entering the constructor body (IIUC), but right now I'm looking at adapting serde to take `*mut T` and use an `offsetof` macro, i.e. unsafely emulating uninit/out pointers. If I imagine a world where uninit/out pointers are available, I think this RFC would look very different which gives me pause.\r\n\r\nThoughts/corrections gratefully received, particularly if they explain how one could guarantee in-place deserialize under the proposed model.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285562402/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/289559558",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-289559558",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 289559558,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTU1OTU1OA==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-27T19:29:00Z",
    "updated_at": "2017-03-27T19:29:07Z",
    "body": "A fairly extensive number of data structures now implement placement-in protocol (tracking here: https://github.com/rust-lang/rust/issues/30172)",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/289559558/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/332356191",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-332356191",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 332356191,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjM1NjE5MQ==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-09-26T22:36:42Z",
    "updated_at": "2017-09-26T22:36:42Z",
    "body": "I'm concerned that the following use of the placer traits lands too close to arbitrary memory writes in safe code [(playground link)](https://play.rust-lang.org/?gist=fb67c9138789da84d47db92258788920&version=nightly); in particular that the Placer trait returns a raw pointer and the desugaring trusts that pointer.\r\n\r\nI'm sorry if this has come up before, I can't find it exactly, at least not with the full context.\r\n\r\n(This comment was first posted in another issue, but this is the right place I think.)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/332356191/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/332408531",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-332408531",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 332408531,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjQwODUzMQ==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-09-27T04:53:56Z",
    "updated_at": "2017-09-27T04:53:56Z",
    "body": "IIRC raw pointer was chosen specifically because data behind the pointer\ncould be uninitialised. If we had #[repr(transparent)] there's an\nalternative option we could probably use: &mut MaybeUninit<T>.\n\nDo you have alternative ideas? Maybe more unsafety annotations?\n\nOn Sep 27, 2017 1:37 AM, \"bluss\" <notifications@github.com> wrote:\n\n> I'm concerned that the following use of the placer traits lands too close\n> to arbitrary memory writes in safe code (playground link)\n> <https://play.rust-lang.org/?gist=fb67c9138789da84d47db92258788920&version=nightly>;\n> in particular that the Placer trait returns a raw pointer and the\n> desugaring trusts that pointer.\n>\n> I'm sorry if this has come up before, I can't find it exactly, at least\n> not with the full context.\n>\n> (This comment was first posted in another issue, but this is the right\n> place I think.)\n>\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/rust-lang/rust/issues/27779#issuecomment-332356191>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AApc0pQX6NNf0da-K_oNw8CEkLyvcbXUks5smXyXgaJpZM4Fqnws>\n> .\n>\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/332408531/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345562883",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-345562883",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 345562883,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTU2Mjg4Mw==",
    "user": {
      "login": "Centril",
      "id": 855702,
      "node_id": "MDQ6VXNlcjg1NTcwMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Centril",
      "html_url": "https://github.com/Centril",
      "followers_url": "https://api.github.com/users/Centril/followers",
      "following_url": "https://api.github.com/users/Centril/following{/other_user}",
      "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Centril/subscriptions",
      "organizations_url": "https://api.github.com/users/Centril/orgs",
      "repos_url": "https://api.github.com/users/Centril/repos",
      "events_url": "https://api.github.com/users/Centril/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Centril/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-11-20T00:20:41Z",
    "updated_at": "2017-11-20T00:20:41Z",
    "body": "Would [this](https://play.rust-lang.org/?gist=1d1f1bbad40ab6f73026e9186fb62f80&version=stable) perhaps be useful here?\r\n\r\n```rust\r\npub struct MutOnlyRef<'a, T: 'a> { data: &'a mut T }\r\n\r\nimpl<'a, T> MutOnlyRef<'a, T> {\r\n    pub fn new(data: &'a mut T) -> Self { Self { data } }\r\n\r\n    pub fn set(self, src: T) -> &'a mut T {\r\n        unsafe { ptr::write(self.data, src); }\r\n        self.data\r\n    }\r\n}",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/345562883/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/354464938",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-354464938",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 354464938,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDQ2NDkzOA==",
    "user": {
      "login": "mikeyhew",
      "id": 6751033,
      "node_id": "MDQ6VXNlcjY3NTEwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6751033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeyhew",
      "html_url": "https://github.com/mikeyhew",
      "followers_url": "https://api.github.com/users/mikeyhew/followers",
      "following_url": "https://api.github.com/users/mikeyhew/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeyhew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeyhew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeyhew/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeyhew/orgs",
      "repos_url": "https://api.github.com/users/mikeyhew/repos",
      "events_url": "https://api.github.com/users/mikeyhew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeyhew/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-12-29T16:08:25Z",
    "updated_at": "2017-12-30T23:01:34Z",
    "body": "Although the `Place<Data>` trait allows `Data: ?Sized`, the current design of the trait prohibits actual use with DSTs. The problem is the `pointer` method:\r\n\r\n```rust\r\npub trait Place<Data> \r\nwhere\r\n    Data: ?Sized, \r\n{\r\n    fn pointer(&mut self) -> *mut Data;\r\n}\r\n```\r\n\r\nIf `Data` is a DST, there is no way to produce this `*mut Data` without the metadata from the pointer being copied from. This is because raw fat pointers must always have valid metadata. Additionally, the metadata is needed to ensure the returned pointer has the right size and alignment.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/354464938/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/354536433",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-354536433",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 354536433,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDUzNjQzMw==",
    "user": {
      "login": "Michael-F-Bryan",
      "id": 17380079,
      "node_id": "MDQ6VXNlcjE3MzgwMDc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/17380079?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Michael-F-Bryan",
      "html_url": "https://github.com/Michael-F-Bryan",
      "followers_url": "https://api.github.com/users/Michael-F-Bryan/followers",
      "following_url": "https://api.github.com/users/Michael-F-Bryan/following{/other_user}",
      "gists_url": "https://api.github.com/users/Michael-F-Bryan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Michael-F-Bryan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Michael-F-Bryan/subscriptions",
      "organizations_url": "https://api.github.com/users/Michael-F-Bryan/orgs",
      "repos_url": "https://api.github.com/users/Michael-F-Bryan/repos",
      "events_url": "https://api.github.com/users/Michael-F-Bryan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Michael-F-Bryan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-12-30T09:31:23Z",
    "updated_at": "2017-12-30T09:31:23Z",
    "body": "> I'm concerned that the following use of the placer traits lands too close to arbitrary memory writes in safe code (playground link); in particular that the Placer trait returns a raw pointer and the desugaring trusts that pointer.\r\n\r\n@bluss, I would have thought we'd make `Place` an `unsafe` trait so implementors know that other code is depending on them giving a pointer to valid (albeit possibly uninitialised) memory and it is their responsibility to uphold that constraint. This seems to be an unspoken assumption with the placement-in protocol.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/354536433/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/354542877",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-354542877",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 354542877,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDU0Mjg3Nw==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-12-30T12:09:04Z",
    "updated_at": "2017-12-30T12:09:23Z",
    "body": "@Michael-F-Bryan I agree, that should be the solution if no other is suggested. It has been explicitly decided _against_ with a good goal (Make placement new easy to use widely and implement in safe code by composition) **but** since that fails to meet the requirement of \"safe Rust is memory safe\", we must go back to that if no other solution is found.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/354542877/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/354708687",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-354708687",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 354708687,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDcwODY4Nw==",
    "user": {
      "login": "mikeyhew",
      "id": 6751033,
      "node_id": "MDQ6VXNlcjY3NTEwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6751033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeyhew",
      "html_url": "https://github.com/mikeyhew",
      "followers_url": "https://api.github.com/users/mikeyhew/followers",
      "following_url": "https://api.github.com/users/mikeyhew/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeyhew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeyhew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeyhew/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeyhew/orgs",
      "repos_url": "https://api.github.com/users/mikeyhew/repos",
      "events_url": "https://api.github.com/users/mikeyhew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeyhew/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-02T06:24:06Z",
    "updated_at": "2018-01-02T06:24:06Z",
    "body": ">If Data is a DST, there is no way to produce this *mut Data without the metadata from the pointer being copied from. This is because raw fat pointers must always have valid metadata. Additionally, the metadata is needed to ensure the returned pointer has the right size and alignment.\r\n\r\nA potential fix would be to add `size` and `align` parameters to `make_place`, and change the return type of `Place::pointer` to `*mut ()`. The compiler can then create a fat pointer using this as the data pointer.\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/354708687/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/357505406",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-357505406",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 357505406,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NzUwNTQwNg==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-14T11:35:43Z",
    "updated_at": "2018-01-14T11:35:43Z",
    "body": "PR to change the Placer trait: #47299",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/357505406/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358025344",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-358025344",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 358025344,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODAyNTM0NA==",
    "user": {
      "login": "aidanhs",
      "id": 1050652,
      "node_id": "MDQ6VXNlcjEwNTA2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1050652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aidanhs",
      "html_url": "https://github.com/aidanhs",
      "followers_url": "https://api.github.com/users/aidanhs/followers",
      "following_url": "https://api.github.com/users/aidanhs/following{/other_user}",
      "gists_url": "https://api.github.com/users/aidanhs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aidanhs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aidanhs/subscriptions",
      "organizations_url": "https://api.github.com/users/aidanhs/orgs",
      "repos_url": "https://api.github.com/users/aidanhs/repos",
      "events_url": "https://api.github.com/users/aidanhs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aidanhs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-16T16:45:36Z",
    "updated_at": "2018-01-17T00:11:42Z",
    "body": "I think it's worth starting a discussion about the future of this feature. This tracking issue has been open for about a year and a half and I'm not sure if there's a route to stabilisation when `linkedlist.back_place() <- [0u8; 10*1024*1024]` works in debug mode but `linkedlist.back_place() <- [[0u8; 10*1024*1024]]` does not.\r\n\r\nClearly everyone watching this issue would like a 'working' placement new but maybe we need a more concrete set of guarantees it's meant to fulfill/use cases to provide for before we can evaluate whether it's succeeded and is ready for stabilisation. For example, one criteria I would propose is that it is possible to do fully in-place deserialisation without needing to manufacturing pointers to struct fields from offsets.\r\n\r\nThe limitations of `PLACE <- EXPR` as I see them right now: a fair amount of work has gone into getting the construction of places correct but not so much has gone into making it ergonomic for `EXPR` to make use of the allocated space (I've previously commented that the RFC is a [bit vague](https://github.com/rust-lang/rust/issues/27779#issuecomment-283532401) about this). One interim solution is just stabilising the placer stuff and requiring users to use pointers to actually do anything in place until there's an ergonomic solution, but pointers are horrible to work with.\r\n\r\nI personally wouldn't object to taking this back to RFC to figure out how it will work for (say) serde and come up with a new solution. What does everyone else think about the state of placement today?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358025344/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358044363",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-358044363",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 358044363,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODA0NDM2Mw==",
    "user": {
      "login": "ketsuban",
      "id": 5253816,
      "node_id": "MDQ6VXNlcjUyNTM4MTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5253816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ketsuban",
      "html_url": "https://github.com/ketsuban",
      "followers_url": "https://api.github.com/users/ketsuban/followers",
      "following_url": "https://api.github.com/users/ketsuban/following{/other_user}",
      "gists_url": "https://api.github.com/users/ketsuban/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ketsuban/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ketsuban/subscriptions",
      "organizations_url": "https://api.github.com/users/ketsuban/orgs",
      "repos_url": "https://api.github.com/users/ketsuban/repos",
      "events_url": "https://api.github.com/users/ketsuban/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ketsuban/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-16T17:42:57Z",
    "updated_at": "2018-01-16T17:42:57Z",
    "body": "I'd like to know how many people subscribed to this issue only want to solve the \"this code causes a spurious stack overflow in debug mode because it tries to call `Box::new` with a giant array on the stack\" problem. Is it possible to stabilise the minimum necessary to get `let x = box 5;` working and heal this papercut, and let the people who are interested in more advanced use-cases discuss the rest? Or am I being naive due to lack of understanding?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358044363/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358135446",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-358135446",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 358135446,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODEzNTQ0Ng==",
    "user": {
      "login": "aidanhs",
      "id": 1050652,
      "node_id": "MDQ6VXNlcjEwNTA2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1050652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aidanhs",
      "html_url": "https://github.com/aidanhs",
      "followers_url": "https://api.github.com/users/aidanhs/followers",
      "following_url": "https://api.github.com/users/aidanhs/following{/other_user}",
      "gists_url": "https://api.github.com/users/aidanhs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aidanhs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aidanhs/subscriptions",
      "organizations_url": "https://api.github.com/users/aidanhs/orgs",
      "repos_url": "https://api.github.com/users/aidanhs/repos",
      "events_url": "https://api.github.com/users/aidanhs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aidanhs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-16T22:55:05Z",
    "updated_at": "2018-01-16T22:55:05Z",
    "body": "@Ketsuban unless we have a complete solution, we end up drawing the line somewhere arbitrary. We can make `box 0u8` work, but what about `box [0u8; 10]`, `box [[0u8; 10]]`, `box SomeStruct { field: [0u8; 10] }`, `box SomeStruct { field: makefield() }`, `box SomeStruct::new()` - which one should we stop at?\r\n\r\nThat said, if lots of people really do just want to box a huge array I wouldn't discard the idea of a partial stabilisation out of hand (personally I just turn vecs into boxed slices).\r\n\r\nFWIW I grepped crates.io for crates actually using this feature to see how many people would be broken if the feature was removed from nightly and went back to RFC:\r\n<details><summary>Click to see results</summary><p>\r\n\r\n```\r\n# At least one version of these crates enabled the feature (and possibly used it)\r\nallocators\r\ncore_collections\r\nhashmap_core\r\njenga\r\nlight_arena\r\nmbox\r\npeg\r\nprintpdf\r\nrayon-hash\r\nscoped_allocator\r\nseckey\r\nskew-heap\r\nwbuf\r\n\r\n# Just a fork of libcore\r\navr-libcore\r\n\r\n# Look like syntax related crates\r\nclippy_linst\r\ncpp_syn\r\neasy-plugin\r\nfutures_await_syn\r\nrfmt\r\nrsyntax\r\nrustfmt\r\nsyn\r\nsyntex_syntax\r\nunrest_tmp_syn\r\n```\r\n</p></details>\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358135446/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358226690",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-358226690",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 358226690,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODIyNjY5MA==",
    "user": {
      "login": "kennytm",
      "id": 103023,
      "node_id": "MDQ6VXNlcjEwMzAyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kennytm",
      "html_url": "https://github.com/kennytm",
      "followers_url": "https://api.github.com/users/kennytm/followers",
      "following_url": "https://api.github.com/users/kennytm/following{/other_user}",
      "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions",
      "organizations_url": "https://api.github.com/users/kennytm/orgs",
      "repos_url": "https://api.github.com/users/kennytm/repos",
      "events_url": "https://api.github.com/users/kennytm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kennytm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-17T08:02:03Z",
    "updated_at": "2018-01-17T08:03:43Z",
    "body": "I'm :-1: to stabilizing `Placer` and `BoxPlace` as-is since the current interface cannot support DST at all, as mentioned above in https://github.com/rust-lang/rust/issues/27779#issuecomment-354464938. The only way to get a DST via `box x` currently is via unsizing or converting from other types like `Vec`. This closes the potential extension of allowing `box [x; dyn n]`.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/358226690/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/359077506",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-359077506",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 359077506,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTA3NzUwNg==",
    "user": {
      "login": "mikeyhew",
      "id": 6751033,
      "node_id": "MDQ6VXNlcjY3NTEwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6751033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeyhew",
      "html_url": "https://github.com/mikeyhew",
      "followers_url": "https://api.github.com/users/mikeyhew/followers",
      "following_url": "https://api.github.com/users/mikeyhew/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeyhew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeyhew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeyhew/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeyhew/orgs",
      "repos_url": "https://api.github.com/users/mikeyhew/repos",
      "events_url": "https://api.github.com/users/mikeyhew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeyhew/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-19T20:16:27Z",
    "updated_at": "2018-01-19T20:16:27Z",
    "body": "@kennytm `box [x; dyn n]` definitely looks doable, but I'm curious if you think the same is true for trait objects. For example, how would the following work?\r\n\r\n```rust\r\nlet rc = Rc::new(5) as Rc<Clone>;\r\nlet bx: Box<Clone> = box (*rc).clone();\r\n```\r\n\r\nHere, `BoxPlace::make_place()` needs to know the size and alignment of the `Clone` trait object, which it can get from the vtable of the trait object returned from the call to `clone`, but `clone` can't return until it has an `IntermediateBox` to write to, so there's a chicken-or-egg problem.\r\n\r\nIn this case, the vtable is the same as the `Rc`'s vtable, so what you would do is create a `BoxPlace` using that vtable, and then use it as the return location for clone. I've had some ideas on how to make this more general, but nothing has stuck yet.\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/359077506/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/359357245",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-359357245",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 359357245,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTM1NzI0NQ==",
    "user": {
      "login": "F001",
      "id": 3314340,
      "node_id": "MDQ6VXNlcjMzMTQzNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3314340?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/F001",
      "html_url": "https://github.com/F001",
      "followers_url": "https://api.github.com/users/F001/followers",
      "following_url": "https://api.github.com/users/F001/following{/other_user}",
      "gists_url": "https://api.github.com/users/F001/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/F001/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/F001/subscriptions",
      "organizations_url": "https://api.github.com/users/F001/orgs",
      "repos_url": "https://api.github.com/users/F001/repos",
      "events_url": "https://api.github.com/users/F001/events{/privacy}",
      "received_events_url": "https://api.github.com/users/F001/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-22T08:40:43Z",
    "updated_at": "2018-01-22T08:40:43Z",
    "body": "@mikeyhew I'm just confused. At least at present, the trait `std::clone::Clone` cannot be made into an object. You didn't propose to change \"object safety\" rules, did you? Maybe another example can explain your arguments better.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/359357245/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/359582804",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-359582804",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 359582804,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTU4MjgwNA==",
    "user": {
      "login": "mikeyhew",
      "id": 6751033,
      "node_id": "MDQ6VXNlcjY3NTEwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6751033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeyhew",
      "html_url": "https://github.com/mikeyhew",
      "followers_url": "https://api.github.com/users/mikeyhew/followers",
      "following_url": "https://api.github.com/users/mikeyhew/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeyhew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeyhew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeyhew/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeyhew/orgs",
      "repos_url": "https://api.github.com/users/mikeyhew/repos",
      "events_url": "https://api.github.com/users/mikeyhew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeyhew/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-22T22:02:45Z",
    "updated_at": "2018-01-22T22:02:45Z",
    "body": "@F001 you're right, and that's sort of what I'm getting at... I'm hoping we can solve the problem of returning DSTs from functions, and thus make `Clone` object-safe.\r\n\r\nOne idea is to allow functions to return DSTs, as long as the return value is immediately \"placed\" somewhere \u2013 i.e. in a `box` or `<-` expression, like the example above with `Clone`.\r\n\r\nThe thing is, for the `box (*rc).clone()` expression to work, the executing program has to do things in the following order:\r\n\r\n1. figure out how much space (and what alignment) is needed for the return value of `(*rc).clone()`\r\n2. allocate an `<Rc as Boxed>::Place` for the return value, using its now-known size and alignment\r\n3. write the return value of `(*rc).clone()` in that place\r\n\r\nOne way of doing this is to have `Clone::clone` allocate the return value onto the stack, and then, before popping the stack frame for `Clone::clone`, allocate the `<Rc as Boxed>::Place`, and copy the return value into it<sup>1</sup>.\r\n\r\nIt would be nice, though, if we could avoid the extra copy and stack allocation by allocating the `<Rc as Boxed>::Place` instead of doing the stack allocation. This would take some serious compiler magic though, as how would the implementation of `Clone::clone` be able to support arbitrary placement types (e.g. `Box`, `Rc`, `SomeDSTArenaType`)?\r\n\r\n<hr>\r\n<sup>1</sup> another advantage of this approach, besides being simple, is that it would not require the return value to be stored on the heap: the return value could instead be <code>memmove</code>d from the top of the callee's stack frame to just above the top of the caller's stack frame, overwriting the callee's stack frame. Example syntax: <code>let c: Clone = alloca (*rc).clone();</code>",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/359582804/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/360741310",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-360741310",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 360741310,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDc0MTMxMA==",
    "user": {
      "login": "mikeyhew",
      "id": 6751033,
      "node_id": "MDQ6VXNlcjY3NTEwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6751033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeyhew",
      "html_url": "https://github.com/mikeyhew",
      "followers_url": "https://api.github.com/users/mikeyhew/followers",
      "following_url": "https://api.github.com/users/mikeyhew/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeyhew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeyhew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeyhew/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeyhew/orgs",
      "repos_url": "https://api.github.com/users/mikeyhew/repos",
      "events_url": "https://api.github.com/users/mikeyhew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeyhew/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-26T10:22:30Z",
    "updated_at": "2018-01-26T10:22:45Z",
    "body": "Another thing that we should really get to work is creating unsized structs with placement new:\r\n\r\n```rust\r\nstruct Foo {\r\n    x: i32,\r\n    slice: [u8],\r\n}\r\nfn new(x: i32, slice: Box<u8>) -> Box<Foo> {\r\n    box Foo { x, *slice }\r\n}\r\n```\r\n\r\nWhich is probably a more sought after feature, and definitely simpler to solve, than DST returning functions.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/360741310/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/366553043",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-366553043",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 366553043,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjU1MzA0Mw==",
    "user": {
      "login": "aidanhs",
      "id": 1050652,
      "node_id": "MDQ6VXNlcjEwNTA2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1050652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aidanhs",
      "html_url": "https://github.com/aidanhs",
      "followers_url": "https://api.github.com/users/aidanhs/followers",
      "following_url": "https://api.github.com/users/aidanhs/following{/other_user}",
      "gists_url": "https://api.github.com/users/aidanhs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aidanhs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aidanhs/subscriptions",
      "organizations_url": "https://api.github.com/users/aidanhs/orgs",
      "repos_url": "https://api.github.com/users/aidanhs/repos",
      "events_url": "https://api.github.com/users/aidanhs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aidanhs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-02-18T22:17:46Z",
    "updated_at": "2018-02-18T22:17:46Z",
    "body": "I have created a PR to delete all the placement unstable features at https://github.com/rust-lang/rust/pull/48333, effectively taking placement back to pre-rfc - please contribute there if you have thoughts on the next steps for placement.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/366553043/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/367515992",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-367515992",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 367515992,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NzUxNTk5Mg==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-02-21T23:38:39Z",
    "updated_at": "2018-02-21T23:38:39Z",
    "body": "FYI: I moved to FCP @aidanhs's proposal to remove this feature.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/367515992/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/368230287",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-368230287",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 368230287,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2ODIzMDI4Nw==",
    "user": {
      "login": "Kixunil",
      "id": 1178779,
      "node_id": "MDQ6VXNlcjExNzg3Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1178779?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kixunil",
      "html_url": "https://github.com/Kixunil",
      "followers_url": "https://api.github.com/users/Kixunil/followers",
      "following_url": "https://api.github.com/users/Kixunil/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kixunil/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kixunil/subscriptions",
      "organizations_url": "https://api.github.com/users/Kixunil/orgs",
      "repos_url": "https://api.github.com/users/Kixunil/repos",
      "events_url": "https://api.github.com/users/Kixunil/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kixunil/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-02-24T14:00:16Z",
    "updated_at": "2018-02-24T14:00:16Z",
    "body": "@nikomatsakis any summary on what was wrong with original idea?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/368230287/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/368590813",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-368590813",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 368590813,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2ODU5MDgxMw==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-02-26T17:58:30Z",
    "updated_at": "2018-02-26T17:58:30Z",
    "body": "@Kixunil please see https://github.com/rust-lang/rust/pull/48333 -- and also note that one of the conditions for removal is writing up the problems and other issues. =)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/368590813/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/375376990",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-375376990",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 375376990,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTM3Njk5MA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-03-22T16:49:17Z",
    "updated_at": "2018-03-22T16:49:17Z",
    "body": "A curious case has [popped up](https://github.com/rust-lang/rust/issues/48493#issuecomment-375376475) where code like this causes a segfault:\r\n\r\n```rust\r\n#![feature(box_syntax)]\r\n\r\nuse std::mem;\r\n\r\nenum Void {}\r\n\r\nstruct RcBox<T> {\r\n    _a: usize,\r\n    _b: T,\r\n}\r\n\r\npub unsafe fn bar() {\r\n    mem::forget(box RcBox {\r\n        _a: 1,\r\n        _b: mem::uninitialized::<Void>(),\r\n    });\r\n}\r\n```\r\n\r\nbut avoiding the use of `box` and instead using `Box::new` fixes the issue. I'm not sure if this code is even  supposed to work, though, and it may mean that whatever \"fix\" is in place for struct literals just hasn't made its way to the `box` keyword yet.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/375376990/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/375734194",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-375734194",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 375734194,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTczNDE5NA==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-03-23T17:03:30Z",
    "updated_at": "2018-03-23T17:03:30Z",
    "body": "(Note that I believe the plan is to remove placement new, whenever @aidanhs gets a chance to rebase https://github.com/rust-lang/rust/pull/48333)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/375734194/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/375734377",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-375734377",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 375734377,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTczNDM3Nw==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-03-23T17:04:06Z",
    "updated_at": "2018-03-23T17:04:06Z",
    "body": "Though that's a good one to remember for the future. Huh. ",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/375734377/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/375734455",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-375734455",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 375734455,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTczNDQ1NQ==",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-03-23T17:04:20Z",
    "updated_at": "2018-03-23T17:04:20Z",
    "body": "I suppose that the call to `uninitialized` is basically considered UB.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/375734455/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/377993714",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-377993714",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 377993714,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3Nzk5MzcxNA==",
    "user": {
      "login": "scottjmaddox",
      "id": 28676699,
      "node_id": "MDQ6VXNlcjI4Njc2Njk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/28676699?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/scottjmaddox",
      "html_url": "https://github.com/scottjmaddox",
      "followers_url": "https://api.github.com/users/scottjmaddox/followers",
      "following_url": "https://api.github.com/users/scottjmaddox/following{/other_user}",
      "gists_url": "https://api.github.com/users/scottjmaddox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/scottjmaddox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/scottjmaddox/subscriptions",
      "organizations_url": "https://api.github.com/users/scottjmaddox/orgs",
      "repos_url": "https://api.github.com/users/scottjmaddox/repos",
      "events_url": "https://api.github.com/users/scottjmaddox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/scottjmaddox/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-02T17:55:41Z",
    "updated_at": "2018-04-02T17:55:41Z",
    "body": "Would it be possible to just avoid all the issues brought up with placement syntax and provide a `ptr::write` like intrinsic that allowed directly writing a static Struct to a pointer as a stop-gap solution? As is, Rust does not really support large structs, because they're always allocated on the stack before writing, resulting in stack overflows. This would fill the basic need, while leaving all the other questions until later.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/377993714/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378416911",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-378416911",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 378416911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODQxNjkxMQ==",
    "user": {
      "login": "aidanhs",
      "id": 1050652,
      "node_id": "MDQ6VXNlcjEwNTA2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1050652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aidanhs",
      "html_url": "https://github.com/aidanhs",
      "followers_url": "https://api.github.com/users/aidanhs/followers",
      "following_url": "https://api.github.com/users/aidanhs/following{/other_user}",
      "gists_url": "https://api.github.com/users/aidanhs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aidanhs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aidanhs/subscriptions",
      "organizations_url": "https://api.github.com/users/aidanhs/orgs",
      "repos_url": "https://api.github.com/users/aidanhs/repos",
      "events_url": "https://api.github.com/users/aidanhs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aidanhs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-03T22:15:51Z",
    "updated_at": "2018-04-06T14:50:51Z",
    "body": "Placement new is imminently about to be/has been removed as an unstable feature and the RFCs unaccepted. The approved/merged PR is at [#48333](https://github.com/rust-lang/rust/pull/48333) and the tracking issues were at [#22181](https://github.com/rust-lang/rust/issues/22181) and [#27779](https://github.com/rust-lang/rust/issues/27779) (this issue). Note that this does *not* affect box syntax - there is a new tracking issue for that at #49733.\r\n\r\nFind the internals thread where you can discuss this more at https://internals.rust-lang.org/t/removal-of-all-unstable-placement-features/7223. Please add any thoughts there. This is the summary comment.\r\n\r\nSo why remove placement?\r\n========\r\n\r\nThe implementation does not fulfil the design goals\r\n--------------\r\n\r\nAs described in rust-lang/rfcs#470 (referred to by the accepted rust-lang/rfcs#809), the implementation of placement new should\r\n\r\n> Add user-defined placement `in` expression (more succinctly, \"an `in` expression\"), an operator analogous to \"placement new\" in C++. This provides a way for a user to specify (1.) how the backing storage for some datum should be allocated, (2.) that the allocation should be ordered before the evaluation of the datum, and (3.) that the datum should preferably be stored directly into the backing storage (rather than allocating temporary storage on the stack and then copying the datum from the stack into the backing storage).\r\n\r\nThe summarised goals (from the same RFC text) are to be able to:\r\n1. Place an object at a specific address (references the original C++ goals)\r\n2. Allocate objects in arenas (references the original C++ goals)\r\n3. Be competitive with the implementation in C++\r\n\r\nNow consider the description of C++ behaviour in https://isocpp.org/wiki/faq/dtors#placement-new and note that during construction, the `this` pointer will point to the allocated location, so that all fields are assigned directly to the allocated location. It follows that we must provide similar guarantees to achive goal 3 (be competitive with C++), so the \"preferably\" in the implementation description is not strong enough - it is actually necessary.\r\n\r\nUnfortunately, [it is easy to show](https://play.rust-lang.org/?gist=0b250385a4a657f50cc8f6723eef5d2c&version=nightly) that rust does *not* construct objects directly into the allocation in debug mode. This is an artificially simple case that uses a struct literal rather than the very common Rust pattern of 'return value construction' (most `new` functions).\r\n\r\nIt appears that the current implementation cannot competitive with C++ placement as-is. A new RFC might either propose different guarantees, or describe how the implementation should work given the very different method of construction in Rust (compared to C++). Straw man: \"A call to a `fn() -> T` can be satisfied by a `fn(&uninit T)` function of the same name (allowing you to assign fields directly in the function body via the uninit reference)\".\r\n\r\nThe functionality of placement is unpredictable\r\n--------------\r\n\r\nAs described by the C++ goals for placement (mentioned above), placement is typically used because you need to have explicit control over the location an object is put at. We saw above that Rust fails in very simple cases, but *even if it didn't* there is a more general issue - there is no feedback to the user whether placement is actually working. [For example](https://github.com/rust-lang/rust/issues/27779#issuecomment-358025344), there is no way for a user to tell that `linkedlist.back_place() <- [0u8; 10*1024*1024]` is placed but `linkedlist.back_place() <- [[0u8; 10*1024*1024]]` is not.\r\n\r\nEffectively, placement as implemented today is a 'slightly-better-effort to place values than normal assignment'. For an API that aims to offer additional control, this unpredictability is a significant problem. A new RFC might provide either provide clear guidance and documentation on what placement is guaranteed, or require that compilation will fail if a requested placement cannot succeed. Straw man 1: \"Placement only works for arrays of bytes. Function calls (e.g. serde or anything with fallible creation) and DSTs will not work\". Straw man 2: \"If a same-name `fn(&uninit T)` does not exist for the `fn() -> T` call being placed, compilation will fail\".\r\n\r\nSpecific unresolved questions\r\n--------------\r\n\r\nThere are a number of specific unresolved questions around the RFC(s), but there has been effectively no design work for about 2 years. These include (some already covered above):\r\n\r\n - making placement work for serde/with fallible creation [5], [irlo2], [7]\r\n - trait design:\r\n   - opting into not consuming the placer in `Placer::make_place` - [2]\r\n   - trait proliferation - [4] (+ others in that thread)\r\n   - fallible allocation - [3], [4] (+ others in that thread)\r\n - support for DSTs/unsized structs (if at all) - [1], [6]\r\n\r\nMore speculative unresolved questions include:\r\n\r\n - better trait design with in the context of future language features [irlo1] (Q11), [irlo3]\r\n - interaction between custom allocators and placement [irlo3]\r\n\r\n[0] https://github.com/rust-lang/rfcs/pull/470\r\n[1] https://github.com/rust-lang/rfcs/pull/809#issuecomment-73910414\r\n[2] https://github.com/rust-lang/rfcs/issues/1286\r\n[3] https://github.com/rust-lang/rfcs/issues/1315\r\n[4] https://github.com/rust-lang/rust/issues/27779#issuecomment-146711893\r\n[5] https://github.com/rust-lang/rust/issues/27779#issuecomment-285562402\r\n[6] https://github.com/rust-lang/rust/issues/27779#issuecomment-354464938\r\n[7] https://github.com/rust-lang/rfcs/pull/1228#issuecomment-190825370\r\n[irlo1] https://internals.rust-lang.org/t/placement-nwbi-faq-new-box-in-left-arrow/2789\r\n[irlo2] https://internals.rust-lang.org/t/placement-nwbi-faq-new-box-in-left-arrow/2789/19\r\n[irlo3] https://internals.rust-lang.org/t/lang-team-minutes-feature-status-report-placement-in-and-box/4646\r\n\r\nI've opted to list these rather than going into detail, as they're generally covered comprehensively by the corresponding links. A future RFC might examine these points to identify areas to explictly address, including (in no particular order):\r\n - does the new RFC support DSTs? serde and fallible creation?\r\n - does the new RFC have a lot of traits? Is it justified?\r\n - can the new RFC handle cases where allocation fails? Does this align with wider language plans (if any) for fallible allocation?\r\n - are there upcoming/potential language features that could affect the design of the new RFC? e.g. custom allocators, NoMove, HKTs? What would the implications be?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378416911/reactions",
      "total_count": 22,
      "+1": 16,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 5,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378426876",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-378426876",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 378426876,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODQyNjg3Ng==",
    "user": {
      "login": "aidanhs",
      "id": 1050652,
      "node_id": "MDQ6VXNlcjEwNTA2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1050652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aidanhs",
      "html_url": "https://github.com/aidanhs",
      "followers_url": "https://api.github.com/users/aidanhs/followers",
      "following_url": "https://api.github.com/users/aidanhs/following{/other_user}",
      "gists_url": "https://api.github.com/users/aidanhs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aidanhs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aidanhs/subscriptions",
      "organizations_url": "https://api.github.com/users/aidanhs/orgs",
      "repos_url": "https://api.github.com/users/aidanhs/repos",
      "events_url": "https://api.github.com/users/aidanhs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aidanhs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-03T23:04:34Z",
    "updated_at": "2018-04-03T23:04:34Z",
    "body": "@scottjmaddox I responded to you on the internals thread - https://internals.rust-lang.org/t/removal-of-all-unstable-placement-features/7223/2.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378426876/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378527336",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-378527336",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 378527336,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODUyNzMzNg==",
    "user": {
      "login": "aidanhs",
      "id": 1050652,
      "node_id": "MDQ6VXNlcjEwNTA2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1050652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aidanhs",
      "html_url": "https://github.com/aidanhs",
      "followers_url": "https://api.github.com/users/aidanhs/followers",
      "following_url": "https://api.github.com/users/aidanhs/following{/other_user}",
      "gists_url": "https://api.github.com/users/aidanhs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aidanhs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aidanhs/subscriptions",
      "organizations_url": "https://api.github.com/users/aidanhs/orgs",
      "repos_url": "https://api.github.com/users/aidanhs/repos",
      "events_url": "https://api.github.com/users/aidanhs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aidanhs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-04T08:47:24Z",
    "updated_at": "2018-04-04T08:47:24Z",
    "body": "Closing since the unaccepting PR has been merged.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378527336/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378800293",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-378800293",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 378800293,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODgwMDI5Mw==",
    "user": {
      "login": "abonander",
      "id": 3198595,
      "node_id": "MDQ6VXNlcjMxOTg1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3198595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abonander",
      "html_url": "https://github.com/abonander",
      "followers_url": "https://api.github.com/users/abonander/followers",
      "following_url": "https://api.github.com/users/abonander/following{/other_user}",
      "gists_url": "https://api.github.com/users/abonander/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abonander/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abonander/subscriptions",
      "organizations_url": "https://api.github.com/users/abonander/orgs",
      "repos_url": "https://api.github.com/users/abonander/repos",
      "events_url": "https://api.github.com/users/abonander/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abonander/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-05T02:11:48Z",
    "updated_at": "2018-04-05T02:11:48Z",
    "body": "@aidanhs this is the tracking RFC for `box_syntax` as well, according to the [Unstable Book](https://doc.rust-lang.org/unstable-book/language-features/box-syntax.html).",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378800293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/379277468",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-379277468",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 379277468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTI3NzQ2OA==",
    "user": {
      "login": "aidanhs",
      "id": 1050652,
      "node_id": "MDQ6VXNlcjEwNTA2NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1050652?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aidanhs",
      "html_url": "https://github.com/aidanhs",
      "followers_url": "https://api.github.com/users/aidanhs/followers",
      "following_url": "https://api.github.com/users/aidanhs/following{/other_user}",
      "gists_url": "https://api.github.com/users/aidanhs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aidanhs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aidanhs/subscriptions",
      "organizations_url": "https://api.github.com/users/aidanhs/orgs",
      "repos_url": "https://api.github.com/users/aidanhs/repos",
      "events_url": "https://api.github.com/users/aidanhs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aidanhs/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-06T14:50:58Z",
    "updated_at": "2018-04-06T14:50:58Z",
    "body": "@abonander good point. I've created a new tracking issue for *just* box syntax, updated my summary comment above and made a post on the thread in the internals forum.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/379277468/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/379279685",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-379279685",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 379279685,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTI3OTY4NQ==",
    "user": {
      "login": "kennytm",
      "id": 103023,
      "node_id": "MDQ6VXNlcjEwMzAyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kennytm",
      "html_url": "https://github.com/kennytm",
      "followers_url": "https://api.github.com/users/kennytm/followers",
      "following_url": "https://api.github.com/users/kennytm/following{/other_user}",
      "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions",
      "organizations_url": "https://api.github.com/users/kennytm/orgs",
      "repos_url": "https://api.github.com/users/kennytm/repos",
      "events_url": "https://api.github.com/users/kennytm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kennytm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-06T14:57:51Z",
    "updated_at": "2018-04-06T14:57:51Z",
    "body": "@aidanhs You'll need to update the tracking issue number in the Rust source as well.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/379279685/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/392178814",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-392178814",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 392178814,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjE3ODgxNA==",
    "user": {
      "login": "est31",
      "id": 8872119,
      "node_id": "MDQ6VXNlcjg4NzIxMTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/est31",
      "html_url": "https://github.com/est31",
      "followers_url": "https://api.github.com/users/est31/followers",
      "following_url": "https://api.github.com/users/est31/following{/other_user}",
      "gists_url": "https://api.github.com/users/est31/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/est31/subscriptions",
      "organizations_url": "https://api.github.com/users/est31/orgs",
      "repos_url": "https://api.github.com/users/est31/repos",
      "events_url": "https://api.github.com/users/est31/events{/privacy}",
      "received_events_url": "https://api.github.com/users/est31/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-05-25T20:41:05Z",
    "updated_at": "2018-05-25T20:41:05Z",
    "body": "@kennytm I've filed PR #51066 for this",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/392178814/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/392264157",
    "html_url": "https://github.com/rust-lang/rust/issues/27779#issuecomment-392264157",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27779",
    "id": 392264157,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjI2NDE1Nw==",
    "user": {
      "login": "Kixunil",
      "id": 1178779,
      "node_id": "MDQ6VXNlcjExNzg3Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1178779?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kixunil",
      "html_url": "https://github.com/Kixunil",
      "followers_url": "https://api.github.com/users/Kixunil/followers",
      "following_url": "https://api.github.com/users/Kixunil/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kixunil/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kixunil/subscriptions",
      "organizations_url": "https://api.github.com/users/Kixunil/orgs",
      "repos_url": "https://api.github.com/users/Kixunil/repos",
      "events_url": "https://api.github.com/users/Kixunil/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kixunil/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-05-26T14:12:31Z",
    "updated_at": "2018-05-26T14:12:31Z",
    "body": "@aidanhs thank you for the summary! I've finally understood it well.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/392264157/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
