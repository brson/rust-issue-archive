[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2551375",
    "html_url": "https://github.com/rust-lang/rust/issues/1083#issuecomment-2551375",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1083",
    "id": 2551375,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTEzNzU=",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-10-28T00:41:42Z",
    "updated_at": "2011-10-28T00:41:42Z",
    "body": "This is by design. We break IEEE 754 compatibility because < and == are supposed to be used in hashtables and trees and such, and I'd rather not have hashtables mysteriously break when NaNs are used as keys.\n\nWe should have an IEEE 754-compliant comparison function in the standard library though.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2551375/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2551481",
    "html_url": "https://github.com/rust-lang/rust/issues/1083#issuecomment-2551481",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1083",
    "id": 2551481,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTE0ODE=",
    "user": {
      "login": "mbrubeck",
      "id": 5920,
      "node_id": "MDQ6VXNlcjU5MjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5920?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mbrubeck",
      "html_url": "https://github.com/mbrubeck",
      "followers_url": "https://api.github.com/users/mbrubeck/followers",
      "following_url": "https://api.github.com/users/mbrubeck/following{/other_user}",
      "gists_url": "https://api.github.com/users/mbrubeck/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mbrubeck/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mbrubeck/subscriptions",
      "organizations_url": "https://api.github.com/users/mbrubeck/orgs",
      "repos_url": "https://api.github.com/users/mbrubeck/repos",
      "events_url": "https://api.github.com/users/mbrubeck/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mbrubeck/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-10-28T00:58:55Z",
    "updated_at": "2011-10-28T00:58:55Z",
    "body": "I discussed this with pcwalton on IRC, and determined that (NaN < 0) is by design, but (NaN == Infinity) and (NaN == -Infinity) are bugs.  Updated the issue description.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2551481/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2552179",
    "html_url": "https://github.com/rust-lang/rust/issues/1083#issuecomment-2552179",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1083",
    "id": 2552179,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTIxNzk=",
    "user": {
      "login": "mbrubeck",
      "id": 5920,
      "node_id": "MDQ6VXNlcjU5MjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5920?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mbrubeck",
      "html_url": "https://github.com/mbrubeck",
      "followers_url": "https://api.github.com/users/mbrubeck/followers",
      "following_url": "https://api.github.com/users/mbrubeck/following{/other_user}",
      "gists_url": "https://api.github.com/users/mbrubeck/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mbrubeck/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mbrubeck/subscriptions",
      "organizations_url": "https://api.github.com/users/mbrubeck/orgs",
      "repos_url": "https://api.github.com/users/mbrubeck/repos",
      "events_url": "https://api.github.com/users/mbrubeck/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mbrubeck/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-10-28T03:30:07Z",
    "updated_at": "2011-10-28T03:30:07Z",
    "body": "All of the assertions in the following program pass in the current Rust implementation.\n\n``` rust\nuse std;\nimport std::float;\nfn main() {\n  let nan = float::NaN();\n  let inf = float::infinity();\n  assert(-inf == float::neg_infinity());\n\n  assert(!( nan >  nan));\n  assert(!( nan > -nan));\n  assert(!( nan >   0.));\n  assert(!( nan >  inf));\n  assert(!( nan > -inf));\n  assert(!(  0. >  nan));\n  assert(!( inf >  nan));\n  assert(!(-inf >  nan));\n  assert(!(-nan >  nan));\n\n  assert( nan ==  nan);\n  assert( nan == -nan);\n\n  assert( nan ==   1.);\n  assert( nan ==   0.);\n  assert( nan ==  inf);\n  assert( nan == -inf);\n\n  assert(  1. ==  nan);\n  assert(  0. ==  nan);\n  assert( inf ==  nan);\n  assert(-inf ==  nan);\n\n  assert(nan <   0.);\n  assert(nan <   1.);\n  assert(nan <  -1.);\n  assert(nan <  inf);\n  assert(nan < -inf);\n  assert(nan <  nan);\n  assert(nan < -nan);\n\n  assert(  0. < nan);\n  assert(  1. < nan);\n  assert( -1. < nan);\n  assert( inf < nan);\n  assert(-inf < nan);\n  assert(-nan < nan);\n}\n```\n\nIt appears that NaN is less than all values and all values are less than NaN; NaN is greater than no values and no values are greater than NaN; NaN is equal to all values and all values are equal to NaN.\n\nAnother quirk is that `(inf - inf)` is printed as `-nan` instead of `nan`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2552179/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2552378",
    "html_url": "https://github.com/rust-lang/rust/issues/1083#issuecomment-2552378",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1083",
    "id": 2552378,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTIzNzg=",
    "user": {
      "login": "mbrubeck",
      "id": 5920,
      "node_id": "MDQ6VXNlcjU5MjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5920?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mbrubeck",
      "html_url": "https://github.com/mbrubeck",
      "followers_url": "https://api.github.com/users/mbrubeck/followers",
      "following_url": "https://api.github.com/users/mbrubeck/following{/other_user}",
      "gists_url": "https://api.github.com/users/mbrubeck/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mbrubeck/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mbrubeck/subscriptions",
      "organizations_url": "https://api.github.com/users/mbrubeck/orgs",
      "repos_url": "https://api.github.com/users/mbrubeck/repos",
      "events_url": "https://api.github.com/users/mbrubeck/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mbrubeck/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-10-28T04:17:23Z",
    "updated_at": "2011-10-28T04:17:46Z",
    "body": "The problem is that Rust uses `ule|ult|ueq` in its `fcmp` operations.  According to the [semantics](http://llvm.org/docs/LangRef.html#i_fcmp), all of these operations yield true if either operand is QNaN.\n\n`compare_scalar_values` uses LE, LT, and EQ operations directly for `<=`, `<`, and `==` expressions.  It uses the LE, LT, and EQ operations and negates them for `>`, `>=`, and `!=` expressions.  This is why it the first three operations always return true for NaN, while the latter three always return false.\n\nTo get IEEE 754 semantics, we'd need to change it to use all six operations (`ole|olt|oge|ogt|oeq`) directly.\n\nTo get consistent non-IEEE 754 semantics, we'd first need to define those semantics, and then possibly add some special-case branches to handle QNaNs.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2552378/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2561690",
    "html_url": "https://github.com/rust-lang/rust/issues/1083#issuecomment-2561690",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1083",
    "id": 2561690,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NjE2OTA=",
    "user": {
      "login": "mbrubeck",
      "id": 5920,
      "node_id": "MDQ6VXNlcjU5MjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5920?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mbrubeck",
      "html_url": "https://github.com/mbrubeck",
      "followers_url": "https://api.github.com/users/mbrubeck/followers",
      "following_url": "https://api.github.com/users/mbrubeck/following{/other_user}",
      "gists_url": "https://api.github.com/users/mbrubeck/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mbrubeck/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mbrubeck/subscriptions",
      "organizations_url": "https://api.github.com/users/mbrubeck/orgs",
      "repos_url": "https://api.github.com/users/mbrubeck/repos",
      "events_url": "https://api.github.com/users/mbrubeck/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mbrubeck/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-10-28T21:53:53Z",
    "updated_at": "2011-10-28T21:53:53Z",
    "body": "Fixed by #1090.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2561690/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
