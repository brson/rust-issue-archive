[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153128109",
    "html_url": "https://github.com/rust-lang/rust/issues/29521#issuecomment-153128109",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29521",
    "id": 153128109,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MzEyODEwOQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-02T19:12:50Z",
    "updated_at": "2015-11-02T19:12:50Z",
    "body": "Thanks for the report! Due to the way that OS strings are stored on Windows the only way to do this is via `encode_wide`, there's no actual way to return a `[u16]` or `*const u16`, so I'm going to close this.\n\nWe do have other bugs tracking the windows-specific documentation, issue, however, so this hopefully won't be so hard to find in the future!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153128109/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153142233",
    "html_url": "https://github.com/rust-lang/rust/issues/29521#issuecomment-153142233",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29521",
    "id": 153142233,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MzE0MjIzMw==",
    "user": {
      "login": "pjmlp",
      "id": 608876,
      "node_id": "MDQ6VXNlcjYwODg3Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/608876?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pjmlp",
      "html_url": "https://github.com/pjmlp",
      "followers_url": "https://api.github.com/users/pjmlp/followers",
      "following_url": "https://api.github.com/users/pjmlp/following{/other_user}",
      "gists_url": "https://api.github.com/users/pjmlp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pjmlp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pjmlp/subscriptions",
      "organizations_url": "https://api.github.com/users/pjmlp/orgs",
      "repos_url": "https://api.github.com/users/pjmlp/repos",
      "events_url": "https://api.github.com/users/pjmlp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pjmlp/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-02T20:07:09Z",
    "updated_at": "2015-11-02T20:07:09Z",
    "body": "Given that this is now closed, any plans to make Rust strings friendlier to Windows system programmers?\n\nI saw posts of everyone being forced to write their own conversions. Not a good way to sell Rust.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153142233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153182651",
    "html_url": "https://github.com/rust-lang/rust/issues/29521#issuecomment-153182651",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29521",
    "id": 153182651,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MzE4MjY1MQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-02T22:49:24Z",
    "updated_at": "2015-11-02T22:49:24Z",
    "body": "I'd certainly be interested in methods to make various operations easier! A good candidate would perhaps be a method that just returns a `Vec<u16>` or perhaps even a 0-terminated vector, but it's not clear how much better this is over `foo.encode_wide().collect::<Vec<_>>()`.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153182651/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153294804",
    "html_url": "https://github.com/rust-lang/rust/issues/29521#issuecomment-153294804",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29521",
    "id": 153294804,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MzI5NDgwNA==",
    "user": {
      "login": "pjmlp",
      "id": 608876,
      "node_id": "MDQ6VXNlcjYwODg3Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/608876?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pjmlp",
      "html_url": "https://github.com/pjmlp",
      "followers_url": "https://api.github.com/users/pjmlp/followers",
      "following_url": "https://api.github.com/users/pjmlp/following{/other_user}",
      "gists_url": "https://api.github.com/users/pjmlp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pjmlp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pjmlp/subscriptions",
      "organizations_url": "https://api.github.com/users/pjmlp/orgs",
      "repos_url": "https://api.github.com/users/pjmlp/repos",
      "events_url": "https://api.github.com/users/pjmlp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pjmlp/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-03T09:19:01Z",
    "updated_at": "2015-11-03T09:19:01Z",
    "body": "Not sure if this is the place to further discuss the issue, given that it is closed.\n\nAnyway, this started as I wanted to investigate if with Rust 1.4 (MSVC toolchain) I could finally make it part of a WinRT application. Now as a plain dll, eventually in the future as  WinRT component assuming Rust ever does COM.\n\nhttps://github.com/pjmlp/WinRT-Rust\n\nAn example that would eventually be like _\"Look this is how one does WinRT with Rust\"_.\n\nHowever due to the lack of information on how to handle wide character strings, I ended up returning a plain *u8 with the conversion from Rust strings to UTF-16 taking place on C++/CX side.\n\nAfterwards I kept searching the web only to find out, as mentioned, that everyone has their own little solution.\n\nGiven that all Windows system programming languages can deal with wide strings directly, it appeared to me that it is bad PR for Rust in Windows to tell developers used to Delphi WideString, C wchar, C++ wstring, and other builtin conversions to UTF-16/DBCS, including wide string literals, that with Rust an external package is required and literals also need conversions. \n\nFor example, I wasn't aware of `foo.encode_wide().collect::<Vec<_>>()`, maybe it would enough to provide util functions that wrap the `encode_wide().collect::<Vec<_>>()` part or provide a crate similar with wide char and string manipulation functions.\n\nIs there already one, that I could eventually contribute to?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153294804/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153425836",
    "html_url": "https://github.com/rust-lang/rust/issues/29521#issuecomment-153425836",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29521",
    "id": 153425836,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MzQyNTgzNg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-03T17:29:49Z",
    "updated_at": "2015-11-03T17:29:49Z",
    "body": "I think this is probably a case where we could probably need to bolster up our docs! Working with wide strings in Rust should work quite well, all instances of `str` can just be re-encoded as UTF-16 at any time, and `OsString` has the `encode_wide` method to go to a wide string. Leveraging these two may not be surfaced much in the docs, however, but you shouldn't need to go to any external crate to get the FFI utilities you need in theory.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153425836/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/379232593",
    "html_url": "https://github.com/rust-lang/rust/issues/29521#issuecomment-379232593",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29521",
    "id": 379232593,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTIzMjU5Mw==",
    "user": {
      "login": "pronebird",
      "id": 704044,
      "node_id": "MDQ6VXNlcjcwNDA0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pronebird",
      "html_url": "https://github.com/pronebird",
      "followers_url": "https://api.github.com/users/pronebird/followers",
      "following_url": "https://api.github.com/users/pronebird/following{/other_user}",
      "gists_url": "https://api.github.com/users/pronebird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pronebird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pronebird/subscriptions",
      "organizations_url": "https://api.github.com/users/pronebird/orgs",
      "repos_url": "https://api.github.com/users/pronebird/repos",
      "events_url": "https://api.github.com/users/pronebird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pronebird/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-06T12:01:25Z",
    "updated_at": "2018-04-06T12:01:25Z",
    "body": "@alexcrichton  Could you please clarify what `encode_wide` does and why documentation states that it can produce ill-formed UTF-16. If `encode_wide` produces UTF-16 it seems that this may result in invalid encoding on Windows as I suspect that Windows expects UCS-2 instead.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/379232593/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/379352025",
    "html_url": "https://github.com/rust-lang/rust/issues/29521#issuecomment-379352025",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29521",
    "id": 379352025,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTM1MjAyNQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-06T19:20:43Z",
    "updated_at": "2018-04-06T19:20:43Z",
    "body": "@pronebird as far as we know Windows expects the equivalent of `&[u16]`, allowing basically anything inside. It's not required to be valid UTF-16 we're led to believe",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/379352025/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
