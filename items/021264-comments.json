[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70337544",
    "html_url": "https://github.com/rust-lang/rust/issues/21264#issuecomment-70337544",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21264",
    "id": 70337544,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzM3NTQ0",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-16T23:08:50Z",
    "updated_at": "2015-01-17T00:12:28Z",
    "body": "> A smaller testcase, replacing 512 with 1 fails an assertion: Assertion failed: ((!Node || ResNo < Node->getNumValues()) && \"Invalid result number for the given node!\"), function SDValue, file /Users/richo/code/ext/rust/src/llvm/include/llvm/CodeGen/SelectionDAGNodes.h, line 899.\n\nCan only reproduce when built without optimisations (i.e. `-O`). I don\u2019t see the long list of movs in the assembly generated before the error occurs.\n\nIf compile with optimisations on, though,\u2026\n\n```\ntime: 0.001     llvm function passes\n  time: 26.826  llvm module passes\n  time: 0.010   codegen passes\n  time: 0.000   codegen passes\ntime: 28.111    LLVM passes\n  time: 0.215   running linker\n```\n\nThe assembly I get back from the LLVM does not contain any such `mov` trains as reported above either (in both cases a call to `memset@PLT` appears), though the rustc/LLVM asks the system for 40% of my 8GB RAM.\n\nThis is with `1 * 1024 * 1024`. \n\nLLVM bug?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70337544/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70350209",
    "html_url": "https://github.com/rust-lang/rust/issues/21264#issuecomment-70350209",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21264",
    "id": 70350209,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzUwMjA5",
    "user": {
      "login": "Aatch",
      "id": 342416,
      "node_id": "MDQ6VXNlcjM0MjQxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aatch",
      "html_url": "https://github.com/Aatch",
      "followers_url": "https://api.github.com/users/Aatch/followers",
      "following_url": "https://api.github.com/users/Aatch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions",
      "organizations_url": "https://api.github.com/users/Aatch/orgs",
      "repos_url": "https://api.github.com/users/Aatch/repos",
      "events_url": "https://api.github.com/users/Aatch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aatch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-17T02:10:38Z",
    "updated_at": "2015-01-17T02:10:38Z",
    "body": "`mem::zeroed` forwards to an intrinsic `init` that compiles down to a `zeroinitializer` value in LLVM, so it's _technically_ a bug in LLVM that causes this. Optimisations almost always result in a `memset` to zero with large values, but apparently LLVM will output a series of moves for a `zeroinitializer` value.\n\nWe could probably detect larger values and output a memset of zeroes ourselves to avoid this to some extend.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70350209/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70351631",
    "html_url": "https://github.com/rust-lang/rust/issues/21264#issuecomment-70351631",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21264",
    "id": 70351631,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzUxNjMx",
    "user": {
      "login": "Aatch",
      "id": 342416,
      "node_id": "MDQ6VXNlcjM0MjQxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aatch",
      "html_url": "https://github.com/Aatch",
      "followers_url": "https://api.github.com/users/Aatch/followers",
      "following_url": "https://api.github.com/users/Aatch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions",
      "organizations_url": "https://api.github.com/users/Aatch/orgs",
      "repos_url": "https://api.github.com/users/Aatch/repos",
      "events_url": "https://api.github.com/users/Aatch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aatch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-17T02:51:37Z",
    "updated_at": "2015-01-17T02:51:37Z",
    "body": "Hah, in the process of fixing this, I encountered a comment warning about exactly this phenomenom. It's a known issue in LLVM, generating long sequences of `mov`s for large types. Hopefully I'll have a fix up soon.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70351631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70358432",
    "html_url": "https://github.com/rust-lang/rust/issues/21264#issuecomment-70358432",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21264",
    "id": 70358432,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzU4NDMy",
    "user": {
      "login": "richo",
      "id": 476418,
      "node_id": "MDQ6VXNlcjQ3NjQxOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/476418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richo",
      "html_url": "https://github.com/richo",
      "followers_url": "https://api.github.com/users/richo/followers",
      "following_url": "https://api.github.com/users/richo/following{/other_user}",
      "gists_url": "https://api.github.com/users/richo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richo/subscriptions",
      "organizations_url": "https://api.github.com/users/richo/orgs",
      "repos_url": "https://api.github.com/users/richo/repos",
      "events_url": "https://api.github.com/users/richo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richo/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-17T07:45:24Z",
    "updated_at": "2015-01-17T07:45:24Z",
    "body": "Plausible. This was a tracking issue for my own use as much as anything\nelse. I'll follow up next week.\n\nOn Friday, January 16, 2015, James Miller notifications@github.com wrote:\n\n> Hah, in the process of fixing this, I encountered a comment warning about\n> exactly this phenomenom. It's a known issue in LLVM, generating long\n> sequences of movs for large types. Hopefully I'll have a fix up soon.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/rust-lang/rust/issues/21264#issuecomment-70351631.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70358432/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
