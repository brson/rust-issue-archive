[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64078301",
    "html_url": "https://github.com/rust-lang/rust/issues/16418#issuecomment-64078301",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16418",
    "id": 64078301,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDc4MzAx",
    "user": {
      "login": "milibopp",
      "id": 3098430,
      "node_id": "MDQ6VXNlcjMwOTg0MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3098430?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/milibopp",
      "html_url": "https://github.com/milibopp",
      "followers_url": "https://api.github.com/users/milibopp/followers",
      "following_url": "https://api.github.com/users/milibopp/following{/other_user}",
      "gists_url": "https://api.github.com/users/milibopp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/milibopp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/milibopp/subscriptions",
      "organizations_url": "https://api.github.com/users/milibopp/orgs",
      "repos_url": "https://api.github.com/users/milibopp/repos",
      "events_url": "https://api.github.com/users/milibopp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/milibopp/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T12:11:35Z",
    "updated_at": "2014-11-22T14:05:18Z",
    "body": "~~I am unsure whether it is a good idea, but another workaround involving transmutation to a box is possible and appears to work. (I have a suspicion though that this somehow messes up the memory.)~~\n\nEDIT: ok, it is a bad idea, see below\n\n``` rust\nstruct Vec2<S>(S, S);\n\nfn from_array<S>(arr: [S, ..2]) -> Vec2<S> {\n    *unsafe { mem::transmute::<&[S, ..2], Box<Vec2<S>>>(&arr) }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64078301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64078684",
    "html_url": "https://github.com/rust-lang/rust/issues/16418#issuecomment-64078684",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16418",
    "id": 64078684,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDc4Njg0",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T12:26:33Z",
    "updated_at": "2014-11-22T12:26:33Z",
    "body": "That is incorrect and it can corrupt memory/crash the app/anything; it results in calling `free` on some random pointer into the stack, which is undefined behaviour.\n\nIt is more reliable to do:\n\n``` rust\nstruct Vec2<S>(S, S);\nfn from_array(arr: [S, .. 2]) -> Vec<S> {\n    unsafe {\n        let x = Vec2(ptr::read(&arr[0]), ptr::read(&arr[1]));\n        // stop the destructor running on the values in the array, i.e. transfer ownership:\n        mem::forget(arr); \n        x\n    }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64078684/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64078718",
    "html_url": "https://github.com/rust-lang/rust/issues/16418#issuecomment-64078718",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16418",
    "id": 64078718,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDc4NzE4",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-22T12:28:12Z",
    "updated_at": "2014-11-22T12:28:12Z",
    "body": "Function arguments working differently suggests to me that there could be some memory safety bugs that are not caught (not with moving out of fixed length arrays directly, but possibly something similar).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/64078718/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/178709038",
    "html_url": "https://github.com/rust-lang/rust/issues/16418#issuecomment-178709038",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16418",
    "id": 178709038,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3ODcwOTAzOA==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-02T17:43:51Z",
    "updated_at": "2016-02-02T17:43:51Z",
    "body": "Updated code sample: https://play.rust-lang.org/?gist=604564384c576d2d3862&version=nightly\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/178709038/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/355856980",
    "html_url": "https://github.com/rust-lang/rust/issues/16418#issuecomment-355856980",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16418",
    "id": 355856980,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTg1Njk4MA==",
    "user": {
      "login": "matthewjasper",
      "id": 20113453,
      "node_id": "MDQ6VXNlcjIwMTEzNDUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/20113453?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matthewjasper",
      "html_url": "https://github.com/matthewjasper",
      "followers_url": "https://api.github.com/users/matthewjasper/followers",
      "following_url": "https://api.github.com/users/matthewjasper/following{/other_user}",
      "gists_url": "https://api.github.com/users/matthewjasper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matthewjasper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matthewjasper/subscriptions",
      "organizations_url": "https://api.github.com/users/matthewjasper/orgs",
      "repos_url": "https://api.github.com/users/matthewjasper/repos",
      "events_url": "https://api.github.com/users/matthewjasper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matthewjasper/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-01-07T22:11:05Z",
    "updated_at": "2018-01-07T22:26:01Z",
    "body": "Fixed in MIR borrowck (and so NLL) cc #23121\r\nDupe of #26736",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/355856980/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/408648550",
    "html_url": "https://github.com/rust-lang/rust/issues/16418#issuecomment-408648550",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16418",
    "id": 408648550,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODY0ODU1MA==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-07-29T03:03:47Z",
    "updated_at": "2018-07-29T03:03:47Z",
    "body": "Yep, closing as duplicate of https://github.com/rust-lang/rust/issues/26736.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/408648550/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
