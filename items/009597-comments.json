[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25308080",
    "html_url": "https://github.com/rust-lang/rust/issues/9597#issuecomment-25308080",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9597",
    "id": 25308080,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MzA4MDgw",
    "user": {
      "login": "bmaxa",
      "id": 5524409,
      "node_id": "MDQ6VXNlcjU1MjQ0MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5524409?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bmaxa",
      "html_url": "https://github.com/bmaxa",
      "followers_url": "https://api.github.com/users/bmaxa/followers",
      "following_url": "https://api.github.com/users/bmaxa/following{/other_user}",
      "gists_url": "https://api.github.com/users/bmaxa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bmaxa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bmaxa/subscriptions",
      "organizations_url": "https://api.github.com/users/bmaxa/orgs",
      "repos_url": "https://api.github.com/users/bmaxa/repos",
      "events_url": "https://api.github.com/users/bmaxa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bmaxa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-28T20:43:14Z",
    "updated_at": "2013-09-28T22:27:07Z",
    "body": "Having lifetime parameter on trait does not have sense, but in any case triggers ICE.\nAll in all your program is incorrect (if you remove 'self on trait), and gives compile\nerrors.\nIf I were you I would use managed pointer instead of borrowed pointer. Effect is same\nand there are no lifetime issues.\n\n```\ntrait Test {\n    fn method(&mut self);\n}\n\nstruct RealTest {\n    priv value: @mut int\n}\n\nimpl RealTest{\n    fn new(init: @mut int) -> RealTest {\n        RealTest { value: init }\n    }\n}\n\nimpl Test for RealTest {\n    fn method(&mut self) {\n        *self.value += 1;\n        println(fmt!(\"%?\", self.value));\n    }\n}\n\nfn run_test(test: &mut Test) {\n    test.method();\n    test.method();\n}\n\nfn main() {\n    let cell = @mut 0;\n    let test = &mut RealTest::new(cell) as &mut Test;\n\n    run_test(test);\n    println(fmt!(\"%?\", cell));\n}\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25308080/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25308281",
    "html_url": "https://github.com/rust-lang/rust/issues/9597#issuecomment-25308281",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9597",
    "id": 25308281,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MzA4Mjgx",
    "user": {
      "login": "netvl",
      "id": 280456,
      "node_id": "MDQ6VXNlcjI4MDQ1Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/280456?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/netvl",
      "html_url": "https://github.com/netvl",
      "followers_url": "https://api.github.com/users/netvl/followers",
      "following_url": "https://api.github.com/users/netvl/following{/other_user}",
      "gists_url": "https://api.github.com/users/netvl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/netvl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/netvl/subscriptions",
      "organizations_url": "https://api.github.com/users/netvl/orgs",
      "repos_url": "https://api.github.com/users/netvl/repos",
      "events_url": "https://api.github.com/users/netvl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/netvl/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-28T20:53:19Z",
    "updated_at": "2013-09-28T20:53:58Z",
    "body": "Yeah, I'm pretty sure that the whole program is incorrect but I think that ICE is not the way by which I should be told about that incorrectness :)\n\nI tried adding lifetime parameters to traits in order to circumvent another problem which I have just described in my [message](https://mail.mozilla.org/pipermail/rust-dev/2013-September/005819.html) on the mailing list. Apparently, this is not a valid workaround.\n\nAnd I deliberately try to avoid managed boxes because they limit the API.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25308281/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25308634",
    "html_url": "https://github.com/rust-lang/rust/issues/9597#issuecomment-25308634",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9597",
    "id": 25308634,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MzA4NjM0",
    "user": {
      "login": "bmaxa",
      "id": 5524409,
      "node_id": "MDQ6VXNlcjU1MjQ0MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5524409?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bmaxa",
      "html_url": "https://github.com/bmaxa",
      "followers_url": "https://api.github.com/users/bmaxa/followers",
      "following_url": "https://api.github.com/users/bmaxa/following{/other_user}",
      "gists_url": "https://api.github.com/users/bmaxa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bmaxa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bmaxa/subscriptions",
      "organizations_url": "https://api.github.com/users/bmaxa/orgs",
      "repos_url": "https://api.github.com/users/bmaxa/repos",
      "events_url": "https://api.github.com/users/bmaxa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bmaxa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-28T21:15:18Z",
    "updated_at": "2013-09-29T00:30:31Z",
    "body": "Well I think that following program solves your problem ;)\nAgain managed pointer!\nBTW, how to wrap code to display as code in comment? ;)\n\n``` rust\ntrait Walker {  // Some business-logic trait\n    fn walk(&mut self);\n}\n\n// A struct which is intended to be an implementor of Walker trait\n// Note that it has lifetime parameter in order to work for any kind\n// of pointer to a Reader\nstruct ReaderContainer {\n    priv reader: @Reader,\n    priv counter: int\n}\n\n// Some auxiliary structure for ReaderContainer\n// It may be anything but it should have a reference to ReaderContainer\n// We have to use lifetime parameter because this structure is 'attached'\n// to ReaderContainer, hence it must be of the same lifetime\nstruct ReaderContainerIterator<'self> {\n    priv container: &'self mut ReaderContainer\n}\n\n// Some made-up implementation of iterator protocol for our\n// auxiliary structure, it does not really matter\nimpl<'self> Iterator<u8> for ReaderContainerIterator<'self> {\n    fn next(&mut self) -> Option<u8> {\n        if self.container.counter < 10 {\n            self.container.counter += 1;\n            Some(self.container.reader.read_byte() as u8)\n        } else {\n            None\n        }\n    }\n}\n\nimpl ReaderContainer {\n    // A constructor for ReaderContainer, nothing special\n    fn new(reader: @Reader) -> ReaderContainer {\n        ReaderContainer { reader: reader, counter: 0 }\n    }\n\n    // A method which returns our auxiliary structure, i.e. iterator\n    // Note that self parameter has lifetime 'self, otherwise this naturally\n    // does not compile\n    fn iter<'r>(&'r mut self) -> ReaderContainerIterator<'r> {\n        ReaderContainerIterator { container: self }\n    }\n}\n\n// Here is the problem: we cannot implement Walker trait!\nimpl Walker for ReaderContainer {\n    // See below for concrete errors description\n    fn walk(&mut self) {  // <<<\n        for b in self.iter() {\n            println(fmt!(\"byte %?\", b));\n        }\n    }\n}\n\nfn main() {\n    use std::io;\n\n    let r = io::stdin();\n    let mut c = ReaderContainer::new(r);\n\n    c.walk();\n}\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25308634/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25311759",
    "html_url": "https://github.com/rust-lang/rust/issues/9597#issuecomment-25311759",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9597",
    "id": 25311759,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MzExNzU5",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-29T00:31:58Z",
    "updated_at": "2013-09-29T00:31:58Z",
    "body": "@bmaxa wrapping code in \n\n``````\n```rust\ncode\ncode\ncode\n```\n``````\n\nwill get it formatted/highlighted as Rust code (I've edited your comment to add this).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25311759/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26211877",
    "html_url": "https://github.com/rust-lang/rust/issues/9597#issuecomment-26211877",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9597",
    "id": 26211877,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MjExODc3",
    "user": {
      "login": "erickt",
      "id": 84711,
      "node_id": "MDQ6VXNlcjg0NzEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erickt",
      "html_url": "https://github.com/erickt",
      "followers_url": "https://api.github.com/users/erickt/followers",
      "following_url": "https://api.github.com/users/erickt/following{/other_user}",
      "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erickt/subscriptions",
      "organizations_url": "https://api.github.com/users/erickt/orgs",
      "repos_url": "https://api.github.com/users/erickt/repos",
      "events_url": "https://api.github.com/users/erickt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erickt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-13T05:19:14Z",
    "updated_at": "2013-10-13T05:19:14Z",
    "body": "Probably a subbug of #4846.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26211877/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33280611",
    "html_url": "https://github.com/rust-lang/rust/issues/9597#issuecomment-33280611",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9597",
    "id": 33280611,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMjgwNjEx",
    "user": {
      "login": "eminence",
      "id": 402454,
      "node_id": "MDQ6VXNlcjQwMjQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/402454?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eminence",
      "html_url": "https://github.com/eminence",
      "followers_url": "https://api.github.com/users/eminence/followers",
      "following_url": "https://api.github.com/users/eminence/following{/other_user}",
      "gists_url": "https://api.github.com/users/eminence/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eminence/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eminence/subscriptions",
      "organizations_url": "https://api.github.com/users/eminence/orgs",
      "repos_url": "https://api.github.com/users/eminence/repos",
      "events_url": "https://api.github.com/users/eminence/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eminence/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-25T04:08:04Z",
    "updated_at": "2014-01-25T04:08:04Z",
    "body": "After updating the original code example to modern rust, and testing on the latest master (dc48adc69fa86039931244dc8ac0d1633c27c582) there is no longer any ICE.  Instead, the following error:\n\n```\na.rs:22:23: 22:31 error: reference to trait `Test<'a>` where a type is expected; try `@Test<'a>`, `~Test<'a>`, or `&Test<'a>`\na.rs:22 fn run_test<'a>(test: Test<'a>) {\n                              ^~~~~~~~\nerror: aborting due to previous error\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33280611/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42757793",
    "html_url": "https://github.com/rust-lang/rust/issues/9597#issuecomment-42757793",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9597",
    "id": 42757793,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzU3Nzkz",
    "user": {
      "login": "erickt",
      "id": 84711,
      "node_id": "MDQ6VXNlcjg0NzEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erickt",
      "html_url": "https://github.com/erickt",
      "followers_url": "https://api.github.com/users/erickt/followers",
      "following_url": "https://api.github.com/users/erickt/following{/other_user}",
      "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erickt/subscriptions",
      "organizations_url": "https://api.github.com/users/erickt/orgs",
      "repos_url": "https://api.github.com/users/erickt/repos",
      "events_url": "https://api.github.com/users/erickt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erickt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-10T23:39:57Z",
    "updated_at": "2014-05-10T23:39:57Z",
    "body": "I've once again updated it to modern rust, and it compiles fine (although I'm tripping over #14098):\n\n```\ntrait Test<'a> {\n    fn method(&'a mut self);\n}\n\nstruct RealTest<'a> {\n    value: &'a mut int\n}\n\nimpl<'a> RealTest<'a> {\n    fn new<'a>(init: &'a mut int) -> RealTest<'a> {\n        RealTest { value: init }\n    }\n}\n\nimpl<'a> Test<'a> for RealTest<'a> {\n    fn method(&'a mut self) {\n        *self.value += 1;\n        println!(\"{}\", *self.value);\n    }\n}\n\nfn run_test<'a>(test: &'a mut Test<'a>) {\n    test.method();\n    //test.method();\n}\n\nfn main() {\n    let mut cell = 0;\n    {\n        let mut test = RealTest::new(&mut cell);\n        run_test(&mut test);\n    }\n    println!(\"{}\", cell);\n}\n```\n\nSo I'm closing this bug.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42757793/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
