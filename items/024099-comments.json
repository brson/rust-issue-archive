[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/89889956",
    "html_url": "https://github.com/rust-lang/rust/issues/24099#issuecomment-89889956",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24099",
    "id": 89889956,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg5ODg5OTU2",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-06T02:10:14Z",
    "updated_at": "2015-04-06T02:10:14Z",
    "body": "The code in question, in case the link goes stale:\n\n``` rust\nuse std::thread;\n\nfn main() {\n    let r = thread::spawn(|| {\n        panic!();\n    }).join();\n    println!(\"{:?}\", r.is_err());\n}\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/89889956/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/89908401",
    "html_url": "https://github.com/rust-lang/rust/issues/24099#issuecomment-89908401",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24099",
    "id": 89908401,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg5OTA4NDAx",
    "user": {
      "login": "ebfull",
      "id": 3794471,
      "node_id": "MDQ6VXNlcjM3OTQ0NzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3794471?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ebfull",
      "html_url": "https://github.com/ebfull",
      "followers_url": "https://api.github.com/users/ebfull/followers",
      "following_url": "https://api.github.com/users/ebfull/following{/other_user}",
      "gists_url": "https://api.github.com/users/ebfull/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ebfull/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ebfull/subscriptions",
      "organizations_url": "https://api.github.com/users/ebfull/orgs",
      "repos_url": "https://api.github.com/users/ebfull/repos",
      "events_url": "https://api.github.com/users/ebfull/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ebfull/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-06T03:50:23Z",
    "updated_at": "2015-04-06T03:54:40Z",
    "body": "This is one of the things which is not stable yet. This is how rustc does it:\n\n``` rust\n#![feature(set_stdio)]\n\nuse std::thread;\nuse std::io;\nuse std::io::prelude::*;\nuse std::sync::{Arc,Mutex};\n\nfn main() {\n    struct Sink(Arc<Mutex<Vec<u8>>>);\n    impl Write for Sink {\n        fn write(&mut self, data: &[u8]) -> io::Result<usize> {\n            Write::write(&mut *self.0.lock().unwrap(), data)\n        }\n        fn flush(&mut self) -> io::Result<()> { Ok(()) }\n    }\n\n    let data = Arc::new(Mutex::new(Vec::new()));\n    let err = Sink(data.clone());\n\n    let r = thread::spawn(|| {\n        io::set_panic(Box::new(err));\n        panic!();\n    }).join();\n    println!(\"{:?}\", r.is_err());\n}\n```\n\nWhy is the std::io::set_panic() function not documented in the nightly docs? **edit**: nvm it's #[doc(hidden)]\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/89908401/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/89997740",
    "html_url": "https://github.com/rust-lang/rust/issues/24099#issuecomment-89997740",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24099",
    "id": 89997740,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg5OTk3NzQw",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-06T09:57:56Z",
    "updated_at": "2015-04-06T09:57:56Z",
    "body": "> Why is the std::io::set_panic() function not documented in the \n> nightly docs?\n\nBecause it is an implementation detail of the standard library.\n\nOn Mon, 6 Apr, 2015 at 6:50 AM, ebfull notifications@github.com wrote:\n\n> This is one of the things which is not stable yet. This is how rustc \n> does it:\n> \n> #![feature(set_stdio)]\n> \n> use std::thread;\n> use std::io;\n> use std::io::prelude::*;\n> use std::sync::{Arc,Mutex};\n> \n> fn main() {\n>     struct Sink(Arc<Mutex<Vec<u8>>>);\n>     impl Write for Sink {\n>         fn write(&mut self, data: &[u8]) -> io::Result<usize> {\n>             Write::write(&mut *self.0.lock().unwrap(), data)\n>         }\n>         fn flush(&mut self) -> io::Result<()> { Ok(()) }\n>     }\n> \n> ```\n> let data = Arc::new(Mutex::new(Vec::new()));\n> let err = Sink(data.clone());\n> \n> let r = thread::spawn(|| {\n>     io::set_panic(Box::new(err));\n>     panic!();\n> }).join();\n> println!(\"{:?}\", r.is_err());\n> ```\n> \n> }\n> Why is the std::io::set_panic() function not documented in the \n> nightly docs?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/89997740/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90138153",
    "html_url": "https://github.com/rust-lang/rust/issues/24099#issuecomment-90138153",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24099",
    "id": 90138153,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkwMTM4MTUz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-06T16:38:06Z",
    "updated_at": "2015-04-06T16:38:06Z",
    "body": "cc @aturon and https://github.com/rust-lang/rfcs/issues/946\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90138153/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165911729",
    "html_url": "https://github.com/rust-lang/rust/issues/24099#issuecomment-165911729",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24099",
    "id": 165911729,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTkxMTcyOQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-18T22:30:12Z",
    "updated_at": "2015-12-18T22:30:12Z",
    "body": "With https://github.com/rust-lang/rfcs/pull/1328 merged, this should be helpful for this, yeah?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165911729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165923045",
    "html_url": "https://github.com/rust-lang/rust/issues/24099#issuecomment-165923045",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24099",
    "id": 165923045,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTkyMzA0NQ==",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-18T23:55:30Z",
    "updated_at": "2015-12-18T23:55:30Z",
    "body": "@steveklabnik Yes, to some degree. Note, though, that the panic handler will run immediately upon panicking, regardless of any subsequent recovers.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165923045/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/222790630",
    "html_url": "https://github.com/rust-lang/rust/issues/24099#issuecomment-222790630",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24099",
    "id": 222790630,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjc5MDYzMA==",
    "user": {
      "login": "bltavares",
      "id": 109474,
      "node_id": "MDQ6VXNlcjEwOTQ3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/109474?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bltavares",
      "html_url": "https://github.com/bltavares",
      "followers_url": "https://api.github.com/users/bltavares/followers",
      "following_url": "https://api.github.com/users/bltavares/following{/other_user}",
      "gists_url": "https://api.github.com/users/bltavares/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bltavares/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bltavares/subscriptions",
      "organizations_url": "https://api.github.com/users/bltavares/orgs",
      "repos_url": "https://api.github.com/users/bltavares/repos",
      "events_url": "https://api.github.com/users/bltavares/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bltavares/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-31T19:13:56Z",
    "updated_at": "2016-05-31T19:13:56Z",
    "body": "Triaging: given that we have the rust-lang/rfcs#1328 merged, and [stabilised already](https://github.com/rust-lang/rust/issues/30449), should we update the code example to the following?\n\n``` rust\n#![feature(panic_handler)]\nuse std::panic;\nuse std::thread;\n\nfn main() {\n    let r1 = thread::spawn(|| {\n        panic!(\"This should print\");\n    }).join();\n    println!(\"r1: {:?}\", r1.is_err());\n\n    let r2 = thread::spawn(|| {\n        panic::set_hook(Box::new(|_| ()));\n        panic!(\"This should not print\");\n    }).join();\n    panic::take_hook();\n    println!(\"r2: {:?}\", r2.is_err());\n\n    let r3 = thread::spawn(|| {\n        panic!(\"This should print\");\n    }).join();\n    println!(\"r3: {:?}\", r3.is_err());\n}\n\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/222790630/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/299174955",
    "html_url": "https://github.com/rust-lang/rust/issues/24099#issuecomment-299174955",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24099",
    "id": 299174955,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTE3NDk1NQ==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-04T12:47:26Z",
    "updated_at": "2017-05-04T12:47:26Z",
    "body": "What is intended to happen here? As far as I know, the print on panic behavior isn't really possible to change, though we do have features that are either stabilized or on track that solve this (e.g., `panic::set_hook`). Perhaps the right thing to do is to close, then? If people want this behavior (no printing), they should use a custom hook.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/299174955/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/310433097",
    "html_url": "https://github.com/rust-lang/rust/issues/24099#issuecomment-310433097",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24099",
    "id": 310433097,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDQzMzA5Nw==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-06-22T16:30:15Z",
    "updated_at": "2017-06-22T16:30:15Z",
    "body": "`panic::set_hook` allows disabling or modifying the print message; as such, I'm going to close. For example, code here (https://github.com/rust-lang/rust/issues/24099#issuecomment-222790630) now prints (note: doesn't print 'should not print').\r\n\r\n```\r\nthread '<unnamed>' panicked at 'This should print', test.rs:7\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\nr1: true\r\nr2: true\r\nthread '<unnamed>' panicked at 'This should print', test.rs:19\r\nr3: true\r\n```",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/310433097/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
