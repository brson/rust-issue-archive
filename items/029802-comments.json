[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156229580",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-156229580",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 156229580,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjIyOTU4MA==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-12T20:48:44Z",
    "updated_at": "2015-11-12T20:48:44Z",
    "body": "I think this is pending the custom allocator work.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156229580/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156231842",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-156231842",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 156231842,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjIzMTg0Mg==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-12T20:57:57Z",
    "updated_at": "2015-11-12T20:57:57Z",
    "body": "Yes, in general, the standard library assumes that you can't really handle OOM. Using libcore and custom allocators, you could implement whatever behavior you'd like, but you'd still need to re-implement this kind of thing on top of it.\n\nThe standard library is going to operate this way for the forseeable future, as it would require changing the signatures of stable things (like `vec!`) in a backwards-incompatible way. So I'm going to give this one a close.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156231842/reactions",
      "total_count": 45,
      "+1": 5,
      "-1": 40,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156477480",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-156477480",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 156477480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjQ3NzQ4MA==",
    "user": {
      "login": "froydnj",
      "id": 151096,
      "node_id": "MDQ6VXNlcjE1MTA5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/froydnj",
      "html_url": "https://github.com/froydnj",
      "followers_url": "https://api.github.com/users/froydnj/followers",
      "following_url": "https://api.github.com/users/froydnj/following{/other_user}",
      "gists_url": "https://api.github.com/users/froydnj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/froydnj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/froydnj/subscriptions",
      "organizations_url": "https://api.github.com/users/froydnj/orgs",
      "repos_url": "https://api.github.com/users/froydnj/repos",
      "events_url": "https://api.github.com/users/froydnj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/froydnj/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-13T16:18:39Z",
    "updated_at": "2015-11-13T16:18:39Z",
    "body": "So I should have been clearer about this: I don't think that all operations would need to return `bool` or `Option` or whatever.  Firefox's data structures (which I'm most familiar with for something like this) typically have an \"infallible\" (i.e. panic on allocation failure) and \"fallible\" (return error value on allocation failure) variant of all the appropriate operations.  Simply adding fallible operators, while increasing the API surface quite a bit, should also mean that this work could be done in a backwards-compatible way, as the current (infallible) API wouldn't have to change.  So you'd have `vec!` and `vec_fallible!`, for instance, `Vec::with_capacity` and `Vec::with_capacity_fallible`, and so forth.\n\nTo my mind, it'd be better for the standard library to have this sort of thing, rather than folks having to write their own crate for `VecFallible<T>` or whatever and needing to propagate that through dependencies.\n\nDoes that seem reasonable, @steveklabnik ?  I'm afraid I'm ignorant of the custom allocator bits cited herein, so I can't really tell if that's a way to modify the allocation behavior of `Vec<T>` or something else.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156477480/reactions",
      "total_count": 44,
      "+1": 44,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156480644",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-156480644",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 156480644,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjQ4MDY0NA==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-13T16:31:25Z",
    "updated_at": "2015-11-13T16:31:25Z",
    "body": "Independent of the custom allocators, i.e. `Vec<T, A> where A: Allocate`, I guess `Vec` would still have to expose fallible versions of these operations in order to avoid `A`'s default out-of-memory behavior. This is possible to implement right now ([`RawVec` manually calls `oom`, for example](https://github.com/rust-lang/rust/blob/master/src/liballoc/raw_vec.rs#L102-L105)), but probably needs an RFC.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156480644/reactions",
      "total_count": 6,
      "+1": 6,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156484097",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-156484097",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 156484097,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjQ4NDA5Nw==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-13T16:45:51Z",
    "updated_at": "2015-11-13T16:45:51Z",
    "body": "Yeah this is a tricky problem. I'd really not like to bloat up the collections APIs with _fallible variants if we can avoid it. However custom allocators will do nothing for this, as apasel notes.\n\nTo be exhaustive, we'd need to provide fallible versions of:\n\nVec:\n- push\n- insert\n- extend\n- resize\n- append\n- split_off\n- into_boxed_slice\n- reserve\n- reserve_exact\n- with_capacity\n- shrink_to_fit ???\n- clone\n- vec!\n\nMaps:\n- insert\n- entry\n- extend\n- with_capacity\n- reserve\n- shrink_to_fit ???\n- clone\n\nUnless you believe that only a subset is \"truly\" necessary?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156484097/reactions",
      "total_count": 8,
      "+1": 6,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156487994",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-156487994",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 156487994,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjQ4Nzk5NA==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-13T16:59:55Z",
    "updated_at": "2015-11-13T16:59:55Z",
    "body": "Waking up, and this is getting more in cache. Part of this problem is the fuzzy nature of OOM on modern platforms (at least, Linux). It's my understanding that you can happily allocate some eggregious amount of memory from a bad image, only to get smacked down by the OOM killer when you really start trying to _use_ the memory, and there's no way for us to deal with that.\n\nIs there any problem with just having an incredibly reasonable policy like \"no images bigger than 100MB\"?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156487994/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156497336",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-156497336",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 156497336,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjQ5NzMzNg==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-13T17:39:47Z",
    "updated_at": "2015-11-16T14:58:51Z",
    "body": "I assume this wouldn't be backwards-compatible, but it'd be nice to avoid the proliferation of methods with something like:\n\n``` rust\n#![feature(default_type_parameter_fallback)]\n\npub trait AllocResult<T = (), E = ()> {\n    fn ok(value: T) -> Self;\n    fn err(err: E) -> Self;\n}\n\nimpl<T, E> AllocResult<T, E> for T {\n    fn ok(value: T) -> T { value }\n    fn err(_err: E) -> T { oom(); }\n}\n\nimpl<T, E> AllocResult<T, E> for Result<T, E> {\n    fn ok(value: T) -> Self { Ok(value) }\n    fn err(err: E) -> Self { Err(err) }\n}\n\nimpl<T> Vec<T> {\n    pub fn with_capacity<T, R: AllocResult<Self> = Self>(cap: usize) -> R {\n        let ptr = alloc::heap::allocate(...);\n        if ptr.is_null() { R::err(()) } else { R::ok(Vec { ... }) }\n    }\n\n    pub fn push<R: AllocResult = ()>(&mut self, item: T) -> R {\n        if self.needs_reallocate() {\n            let ptr = alloc::heap::reallocate(...);\n            if ptr.is_null() { return R::err(()); }\n            ...\n        }\n        ...\n        R::ok(())\n    }\n}\n\n#[test]\nfn test() {\n    let vec: Vec<i32> = Vec::with_capacity(5); // aborts on OOM\n\n    let mut vec: Vec<i32> = match Vec::with_capacity(5) { // returns `Err` on OOM\n        Ok(vec) => vec,\n        Err(_) => panic!(\"OOM\"),\n    };\n\n    vec.push(1); // aborts on OOM\n\n    match vec.push(1) { // returns `Err` on OOM\n        Ok(_) => {}\n        Err(_) => panic!(\"OOM\"),\n    }\n}\n```\n\nBut this is clearly less discoverable and comprehensible for users.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156497336/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156524801",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-156524801",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 156524801,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjUyNDgwMQ==",
    "user": {
      "login": "froydnj",
      "id": 151096,
      "node_id": "MDQ6VXNlcjE1MTA5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/froydnj",
      "html_url": "https://github.com/froydnj",
      "followers_url": "https://api.github.com/users/froydnj/followers",
      "following_url": "https://api.github.com/users/froydnj/following{/other_user}",
      "gists_url": "https://api.github.com/users/froydnj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/froydnj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/froydnj/subscriptions",
      "organizations_url": "https://api.github.com/users/froydnj/orgs",
      "repos_url": "https://api.github.com/users/froydnj/repos",
      "events_url": "https://api.github.com/users/froydnj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/froydnj/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-13T18:59:51Z",
    "updated_at": "2015-11-13T18:59:51Z",
    "body": "> Waking up, and this is getting more in cache. Part of this problem is the fuzzy nature of OOM on modern platforms (at least, Linux). It's my understanding that you can happily allocate some eggregious amount of memory from a bad image, only to get smacked down by the OOM killer when you really start trying to use the memory, and there's no way for us to deal with that.\n\nThat's a reasonable point, but on Windows the memory allocator really can fail, and Rust should be able to deal with that relatively gracefully.  I don't know about OS X; I'm guessing it's more like Windows than Linux in this regard?\n\n> Is there any problem with just having an incredibly reasonable policy like \"no images bigger than 100MB\"?\n\nA 100MB image is just 5k x 5k x 32bpp (raw pixel data), which is pretty big (roughly 3x 4k monitors), but doesn't sound like anything _too_ out of the ordinary.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156524801/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156595280",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-156595280",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 156595280,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjU5NTI4MA==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-14T00:10:09Z",
    "updated_at": "2015-11-14T00:10:09Z",
    "body": "I'm having trouble finding details TBH. It would appear that FreeBSD supports overcommit, and by extension OSX/iOS seem to as well, at least to a limited extent. It certainly seems that they will do implicit deduplication and then copy-on-write transparently. Since the COW can presumably fail to find any physical memory (otherwise why bother? cache?), that opens up code to the same implicit failure state. iOS at least will send your application a warning that the OOM killer is eyeing it, giving it a chance to make amends (but this may be futile if other memory-starved applications are eating all the memory you're giving up).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156595280/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156602719",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-156602719",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 156602719,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NjYwMjcxOQ==",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-14T01:08:55Z",
    "updated_at": "2015-11-14T01:08:55Z",
    "body": "Good old SIGDANGER\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/156602719/reactions",
      "total_count": 14,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 14,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157056266",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-157056266",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 157056266,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzA1NjI2Ng==",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-16T14:50:39Z",
    "updated_at": "2015-11-16T14:50:39Z",
    "body": "IIRC there was some discussion about allowing custom allocators someday. In combination with specialization, could an allocator + `impl<T> Vec<T, NonPanicAlloc> {}` be used to create an entirely new set of functions (returning `Result`) while blanking out the original functions?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157056266/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157057744",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-157057744",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 157057744,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzA1Nzc0NA==",
    "user": {
      "login": "jdm",
      "id": 27658,
      "node_id": "MDQ6VXNlcjI3NjU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/27658?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jdm",
      "html_url": "https://github.com/jdm",
      "followers_url": "https://api.github.com/users/jdm/followers",
      "following_url": "https://api.github.com/users/jdm/following{/other_user}",
      "gists_url": "https://api.github.com/users/jdm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jdm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jdm/subscriptions",
      "organizations_url": "https://api.github.com/users/jdm/orgs",
      "repos_url": "https://api.github.com/users/jdm/repos",
      "events_url": "https://api.github.com/users/jdm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jdm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-16T14:55:53Z",
    "updated_at": "2015-11-16T14:55:53Z",
    "body": "cc me\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157057744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157059918",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-157059918",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 157059918,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzA1OTkxOA==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-16T15:01:25Z",
    "updated_at": "2015-11-16T15:01:25Z",
    "body": "One could indeed expose different ops/signatures for custom allocators. In fact I believe it could all be hacked on top of associated types, where `type AllocResult = ()` for GlobalAlloc or whatever. However it seems like this wouldn't be desirable for the OP? As in, they specifically don't want to have to thread fallibility throughout their types. Only in specific locations do they care. Is that correct?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157059918/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157061436",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-157061436",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 157061436,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzA2MTQzNg==",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-16T15:07:41Z",
    "updated_at": "2015-11-16T15:07:41Z",
    "body": "Wouldn't it be more general to leave everything as it is and offer a way to locally \"catch\" oom? Similar to catch_panic?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157061436/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157068274",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-157068274",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 157068274,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzA2ODI3NA==",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-16T15:31:05Z",
    "updated_at": "2015-11-16T15:31:05Z",
    "body": "CC @pnkfelix, who has been working on allocator stuff.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157068274/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157077596",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-157077596",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 157077596,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzA3NzU5Ng==",
    "user": {
      "login": "froydnj",
      "id": 151096,
      "node_id": "MDQ6VXNlcjE1MTA5Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151096?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/froydnj",
      "html_url": "https://github.com/froydnj",
      "followers_url": "https://api.github.com/users/froydnj/followers",
      "following_url": "https://api.github.com/users/froydnj/following{/other_user}",
      "gists_url": "https://api.github.com/users/froydnj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/froydnj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/froydnj/subscriptions",
      "organizations_url": "https://api.github.com/users/froydnj/orgs",
      "repos_url": "https://api.github.com/users/froydnj/repos",
      "events_url": "https://api.github.com/users/froydnj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/froydnj/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-16T15:57:15Z",
    "updated_at": "2015-11-16T15:57:15Z",
    "body": "> As in, they specifically don't want to have to thread fallibility throughout their types. Only in specific locations do they care. Is that correct?\n\nThat's correct.\n\nThere's also a readability argument to be made: it's easier to tell whether something can fail if you read:\n\n``` rust\n  if !v.append_fallible(...) { ... }\n```\n\nor whether something is written incorrectly:\n\n``` rust\n  // Forgot to check the return value!\n  v.append_fallible(...) { ... }\n```\n\nvs.\n\n``` rust\n  // Is v an infallible vector or did I forget to check the return value?\n  v.append(...);\n```\n\nYou could address this with `#[must_use]` on `VecFallible<T>`'s methods.  Firefox went the route of separate types for its primary `Vec`-alike and found it difficult to share code between types and still provide the annotation.  It's possible that doing the sharing and using the annotation would be easier in Rust?\n\nHaving two different types for vectors can also make for some awkward code: why do I care about the fallibility of allocating operations if the code that I'm writing doesn't actually care about doing allocation on the vector?  You could cleverly address this problem with traits or templates, I suppose.\n\nIn any event, Firefox is currently in the process of ripping that type distinction out and using separate methods instead.  We think it's much more valuable to see the fallibility of the operation at the call site, rather than having it reside on the type of something, since the type may not be visible/obvious at the call site.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157077596/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157095324",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-157095324",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 157095324,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzA5NTMyNA==",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-16T16:52:43Z",
    "updated_at": "2015-11-16T16:52:43Z",
    "body": ">  We think it's much more valuable to see the fallibility of the operation at the call site, rather than having it reside on the type of something, since the type may not be visible/obvious at the call site.\n\nYes it should be obvious at the call site and not create type-clutter. But duplicating all the functions is just the same, but instead of having two types, you end up with loads of functions that almost do the same.\n\nWith `panic` it's basically the same, the standard library has mostly functions that return a `Result` or an `Option` that the user can `unwrap` or handle, instead of panicking functions. On the other hand, there's `catch_panic`, to turn a panicking function into one returning a `Result`.\n\nA solution similar to `catch_panic` would look like\n\n``` rust\nif let Ok(()) = catch_oom(|| v.push(42)) {\n    // do something\n}\n```\n\nif you forget to use the return value, the normal `must_use` lint would catch that\n\nif such a wrapper is too much, you can always use a macro to make it less verbose: `oom!(v.push(42))`\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157095324/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157097836",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-157097836",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 157097836,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NzA5NzgzNg==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-16T17:01:20Z",
    "updated_at": "2015-11-17T00:02:44Z",
    "body": "Please no catching of oom. I think panic on oom is untenable for the same reasons, more complicated exception safety issues for lots of `unsafe`-marked code. See #26951. The Rusty way of using return types for error handling is a great model.\n\nYou can even add the fallible allocation [in user code (example)](https://play.rust-lang.org/?gist=66e0e15120ffa52e684a&version=nightly) using unstable features, although I guess it's debatable if rust provides a guarantee that it will work.\n\n@froydnj `#[must_use]` on Result would cover this actually (it's a per type attribute, not per method).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/157097836/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/243005948",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-243005948",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 243005948,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzAwNTk0OA==",
    "user": {
      "login": "lilith",
      "id": 107935,
      "node_id": "MDQ6VXNlcjEwNzkzNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/107935?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilith",
      "html_url": "https://github.com/lilith",
      "followers_url": "https://api.github.com/users/lilith/followers",
      "following_url": "https://api.github.com/users/lilith/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilith/subscriptions",
      "organizations_url": "https://api.github.com/users/lilith/orgs",
      "repos_url": "https://api.github.com/users/lilith/repos",
      "events_url": "https://api.github.com/users/lilith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilith/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-08-28T23:21:33Z",
    "updated_at": "2016-08-28T23:39:30Z",
    "body": "@bluss, could you elaborate how a failed 1GB allocation (say, for a large photograph) would prevent unwinding later? My understanding is that there are many myths around overcommit, and that the system can actually tell prior to memory access whether an allocation is likely possible. \n\nsee also https://internals.rust-lang.org/t/could-we-support-unwinding-from-oom-at-least-for-collections/3673/21\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/243005948/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/243090779",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-243090779",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 243090779,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzA5MDc3OQ==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-08-29T10:38:23Z",
    "updated_at": "2016-08-29T10:38:23Z",
    "body": "There will be cases due to overcommit where the application receives a \"successful\" allocation, and it crashes when trying to use it later. However, that doesn't seem to be the problem, because we can't do much about that.\n\n@nathanaeljones I don't understand the scenario, I don't see why a failed allocation would prevent unwinding later. I may be missing something.\n\nThe only Rust code that should have to worry about unsoundness in the presence of unwinding is `unsafe` code, and there's a concern that if we introduce new panics in functions that are used in `unsafe` code (for example `Vec::with_capacity`), then we create new soundness issues. As it is presently, the code can rely on the allocation either succeeding or the program aborting, so there is no need to handle inconsistent states for that critical section of the code (whatever it may be).\n\nIt does seem unlikely, and I can't find any problematic code with a quick search, but introducing new panics in stable API is a hazard if there is code that relied on it to never panic.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/243090779/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/255510893",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-255510893",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 255510893,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTUxMDg5Mw==",
    "user": {
      "login": "nnethercote",
      "id": 1940286,
      "node_id": "MDQ6VXNlcjE5NDAyODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nnethercote",
      "html_url": "https://github.com/nnethercote",
      "followers_url": "https://api.github.com/users/nnethercote/followers",
      "following_url": "https://api.github.com/users/nnethercote/following{/other_user}",
      "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions",
      "organizations_url": "https://api.github.com/users/nnethercote/orgs",
      "repos_url": "https://api.github.com/users/nnethercote/repos",
      "events_url": "https://api.github.com/users/nnethercote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nnethercote/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-22T06:33:24Z",
    "updated_at": "2016-10-22T06:33:24Z",
    "body": "I was just wondering about this issue and @froydnj pointed me at this PR.\n\nIt is a common occurrence in Firefox that we get crash reports that are triggered by OOMs caused by very large allocation requests (e.g. 100 MB or more). Our standard response to these is to make the allocation fallible. Firefox's data structures support this fairly well so it's usually a straightforward fix. \n\nAlthough aborting on OOM is a reasonable default, I'm worried that Rust doesn't have a graceful way of recovering from a 100 MB+ allocation request failing.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/255510893/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/255511054",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-255511054",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 255511054,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTUxMTA1NA==",
    "user": {
      "login": "nnethercote",
      "id": 1940286,
      "node_id": "MDQ6VXNlcjE5NDAyODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nnethercote",
      "html_url": "https://github.com/nnethercote",
      "followers_url": "https://api.github.com/users/nnethercote/followers",
      "following_url": "https://api.github.com/users/nnethercote/following{/other_user}",
      "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions",
      "organizations_url": "https://api.github.com/users/nnethercote/orgs",
      "repos_url": "https://api.github.com/users/nnethercote/repos",
      "events_url": "https://api.github.com/users/nnethercote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nnethercote/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-10-22T06:37:48Z",
    "updated_at": "2016-10-22T06:37:48Z",
    "body": "As for Linux overcommit: at least for Firefox, to a first approximation, Windows is the only platform that matters. So I wouldn't focus too much on overcommit.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/255511054/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/293431057",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-293431057",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 293431057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MzQzMTA1Nw==",
    "user": {
      "login": "nnethercote",
      "id": 1940286,
      "node_id": "MDQ6VXNlcjE5NDAyODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nnethercote",
      "html_url": "https://github.com/nnethercote",
      "followers_url": "https://api.github.com/users/nnethercote/followers",
      "following_url": "https://api.github.com/users/nnethercote/following{/other_user}",
      "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions",
      "organizations_url": "https://api.github.com/users/nnethercote/orgs",
      "repos_url": "https://api.github.com/users/nnethercote/repos",
      "events_url": "https://api.github.com/users/nnethercote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nnethercote/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-04-11T23:39:49Z",
    "updated_at": "2017-04-11T23:39:49Z",
    "body": "FYI: in Firefox we are planning to implement FallibleVec and FallibleHashMap classes. This will likely involve copy-pasting the Vec and HashMap code and then adding the missing fallible operations. Which is awful, but necessary. (Strings might be necessary, too.)\r\n\r\nWe regularly change allocation sites in Firefox from infallible (which is the default) to fallible in response to crash reports that show OOM failures due to large allocation sizes. These are typically on Win32 where OOM due to address space exhaustion is common when doing large allocations. See https://bugzilla.mozilla.org/show_bug.cgi?id=1329171 for an example. We need to be able to do the same thing in Rust code.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/293431057/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/316243054",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-316243054",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 316243054,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjI0MzA1NA==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-19T01:10:18Z",
    "updated_at": "2017-07-19T01:10:18Z",
    "body": "Hey all, this has become high priority for the Firefox devs (which includes me) as they integrate more major Rust components into Gecko, so I'm going to start drafting up a proposal for providing some version of fallible collection methods to avoid fragmenting the ecosystem over this matter.\r\n\r\nSome quick thoughts:\r\n\r\n# This is impossible, overcommit!\r\n\r\nDon't care. This can make software more reliable when it works. Sometimes it won't. Oh well.\r\n\r\n# Types vs Methods\r\n\r\nI firmly believe that a type-level distinction would be bad to have *by default*. Fallibility is fairly fluid in practice, and is nice to be able to integrate incrementally. Also if we provide fallible *methods* it's not a big deal for someone to newtype std collections to only expose the fallible APIs.\r\n\r\n# API Surface\r\n\r\nThere are three tacts we can take here:\r\n\r\n* minimal: just `try_reserve`, `try_reserve_exact`, and `try_with_capacity`. Users can impl e.g. `try_push` with `{ try_reserve(1)?; push() }`. I expect this will cover the most important cases well, with minimal commitment from std. However some methods like `extend` may still infallibly allocate and there's no way to build a perfect wrapper to prevent this.\r\n\r\n* maximal: do all the methods. Perfect implementations, total commitment to mirror all APIs which \"may\" allocate. I have a feeling we're going to end up here one day, but this is a big commitment to make right away. Might lead to Intense Macroification of libcollections (\ud83d\ude3f).\r\n\r\n* half-n-half: Do some major methods, skimp on niche ones. e.g. provide try_extend/try_push. I expect this will just make everyone mad. Especially me when I get constantly pinged about why there's no try_entry or try_splice.\r\n\r\nI'm going to push for minimal for now, with an intent to propose maximal when we have experience with these APIs under our belts.\r\n\r\n# The API\r\n\r\ntry_* methods will return a Result, with an Error format based on the new Allocator APIs. I need to review that RFC and the format, which largely went down while I was absent from the community last year. \r\n\r\nI expect methods like try_push will need to return the pushed element on Err; I don't want to have to propose a callback-based or Entry-style API for this.\r\n\r\nCapacity overflow panics -- might make them a state in the Err? TBD!",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/316243054/reactions",
      "total_count": 13,
      "+1": 13,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/316262266",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-316262266",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 316262266,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjI2MjI2Ng==",
    "user": {
      "login": "nnethercote",
      "id": 1940286,
      "node_id": "MDQ6VXNlcjE5NDAyODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nnethercote",
      "html_url": "https://github.com/nnethercote",
      "followers_url": "https://api.github.com/users/nnethercote/followers",
      "following_url": "https://api.github.com/users/nnethercote/following{/other_user}",
      "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions",
      "organizations_url": "https://api.github.com/users/nnethercote/orgs",
      "repos_url": "https://api.github.com/users/nnethercote/repos",
      "events_url": "https://api.github.com/users/nnethercote/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nnethercote/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-19T03:27:52Z",
    "updated_at": "2017-07-19T03:31:12Z",
    "body": "@gankro: thank you for the write-up. A few notes.\r\n- For the minimal proposal, I think `try_with_capacity` is unnecessary, because you can do `new` followed by `reserve` or `reserve_exact`, depending on the container. Which is good because then you don't have to deal with `with_capacity_and_hasher` for HashMap and HashSet.\r\n- Which containers need fallibility? Definitely: Vec, HashSet, HashMap, VecDeque, BinaryHeap. These all have `reserve`/`capacity` methods because they allocate a big contiguous chunk.\r\n- Which containers don't need fallibility? Probably: Box, Rc, Arc, LinkedList, BTreeMap, BTreeSet. These don't have `reserve`/`capacity` methods because, as I understand it, they allocate a single small chunk or lots of small chunks rather than a single big chunk -- if allocation of a small thing fails you're probably about to OOM anyway, so that's not an interesting case to try to recover from.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/316262266/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/316269902",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-316269902",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 316269902,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjI2OTkwMg==",
    "user": {
      "login": "joshlf",
      "id": 1046063,
      "node_id": "MDQ6VXNlcjEwNDYwNjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1046063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshlf",
      "html_url": "https://github.com/joshlf",
      "followers_url": "https://api.github.com/users/joshlf/followers",
      "following_url": "https://api.github.com/users/joshlf/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshlf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshlf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshlf/subscriptions",
      "organizations_url": "https://api.github.com/users/joshlf/orgs",
      "repos_url": "https://api.github.com/users/joshlf/repos",
      "events_url": "https://api.github.com/users/joshlf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshlf/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-19T04:33:12Z",
    "updated_at": "2017-07-19T04:33:12Z",
    "body": "@Gankro \r\n\r\n> try_* methods will return a Result, with an Error format based on the new Allocator APIs.\r\n\r\nYou might want to consider just an `Option`. The errors used in the `Alloc` trait (`AllocErr`) can express one of two error conditions: out of memory (`AllocErr::Exhausted`) and an unsupported allocation (`AllocErr::Unsupported`). I strongly believe that the latter should be considered evidence of a bug, not a runtime error (as in, you provided an allocator that cannot support the allocations the collection needs to make). Thus, the only error we care about is OOM, and so an `Option` suffices - `Some` on success, `None` on OOM.\r\n\r\nThat said, there may be forwards-compatibility issues that using a `Result` make better, and I'm not experienced enough here to comment, so if that's the reasoning, then I have no concerns. My only comment is to say that we definitely shouldn't have collections returning errors for unsupported allocations - that should just be considered a bug.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/316269902/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/316272923",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-316272923",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 316272923,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjI3MjkyMw==",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-19T04:57:38Z",
    "updated_at": "2017-07-19T05:14:23Z",
    "body": "I have a fourth API option:\r\n\r\n* change all relevant methods to return a `Result` (bear with me wrt backwards compat)\r\n* the error type is the error type of the allocator that the container will be generic over in the future\r\n* create an aborting allocator wrapper, which has a `!` return type and aborts on errors from the inner allocator\r\n* default the generic allocator arg of the collection to the fallibly wrapped global one\r\n* add coercion from `Result<T, !>` to `T` (even for `fn foo()->Result<T,!>` to `fn foo()->T` and `&Result<T,!>` to `&T`, ...)\r\n* change `must_use` to work on enum variants and only require it on `Result::Err`\r\n\r\nNow anyone can choose their preferred method of treating alloc errors, without cluttering the API.\r\n\r\n> I firmly believe that a type-level distinction would be bad to have by default. Fallibility is fairly fluid in practice, and is nice to be able to integrate incrementally. Also if we provide fallible methods it's not a big deal for someone to newtype std collections to only expose the fallible APIs.\r\n\r\nAnd then we provide a way to convert between fallible and infallible containers while keeping the actual allocator? I'm not really sure *how* fluid failability is.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/316272923/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/316363928",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-316363928",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 316363928,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjM2MzkyOA==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-19T12:02:54Z",
    "updated_at": "2017-07-19T12:02:54Z",
    "body": "@oli-obk this adds a type-level distinction, which I said I'm not interested in providing.\r\n\r\nAlso, this involves massive language changes, which I'm not interested in pursuing.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/316363928/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/316364920",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-316364920",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 316364920,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjM2NDkyMA==",
    "user": {
      "login": "daurnimator",
      "id": 127971,
      "node_id": "MDQ6VXNlcjEyNzk3MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127971?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/daurnimator",
      "html_url": "https://github.com/daurnimator",
      "followers_url": "https://api.github.com/users/daurnimator/followers",
      "following_url": "https://api.github.com/users/daurnimator/following{/other_user}",
      "gists_url": "https://api.github.com/users/daurnimator/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/daurnimator/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daurnimator/subscriptions",
      "organizations_url": "https://api.github.com/users/daurnimator/orgs",
      "repos_url": "https://api.github.com/users/daurnimator/repos",
      "events_url": "https://api.github.com/users/daurnimator/events{/privacy}",
      "received_events_url": "https://api.github.com/users/daurnimator/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-19T12:07:28Z",
    "updated_at": "2017-07-19T12:07:28Z",
    "body": "@oli-obk that's the best proposal I've seen yet; it's how I wish things had been designed in the first place.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/316364920/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/316368162",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-316368162",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 316368162,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNjM2ODE2Mg==",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-19T12:20:58Z",
    "updated_at": "2017-07-19T12:23:17Z",
    "body": "> adds a type-level distinction, which I said I'm not interested in providing.\r\n\r\nThe opposite, cluttering the API with functions that do ~almost the same is not an option imo. I have a hard enough time explaining tradeoffs in Rust to my students. Telling them about\r\n\r\n> use nonpanicking functions returning `Result` everywhere, except with containers\r\n\r\nwill not improve the situation.\r\n\r\nI think providing an `as_fallible` method which converts from `&Vec<T, FallibleAlloc<Alloc>>` to `&Vec<T, Alloc>` provides the runtime distinction you want.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/316368162/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317040127",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-317040127",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 317040127,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzA0MDEyNw==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-21T15:58:17Z",
    "updated_at": "2017-07-21T15:58:17Z",
    "body": "I'm strongly considering the as_fallible approach right now, although I still don't think we want to make Vec generic, because it requires significant language changes that likely won't ever happen.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317040127/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317070186",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-317070186",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 317070186,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzA3MDE4Ng==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-21T17:57:20Z",
    "updated_at": "2017-07-21T17:57:20Z",
    "body": "We could consider adapting the placement-in API to incorporate the notion of fallibility.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317070186/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317071708",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-317071708",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 317071708,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzA3MTcwOA==",
    "user": {
      "login": "whitequark",
      "id": 54771,
      "node_id": "MDQ6VXNlcjU0Nzcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/54771?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/whitequark",
      "html_url": "https://github.com/whitequark",
      "followers_url": "https://api.github.com/users/whitequark/followers",
      "following_url": "https://api.github.com/users/whitequark/following{/other_user}",
      "gists_url": "https://api.github.com/users/whitequark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/whitequark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/whitequark/subscriptions",
      "organizations_url": "https://api.github.com/users/whitequark/orgs",
      "repos_url": "https://api.github.com/users/whitequark/repos",
      "events_url": "https://api.github.com/users/whitequark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/whitequark/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-21T18:03:32Z",
    "updated_at": "2017-07-21T18:03:32Z",
    "body": "> We could consider adapting the placement-in API to incorporate the notion of fallibility.\r\n\r\nHow would that work?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317071708/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317073542",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-317073542",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 317073542,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzA3MzU0Mg==",
    "user": {
      "login": "nagisa",
      "id": 679122,
      "node_id": "MDQ6VXNlcjY3OTEyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nagisa",
      "html_url": "https://github.com/nagisa",
      "followers_url": "https://api.github.com/users/nagisa/followers",
      "following_url": "https://api.github.com/users/nagisa/following{/other_user}",
      "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions",
      "organizations_url": "https://api.github.com/users/nagisa/orgs",
      "repos_url": "https://api.github.com/users/nagisa/repos",
      "events_url": "https://api.github.com/users/nagisa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nagisa/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-21T18:11:09Z",
    "updated_at": "2017-07-21T18:11:49Z",
    "body": "Make `Placer::make_place()` return a `Result`. `vec.place_back() <- EXPR` would then desugar to early return on failure, not unlike `?`. I\u2019m sure there could be many other options, I haven\u2019t thought about implications of any of the approaches much. `catch` then can be used to handle the failure locally.\r\n\r\nSee also [brain dump on IRC](https://botbot.me/mozilla/rust-internals/2017-07-21/?msg=88880859&page=3).",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317073542/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317080099",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-317080099",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 317080099,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzA4MDA5OQ==",
    "user": {
      "login": "whitequark",
      "id": 54771,
      "node_id": "MDQ6VXNlcjU0Nzcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/54771?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/whitequark",
      "html_url": "https://github.com/whitequark",
      "followers_url": "https://api.github.com/users/whitequark/followers",
      "following_url": "https://api.github.com/users/whitequark/following{/other_user}",
      "gists_url": "https://api.github.com/users/whitequark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/whitequark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/whitequark/subscriptions",
      "organizations_url": "https://api.github.com/users/whitequark/orgs",
      "repos_url": "https://api.github.com/users/whitequark/repos",
      "events_url": "https://api.github.com/users/whitequark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/whitequark/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-21T18:37:56Z",
    "updated_at": "2017-07-21T18:38:44Z",
    "body": "`Vec::reserve()` can fail.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317080099/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317091249",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-317091249",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 317091249,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzA5MTI0OQ==",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-21T19:25:42Z",
    "updated_at": "2017-07-21T19:25:42Z",
    "body": "@Gankro I'm really glad to have you taking this on!\r\n\r\nA few thoughts:\r\n\r\n- I agree (and I believe the libs team does as well) that a type distinction is very undesirable. That's partly because, as you say, sensitivity to allocation failure is often context-specific. Moreover, retaining compatibility with `std` types (under the default allocator) allows for greater ecosystem interop. In any case, I'd want to see very strong motivation for introducing such a distinction.\r\n\r\n- For people who want some assurance that they're using *only* fallible operations, it might be possible to leverage something like the [portability lint](https://github.com/rust-lang/rfcs/pull/1868) idea.\r\n\r\n- I quite like the minimalistic approach you suggest. You can build quite a bit on top of it using extension traits. And if we ever wanted to provide more maximalist functionality in `std`, I think we'd likewise want to expose it via extension traits.\r\n\r\n- The idea of switching all methods to use `Result`, while elegant in its way, is not something I can see us seriously considering. (I can elaborate on that separately if desired, but I don't want to derail the thread.)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317091249/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317107642",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-317107642",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 317107642,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzEwNzY0Mg==",
    "user": {
      "login": "whitequark",
      "id": 54771,
      "node_id": "MDQ6VXNlcjU0Nzcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/54771?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/whitequark",
      "html_url": "https://github.com/whitequark",
      "followers_url": "https://api.github.com/users/whitequark/followers",
      "following_url": "https://api.github.com/users/whitequark/following{/other_user}",
      "gists_url": "https://api.github.com/users/whitequark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/whitequark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/whitequark/subscriptions",
      "organizations_url": "https://api.github.com/users/whitequark/orgs",
      "repos_url": "https://api.github.com/users/whitequark/repos",
      "events_url": "https://api.github.com/users/whitequark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/whitequark/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-21T20:42:56Z",
    "updated_at": "2017-07-21T20:43:27Z",
    "body": "@aturon et al\r\n\r\nWe've discussed this with @Gankro on IRC, but for the purpose of visibility I'll go on record here: I believe @Gankro's proposal will handle the majority (if not virtually all) embedded use cases, which progressively fall back to a more complex error handling strategy based on domain requirements:\r\n  * allocate everything statically;\r\n  * allocate dynamically but don't handle failure at all, just panic=abort;\r\n  * use arenas per item (e.g. HTTP request), reset arena after request is handled, whether successfully or with OOM, this also helps with fragmentation;\r\n  * actually handle specific allocation failures directly, likely still using arenas but in a more intricate way.\r\n\r\nThis also handles the most obvious hosted use case, libraries that cannot afford to bring down their host process on OOM, e.g. those handling user-controlled content such as zip or XML.\r\n\r\n> Might lead to Intense Macroification of libcollections ().\r\n\r\nWhy not just replace the implementation of `x` with `try_x().ok_or(alloc::oom)`?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317107642/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317114078",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-317114078",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 317114078,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzExNDA3OA==",
    "user": {
      "login": "jethrogb",
      "id": 1132307,
      "node_id": "MDQ6VXNlcjExMzIzMDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1132307?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jethrogb",
      "html_url": "https://github.com/jethrogb",
      "followers_url": "https://api.github.com/users/jethrogb/followers",
      "following_url": "https://api.github.com/users/jethrogb/following{/other_user}",
      "gists_url": "https://api.github.com/users/jethrogb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jethrogb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jethrogb/subscriptions",
      "organizations_url": "https://api.github.com/users/jethrogb/orgs",
      "repos_url": "https://api.github.com/users/jethrogb/repos",
      "events_url": "https://api.github.com/users/jethrogb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jethrogb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-21T21:13:40Z",
    "updated_at": "2017-07-21T21:24:37Z",
    "body": "I think we can do it at the type level while still not using Result everywhere in the infallible case and being backwards-compatible. You just need ATC and improved ergonomics of default type parameters:\r\n\r\n```rust\r\ntrait Allocator {\r\n    type Result<T>;\r\n}\r\n\r\nimpl Allocator for InfallibleAllocator {\r\n    type Result<T> = T;\r\n}\r\n\r\nimpl Allocator for FallibleAllocator {\r\n    type Result<T> = Result<T, AllocatorError>;\r\n}\r\n\r\nimpl Vec<T, A: Allocator = InfallibleAllocator> {\r\n    fn push(v: T) -> A::Result<()>\r\n}\r\n```\r\n\r\n> > Might lead to Intense Macroification of libcollections ().\r\n>\r\n> Why not just replace the implementation of x with try_x().ok_or(alloc::oom)?\r\n\r\nI think that's the point, you'd want a macro to generate all those infallible wrappers",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317114078/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317114228",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-317114228",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 317114228,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzExNDIyOA==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-21T21:14:21Z",
    "updated_at": "2017-07-21T21:14:21Z",
    "body": "We don't OOM on capacity overflow today, so that would be a change to the public API. If we feed the reason for failure through then it might be fine (we can match and choose the approach). There's also the matter of whether the fallible code optimizes to the same thing as the infallible code (more branches + a payload to manipulate).",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/317114228/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/319974401",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-319974401",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 319974401,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxOTk3NDQwMQ==",
    "user": {
      "login": "Ericson2314",
      "id": 1055245,
      "node_id": "MDQ6VXNlcjEwNTUyNDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1055245?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ericson2314",
      "html_url": "https://github.com/Ericson2314",
      "followers_url": "https://api.github.com/users/Ericson2314/followers",
      "following_url": "https://api.github.com/users/Ericson2314/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ericson2314/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ericson2314/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ericson2314/subscriptions",
      "organizations_url": "https://api.github.com/users/Ericson2314/orgs",
      "repos_url": "https://api.github.com/users/Ericson2314/repos",
      "events_url": "https://api.github.com/users/Ericson2314/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ericson2314/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-03T13:49:53Z",
    "updated_at": "2017-08-03T16:01:06Z",
    "body": "I've always been a fan of the type-based approach with associated ~~return~~ error types. I think it's easier to implement out the door, and I think if I client wants to mix and match falliability, they should explicitly unwrap for clarity. A sneaky missing `?` is *far* too easy to miss.\r\n\r\nThe existing methods would require an infallibile allocator, but the default would be the global one with an infallibile wrapper so no compat is broken.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/319974401/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/319975973",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-319975973",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 319975973,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxOTk3NTk3Mw==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-03T13:55:30Z",
    "updated_at": "2017-08-03T13:57:57Z",
    "body": "> I've always been a fan of the type-based approach with associated return types. I think it's easier to implement out the door\r\n\r\nThis is objectively incorrect, as it's literally impossible to implement today, even on nightly.\r\n\r\nEdit: to be clear, such a design is blocked on generic associated types, which *might* be implemented and on stable in late 2018.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/319975973/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320007254",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-320007254",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 320007254,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDAwNzI1NA==",
    "user": {
      "login": "Ericson2314",
      "id": 1055245,
      "node_id": "MDQ6VXNlcjEwNTUyNDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1055245?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ericson2314",
      "html_url": "https://github.com/Ericson2314",
      "followers_url": "https://api.github.com/users/Ericson2314/followers",
      "following_url": "https://api.github.com/users/Ericson2314/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ericson2314/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ericson2314/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ericson2314/subscriptions",
      "organizations_url": "https://api.github.com/users/Ericson2314/orgs",
      "repos_url": "https://api.github.com/users/Ericson2314/repos",
      "events_url": "https://api.github.com/users/Ericson2314/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ericson2314/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-03T15:40:05Z",
    "updated_at": "2017-08-03T15:40:31Z",
    "body": "@Gankro you mean something like https://github.com/rust-lang/rust/issues/29802#issuecomment-317114078 ?\r\n\r\nYeah I don't want to do that. I want to add an associated error type to the allocator trait, make it `!` in the infallibility wrapper, and then \"unwrap\" `Result<T, !>` in the infallible methods.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320007254/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320012308",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-320012308",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 320012308,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDAxMjMwOA==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-03T15:57:01Z",
    "updated_at": "2017-08-03T15:57:01Z",
    "body": "Oh ok, well that one just won't ever be implemented, so it's even less possible to implement today?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320012308/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320013929",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-320013929",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 320013929,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDAxMzkyOQ==",
    "user": {
      "login": "Ericson2314",
      "id": 1055245,
      "node_id": "MDQ6VXNlcjEwNTUyNDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1055245?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ericson2314",
      "html_url": "https://github.com/Ericson2314",
      "followers_url": "https://api.github.com/users/Ericson2314/followers",
      "following_url": "https://api.github.com/users/Ericson2314/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ericson2314/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ericson2314/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ericson2314/subscriptions",
      "organizations_url": "https://api.github.com/users/Ericson2314/orgs",
      "repos_url": "https://api.github.com/users/Ericson2314/repos",
      "events_url": "https://api.github.com/users/Ericson2314/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ericson2314/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-03T16:02:18Z",
    "updated_at": "2017-08-03T16:02:18Z",
    "body": "Huh? Lets not confused not wanting to do something with the impossibility of doing something. This is the main benefit of the associated error type, so it's good to consider together.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320013929/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320022736",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-320022736",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 320022736,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDAyMjczNg==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-03T16:34:27Z",
    "updated_at": "2017-08-03T16:38:37Z",
    "body": "Sorry do you mean having (on `Vec<T, Alloc>`):\r\n\r\n```rust\r\nfn push(&mut self) -> Result<(), Alloc::Err> {\r\n  if cap == len { self.alloc.reserve(1)? }\r\n  ...\r\n}\r\n```\r\n\r\nor\r\n\r\n```rust\r\nfn push(&mut self) {\r\n  if cap == len { self.alloc.reserve(1).unwrap() }\r\n  ...\r\n}\r\n\r\nfn try_push(&mut self) -> Result<(), Alloc::Err> {\r\n  if cap == len { self.alloc.reserve(1)? }\r\n  ...\r\n}\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320022736/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320038542",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-320038542",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 320038542,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDAzODU0Mg==",
    "user": {
      "login": "Ericson2314",
      "id": 1055245,
      "node_id": "MDQ6VXNlcjEwNTUyNDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1055245?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ericson2314",
      "html_url": "https://github.com/Ericson2314",
      "followers_url": "https://api.github.com/users/Ericson2314/followers",
      "following_url": "https://api.github.com/users/Ericson2314/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ericson2314/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ericson2314/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ericson2314/subscriptions",
      "organizations_url": "https://api.github.com/users/Ericson2314/orgs",
      "repos_url": "https://api.github.com/users/Ericson2314/repos",
      "events_url": "https://api.github.com/users/Ericson2314/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ericson2314/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-03T17:36:20Z",
    "updated_at": "2017-08-03T17:48:01Z",
    "body": "Ah, sorry if I was unclear before. Here's a more worked out example:\r\n\r\n```rust\r\n//!\r\n//! in alloc or collections, based on how that shakes out\r\n//!\r\n\r\nstruct PanicOom<T>(T);\r\n\r\nimpl<A: Alloc> Alloc for PanicOom<A> {\r\n   type Error = !;\r\n\r\n   // much repetition of\r\n   fn something(&mut self) {\r\n     self.something().or_else(|_| self.oom())\r\n   }\r\n}\r\n\r\n// In the future, define and use a:\r\n// trait InfalibleAlloc=Alloc<Error=!>;\r\n\r\n//!\r\n//! in collections\r\n//!\r\n\r\nimpl<T, A: Alloc> Vec<T, A> {\r\n  fn try_push(&mut self) -> Result<(), A::Err> {\r\n    if cap == len { self.alloc.reserve(1)? }\r\n    ...\r\n  }\r\n}\r\n\r\n// in the future, use `InfalibleAlloc` for more readable bound\r\nimpl<T, A: Alloc<Error=!>> Vec<T, A> {\r\n  fn push(&mut self) {\r\n    self.try_push().void_unwrap()\r\n  }\r\n}\r\n\r\n//!\r\n//! In std\r\n//!\r\n\r\n// stop gap until we have aliases with params with default args\r\ntype HashMap<K, V> = HashMap<K, V, PanicOom<GlobalAlloc>>;\r\n```\r\n\r\nThe idea being one either uses only `vec.push()` or `vec.try_push()`. If they mainly use `vec.try_push()`, they can add some manual `expect`, explaining why some critical allocation cannot fail. If they mainly uses `push`, it would be silly to out-of-the-blue handle an allocation failure when the code at large is not robust against it.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320038542/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320051921",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-320051921",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 320051921,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDA1MTkyMQ==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-03T18:27:53Z",
    "updated_at": "2017-08-03T18:28:17Z",
    "body": "This is an interesting idea, but it seems like a lot of work for a lint that none of the users I've interviewed actually seem interested in.\r\n\r\n@Ericson2314 do you intend to use this API? What for? (feel free to contact me on irc/email/twitter if you prefer)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320051921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320052997",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-320052997",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 320052997,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDA1Mjk5Nw==",
    "user": {
      "login": "lilith",
      "id": 107935,
      "node_id": "MDQ6VXNlcjEwNzkzNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/107935?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilith",
      "html_url": "https://github.com/lilith",
      "followers_url": "https://api.github.com/users/lilith/followers",
      "following_url": "https://api.github.com/users/lilith/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilith/subscriptions",
      "organizations_url": "https://api.github.com/users/lilith/orgs",
      "repos_url": "https://api.github.com/users/lilith/repos",
      "events_url": "https://api.github.com/users/lilith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilith/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-03T18:31:52Z",
    "updated_at": "2017-08-03T18:31:52Z",
    "body": "If we're talking about a lint for unhandled allocation failures\n(non-fallible allocations), I and many others are very interested. Codec\nlibraries (and most other libs) are usually required to gracefully handle\nany alloc failures.\n\nOn Aug 3, 2017 12:28 PM, \"Alexis Beingessner\" <notifications@github.com>\nwrote:\n\n> This is an interesting idea, but it seems like a lot of work for a lint\n> that none of the users I've interviewed actually seem interested in.\n>\n> @Ericson2314 <https://github.com/ericson2314> do you intend to use this\n> API? What for?\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/rust-lang/rust/issues/29802#issuecomment-320051921>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAGln17P3erDaE5NL_lOyO6Wg_Eqha-nks5sUhFWgaJpZM4GhKY0>\n> .\n>\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320052997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320055475",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-320055475",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 320055475,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDA1NTQ3NQ==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-03T18:41:14Z",
    "updated_at": "2017-08-03T18:41:14Z",
    "body": "Sorry to be clear: there is a strong desire for such a lint, but this is a lot of work for a weak version of it.\r\n\r\nI could have sworn I linked this thread here, but I don't see it, so here's where I discuss various options and what different users were asking for: https://internals.rust-lang.org/t/notes-interviews-on-fallible-collection-allocations/5619/8\r\n\r\n\r\nIn it I describe hooking into the availability lint system that is intended to solve similar problems like \"don't use floats\". This would be more robust in that it would also verify you don't call methods which e.g. create their own Vec and infallibly allocate.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320055475/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320056107",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-320056107",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 320056107,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDA1NjEwNw==",
    "user": {
      "login": "Ericson2314",
      "id": 1055245,
      "node_id": "MDQ6VXNlcjEwNTUyNDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1055245?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ericson2314",
      "html_url": "https://github.com/Ericson2314",
      "followers_url": "https://api.github.com/users/Ericson2314/followers",
      "following_url": "https://api.github.com/users/Ericson2314/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ericson2314/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ericson2314/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ericson2314/subscriptions",
      "organizations_url": "https://api.github.com/users/Ericson2314/orgs",
      "repos_url": "https://api.github.com/users/Ericson2314/repos",
      "events_url": "https://api.github.com/users/Ericson2314/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ericson2314/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-03T18:43:44Z",
    "updated_at": "2017-08-03T19:55:10Z",
    "body": "Well, I'm glad you find it interesting :). This is something I've murmored about for a while, but I guess I made the mistake of never actually writing it down.\r\n\r\nTruth by told, my day job is Haskell so I personally will not have the time to be a serious consumer of the allocation APIs any time soon. I hope to fine time to use it in my tiny toy OS, but that's it for now.\r\n\r\nMy general principle is while I'm sure serious industrial users can get away without any sort of lint, it's a nice thing to have that helps everyone not shoot themselves in the foot and, more importantly, help (no-std, for now) library authors not shoot each other in the foot, so the ecosystem can better trust itself.\r\n\r\n@aturon mentions the portability lint, but I think that's a rather heavyweight solution for dealing with a pure-Rust interface (as opposed to however allocation is implemented). In particular, no one has proposed a modular way just yet for using it with user-defined CFG tokens. Now, cargo features would be the natural solution, and I suppose we could add a `\"oom-ignore\"` default feature for alloc/collections, ~~but I rather put the feature cfg just once on `OomPanic` than *every single* faux-infalliable method. That seems more maintainable.~~ Ah oops. We'd need per-method CFGs either way, but it would be easy to forget one without this, whereas the cfg on `OomPanic` will *force* us to not forget to also cfg the method (in conjunction with the portability lint).\r\n\r\n[**edited** a bunch, a hard habit to kick.]",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320056107/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320063013",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-320063013",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 320063013,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDA2MzAxMw==",
    "user": {
      "login": "Ericson2314",
      "id": 1055245,
      "node_id": "MDQ6VXNlcjEwNTUyNDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1055245?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ericson2314",
      "html_url": "https://github.com/Ericson2314",
      "followers_url": "https://api.github.com/users/Ericson2314/followers",
      "following_url": "https://api.github.com/users/Ericson2314/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ericson2314/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ericson2314/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ericson2314/subscriptions",
      "organizations_url": "https://api.github.com/users/Ericson2314/orgs",
      "repos_url": "https://api.github.com/users/Ericson2314/repos",
      "events_url": "https://api.github.com/users/Ericson2314/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ericson2314/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-03T19:11:50Z",
    "updated_at": "2017-08-03T19:16:53Z",
    "body": "@Gankro Ah your latest comment appeared as I was writing this. Nor had I read the thread. Glad to here we all do want a lint. In light of that I think my point about making the lint easier to maintain is perhaps the best.\r\n\r\nRelatedly, for refactoring existing Rust code, e.g. Servo, I'd want\r\n 1. A transition feature so that the faux-infalliable methods are defined for all allocators with `unwrap` instead of `void_unwrap`.\r\n 2. A tool to convert all `.foo()` to `.try_foo().unwrap()`, which would then making auditing far easier--grep for `unwrap` or `try.*unwrap`.\r\n 3. Run that and disable the feature.\r\n\r\nAnd again in terms of expediency, while the portability lint is not yet implemented, everything I mention an be done today. A road map could be\r\n1. Immediately add associated type, `PanicOom`, and convert all collections to use infallible allocators. No clever thinking about algorithms is needed.\r\n2. Collection-by-collection, see if algorithms can be tweaked to support the fallible case---easier for flat ones like `Vec`, a good deal harder for tree-based ones (if we don't consume the collection lest it gets in an inconsistent state). \r\n4. Whenever the portability lint using features is ready to go, the cargo features can be in place to support them.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320063013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320064921",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-320064921",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 320064921,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDA2NDkyMQ==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-03T19:19:53Z",
    "updated_at": "2017-08-03T19:19:53Z",
    "body": "To be clear, we identified that the lint was *nice to have* but in no way a blocker for our users. As such we planned to punt on it and solve it more robustly with actual lints. In the mean time we could provide the methods, and users could build wrapper types to hide infallibility *if they chose want*.\r\n\r\nOn the topic of different collections, only BTreeMap would run into issues with a naive translation. It shouldn't be too difficult to pre-allocate the nodes before starting the mutations.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320064921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320073282",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-320073282",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 320073282,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDA3MzI4Mg==",
    "user": {
      "login": "Ericson2314",
      "id": 1055245,
      "node_id": "MDQ6VXNlcjEwNTUyNDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1055245?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ericson2314",
      "html_url": "https://github.com/Ericson2314",
      "followers_url": "https://api.github.com/users/Ericson2314/followers",
      "following_url": "https://api.github.com/users/Ericson2314/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ericson2314/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ericson2314/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ericson2314/subscriptions",
      "organizations_url": "https://api.github.com/users/Ericson2314/orgs",
      "repos_url": "https://api.github.com/users/Ericson2314/repos",
      "events_url": "https://api.github.com/users/Ericson2314/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ericson2314/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-03T19:55:46Z",
    "updated_at": "2017-08-03T19:57:12Z",
    "body": "@Gankro I think expecting users to write their own wrapper types is futile because the biggest benefit is trust between libraries, but I can't see any wrapper types outside of the libcollections becoming as standard.\r\n\r\nI also forgot to mention how error-type polymorphism allows one to convert code bases function by function. \r\n\r\nIs there anything you dislike about mine, besides it being a lot of work in your eyes?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/320073282/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/323250975",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-323250975",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 323250975,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzI1MDk3NQ==",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-08-18T03:37:19Z",
    "updated_at": "2017-08-18T03:37:19Z",
    "body": "RFC: https://github.com/rust-lang/rfcs/pull/2116",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/323250975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/392598614",
    "html_url": "https://github.com/rust-lang/rust/issues/29802#issuecomment-392598614",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29802",
    "id": 392598614,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjU5ODYxNA==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-05-28T20:28:06Z",
    "updated_at": "2018-05-28T20:28:06Z",
    "body": "Since the RFC was merged, and I believe future work in this area will require extensive discussion (either on internals or in RFC(s)) I'm closing this issue.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/392598614/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
