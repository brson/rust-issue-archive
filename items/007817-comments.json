[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25149317",
    "html_url": "https://github.com/rust-lang/rust/issues/7817#issuecomment-25149317",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7817",
    "id": 25149317,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MTQ5MzE3",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-26T07:48:29Z",
    "updated_at": "2013-09-26T07:51:02Z",
    "body": "Visiting for triage, email from 2013 sep 16.\n\n@edre, did you mean to say \" _changing_ result in the middle of a stream\" ?  Just clarifying.\n1. We think the team decided in a recent meeting that we would not be supporting crypto-libraries in-house.  (But then again, just because `Digest` lives in the `crypto` directory does not mean it is crypto-library, I guess.  If that's the case, maybe this should move elsewhere.  Oh wait, currently, the crypto directory contains nothing _but_ digest libraries?  wha?)\n2. Its not clear to me that the documentation and signature for result implies what you say (that the output won't change in response to supplying more data).  What is leading you to that conclusion?  Is it the sentence \"This method may be called multiple times\"?  Also, would it be better if the text also said \"See also, the `reset` method\", since that imposes a more significant constraint on users of this API ?\n3. I'm not sure that changing the signature of `result` in the way you describe would provide any guarantee at all about how this function is used.  The non-mutable borrow `&self` would only last for the dynamic extent of that one invocation of `result`, it would not, AFAICT, stop the user from feeding in more data between two calls to `result`.  (Full disclosure: I have not tested this claim yet.)\n\nSo, based on the issues above, my instinct is to close this ticket (and perhaps open another ticket for \"migrate the crypto directory to a separate repository from the main rust repo).  But maybe I just need enlightenment.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25149317/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25149731",
    "html_url": "https://github.com/rust-lang/rust/issues/7817#issuecomment-25149731",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7817",
    "id": 25149731,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MTQ5NzMx",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-26T07:56:46Z",
    "updated_at": "2013-09-26T07:56:46Z",
    "body": "Furthermore, if one has an implementation of `Digest` that caches the result internally, it wouldn't be sound for the `self` argument to change to `&self`; it would need to be `&mut self` since its updating internal state (the cache), right?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25149731/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25150167",
    "html_url": "https://github.com/rust-lang/rust/issues/7817#issuecomment-25150167",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7817",
    "id": 25150167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MTUwMTY3",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-26T08:05:28Z",
    "updated_at": "2013-09-26T08:05:28Z",
    "body": "Some quick experimentation confirms my suspicion: The `result` method in all of the implementations does modify internal state (usually a `finished` flag of some sort, to dynamically enforce the protocol that one always invokes `reset` in between calls `result` and `input`).\n\nI'm closing this as not-a-bug.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25150167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25179729",
    "html_url": "https://github.com/rust-lang/rust/issues/7817#issuecomment-25179729",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7817",
    "id": 25179729,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MTc5NzI5",
    "user": {
      "login": "edre",
      "id": 1291499,
      "node_id": "MDQ6VXNlcjEyOTE0OTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1291499?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/edre",
      "html_url": "https://github.com/edre",
      "followers_url": "https://api.github.com/users/edre/followers",
      "following_url": "https://api.github.com/users/edre/following{/other_user}",
      "gists_url": "https://api.github.com/users/edre/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edre/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edre/subscriptions",
      "organizations_url": "https://api.github.com/users/edre/orgs",
      "repos_url": "https://api.github.com/users/edre/repos",
      "events_url": "https://api.github.com/users/edre/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edre/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-26T15:58:05Z",
    "updated_at": "2013-09-26T15:58:05Z",
    "body": "Other hash libraries I've used let you compute the final hash of the data so far, while still letting you append more data for a later hash, as an optimization to not process the common prefix twice. Example:\n\n```\nhash.input(\"aaa\");\nhash.result(&a); // a gets hash of \"aaa\"\nhash.input(\"bbb\");\nhash.result(&b); // b gets hash of \"aaabbb\"\n```\n\nThe documentation on Digest implied to me the above semantics, that calling result would guarantee not to change the internal hash state, so that more input could be safely appended. The current implementations don't do this, but changing the signature to non-mutable would force them to.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25179729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25180283",
    "html_url": "https://github.com/rust-lang/rust/issues/7817#issuecomment-25180283",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7817",
    "id": 25180283,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MTgwMjgz",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-26T16:04:30Z",
    "updated_at": "2013-09-26T16:04:30Z",
    "body": "@edre I still do not understand how such a change to the `self` parameter would enforce the invariant you describe.\nMy recommendation is that you make a concrete prototype of what you are proposing, so that we can have a common reference point.  (Because obviously we cannot just make the change to the existing Digest implementations as they stand.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25180283/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
