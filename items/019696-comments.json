[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66453238",
    "html_url": "https://github.com/rust-lang/rust/issues/19696#issuecomment-66453238",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19696",
    "id": 66453238,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDUzMjM4",
    "user": {
      "login": "mahkoh",
      "id": 1882250,
      "node_id": "MDQ6VXNlcjE4ODIyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1882250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahkoh",
      "html_url": "https://github.com/mahkoh",
      "followers_url": "https://api.github.com/users/mahkoh/followers",
      "following_url": "https://api.github.com/users/mahkoh/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahkoh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahkoh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahkoh/subscriptions",
      "organizations_url": "https://api.github.com/users/mahkoh/orgs",
      "repos_url": "https://api.github.com/users/mahkoh/repos",
      "events_url": "https://api.github.com/users/mahkoh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahkoh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-10T13:48:06Z",
    "updated_at": "2014-12-10T13:48:06Z",
    "body": "> which gives the same result, as the while only ever loops once\n\nThe compiler doesn't know this. `while v[i] > 0 { v[i] -= 1; }` is equivalent to `if v[i] > 0 { v[i] = 0; }` which is easier to optimize than `if v[i] > 0 { v[i] -= 1; }` apparently.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66453238/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66454560",
    "html_url": "https://github.com/rust-lang/rust/issues/19696#issuecomment-66454560",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19696",
    "id": 66454560,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDU0NTYw",
    "user": {
      "login": "paholg",
      "id": 4908217,
      "node_id": "MDQ6VXNlcjQ5MDgyMTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4908217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paholg",
      "html_url": "https://github.com/paholg",
      "followers_url": "https://api.github.com/users/paholg/followers",
      "following_url": "https://api.github.com/users/paholg/following{/other_user}",
      "gists_url": "https://api.github.com/users/paholg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paholg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paholg/subscriptions",
      "organizations_url": "https://api.github.com/users/paholg/orgs",
      "repos_url": "https://api.github.com/users/paholg/repos",
      "events_url": "https://api.github.com/users/paholg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paholg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-10T13:58:37Z",
    "updated_at": "2014-12-10T13:58:37Z",
    "body": "If I put `if v[i] > 0 { v[i] = 0; }` into the code, then Rust seems to optimize the loop out entirely (it runs virtually instantly), so there must be some difference.\n\nAlso, there is still a difference between the `if` and `while` when `v[i]` is a float of unknown value (in the code that I linked) and so the same substitution could not be made.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66454560/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66459139",
    "html_url": "https://github.com/rust-lang/rust/issues/19696#issuecomment-66459139",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19696",
    "id": 66459139,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDU5MTM5",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-10T14:32:18Z",
    "updated_at": "2014-12-10T14:32:18Z",
    "body": "paholg: for benchmarks it is advised to use http://doc.rust-lang.org/test/fn.black_box.html as you don't want to optimize out the benchmark loop in any way.\nif you add a call to `test::black_box(v)` at the end of main, all the difference between while and if is (on x86) a change from\n\n``` asm\n    movq    $0, 24(%rsp)\n    xorl    %esi, %esi\n```\n\nto \n\n``` asm\n    decq    %rsi\n    movq    %rsi, 24(%rsp)\n```\n\nwhich does not really look like it takes longer, but i have no clue what the change signifies (a decq and an xorl should take around the same time)\n\ntechnically you should add another blackbox around the inner for loop\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66459139/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66459592",
    "html_url": "https://github.com/rust-lang/rust/issues/19696#issuecomment-66459592",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19696",
    "id": 66459592,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDU5NTky",
    "user": {
      "login": "mahkoh",
      "id": 1882250,
      "node_id": "MDQ6VXNlcjE4ODIyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1882250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahkoh",
      "html_url": "https://github.com/mahkoh",
      "followers_url": "https://api.github.com/users/mahkoh/followers",
      "following_url": "https://api.github.com/users/mahkoh/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahkoh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahkoh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahkoh/subscriptions",
      "organizations_url": "https://api.github.com/users/mahkoh/orgs",
      "repos_url": "https://api.github.com/users/mahkoh/repos",
      "events_url": "https://api.github.com/users/mahkoh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahkoh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-10T14:35:27Z",
    "updated_at": "2014-12-10T14:35:27Z",
    "body": "Using black_box(v) will create completely different code. Better look at this:\n\n``` rust\nextern crate time;\nextern crate test;\n\n#[inline(never)]\npub fn f() {\n    let mut v = [1i, 1, 1];\n    for _ in range(0u, 10000000000) {\n        for i in range(0u, 3) {\n            while v[i] > 0 { v[i] -= 1; }\n        }\n    }\n    test::black_box(v[0]);\n    test::black_box(v[1]);\n    test::black_box(v[2]);\n}\n\n#[inline(never)]\npub fn g() {\n    let mut v = [1i, 1, 1];\n    for _ in range(0u, 10000000000) {\n        for i in range(0u, 3) {\n            if v[i] > 0 { v[i] -= 1; }\n        }\n    }\n    test::black_box(v[0]);\n    test::black_box(v[1]);\n    test::black_box(v[2]);\n}\n\n#[inline(never)]\npub fn h() {\n    let mut v = [1i, 1, 1];\n    for _ in range(0u, 10000000000) {\n        for i in range(0u, 3) {\n            if v[i] > 0 { v[i] = 0; }\n        }\n    }\n    test::black_box(v[0]);\n    test::black_box(v[1]);\n    test::black_box(v[2]);\n}\n\nfn main() {\n    for &f in [f, g, h].iter() {\n        let start = time::precise_time_s();\n        f();\n        println!(\"{}\", time::precise_time_s() - start);\n    }\n}\n\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66459592/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66460384",
    "html_url": "https://github.com/rust-lang/rust/issues/19696#issuecomment-66460384",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19696",
    "id": 66460384,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDYwMzg0",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-10T14:40:45Z",
    "updated_at": "2014-12-10T14:40:45Z",
    "body": "nope, exactly the same asm as black_box(v)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66460384/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66460454",
    "html_url": "https://github.com/rust-lang/rust/issues/19696#issuecomment-66460454",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19696",
    "id": 66460454,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDYwNDU0",
    "user": {
      "login": "mahkoh",
      "id": 1882250,
      "node_id": "MDQ6VXNlcjE4ODIyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1882250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahkoh",
      "html_url": "https://github.com/mahkoh",
      "followers_url": "https://api.github.com/users/mahkoh/followers",
      "following_url": "https://api.github.com/users/mahkoh/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahkoh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahkoh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahkoh/subscriptions",
      "organizations_url": "https://api.github.com/users/mahkoh/orgs",
      "repos_url": "https://api.github.com/users/mahkoh/repos",
      "events_url": "https://api.github.com/users/mahkoh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahkoh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-10T14:41:13Z",
    "updated_at": "2014-12-10T14:41:13Z",
    "body": "Then you must be using a different compiler.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66460454/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66460560",
    "html_url": "https://github.com/rust-lang/rust/issues/19696#issuecomment-66460560",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19696",
    "id": 66460560,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDYwNTYw",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-10T14:42:03Z",
    "updated_at": "2014-12-10T14:42:03Z",
    "body": "playpen: http://is.gd/JGWXpv\n\njust name the function you want asm for \"main\" the others are optimized out\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66460560/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66460673",
    "html_url": "https://github.com/rust-lang/rust/issues/19696#issuecomment-66460673",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19696",
    "id": 66460673,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDYwNjcz",
    "user": {
      "login": "mahkoh",
      "id": 1882250,
      "node_id": "MDQ6VXNlcjE4ODIyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1882250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahkoh",
      "html_url": "https://github.com/mahkoh",
      "followers_url": "https://api.github.com/users/mahkoh/followers",
      "following_url": "https://api.github.com/users/mahkoh/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahkoh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahkoh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahkoh/subscriptions",
      "organizations_url": "https://api.github.com/users/mahkoh/orgs",
      "repos_url": "https://api.github.com/users/mahkoh/repos",
      "events_url": "https://api.github.com/users/mahkoh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahkoh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-10T14:42:46Z",
    "updated_at": "2014-12-10T14:42:46Z",
    "body": "So you didn't even use the code I posted. That explains it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66460673/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66461167",
    "html_url": "https://github.com/rust-lang/rust/issues/19696#issuecomment-66461167",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19696",
    "id": 66461167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDYxMTY3",
    "user": {
      "login": "mahkoh",
      "id": 1882250,
      "node_id": "MDQ6VXNlcjE4ODIyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1882250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahkoh",
      "html_url": "https://github.com/mahkoh",
      "followers_url": "https://api.github.com/users/mahkoh/followers",
      "following_url": "https://api.github.com/users/mahkoh/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahkoh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahkoh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahkoh/subscriptions",
      "organizations_url": "https://api.github.com/users/mahkoh/orgs",
      "repos_url": "https://api.github.com/users/mahkoh/repos",
      "events_url": "https://api.github.com/users/mahkoh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahkoh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-10T14:45:58Z",
    "updated_at": "2014-12-10T14:46:32Z",
    "body": "\u0001Either way, even with the code you posted in playpen the difference is much bigger than what you posted above.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66461167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66461456",
    "html_url": "https://github.com/rust-lang/rust/issues/19696#issuecomment-66461456",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19696",
    "id": 66461456,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDYxNDU2",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-10T14:47:58Z",
    "updated_at": "2014-12-10T14:47:58Z",
    "body": "ah sorry, now i actually get a difference in asm\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66461456/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66462824",
    "html_url": "https://github.com/rust-lang/rust/issues/19696#issuecomment-66462824",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19696",
    "id": 66462824,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDYyODI0",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-10T14:56:35Z",
    "updated_at": "2014-12-10T14:56:35Z",
    "body": "now the if variant is faster.\nhttp://is.gd/YKNQwL\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66462824/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66486289",
    "html_url": "https://github.com/rust-lang/rust/issues/19696#issuecomment-66486289",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19696",
    "id": 66486289,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDg2Mjg5",
    "user": {
      "login": "Thiez",
      "id": 204550,
      "node_id": "MDQ6VXNlcjIwNDU1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/204550?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Thiez",
      "html_url": "https://github.com/Thiez",
      "followers_url": "https://api.github.com/users/Thiez/followers",
      "following_url": "https://api.github.com/users/Thiez/following{/other_user}",
      "gists_url": "https://api.github.com/users/Thiez/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Thiez/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Thiez/subscriptions",
      "organizations_url": "https://api.github.com/users/Thiez/orgs",
      "repos_url": "https://api.github.com/users/Thiez/repos",
      "events_url": "https://api.github.com/users/Thiez/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Thiez/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-10T17:10:11Z",
    "updated_at": "2014-12-10T17:26:18Z",
    "body": "The if variant is slower with -O3.\n\n@oli-obk it looks like LLVM recognizes `f` and `h` as the same function.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66486289/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66591769",
    "html_url": "https://github.com/rust-lang/rust/issues/19696#issuecomment-66591769",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19696",
    "id": 66591769,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NTkxNzY5",
    "user": {
      "login": "oli-obk",
      "id": 332036,
      "node_id": "MDQ6VXNlcjMzMjAzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oli-obk",
      "html_url": "https://github.com/oli-obk",
      "followers_url": "https://api.github.com/users/oli-obk/followers",
      "following_url": "https://api.github.com/users/oli-obk/following{/other_user}",
      "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions",
      "organizations_url": "https://api.github.com/users/oli-obk/orgs",
      "repos_url": "https://api.github.com/users/oli-obk/repos",
      "events_url": "https://api.github.com/users/oli-obk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oli-obk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-11T09:17:47Z",
    "updated_at": "2014-12-11T09:17:47Z",
    "body": "@Thiez not in the playpen link i posted last. in that example -O2 and -O3 are the same speed (in playpen at least, i'm sure this could be hardware dependent).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66591769/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70635165",
    "html_url": "https://github.com/rust-lang/rust/issues/19696#issuecomment-70635165",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19696",
    "id": 70635165,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjM1MTY1",
    "user": {
      "login": "Aatch",
      "id": 342416,
      "node_id": "MDQ6VXNlcjM0MjQxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Aatch",
      "html_url": "https://github.com/Aatch",
      "followers_url": "https://api.github.com/users/Aatch/followers",
      "following_url": "https://api.github.com/users/Aatch/following{/other_user}",
      "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions",
      "organizations_url": "https://api.github.com/users/Aatch/orgs",
      "repos_url": "https://api.github.com/users/Aatch/repos",
      "events_url": "https://api.github.com/users/Aatch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Aatch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-20T10:42:58Z",
    "updated_at": "2015-01-20T10:43:12Z",
    "body": "This isn't really a Rust issue, due the fact that the `while` variant give LLVM more information than the `if` variant.\n\nBasically, it's due to LLVM knowing more about the values of various bits of memory at different points in the program. Many optimisations are based on local reasoning.\n\n``` rust\n// Faster one\npub fn test_1(upper: usize) -> [isize; 3] {\n    let mut v = [1is, 1, 1];\n    for _ in (0us..upper) {\n        for i in 0us..3 {\n            while v[i] > 0 { v[i] -= 1; }\n            // In order to get here, the value of v[i] *must* be <= 0,\n            // Therefore we replace the above loop with\n            // if v[i] > 0 { v[i] = 0; )\n        }\n    }\n\n    v\n}\n\npub fn test_2(upper: usize) -> [isize; 3] {\n    let mut v = [1is, 1, 1];\n    for _ in (0us..upper) {\n        for i in 0us..3 {\n            if v[i] > 0 { v[i] -= 1; }\n            // The value isn't necessarily 0, just smaller\n        }\n    }\n\n    v\n}\n```\n\nLLVM isn't magic, and will always miss some optimisations. As far as I can tell, we're not generating anything that makes the code worse. While this case certainly demonstrates a case where LLVM could do better, I don't think this a Rust issue.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70635165/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
