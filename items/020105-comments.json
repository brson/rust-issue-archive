[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67772798",
    "html_url": "https://github.com/rust-lang/rust/issues/20105#issuecomment-67772798",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20105",
    "id": 67772798,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NzcyNzk4",
    "user": {
      "login": "drbawb",
      "id": 235438,
      "node_id": "MDQ6VXNlcjIzNTQzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/235438?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/drbawb",
      "html_url": "https://github.com/drbawb",
      "followers_url": "https://api.github.com/users/drbawb/followers",
      "following_url": "https://api.github.com/users/drbawb/following{/other_user}",
      "gists_url": "https://api.github.com/users/drbawb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/drbawb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/drbawb/subscriptions",
      "organizations_url": "https://api.github.com/users/drbawb/orgs",
      "repos_url": "https://api.github.com/users/drbawb/repos",
      "events_url": "https://api.github.com/users/drbawb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/drbawb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-21T14:57:00Z",
    "updated_at": "2014-12-21T14:57:00Z",
    "body": "Bumping, I have a slightly longer example on the [playpen](http://is.gd/46Dv8w).\nI've got many long running tasks which simply panic in exceptional circumstances.\nIs it expected behavior that we can't use divergent functions in threads?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67772798/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67775315",
    "html_url": "https://github.com/rust-lang/rust/issues/20105#issuecomment-67775315",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20105",
    "id": 67775315,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3Nzc1MzE1",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-21T16:19:29Z",
    "updated_at": "2014-12-21T16:19:29Z",
    "body": "Annotating the closure to return the divergent type [causes an ICE](https://github.com/rust-lang/rust/blob/1c2df5cc3/src/librustc/middle/ty.rs#L910), as well:\n\n``` rust\nfn main() {\n    std::task::spawn(move || -> ! { panic!(\"A\") });\n}\n```\n\n```\nthread 'rustc' panicked at 'internal error: entered unreachable code', /Users/shep/Projects/rust/src/librustc/middle/ty.rs:910\n\nstack backtrace:\n   1:        0x10aaf9868 - sys::backtrace::write::h9a580fabc37cb8adktt\n   2:        0x10ab1a3c3 - failure::on_fail::h468f41665a3fd1e84Iz\n   3:        0x10aa85aaa - rt::unwind::begin_unwind_inner::h11db2db05da0fb99vqz\n   4:        0x107dc853c - rt::unwind::begin_unwind::h13685703016598346556\n   5:        0x1081b9e09 - middle::traits::select::SelectionContext<$u{27}cx$C$$u{20}$u{27}tcx$GT$::confirm_candidate::h2e81d0fae36ca86ar9Z\n   6:        0x1081ca050 - middle::traits::select::SelectionContext<$u{27}cx$C$$u{20}$u{27}tcx$GT$::winnow_candidate::unboxed_closure.88573\n   7:        0x1081bcaae - middle::traits::select::SelectionContext<$u{27}cx$C$$u{20}$u{27}tcx$GT$::winnow_candidate::hce2b651d441f597djHZ\n   8:        0x1081c4987 - middle::traits::select::SelectionContext<$u{27}cx$C$$u{20}$u{27}tcx$GT$::candidate_from_obligation_no_cache::hcd23f9522bf5cd3aJaZ\n   9:        0x1081b49f0 - middle::traits::select::SelectionContext<$u{27}cx$C$$u{20}$u{27}tcx$GT$::candidate_from_obligation::h604b896a505825bei2Y\n  10:        0x1081b11f3 - middle::traits::select::SelectionContext<$u{27}cx$C$$u{20}$u{27}tcx$GT$::select::h983db20fb6e85e80oHY\n  11:        0x1081aae0b - middle::traits::fulfill::FulfillmentContext<$u{27}tcx$GT$::select::hb8d69b6e6df55003o6X\n  12:        0x108029c58 - middle::traits::fulfill::FulfillmentContext<$u{27}tcx$GT$::select_all_or_error::h8797a47d7fcfcb8e92X\n  13:        0x107546ba6 - check::vtable::select_all_fcx_obligations_or_error::h589d8c7447f73e49zfb\n  14:        0x10760dab2 - check::check_bare_fn::hccca5d8239b94ddfPck\n  15:        0x107605ae3 - check::check_item::h4573d3f167765844fwk\n  16:        0x107845530 - check_crate::unboxed_closure.43034\n  17:        0x107840cdd - check_crate::h0e6b79165f7057d1GZy\n  18:        0x10735cb6e - driver::phase_3_run_analysis_passes::h3f041cda7348a5efEta\n  19:        0x10733fbae - driver::compile_input::h94fd7f9d3c75da33rba\n  20:        0x1074b71d5 - run_compiler::hac67bdfebe9cef0bAYb\n  21:        0x1074b49bf - thunk::F.Invoke<A,$u{20}R$GT$::invoke::h13992406362119359971\n  22:        0x1074b2f59 - rt::unwind::try::try_fn::h6067637045518264477\n  23:        0x10ab83149 - rust_try_inner\n  24:        0x10ab83136 - rust_try\n  25:        0x1074b3657 - thunk::F.Invoke<A,$u{20}R$GT$::invoke::h13712900278951656686\n  26:        0x10ab09884 - sys::thread::thread_start::h8539aa31b7c6ba86Pow\n  27:     0x7fff93e6e2fc - _pthread_body\n  28:     0x7fff93e6e279 - _pthread_body\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67775315/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67776985",
    "html_url": "https://github.com/rust-lang/rust/issues/20105#issuecomment-67776985",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20105",
    "id": 67776985,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3Nzc2OTg1",
    "user": {
      "login": "drbawb",
      "id": 235438,
      "node_id": "MDQ6VXNlcjIzNTQzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/235438?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/drbawb",
      "html_url": "https://github.com/drbawb",
      "followers_url": "https://api.github.com/users/drbawb/followers",
      "following_url": "https://api.github.com/users/drbawb/following{/other_user}",
      "gists_url": "https://api.github.com/users/drbawb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/drbawb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/drbawb/subscriptions",
      "organizations_url": "https://api.github.com/users/drbawb/orgs",
      "repos_url": "https://api.github.com/users/drbawb/repos",
      "events_url": "https://api.github.com/users/drbawb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/drbawb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-21T17:11:43Z",
    "updated_at": "2014-12-21T17:11:43Z",
    "body": "Oh; adding the return-type to the closure (e.g: `move || -> ()`) does seem to work though.\nhttp://is.gd/mCdmJl\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67776985/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67941924",
    "html_url": "https://github.com/rust-lang/rust/issues/20105#issuecomment-67941924",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20105",
    "id": 67941924,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3OTQxOTI0",
    "user": {
      "login": "nodakai",
      "id": 90726,
      "node_id": "MDQ6VXNlcjkwNzI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/90726?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nodakai",
      "html_url": "https://github.com/nodakai",
      "followers_url": "https://api.github.com/users/nodakai/followers",
      "following_url": "https://api.github.com/users/nodakai/following{/other_user}",
      "gists_url": "https://api.github.com/users/nodakai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nodakai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nodakai/subscriptions",
      "organizations_url": "https://api.github.com/users/nodakai/orgs",
      "repos_url": "https://api.github.com/users/nodakai/repos",
      "events_url": "https://api.github.com/users/nodakai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nodakai/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-23T11:19:47Z",
    "updated_at": "2014-12-23T11:19:47Z",
    "body": "OK, I didn't think about adding a return type to the closure due to my misunderstanding of the bottom type in Rust.  The trick of adding `-> ()` seems to be enough if we just want to use `Thread::spawn()` with diverging closures.\n\nI'll reuse this issue for the above ICE.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67941924/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67945299",
    "html_url": "https://github.com/rust-lang/rust/issues/20105#issuecomment-67945299",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20105",
    "id": 67945299,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3OTQ1Mjk5",
    "user": {
      "login": "nodakai",
      "id": 90726,
      "node_id": "MDQ6VXNlcjkwNzI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/90726?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nodakai",
      "html_url": "https://github.com/nodakai",
      "followers_url": "https://api.github.com/users/nodakai/followers",
      "following_url": "https://api.github.com/users/nodakai/following{/other_user}",
      "gists_url": "https://api.github.com/users/nodakai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nodakai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nodakai/subscriptions",
      "organizations_url": "https://api.github.com/users/nodakai/orgs",
      "repos_url": "https://api.github.com/users/nodakai/repos",
      "events_url": "https://api.github.com/users/nodakai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nodakai/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-23T12:12:43Z",
    "updated_at": "2014-12-23T12:56:33Z",
    "body": "Minimal case:\n\n``` rust\nfn f<F, R>(_: F) where F: Fn<(), R> {\n}\n\nfn main() {\n    f(|| -> ! ());\n}\n```\n\nConfirmed with the Dec 20 snapshot (8443b09e3 2014-12-20 05:52:18 +0000)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67945299/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/94517148",
    "html_url": "https://github.com/rust-lang/rust/issues/20105#issuecomment-94517148",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20105",
    "id": 94517148,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk0NTE3MTQ4",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-20T17:30:46Z",
    "updated_at": "2015-04-20T17:30:46Z",
    "body": "``` rust\nfn f<F, R>(_: F) where F: Fn() -> R {\n}\n\nfn main() {\n    f(|| -> ! { () });\n}\n```\n\nworks fine now. E-needstest.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/94517148/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
