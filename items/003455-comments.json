[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8444440",
    "html_url": "https://github.com/rust-lang/rust/issues/3455#issuecomment-8444440",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3455",
    "id": 8444440,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDQ0NDA=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-09-11T01:39:53Z",
    "updated_at": "2012-09-11T01:39:53Z",
    "body": "I have always expected to use uv for sleeping. The current interface exposes the IoTask, which sleepers will almost never care about.\n\nThe downside is that, at least as currently implemented, there is a large amount of overhead (it may even currently involve task spawning). I would be curious to hear proposals for implementing sleep more efficiently.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8444440/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8444866",
    "html_url": "https://github.com/rust-lang/rust/issues/3455#issuecomment-8444866",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3455",
    "id": 8444866,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDQ4NjY=",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-09-11T02:07:05Z",
    "updated_at": "2012-09-11T02:07:05Z",
    "body": "in kernels, `sleep` tends to be implemented with the guarantee that the task gets scheduled \"some hopefully short time after\" the requested time has passed.\n\nthis means that a simple/naive implementation would simply deschedule the task, and the sched loop could simply check a timer each `run_single_turn` to wake up tasks (and instead of doing pthread_cond_wait when it's out of jobs, it would itself sleep if it had a sleeping task). this would work just fine when a system is otherwise idle, and be pretty simple to implement too.\n\nin the presence of compiler-inserted yield checks (#524) I believe this would have no downside. in their absence, though, this means that a sleeping thread might \"starve\" if the other tasks on its thread do lots of computation between yield points... and it might be more useful to make the list of sleeping tasks be scheduler-global, so any sched_loop could pick it up (probably shouldn't implement this without also properly implementing work-stealing - #3095).\n\non the whole, though, i don't think that using #3367's approach (spawning a task into a single-threaded scheduler and then directly invoking sleep) would be that bad (especially for now, especially considering the relative implementation ease). if we are already invoking `sleep`, is the extra cost of spawning a new task really too much?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8444866/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8446456",
    "html_url": "https://github.com/rust-lang/rust/issues/3455#issuecomment-8446456",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3455",
    "id": 8446456,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDY0NTY=",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-09-11T04:02:27Z",
    "updated_at": "2012-09-11T04:02:27Z",
    "body": "I guess maybe one concern with the single-threaded new-scheduler-spawn method is that it allocates memory.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8446456/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8514024",
    "html_url": "https://github.com/rust-lang/rust/issues/3455#issuecomment-8514024",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3455",
    "id": 8514024,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MTQwMjQ=",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-09-12T23:43:05Z",
    "updated_at": "2012-09-12T23:43:05Z",
    "body": "We have two mechanisms: one that blocks the thread (`libc`) and one that doesn't (`uv`). We don't need a third. If `uv` isn't fast enough, that's an optimization problem, not a need to add a third (unless measurement shows we absolutely can't make it fast enough, for some reason).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/8514024/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
