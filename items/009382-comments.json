[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25598392",
    "html_url": "https://github.com/rust-lang/rust/issues/9382#issuecomment-25598392",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9382",
    "id": 25598392,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTk4Mzky",
    "user": {
      "login": "MicahChalmer",
      "id": 698400,
      "node_id": "MDQ6VXNlcjY5ODQwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/698400?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MicahChalmer",
      "html_url": "https://github.com/MicahChalmer",
      "followers_url": "https://api.github.com/users/MicahChalmer/followers",
      "following_url": "https://api.github.com/users/MicahChalmer/following{/other_user}",
      "gists_url": "https://api.github.com/users/MicahChalmer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MicahChalmer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MicahChalmer/subscriptions",
      "organizations_url": "https://api.github.com/users/MicahChalmer/orgs",
      "repos_url": "https://api.github.com/users/MicahChalmer/repos",
      "events_url": "https://api.github.com/users/MicahChalmer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MicahChalmer/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-03T05:14:46Z",
    "updated_at": "2013-10-03T05:14:46Z",
    "body": "I'm not sure if this is the same underlying bug or not, but you can get the same \"Calling a function with a bad signature\" compiler crash with this code:\n\n``` rust\nstruct A<'self> {\n    a: &'self [~int],\n    b: ~[int]\n}\n\nfn main() {\n    let _a = A{\n        a:[],\n        b:~[]\n    };\n}\n```\n\nIf you remove either of the two fields it works fine.  If you move the value of _a.b into its own local variable it works fine, but moving just the value of _a.a into its own local var does not help.  The types of the array elements (`int` here) seem to be irrelevant (same type or different types.)  It also does not make a difference whether there are any elements in the array values.\n\nThis bug is easy to trigger when trying to create a `std::rt::io::process::ProcessConfig`.  To create a `ProcessConfig` you have to move both the `args` and `io` values into their own local vars to avoid hitting the bug.  After encountering it in `ProcessConfig`, this was the simplest struct I could find that triggered the same ICE.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/25598392/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26472317",
    "html_url": "https://github.com/rust-lang/rust/issues/9382#issuecomment-26472317",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9382",
    "id": 26472317,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDcyMzE3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-17T01:06:06Z",
    "updated_at": "2013-10-17T01:06:06Z",
    "body": "Nominating for 1.0, looks like this affects anything which wants to return `Enum(&Trait)` as I ran into this trying to return `Option<&mut Trait>` which hinders traits a bit sadly.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26472317/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27142032",
    "html_url": "https://github.com/rust-lang/rust/issues/9382#issuecomment-27142032",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9382",
    "id": 27142032,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MTQyMDMy",
    "user": {
      "login": "philberty",
      "id": 84585,
      "node_id": "MDQ6VXNlcjg0NTg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/philberty",
      "html_url": "https://github.com/philberty",
      "followers_url": "https://api.github.com/users/philberty/followers",
      "following_url": "https://api.github.com/users/philberty/following{/other_user}",
      "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/philberty/subscriptions",
      "organizations_url": "https://api.github.com/users/philberty/orgs",
      "repos_url": "https://api.github.com/users/philberty/repos",
      "events_url": "https://api.github.com/users/philberty/events{/privacy}",
      "received_events_url": "https://api.github.com/users/philberty/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-26T08:36:01Z",
    "updated_at": "2013-10-26T08:36:01Z",
    "body": "I want to try and have a stab at this now :)\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27142032/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27386435",
    "html_url": "https://github.com/rust-lang/rust/issues/9382#issuecomment-27386435",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9382",
    "id": 27386435,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3Mzg2NDM1",
    "user": {
      "login": "erickt",
      "id": 84711,
      "node_id": "MDQ6VXNlcjg0NzEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erickt",
      "html_url": "https://github.com/erickt",
      "followers_url": "https://api.github.com/users/erickt/followers",
      "following_url": "https://api.github.com/users/erickt/following{/other_user}",
      "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erickt/subscriptions",
      "organizations_url": "https://api.github.com/users/erickt/orgs",
      "repos_url": "https://api.github.com/users/erickt/repos",
      "events_url": "https://api.github.com/users/erickt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erickt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-30T12:57:30Z",
    "updated_at": "2013-10-30T12:57:30Z",
    "body": "I just spent the last couple minutes reducing a bug down to @MicahChalmer's example :) The little bit extra I can add is that this code compiles fine:\n\n```\nstruct A<'self> {\n    a: &'self [~int],\n    b: ~int,\n}\n\nfn main() {\n    let _a = A {\n        a: &[],\n        b: ~1,\n    };\n}\n```\n\nAlso, the assertion is happening in the `rustc::middle::trans::glue::call_tydesc_glue_full` function, and is happening because the first argument being passed into the drop function is not an llvm `*{}` type.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27386435/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27386779",
    "html_url": "https://github.com/rust-lang/rust/issues/9382#issuecomment-27386779",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9382",
    "id": 27386779,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3Mzg2Nzc5",
    "user": {
      "login": "erickt",
      "id": 84711,
      "node_id": "MDQ6VXNlcjg0NzEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erickt",
      "html_url": "https://github.com/erickt",
      "followers_url": "https://api.github.com/users/erickt/followers",
      "following_url": "https://api.github.com/users/erickt/following{/other_user}",
      "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erickt/subscriptions",
      "organizations_url": "https://api.github.com/users/erickt/orgs",
      "repos_url": "https://api.github.com/users/erickt/repos",
      "events_url": "https://api.github.com/users/erickt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erickt/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-30T13:02:58Z",
    "updated_at": "2013-10-30T13:02:58Z",
    "body": "Another variation that does not work. We trip over this bug when auto-coercing a `~[T]` type into a `&[T]` type:\n\n```\nstruct A<'self> {\n    a: &'self [~int],\n    b: ~int,\n}\n\nfn main() {\n    let x: ~[~int] = ~[];\n    let _a = A {\n        a: x,\n        b: ~1,\n    };\n}\n```\n\nHowever, if we use `vec.as_slice()` it works fine:\n\n```\nstruct A<'self> {\n    a: &'self [~int],\n    b: ~int,\n}\n\nfn main() {\n    let x: &[~int] = [];\n    let _a = A {\n        a: x.as_slice(),\n        b: ~1,\n    };\n}\n```\n\nSo  we have work arounds for anyone that runs into this bug.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27386779/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27948958",
    "html_url": "https://github.com/rust-lang/rust/issues/9382#issuecomment-27948958",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9382",
    "id": 27948958,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTQ4OTU4",
    "user": {
      "login": "Cynede",
      "id": 2656965,
      "node_id": "MDQ6VXNlcjI2NTY5NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2656965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Cynede",
      "html_url": "https://github.com/Cynede",
      "followers_url": "https://api.github.com/users/Cynede/followers",
      "following_url": "https://api.github.com/users/Cynede/following{/other_user}",
      "gists_url": "https://api.github.com/users/Cynede/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Cynede/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Cynede/subscriptions",
      "organizations_url": "https://api.github.com/users/Cynede/orgs",
      "repos_url": "https://api.github.com/users/Cynede/repos",
      "events_url": "https://api.github.com/users/Cynede/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Cynede/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-07T09:38:47Z",
    "updated_at": "2013-11-07T09:38:47Z",
    "body": "cc\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27948958/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29844546",
    "html_url": "https://github.com/rust-lang/rust/issues/9382#issuecomment-29844546",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9382",
    "id": 29844546,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODQ0NTQ2",
    "user": {
      "login": "kmcallister",
      "id": 444997,
      "node_id": "MDQ6VXNlcjQ0NDk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/444997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kmcallister",
      "html_url": "https://github.com/kmcallister",
      "followers_url": "https://api.github.com/users/kmcallister/followers",
      "following_url": "https://api.github.com/users/kmcallister/following{/other_user}",
      "gists_url": "https://api.github.com/users/kmcallister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kmcallister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kmcallister/subscriptions",
      "organizations_url": "https://api.github.com/users/kmcallister/orgs",
      "repos_url": "https://api.github.com/users/kmcallister/repos",
      "events_url": "https://api.github.com/users/kmcallister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kmcallister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-04T20:55:55Z",
    "updated_at": "2013-12-04T20:55:55Z",
    "body": "cc me\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29844546/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29867513",
    "html_url": "https://github.com/rust-lang/rust/issues/9382#issuecomment-29867513",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9382",
    "id": 29867513,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODY3NTEz",
    "user": {
      "login": "kmcallister",
      "id": 444997,
      "node_id": "MDQ6VXNlcjQ0NDk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/444997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kmcallister",
      "html_url": "https://github.com/kmcallister",
      "followers_url": "https://api.github.com/users/kmcallister/followers",
      "following_url": "https://api.github.com/users/kmcallister/following{/other_user}",
      "gists_url": "https://api.github.com/users/kmcallister/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kmcallister/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kmcallister/subscriptions",
      "organizations_url": "https://api.github.com/users/kmcallister/orgs",
      "repos_url": "https://api.github.com/users/kmcallister/repos",
      "events_url": "https://api.github.com/users/kmcallister/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kmcallister/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-05T02:50:54Z",
    "updated_at": "2013-12-05T02:50:54Z",
    "body": "I don't know if this is completely fixed, but as of today (ad58e2c) the program in the original post compiles successfully.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29867513/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29932133",
    "html_url": "https://github.com/rust-lang/rust/issues/9382#issuecomment-29932133",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9382",
    "id": 29932133,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTMyMTMz",
    "user": {
      "login": "luqmana",
      "id": 287063,
      "node_id": "MDQ6VXNlcjI4NzA2Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luqmana",
      "html_url": "https://github.com/luqmana",
      "followers_url": "https://api.github.com/users/luqmana/followers",
      "following_url": "https://api.github.com/users/luqmana/following{/other_user}",
      "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions",
      "organizations_url": "https://api.github.com/users/luqmana/orgs",
      "repos_url": "https://api.github.com/users/luqmana/repos",
      "events_url": "https://api.github.com/users/luqmana/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luqmana/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-05T19:58:58Z",
    "updated_at": "2013-12-05T19:58:58Z",
    "body": "So this seems to be triggered when we auto-slice a vec and the cleanups happen in a landing pad.\n\nHere's a working case: https://gist.github.com/luqmana/47be9ac078b542a50051\nHere's a broken case: https://gist.github.com/luqmana/d372a04ef1a2af7fc370\n\nBoth use the same struct except for a small change. For the working case the second field is a `u64` while in the broken case it's a `~u64`.\n\nIn the broken case, it seems to try to allocate the `~u64` by doing an `invoke` to `exchange_malloc` and it's in the cleanup section where it tries to make the invalid call to drop glue. It's trying to call the drop glue for `[0 x i64*]*` but passing `{ i64**, i64 }*`. That is, instead of passing the original vec, it's passing the auto-sliced one. And if you look right after, as well as in the \"normal return\" path, it calls drop glue correctly with the original vec.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29932133/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30072725",
    "html_url": "https://github.com/rust-lang/rust/issues/9382#issuecomment-30072725",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9382",
    "id": 30072725,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDcyNzI1",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-08T01:44:03Z",
    "updated_at": "2013-12-08T01:44:03Z",
    "body": "Like a ninja, @luqmana is awesome.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/30072725/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
