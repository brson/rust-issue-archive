[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39891547",
    "html_url": "https://github.com/rust-lang/rust/issues/13405#issuecomment-39891547",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13405",
    "id": 39891547,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODkxNTQ3",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-08T19:32:09Z",
    "updated_at": "2014-04-08T19:32:09Z",
    "body": "Struct literal fields don't seem to do any coercion (we should at least consider reborrows).\ncc @nikomatsakis\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39891547/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39894778",
    "html_url": "https://github.com/rust-lang/rust/issues/13405#issuecomment-39894778",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13405",
    "id": 39894778,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODk0Nzc4",
    "user": {
      "login": "dmski",
      "id": 1293095,
      "node_id": "MDQ6VXNlcjEyOTMwOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1293095?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dmski",
      "html_url": "https://github.com/dmski",
      "followers_url": "https://api.github.com/users/dmski/followers",
      "following_url": "https://api.github.com/users/dmski/following{/other_user}",
      "gists_url": "https://api.github.com/users/dmski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dmski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dmski/subscriptions",
      "organizations_url": "https://api.github.com/users/dmski/orgs",
      "repos_url": "https://api.github.com/users/dmski/repos",
      "events_url": "https://api.github.com/users/dmski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dmski/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-08T20:01:25Z",
    "updated_at": "2014-04-08T20:01:25Z",
    "body": "It seems to me that it doesn't compile correctly: the return value contains a reference of unnamed lifetime (parameter `j: &int`), which isn't considered the same as the lifetime of a struct being returned.\n\nThis compiles for me:\n\n```\nstruct Foo<'a> {\n    i: &'a bool,\n    j: Option<&'a int>,\n}\n\nimpl<'a> Foo<'a> {\n    fn bar(&mut self, j: &'a int) {\n        let child = Foo {\n            i: self.i,\n            j: Some(j)\n        };\n    }\n}\n```\n\nas does this:\n\n```\nstruct Foo<'a> {\n    i: &'a bool,\n    j: Option<&'a int>,\n}\n\nimpl<'a> Foo<'a> {\n    fn bar<'b>(&'b mut self, j: &'b int) {\n        let child = Foo {\n            i: self.i,\n            j: Some(j)\n        };\n    }\n}\n```\n\nAm i missing something? What would you expect to happen here? Or is this issue about unclear error message?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39894778/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39895420",
    "html_url": "https://github.com/rust-lang/rust/issues/13405#issuecomment-39895420",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13405",
    "id": 39895420,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODk1NDIw",
    "user": {
      "login": "stepancheg",
      "id": 28969,
      "node_id": "MDQ6VXNlcjI4OTY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/28969?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stepancheg",
      "html_url": "https://github.com/stepancheg",
      "followers_url": "https://api.github.com/users/stepancheg/followers",
      "following_url": "https://api.github.com/users/stepancheg/following{/other_user}",
      "gists_url": "https://api.github.com/users/stepancheg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stepancheg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stepancheg/subscriptions",
      "organizations_url": "https://api.github.com/users/stepancheg/orgs",
      "repos_url": "https://api.github.com/users/stepancheg/repos",
      "events_url": "https://api.github.com/users/stepancheg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stepancheg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-08T20:07:31Z",
    "updated_at": "2014-04-08T20:07:31Z",
    "body": "@dmski function returns nothing.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39895420/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39895544",
    "html_url": "https://github.com/rust-lang/rust/issues/13405#issuecomment-39895544",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13405",
    "id": 39895544,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODk1NTQ0",
    "user": {
      "login": "dmski",
      "id": 1293095,
      "node_id": "MDQ6VXNlcjEyOTMwOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1293095?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dmski",
      "html_url": "https://github.com/dmski",
      "followers_url": "https://api.github.com/users/dmski/followers",
      "following_url": "https://api.github.com/users/dmski/following{/other_user}",
      "gists_url": "https://api.github.com/users/dmski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dmski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dmski/subscriptions",
      "organizations_url": "https://api.github.com/users/dmski/orgs",
      "repos_url": "https://api.github.com/users/dmski/repos",
      "events_url": "https://api.github.com/users/dmski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dmski/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-08T20:08:35Z",
    "updated_at": "2014-04-08T20:08:35Z",
    "body": "Ah, sorry, should've read more carefully, disregard me.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/39895544/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40469314",
    "html_url": "https://github.com/rust-lang/rust/issues/13405#issuecomment-40469314",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13405",
    "id": 40469314,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDY5MzE0",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-15T11:01:50Z",
    "updated_at": "2014-04-15T11:01:50Z",
    "body": "This error is caused by the intersection of various things, among them the coercion rules and #3598, but I tend to agree it should work. @eddyb's diagnosis could be correct, though I thought we _were_ applying the coercion rules for struct literals. Investigation needed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40469314/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40471881",
    "html_url": "https://github.com/rust-lang/rust/issues/13405#issuecomment-40471881",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13405",
    "id": 40471881,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDcxODgx",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-15T11:40:24Z",
    "updated_at": "2014-04-15T12:34:48Z",
    "body": "@nikomatsakis something I've figured since: if typeck sees a `&T`, it eagerly propagates the type, including its initial lifetime, and lifetime inference doesn't have as much wiggle room.\nI don't know of any \"known lifetimes\" requirement in early type-checking (unlike \"known types\") so I would erase almost every lifetime before we do actual lifetime inference.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40471881/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40482893",
    "html_url": "https://github.com/rust-lang/rust/issues/13405#issuecomment-40482893",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13405",
    "id": 40482893,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDgyODkz",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-15T13:47:36Z",
    "updated_at": "2014-04-15T13:47:36Z",
    "body": "On Tue, Apr 15, 2014 at 04:40:27AM -0700, Eduard Burtescu wrote:\n\n> @nikomatsakis something I've figured since: if typeck knows the lifetime of a `&T`, it eagerly propagates it, and lifetime inference doesn't have as much wiggle room.\n\nYes, this is the subtyping rules. The reborrowing coercion usually\naddresses this in practice. I'm actually planning to revamp the\ncoercion code in the near term to make it more predictable, I will\ntake a look at this case too while I'm at it.  It will require a bit\nof an RFC I think.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40482893/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40507772",
    "html_url": "https://github.com/rust-lang/rust/issues/13405#issuecomment-40507772",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13405",
    "id": 40507772,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTA3Nzcy",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-15T17:09:38Z",
    "updated_at": "2014-04-15T17:09:38Z",
    "body": "The reborrowing coercion can't do anything for `Option<&'a T>` (because it's invariant wrt `'a`), the reborrow has to happen earlier (that's where lifetime inference would fit in).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40507772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40696888",
    "html_url": "https://github.com/rust-lang/rust/issues/13405#issuecomment-40696888",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13405",
    "id": 40696888,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjk2ODg4",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-04-17T09:32:22Z",
    "updated_at": "2014-04-17T09:32:22Z",
    "body": "@eddyb yes, I was referring to a coercion on the other field. of course fixing variance might help too. that turns out to be a bit trickier than I initially thought.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/40696888/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57537059",
    "html_url": "https://github.com/rust-lang/rust/issues/13405#issuecomment-57537059",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13405",
    "id": 57537059,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NTM3MDU5",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-01T20:56:48Z",
    "updated_at": "2014-10-01T20:56:48Z",
    "body": "This is working now but needs a test case.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/57537059/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
