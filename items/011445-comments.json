[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32008314",
    "html_url": "https://github.com/rust-lang/rust/issues/11445#issuecomment-32008314",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11445",
    "id": 32008314,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDA4MzE0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-10T07:34:23Z",
    "updated_at": "2014-01-10T07:34:23Z",
    "body": "I'm tempted to close this as a dupe of #5016, but there's certainly a lot here. So long as we continue to zero out on movements, we can't promote anything to values (they have to be in `alloca` slots)\n\nI think that @nikomatsakis is working on a patch that does this and requires that you move out of a variable in all branches (to completely eliminate zeroing on movement)\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32008314/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32008486",
    "html_url": "https://github.com/rust-lang/rust/issues/11445#issuecomment-32008486",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11445",
    "id": 32008486,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMDA4NDg2",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-10T07:38:58Z",
    "updated_at": "2014-01-10T07:38:58Z",
    "body": "I found out about #5016 a bit too late, but yeah, that's the main blocker. Pretty much any immutable lvalue that is passed by value (i.e. fits in a register) could otherwise be a `ByValue` datum.\n\nI did take a look at @nikomatsakis' patch and cleanup does look a little better, but it still uses zeroing for `Lvalue`s (it actually makes it clear that's the only way to deal with `Lvalue`s, at least in the current implementation).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32008486/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32161150",
    "html_url": "https://github.com/rust-lang/rust/issues/11445#issuecomment-32161150",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11445",
    "id": 32161150,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTYxMTUw",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-13T11:21:31Z",
    "updated_at": "2014-01-13T11:21:31Z",
    "body": "I am working towards this goal, though my current branch does not yet remove zeroing, it just makes the semantics and lifetimes of temporaries better defined and more easily controlled. That said -- we always keep local variables in allocas and I don't expect this to change, because it enables better integration with debuginfo.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32161150/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32245006",
    "html_url": "https://github.com/rust-lang/rust/issues/11445#issuecomment-32245006",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11445",
    "id": 32245006,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjQ1MDA2",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-14T07:56:44Z",
    "updated_at": "2014-01-14T07:56:44Z",
    "body": "That debuginfo integration is only required when compiling with `-Z extra-debug-info` - at that point, the compile/runtime cost is understandable.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32245006/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32281825",
    "html_url": "https://github.com/rust-lang/rust/issues/11445#issuecomment-32281825",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11445",
    "id": 32281825,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjgxODI1",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-14T16:42:43Z",
    "updated_at": "2014-01-14T16:42:54Z",
    "body": "It doesn't seem worth it to me to treat local variables differently depending on whether -Z extra-debug-info is set or not.  That said, it may be that once we implement #5016, it's not a big change to make it possible to have by-ref or by-value lvalues, in which case I'm not opposed, but I think readability and general cleanliness of trans takes top priority in this case.\n\nAnother way to cleanup that generated code would be to do a simple analysis that detects infallible functions and avoids generating landing pads. We'd probably have to store fallibility in the crate metadata, but it need not affect language semantics in any way.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32281825/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35927801",
    "html_url": "https://github.com/rust-lang/rust/issues/11445#issuecomment-35927801",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11445",
    "id": 35927801,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTI3ODAx",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-24T19:51:47Z",
    "updated_at": "2014-02-24T20:02:11Z",
    "body": "@nikomatsakis: we can put debug info on registers with `llvm.dbg.value`\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35927801/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/178704489",
    "html_url": "https://github.com/rust-lang/rust/issues/11445#issuecomment-178704489",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11445",
    "id": 178704489,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3ODcwNDQ4OQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-02T17:34:02Z",
    "updated_at": "2016-02-02T17:34:02Z",
    "body": "Triage: updated code:\n\n```\nfn foo(x: Vec<u8>) -> String {unsafe{std::mem::transmute(x)}}\n```\n\nllvm ir:\n\n```\ndefine internal void @_ZN3foo20h33c0f4c7a8c48249eaaE(%\"3.collections::string::String\"* noalias nocapture sret dereferenceable(24), %\"3.collections::vec::Vec<u8>\"* noalias nocapture dereferenceable(24) %x) unnamed_addr #0 {\nentry-block:\n  %dropflag_hint_6 = alloca i8\n  store i8 61, i8* %dropflag_hint_6\n  %1 = bitcast %\"3.collections::string::String\"* %0 to %\"3.collections::vec::Vec<u8>\"*\n  %2 = bitcast %\"3.collections::vec::Vec<u8>\"* %x to i8*\n  %3 = bitcast %\"3.collections::vec::Vec<u8>\"* %1 to i8*\n  call void @llvm.memcpy.p0i8.p0i8.i64(i8* %3, i8* %2, i64 24, i32 8, i1 false)\n  %4 = bitcast %\"3.collections::vec::Vec<u8>\"* %x to i8*\n  call void @llvm.memset.p0i8.i64(i8* %4, i8 29, i64 24, i32 8, i1 false)\n  call void @\"_ZN31collections..vec..Vec$LT$u8$GT$9drop.359317hfad10bb9521885b9E\"(%\"3.collections::vec::Vec<u8>\"* %x)\n  ret void\n}\n```\n\nIt looks very different, is this fixed?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/178704489/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/178734490",
    "html_url": "https://github.com/rust-lang/rust/issues/11445#issuecomment-178734490",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11445",
    "id": 178734490,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3ODczNDQ5MA==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-02-02T18:20:52Z",
    "updated_at": "2016-02-02T18:20:52Z",
    "body": "Yes, static and dynamic drop have both gotten much better since (although filling drop still exists in marginal cases).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/178734490/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
