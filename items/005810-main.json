{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/5810",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/5810/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/5810/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/5810/events",
  "html_url": "https://github.com/rust-lang/rust/pull/5810",
  "id": 12999193,
  "node_id": "MDExOlB1bGxSZXF1ZXN0NTA3MjM0NA==",
  "number": 5810,
  "title": "initial iterator object library",
  "user": {
    "login": "thestinger",
    "id": 1505226,
    "node_id": "MDQ6VXNlcjE1MDUyMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/thestinger",
    "html_url": "https://github.com/thestinger",
    "followers_url": "https://api.github.com/users/thestinger/followers",
    "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
    "organizations_url": "https://api.github.com/users/thestinger/orgs",
    "repos_url": "https://api.github.com/users/thestinger/repos",
    "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/thestinger/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2013-04-10T00:30:33Z",
  "updated_at": "2014-06-13T10:39:33Z",
  "closed_at": "2013-04-13T22:39:55Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/5810",
    "html_url": "https://github.com/rust-lang/rust/pull/5810",
    "diff_url": "https://github.com/rust-lang/rust/pull/5810.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/5810.patch",
    "merged_at": "2013-04-13T22:39:59Z"
  },
  "body": "The current protocol is very comparable to Python, where `.__iter__()` returns an iterator object which implements `.__next__()` and throws `StopIteration` on completion. `Option` is much cleaner than using a exceptions as a flow control hack though. It requires that the container is frozen so there's no worry about invalidating them.\n\nAdvantages over internal iterators, which are functions that are passed closures and directly implement the iteration protocol:\n- Iteration is stateful, so you can interleave iteration over arbitrary containers. That's needed to implement algorithms like zip, merge, set union, set intersection, set difference and symmetric difference. I already used this internally in the `TreeMap` and `TreeSet` implementations, but regions and traits weren't solid enough to make it generic yet.\n- They provide a universal, generic interface. The same trait is used for a forward/reverse iterator, an iterator over a range, etc. Internal iterators end up resulting in a trait for each possible way you could iterate.\n- They can be composed with adaptors like `ZipIterator`, which also implement the same trait themselves.\n\nThe disadvantage is that they're a pain to write without support from the compiler for compiling something like `yield` to a state machine. :)\n\nThis can coexist alongside internal iterators since both can use the current `for` protocol. It's easier to write an internal iterator, but external ones are far more powerful/useful so they should probably be provided whenever possible by the standard library.\n## Current issues\n#5801 is somewhat annoying since explicit type hints are required.\n\nI just wanted to get the essentials working well, so I haven't put much thought into making the naming concise (free functions vs. static `new` methods, etc.).\n\nMaking an `Iterable` trait seems like it will have to be a long-term goal, requiring type system extensions. At least without resorting to objects which would probably be unacceptably slow.\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/5810/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/5810/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
