[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32810413",
    "html_url": "https://github.com/rust-lang/rust/issues/11692#issuecomment-32810413",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11692",
    "id": 32810413,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyODEwNDEz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-21T00:23:13Z",
    "updated_at": "2014-01-21T00:23:13Z",
    "body": "That sounds pretty bad!\n\nNominating.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32810413/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33051522",
    "html_url": "https://github.com/rust-lang/rust/issues/11692#issuecomment-33051522",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11692",
    "id": 33051522,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDUxNTIy",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-22T18:23:44Z",
    "updated_at": "2014-01-22T18:24:15Z",
    "body": "Accepted for 1.0, P-high\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33051522/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34800564",
    "html_url": "https://github.com/rust-lang/rust/issues/11692#issuecomment-34800564",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11692",
    "id": 34800564,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODAwNTY0",
    "user": {
      "login": "edwardw",
      "id": 454049,
      "node_id": "MDQ6VXNlcjQ1NDA0OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/454049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/edwardw",
      "html_url": "https://github.com/edwardw",
      "followers_url": "https://api.github.com/users/edwardw/followers",
      "following_url": "https://api.github.com/users/edwardw/following{/other_user}",
      "gists_url": "https://api.github.com/users/edwardw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edwardw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edwardw/subscriptions",
      "organizations_url": "https://api.github.com/users/edwardw/orgs",
      "repos_url": "https://api.github.com/users/edwardw/repos",
      "events_url": "https://api.github.com/users/edwardw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edwardw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-11T20:14:31Z",
    "updated_at": "2014-02-11T20:14:57Z",
    "body": "The code path seems to be:\n    https://github.com/mozilla/rust/blob/master/src/libsyntax/ext/format.rs#L799\n    https://github.com/mozilla/rust/blob/master/src/libsyntax/ext/base.rs#L302\n\nThe `syntax::ext::base::ExtCtxt::expand_expr` only looks for the built-in macros returned by `syntax_expander_table`, so it fails to recognize the second macro `format!` which is not a built-in one.\n\nBut how to fix it?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34800564/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34810150",
    "html_url": "https://github.com/rust-lang/rust/issues/11692#issuecomment-34810150",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11692",
    "id": 34810150,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODEwMTUw",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-11T21:35:46Z",
    "updated_at": "2014-02-11T21:35:46Z",
    "body": "You'd probably want to move the `SyntaxEnv` from `MacroExpander` to inside the `ExtCtxt`.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34810150/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34903298",
    "html_url": "https://github.com/rust-lang/rust/issues/11692#issuecomment-34903298",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11692",
    "id": 34903298,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTAzMjk4",
    "user": {
      "login": "edwardw",
      "id": 454049,
      "node_id": "MDQ6VXNlcjQ1NDA0OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/454049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/edwardw",
      "html_url": "https://github.com/edwardw",
      "followers_url": "https://api.github.com/users/edwardw/followers",
      "following_url": "https://api.github.com/users/edwardw/following{/other_user}",
      "gists_url": "https://api.github.com/users/edwardw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edwardw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edwardw/subscriptions",
      "organizations_url": "https://api.github.com/users/edwardw/orgs",
      "repos_url": "https://api.github.com/users/edwardw/repos",
      "events_url": "https://api.github.com/users/edwardw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edwardw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-12T19:02:37Z",
    "updated_at": "2014-02-12T19:02:37Z",
    "body": "Moving `SyntaxEnv` from `MacroExpander` to inside `ExtCtxt` is a great idea! I tried it but there's a practical problem. There are several important match expressions in which a instance of `SyntaxEnv` is borrowed immutably and `ExtCtxt` mutably. Moving `SyntaxEnv` to inside `ExtCtxt` would make that illegal.\n\nIn the same vein, changing `MacroExpanderFn` from\n    `fn(ecx: &mut ExtCtxt, ...) -> MacResult`\nto\n    `fn(ecx: &mut ExtCtxt, env: &SyntaxEnv, ...) -> MacResult`\nor\n    `fn(expander: &mut MacroExpander, ...) -> MacResult`\nwill have the same effect. But that approach involves about 170+ changes to the `libsyntax`.\n\nIs there any other way to do it?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34903298/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34907759",
    "html_url": "https://github.com/rust-lang/rust/issues/11692#issuecomment-34907759",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11692",
    "id": 34907759,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTA3NzU5",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-12T19:38:12Z",
    "updated_at": "2014-02-12T19:38:12Z",
    "body": "I think the best thing is to probably restructure the matches to avoid the double borrow. I'm not sure how painful that'll be though. Changing the signature of `MacroExpanderFn` seems a bit unfortunate.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34907759/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35002290",
    "html_url": "https://github.com/rust-lang/rust/issues/11692#issuecomment-35002290",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11692",
    "id": 35002290,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDAyMjkw",
    "user": {
      "login": "edwardw",
      "id": 454049,
      "node_id": "MDQ6VXNlcjQ1NDA0OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/454049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/edwardw",
      "html_url": "https://github.com/edwardw",
      "followers_url": "https://api.github.com/users/edwardw/followers",
      "following_url": "https://api.github.com/users/edwardw/following{/other_user}",
      "gists_url": "https://api.github.com/users/edwardw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edwardw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edwardw/subscriptions",
      "organizations_url": "https://api.github.com/users/edwardw/orgs",
      "repos_url": "https://api.github.com/users/edwardw/repos",
      "events_url": "https://api.github.com/users/edwardw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edwardw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-13T17:21:52Z",
    "updated_at": "2014-02-13T17:25:58Z",
    "body": "I couldn't find a way to untangle the double borrow. Here's what I found so far for whoever may pick up this issue in the future.\n\nThe issue reported in this ticket is twofold. One is that unless it is one of the hardcoded macros defined in `syntax::ext::base::syntax_expander_table`, a nested macro will be deemed as undefined; the other is that a nested undefined macro will cause a infinite loop in the phase 2 of crate compilation.\n\nThe reason that a nested legit macro deemed as undefined is that the inner macro gets expanded in the expander function of outer macro. But the expander function has no syntax context information right now, in that context there are macros being injected from `std` and syntax extensions. Moving `SyntaxEnv` to inside `ExtCtxt` will do with minimum modification to the current macro API.\n\nThe #11803 seems to be remotely related.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35002290/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35534037",
    "html_url": "https://github.com/rust-lang/rust/issues/11692#issuecomment-35534037",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11692",
    "id": 35534037,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTM0MDM3",
    "user": {
      "login": "edwardw",
      "id": 454049,
      "node_id": "MDQ6VXNlcjQ1NDA0OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/454049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/edwardw",
      "html_url": "https://github.com/edwardw",
      "followers_url": "https://api.github.com/users/edwardw/followers",
      "following_url": "https://api.github.com/users/edwardw/following{/other_user}",
      "gists_url": "https://api.github.com/users/edwardw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edwardw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edwardw/subscriptions",
      "organizations_url": "https://api.github.com/users/edwardw/orgs",
      "repos_url": "https://api.github.com/users/edwardw/repos",
      "events_url": "https://api.github.com/users/edwardw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edwardw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-19T18:54:34Z",
    "updated_at": "2014-02-19T18:55:07Z",
    "body": "Do we plan to support nested macro invocations? #9323 is also relevant.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35534037/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35545258",
    "html_url": "https://github.com/rust-lang/rust/issues/11692#issuecomment-35545258",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11692",
    "id": 35545258,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTQ1MjU4",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-19T20:35:48Z",
    "updated_at": "2014-02-19T20:35:48Z",
    "body": "Nested macro invocations should be (?) supported. Things are expanded outside-in.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/35545258/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
