[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59443882",
    "html_url": "https://github.com/rust-lang/rust/issues/18104#issuecomment-59443882",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18104",
    "id": 59443882,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NDQzODgy",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-16T22:57:12Z",
    "updated_at": "2014-10-16T22:57:12Z",
    "body": "cc @chris-morgan, this would adversely affect `AnyMap`. Is there a different way to tackle the problem it solves?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59443882/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59443903",
    "html_url": "https://github.com/rust-lang/rust/issues/18104#issuecomment-59443903",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18104",
    "id": 59443903,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NDQzOTAz",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-16T22:57:28Z",
    "updated_at": "2014-10-16T22:57:28Z",
    "body": "cc @thestinger\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59443903/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59444583",
    "html_url": "https://github.com/rust-lang/rust/issues/18104#issuecomment-59444583",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18104",
    "id": 59444583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NDQ0NTgz",
    "user": {
      "login": "reem",
      "id": 4745181,
      "node_id": "MDQ6VXNlcjQ3NDUxODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4745181?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reem",
      "html_url": "https://github.com/reem",
      "followers_url": "https://api.github.com/users/reem/followers",
      "following_url": "https://api.github.com/users/reem/following{/other_user}",
      "gists_url": "https://api.github.com/users/reem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reem/subscriptions",
      "organizations_url": "https://api.github.com/users/reem/orgs",
      "repos_url": "https://api.github.com/users/reem/repos",
      "events_url": "https://api.github.com/users/reem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reem/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-16T23:04:28Z",
    "updated_at": "2014-10-16T23:09:05Z",
    "body": "cc me\n\nI would be very sad if this happened, as `TypeId` allows a lot of extremely cool tricks and enhancements to safety that would be impossible otherwise.\n\nAs a data point, note that `TypeId` is used as a necessary part of:\n- [iron](https://github.com/iron/iron)\n- [typemap](https://github.com/reem/rust-typemap)\n- [event](https://github.com/reem/rust-event)\n- [plugin](https://github.com/reem/rust-plugin)\n\nand several other libraries that I have authored (mostly through uses of typemap).\n\nA better situation would probably be to have `Any` be changed to _not_ be implied by any bound except `A: Any`, though I don't think that can be accomplished without language changes. Alternatively, the same could be done for `TypeId::of` through a new trait like `Typed`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59444583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59444997",
    "html_url": "https://github.com/rust-lang/rust/issues/18104#issuecomment-59444997",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18104",
    "id": 59444997,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NDQ0OTk3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-16T23:09:21Z",
    "updated_at": "2014-10-16T23:09:21Z",
    "body": "@aturon: There are still going to be ABI stability hazards because code can use `Any` with types from a library and depend on the type id. Unless there's another proposed way to implement it, it doesn't seem like the problem would go away.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59444997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59446056",
    "html_url": "https://github.com/rust-lang/rust/issues/18104#issuecomment-59446056",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18104",
    "id": 59446056,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NDQ2MDU2",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-16T23:21:27Z",
    "updated_at": "2014-10-16T23:21:27Z",
    "body": "@thestinger To clarify, if `TypeId` was completely opaque (no public functions/methods), in what way might a downstream library depend on it?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59446056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59446307",
    "html_url": "https://github.com/rust-lang/rust/issues/18104#issuecomment-59446307",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18104",
    "id": 59446307,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NDQ2MzA3",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-16T23:24:09Z",
    "updated_at": "2014-10-16T23:24:14Z",
    "body": "@reem Yes, very much understood. There will definitely be _some_ way to do downcasting, but we're trying to minimize the machinery that has to be exposed for that to work.\n\nOn the other hand, typemap seems to rely crucially on identity, not just downcasting. I'd love to hear more about how it's used, and whether there might be any other way to solve the problem. We definitely want to make sure your use-cases are addressed!\n\nI'm not sure that just adding bounds restricting the generation of `get_type_id` is enough to close any ABI holes, though it would help for parametricity.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59446307/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59446437",
    "html_url": "https://github.com/rust-lang/rust/issues/18104#issuecomment-59446437",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18104",
    "id": 59446437,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NDQ2NDM3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-16T23:25:45Z",
    "updated_at": "2014-10-16T23:30:31Z",
    "body": "@aturon: It basically enforces that messing around with internals of types in any way == ABI change. If a application puts a type from a library in `Any` and then then library changes the internal of the type, the application needs to be rebuilt even if the size / alignment of all existing public types is the same.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59446437/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59447924",
    "html_url": "https://github.com/rust-lang/rust/issues/18104#issuecomment-59447924",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/18104",
    "id": 59447924,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NDQ3OTI0",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-10-16T23:44:51Z",
    "updated_at": "2014-10-16T23:45:05Z",
    "body": "@thestinger OK, I understand, and am going to close this issue since:\n- It doesn't change anything wrt to ABI relative to what `Any` would already do, and\n- `TypeId` plays an important role for major Rust web frameworks.\n\nThat said, it would be helpful to understand more concretely whether the `TypeId` scheme is fundamentally incompatible with ABI stability. Can you give specific concrete cases where a change to a type would _have_ to cause the `TypeId` to change, but otherwise wouldn't affect the ABI?\n\nAlso, FWIW any proposal to replace these mechanisms should take into account the use-cases that @reem and @chris-morgan have. If you do have an alternative proposal in mind, it would be great to see an RFC.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/59447924/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
