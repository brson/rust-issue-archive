[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132288748",
    "html_url": "https://github.com/rust-lang/rust/issues/27669#issuecomment-132288748",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27669",
    "id": 132288748,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMjI4ODc0OA==",
    "user": {
      "login": "gsingh93",
      "id": 1012677,
      "node_id": "MDQ6VXNlcjEwMTI2Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1012677?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsingh93",
      "html_url": "https://github.com/gsingh93",
      "followers_url": "https://api.github.com/users/gsingh93/followers",
      "following_url": "https://api.github.com/users/gsingh93/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsingh93/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsingh93/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsingh93/subscriptions",
      "organizations_url": "https://api.github.com/users/gsingh93/orgs",
      "repos_url": "https://api.github.com/users/gsingh93/repos",
      "events_url": "https://api.github.com/users/gsingh93/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsingh93/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-18T17:28:56Z",
    "updated_at": "2015-08-18T17:29:44Z",
    "body": "Running `rustc` with `--pretty=expanded` on the second example gives this:\n\n``` rust\n$ rustc -Z unstable-options --pretty=expanded src/lib.rs\n#![feature(no_std)]\n#![no_std]\n#[prelude_import]\nuse std::prelude::v1::*;\n#[macro_use]\nextern crate std as std;\nextern crate term;\n\nfn foo() {\n    let mut t = term::stdout().unwrap();\n    t.write_fmt(::std::fmt::Arguments::new_v1({\n                                                  static __STATIC_FMTSTR:\n                                                         &'static [&'static str]\n                                                         =\n                                                      &[\"foo\\n\"];\n                                                  __STATIC_FMTSTR\n                                              },\n                                              &match () {\n                                                   () => [],\n                                               })).unwrap();\n}\n```\n\nRunning it on the third example gives this:\n\n``` rust\n$ rustc -Z unstable-options --pretty=expanded src/lib.rs\n#![feature(no_std)]\n#![no_std]\n#[prelude_import]\nuse std::prelude::v1::*;\n#[macro_use]\nextern crate std as std;\nextern crate term;\n\nfn foo() {\n    let mut t = term::stdout().unwrap();\n    t.write_fmt(::std::fmt::Arguments::new_v1({\n                                                  static __STATIC_FMTSTR:\n                                                         &'static [&'static str]\n                                                         =\n                                                      &[\"foo\\n\"];\n                                                  __STATIC_FMTSTR\n                                              },\n                                              &match () {\n                                                   () => [],\n                                               })).unwrap();\n    ::std::io::_print(::std::fmt::Arguments::new_v1({\n                                                        static __STATIC_FMTSTR:\n                                                               &'static [&'static str]\n                                                               =\n                                                            &[\"foo\\n\"];\n                                                        __STATIC_FMTSTR\n                                                    },\n                                                    &match () { () => [], }));\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132288748/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132295686",
    "html_url": "https://github.com/rust-lang/rust/issues/27669#issuecomment-132295686",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27669",
    "id": 132295686,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzMjI5NTY4Ng==",
    "user": {
      "login": "gsingh93",
      "id": 1012677,
      "node_id": "MDQ6VXNlcjEwMTI2Nzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1012677?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsingh93",
      "html_url": "https://github.com/gsingh93",
      "followers_url": "https://api.github.com/users/gsingh93/followers",
      "following_url": "https://api.github.com/users/gsingh93/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsingh93/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsingh93/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsingh93/subscriptions",
      "organizations_url": "https://api.github.com/users/gsingh93/orgs",
      "repos_url": "https://api.github.com/users/gsingh93/repos",
      "events_url": "https://api.github.com/users/gsingh93/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsingh93/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-18T17:55:41Z",
    "updated_at": "2015-08-18T18:10:19Z",
    "body": "My first example was incorrect, this code compiles:\n\n``` rust\nuse std::fmt::Write; // I had forgot this previously\n\nfn foo() {\n    let mut s = String::new();\n    writeln!(s, \"foo\").unwrap();\n}\n```\n\nOriginal issue is unchanged.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/132295686/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/216034976",
    "html_url": "https://github.com/rust-lang/rust/issues/27669#issuecomment-216034976",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27669",
    "id": 216034976,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjAzNDk3Ng==",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-01T11:05:53Z",
    "updated_at": "2016-05-01T11:05:53Z",
    "body": "This is fixed in https://github.com/rust-lang/rust/pull/32073 & https://github.com/rust-lang/rust/pull/31920\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/216034976/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285923514",
    "html_url": "https://github.com/rust-lang/rust/issues/27669#issuecomment-285923514",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27669",
    "id": 285923514,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTkyMzUxNA==",
    "user": {
      "login": "tbg",
      "id": 5076964,
      "node_id": "MDQ6VXNlcjUwNzY5NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5076964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tbg",
      "html_url": "https://github.com/tbg",
      "followers_url": "https://api.github.com/users/tbg/followers",
      "following_url": "https://api.github.com/users/tbg/following{/other_user}",
      "gists_url": "https://api.github.com/users/tbg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tbg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tbg/subscriptions",
      "organizations_url": "https://api.github.com/users/tbg/orgs",
      "repos_url": "https://api.github.com/users/tbg/repos",
      "events_url": "https://api.github.com/users/tbg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tbg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-12T05:28:23Z",
    "updated_at": "2017-03-12T05:28:37Z",
    "body": "@petrochenkov you mentioned above that this is fixed, what's left to do here then? Just tests?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285923514/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285924680",
    "html_url": "https://github.com/rust-lang/rust/issues/27669#issuecomment-285924680",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27669",
    "id": 285924680,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTkyNDY4MA==",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-12T06:05:35Z",
    "updated_at": "2017-03-12T06:05:35Z",
    "body": "Yep!",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285924680/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285924709",
    "html_url": "https://github.com/rust-lang/rust/issues/27669#issuecomment-285924709",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27669",
    "id": 285924709,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTkyNDcwOQ==",
    "user": {
      "login": "tbg",
      "id": 5076964,
      "node_id": "MDQ6VXNlcjUwNzY5NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5076964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tbg",
      "html_url": "https://github.com/tbg",
      "followers_url": "https://api.github.com/users/tbg/followers",
      "following_url": "https://api.github.com/users/tbg/following{/other_user}",
      "gists_url": "https://api.github.com/users/tbg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tbg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tbg/subscriptions",
      "organizations_url": "https://api.github.com/users/tbg/orgs",
      "repos_url": "https://api.github.com/users/tbg/repos",
      "events_url": "https://api.github.com/users/tbg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tbg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-12T06:06:24Z",
    "updated_at": "2017-03-12T06:06:24Z",
    "body": "Ok. Consider it done.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285924709/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285934196",
    "html_url": "https://github.com/rust-lang/rust/issues/27669#issuecomment-285934196",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27669",
    "id": 285934196,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTkzNDE5Ng==",
    "user": {
      "login": "tbg",
      "id": 5076964,
      "node_id": "MDQ6VXNlcjUwNzY5NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5076964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tbg",
      "html_url": "https://github.com/tbg",
      "followers_url": "https://api.github.com/users/tbg/followers",
      "following_url": "https://api.github.com/users/tbg/following{/other_user}",
      "gists_url": "https://api.github.com/users/tbg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tbg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tbg/subscriptions",
      "organizations_url": "https://api.github.com/users/tbg/orgs",
      "repos_url": "https://api.github.com/users/tbg/repos",
      "events_url": "https://api.github.com/users/tbg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tbg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-12T09:59:06Z",
    "updated_at": "2017-03-12T09:59:06Z",
    "body": "So I thought the test that was needed was something that used an external crate, and then uses a trait without importing it from that crate. Steve already posted [something](https://github.com/rust-lang/rust/issues/21670#issuecomment-153755183) using only the standard library and that seems to have made it into a test, but somehow it's not necessary any more to import the trait?\r\n\r\n```rust\r\nuse std::thread;\r\n// use std::any::TypeId; // <- actually compiles as-is\r\n\r\nfn main() {\r\n    let child = thread::spawn(|| {\r\n    });\r\n    child.join().unwrap_err().get_type_id();\r\n}\r\n```\r\n\r\nThe test is [here](https://github.com/rust-lang/rust/pull/32073/files#diff-eb532655134d55ec52aaa86063a01ee6R29) (and indeed the `TypeId` trait isn't explicitly imported any more).\r\n\r\nIn the same vein, the originally failing example now compiles:\r\n\r\n```rust\r\nextern crate term;\r\n\r\nfn main() {\r\n    let mut t = term::stdout().unwrap();\r\n    writeln!(t, \"foo\").unwrap();\r\n}\r\n```\r\n\r\nso does\r\n\r\n```rust\r\nextern crate term;\r\n\r\nfn foo(t: &mut std::io::Write) {\r\n    t.flush().unwrap();\r\n}\r\n\r\nfn main() {\r\n    let mut t = term::stdout().unwrap();\r\n    foo(&mut t);\r\n}\r\n```\r\n\r\nbut then this one still errors even though to my untrained eye it looks exactly like the `term` example above.\r\n\r\n```rust\r\n//use std::fmt::Write; // intentional omission\r\n\r\nfn main() {\r\n    let mut s = String::new();\r\n    writeln!(s, \"foo\").unwrap();\r\n}\r\n/*\r\nerror: no method named `write_fmt` found for type `std::string::String` in the current scope\r\n --> main.rs:5:5\r\n  |\r\n5 |     writeln!(s, \"foo\").unwrap();\r\n  |     ^^^^^^^^^^^^^^^^^^\r\n  |\r\n  = help: items from traits can only be used if the trait is in scope; the following trait is implemented but not in scope, perhaps add a `use` for it:\r\n  = help: candidate #1: `use std::fmt::Write;`\r\n  = note: this error originates in a macro outside of the current crate\r\n*/\r\n```\r\n\r\nI'm obviously a bit confused, so whatever reading you can throw at me, please do.\r\n\r\nPerhaps `std` is too special to be used to make the test case we want happen, but if even the original examples can't reproduce an error any more because something picks up the trait automatically, what's left here to test?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285934196/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285934993",
    "html_url": "https://github.com/rust-lang/rust/issues/27669#issuecomment-285934993",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27669",
    "id": 285934993,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTkzNDk5Mw==",
    "user": {
      "login": "petrochenkov",
      "id": 5751617,
      "node_id": "MDQ6VXNlcjU3NTE2MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrochenkov",
      "html_url": "https://github.com/petrochenkov",
      "followers_url": "https://api.github.com/users/petrochenkov/followers",
      "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
      "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
      "repos_url": "https://api.github.com/users/petrochenkov/repos",
      "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-12T10:14:10Z",
    "updated_at": "2017-03-12T10:14:10Z",
    "body": "@tschottdorf \r\nActually, https://github.com/rust-lang/rust/pull/32073 already contains the test, so this issue can be closed.\r\n\r\nThe difference between the `term` example and `String::new()` example is that `term::stdout().unwrap()` returns a *trait object* so the trait's methods should be usable on it even if the trait is not in scope.\r\n`String` is not a trait object, it just implements `Write`, so `Write` needs to be in scope for `s.write_fmt(...)` to work.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285934993/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285935020",
    "html_url": "https://github.com/rust-lang/rust/issues/27669#issuecomment-285935020",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27669",
    "id": 285935020,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTkzNTAyMA==",
    "user": {
      "login": "tbg",
      "id": 5076964,
      "node_id": "MDQ6VXNlcjUwNzY5NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5076964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tbg",
      "html_url": "https://github.com/tbg",
      "followers_url": "https://api.github.com/users/tbg/followers",
      "following_url": "https://api.github.com/users/tbg/following{/other_user}",
      "gists_url": "https://api.github.com/users/tbg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tbg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tbg/subscriptions",
      "organizations_url": "https://api.github.com/users/tbg/orgs",
      "repos_url": "https://api.github.com/users/tbg/repos",
      "events_url": "https://api.github.com/users/tbg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tbg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-12T10:14:40Z",
    "updated_at": "2017-03-12T10:14:40Z",
    "body": "Gotcha, thanks for the clarification.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/285935020/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
