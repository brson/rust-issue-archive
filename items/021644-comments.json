[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71449495",
    "html_url": "https://github.com/rust-lang/rust/issues/21644#issuecomment-71449495",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21644",
    "id": 71449495,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNDQ5NDk1",
    "user": {
      "login": "pczarn",
      "id": 3356767,
      "node_id": "MDQ6VXNlcjMzNTY3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3356767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pczarn",
      "html_url": "https://github.com/pczarn",
      "followers_url": "https://api.github.com/users/pczarn/followers",
      "following_url": "https://api.github.com/users/pczarn/following{/other_user}",
      "gists_url": "https://api.github.com/users/pczarn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pczarn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pczarn/subscriptions",
      "organizations_url": "https://api.github.com/users/pczarn/orgs",
      "repos_url": "https://api.github.com/users/pczarn/repos",
      "events_url": "https://api.github.com/users/pczarn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pczarn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-26T11:47:39Z",
    "updated_at": "2015-01-26T11:48:32Z",
    "body": "That's the use case of `Entry`.\n\n``` rust\nfn get_cache_entry(&self, key: &CacheKey) -> &CacheValue {\n    match self.cache.get(key) {\n        Option::Some(entry) => entry,\n        Option::None => {\n            // do some stuff...\n            let cache_value = CacheValue {\n                texture: texture,\n                glyph: glyph,\n                bitmap_glyph: bitmap_glyph,\n            };\n            self.cache.entry(*key).get().unwrap_or_else(|e| e.insert(cache_value))\n        },\n    };\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71449495/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71453226",
    "html_url": "https://github.com/rust-lang/rust/issues/21644#issuecomment-71453226",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21644",
    "id": 71453226,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNDUzMjI2",
    "user": {
      "login": "edwardw",
      "id": 454049,
      "node_id": "MDQ6VXNlcjQ1NDA0OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/454049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/edwardw",
      "html_url": "https://github.com/edwardw",
      "followers_url": "https://api.github.com/users/edwardw/followers",
      "following_url": "https://api.github.com/users/edwardw/following{/other_user}",
      "gists_url": "https://api.github.com/users/edwardw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/edwardw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/edwardw/subscriptions",
      "organizations_url": "https://api.github.com/users/edwardw/orgs",
      "repos_url": "https://api.github.com/users/edwardw/repos",
      "events_url": "https://api.github.com/users/edwardw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/edwardw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-26T12:25:03Z",
    "updated_at": "2015-01-26T12:26:58Z",
    "body": "Or like this:\n\n``` rust\nfn get_cache_entry(&self, key: &CacheKey) -> &CacheValue {\n    match self.cache.entry(key) {\n        Entry::Occupied(e) => &*e.into_mut(),\n        Entry::Vacant(e) => {\n            // do some stuff...\n            let cache_value = CacheValue { ... };\n            &*e.insert(cache_value)\n        }\n    }\n}\n```\n\nThis is part of entry API([RFC here](https://github.com/rust-lang/rfcs/blob/master/text/0216-collection-views.md)) to replace `find_with_or_insert_with` and friends.\n\nSo this issue can be closed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71453226/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71580794",
    "html_url": "https://github.com/rust-lang/rust/issues/21644#issuecomment-71580794",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21644",
    "id": 71580794,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNTgwNzk0",
    "user": {
      "login": "andrewrk",
      "id": 106511,
      "node_id": "MDQ6VXNlcjEwNjUxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/106511?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/andrewrk",
      "html_url": "https://github.com/andrewrk",
      "followers_url": "https://api.github.com/users/andrewrk/followers",
      "following_url": "https://api.github.com/users/andrewrk/following{/other_user}",
      "gists_url": "https://api.github.com/users/andrewrk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/andrewrk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andrewrk/subscriptions",
      "organizations_url": "https://api.github.com/users/andrewrk/orgs",
      "repos_url": "https://api.github.com/users/andrewrk/repos",
      "events_url": "https://api.github.com/users/andrewrk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/andrewrk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-27T02:41:52Z",
    "updated_at": "2015-01-27T02:41:52Z",
    "body": "Thanks for the example code, this API is nice :+1: \n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/71580794/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
