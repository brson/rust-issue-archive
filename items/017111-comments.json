[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54922174",
    "html_url": "https://github.com/rust-lang/rust/pull/17111#issuecomment-54922174",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17111",
    "id": 54922174,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTIyMTc0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-09T04:12:40Z",
    "updated_at": "2014-09-09T04:13:56Z",
    "body": "I think the current design is sensible, and it's consistent with other languages (C++, D, Python, [...]). The standard iterator methods only exist to provide sugar for common cases and being explicit about every algorithm choice is counter to that goal. The `zip` method is another example of the practical design, as it stops when the first iterator does rather than trying to bubble up the condition as an error by yielding `Option<(K, V)>` or `(Option<K>, Option<V>)`. I don't think grouping is the common case.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54922174/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54922176",
    "html_url": "https://github.com/rust-lang/rust/pull/17111#issuecomment-54922176",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17111",
    "id": 54922176,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTIyMTc2",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-09T04:12:43Z",
    "updated_at": "2014-09-09T04:14:43Z",
    "body": "I wonder if we could have this via `collect` wrappers, e.g. a `GroupedCollect` type used, like `iter.collect::<GroupedCollect<HashMap<uint, Vec<...>>>>()`.\n\nBTW, we don't necessarily want to be using `Extendable` for this purpose, at least, not `extend`, since it is appending a single element a time but `extend` is designed for the case of appending many, i.e. it can have large overhead. At some point, we possibly want a trait that offers a \"add one\" method. Furthermore, in this context, makes a lot of sense to allow, e.g. collecting an `Iterator<(K, uint)>` into a `HashMap<(K, uint)>` by summing up the `uint`s (this would imply passing a closure to control the behaviour precisely).\n\nAlso, btw, rewriting the `.collect` call into a `for`+`insert` loop will be less efficient; most `collect` implementation use the iterator's `size_hint` to preallocate a best-guess size for the resulting data structure (where this makes sense) and thus save effort (and for `.iter().map(...).collect()`-like statements, this lower bound is actually exact, so no reallocations are necessary). The naive loop versions do not do this.\n\ncc @aturon\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54922176/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54924933",
    "html_url": "https://github.com/rust-lang/rust/pull/17111#issuecomment-54924933",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17111",
    "id": 54924933,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTI0OTMz",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-09T05:09:58Z",
    "updated_at": "2014-09-09T05:09:58Z",
    "body": "I agree with thestinger here, the current behaviour matches my intuition that extend is just sugar for pushing each of the elements individually (with room for optimization). For Sets and Maps, that means dropping duplicates. If you want to keep duplicates, you should be using a MultiMap (which we don't provide, but it isn't _too_ hard to write one).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/54924933/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55046521",
    "html_url": "https://github.com/rust-lang/rust/pull/17111#issuecomment-55046521",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17111",
    "id": 55046521,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MDQ2NTIx",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-09T22:33:55Z",
    "updated_at": "2014-09-09T22:33:55Z",
    "body": "I agree that the current semantics of `collect` for maps is the expected one, and I wouldn't want to force additional constraints (`Extendable`) on the value type as proposed here.\n\n@Gankro to be clear, the use case here is more general than for multimaps, because the idea is that the value type has a way to \"merge in\" additional values.\n\nI could imagine adding this functionality as a separate constructor for maps -- something like `from_iter_merge` and introduce a separate `Merge` trait. (For that matter, the `Add` trait could be an appropriate choice.)\n\nBut in general, we're trying to pare down `libstd` to focus on core functionality that is widely used; we hope that more experimental APIs can live in the Cargo system first. Before considering something like this for `std`, it'd be good to have some very clear use cases and experience with it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55046521/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55055180",
    "html_url": "https://github.com/rust-lang/rust/pull/17111#issuecomment-55055180",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/17111",
    "id": 55055180,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MDU1MTgw",
    "user": {
      "login": "Ryman",
      "id": 994978,
      "node_id": "MDQ6VXNlcjk5NDk3OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/994978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ryman",
      "html_url": "https://github.com/Ryman",
      "followers_url": "https://api.github.com/users/Ryman/followers",
      "following_url": "https://api.github.com/users/Ryman/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ryman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ryman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ryman/subscriptions",
      "organizations_url": "https://api.github.com/users/Ryman/orgs",
      "repos_url": "https://api.github.com/users/Ryman/repos",
      "events_url": "https://api.github.com/users/Ryman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ryman/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-09-10T00:14:03Z",
    "updated_at": "2014-09-10T00:14:03Z",
    "body": "If current behavior is desired/expected, then I agree with @aturon that this could live in an external crate. Closing.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/55055180/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
