[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/140993750",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-140993750",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 140993750,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MDk5Mzc1MA==",
    "user": {
      "login": "ranma42",
      "id": 1506030,
      "node_id": "MDQ6VXNlcjE1MDYwMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1506030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ranma42",
      "html_url": "https://github.com/ranma42",
      "followers_url": "https://api.github.com/users/ranma42/followers",
      "following_url": "https://api.github.com/users/ranma42/following{/other_user}",
      "gists_url": "https://api.github.com/users/ranma42/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ranma42/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ranma42/subscriptions",
      "organizations_url": "https://api.github.com/users/ranma42/orgs",
      "repos_url": "https://api.github.com/users/ranma42/repos",
      "events_url": "https://api.github.com/users/ranma42/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ranma42/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-17T07:42:13Z",
    "updated_at": "2015-09-17T07:42:13Z",
    "body": "The memory corruption in MacOSX seems to be related to the TLS usage during `Drop` of a TLS value.\nIf the `print!` invocation is replaced with `stdout().write`, no crash occurs.\nHowever, if `stdout` is used within `main`, the process dies with the error\n\n```\nthread '<main>' panicked at 'cannot access stdout during shutdown', ../src/libcore/option.rs:333\n```\n\nboth if `drop` calls `print!` and if it calls `write`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/140993750/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/144054295",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-144054295",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 144054295,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDA1NDI5NQ==",
    "user": {
      "login": "ranma42",
      "id": 1506030,
      "node_id": "MDQ6VXNlcjE1MDYwMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1506030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ranma42",
      "html_url": "https://github.com/ranma42",
      "followers_url": "https://api.github.com/users/ranma42/followers",
      "following_url": "https://api.github.com/users/ranma42/following{/other_user}",
      "gists_url": "https://api.github.com/users/ranma42/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ranma42/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ranma42/subscriptions",
      "organizations_url": "https://api.github.com/users/ranma42/orgs",
      "repos_url": "https://api.github.com/users/ranma42/repos",
      "events_url": "https://api.github.com/users/ranma42/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ranma42/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-29T13:13:20Z",
    "updated_at": "2015-09-29T13:13:20Z",
    "body": "pthread destructors seem to have the same behaviour on MacOS X as on Linux (i.e. they are not run from when the main thread terminates). Googling around seems to suggest that this is a known (expected?) fact. Specifically, TLS destructors are only run when `pthread_exit` is invoked, which for non-main threads happens implicitly.\nThe only authoritative source I was able to find is http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_exit.html\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/144054295/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/144128628",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-144128628",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 144128628,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDEyODYyOA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-29T17:27:54Z",
    "updated_at": "2015-09-29T17:27:54Z",
    "body": "Yeah I think solving this in the case of pthreads will either require us documenting \"dtors may not run\" or perhaps adding our own atexit handler or something like that to handle this (e.g. some custom code on our end). Not entirely sure what that would look like though!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/144128628/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/144137298",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-144137298",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 144137298,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDEzNzI5OA==",
    "user": {
      "login": "ranma42",
      "id": 1506030,
      "node_id": "MDQ6VXNlcjE1MDYwMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1506030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ranma42",
      "html_url": "https://github.com/ranma42",
      "followers_url": "https://api.github.com/users/ranma42/followers",
      "following_url": "https://api.github.com/users/ranma42/following{/other_user}",
      "gists_url": "https://api.github.com/users/ranma42/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ranma42/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ranma42/subscriptions",
      "organizations_url": "https://api.github.com/users/ranma42/orgs",
      "repos_url": "https://api.github.com/users/ranma42/repos",
      "events_url": "https://api.github.com/users/ranma42/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ranma42/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-29T18:02:46Z",
    "updated_at": "2015-09-29T18:02:46Z",
    "body": "In order to make the `atexit` handler practical we would need to keep explicitly track the active destructors (at least on the main thread), i.e. basically keep the list of `DTORS` as in the pthread fallback implementation. This might not be as bad as it looks; in fact it might allow us to reuse some code (currently the Linux fallback dtor and the normal Windows dtor are basically doing the same thing in a slightly different way).\n\nAnother option would be to start the `main` function in a new thread and immediately joining it in `lang_start`. This would be about as effective as hooking the destructors in the Rust `atexit`, because for Rust application either way would work just fine and for Rust libraries used by non-Rust applications TLS would not be destroyed in either case.\n\nThe C `atexit` function would suffer from the same limitations as the Rust `atexit` (need to track dtors), but it might help in non-Rust applications, assuming that go through the normal termination (`exit`, not `_Exit` nor `quick_exit` nor an abort of any kind) as expected by the C runtime.\n\nDocumenting \"dtors may not run\" looks like a reasonable compromise to me, especially if we can guarantee that this will at most happen for the main thread (and, ideally, only on non-Rust apps). I believe that this guarantee is especially important if threads are spawned and joined (instead of managed as a thread pool) to ensure that leaks are bounded.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/144137298/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/144151832",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-144151832",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 144151832,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0NDE1MTgzMg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-29T18:42:45Z",
    "updated_at": "2015-09-29T18:42:45Z",
    "body": "> we would need to keep explicitly track the active destructors\n\nYeah this probably isn't so bad as we already do it in some cases, so it'd just be a matter of shuffling things around.\n\n> Another option would be to start the main function in a new thread and immediately joining it in lang_start\n\nUnfortunately I think this won't work because there's a number of GUI frameworks (or something like that) which only work on the main thread (I think on Windows in particular), so running off-the-main-thread by default may be a bit of a heavy hammer to fix this!\n\n> Documenting \"dtors may not run\" looks like a reasonable compromise to me\n\nI agree it's probably not _that_ bad, but if we could get OSX and Windows working reliably, it's more pressure for us to get pthreads working reliably :). I feel like Windows is pretty easy to fix, it seems like some small error is just being missed there. OSX also feels the same way to me in terms of weird things happening. The pthreads case also isn't _super_ critical on Linux because it's only used on older linuxes.\n\nOverall I think we may still have enough rope left to climb out and close this issue, so I wouldn't be _quite_ willing just yet to close it out by documenting things may not run.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/144151832/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/283422685",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-283422685",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 283422685,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MzQyMjY4NQ==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-01T18:15:20Z",
    "updated_at": "2017-03-01T18:15:20Z",
    "body": ">there's a number of GUI frameworks (or something like that) which only work on the main thread (I think on Windows in particular)\r\n\r\nWindows itself does not actually care which thread you do the UI on, as long as you're consistent. Once you create a window on a given thread, that thread now has a message queue which you're obligated to pump forever.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/283422685/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/453709627",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-453709627",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 453709627,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MzcwOTYyNw==",
    "user": {
      "login": "mtak-",
      "id": 6643140,
      "node_id": "MDQ6VXNlcjY2NDMxNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6643140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mtak-",
      "html_url": "https://github.com/mtak-",
      "followers_url": "https://api.github.com/users/mtak-/followers",
      "following_url": "https://api.github.com/users/mtak-/following{/other_user}",
      "gists_url": "https://api.github.com/users/mtak-/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mtak-/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mtak-/subscriptions",
      "organizations_url": "https://api.github.com/users/mtak-/orgs",
      "repos_url": "https://api.github.com/users/mtak-/repos",
      "events_url": "https://api.github.com/users/mtak-/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mtak-/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-01-12T01:53:29Z",
    "updated_at": "2019-01-12T01:53:29Z",
    "body": "Just confirmed the memory corruption in the OP on OSX occurs for the same reason listed here https://github.com/rust-lang/rust/issues/57534#issuecomment-453705716. It is not specific to the main thread. AFAICT it is UB on macos to register destructors during thread cleanup via `_tlv_atexit`,",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/453709627/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/621124769",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-621124769",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 621124769,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMTEyNDc2OQ==",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-04-29T10:50:06Z",
    "updated_at": "2020-04-29T10:50:57Z",
    "body": "So from the 4 items listed in the OP, the first two are fine, and the third was a separate bug that got fixed. EDIT: oh, the 2nd one is also not fine, I see.\r\n\r\nWhat is the situation on Windows nowadays? (Cc @retep998)",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/621124769/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/621143762",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-621143762",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 621143762,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMTE0Mzc2Mg==",
    "user": {
      "login": "mati865",
      "id": 1174646,
      "node_id": "MDQ6VXNlcjExNzQ2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1174646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mati865",
      "html_url": "https://github.com/mati865",
      "followers_url": "https://api.github.com/users/mati865/followers",
      "following_url": "https://api.github.com/users/mati865/following{/other_user}",
      "gists_url": "https://api.github.com/users/mati865/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mati865/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mati865/subscriptions",
      "organizations_url": "https://api.github.com/users/mati865/orgs",
      "repos_url": "https://api.github.com/users/mati865/repos",
      "events_url": "https://api.github.com/users/mati865/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mati865/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-04-29T11:30:41Z",
    "updated_at": "2020-04-29T11:30:41Z",
    "body": "@RalfJung looks like it works for both `windows-gnu` and `windows-msvc`:\r\n```\r\n$ rustc -O tls.rs && ./tls.exe\r\nwut\r\n\r\n$ rustc -O --target x86_64-pc-windows-msvc tls.rs && ./tls.exe\r\nwut\r\n```",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/621143762/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/621159194",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-621159194",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 621159194,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMTE1OTE5NA==",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-04-29T12:04:02Z",
    "updated_at": "2020-04-29T12:04:02Z",
    "body": "So, something changed since the issue was reported? Interesting.\r\n\r\nLooks like the only failing one left then is \"Linux pthread destructors - appear to not work\" -- and where do we even use that? On playground, it also prints `wut`.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/621159194/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2174454279",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-2174454279",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 2174454279,
    "node_id": "IC_kwDOAAsO6M6Bm4oH",
    "user": {
      "login": "workingjubilee",
      "id": 46493976,
      "node_id": "MDQ6VXNlcjQ2NDkzOTc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46493976?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/workingjubilee",
      "html_url": "https://github.com/workingjubilee",
      "followers_url": "https://api.github.com/users/workingjubilee/followers",
      "following_url": "https://api.github.com/users/workingjubilee/following{/other_user}",
      "gists_url": "https://api.github.com/users/workingjubilee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/workingjubilee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/workingjubilee/subscriptions",
      "organizations_url": "https://api.github.com/users/workingjubilee/orgs",
      "repos_url": "https://api.github.com/users/workingjubilee/repos",
      "events_url": "https://api.github.com/users/workingjubilee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/workingjubilee/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-06-17T21:26:42Z",
    "updated_at": "2024-06-17T21:26:42Z",
    "body": "> Looks like the only failing one left then is \"Linux pthread destructors - appear to not work\" -- and where do we even use that? On playground, it also prints wut.\r\n\r\nIt seems we do not, but rather, we currently effectively require libc support to include thread-local support.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2174454279/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2174469092",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-2174469092",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 2174469092,
    "node_id": "IC_kwDOAAsO6M6Bm8Pk",
    "user": {
      "login": "workingjubilee",
      "id": 46493976,
      "node_id": "MDQ6VXNlcjQ2NDkzOTc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46493976?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/workingjubilee",
      "html_url": "https://github.com/workingjubilee",
      "followers_url": "https://api.github.com/users/workingjubilee/followers",
      "following_url": "https://api.github.com/users/workingjubilee/following{/other_user}",
      "gists_url": "https://api.github.com/users/workingjubilee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/workingjubilee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/workingjubilee/subscriptions",
      "organizations_url": "https://api.github.com/users/workingjubilee/orgs",
      "repos_url": "https://api.github.com/users/workingjubilee/repos",
      "events_url": "https://api.github.com/users/workingjubilee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/workingjubilee/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-06-17T21:36:41Z",
    "updated_at": "2024-06-17T21:36:41Z",
    "body": "Wait.\r\n\r\nAndroid and OpenBSD.\r\n\r\ncc @quininer Sorry to bother, but you made this PR to add \"emulated TLS\" support: https://github.com/rust-lang/rust/pull/117873\r\n\r\nCan you confirm if this is still an issue on the appropriate targets?",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2174469092/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2175485516",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-2175485516",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 2175485516,
    "node_id": "IC_kwDOAAsO6M6Bq0ZM",
    "user": {
      "login": "quininer",
      "id": 6286761,
      "node_id": "MDQ6VXNlcjYyODY3NjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6286761?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/quininer",
      "html_url": "https://github.com/quininer",
      "followers_url": "https://api.github.com/users/quininer/followers",
      "following_url": "https://api.github.com/users/quininer/following{/other_user}",
      "gists_url": "https://api.github.com/users/quininer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/quininer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/quininer/subscriptions",
      "organizations_url": "https://api.github.com/users/quininer/orgs",
      "repos_url": "https://api.github.com/users/quininer/repos",
      "events_url": "https://api.github.com/users/quininer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/quininer/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-06-18T08:14:46Z",
    "updated_at": "2024-06-18T08:14:46Z",
    "body": "@workingjubilee I confirmed that emutls on android will print \"wut\".",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2175485516/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2183769837",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-2183769837",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 2183769837,
    "node_id": "IC_kwDOAAsO6M6CKa7t",
    "user": {
      "login": "workingjubilee",
      "id": 46493976,
      "node_id": "MDQ6VXNlcjQ2NDkzOTc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46493976?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/workingjubilee",
      "html_url": "https://github.com/workingjubilee",
      "followers_url": "https://api.github.com/users/workingjubilee/followers",
      "following_url": "https://api.github.com/users/workingjubilee/following{/other_user}",
      "gists_url": "https://api.github.com/users/workingjubilee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/workingjubilee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/workingjubilee/subscriptions",
      "organizations_url": "https://api.github.com/users/workingjubilee/orgs",
      "repos_url": "https://api.github.com/users/workingjubilee/repos",
      "events_url": "https://api.github.com/users/workingjubilee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/workingjubilee/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-06-22T04:07:21Z",
    "updated_at": "2024-06-22T04:07:21Z",
    "body": "Thank you! It seems this is resolved then? Hopefully?",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2183769837/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2183820336",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-2183820336",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 2183820336,
    "node_id": "IC_kwDOAAsO6M6CKnQw",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-06-22T05:40:07Z",
    "updated_at": "2024-06-22T05:40:17Z",
    "body": "I am a bit confused by the macos sitaution: I don't see how the simple program above could be affected by https://github.com/rust-lang/rust/pull/57655. Very strange. :shrug: \r\n\r\nDo we have a test checking that main thread destructors run? Reopening as needs-test.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2183820336/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2184031830",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-2184031830",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 2184031830,
    "node_id": "IC_kwDOAAsO6M6CLa5W",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-06-22T13:27:29Z",
    "updated_at": "2024-06-22T13:27:29Z",
    "body": "PR with a test is up: https://github.com/rust-lang/rust/pull/126829\r\n\r\n(I couldn't find an existing test.)",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2184031830/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2184916407",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-2184916407",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 2184916407,
    "node_id": "IC_kwDOAAsO6M6COy23",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-06-23T09:24:40Z",
    "updated_at": "2024-06-23T09:24:40Z",
    "body": "Turns out musl is still broken, I opened a new issue for that: https://github.com/rust-lang/rust/issues/126858.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2184916407/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2211739709",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-2211739709",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 2211739709,
    "node_id": "IC_kwDOAAsO6M6D1Hg9",
    "user": {
      "login": "RalfJung",
      "id": 330628,
      "node_id": "MDQ6VXNlcjMzMDYyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RalfJung",
      "html_url": "https://github.com/RalfJung",
      "followers_url": "https://api.github.com/users/RalfJung/followers",
      "following_url": "https://api.github.com/users/RalfJung/following{/other_user}",
      "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions",
      "organizations_url": "https://api.github.com/users/RalfJung/orgs",
      "repos_url": "https://api.github.com/users/RalfJung/repos",
      "events_url": "https://api.github.com/users/RalfJung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RalfJung/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-07-06T11:07:31Z",
    "updated_at": "2024-07-06T11:10:46Z",
    "body": "I gave up on the PR since even some glibc targets are effected (including the one we test on CI), so now we have two issues tracking the same thing -- this and https://github.com/rust-lang/rust/issues/126858.\r\n\r\nEDIT: I have closed the other issue.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2211739709/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2514912849",
    "html_url": "https://github.com/rust-lang/rust/issues/28129#issuecomment-2514912849",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/28129",
    "id": 2514912849,
    "node_id": "IC_kwDOAAsO6M6V5oZR",
    "user": {
      "login": "surban",
      "id": 1213857,
      "node_id": "MDQ6VXNlcjEyMTM4NTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1213857?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/surban",
      "html_url": "https://github.com/surban",
      "followers_url": "https://api.github.com/users/surban/followers",
      "following_url": "https://api.github.com/users/surban/following{/other_user}",
      "gists_url": "https://api.github.com/users/surban/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/surban/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/surban/subscriptions",
      "organizations_url": "https://api.github.com/users/surban/orgs",
      "repos_url": "https://api.github.com/users/surban/repos",
      "events_url": "https://api.github.com/users/surban/events{/privacy}",
      "received_events_url": "https://api.github.com/users/surban/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2024-12-03T15:40:01Z",
    "updated_at": "2024-12-03T15:40:01Z",
    "body": "Testing on FreeBSD 14 shows that TLS destructors are **not** run for the main thread.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2514912849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
