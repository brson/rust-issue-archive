[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105003780",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105003780",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105003780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTAwMzc4MA==",
    "user": {
      "login": "rust-highfive",
      "id": 7378925,
      "node_id": "MDQ6VXNlcjczNzg5MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7378925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rust-highfive",
      "html_url": "https://github.com/rust-highfive",
      "followers_url": "https://api.github.com/users/rust-highfive/followers",
      "following_url": "https://api.github.com/users/rust-highfive/following{/other_user}",
      "gists_url": "https://api.github.com/users/rust-highfive/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rust-highfive/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rust-highfive/subscriptions",
      "organizations_url": "https://api.github.com/users/rust-highfive/orgs",
      "repos_url": "https://api.github.com/users/rust-highfive/repos",
      "events_url": "https://api.github.com/users/rust-highfive/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rust-highfive/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-24T11:35:56Z",
    "updated_at": "2015-05-24T11:35:56Z",
    "body": "Thanks for the pull request, and welcome! The Rust team is excited to review your changes, and you should hear from @alexcrichton (or someone else) soon.\n\nIf any changes to this PR are deemed necessary, please add them as extra commits. This ensures that the reviewer can see what has changed since they last reviewed the code. The way Github handles out-of-date commits, this should also make it reasonably obvious what issues have or haven't been addressed. Large or tricky changes may require several passes of review and changes.\n\nPlease see [CONTRIBUTING.md](https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md) for more information.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105003780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105004589",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105004589",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105004589,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTAwNDU4OQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-24T11:40:24Z",
    "updated_at": "2015-05-24T13:20:51Z",
    "body": "https://github.com/rust-lang/rfcs#when-you-need-to-follow-this-process lists \"Additions to `std`\", but maybe it should be \"`#[stable]` additions to `std`\"? Anyway let me know if I should write an RFC.\n\nUnresolved questions:\n- Is there a better name for this?\n- Should it be a method instead? It would shadow `T` methods that could otherwise be used through `Deref`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105004589/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105038525",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105038525",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105038525,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTAzODUyNQ==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-24T17:00:38Z",
    "updated_at": "2015-05-24T17:00:51Z",
    "body": "I've added and experimented with this once. I scrapped the idea for my use case, because this makes it easy to return `Ref`, at which point you push the responsibility to not do a borrowing error onto the user of your API. I didn't like that, but if you have a use case for it, I suspect this is so useful we should have it available for when you need it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105038525/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105039716",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105039716",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105039716,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTAzOTcxNg==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-24T17:05:27Z",
    "updated_at": "2015-05-24T17:05:27Z",
    "body": "Wait, why don't you use a closure here?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105039716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105042394",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105042394",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105042394,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTA0MjM5NA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-24T17:48:06Z",
    "updated_at": "2015-05-24T17:48:06Z",
    "body": "What borrowing error do you mean?\n\nThis design of taking `&U` doesn't work. The usage I want of iit doesn't borrow-check. Trying something with a closure.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105042394/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105045050",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105045050",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105045050,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTA0NTA1MA==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-24T18:08:20Z",
    "updated_at": "2015-05-24T18:08:20Z",
    "body": "By borrowing error I mean a panic in `borrow()` or (more likely) `borrow_mut`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105045050/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105045791",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105045791",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105045791,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTA0NTc5MQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-24T18:18:33Z",
    "updated_at": "2015-05-24T18:18:33Z",
    "body": "Updated\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105045791/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105175235",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105175235",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105175235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTE3NTIzNQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-25T09:16:52Z",
    "updated_at": "2015-05-25T09:17:00Z",
    "body": "_Sigh_. I realized the PR as-is introduces memory unsafety: the closure can keep around the pointer it\u2019s given longer than the lifetime of the `Ref`. This test case prints `false` then `true`, meaning we\u2019re accessing `Foo` after its destructor has run.\n\n``` rust\n#![feature(core)]\n\nuse std::cell::{RefCell, Ref, map_ref};\n\nstruct Foo {\n    destroyed: bool\n}\n\nimpl Drop for Foo {\n    fn drop(&mut self) {\n        self.destroyed = true;\n    }\n}\n\nfn main() {\n    let a = RefCell::new(Box::new(Foo { destroyed: false }));\n    let mut b = None;\n    let _: Option<Ref<()>> = map_ref(a.borrow(), |s| {\n        b = Some(&**s);\n        None\n    });\n    println!(\"{}\", b.unwrap().destroyed);\n    *a.borrow_mut() = Box::new(Foo { destroyed: false });\n    println!(\"{}\", b.unwrap().destroyed);  // Use after free\n}\n```\n\nI _think_ making `map_ref` accept a more restrictive `Fn` closure instead of `FnOnce` would patch this particular hole, but is it enough?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105175235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105178452",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105178452",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105178452,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTE3ODQ1Mg==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-25T09:26:29Z",
    "updated_at": "2015-05-25T09:26:29Z",
    "body": "It looks like the closure idea was broken then. Sorry about that, my bad.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105178452/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105191574",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105191574",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105191574,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTE5MTU3NA==",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-25T09:54:09Z",
    "updated_at": "2015-05-25T09:54:09Z",
    "body": "cc https://github.com/rust-lang/rust/pull/19220\n\n> I think making map_ref accept a more restrictive Fn closure instead of FnOnce would patch this particular hole, but is it enough?\n\nI suspect not; couldn't one make `b` a `Cell<Option<...>>` instead?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105191574/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105198216",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105198216",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105198216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTE5ODIxNg==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-25T10:14:52Z",
    "updated_at": "2015-05-25T10:14:52Z",
    "body": "Right. Here is an alternative idea.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105198216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105216246",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105216246",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105216246,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTIxNjI0Ng==",
    "user": {
      "login": "jdm",
      "id": 27658,
      "node_id": "MDQ6VXNlcjI3NjU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/27658?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jdm",
      "html_url": "https://github.com/jdm",
      "followers_url": "https://api.github.com/users/jdm/followers",
      "following_url": "https://api.github.com/users/jdm/following{/other_user}",
      "gists_url": "https://api.github.com/users/jdm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jdm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jdm/subscriptions",
      "organizations_url": "https://api.github.com/users/jdm/orgs",
      "repos_url": "https://api.github.com/users/jdm/repos",
      "events_url": "https://api.github.com/users/jdm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jdm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-25T11:45:53Z",
    "updated_at": "2015-05-25T11:45:53Z",
    "body": "There's prior art that should definitely be considered at #19220.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105216246/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105217327",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105217327",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105217327,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTIxNzMyNw==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-25T11:51:53Z",
    "updated_at": "2015-05-25T11:51:53Z",
    "body": "I believe this version is sound, it looks good. Why use an optional return value though?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105217327/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105223557",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105223557",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105223557,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTIyMzU1Nw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-25T12:13:34Z",
    "updated_at": "2015-05-25T12:13:34Z",
    "body": "My use case it returning a new `Ref` to some component that may or may not be there. But checking whether it\u2019s there is the same amount of work as accessing it. If `map_ref` didn\u2019t involve options, I\u2019d have to do this work twice.\n\nExample in [Kuchiki](https://github.com/SimonSapin/kuchiki):\n\n``` rust\npub struct ElementData {\n    pub name: QualName,\n    pub attributes: RefCell<HashMap<QualName, String>>,\n}\n\nimpl ElementData {\n    fn get_attribute(&self, name: Atom) -> Option<Ref<str>> {\n        // With `map_ref` as proposed:\n        map_ref(self.attributes.borrow(), |attrs| {\n            attrs.get(&QualifiedName { ns: ns!(\"\"), local: name }).map(|s| &**s)\n        })\n\n        // With a simplified `map_ref`, two HashMap lookups:\n        let borrow = self.attributes.borrow();\n        let key = QualifiedName { ns: ns!(\"\"), local: name };\n        if borrow.contains_key(&key) {\n            Some(map_ref(borrow, |attrs| &*attrs[&key]))\n        } else {\n            None\n        }\n    }\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105223557/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105224340",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105224340",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105224340,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTIyNDM0MA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-25T12:22:18Z",
    "updated_at": "2015-05-25T12:22:18Z",
    "body": "Unlike #19220, this doesn\u2019t change the semantic of existing items (it just adds a new one), so I don\u2019t think it has the same issues. The example program at https://github.com/rust-lang/rust/pull/19220#issuecomment-64435291 correctly fails to build with a lifetime error (after updating it for language changes).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105224340/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105225325",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105225325",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105225325,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTIyNTMyNQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-25T12:31:31Z",
    "updated_at": "2015-05-25T13:49:49Z",
    "body": "Maybe my `get_attribute` method could return `Ref<Option<_>>` instead of `Option<Ref<_>>`, but that seems more awkward to deal with.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105225325/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105621095",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105621095",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105621095,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTYyMTA5NQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-26T18:07:03Z",
    "updated_at": "2015-05-26T18:07:03Z",
    "body": "I, too, have wanted this kind of functionality from time to time before, and I'm totally fine seeing it prototyped! This is a minor enough API that I don't believe it will require an RFC, but I'll cc @rust-lang/libs to see if other have opinons as well :)\n\nI have the same question as @bluss as well in that from an API perspective, could you elaborate on why the closure returns `Option<&U>`? I'd expect it to return `&U`.\n\n> Is there a better name for this?\n\nNaming-wise this may also wish to consider `RefMut` which may also want the capability to map itself to another reference.\n\n> Should it be a method instead? It would shadow T methods that could otherwise be used through Deref.\n\nWe've been quite wary of adding methods on types that implement `Deref`, so I think for now it'd want to stick around as a global function. I think when considering the name for how to map a `RefMut` the names `map_ref` and `map_ref_mut` do mirror each other well. Another option could possibly be an associated function `Ref::map` and `RefMut::map`, although I'm not sure if there's a way to force the compiler to not think that they're available as methods as well.\n\nApart from the `Option` return value, I agree with @bluss that this appears sound to me.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105621095/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105628871",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105628871",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105628871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTYyODg3MQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-26T18:38:02Z",
    "updated_at": "2015-05-26T18:38:02Z",
    "body": "Regarding `Option<&U>`, my use case is that I want to return `Option<Ref<_>>`, an optional reference to a component that may or may not be there. Another example:\n\n``` rust\npub enum NodeData {\n    Element(ElementData),\n    Text(String),\n    Comment(String),\n    Doctype(Doctype),\n    Document(DocumentData),\n}\n\npub struct Node {\n    // ...\n    pub data: RefCell<NodeData>,\n}\n\nimpl Node {\n    fn as_element(&self) -> Option<Ref<ElementData>> {\n        map_ref(self.data.borrow(), |data| match *data {\n            Element(ref element) => Some(element),\n            _ => None\n        })\n    }\n}\n```\n\nIf `map_ref` was simplified to\n\n``` rust\npub fn map_ref<'b, T: ?Sized, U: ?Sized, F>(orig: Ref<'b, T>, f: F) -> Ref<'b, U>\nwhere F: FnOnce(&T) -> &U\n```\n\n\u2026 this would be more tricky to implement and require matching twice:\n\n``` rust\nimpl Node {\n    fn as_element(&self) -> Option<Ref<ElementData>> {\n        let borrow = self.data.borrow();\n        match *borrow {\n            Element(_) => map_ref(borrow, |data| match *data {\n                Element(ref element) => element,\n                _ => unreachable!()\n            }),\n            _ => None\n        }\n    }\n}\n```\n\nI mentioned before that maybe I could instead return `Ref<Option<_>>` but that doesn\u2019t work: There is no existing `Option` I can return a `&Option` reference to, from the closure.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105628871/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105634289",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105634289",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105634289,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTYzNDI4OQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-26T18:56:58Z",
    "updated_at": "2015-05-26T18:56:58Z",
    "body": "Added `map_ref_mut`.\n\nHow can I run the doctests?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105634289/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105644337",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105644337",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105644337,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTY0NDMzNw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-26T19:41:02Z",
    "updated_at": "2015-05-26T19:41:02Z",
    "body": "I\u2019ve found out (thanks eddyb!) that I can run the doctests with `make check-stage1-doc-crate-core TESTNAME=map_ref NO_REBUILD=1`. But they\u2019re failing and I have no idea why :( The output does not include the build error or the `panic!` message that make the test fail, and I didn\u2019t manage to fix it by guessing and making changes blindly.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105644337/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105658478",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105658478",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105658478,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTY1ODQ3OA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-26T20:40:04Z",
    "updated_at": "2015-05-26T20:40:04Z",
    "body": "> Regarding Option<&U>, my use case is that I want to return Option<Ref<_>>, an optional reference to a component that may or may not be there.\n\nI'm worried about the compositionality of this API, however. For example if I have a `Ref<Result<T, E>>` I may want to turn it into a `Result<Ref<U>, &E>` (or something like that). Singling out `Option` seems like it's addressing a problem, but perhaps tackling it from the wrong angle. For example `Ref<Option<T>>` is very similar to `&Option<T>` on which we use the `as_ref` method to convert to `Option<&T>` (or in this case `Option<Ref<T>>`).\n\nI would personally rather see this as `&T -> &U` (aka as zero-cost as possible) and explore an ergonomic transformation of `Ref<Option<T>>` to `Option<Ref<T>>` later on.\n\n---\n\nAlso, it looks like associated functions can indeed be defined that aren't methods:\n\n``` rust\nstruct A;\nimpl A {\n    fn foo(a: &A) {}\n}\n\nlet a = A;\na.foo(); // error\nA::foo(&a); // ok\n```\n\nPerhaps static `map` functions could be used? You've already imported `Ref` and `RefMut` most likely if you're returning them, so it avoids the import of `std::cell` as well.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105658478/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105659978",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105659978",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105659978,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTY1OTk3OA==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-26T20:47:13Z",
    "updated_at": "2015-05-26T20:47:30Z",
    "body": "Using static functions sounds great unless there is any plan to expand UFCS and make them resolve with method syntax.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105659978/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105670043",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105670043",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105670043,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTY3MDA0Mw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-26T21:29:27Z",
    "updated_at": "2015-05-26T21:29:27Z",
    "body": "> I would personally rather see this as &T -> &U (aka as zero-cost as possible) and explore an ergonomic transformation of Ref<Option<T>> to Option<Ref<T>> later on.\n\nI agree that using a `&T -> Option<&U>` closure as proposed is not a great solution, but `Ref<Option<T>>` doesn\u2019t actually work:\n\n``` rust\n#![feature(core)]\nuse std::cell::*;\n\n// So that I don\u2019t have to re-bootrap...\nfn simplified_map_ref<'b, T, U, F>(orig: Ref<'b, T>, f: F) -> Ref<'b, U>\nwhere F: FnOnce(&T) -> &U {\n    map_ref(orig, move |v| Some(f(v))).unwrap()\n}\n\nfn main() {\n    let x: RefCell<Result<u32, ()>> = RefCell::new(Ok(5));\n    simplified_map_ref(x.borrow(), |r| &r.ok());\n}\n```\n\n``` rust\na.rs:11:41: 11:47 error: borrowed value does not live long enough\na.rs:11     simplified_map_ref(x.borrow(), |r| &r.ok());\n                                                ^~~~~~\nnote: in expansion of closure expansion\na.rs:11:36: 11:47 note: expansion site\na.rs:11:40: 11:47 note: reference must be valid for the anonymous lifetime #1 defined on the block at 11:39...\na.rs:11     simplified_map_ref(x.borrow(), |r| &r.ok());\n                                               ^~~~~~~\na.rs:11:40: 11:47 note: ...but borrowed value is only valid for the block at 11:39\na.rs:11     simplified_map_ref(x.borrow(), |r| &r.ok());\n                                               ^~~~~~~\nerror: aborting due to previous error\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105670043/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105670784",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105670784",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105670784,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTY3MDc4NA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-26T21:32:09Z",
    "updated_at": "2015-05-26T21:32:09Z",
    "body": "Agreed on the static functions. Should I make `clone_ref` a static `Ref::clone` function, while I\u2019m at it?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105670784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105704559",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105704559",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105704559,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTcwNDU1OQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-27T00:38:37Z",
    "updated_at": "2015-05-27T01:02:43Z",
    "body": "Yeah I'm fine with changing `clone_ref` to `Ref::clone`, although I'd leave around a deprecated copy for existing users (if any). I'd also like to hear some other opinions on this, as it's an interesting trend we could apply to `Arc`, `Rc`, and `Box` freestanding functions, none of which are stable but all of which would have to be updated.\n\n> I agree that using a `&T -> Option<&U>` closure as proposed is not a great solution, but `Ref<Option<T>>` doesn\u2019t actually work:\n\nHaving a \"map\" operation **not** go from T to U is bound to be super confusing as it's quite unexpected. In your example you're also not quite going from &T to &U. I do agree that it may not be able to implement the lifting operation as-is, but that probably means that this needs some more time to bake and get thought out.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105704559/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105741398",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105741398",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105741398,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTc0MTM5OA==",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-27T03:13:41Z",
    "updated_at": "2015-05-27T03:13:41Z",
    "body": "I like the idea of using static methods on `Arc` etc instead of free functions in the `arc` module. We should make sure that future UFCS work won't make those methods callable with the dot syntax though.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105741398/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105836726",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105836726",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105836726,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTgzNjcyNg==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-27T09:23:30Z",
    "updated_at": "2015-05-27T09:23:30Z",
    "body": "> We should make sure that future UFCS work won't make those methods callable with the dot syntax though.\n\nIf we decide to do this I don\u2019t see an obstacle to this: we can tell such functions apart from methods by them not using `self`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105836726/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105854000",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105854000",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105854000,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTg1NDAwMA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-27T10:18:28Z",
    "updated_at": "2015-05-27T10:18:28Z",
    "body": "As discussed on IRC with @alexcrichton, I modified the PR to have both `map` functions that take `&T -> &U` closures, and `filter_map` that take `&T -> Option<&U>`. The naming is similar to `Iterator` methods.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105854000/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105983380",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105983380",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105983380,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTk4MzM4MA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-27T16:20:23Z",
    "updated_at": "2015-05-27T16:20:23Z",
    "body": "Here is an attempt at generalizing `filter_map`:\n\n``` rust\nimpl<'b: 'c, 'c, T: ?Sized> Ref<'b, T> {\n    pub fn generalized_map<U: ?Sized, F, R>(orig: Ref<'b, T>, f: F) -> R\n    where F: FnOnce(&T, &FnOnce(&'c U) -> Ref<'c, U>) -> R {\n        f(orig._value, &move |new| Ref {\n            _value: new,\n            _borrow: orig._borrow,\n       })\n    }\n}\n```\n\nBut using it doesn\u2019t borrow-check:\n\n``` rust\n    let x: RefCell<Result<u32, ()>> = RefCell::new(Ok(5));\n    let b: Option<Ref<u32>> = Ref::generalized_map(x.borrow(), |r, new_ref| match *r {\n        Ok(ref value) => Some(new_ref(value)),\n        Err(_) => None,\n    });\n    assert_eq!(*b.unwrap(), 5);\n}\n```\n\nI\u2019m not sure if I\u2019m doing something wrong or if this is not possible to express in current Rust. Regardless, a function that takes a closure that takes another closure is quite convoluted, not a great API.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105983380/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105983964",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-105983964",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 105983964,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTk4Mzk2NA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-27T16:22:48Z",
    "updated_at": "2015-05-27T16:22:48Z",
    "body": "This API looks good to me, and I also believe the implementation is sound, so I'm all good with this!\n\nI'd like to hear more opinions about `Type::foo` as opposed to `std::type::foo` as well as how fancy we want to get with the extra methods on `Ref{,Mut}`.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/105983964/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106125351",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-106125351",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 106125351,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjEyNTM1MQ==",
    "user": {
      "login": "aturon",
      "id": 709807,
      "node_id": "MDQ6VXNlcjcwOTgwNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aturon",
      "html_url": "https://github.com/aturon",
      "followers_url": "https://api.github.com/users/aturon/followers",
      "following_url": "https://api.github.com/users/aturon/following{/other_user}",
      "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aturon/subscriptions",
      "organizations_url": "https://api.github.com/users/aturon/orgs",
      "repos_url": "https://api.github.com/users/aturon/repos",
      "events_url": "https://api.github.com/users/aturon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aturon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-28T00:40:07Z",
    "updated_at": "2015-05-28T00:40:07Z",
    "body": "+1 to the basic idea here.\n\n@alexcrichton \n\n> I'd like to hear more opinions about `Type::foo` as opposed to `std::type::foo`\n\nThis one is tricky. In the limit, with full inherent associated items, many \"single type\" modules could be flattened to just the type, and this is one step further in that direction. The main advantage is that you're usually importing the type already, so this saves you an additional import of the module/function. To be honest, I think it's inevitable that APIs will drift in this direction, and don't see much reason to fight it in `std`.\n\n(In the long run, this means that true free functions are predominantly going to be code that is not clearly associated with any particular type.)\n\n> as well as how fancy we want to get with the extra methods on `Ref{,Mut}`.\n\nI think the level of fanciness in the current PR is appropriate.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106125351/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106585721",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-106585721",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 106585721,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjU4NTcyMQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-28T20:24:15Z",
    "updated_at": "2015-05-28T20:24:15Z",
    "body": "Ok, thanks again for the PR @SimonSapin! r=me with a squash\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106585721/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106598079",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-106598079",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 106598079,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjU5ODA3OQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-28T21:02:20Z",
    "updated_at": "2015-05-28T21:02:20Z",
    "body": "Squashed into two commits.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106598079/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106599140",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-106599140",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 106599140,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjU5OTE0MA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-28T21:04:34Z",
    "updated_at": "2015-05-28T21:04:34Z",
    "body": "@bors: r+ 64e72b076c7429297dcc6baa65f1862e258ff897\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106599140/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106625650",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-106625650",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 106625650,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjYyNTY1MA==",
    "user": {
      "login": "bors",
      "id": 3372342,
      "node_id": "MDQ6VXNlcjMzNzIzNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bors",
      "html_url": "https://github.com/bors",
      "followers_url": "https://api.github.com/users/bors/followers",
      "following_url": "https://api.github.com/users/bors/following{/other_user}",
      "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
      "organizations_url": "https://api.github.com/users/bors/orgs",
      "repos_url": "https://api.github.com/users/bors/repos",
      "events_url": "https://api.github.com/users/bors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bors/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-28T23:21:34Z",
    "updated_at": "2015-05-28T23:21:34Z",
    "body": ":hourglass: Testing commit 64e72b0 with merge b597347...\n",
    "author_association": "COLLABORATOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106625650/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106636948",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-106636948",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 106636948,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjYzNjk0OA==",
    "user": {
      "login": "bors",
      "id": 3372342,
      "node_id": "MDQ6VXNlcjMzNzIzNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bors",
      "html_url": "https://github.com/bors",
      "followers_url": "https://api.github.com/users/bors/followers",
      "following_url": "https://api.github.com/users/bors/following{/other_user}",
      "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
      "organizations_url": "https://api.github.com/users/bors/orgs",
      "repos_url": "https://api.github.com/users/bors/repos",
      "events_url": "https://api.github.com/users/bors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bors/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-29T00:10:17Z",
    "updated_at": "2015-05-29T00:10:17Z",
    "body": ":broken_heart: Test failed - [auto-linux-64-nopt-t](http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/5104)\n",
    "author_association": "COLLABORATOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106636948/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106710044",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-106710044",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 106710044,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjcxMDA0NA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-29T06:39:17Z",
    "updated_at": "2015-05-29T06:39:17Z",
    "body": "Oh noes.\n\nShould be fixed, with this diff before squashing:\n\n``` diff\ndiff --git a/src/libcoretest/lib.rs b/src/libcoretest/lib.rs\nindex 78c7215..3d14b3f 100644\n--- a/src/libcoretest/lib.rs\n+++ b/src/libcoretest/lib.rs\n@@ -24,6 +24,7 @@\n #![feature(step_by)]\n #![feature(slice_patterns)]\n #![feature(float_from_str_radix)]\n+#![feature(cell_extras)]\n\n extern crate core;\n extern crate test;\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106710044/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106710483",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-106710483",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 106710483,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjcxMDQ4Mw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-29T06:40:49Z",
    "updated_at": "2015-05-29T06:40:49Z",
    "body": "@bors: r+ d0afa6e\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106710483/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106717663",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-106717663",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 106717663,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjcxNzY2Mw==",
    "user": {
      "login": "bors",
      "id": 3372342,
      "node_id": "MDQ6VXNlcjMzNzIzNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bors",
      "html_url": "https://github.com/bors",
      "followers_url": "https://api.github.com/users/bors/followers",
      "following_url": "https://api.github.com/users/bors/following{/other_user}",
      "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
      "organizations_url": "https://api.github.com/users/bors/orgs",
      "repos_url": "https://api.github.com/users/bors/repos",
      "events_url": "https://api.github.com/users/bors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bors/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-29T07:07:08Z",
    "updated_at": "2015-05-29T07:07:08Z",
    "body": ":hourglass: Testing commit d0afa6e with merge 25fc917...\n",
    "author_association": "COLLABORATOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106717663/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106746036",
    "html_url": "https://github.com/rust-lang/rust/pull/25747#issuecomment-106746036",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25747",
    "id": 106746036,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjc0NjAzNg==",
    "user": {
      "login": "bors",
      "id": 3372342,
      "node_id": "MDQ6VXNlcjMzNzIzNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bors",
      "html_url": "https://github.com/bors",
      "followers_url": "https://api.github.com/users/bors/followers",
      "following_url": "https://api.github.com/users/bors/following{/other_user}",
      "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
      "organizations_url": "https://api.github.com/users/bors/orgs",
      "repos_url": "https://api.github.com/users/bors/repos",
      "events_url": "https://api.github.com/users/bors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bors/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-29T08:40:18Z",
    "updated_at": "2015-05-29T08:40:18Z",
    "body": ":sunny: Test successful - [auto-linux-32-nopt-t](http://buildbot.rust-lang.org/builders/auto-linux-32-nopt-t/builds/5149), [auto-linux-32-opt](http://buildbot.rust-lang.org/builders/auto-linux-32-opt/builds/5157), [auto-linux-64-nopt-t](http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/5112), [auto-linux-64-opt](http://buildbot.rust-lang.org/builders/auto-linux-64-opt/builds/5137), [auto-linux-64-x-android-t](http://buildbot.rust-lang.org/builders/auto-linux-64-x-android-t/builds/5106), [auto-mac-32-opt](http://buildbot.rust-lang.org/builders/auto-mac-32-opt/builds/5179), [auto-mac-64-nopt-t](http://buildbot.rust-lang.org/builders/auto-mac-64-nopt-t/builds/5173), [auto-mac-64-opt](http://buildbot.rust-lang.org/builders/auto-mac-64-opt/builds/5146), [auto-win-gnu-32-nopt-t](http://buildbot.rust-lang.org/builders/auto-win-gnu-32-nopt-t/builds/124), [auto-win-gnu-32-opt](http://buildbot.rust-lang.org/builders/auto-win-gnu-32-opt/builds/124), [auto-win-gnu-64-nopt-t](http://buildbot.rust-lang.org/builders/auto-win-gnu-64-nopt-t/builds/124), [auto-win-gnu-64-opt](http://buildbot.rust-lang.org/builders/auto-win-gnu-64-opt/builds/123)\n",
    "author_association": "COLLABORATOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/106746036/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
