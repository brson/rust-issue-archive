[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63284639",
    "html_url": "https://github.com/rust-lang/rust/issues/19028#issuecomment-63284639",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19028",
    "id": 63284639,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMjg0NjM5",
    "user": {
      "login": "mahkoh",
      "id": 1882250,
      "node_id": "MDQ6VXNlcjE4ODIyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1882250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahkoh",
      "html_url": "https://github.com/mahkoh",
      "followers_url": "https://api.github.com/users/mahkoh/followers",
      "following_url": "https://api.github.com/users/mahkoh/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahkoh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahkoh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahkoh/subscriptions",
      "organizations_url": "https://api.github.com/users/mahkoh/orgs",
      "repos_url": "https://api.github.com/users/mahkoh/repos",
      "events_url": "https://api.github.com/users/mahkoh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahkoh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-17T10:23:22Z",
    "updated_at": "2014-11-17T10:23:22Z",
    "body": "And even if the error reporting were better, it should not print to stdout.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63284639/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63284992",
    "html_url": "https://github.com/rust-lang/rust/issues/19028#issuecomment-63284992",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19028",
    "id": 63284992,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMjg0OTky",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-17T10:26:58Z",
    "updated_at": "2014-11-17T10:26:58Z",
    "body": "It shouldn't really do anything if `close` fails there. There are very few errors it will report anyway, since it doesn't block until writes are done. The caller needs to use fsync if they care.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63284992/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63426325",
    "html_url": "https://github.com/rust-lang/rust/issues/19028#issuecomment-63426325",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19028",
    "id": 63426325,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNDI2MzI1",
    "user": {
      "login": "nodakai",
      "id": 90726,
      "node_id": "MDQ6VXNlcjkwNzI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/90726?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nodakai",
      "html_url": "https://github.com/nodakai",
      "followers_url": "https://api.github.com/users/nodakai/followers",
      "following_url": "https://api.github.com/users/nodakai/following{/other_user}",
      "gists_url": "https://api.github.com/users/nodakai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nodakai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nodakai/subscriptions",
      "organizations_url": "https://api.github.com/users/nodakai/orgs",
      "repos_url": "https://api.github.com/users/nodakai/repos",
      "events_url": "https://api.github.com/users/nodakai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nodakai/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-18T05:56:58Z",
    "updated_at": "2014-11-18T05:56:58Z",
    "body": "Shouldn't `drop()` panic upon catching the error of `close(2)`?  Because it implies there's an error in the application logic from which we have no way to recover.  I think this is what panicking is for.\n\nComparing the file descriptor value with `libc::STDERR_FILENO`, i.e. `2` is not very meaningful, as shown by this C code:\n\n``` c\n#include <stdio.h>\n#include <sys/types.h>\n#include <sys/stat.h>\n#include <fcntl.h>\n#include <unistd.h>\n\nint main(void) {\n    int fd;\n\n    fd = open(\"/\", 0);\n    printf(\"%d\\n\", fd); /* => 3 */\n    close(fd);\n\n    fclose(stdin);\n\n    fd = open(\"/\", 0);\n    printf(\"%d\\n\", fd); /* => 0 */\n    close(fd);\n\n    return 0;\n}\n```\n\n> closing stdio file handles makes no sense\n\nWhy?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63426325/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63427192",
    "html_url": "https://github.com/rust-lang/rust/issues/19028#issuecomment-63427192",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19028",
    "id": 63427192,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNDI3MTky",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-18T06:11:42Z",
    "updated_at": "2014-11-18T06:11:42Z",
    "body": "@nodakai: It's not sane to panic in a destructor. An `EIO` error from close does not indicate a bug in the application and it shouldn't bring it down. The caller can check for errors with `fsync` if they need a guarantee that the operation succeeded. The `close` call does not block until it is flushed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63427192/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63427280",
    "html_url": "https://github.com/rust-lang/rust/issues/19028#issuecomment-63427280",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19028",
    "id": 63427280,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNDI3Mjgw",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-18T06:13:09Z",
    "updated_at": "2014-11-18T06:13:09Z",
    "body": "Panic in a destructor will cause resource leaks in other types, along with bringing down the entire task and aborting the process if it was already unwinding. It doesn't ever make sense to do it deliberately.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63427280/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63557071",
    "html_url": "https://github.com/rust-lang/rust/issues/19028#issuecomment-63557071",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19028",
    "id": 63557071,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNTU3MDcx",
    "user": {
      "login": "nodakai",
      "id": 90726,
      "node_id": "MDQ6VXNlcjkwNzI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/90726?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nodakai",
      "html_url": "https://github.com/nodakai",
      "followers_url": "https://api.github.com/users/nodakai/followers",
      "following_url": "https://api.github.com/users/nodakai/following{/other_user}",
      "gists_url": "https://api.github.com/users/nodakai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nodakai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nodakai/subscriptions",
      "organizations_url": "https://api.github.com/users/nodakai/orgs",
      "repos_url": "https://api.github.com/users/nodakai/repos",
      "events_url": "https://api.github.com/users/nodakai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nodakai/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-11-18T22:24:54Z",
    "updated_at": "2014-11-18T22:27:37Z",
    "body": "@thestinger Hmm, points taken; panicking in the middle of stack unwinding is problematic, at least as of now (I hope we can devise a saner semantics than C++ for it...)  And when I wrote \"logic error in an application,\" I had only `EBADF` in my mind.\n\n> The close call does not block until it is flushed.\n\nI assume you meant \"does not return\".  Right, Linux NFS, among others, does synchronization upon closing an fd.  Then `EINTR` and `EIO` are no surprise.\n\n> The caller can check for errors with fsync if they need a guarantee that the operation succeeded.\n\nI don't quite understand why you mentioned `fsync(2)` here.  HW-level data integrity and behavior of syscalls (what did you mean by \"the operation\"?) are two different things.  Please also remember neither `fsync(2)` nor `fdatasync(2)` work with pipes:\n\n``` c\n#define _POSIX_C_SOURCE 200112L\n#include <stdio.h>\n#include <unistd.h>\n\nint main(void) {\n    int fds[2];\n    if (pipe(fds)) perror(\"pipe(2)\");\n    if (fsync(fds[0])) perror(\"fsync(2)\");\n    if (fsync(fds[1])) perror(\"fsync(2)\");\n    if (fdatasync(fds[0])) perror(\"fdatasync(2)\");\n    if (fdatasync(fds[1])) perror(\"fdatasync(2)\");\n    return 0;\n}\n```\n\n```\nfsync(2): Invalid argument\nfsync(2): Invalid argument\nfdatasync(2): Invalid argument\nfdatasync(2): Invalid argument\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/63557071/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74430744",
    "html_url": "https://github.com/rust-lang/rust/issues/19028#issuecomment-74430744",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19028",
    "id": 74430744,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NDMwNzQ0",
    "user": {
      "login": "mahkoh",
      "id": 1882250,
      "node_id": "MDQ6VXNlcjE4ODIyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1882250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mahkoh",
      "html_url": "https://github.com/mahkoh",
      "followers_url": "https://api.github.com/users/mahkoh/followers",
      "following_url": "https://api.github.com/users/mahkoh/following{/other_user}",
      "gists_url": "https://api.github.com/users/mahkoh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mahkoh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mahkoh/subscriptions",
      "organizations_url": "https://api.github.com/users/mahkoh/orgs",
      "repos_url": "https://api.github.com/users/mahkoh/repos",
      "events_url": "https://api.github.com/users/mahkoh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mahkoh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-15T18:52:04Z",
    "updated_at": "2015-02-15T18:52:04Z",
    "body": "Still broken.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74430744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91728514",
    "html_url": "https://github.com/rust-lang/rust/issues/19028#issuecomment-91728514",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19028",
    "id": 91728514,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkxNzI4NTE0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-11T00:29:29Z",
    "updated_at": "2015-04-11T00:29:29Z",
    "body": "Changed in https://github.com/rust-lang/rust/commit/eadc3bcd676277d72c211bde6c20f7036339fd84\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/91728514/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
