[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228892054",
    "html_url": "https://github.com/rust-lang/rust/issues/25049#issuecomment-228892054",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25049",
    "id": 228892054,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODg5MjA1NA==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-27T22:13:35Z",
    "updated_at": "2016-06-27T22:13:35Z",
    "body": "Triage: here's the smallest reproduction:\n\n``` rust\npub fn foo(mut buf: &mut [u8]) {\n    &mut buf[..];\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/228892054/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/318870987",
    "html_url": "https://github.com/rust-lang/rust/issues/25049#issuecomment-318870987",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25049",
    "id": 318870987,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxODg3MDk4Nw==",
    "user": {
      "login": "ivanbakel",
      "id": 20319565,
      "node_id": "MDQ6VXNlcjIwMzE5NTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/20319565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ivanbakel",
      "html_url": "https://github.com/ivanbakel",
      "followers_url": "https://api.github.com/users/ivanbakel/followers",
      "following_url": "https://api.github.com/users/ivanbakel/following{/other_user}",
      "gists_url": "https://api.github.com/users/ivanbakel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ivanbakel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ivanbakel/subscriptions",
      "organizations_url": "https://api.github.com/users/ivanbakel/orgs",
      "repos_url": "https://api.github.com/users/ivanbakel/repos",
      "events_url": "https://api.github.com/users/ivanbakel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ivanbakel/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-07-30T01:25:15Z",
    "updated_at": "2017-07-30T01:25:15Z",
    "body": "Small update while looking to this: the borrow checker looks like it's doing a ref adjustment when the types are already compatible. Another minimal example is this:\r\n\r\n     pub fn foo(mut x : &mut u8) -> &mut u8 {\r\n        let y = x; // x is marked as not needing to be mutable\r\n        let y : &mut u8 = x; // x is not marked as not needing to be mutable\r\n        y // In either case, y doesn't have \"the same type\" as the return type, \r\n          // so an adjustment is made, meaning you can mark y as mut, and\r\n          // no warning will be given\r\n     }\r\n\r\nI might be misunderstanding the borrow checking code, but it looks the adjustment means there's a second, implicit borrow, equivalent to a `&mut (*y)` - similarly, if `y : &mut u8 = x`, then `y : &mut u8 = &mut (*x)`. Since the borrow checker recognises the mutable borrow, it tries to mark the use of `mut` on `*y` (and this marks `y`)  in `mark_loan_paths_as_mutated`.\r\n\r\nWorking on a fix, but it's not clear if the issue is with what's being marked as used, or what the conditions are for it happening.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/318870987/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
