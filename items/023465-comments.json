[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/82730326",
    "html_url": "https://github.com/rust-lang/rust/issues/23465#issuecomment-82730326",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23465",
    "id": 82730326,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNzMwMzI2",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-03-18T04:07:52Z",
    "updated_at": "2015-03-18T04:07:52Z",
    "body": "These are actually intentionally not sendable. To [quote the standard](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_mutex_lock.html):\n\n> If a thread attempts to unlock a mutex that it has not locked or a mutex which is unlocked, undefined behavior results.\n\nAs a result these structures are not sendable as we must guarantee that the lock is only released on the same thread that acquired it.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/82730326/reactions",
      "total_count": 22,
      "+1": 9,
      "-1": 1,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 12,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1192788697",
    "html_url": "https://github.com/rust-lang/rust/issues/23465#issuecomment-1192788697",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23465",
    "id": 1192788697,
    "node_id": "IC_kwDOAAsO6M5HGILZ",
    "user": {
      "login": "smessmer",
      "id": 2373925,
      "node_id": "MDQ6VXNlcjIzNzM5MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2373925?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smessmer",
      "html_url": "https://github.com/smessmer",
      "followers_url": "https://api.github.com/users/smessmer/followers",
      "following_url": "https://api.github.com/users/smessmer/following{/other_user}",
      "gists_url": "https://api.github.com/users/smessmer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smessmer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smessmer/subscriptions",
      "organizations_url": "https://api.github.com/users/smessmer/orgs",
      "repos_url": "https://api.github.com/users/smessmer/repos",
      "events_url": "https://api.github.com/users/smessmer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smessmer/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-07-22T17:25:52Z",
    "updated_at": "2022-07-22T17:25:52Z",
    "body": "Since Rust 1.62 has a new Mutex implementation without pthread, should this be reconsidered?",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1192788697/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1274901382",
    "html_url": "https://github.com/rust-lang/rust/issues/23465#issuecomment-1274901382",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23465",
    "id": 1274901382,
    "node_id": "IC_kwDOAAsO6M5L_XOG",
    "user": {
      "login": "masklinn",
      "id": 6993,
      "node_id": "MDQ6VXNlcjY5OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6993?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/masklinn",
      "html_url": "https://github.com/masklinn",
      "followers_url": "https://api.github.com/users/masklinn/followers",
      "following_url": "https://api.github.com/users/masklinn/following{/other_user}",
      "gists_url": "https://api.github.com/users/masklinn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/masklinn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/masklinn/subscriptions",
      "organizations_url": "https://api.github.com/users/masklinn/orgs",
      "repos_url": "https://api.github.com/users/masklinn/repos",
      "events_url": "https://api.github.com/users/masklinn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/masklinn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-10-11T15:39:56Z",
    "updated_at": "2022-10-11T15:39:56Z",
    "body": "> Since Rust 1.62 has a new Mutex implementation without pthread, should this be reconsidered?\r\n\r\nUnix-like OS without futexes still use pthread locks, and for windows\r\n\r\n> SRW lock must be released by the same thread that acquired it. \r\n\r\nI also looked around and didn't find any actually stated guarantee that futexes can be released by a non-owning thread.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1274901382/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1283800803",
    "html_url": "https://github.com/rust-lang/rust/issues/23465#issuecomment-1283800803",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23465",
    "id": 1283800803,
    "node_id": "IC_kwDOAAsO6M5MhT7j",
    "user": {
      "login": "haraldh",
      "id": 427825,
      "node_id": "MDQ6VXNlcjQyNzgyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/427825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haraldh",
      "html_url": "https://github.com/haraldh",
      "followers_url": "https://api.github.com/users/haraldh/followers",
      "following_url": "https://api.github.com/users/haraldh/following{/other_user}",
      "gists_url": "https://api.github.com/users/haraldh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haraldh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haraldh/subscriptions",
      "organizations_url": "https://api.github.com/users/haraldh/orgs",
      "repos_url": "https://api.github.com/users/haraldh/repos",
      "events_url": "https://api.github.com/users/haraldh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haraldh/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-10-19T10:43:48Z",
    "updated_at": "2022-10-19T10:43:48Z",
    "body": "> > Since Rust 1.62 has a new Mutex implementation without pthread, should this be reconsidered?\r\n> \r\n> Unix-like OS without futexes still use pthread locks, and for windows\r\n> \r\n> > SRW lock must be released by the same thread that acquired it.\r\n> \r\n> I also looked around and didn't find any actually stated guarantee that futexes can be released by a non-owning thread.\r\n\r\n@masklinn a futex is just an AtomicU32. As long as the thread has access to the shared memory it can \"own\" it.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1283800803/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3197562860",
    "html_url": "https://github.com/rust-lang/rust/issues/23465#issuecomment-3197562860",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/23465",
    "id": 3197562860,
    "node_id": "IC_kwDOAAsO6M6-lu_s",
    "user": {
      "login": "Kixunil",
      "id": 1178779,
      "node_id": "MDQ6VXNlcjExNzg3Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1178779?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kixunil",
      "html_url": "https://github.com/Kixunil",
      "followers_url": "https://api.github.com/users/Kixunil/followers",
      "following_url": "https://api.github.com/users/Kixunil/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kixunil/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kixunil/subscriptions",
      "organizations_url": "https://api.github.com/users/Kixunil/orgs",
      "repos_url": "https://api.github.com/users/Kixunil/repos",
      "events_url": "https://api.github.com/users/Kixunil/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kixunil/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2025-08-18T16:12:46Z",
    "updated_at": "2025-08-18T16:12:46Z",
    "body": "FTR, one particular place where this gets annoying is in `StdinLock` which contains `MutexGuard` and is thus not `Send`, however some service implementations need to lock stdin once at the beginning and operate on it during the duration of the entire program. A non-ideal, but I guess better-than-nothing solution would be to have a `lock_forever` method that simply doesn't unlock on `Drop`.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3197562860/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
