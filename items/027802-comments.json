[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/134463349",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-134463349",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 134463349,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNDQ2MzM0OQ==",
    "user": {
      "login": "eminence",
      "id": 402454,
      "node_id": "MDQ6VXNlcjQwMjQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/402454?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eminence",
      "html_url": "https://github.com/eminence",
      "followers_url": "https://api.github.com/users/eminence/followers",
      "following_url": "https://api.github.com/users/eminence/following{/other_user}",
      "gists_url": "https://api.github.com/users/eminence/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eminence/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eminence/subscriptions",
      "organizations_url": "https://api.github.com/users/eminence/orgs",
      "repos_url": "https://api.github.com/users/eminence/repos",
      "events_url": "https://api.github.com/users/eminence/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eminence/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-08-25T03:23:35Z",
    "updated_at": "2015-08-25T03:23:35Z",
    "body": "It would be nice if `std::io::Chars` was an `Iterator<Item=char>`, just like `std::str::Chars`.   I don't have a proposal for how decoding errors should be handled, though.  \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/134463349/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/139120937",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-139120937",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 139120937,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzOTEyMDkzNw==",
    "user": {
      "login": "gyscos",
      "id": 564903,
      "node_id": "MDQ6VXNlcjU2NDkwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/564903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gyscos",
      "html_url": "https://github.com/gyscos",
      "followers_url": "https://api.github.com/users/gyscos/followers",
      "following_url": "https://api.github.com/users/gyscos/following{/other_user}",
      "gists_url": "https://api.github.com/users/gyscos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gyscos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gyscos/subscriptions",
      "organizations_url": "https://api.github.com/users/gyscos/orgs",
      "repos_url": "https://api.github.com/users/gyscos/repos",
      "events_url": "https://api.github.com/users/gyscos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gyscos/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-09-10T05:29:42Z",
    "updated_at": "2015-09-10T06:07:58Z",
    "body": "If we want to make `std::io::Chars` a simple iterator on `char`, a solution is to have it return `None` on a UTF-8 error, and set an error flag in the `Chars` itself (with an associated `was_valid_utf8()` method or something). An empty sequence is considered valid UTF-8.\nIt does make error detection slightly less convenient, as writing `for c in reader.chars()` does not keep the `Chars` for later verification.\nHere is an example use-case where we try to recover after an invalid sub-sequence:\n\n``` rust\nlet mut chars = reader.chars();\nloop {\n    for c in chars {\n        // ...\n    }\n    if chars.was_valid_utf8() { break; }\n    println!(\"Encountered invalid byte sequence.\");\n}\n```\n\nOr it could provide a more informative message, similar to the current CharsError.\nMaybe this could apply to the other adapters as well? Or is this a bad pattern?\n\nOn the other hand, it is not so difficult to treat the `Result` item explicitly, or to wrap the current `Chars` to get the behavior I described (an unwrapper wrapping, interesting notion), so maybe the current situation is acceptable as is.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/139120937/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153545913",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-153545913",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 153545913,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MzU0NTkxMw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-04T01:52:39Z",
    "updated_at": "2015-11-04T01:52:39Z",
    "body": "Nominating for 1.6 discussion\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/153545913/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154137732",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154137732",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154137732,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDEzNzczMg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-05T17:56:21Z",
    "updated_at": "2015-11-05T17:56:21Z",
    "body": ":bell: This issue is now entering its cycle-long **final comment period** for deprecation :bell:\n\nThese functions seem like excellent candidates to move out-of-tree into an `ioutil` crate or something like that. This deprecation won't actually happen until that crate exists, however.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154137732/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154153504",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154153504",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154153504,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDE1MzUwNA==",
    "user": {
      "login": "abonander",
      "id": 3198595,
      "node_id": "MDQ6VXNlcjMxOTg1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3198595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abonander",
      "html_url": "https://github.com/abonander",
      "followers_url": "https://api.github.com/users/abonander/followers",
      "following_url": "https://api.github.com/users/abonander/following{/other_user}",
      "gists_url": "https://api.github.com/users/abonander/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abonander/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abonander/subscriptions",
      "organizations_url": "https://api.github.com/users/abonander/orgs",
      "repos_url": "https://api.github.com/users/abonander/repos",
      "events_url": "https://api.github.com/users/abonander/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abonander/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-05T18:59:30Z",
    "updated_at": "2015-11-05T18:59:30Z",
    "body": "`.chars()` is a nice operation to have, it'd be a shame to have to pull in a separate crate just to get such a useful iterator. The error type doesn't seem problematic; you'd have to handle an `io::Error` anyways.\n\nPerhaps a `.chars_lossy()` iterator that yields the UTF-8 replacement character on a UTF-8 error and stops on the first `io::Error`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154153504/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154195312",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154195312",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154195312,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDE5NTMxMg==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-05T21:16:37Z",
    "updated_at": "2015-11-05T21:16:37Z",
    "body": "I\u2019m in favor of stabilizing `Read::chars` eventually, but it\u2019s not ready yet:\n\nIt\u2019s unstable because\n\n> the semantics of a partial read/write of where errors happen is currently unclear and may change\n\n(The same would apply to `chars_lossy`.)\n\nThis behavior should be per Unicode Standard \u00a75.22 \"Best Practice for U+FFFD Substitution\" http://www.unicode.org/versions/Unicode8.0.0/ch05.pdf#G40630\n\nRoughly, that means stopping at the first unexpected byte. This is **not** the behavior currently implemented, which reads as many bytes as indicated by the first byte and then checks them. This is a problem as, with only `Read` (as opposed to, say, `BufRead`), you can\u2019t put a byte \"back\" in the stream after reading it.\n\nHere are some failing tests.\n\n``` rust\n        let mut buf = Cursor::new(&b\"\\xf0\\x9fabc\"[..]);\n        let mut chars = buf.chars();\n        assert!(match chars.next() { Some(Err(CharsError::NotUtf8)) => true, _ => false });\n        assert_eq!(chars.next().unwrap().unwrap(), 'a');\n        assert_eq!(chars.next().unwrap().unwrap(), 'b');\n        assert_eq!(chars.next().unwrap().unwrap(), 'c');\n        assert!(chars.next().is_none());\n\n        let mut buf = Cursor::new(&b\"\\xed\\xa0\\x80a\"[..]);\n        let mut chars = buf.chars();\n        assert!(match chars.next() { Some(Err(CharsError::NotUtf8)) => true, _ => false });\n        assert_eq!(chars.next().unwrap().unwrap(), 'a');\n        assert!(chars.next().is_none());\n\n        let mut buf = Cursor::new(&b\"\\xed\\xa0a\"[..]);\n        let mut chars = buf.chars();\n        assert!(match chars.next() { Some(Err(CharsError::NotUtf8)) => true, _ => false });\n        assert_eq!(chars.next().unwrap().unwrap(), 'a');\n        assert!(chars.next().is_none());\n```\n\nI\u2019ve looked at fixing this, but it basically involves duplicating all of the UTF-8 decoding logic from `str::from_utf8`, which I\u2019m not really happy with. (That many more tests would need to be added.) I\u2019ll try to think of some way to have a more basic decoder that can be used by both.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154195312/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154200298",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154200298",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154200298,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDIwMDI5OA==",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-05T21:36:34Z",
    "updated_at": "2015-11-05T21:36:34Z",
    "body": "Moving `chars` to `BufRead` does not seem unreasonable.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154200298/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154201989",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154201989",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154201989,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDIwMTk4OQ==",
    "user": {
      "login": "abonander",
      "id": 3198595,
      "node_id": "MDQ6VXNlcjMxOTg1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3198595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abonander",
      "html_url": "https://github.com/abonander",
      "followers_url": "https://api.github.com/users/abonander/followers",
      "following_url": "https://api.github.com/users/abonander/following{/other_user}",
      "gists_url": "https://api.github.com/users/abonander/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abonander/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abonander/subscriptions",
      "organizations_url": "https://api.github.com/users/abonander/orgs",
      "repos_url": "https://api.github.com/users/abonander/repos",
      "events_url": "https://api.github.com/users/abonander/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abonander/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-05T21:41:44Z",
    "updated_at": "2015-11-05T21:46:53Z",
    "body": "@sfackler I concur. I was thinking the exact same thing. In fact, it is unfortunate that `Read::bytes()` is already stabilized because, like `chars()`, it is almost always preferable to have it on a buffered source. A lot of the `Read` types really do not tolerate small, frequent reads well (#28073) \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154201989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154456764",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154456764",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154456764,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDQ1Njc2NA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-06T16:21:03Z",
    "updated_at": "2015-11-06T16:21:03Z",
    "body": "While I agree that `chars` is useful, questions like those brought up by @SimonSapin make me think that it's too weighty/controversial to be in the standard library. I'm not sure that this is really ever going to be seriously used either due to the performance concerns, and I agree that `bytes` is a bit of a misnomer in that it's super non-performant much of the time as well.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154456764/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154474704",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154474704",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154474704,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDQ3NDcwNA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-06T17:08:27Z",
    "updated_at": "2015-11-06T17:08:27Z",
    "body": "How does `bytes` perform when used with `BufReader<_>`?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154474704/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154475480",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154475480",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154475480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDQ3NTQ4MA==",
    "user": {
      "login": "abonander",
      "id": 3198595,
      "node_id": "MDQ6VXNlcjMxOTg1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3198595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abonander",
      "html_url": "https://github.com/abonander",
      "followers_url": "https://api.github.com/users/abonander/followers",
      "following_url": "https://api.github.com/users/abonander/following{/other_user}",
      "gists_url": "https://api.github.com/users/abonander/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abonander/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abonander/subscriptions",
      "organizations_url": "https://api.github.com/users/abonander/orgs",
      "repos_url": "https://api.github.com/users/abonander/repos",
      "events_url": "https://api.github.com/users/abonander/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abonander/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-06T17:11:57Z",
    "updated_at": "2015-11-06T17:11:57Z",
    "body": "@SimonSapin there were some perf numbers reading from a file with `bytes` in #28073. The difference is pretty significant. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154475480/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154476637",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154476637",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154476637,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDQ3NjYzNw==",
    "user": {
      "login": "abonander",
      "id": 3198595,
      "node_id": "MDQ6VXNlcjMxOTg1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3198595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abonander",
      "html_url": "https://github.com/abonander",
      "followers_url": "https://api.github.com/users/abonander/followers",
      "following_url": "https://api.github.com/users/abonander/following{/other_user}",
      "gists_url": "https://api.github.com/users/abonander/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abonander/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abonander/subscriptions",
      "organizations_url": "https://api.github.com/users/abonander/orgs",
      "repos_url": "https://api.github.com/users/abonander/repos",
      "events_url": "https://api.github.com/users/abonander/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abonander/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-06T17:17:08Z",
    "updated_at": "2015-11-06T17:17:08Z",
    "body": "I think `chars` would work pretty well if implemented on top of a buffer. It doesn't have to consume any bytes it doesn't need to, so no unnecessary loss of data. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154476637/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154479804",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154479804",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154479804,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDQ3OTgwNA==",
    "user": {
      "login": "softprops",
      "id": 2242,
      "node_id": "MDQ6VXNlcjIyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/softprops",
      "html_url": "https://github.com/softprops",
      "followers_url": "https://api.github.com/users/softprops/followers",
      "following_url": "https://api.github.com/users/softprops/following{/other_user}",
      "gists_url": "https://api.github.com/users/softprops/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/softprops/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/softprops/subscriptions",
      "organizations_url": "https://api.github.com/users/softprops/orgs",
      "repos_url": "https://api.github.com/users/softprops/repos",
      "events_url": "https://api.github.com/users/softprops/events{/privacy}",
      "received_events_url": "https://api.github.com/users/softprops/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-06T17:31:24Z",
    "updated_at": "2015-11-06T17:31:24Z",
    "body": "I may be doing something hugely inefficient here but I really needed [read.chars](https://github.com/softprops/jed/blob/master/src/lib.rs#L36) for a crate I was working on that attempted to produce an iterator of rustc serialize json items from a read stream. I had to fallback on vendoring most of the source around read.chars to as a workaround to get it working on stable awhile back. It was almost a requirement as the rustc builder for json requires a iterable of chars. It would be really nice to have this stabilized if env in some form of method name that implied lossyness.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154479804/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154512182",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154512182",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154512182,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDUxMjE4Mg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-06T19:39:59Z",
    "updated_at": "2015-11-06T19:39:59Z",
    "body": "@SimonSapin \n\nI would expect it to perform much better than on a raw `File` because the number of syscalls issued is far less, but on the other hand it is likely much slower than another equivalent operation such as mmap + iterate the bytes via a slice.\n\n---\n\n@cybergeek94 \n\nYeah I suspect the performance isn't _abysmal_, but when compared to `str::chars` it's likely still much slower (just more stuff that has to be checked during I/O)\n\n---\n\n@softprops \n\nYeah that's actually a case where I believe `chars` is inappropriate because it's just going to be inherently slower than any equivalent operation of \"iterate over the characters of this string\". For example a json deserializer may want to take an iterator of characters, but the actual iterator does something like `BufReader` where it reads a huge string, then literally uses `str::chars`, only reading a new string once it's exhausted (handling the boundary). \n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154512182/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154516146",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154516146",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154516146,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDUxNjE0Ng==",
    "user": {
      "login": "gyscos",
      "id": 564903,
      "node_id": "MDQ6VXNlcjU2NDkwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/564903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gyscos",
      "html_url": "https://github.com/gyscos",
      "followers_url": "https://api.github.com/users/gyscos/followers",
      "following_url": "https://api.github.com/users/gyscos/following{/other_user}",
      "gists_url": "https://api.github.com/users/gyscos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gyscos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gyscos/subscriptions",
      "organizations_url": "https://api.github.com/users/gyscos/orgs",
      "repos_url": "https://api.github.com/users/gyscos/repos",
      "events_url": "https://api.github.com/users/gyscos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gyscos/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-06T19:57:09Z",
    "updated_at": "2015-11-06T19:58:37Z",
    "body": "@alexcrichton \nWouldn't a `chars` method on a `BufReader`-backed `Read` serve this exact purpose? It reads a big slice of bytes, hopefully in UTF-8 format, which is exactly what a string would be; shouldn't it be the same then to iterate chars on these bytes compared to using `str::chars`?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154516146/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154520284",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154520284",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154520284,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDUyMDI4NA==",
    "user": {
      "login": "softprops",
      "id": 2242,
      "node_id": "MDQ6VXNlcjIyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/softprops",
      "html_url": "https://github.com/softprops",
      "followers_url": "https://api.github.com/users/softprops/followers",
      "following_url": "https://api.github.com/users/softprops/following{/other_user}",
      "gists_url": "https://api.github.com/users/softprops/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/softprops/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/softprops/subscriptions",
      "organizations_url": "https://api.github.com/users/softprops/orgs",
      "repos_url": "https://api.github.com/users/softprops/repos",
      "events_url": "https://api.github.com/users/softprops/events{/privacy}",
      "received_events_url": "https://api.github.com/users/softprops/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-06T20:13:56Z",
    "updated_at": "2015-11-06T20:13:56Z",
    "body": "> Yeah that's actually a case where I believe chars is inappropriate because it's just going to be inherently slower than any equivalent operation of \"iterate over the characters of this string\"\n\nIn this case it's a literally a stream of json I'm working with. My use case was interfacing with dockers [streaming json](https://github.com/softprops/shiplift/blob/master/src/lib.rs#L191-L192) endpoints. In which case json objects are pushed through a streamed response. I'm not sure how I'd accomplish that with a string.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154520284/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154561973",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154561973",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154561973,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDU2MTk3Mw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-06T22:28:03Z",
    "updated_at": "2015-11-06T22:28:03Z",
    "body": "@alexcrichton Hnadling the boundary is tricky. It\u2019s handled in https://github.com/SimonSapin/rust-utf8/blob/master/lib.rs\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154561973/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154572091",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154572091",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154572091,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDU3MjA5MQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-06T23:10:50Z",
    "updated_at": "2015-11-06T23:10:50Z",
    "body": "@Gyscos hm yes, I guess it would! That would definitely mean that `chars` could only be on `BufReader`.\n\n@softprops in theory you can transform an iterator of `&str` slices into an iterator of `char` values, which is kinda what `BufReader` would be doing\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154572091/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154576075",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154576075",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154576075,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDU3NjA3NQ==",
    "user": {
      "login": "gyscos",
      "id": 564903,
      "node_id": "MDQ6VXNlcjU2NDkwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/564903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gyscos",
      "html_url": "https://github.com/gyscos",
      "followers_url": "https://api.github.com/users/gyscos/followers",
      "following_url": "https://api.github.com/users/gyscos/following{/other_user}",
      "gists_url": "https://api.github.com/users/gyscos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gyscos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gyscos/subscriptions",
      "organizations_url": "https://api.github.com/users/gyscos/orgs",
      "repos_url": "https://api.github.com/users/gyscos/repos",
      "events_url": "https://api.github.com/users/gyscos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gyscos/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-06T23:29:13Z",
    "updated_at": "2015-11-06T23:29:13Z",
    "body": "So a solution is to move `chars` to `BufRead` as @sfackler mentionned. I was worried this would force to needlessly wrap some `Read`ers that didn't _need_ to, but I just noticed `Cursor<Vec<u8>>` and `Stdin` already provide a `BufRead` access.\nBut all of that is about the performance aspect.\nConcerning the error handling, `BufRead::lines` return an iterator on `io::Result<String>` to properly propagate the error, which includes invalid UTF-8 (by returning a `ErrorKind::InvalidData`). Couldn't `chars` do the same, instead of using a custom error?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154576075/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154580334",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154580334",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154580334,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDU4MDMzNA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-06T23:53:55Z",
    "updated_at": "2015-11-06T23:53:55Z",
    "body": "Yeah I have a feeling that would be sufficient, there's more fine-grained error information we can give (such as the bytes that were read, if any), but iterators like `lines` are already lossy where you lose access to the underlying data if there's an error, so it's probably not too bad.\n\nIt does raise a question though that if `chars` exists only on `BufRead` for performance reasons, why does `bytes` not exist only on `BufRead`? Just a minor inconsistency.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154580334/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154580845",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154580845",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154580845,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDU4MDg0NQ==",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-06T23:57:02Z",
    "updated_at": "2015-11-06T23:57:02Z",
    "body": "I think the reasoning to move `chars` to `BufRead` is for correctness wrt @SimonSapin's comment - to be able to peek at the next byte without consuming it.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154580845/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154582045",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154582045",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154582045,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDU4MjA0NQ==",
    "user": {
      "login": "abonander",
      "id": 3198595,
      "node_id": "MDQ6VXNlcjMxOTg1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3198595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abonander",
      "html_url": "https://github.com/abonander",
      "followers_url": "https://api.github.com/users/abonander/followers",
      "following_url": "https://api.github.com/users/abonander/following{/other_user}",
      "gists_url": "https://api.github.com/users/abonander/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abonander/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abonander/subscriptions",
      "organizations_url": "https://api.github.com/users/abonander/orgs",
      "repos_url": "https://api.github.com/users/abonander/repos",
      "events_url": "https://api.github.com/users/abonander/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abonander/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-07T00:04:48Z",
    "updated_at": "2015-11-07T00:04:48Z",
    "body": "The performance issue being alleviated is only a benevolent side-effect. `bytes` doesn't require a buffer for correctness.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154582045/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154592313",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154592313",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154592313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDU5MjMxMw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-07T01:02:33Z",
    "updated_at": "2015-11-07T01:02:33Z",
    "body": "Hm I don't think that this is a correctness problem that can be solved by \"just moving to `BufRead`\", it's always a possibility that the buffer is 1 byte in size so it behaves the same as reading one byte at a time. Basically `BufRead` just reduces the number of calls to `read`, but it essentially always has the same problems wrt partial reads, short reads, and consuming data.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154592313/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154593216",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154593216",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154593216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDU5MzIxNg==",
    "user": {
      "login": "gyscos",
      "id": 564903,
      "node_id": "MDQ6VXNlcjU2NDkwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/564903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gyscos",
      "html_url": "https://github.com/gyscos",
      "followers_url": "https://api.github.com/users/gyscos/followers",
      "following_url": "https://api.github.com/users/gyscos/following{/other_user}",
      "gists_url": "https://api.github.com/users/gyscos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gyscos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gyscos/subscriptions",
      "organizations_url": "https://api.github.com/users/gyscos/orgs",
      "repos_url": "https://api.github.com/users/gyscos/repos",
      "events_url": "https://api.github.com/users/gyscos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gyscos/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-07T01:07:30Z",
    "updated_at": "2015-11-07T01:07:30Z",
    "body": "@SimonSapin was saying that `BufReader` could potentially put things back in the buffer, but it's not actually exposed by the `BufRead` trait.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154593216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154593908",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154593908",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154593908,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDU5MzkwOA==",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-07T01:13:39Z",
    "updated_at": "2015-11-07T01:13:39Z",
    "body": "You don't put things back in the buffer, you just don't call `consume` on things you don't want to, right?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154593908/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154595851",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-154595851",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 154595851,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDU5NTg1MQ==",
    "user": {
      "login": "abonander",
      "id": 3198595,
      "node_id": "MDQ6VXNlcjMxOTg1OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3198595?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abonander",
      "html_url": "https://github.com/abonander",
      "followers_url": "https://api.github.com/users/abonander/followers",
      "following_url": "https://api.github.com/users/abonander/following{/other_user}",
      "gists_url": "https://api.github.com/users/abonander/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abonander/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abonander/subscriptions",
      "organizations_url": "https://api.github.com/users/abonander/orgs",
      "repos_url": "https://api.github.com/users/abonander/repos",
      "events_url": "https://api.github.com/users/abonander/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abonander/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-07T01:34:49Z",
    "updated_at": "2015-11-07T01:34:49Z",
    "body": "> it's always a possibility that the buffer is 1 byte in size so it behaves the same as reading one byte at a time. \n\nIf only `BufRead` had an API to force an early read into the buffer... but I digress. I closed that RFC because I didn't have the time or the energy to argue for it.\n\nThe iterator can always consume the last bytes out of the buffer to force it to read more. If the next read is too short (a partial read returning < 4 bytes? honestly, does that even happen?), it can be considered an error just like if we hit EOF while expecting more bytes.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/154595851/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155548436",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-155548436",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 155548436,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NTU0ODQzNg==",
    "user": {
      "login": "gyscos",
      "id": 564903,
      "node_id": "MDQ6VXNlcjU2NDkwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/564903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gyscos",
      "html_url": "https://github.com/gyscos",
      "followers_url": "https://api.github.com/users/gyscos/followers",
      "following_url": "https://api.github.com/users/gyscos/following{/other_user}",
      "gists_url": "https://api.github.com/users/gyscos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gyscos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gyscos/subscriptions",
      "organizations_url": "https://api.github.com/users/gyscos/orgs",
      "repos_url": "https://api.github.com/users/gyscos/repos",
      "events_url": "https://api.github.com/users/gyscos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gyscos/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-10T19:56:53Z",
    "updated_at": "2015-11-10T19:56:53Z",
    "body": "Compared to a `Read`, the `BufRead` makes it at least _possible_ to be correct: since it should only consume the longest correct subsequence, it could read the bytes one by one and consume them only when they keep the subsequence valid. Only, as @SimonSapin said, this would mean duplicating some code for the checks.\nSo it _is_ possible to implement the correct behaviour for `BufRead` (while it is not for `Read`), but it is inconvenient if the reader has too short a buffer, or only returns too short reads.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155548436/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155569959",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-155569959",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 155569959,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NTU2OTk1OQ==",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-10T21:18:37Z",
    "updated_at": "2015-11-10T21:18:37Z",
    "body": "The too-short read problem is independent of using a `BufRead` or a `Read`. The underlying `Read` could return data 1 byte at a time itself if it was feeling particularly pathological. A `BufReader` that only has 1 byte remaining in its buffer is only going to return that one byte in the next call.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155569959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155586569",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-155586569",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 155586569,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NTU4NjU2OQ==",
    "user": {
      "login": "gyscos",
      "id": 564903,
      "node_id": "MDQ6VXNlcjU2NDkwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/564903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gyscos",
      "html_url": "https://github.com/gyscos",
      "followers_url": "https://api.github.com/users/gyscos/followers",
      "following_url": "https://api.github.com/users/gyscos/following{/other_user}",
      "gists_url": "https://api.github.com/users/gyscos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gyscos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gyscos/subscriptions",
      "organizations_url": "https://api.github.com/users/gyscos/orgs",
      "repos_url": "https://api.github.com/users/gyscos/repos",
      "events_url": "https://api.github.com/users/gyscos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gyscos/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-10T22:21:37Z",
    "updated_at": "2015-11-10T22:22:25Z",
    "body": "I'm not sure I understand the too-short read problem.\n\nIf the reader stops returning anything in the middle of a codepoint, it's obviously an error.\nIf it doesn't, we can read the bytes from the `BufRead` one by one, and consume it until we find an invalid byte (**that we don't consume**). This works even with a `BufReader` using a 1-byte buffer.\nThis is completely impossible with a simple `Read`, since we must consume each byte as we read it, preventing us from leaving the first invalid byte untouched.\nIn this regard, `BufRead` vs `Read` does change what is possible to achieve.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155586569/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155587669",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-155587669",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 155587669,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NTU4NzY2OQ==",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-10T22:26:22Z",
    "updated_at": "2015-11-10T22:26:22Z",
    "body": "Yeah, I was commenting on \"but it is inconvenient if the reader has too short a buffer, or only returns too short reads.\" That's just a thing you have to deal with.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155587669/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155590757",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-155590757",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 155590757,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1NTU5MDc1Nw==",
    "user": {
      "login": "gyscos",
      "id": 564903,
      "node_id": "MDQ6VXNlcjU2NDkwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/564903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gyscos",
      "html_url": "https://github.com/gyscos",
      "followers_url": "https://api.github.com/users/gyscos/followers",
      "following_url": "https://api.github.com/users/gyscos/following{/other_user}",
      "gists_url": "https://api.github.com/users/gyscos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gyscos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gyscos/subscriptions",
      "organizations_url": "https://api.github.com/users/gyscos/orgs",
      "repos_url": "https://api.github.com/users/gyscos/repos",
      "events_url": "https://api.github.com/users/gyscos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gyscos/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-11-10T22:40:08Z",
    "updated_at": "2015-11-16T17:06:30Z",
    "body": "I see.\n\nTo recap, concerning `Chars`, the options are (apart from taking it out of tree):\n1. Not follow the UTF-8 best practices on short read and:\n   1. Sometimes consume too much from the `BufRead` in order to force a new read\n   2. Return an error on short read\n2. Follow the UTF-8 best practices by properly handling byte-by-byte verification by:\n   1. Duplicating code from `str::from_utf8` (actually `str::run_utf8_validation_iterator`) and using it from here\n   2. Sharing code with `str`, by:\n      1. Exposing code from the `str` module (making it public?) - will need some modification in the `str` module\n      2. Moving the `Chars` functionality to the `str` module (it is basically a streamed utf-8 decoder, could be more general than just `Read`?)\n\nNote that not following the UTF-8 best practices mean `BufRead` does not add any correctness, \"just\" some performance improvements.\n\nI like option 2.ii.a, but maybe it's too much of an impact for this `Chars` problem?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/155590757/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/161101475",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-161101475",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 161101475,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MTEwMTQ3NQ==",
    "user": {
      "login": "BurntSushi",
      "id": 456674,
      "node_id": "MDQ6VXNlcjQ1NjY3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/456674?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BurntSushi",
      "html_url": "https://github.com/BurntSushi",
      "followers_url": "https://api.github.com/users/BurntSushi/followers",
      "following_url": "https://api.github.com/users/BurntSushi/following{/other_user}",
      "gists_url": "https://api.github.com/users/BurntSushi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BurntSushi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BurntSushi/subscriptions",
      "organizations_url": "https://api.github.com/users/BurntSushi/orgs",
      "repos_url": "https://api.github.com/users/BurntSushi/repos",
      "events_url": "https://api.github.com/users/BurntSushi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BurntSushi/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-01T21:29:44Z",
    "updated_at": "2015-12-01T21:29:44Z",
    "body": "Given the number of details here, I think stabilizing a `chars` method on `BufRead`/`Read` should probably require an RFC, especially if we start messing with the `str` module API. It seems like that makes it (and the other methods in this tracking issue) an ideal candidate to evolve out of tree.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/161101475/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/161502698",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-161502698",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 161502698,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MTUwMjY5OA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-03T03:08:14Z",
    "updated_at": "2015-12-03T03:08:14Z",
    "body": "The libs team discussed this during triage today and the conclusion was to deprecate `tee` and `broadcast` while leaving `chars` unstable. Further action there can hold off on an RFC.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/161502698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164288516",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-164288516",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 164288516,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NDI4ODUxNg==",
    "user": {
      "login": "ArtemGr",
      "id": 41847,
      "node_id": "MDQ6VXNlcjQxODQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/41847?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ArtemGr",
      "html_url": "https://github.com/ArtemGr",
      "followers_url": "https://api.github.com/users/ArtemGr/followers",
      "following_url": "https://api.github.com/users/ArtemGr/following{/other_user}",
      "gists_url": "https://api.github.com/users/ArtemGr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ArtemGr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ArtemGr/subscriptions",
      "organizations_url": "https://api.github.com/users/ArtemGr/orgs",
      "repos_url": "https://api.github.com/users/ArtemGr/repos",
      "events_url": "https://api.github.com/users/ArtemGr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ArtemGr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-13T19:11:04Z",
    "updated_at": "2015-12-13T19:11:04Z",
    "body": "> These functions seem like excellent candidates to move out-of-tree into an ioutil crate or something like that. This deprecation won't actually happen until that crate exists, however.\n\nSo is there a crate? Sorry if I missed one.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164288516/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164518172",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-164518172",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 164518172,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NDUxODE3Mg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-14T18:28:02Z",
    "updated_at": "2015-12-14T18:28:02Z",
    "body": "Ah not yet as there didn't seem to be that much desire for them, but I could certainly push up a crate if one is desired!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164518172/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164640461",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-164640461",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 164640461,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NDY0MDQ2MQ==",
    "user": {
      "login": "softprops",
      "id": 2242,
      "node_id": "MDQ6VXNlcjIyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/softprops",
      "html_url": "https://github.com/softprops",
      "followers_url": "https://api.github.com/users/softprops/followers",
      "following_url": "https://api.github.com/users/softprops/following{/other_user}",
      "gists_url": "https://api.github.com/users/softprops/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/softprops/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/softprops/subscriptions",
      "organizations_url": "https://api.github.com/users/softprops/orgs",
      "repos_url": "https://api.github.com/users/softprops/repos",
      "events_url": "https://api.github.com/users/softprops/events{/privacy}",
      "received_events_url": "https://api.github.com/users/softprops/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-15T04:15:23Z",
    "updated_at": "2015-12-15T04:15:23Z",
    "body": "I just published `tee` and `broadcast` as separate crates. I have used both std lib apis in different projects but never together so I thought it would be nice to have the same funtionality, but in smaller, more focused crates https://github.com/softprops/tee https://github.com/softprops/broadcast\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164640461/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164658072",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-164658072",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 164658072,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NDY1ODA3Mg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-15T06:28:47Z",
    "updated_at": "2015-12-15T06:28:47Z",
    "body": "Thanks @softprops!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164658072/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164736655",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-164736655",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 164736655,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NDczNjY1NQ==",
    "user": {
      "login": "ArtemGr",
      "id": 41847,
      "node_id": "MDQ6VXNlcjQxODQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/41847?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ArtemGr",
      "html_url": "https://github.com/ArtemGr",
      "followers_url": "https://api.github.com/users/ArtemGr/followers",
      "following_url": "https://api.github.com/users/ArtemGr/following{/other_user}",
      "gists_url": "https://api.github.com/users/ArtemGr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ArtemGr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ArtemGr/subscriptions",
      "organizations_url": "https://api.github.com/users/ArtemGr/orgs",
      "repos_url": "https://api.github.com/users/ArtemGr/repos",
      "events_url": "https://api.github.com/users/ArtemGr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ArtemGr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-15T11:33:11Z",
    "updated_at": "2015-12-15T11:33:11Z",
    "body": "@softprops Great, thanks!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/164736655/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165260276",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-165260276",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 165260276,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTI2MDI3Ng==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-16T21:48:52Z",
    "updated_at": "2015-12-16T21:48:52Z",
    "body": "Moving out of final-comment-period and the title is now updated to indicate that this issue is solely related to `Read::chars` now.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165260276/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165615133",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-165615133",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 165615133,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTYxNTEzMw==",
    "user": {
      "login": "withoutboats",
      "id": 9063376,
      "node_id": "MDQ6VXNlcjkwNjMzNzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9063376?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/withoutboats",
      "html_url": "https://github.com/withoutboats",
      "followers_url": "https://api.github.com/users/withoutboats/followers",
      "following_url": "https://api.github.com/users/withoutboats/following{/other_user}",
      "gists_url": "https://api.github.com/users/withoutboats/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/withoutboats/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/withoutboats/subscriptions",
      "organizations_url": "https://api.github.com/users/withoutboats/orgs",
      "repos_url": "https://api.github.com/users/withoutboats/repos",
      "events_url": "https://api.github.com/users/withoutboats/events{/privacy}",
      "received_events_url": "https://api.github.com/users/withoutboats/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-17T23:31:26Z",
    "updated_at": "2015-12-17T23:31:26Z",
    "body": "I think moving `chars` to `BufRead` makes a lot of sense. It does require reimplementing `str::from_utf8` logic to implement it properly, which is unfortunate, but there's not really a way around it.\n\nWithout `chars`, you can get the bytes from a BufRead and call `str::from_utf8`, but it will check the data all at once instead of reading out chars until it hits an error. You'd have to call valid_up_to and retry the conversion in order to handle the bad bytes.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/165615133/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/171465735",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-171465735",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 171465735,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MTQ2NTczNQ==",
    "user": {
      "login": "taralx",
      "id": 1036808,
      "node_id": "MDQ6VXNlcjEwMzY4MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1036808?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/taralx",
      "html_url": "https://github.com/taralx",
      "followers_url": "https://api.github.com/users/taralx/followers",
      "following_url": "https://api.github.com/users/taralx/following{/other_user}",
      "gists_url": "https://api.github.com/users/taralx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/taralx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/taralx/subscriptions",
      "organizations_url": "https://api.github.com/users/taralx/orgs",
      "repos_url": "https://api.github.com/users/taralx/repos",
      "events_url": "https://api.github.com/users/taralx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/taralx/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-13T23:03:27Z",
    "updated_at": "2016-01-13T23:03:27Z",
    "body": "I'm not clear on the intended semantics of `chars` here. Is it:\n- We get stuck on a bad character, not reading any of its bytes.\n- We get stuck on a bad character, reading the valid part but leaving the invalid part.\n- We don't get stuck because we consume the invalid part.\n- We don't get stuck because we substitute invalid characters with U+FFFD.\n- Something else?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/171465735/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/171734846",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-171734846",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 171734846,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MTczNDg0Ng==",
    "user": {
      "login": "gyscos",
      "id": 564903,
      "node_id": "MDQ6VXNlcjU2NDkwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/564903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gyscos",
      "html_url": "https://github.com/gyscos",
      "followers_url": "https://api.github.com/users/gyscos/followers",
      "following_url": "https://api.github.com/users/gyscos/following{/other_user}",
      "gists_url": "https://api.github.com/users/gyscos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gyscos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gyscos/subscriptions",
      "organizations_url": "https://api.github.com/users/gyscos/orgs",
      "repos_url": "https://api.github.com/users/gyscos/repos",
      "events_url": "https://api.github.com/users/gyscos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gyscos/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-14T18:43:07Z",
    "updated_at": "2016-01-14T21:33:36Z",
    "body": "@taralx If \"get stuck\" means return an error, then the **desired** behaviour is the second option: read (consume) the valid part, but leave the invalid part. That's why a `BufRead` is required, to peek at the (potentially invalid) byte before consuming it.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/171734846/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/171778116",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-171778116",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 171778116,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MTc3ODExNg==",
    "user": {
      "login": "withoutboats",
      "id": 9063376,
      "node_id": "MDQ6VXNlcjkwNjMzNzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9063376?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/withoutboats",
      "html_url": "https://github.com/withoutboats",
      "followers_url": "https://api.github.com/users/withoutboats/followers",
      "following_url": "https://api.github.com/users/withoutboats/following{/other_user}",
      "gists_url": "https://api.github.com/users/withoutboats/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/withoutboats/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/withoutboats/subscriptions",
      "organizations_url": "https://api.github.com/users/withoutboats/orgs",
      "repos_url": "https://api.github.com/users/withoutboats/repos",
      "events_url": "https://api.github.com/users/withoutboats/events{/privacy}",
      "received_events_url": "https://api.github.com/users/withoutboats/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-14T20:59:39Z",
    "updated_at": "2016-01-14T20:59:39Z",
    "body": "I don't believe the implementation reads the \"valid part\" of the char; if there isn't a complete UTF8 code point, nothing is read.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/171778116/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/171787290",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-171787290",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 171787290,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MTc4NzI5MA==",
    "user": {
      "login": "gyscos",
      "id": 564903,
      "node_id": "MDQ6VXNlcjU2NDkwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/564903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gyscos",
      "html_url": "https://github.com/gyscos",
      "followers_url": "https://api.github.com/users/gyscos/followers",
      "following_url": "https://api.github.com/users/gyscos/following{/other_user}",
      "gists_url": "https://api.github.com/users/gyscos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gyscos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gyscos/subscriptions",
      "organizations_url": "https://api.github.com/users/gyscos/orgs",
      "repos_url": "https://api.github.com/users/gyscos/repos",
      "events_url": "https://api.github.com/users/gyscos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gyscos/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-14T21:36:19Z",
    "updated_at": "2016-01-14T21:36:19Z",
    "body": "Sorry, I was talking about the intended semantics, not the current behaviour.\nCurrently, `Chars` always reads as many bytes as the first byte indicates, and return an error if it isn't a valid UTF-8 sequence.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/171787290/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/171922577",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-171922577",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 171922577,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MTkyMjU3Nw==",
    "user": {
      "login": "taralx",
      "id": 1036808,
      "node_id": "MDQ6VXNlcjEwMzY4MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1036808?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/taralx",
      "html_url": "https://github.com/taralx",
      "followers_url": "https://api.github.com/users/taralx/followers",
      "following_url": "https://api.github.com/users/taralx/following{/other_user}",
      "gists_url": "https://api.github.com/users/taralx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/taralx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/taralx/subscriptions",
      "organizations_url": "https://api.github.com/users/taralx/orgs",
      "repos_url": "https://api.github.com/users/taralx/repos",
      "events_url": "https://api.github.com/users/taralx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/taralx/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-15T10:15:35Z",
    "updated_at": "2016-01-15T10:15:35Z",
    "body": "Yes, \"get stuck\" means returning an error. The difficulty is that BufRead has limited lookahead -- you're pretty much always getting 1 character of lookahead, but no more without the ability to force buffer fills.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/171922577/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172044052",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-172044052",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 172044052,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MjA0NDA1Mg==",
    "user": {
      "login": "gyscos",
      "id": 564903,
      "node_id": "MDQ6VXNlcjU2NDkwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/564903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gyscos",
      "html_url": "https://github.com/gyscos",
      "followers_url": "https://api.github.com/users/gyscos/followers",
      "following_url": "https://api.github.com/users/gyscos/following{/other_user}",
      "gists_url": "https://api.github.com/users/gyscos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gyscos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gyscos/subscriptions",
      "organizations_url": "https://api.github.com/users/gyscos/orgs",
      "repos_url": "https://api.github.com/users/gyscos/repos",
      "events_url": "https://api.github.com/users/gyscos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gyscos/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-15T18:29:03Z",
    "updated_at": "2016-01-15T18:37:40Z",
    "body": "Yes, this was talked about a few comments above: 1 byte of read ahead is enough to stop reading in time (only consume the byte if the sub-sequence is still valid). It does, however, require additional code to validate partial UTF-8 sequences. \n\nThis code exists more or less in the `str` modules ([here](https://doc.rust-lang.org/src/core/str/mod.rs.html#1052)), but is:\n- Not ready as is (it expects an iterator on an existing slice)\n- Not visible\n\nSo the solution would be to either:\n- Duplicate and adapt the code into `io::Chars`\n- Generalize and expose the code in `str`\n\nBoth also require `Chars` to use a `BufRead` instead of a `Read`.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172044052/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172151226",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-172151226",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 172151226,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MjE1MTIyNg==",
    "user": {
      "login": "taralx",
      "id": 1036808,
      "node_id": "MDQ6VXNlcjEwMzY4MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1036808?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/taralx",
      "html_url": "https://github.com/taralx",
      "followers_url": "https://api.github.com/users/taralx/followers",
      "following_url": "https://api.github.com/users/taralx/following{/other_user}",
      "gists_url": "https://api.github.com/users/taralx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/taralx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/taralx/subscriptions",
      "organizations_url": "https://api.github.com/users/taralx/orgs",
      "repos_url": "https://api.github.com/users/taralx/repos",
      "events_url": "https://api.github.com/users/taralx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/taralx/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-16T03:25:22Z",
    "updated_at": "2016-01-16T03:25:22Z",
    "body": "> 1 byte of read ahead is enough to stop reading in time \n\nI'm not sure I agree, based on the code you linked to. I can see codepaths that will result in the iterator being rewound by more than 1 byte in the event of an error.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172151226/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172152426",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-172152426",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 172152426,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MjE1MjQyNg==",
    "user": {
      "login": "gyscos",
      "id": 564903,
      "node_id": "MDQ6VXNlcjU2NDkwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/564903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gyscos",
      "html_url": "https://github.com/gyscos",
      "followers_url": "https://api.github.com/users/gyscos/followers",
      "following_url": "https://api.github.com/users/gyscos/following{/other_user}",
      "gists_url": "https://api.github.com/users/gyscos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gyscos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gyscos/subscriptions",
      "organizations_url": "https://api.github.com/users/gyscos/orgs",
      "repos_url": "https://api.github.com/users/gyscos/repos",
      "events_url": "https://api.github.com/users/gyscos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gyscos/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-16T03:51:05Z",
    "updated_at": "2016-01-16T03:51:05Z",
    "body": "Indeed, I was mistaken, this code also tries to read all the bytes before attempting decoding.\nAnd the methods taking iterators (like [`next_code_point`](https://doc.rust-lang.org/src/core/str/mod.rs.html#324)) simply ignore errors in the continuation bytes.\nSo I guess the code will have to be written from scratch.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172152426/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172154424",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-172154424",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 172154424,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MjE1NDQyNA==",
    "user": {
      "login": "taralx",
      "id": 1036808,
      "node_id": "MDQ6VXNlcjEwMzY4MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1036808?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/taralx",
      "html_url": "https://github.com/taralx",
      "followers_url": "https://api.github.com/users/taralx/followers",
      "following_url": "https://api.github.com/users/taralx/following{/other_user}",
      "gists_url": "https://api.github.com/users/taralx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/taralx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/taralx/subscriptions",
      "organizations_url": "https://api.github.com/users/taralx/orgs",
      "repos_url": "https://api.github.com/users/taralx/repos",
      "events_url": "https://api.github.com/users/taralx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/taralx/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-16T04:05:00Z",
    "updated_at": "2016-01-16T04:05:00Z",
    "body": "I'm not sure it's possible to do it with only 1 byte of lookahead. You need to be able to detect sequences like E2 82 00 (illegal, but only after you see the 00) without consuming any of those bytes.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172154424/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172154560",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-172154560",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 172154560,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MjE1NDU2MA==",
    "user": {
      "login": "gyscos",
      "id": 564903,
      "node_id": "MDQ6VXNlcjU2NDkwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/564903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gyscos",
      "html_url": "https://github.com/gyscos",
      "followers_url": "https://api.github.com/users/gyscos/followers",
      "following_url": "https://api.github.com/users/gyscos/following{/other_user}",
      "gists_url": "https://api.github.com/users/gyscos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gyscos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gyscos/subscriptions",
      "organizations_url": "https://api.github.com/users/gyscos/orgs",
      "repos_url": "https://api.github.com/users/gyscos/repos",
      "events_url": "https://api.github.com/users/gyscos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gyscos/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-16T04:09:30Z",
    "updated_at": "2016-01-16T04:09:59Z",
    "body": "We're allowed to consume any byte if it form a potentially valid subsequence. So if there is a byte `XY` such that `E2 82 XY` is valid, then consuming `E2 82` is allowed. By definition, this means a 1-byte lookahead is enough.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172154560/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172156533",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-172156533",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 172156533,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MjE1NjUzMw==",
    "user": {
      "login": "taralx",
      "id": 1036808,
      "node_id": "MDQ6VXNlcjEwMzY4MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1036808?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/taralx",
      "html_url": "https://github.com/taralx",
      "followers_url": "https://api.github.com/users/taralx/followers",
      "following_url": "https://api.github.com/users/taralx/following{/other_user}",
      "gists_url": "https://api.github.com/users/taralx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/taralx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/taralx/subscriptions",
      "organizations_url": "https://api.github.com/users/taralx/orgs",
      "repos_url": "https://api.github.com/users/taralx/repos",
      "events_url": "https://api.github.com/users/taralx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/taralx/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-16T04:31:28Z",
    "updated_at": "2016-01-16T04:31:28Z",
    "body": "Okay, so it's the second one above: We error out on a bad character, reading the valid part but leaving the invalid part.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172156533/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172525439",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-172525439",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 172525439,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3MjUyNTQzOQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-18T13:18:30Z",
    "updated_at": "2016-01-18T13:18:30Z",
    "body": "When emitting `'\\u{FFFD}'` replacement characters for decoding errors, reading 1 byte at a time (or behaving as if) is the behavior recommended by Unicode Standard \u00a75.22 \"Best Practice for U+FFFD Substitution\" http://www.unicode.org/versions/Unicode8.0.0/ch05.pdf#G40630\n\nThis is in case the first byte unexpected in a sequence is the start of another sequence. In the example above, `b\"\\xE2\\x82\\x00\"` should decode to 2 code points `\"\\u{FFFD}\\0\"`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/172525439/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/217260538",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-217260538",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 217260538,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNzI2MDUzOA==",
    "user": {
      "login": "troplin",
      "id": 13793075,
      "node_id": "MDQ6VXNlcjEzNzkzMDc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13793075?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/troplin",
      "html_url": "https://github.com/troplin",
      "followers_url": "https://api.github.com/users/troplin/followers",
      "following_url": "https://api.github.com/users/troplin/following{/other_user}",
      "gists_url": "https://api.github.com/users/troplin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/troplin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/troplin/subscriptions",
      "organizations_url": "https://api.github.com/users/troplin/orgs",
      "repos_url": "https://api.github.com/users/troplin/repos",
      "events_url": "https://api.github.com/users/troplin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/troplin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-05T19:56:50Z",
    "updated_at": "2016-05-05T19:56:50Z",
    "body": "IMO 1 byte lookahead is not enough to guarantee that no data is lost in case of error.\nConsuming valid subsequences should _not_ be allowed because if it continues with an invalid byte, the formerly valid subsequence is invalidated and there's no possibility to \"unconsume\" it.\n\nIf anyone is interested, I've implemented this and other changes to the `std::io`-traits in my crate [`netio`](https://crates.io/crates/netio).\nThe library provides stronger guarantees than `std::io`, i.e. it never allows to lose any data in case of error.\nFeel free to copy anything you like.\n\nHowever, there's still one unresolved issue: It's not possible to decide from `std::str::Utf8Error` if the error is due to an invalid sequence or just incomplete data. My goal is to return `std::io::ErrorKind::InvalidData` in the former case and `std::io::ErrorKind::UnexpectedEOF` in the latter, which is currently no possible without reimplementing UTF decoding which I don't want to do.\nI've filed an issue for this (#32584). It's similar to #12113 but not exactly the same. #12113 is no issue for me, because in `netio` invalid or incomplete UTF-8 is never consumed and always left in the stream.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/217260538/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/219227094",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-219227094",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 219227094,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTIyNzA5NA==",
    "user": {
      "login": "richard-uk1",
      "id": 1392222,
      "node_id": "MDQ6VXNlcjEzOTIyMjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1392222?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-uk1",
      "html_url": "https://github.com/richard-uk1",
      "followers_url": "https://api.github.com/users/richard-uk1/followers",
      "following_url": "https://api.github.com/users/richard-uk1/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-uk1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-uk1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-uk1/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-uk1/orgs",
      "repos_url": "https://api.github.com/users/richard-uk1/repos",
      "events_url": "https://api.github.com/users/richard-uk1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-uk1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-14T15:43:37Z",
    "updated_at": "2016-05-14T15:43:37Z",
    "body": "I give this opinion as a casual user of `chars()` rather than someone that understands unicode in detail. That being said....\n\nIt would be good to have an iterator that behaved like `chars()` in the `str` module. I think making `io::Read::chars()` behave like that would mean it doesn't fit in with the rest of the io module (errors and `Option`/`Result`). If this method was called for example `chars_lossy` then it would be very helpful to have a note at the start of `chars()` documentation explaining that those who do not care about errors and just want to crash on them should use `chars_lossy` (otherwise newbies like me get confused and have to read a really long thread to understand the issues :P)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/219227094/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220662394",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-220662394",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 220662394,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMDY2MjM5NA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-20T17:04:19Z",
    "updated_at": "2016-05-20T17:07:35Z",
    "body": "> It would be good to have an iterator that behaved like `chars()` in the `str` module.\n\nThat is not possible. The contents of a `&str` is guaranteed to be well-formed UTF-8 so there never is a decoding error. The bytes from `Read` are arbitrary.\n\nI think `Read::chars` should be renamed for that reason, by the way: #33761\n\n> this method was called for example `chars_lossy`\n\n`String::from_utf8_lossy` is an existing function that replaces ill-formed byte sequences with a `\\u{FFFD}` replacement character, which looks like this: \ufffd. It would be possible to add a separate `Read::utf8_chars_lossy` method, or a `lossy` method on the return value of `Read::utf8_chars` that does the same.\n\n> those who do not care about errors and just want to crash on them should use `chars_lossy`\n\nNo! Panicking on ill-formed byte sequences is very different from \"lossy\" decoding, which silently replaces them with \ufffd.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220662394/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220663277",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-220663277",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 220663277,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMDY2MzI3Nw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-20T17:08:00Z",
    "updated_at": "2016-05-20T17:08:00Z",
    "body": "> I think Read::chars should be renamed for that reason, by the way:\n\n(I meant this to link to #33761. Edited.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220663277/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220837278",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-220837278",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 220837278,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMDgzNzI3OA==",
    "user": {
      "login": "richard-uk1",
      "id": 1392222,
      "node_id": "MDQ6VXNlcjEzOTIyMjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1392222?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-uk1",
      "html_url": "https://github.com/richard-uk1",
      "followers_url": "https://api.github.com/users/richard-uk1/followers",
      "following_url": "https://api.github.com/users/richard-uk1/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-uk1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-uk1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-uk1/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-uk1/orgs",
      "repos_url": "https://api.github.com/users/richard-uk1/repos",
      "events_url": "https://api.github.com/users/richard-uk1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-uk1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-22T15:07:57Z",
    "updated_at": "2016-05-22T15:08:37Z",
    "body": "@SimonSapin apologies I probably wrote that comment late at night.\n\nI agree with what you said, that was what I was trying to say. To summarise:\n- function `Read::utf8_chars_lossy` that won't error but will insert `\\u{FFFD}`\n- function `BufRead::chars` whose `Item` is `Result<char, _>`, and who doesn't consume any malformed bytes\n- function `Read::chars` whose `Item` is `Result<char, _>`, and whose `Error` type contains any consumed bytes from the stream not used in a `char`\n- documentation on `Read` explaining the choice\n\nDo I understand you correctly?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220837278/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220840711",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-220840711",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 220840711,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMDg0MDcxMQ==",
    "user": {
      "login": "taralx",
      "id": 1036808,
      "node_id": "MDQ6VXNlcjEwMzY4MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1036808?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/taralx",
      "html_url": "https://github.com/taralx",
      "followers_url": "https://api.github.com/users/taralx/followers",
      "following_url": "https://api.github.com/users/taralx/following{/other_user}",
      "gists_url": "https://api.github.com/users/taralx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/taralx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/taralx/subscriptions",
      "organizations_url": "https://api.github.com/users/taralx/orgs",
      "repos_url": "https://api.github.com/users/taralx/repos",
      "events_url": "https://api.github.com/users/taralx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/taralx/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-22T16:10:59Z",
    "updated_at": "2016-05-22T16:10:59Z",
    "body": "Your `BufRead::chars` would still need to return a partial character in the error part. See above about lookahead.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220840711/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220841935",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-220841935",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 220841935,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMDg0MTkzNQ==",
    "user": {
      "login": "richard-uk1",
      "id": 1392222,
      "node_id": "MDQ6VXNlcjEzOTIyMjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1392222?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-uk1",
      "html_url": "https://github.com/richard-uk1",
      "followers_url": "https://api.github.com/users/richard-uk1/followers",
      "following_url": "https://api.github.com/users/richard-uk1/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-uk1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-uk1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-uk1/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-uk1/orgs",
      "repos_url": "https://api.github.com/users/richard-uk1/repos",
      "events_url": "https://api.github.com/users/richard-uk1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-uk1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-22T16:34:01Z",
    "updated_at": "2016-05-22T16:34:01Z",
    "body": "@taralx What I mean is something like the following:\n\n``` rust\nenum Error (\n    ...\n    MalformedCharError([u8;4])\n)\n```\n\nor something similar handling the fact that the size is unknown.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220841935/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220853599",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-220853599",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 220853599,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMDg1MzU5OQ==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-22T20:15:38Z",
    "updated_at": "2016-05-22T20:15:38Z",
    "body": "I don\u2019t think the API needs to change at all: one `fn chars(self) -> Chars<Self>` default method on the `std::io::Read` trait, where `Chars<R: Read>: Iterator<Item = Result<char, CharsError>>`. There is no need for `CharsError` to include the ill-formed byte sequence, what matters is not consuming too much of the input to avoid dropping valid code points. I believe that means reading one byte at a time.\n\nSince we\u2019re reading one byte at a time, there is no need to involve the `BufRead` trait. The docs can recommend using a `BufReader` wrapper type if small reads in the underlying stream are expensive (e.g. in `File` and `TcpStream`, each read is a syscall and so a context switch). But `&[u8]` is fine, for example, even though it doesn\u2019t implement the `BufRead` trait.\n\n`chars_lossy` is relatively easy to build on top of `chars`:\n\n``` rust\nstream.chars().map(|result| match result {\n    Ok(c) => Ok(c),\n    Err(CharsError::NotUtf8) => Ok(std::char::REPLACEMENT_CHARACTER),\n    Err(CharsError::Other(e)) => Err(e),\n})\n```\n\nNote that for `std::char::decode_utf16` we chose not to include lossy decoding, since it\u2019s even easier for users: `.map(|result| result.unwrap_or(std::char::REPLACEMENT_CHARACTER))`\n\nI\u2019ll prepare a PR now.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220853599/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220862426",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-220862426",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 220862426,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMDg2MjQyNg==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-22T23:10:19Z",
    "updated_at": "2016-05-22T23:10:19Z",
    "body": "See https://github.com/rust-lang/rust/issues/33801.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/220862426/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221395567",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-221395567",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 221395567,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTM5NTU2Nw==",
    "user": {
      "login": "troplin",
      "id": 13793075,
      "node_id": "MDQ6VXNlcjEzNzkzMDc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13793075?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/troplin",
      "html_url": "https://github.com/troplin",
      "followers_url": "https://api.github.com/users/troplin/followers",
      "following_url": "https://api.github.com/users/troplin/following{/other_user}",
      "gists_url": "https://api.github.com/users/troplin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/troplin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/troplin/subscriptions",
      "organizations_url": "https://api.github.com/users/troplin/orgs",
      "repos_url": "https://api.github.com/users/troplin/repos",
      "events_url": "https://api.github.com/users/troplin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/troplin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-24T20:44:04Z",
    "updated_at": "2016-05-24T20:44:04Z",
    "body": "> Since we\u2019re reading one byte at a time, there is no need to involve the BufRead trait.\n\n@SimonSapin I don't agree with that.\nBy that argumentation, all current methods of `BufRead` could live in `Read`. None of them need `BufRead` for correctness.\nAt least the way they are implemented now. I'd prefer better guarantees, but that's probably out of scope.\n\n> The docs can recommend using a BufReader wrapper type if small reads in the underlying stream are expensive (e.g. in File and TcpStream, each read is a syscall and so a context switch). But &[u8] is fine, for example, even though it doesn\u2019t implement the BufRead trait.\n\nHuh? `impl<'a> BufRead for &'a [u8]` exists.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221395567/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221405981",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-221405981",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 221405981,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTQwNTk4MQ==",
    "user": {
      "login": "taralx",
      "id": 1036808,
      "node_id": "MDQ6VXNlcjEwMzY4MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1036808?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/taralx",
      "html_url": "https://github.com/taralx",
      "followers_url": "https://api.github.com/users/taralx/followers",
      "following_url": "https://api.github.com/users/taralx/following{/other_user}",
      "gists_url": "https://api.github.com/users/taralx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/taralx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/taralx/subscriptions",
      "organizations_url": "https://api.github.com/users/taralx/orgs",
      "repos_url": "https://api.github.com/users/taralx/repos",
      "events_url": "https://api.github.com/users/taralx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/taralx/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-24T21:24:30Z",
    "updated_at": "2016-05-24T21:24:30Z",
    "body": "@SimonSapin You need lookahead. How will you handle the following byte sequence without it? E2 82 E2 82 82\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221405981/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221406243",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-221406243",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 221406243,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTQwNjI0Mw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-24T21:25:30Z",
    "updated_at": "2016-05-24T21:25:30Z",
    "body": "> Huh? impl<'a> BufRead for &'a [u8] exists.\n\nUh, never mind that part, I misread rustdoc.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221406243/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221496898",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-221496898",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 221496898,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTQ5Njg5OA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-25T07:40:23Z",
    "updated_at": "2016-05-25T07:40:23Z",
    "body": "@taralx Yes, I realized while implementing #33801 that the `Utf8Chars` iterator needs to hold a `Option<u8>` buffer: https://github.com/rust-lang/rust/pull/33801/commits/7ab345098625cf4e3b7f930e0ae003fda00da166#diff-668f8f358d4a93474b396dcb3727399eR1558\n\nIt might be better to require `BufRead` after all. I\u2019ll try that in an additional commit in #33801 to see what it looks like.\n\nNote that the algorithm still has to read one byte at a time: `BufRead::fill_buf` is not guaranteed to give \"new\" bytes until the current buffer is entirely consumed (or at least in `BufReader` it doesn\u2019t), and the byte sequence for a single code point might span across a buffer boundary.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221496898/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221507503",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-221507503",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 221507503,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTUwNzUwMw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-25T08:30:57Z",
    "updated_at": "2016-05-25T08:30:57Z",
    "body": "I\u2019ve added a commit to #33801.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/221507503/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/227303188",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-227303188",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 227303188,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzMwMzE4OA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-20T23:49:03Z",
    "updated_at": "2016-06-20T23:49:03Z",
    "body": "\ud83d\udd14 This issue is now entering its **final comment period** \ud83d\udd14 \n\nThe libs team was unfortunately a little late on stabilizations this cycle, but we're thinking of probably doing a backport of stabilizations partway through the beta cycle. The API we're considering for stabilization is the one proposed by @SimonSapin in https://github.com/rust-lang/rust/pull/33801. If we do decide to accept that PR we'll probably have a new FCP next cycle for actual stabilization but if we don't accept it we'll probably just deprecate the feature.\n\nRegardless, discussion on the PR is more than welcome!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/227303188/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/227311010",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-227311010",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 227311010,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzMxMTAxMA==",
    "user": {
      "login": "taralx",
      "id": 1036808,
      "node_id": "MDQ6VXNlcjEwMzY4MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1036808?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/taralx",
      "html_url": "https://github.com/taralx",
      "followers_url": "https://api.github.com/users/taralx/followers",
      "following_url": "https://api.github.com/users/taralx/following{/other_user}",
      "gists_url": "https://api.github.com/users/taralx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/taralx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/taralx/subscriptions",
      "organizations_url": "https://api.github.com/users/taralx/orgs",
      "repos_url": "https://api.github.com/users/taralx/repos",
      "events_url": "https://api.github.com/users/taralx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/taralx/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-21T00:44:42Z",
    "updated_at": "2016-06-21T00:44:42Z",
    "body": "I still have one major objection to #33801 that I've noted in that PR.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/227311010/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/229831611",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-229831611",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 229831611,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTgzMTYxMQ==",
    "user": {
      "login": "jwilm",
      "id": 4285147,
      "node_id": "MDQ6VXNlcjQyODUxNDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4285147?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jwilm",
      "html_url": "https://github.com/jwilm",
      "followers_url": "https://api.github.com/users/jwilm/followers",
      "following_url": "https://api.github.com/users/jwilm/following{/other_user}",
      "gists_url": "https://api.github.com/users/jwilm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jwilm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jwilm/subscriptions",
      "organizations_url": "https://api.github.com/users/jwilm/orgs",
      "repos_url": "https://api.github.com/users/jwilm/repos",
      "events_url": "https://api.github.com/users/jwilm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jwilm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-07-01T01:21:17Z",
    "updated_at": "2016-07-01T01:21:17Z",
    "body": "My concern with #33801 relates to partial reads. As it stands, there's no way to know how much data was consumed in the case of a `Read` source like `&[u8]`. Some ways to fix that is returning the number of consumed bytes in `Utf8Error::IncompleteUtf8` (not great), return the number of bytes left over in that variant, or return the specific bytes left over in that variant.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/229831611/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/230056201",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-230056201",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 230056201,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMDA1NjIwMQ==",
    "user": {
      "login": "jwilm",
      "id": 4285147,
      "node_id": "MDQ6VXNlcjQyODUxNDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4285147?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jwilm",
      "html_url": "https://github.com/jwilm",
      "followers_url": "https://api.github.com/users/jwilm/followers",
      "following_url": "https://api.github.com/users/jwilm/following{/other_user}",
      "gists_url": "https://api.github.com/users/jwilm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jwilm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jwilm/subscriptions",
      "organizations_url": "https://api.github.com/users/jwilm/orgs",
      "repos_url": "https://api.github.com/users/jwilm/repos",
      "events_url": "https://api.github.com/users/jwilm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jwilm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-07-01T21:56:52Z",
    "updated_at": "2016-07-01T21:57:02Z",
    "body": "After thinking on `InvalidUtf8` and `IncompleteUtf8` errors some more, I've come to the conclusion they need to include the problematic bytes. This nicely handles the case of a partial read when using a `&[u8]` (a consumer can just stick the bytes in the front of the buffer before reading again), and an `InvalidUtf8` could be handled however the consumer sees fit.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/230056201/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/270552798",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-270552798",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 270552798,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDU1Mjc5OA==",
    "user": {
      "login": "Manishearth",
      "id": 1617736,
      "node_id": "MDQ6VXNlcjE2MTc3MzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Manishearth",
      "html_url": "https://github.com/Manishearth",
      "followers_url": "https://api.github.com/users/Manishearth/followers",
      "following_url": "https://api.github.com/users/Manishearth/following{/other_user}",
      "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions",
      "organizations_url": "https://api.github.com/users/Manishearth/orgs",
      "repos_url": "https://api.github.com/users/Manishearth/repos",
      "events_url": "https://api.github.com/users/Manishearth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Manishearth/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-01-05T03:08:32Z",
    "updated_at": "2017-01-05T03:08:32Z",
    "body": "> \ud83d\udd14 This issue is now entering its final comment period \ud83d\udd14\r\n\r\n@alexcrichton Looks like this was forgotten? Anything that needs to be done here to stabilize this?",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/270552798/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/270555935",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-270555935",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 270555935,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDU1NTkzNQ==",
    "user": {
      "login": "jwilm",
      "id": 4285147,
      "node_id": "MDQ6VXNlcjQyODUxNDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4285147?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jwilm",
      "html_url": "https://github.com/jwilm",
      "followers_url": "https://api.github.com/users/jwilm/followers",
      "following_url": "https://api.github.com/users/jwilm/following{/other_user}",
      "gists_url": "https://api.github.com/users/jwilm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jwilm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jwilm/subscriptions",
      "organizations_url": "https://api.github.com/users/jwilm/orgs",
      "repos_url": "https://api.github.com/users/jwilm/repos",
      "events_url": "https://api.github.com/users/jwilm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jwilm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-01-05T03:35:38Z",
    "updated_at": "2017-01-05T03:35:38Z",
    "body": "I've published a crate called [`utf8parse`](https://docs.rs/utf8parse) which has a dramatically different API for parsing a `&[u8]` as UTF-8. I don't believe it's a complete solution to the problems discussed here, but perhaps showing it here may be helpful. Let me give you a quick summary of the `utf8parse` API, and then I'll compare it with the issues being discussed with the `Utf8Chars` API.\r\n\r\nThere's two types in `utf8parse`, a `Parser` and a `Receiver`. First, the `Receiver` type looks like this:\r\n\r\n```rust\r\n/// Handles codepoint and invalid sequence events from the parser.\r\npub trait Receiver {\r\n    /// Called whenever a codepoint is parsed successfully\r\n    fn codepoint(&mut self, char);\r\n\r\n    /// Called when an invalid_sequence is detected\r\n    fn invalid_sequence(&mut self);\r\n}\r\n```\r\n\r\nAfter creating a `Parser`, it's only got one useful method:\r\n\r\n```rust\r\nfn advance<R>(&mut self, receiver: &mut R, byte: u8)\r\n    where R: Receiver\r\n```\r\n\r\nOne byte is pushed at a time into the parser, and occasionally codepoints/errors are provided to the `Receiver`. Driving the parser looks like this:\r\n\r\n```rust\r\nlet bytes = bytes_from_somewhere();\r\nlet mut receiver = make_my_receiver();\r\nlet mut parser = Parser::new();\r\n\r\nfor byte in &bytes {\r\n    parser.advance(&mut receiver, byte);\r\n}\r\n```\r\n\r\nNot as nice as the Utf8Chars iterator, but it has some advantages. First, the code driving the parser can know exactly where an error is encountered. For example, it would be possible to keep track of indices when a valid codepoint is encountered and when and invalid codepoint is identified. In this way, it's possible to know the bad bytes. Additionally, if the end of the buffer is reached without receiving a codepoint at the same time, the incomplete bytes would be known based on the byte index of the last valid codepoint.\r\n\r\nIn summary, this solves including bytes in the Incomplete/InvalidUtf8 error types at the cost of a non-iterator API. It separates out fetching bytes from some `Read` type and actually parsing those bytes as UTF-8.\r\n\r\nMaybe it makes sense for the standard library to include a low level UTF-8 parser like this that can be tailored for different situations - instead of this use-case specific iterator based solution.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/270555935/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/270807209",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-270807209",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 270807209,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDgwNzIwOQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-01-06T01:28:03Z",
    "updated_at": "2017-01-06T01:28:03Z",
    "body": "@Manishearth that was basically 6 months ago at this point, and unfortunately I've forgotten the context of this in the interim. ",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/270807209/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/270807493",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-270807493",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 270807493,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDgwNzQ5Mw==",
    "user": {
      "login": "Manishearth",
      "id": 1617736,
      "node_id": "MDQ6VXNlcjE2MTc3MzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Manishearth",
      "html_url": "https://github.com/Manishearth",
      "followers_url": "https://api.github.com/users/Manishearth/followers",
      "following_url": "https://api.github.com/users/Manishearth/following{/other_user}",
      "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions",
      "organizations_url": "https://api.github.com/users/Manishearth/orgs",
      "repos_url": "https://api.github.com/users/Manishearth/repos",
      "events_url": "https://api.github.com/users/Manishearth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Manishearth/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-01-06T01:29:44Z",
    "updated_at": "2017-01-06T01:29:44Z",
    "body": "cc @rust-lang/libs reviving this",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/270807493/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/270915495",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-270915495",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 270915495,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDkxNTQ5NQ==",
    "user": {
      "login": "richard-uk1",
      "id": 1392222,
      "node_id": "MDQ6VXNlcjEzOTIyMjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1392222?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-uk1",
      "html_url": "https://github.com/richard-uk1",
      "followers_url": "https://api.github.com/users/richard-uk1/followers",
      "following_url": "https://api.github.com/users/richard-uk1/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-uk1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-uk1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-uk1/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-uk1/orgs",
      "repos_url": "https://api.github.com/users/richard-uk1/repos",
      "events_url": "https://api.github.com/users/richard-uk1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-uk1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-01-06T14:37:58Z",
    "updated_at": "2017-01-06T14:48:13Z",
    "body": "Does this sound correct?:\r\n\r\nThe issue could be summarised as: How to handle reading chars over a datastream, specifically how to handle either incomplete utf8 byte sequences and incorrect bytes (w.r.t. utf8).\r\n\r\nIt's hard because when you encounter an invalid sequence of bytes that may be valid with more data, it could either be an error, or that you just need to read more bytes (it's ambiguous).\r\n\r\nIf you know it's incomplete, you may want to call Read and try again with the incomplete part prepended, but if it's incomplete because something has errored you want to return the error with the offending bytes.\r\n\r\nIt seems the consensus is that for error and incomplete bytes, you return a struct that contains an enum variant saying whether it is an error or a possibly incomplete set of bytes, along with the bytes. It's then the responsibility of a higher level iterator how to handle these cases (as not all use cases will want to handle it the same).",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/270915495/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284189507",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-284189507",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 284189507,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDE4OTUwNw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-04T22:31:43Z",
    "updated_at": "2017-03-04T22:31:43Z",
    "body": "**TL;DR**: I think it is very hard to come up with an abstraction that: is zero-cost, covers all use cases, and is not terrible to use.\r\n\r\nI\u2019m in favor of deprecating and eventually removing this with no in-`std` replacement.\r\n\r\n----\r\n\r\nI think that anything that looks at one `u8` or one `char` at a time is gonna have abysmal performance. Instead we probably want `&str` slices that reference fragments of some `[u8]` buffer.\r\n\r\nI spent some time thinking of a low-level API that would make no assumptions about how one would want to use it (\"pushing\" vs \"pulling\" bytes and string slices, buffer allocation strategy, error handling, etc.) I came up with this:\r\n\r\n```rust\r\npub fn decode_utf8(input: &[u8]) -> DecodeResult { /* ... */ }\r\n\r\npub enum DecodeResult<'a> {\r\n    Ok(&'a str),\r\n\r\n    /// These three slices cover all of the original input.\r\n    /// `decode` should be called again with the third one as the new input.\r\n    Error(&'a str, InvalidSequence<'a>, &'a [u8]),\r\n\r\n    Incomplete(&'a str, IncompleteChar),\r\n}\r\n\r\npub struct InvalidSequence<'a>(pub &'a [u8]);\r\n\r\npub struct IncompleteChar {\r\n    // Fields are private. They include a [u8; 4] buffer.\r\n}\r\n\r\nimpl IncompleteChar {\r\n    pub fn try_complete<'char, 'input>(&'char mut self, mut input: &'input [u8])\r\n                                       -> TryCompleteResult<'char, 'input> { /* ... */ }\r\n}\r\n\r\npub enum TryCompleteResult<'char, 'input> {\r\n    Ok(&'char str, &'input [u8]),  // str.chars().count() == 1\r\n    Error(InvalidSequence<'char>, &'input [u8]),\r\n    StillIncomplete,\r\n}\r\n```\r\n\r\nIt\u2019s *complicated*. It requires the user to think about a lot of corner cases, especially around `IncompleteChar`. Explaining how to properly use it takes several paragraphs of docs.\r\n\r\nWe can hide some of the details with a stateful decoder:\r\n\r\n```rust\r\npub struct Decoder { /* Private. Also with a [u8; 4] buffer. */ }\r\n\r\nimpl Decoder {\r\n    pub fn new() -> Self;\r\n\r\n    pub fn decode<'decoder, 'input>(&'decoder mut self, &'input [u8])\r\n                                    -> DecoderResult<'decoder, 'input>;\r\n\r\n    /// Signal that there is no more input.\r\n    /// The decoder might contain a partial `char` which becomes an error.\r\n    pub fn end<'decoder>(&self) -> Result<(), InvalidSequence<'decoder>>>;\r\n}\r\n\r\n/// Order of fields indicates order in the input\r\npub struct DecoderResult<'decoder, 'input> {\r\n    /// str in the `Ok` case is either empty or one `char` (up to 4 bytes)\r\n    pub partially_from_previous_input_chunk: Result<&'decoder str, InvalidSequence<'decoder>>,\r\n\r\n    /// Up to the first error, if any\r\n    pub decoded: &'input str,\r\n\r\n    /// Whether we did find an error\r\n    pub error: Result<(), InvalidSequence<'input>>\r\n\r\n    /// Call `decoder.decode()` again with this, if non-empty\r\n    pub remaining_input_after_error: &'input [u8]\r\n}\r\n\r\n/// Never more than 3 bytes.\r\npub struct InvalidSequence<'a>(pub &'a [u8]);\r\n```\r\n\r\nEven so, it\u2019s very easy to misuse, for example by ignoring part of `DecoderResult`. Using a tuple instead of a struct makes it more visible when a field is ignored, but then we can\u2019t name them to help explain which is what.\r\n\r\nEither of these is complicated enough that I don\u2019t think it belongs in `libcore` or `libstd`.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284189507/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284190316",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-284190316",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 284190316,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDE5MDMxNg==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-04T22:45:57Z",
    "updated_at": "2017-03-04T22:45:57Z",
    "body": "By the way, I\u2019ve submitted #40212 to make something like the above (possibly specialized to one use case) easier to implement outside of `std` based on `std::str::from_utf8`. Doing so avoids re-implementing most of the decoding logic, and allows taking advantage of optimizations in `std` like #30740.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284190316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284203379",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-284203379",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 284203379,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDIwMzM3OQ==",
    "user": {
      "login": "taralx",
      "id": 1036808,
      "node_id": "MDQ6VXNlcjEwMzY4MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1036808?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/taralx",
      "html_url": "https://github.com/taralx",
      "followers_url": "https://api.github.com/users/taralx/followers",
      "following_url": "https://api.github.com/users/taralx/following{/other_user}",
      "gists_url": "https://api.github.com/users/taralx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/taralx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/taralx/subscriptions",
      "organizations_url": "https://api.github.com/users/taralx/orgs",
      "repos_url": "https://api.github.com/users/taralx/repos",
      "events_url": "https://api.github.com/users/taralx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/taralx/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-05T03:53:35Z",
    "updated_at": "2017-03-05T03:53:35Z",
    "body": "I would support deprecating `Read::chars` in favor of seeing what the community can produce.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284203379/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284482458",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-284482458",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 284482458,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDQ4MjQ1OA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-06T18:15:21Z",
    "updated_at": "2017-03-06T18:15:21Z",
    "body": "Another attempt turned out *almost* nice:\r\n\r\n```rust\r\npub struct Decoder { \r\n    buffer: [u8; 4],\r\n    /* ... */\r\n}\r\n\r\nimpl Decoder {\r\n    pub fn new() -> Self { /* ... */ }\r\n    pub fn next_chunk<'a>(&'a mut self, input_chunk: &'a [u8]) -> DecoderIter<'a> { /* ... */ }\r\n    pub fn last_chunk<'a>(&'a mut self, input_chunk: &'a [u8]) -> DecoderIter<'a> { /* ... */ }\r\n}\r\n\r\npub struct DecoderIter<'a> {\r\n    decoder: &'a mut Decoder,\r\n    /* ... */ \r\n}\r\n\r\nimpl<'a> Iterator for DecoderIter<'a> {\r\n    type Item = Result<&'a str, &'a [u8]>;\r\n}\r\n```\r\n\r\nExcept it doesn\u2019t work. `&'a str` in the result conflicts with `&'a mut Decoder` in the iterator. (It is sometimes backed by `buffer` in the decoder.) The result needs to borrow the iterator, which means the `Iterator` trait can\u2019t be implemented, and `for` loops can\u2019t be used:\r\n\r\n```rust\r\nimpl<'a> DecoderIter<'a> {\r\n    pub fn next(&mut self) -> Option<Result<&str, &[u8]>> { /* ... */ }\r\n}\r\n```\r\n```rust\r\n    let mut iter = decoder.next_chunk(input);\r\n    while let Some(result) = iter.next() {\r\n         // ...\r\n    }\r\n```\r\n\r\nThis compiles, but something like `String::from_utf8_lossy(&[u8]) -> Cow<str>` can\u2019t be implemented on top of it because `str` fragments always borrow the short-lived decoder (and iterator), not only the original input.\r\n\r\nWe can work around that by adding enough lifetimes parameters and one weird enum\u2026 but yeah, no.\r\n\r\n```rust\r\npub struct Decoder { /* ... */ }\r\n\r\nimpl Decoder {\r\n    pub fn new() -> Self { /* ... */ }\r\n\r\n    pub fn next_chunk<'decoder, 'input>(&'decoder mut self, input_chunk: &'input [u8])\r\n                                        -> DecoderIter<'decoder, 'input> { /* ... */ }\r\n\r\n    pub fn last_chunk<'decoder, 'input>(&'decoder mut self, input_chunk: &'input [u8])\r\n                                        -> DecoderIter<'decoder, 'input> { /* ... */ }\r\n}\r\n\r\npub struct DecoderIter<'decoder, 'input> { /* ... */ }\r\n\r\nimpl<'decoder, 'input> DecoderIter<'decoder, 'input> {\r\n    pub fn next<'buffer>(&'buffer mut self) \r\n        -> Option<Result<EitherLifetime<'buffer, 'input, str>,\r\n                         EitherLifetime<'buffer, 'input, [u8]>>> { /* ... */ }\r\n}\r\n\r\npub enum EitherLifetime<'buffer, 'input, T: ?Sized + 'static> {\r\n    Buffer(&'buffer T),\r\n    Input(&'input T),\r\n}\r\n\r\nimpl<'buffer, 'input, T: ?Sized> EitherLifetime<'buffer, 'input, T> {\r\n    pub fn get<'a>(&self) -> &'a T where 'buffer: 'a, 'input: 'a {\r\n        match *self {\r\n            EitherLifetime::Input(x) => x,\r\n            EitherLifetime::Buffer(x) => x,\r\n        }\r\n    }\r\n}",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284482458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284603530",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-284603530",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 284603530,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDYwMzUzMA==",
    "user": {
      "login": "taralx",
      "id": 1036808,
      "node_id": "MDQ6VXNlcjEwMzY4MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1036808?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/taralx",
      "html_url": "https://github.com/taralx",
      "followers_url": "https://api.github.com/users/taralx/followers",
      "following_url": "https://api.github.com/users/taralx/following{/other_user}",
      "gists_url": "https://api.github.com/users/taralx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/taralx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/taralx/subscriptions",
      "organizations_url": "https://api.github.com/users/taralx/orgs",
      "repos_url": "https://api.github.com/users/taralx/repos",
      "events_url": "https://api.github.com/users/taralx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/taralx/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-07T02:38:13Z",
    "updated_at": "2017-03-07T02:38:13Z",
    "body": "> Except it doesn\u2019t work. `&'a str` in the result conflicts with `&'a mut Decoder` in the iterator.\r\n\r\nCan you elaborate? I don't follow here.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284603530/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284682566",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-284682566",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 284682566,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NDY4MjU2Ng==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-07T10:28:24Z",
    "updated_at": "2017-03-07T10:28:24Z",
    "body": "@taralx\r\n\r\n* `DecoderIter<'a>` contains `&'a mut Decoder`.\r\n* `Decoder` contains a `[u8; 4]` buffer.\r\n* The `DecoderIter::next` method takes `&'b mut self`. This implies `'a: 'b` (b outlives a).\r\n* In some cases, the next method wants to return a borrow of the buffer with (simplified) `std::str::from_utf8_unchecked(&self.decoder.buffer)`.\r\n* Since this borrow is going through `&'b mut self`, its lifetime cannot be longer than `'b`. This conflicts with the `'a: 'b` requirement. If we *could* somehow make that borrow (such as with `unsafe`), then `&mut Decoder` in `DecoderIter` would no longer be exclusive since there\u2019s another borrow of part of it (the buffer).\r\n* The solution is to return `&'b str` instead of `&'a str`. But the `Iterator` trait cannot express that since the return type of `next` is `Option<Self::Item>`, and there is no way to include the lifetime of the iterator itself in the associated type `Item`.\r\n\r\nPerhaps it\u2019s clearer with code. This does not compile: https://gist.github.com/anonymous/0587b4484ec9a15f5c5ce6908b3807c1, unless you change `Result<&'a str, &'a [u8]>` to `Result<&str, &[u8]>` (borrowing `self`) and make `next` an inherent method instead of an Iterator impl.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/284682566/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/327289332",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-327289332",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 327289332,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNzI4OTMzMg==",
    "user": {
      "login": "wilysword",
      "id": 7714951,
      "node_id": "MDQ6VXNlcjc3MTQ5NTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7714951?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wilysword",
      "html_url": "https://github.com/wilysword",
      "followers_url": "https://api.github.com/users/wilysword/followers",
      "following_url": "https://api.github.com/users/wilysword/following{/other_user}",
      "gists_url": "https://api.github.com/users/wilysword/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wilysword/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wilysword/subscriptions",
      "organizations_url": "https://api.github.com/users/wilysword/orgs",
      "repos_url": "https://api.github.com/users/wilysword/repos",
      "events_url": "https://api.github.com/users/wilysword/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wilysword/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-09-05T20:11:29Z",
    "updated_at": "2017-09-05T20:11:29Z",
    "body": "I tend to agree that this should be removed from `std`, though for a slightly different reason: I'd like the interface for \"returning a stream of `char`s from an `io::Read`er\" to work with any encoding, not just UTF-8. If the general purpose of `io::Read` is to represent a stream of arbitrary bytes, then some other trait should represent a stream of decoded characters (though for completeness, I would probably also have such a trait implement `io::Read`). This would be similar to how you can chain streams in other languages: `Decoder(BufferedReader(FileReader(\"somefile.txt\")))`. Unless/until general encoding functionality lives in  `std`, I don't see much benefit in such a half-hearted implementation.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/327289332/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/327295913",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-327295913",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 327295913,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNzI5NTkxMw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-09-05T20:37:00Z",
    "updated_at": "2017-09-05T20:37:00Z",
    "body": "https://github.com/hsivonen/encoding_rs/issues/8 has some discussion of Unicode stream and decoders for not-only-UTF-8 encodings.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/327295913/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/377537778",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-377537778",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 377537778,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzUzNzc3OA==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-03-30T14:37:55Z",
    "updated_at": "2018-03-30T14:37:55Z",
    "body": "The libs team discussed this and consensus was to **deprecate** the `Read::chars` method and its `Chars` iterator.\r\n\r\n@rfcbot fcp close\r\n\r\nCode that does not care about processing data incrementally can use `Read::read_to_string` instead. Code that does care presumably also wants to control its buffering strategy and work with `&[u8]` and `&str` slices that are as large as possible, rather than one `char` at a time. It should be based on the `str::from_utf8` function as well as the `valid_up_to` and `error_len` methods of the [`Utf8Error`](https://doc.rust-lang.org/nightly/std/str/struct.Utf8Error.html) type. One tricky aspect is dealing with cases where a single `char` is represented in UTF-8 by multiple bytes where those bytes happen to be split across separate `read` calls / buffer chunks. (`Utf8Error::error_len` returning `None` indicates that this may be the case.) [The `utf-8` crate](https://crates.io/crates/utf-8) solves this, but in order to be flexible provides an API that probably has too much surface to be included in the standard library.\r\n\r\nOf course the above is for data that is always UTF-8. If other character encoding need to be supported, consider using the [`encoding_rs`](https://crates.io/crates/encoding_rs) or [`encoding`](https://crates.io/crates/encoding) crate.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/377537778/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/377537781",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-377537781",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 377537781,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzUzNzc4MQ==",
    "user": {
      "login": "rfcbot",
      "id": 20760818,
      "node_id": "MDQ6VXNlcjIwNzYwODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20760818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rfcbot",
      "html_url": "https://github.com/rfcbot",
      "followers_url": "https://api.github.com/users/rfcbot/followers",
      "following_url": "https://api.github.com/users/rfcbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/rfcbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rfcbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rfcbot/subscriptions",
      "organizations_url": "https://api.github.com/users/rfcbot/orgs",
      "repos_url": "https://api.github.com/users/rfcbot/repos",
      "events_url": "https://api.github.com/users/rfcbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rfcbot/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-03-30T14:37:56Z",
    "updated_at": "2018-04-10T08:42:18Z",
    "body": "Team member @SimonSapin has proposed to close this. The next step is review by the rest of the tagged teams:\n\n* [x] @Kimundi\n* [x] @SimonSapin\n* [x] @alexcrichton\n* [x] @aturon\n* [x] @dtolnay\n* [x] @sfackler\n* [ ] @withoutboats\n\nNo concerns currently listed.\n\nOnce a majority of reviewers approve (and none object), this will enter its final comment period. If you spot a major issue that hasn't been raised at any point in this process, please speak up!\n\nSee [this document](https://github.com/anp/rfcbot-rs/blob/master/README.md) for info about what commands tagged team members can give me.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/377537781/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378684646",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-378684646",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 378684646,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODY4NDY0Ng==",
    "user": {
      "login": "rfcbot",
      "id": 20760818,
      "node_id": "MDQ6VXNlcjIwNzYwODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20760818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rfcbot",
      "html_url": "https://github.com/rfcbot",
      "followers_url": "https://api.github.com/users/rfcbot/followers",
      "following_url": "https://api.github.com/users/rfcbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/rfcbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rfcbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rfcbot/subscriptions",
      "organizations_url": "https://api.github.com/users/rfcbot/orgs",
      "repos_url": "https://api.github.com/users/rfcbot/repos",
      "events_url": "https://api.github.com/users/rfcbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rfcbot/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-04T17:40:37Z",
    "updated_at": "2018-04-04T17:40:37Z",
    "body": ":bell: **This is now entering its final comment period**, as per the [review above](https://github.com/rust-lang/rust/issues/27802#issuecomment-377537781). :bell:",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/378684646/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/381346846",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-381346846",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 381346846,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTM0Njg0Ng==",
    "user": {
      "login": "rfcbot",
      "id": 20760818,
      "node_id": "MDQ6VXNlcjIwNzYwODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/20760818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rfcbot",
      "html_url": "https://github.com/rfcbot",
      "followers_url": "https://api.github.com/users/rfcbot/followers",
      "following_url": "https://api.github.com/users/rfcbot/following{/other_user}",
      "gists_url": "https://api.github.com/users/rfcbot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rfcbot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rfcbot/subscriptions",
      "organizations_url": "https://api.github.com/users/rfcbot/orgs",
      "repos_url": "https://api.github.com/users/rfcbot/repos",
      "events_url": "https://api.github.com/users/rfcbot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rfcbot/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-14T17:44:07Z",
    "updated_at": "2018-04-14T17:44:07Z",
    "body": "The final comment period is now complete.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/381346846/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/383940293",
    "html_url": "https://github.com/rust-lang/rust/issues/27802#issuecomment-383940293",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/27802",
    "id": 383940293,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mzk0MDI5Mw==",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-24T13:56:38Z",
    "updated_at": "2018-04-24T13:56:38Z",
    "body": "Deprecated in https://github.com/rust-lang/rust/pull/49970",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/383940293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
