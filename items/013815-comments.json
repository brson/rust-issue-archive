[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42142269",
    "html_url": "https://github.com/rust-lang/rust/issues/13815#issuecomment-42142269",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13815",
    "id": 42142269,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMTQyMjY5",
    "user": {
      "login": "Rufflewind",
      "id": 6571068,
      "node_id": "MDQ6VXNlcjY1NzEwNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6571068?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rufflewind",
      "html_url": "https://github.com/Rufflewind",
      "followers_url": "https://api.github.com/users/Rufflewind/followers",
      "following_url": "https://api.github.com/users/Rufflewind/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rufflewind/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rufflewind/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rufflewind/subscriptions",
      "organizations_url": "https://api.github.com/users/Rufflewind/orgs",
      "repos_url": "https://api.github.com/users/Rufflewind/repos",
      "events_url": "https://api.github.com/users/Rufflewind/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rufflewind/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-04T19:33:58Z",
    "updated_at": "2014-05-05T04:46:17Z",
    "body": "[Made an attempt at it (no tests yet).](https://github.com/Rufflewind/rust/compare/patch-3)  I did some manual testing on Windows and it looks like the current working directory and environment variables are being encoded correctly.  However, the arguments are still showing garbage (encoded as UTF8 but with zeroes after every byte).\n\n**Edit 1:** Found the source of the problem: `make_command_line` doesn't handle Unicode properly.\n\n**Edit 2:** Changed to `GetEnvironmentStrings` (`os::env_as_bytes`) as well.  Do you want this as a separate patch or combine with the above?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42142269/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42158610",
    "html_url": "https://github.com/rust-lang/rust/issues/13815#issuecomment-42158610",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13815",
    "id": 42158610,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMTU4NjEw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-05T04:34:01Z",
    "updated_at": "2014-05-05T04:34:01Z",
    "body": "Nice work! Feel free to lump it all together as 1 PR, but separate commits for separate changes would be nice.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42158610/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42158721",
    "html_url": "https://github.com/rust-lang/rust/issues/13815#issuecomment-42158721",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13815",
    "id": 42158721,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMTU4NzIx",
    "user": {
      "login": "Rufflewind",
      "id": 6571068,
      "node_id": "MDQ6VXNlcjY1NzEwNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6571068?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rufflewind",
      "html_url": "https://github.com/Rufflewind",
      "followers_url": "https://api.github.com/users/Rufflewind/followers",
      "following_url": "https://api.github.com/users/Rufflewind/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rufflewind/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rufflewind/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rufflewind/subscriptions",
      "organizations_url": "https://api.github.com/users/Rufflewind/orgs",
      "repos_url": "https://api.github.com/users/Rufflewind/repos",
      "events_url": "https://api.github.com/users/Rufflewind/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rufflewind/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-05T04:38:28Z",
    "updated_at": "2014-05-05T04:39:07Z",
    "body": "Thanks!  Do you have any suggestions on how I should write the tests?  Testing `spawn` and `env_as_bytes` requires coordinating at least two processes so I'm not sure how that would work in the testing framework.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42158721/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42166292",
    "html_url": "https://github.com/rust-lang/rust/issues/13815#issuecomment-42166292",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13815",
    "id": 42166292,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMTY2Mjky",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-05T08:01:10Z",
    "updated_at": "2014-05-05T08:01:10Z",
    "body": "I'd recommend writing a `run-pass` test or two with some interesting file names. The test can exec itself to test other argument passing behavior.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42166292/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42497729",
    "html_url": "https://github.com/rust-lang/rust/issues/13815#issuecomment-42497729",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13815",
    "id": 42497729,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDk3NzI5",
    "user": {
      "login": "Rufflewind",
      "id": 6571068,
      "node_id": "MDQ6VXNlcjY1NzEwNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6571068?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rufflewind",
      "html_url": "https://github.com/Rufflewind",
      "followers_url": "https://api.github.com/users/Rufflewind/followers",
      "following_url": "https://api.github.com/users/Rufflewind/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rufflewind/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rufflewind/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rufflewind/subscriptions",
      "organizations_url": "https://api.github.com/users/Rufflewind/orgs",
      "repos_url": "https://api.github.com/users/Rufflewind/repos",
      "events_url": "https://api.github.com/users/Rufflewind/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rufflewind/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-07T23:58:08Z",
    "updated_at": "2014-05-07T23:58:58Z",
    "body": "Here's a [preliminary test](https://github.com/Rufflewind/rust/commit/patch-3/HEAD) that copies itself into a subdirectory with a non-ASCII name and then runs it as a child process.  The parent process also adds an environment variable and an argument, both containing non-ASCII characters.  The child process makes sure all the strings are intact.\n\nIt works fine when compiled and executed manually (on both Debian and Windows), but not with the test runner.  On both Debian and Windows the test fails due to missing symbols.  I'm looking into this but don't have an explanation/solution yet.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42497729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42498304",
    "html_url": "https://github.com/rust-lang/rust/issues/13815#issuecomment-42498304",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13815",
    "id": 42498304,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDk4MzA0",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-08T00:06:49Z",
    "updated_at": "2014-05-08T00:06:49Z",
    "body": "Nice job, that looks great!\n\nYou're likely seeing problems due to being unable to find the dynamic library dependencies. You're overriding the dynamic loader path environment variable to nothing, so all the libraries cannot be found.\n\nYou can probably get around it by compiling statically, using `// no-prefer-dynamic` near the top of the file (like other test directives).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42498304/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42498863",
    "html_url": "https://github.com/rust-lang/rust/issues/13815#issuecomment-42498863",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13815",
    "id": 42498863,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDk4ODYz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-08T00:15:32Z",
    "updated_at": "2014-05-08T00:15:32Z",
    "body": "It would also probably be best to use `std::io::Process` instead of `native::io::Process` directly. That way you can test both libgreen and libnative.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42498863/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42499167",
    "html_url": "https://github.com/rust-lang/rust/issues/13815#issuecomment-42499167",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13815",
    "id": 42499167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDk5MTY3",
    "user": {
      "login": "Rufflewind",
      "id": 6571068,
      "node_id": "MDQ6VXNlcjY1NzEwNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6571068?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rufflewind",
      "html_url": "https://github.com/Rufflewind",
      "followers_url": "https://api.github.com/users/Rufflewind/followers",
      "following_url": "https://api.github.com/users/Rufflewind/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rufflewind/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rufflewind/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rufflewind/subscriptions",
      "organizations_url": "https://api.github.com/users/Rufflewind/orgs",
      "repos_url": "https://api.github.com/users/Rufflewind/repos",
      "events_url": "https://api.github.com/users/Rufflewind/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rufflewind/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-08T00:20:38Z",
    "updated_at": "2014-05-08T00:20:38Z",
    "body": "> You're likely seeing problems due to being unable to find the dynamic library dependencies. You're overriding the dynamic loader path environment variable to nothing, so all the libraries cannot be found.\n\nThat's what I originally thought too, so I made sure to append to the existing environment variables.  However, the error still occurs.  I'll use `// no-prefer-dynamic` and see if that helps.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42499167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42721468",
    "html_url": "https://github.com/rust-lang/rust/issues/13815#issuecomment-42721468",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/13815",
    "id": 42721468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzIxNDY4",
    "user": {
      "login": "Rufflewind",
      "id": 6571068,
      "node_id": "MDQ6VXNlcjY1NzEwNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6571068?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Rufflewind",
      "html_url": "https://github.com/Rufflewind",
      "followers_url": "https://api.github.com/users/Rufflewind/followers",
      "following_url": "https://api.github.com/users/Rufflewind/following{/other_user}",
      "gists_url": "https://api.github.com/users/Rufflewind/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Rufflewind/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Rufflewind/subscriptions",
      "organizations_url": "https://api.github.com/users/Rufflewind/orgs",
      "repos_url": "https://api.github.com/users/Rufflewind/repos",
      "events_url": "https://api.github.com/users/Rufflewind/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Rufflewind/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-09T22:46:22Z",
    "updated_at": "2014-05-09T22:46:22Z",
    "body": "I think the reason why the library can't be found is because the test runner adds a relative path to the environment variables.  But, in any case, using static linking works.\n\n(Sorry for the spam; didn't realize \"Issue\" is a special word on GitHub.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/42721468/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
