[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52149957",
    "html_url": "https://github.com/rust-lang/rust/issues/16492#issuecomment-52149957",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16492",
    "id": 52149957,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTQ5OTU3",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T06:57:36Z",
    "updated_at": "2014-08-14T06:57:36Z",
    "body": "cc @cmr, who first hit this bug.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52149957/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52150274",
    "html_url": "https://github.com/rust-lang/rust/issues/16492#issuecomment-52150274",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16492",
    "id": 52150274,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTUwMjc0",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-14T07:02:30Z",
    "updated_at": "2014-08-14T07:02:30Z",
    "body": "The LLVM IR for the Drop glue for `DropMe_NoImpl`:\n\n``` llvm\ndefine internal void @_ZN13DropMe_NoImpl14glue_drop.148117h571786c88b10fe1dE(%\"struct.DropMe_NoImpl<[]>\"*) unnamed_addr #3 {\nentry-block:\n  %1 = getelementptr inbounds %\"struct.DropMe_NoImpl<[]>\"* %0, i32 0, i32 0\n  call void @_ZN7DropMsg14glue_drop.146617h5eadde10e6a29588E(%\"struct.DropMsg<[]>\"* %1)\n  %2 = getelementptr inbounds %\"struct.DropMe_NoImpl<[]>\"* %0, i32 0, i32 1\n  call void @_ZN7DropMsg14glue_drop.146617h5eadde10e6a29588E(%\"struct.DropMsg<[]>\"* %2)\n  %3 = getelementptr inbounds %\"struct.DropMe_NoImpl<[]>\"* %0, i32 0, i32 2\n  call void @_ZN7DropMsg14glue_drop.146617h5eadde10e6a29588E(%\"struct.DropMsg<[]>\"* %3)\n  ret void\n}\n```\n\nThe LLVM IR for the Drop glue for `DropMe_Impl`:\n\n``` llvm\ndefine internal void @_ZN11DropMe_Impl14glue_drop.146417h9f98bddab7694295E(%\"struct.DropMe_Impl<[]>\"*) unnamed_addr #3 {\nentry-block:\n  %1 = alloca { i8*, i32 }\n  %2 = getelementptr inbounds %\"struct.DropMe_Impl<[]>\"* %0, i32 0, i32 3\n  %3 = load i8* %2, !range !0\n  %4 = trunc i8 %3 to i1\n  br i1 %4, label %cond, label %next\n\nnext:                                             ; preds = %normal-return, %entry-block\n  ret void\n\ncond:                                             ; preds = %entry-block\n  %5 = getelementptr inbounds %\"struct.DropMe_Impl<[]>\"* %0, i32 0, i32 0\n  %6 = getelementptr inbounds %\"struct.DropMe_Impl<[]>\"* %0, i32 0, i32 1\n  %7 = getelementptr inbounds %\"struct.DropMe_Impl<[]>\"* %0, i32 0, i32 2\n  %8 = getelementptr inbounds %\"struct.DropMe_Impl<[]>\"* %0, i32 0, i32 3\n  invoke void @_ZN16DropMe_Impl.Drop4drop20hf5d4e9dbec49bd1eCaaE(%\"struct.DropMe_Impl<[]>\"* noalias nocapture dereferenceable(80) %0)\n          to label %normal-return unwind label %unwind_custom_\n\nnormal-return:                                    ; preds = %cond\n  call void @_ZN7DropMsg14glue_drop.146617h5eadde10e6a29588E(%\"struct.DropMsg<[]>\"* %7)\n  call void @_ZN7DropMsg14glue_drop.146617h5eadde10e6a29588E(%\"struct.DropMsg<[]>\"* %6)\n  call void @_ZN7DropMsg14glue_drop.146617h5eadde10e6a29588E(%\"struct.DropMsg<[]>\"* %5)\n  br label %next\n\nunwind_custom_:                                   ; preds = %cond\n  %9 = landingpad { i8*, i32 } personality i32 (i32, i32, i64, %\"struct.rustrt::libunwind::_Unwind_Exception<[]>[#9]\"*, %\"enum.rustrt::libunwind::_Unwind_Context<[]>[#9]\"*)* @rust_eh_personality\n          cleanup\n  store { i8*, i32 } %9, { i8*, i32 }* %1\n  br label %clean_custom_\n\nresume:                                           ; preds = %clean_custom_\n  %10 = load { i8*, i32 }* %1\n  resume { i8*, i32 } %10\n\nclean_custom_:                                    ; preds = %unwind_custom_\n  call void @_ZN7DropMsg14glue_drop.146617h5eadde10e6a29588E(%\"struct.DropMsg<[]>\"* %7)\n  call void @_ZN7DropMsg14glue_drop.146617h5eadde10e6a29588E(%\"struct.DropMsg<[]>\"* %6)\n  call void @_ZN7DropMsg14glue_drop.146617h5eadde10e6a29588E(%\"struct.DropMsg<[]>\"* %5)\n  br label %resume\n}\n```\n\nI don't know why it's getting pointers to each field before calling `drop()`, they're not used until the cleanup, and they're cleaned up in reverse order. It's also, for some reason, grabbing a pointer to the drop flag (`%8`), even though it doesn't use it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52150274/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52342205",
    "html_url": "https://github.com/rust-lang/rust/issues/16492#issuecomment-52342205",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16492",
    "id": 52342205,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzQyMjA1",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-15T18:36:34Z",
    "updated_at": "2014-08-15T18:36:34Z",
    "body": "Nominating. Seems pretty strange.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52342205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52343650",
    "html_url": "https://github.com/rust-lang/rust/issues/16492#issuecomment-52343650",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16492",
    "id": 52343650,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzQzNjUw",
    "user": {
      "login": "lilyball",
      "id": 714,
      "node_id": "MDQ6VXNlcjcxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lilyball",
      "html_url": "https://github.com/lilyball",
      "followers_url": "https://api.github.com/users/lilyball/followers",
      "following_url": "https://api.github.com/users/lilyball/following{/other_user}",
      "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions",
      "organizations_url": "https://api.github.com/users/lilyball/orgs",
      "repos_url": "https://api.github.com/users/lilyball/repos",
      "events_url": "https://api.github.com/users/lilyball/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lilyball/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-15T18:49:35Z",
    "updated_at": "2014-08-15T18:49:35Z",
    "body": "I have an approved commit for this already, it's just failing on the pretty-rpass test at the moment.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52343650/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52344156",
    "html_url": "https://github.com/rust-lang/rust/issues/16492#issuecomment-52344156",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/16492",
    "id": 52344156,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzQ0MTU2",
    "user": {
      "login": "pcwalton",
      "id": 157897,
      "node_id": "MDQ6VXNlcjE1Nzg5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcwalton",
      "html_url": "https://github.com/pcwalton",
      "followers_url": "https://api.github.com/users/pcwalton/followers",
      "following_url": "https://api.github.com/users/pcwalton/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions",
      "organizations_url": "https://api.github.com/users/pcwalton/orgs",
      "repos_url": "https://api.github.com/users/pcwalton/repos",
      "events_url": "https://api.github.com/users/pcwalton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcwalton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-08-15T18:53:55Z",
    "updated_at": "2014-08-15T18:53:55Z",
    "body": "I'm OK with disabling the test. Going forward the pretty printer should mainly be used for compiler diagnostics and rustfmt should cover the reformatting use cases, IMO.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/52344156/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
