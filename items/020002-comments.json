[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67620718",
    "html_url": "https://github.com/rust-lang/rust/pull/20002#issuecomment-67620718",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20002",
    "id": 67620718,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NjIwNzE4",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-19T10:17:48Z",
    "updated_at": "2014-12-19T10:17:48Z",
    "body": "I'll take another read through, but what is here looks pretty good to me. \n\nThere are several follow-on points though. These could be addressed in separate PRs. I will create issues for these points and attach them to https://github.com/rust-lang/rust/issues/17657.\n1. According to the RFC, where clauses that do not involve parameters (e.g., `where int : Eq`) are supposed to be illegal, but we can always open an issue to check for those.\n2. We'll want to modify the code that checks that impls are consistent with traits. I think that it only looks at the bounds of the `TypeParameterDef`. We should modify it to just call `to_bounds()` on the Generics and examine the resulting predicate sets. We may want to change it to just create its own trait fulfillment context and check that, given the parameter environment derived from the trait, we can derive all the requirements of the impl. This could also be something we address in a followup PR.\n3. The last point gives rise to a curious case where the impl (which has more concrete types than the trait) actually knows that some methods can never be invoked. We never did clarify what to do here. I am presently leaning towards allowing impl methods to be declared with no body, which corresponds to a case that we can statically show does not occur. Thus `fn foo();` in an impl would be equivalent to `fn foo() { panic!() }` (and that is how we would codegen it), except that we statically check that the where clauses from the trait, if substituted with the type parameters of the impl, cannot be satisfied.\n4. I think we will need to modify the parser to permit `for` qualifiers to appear in more places. In particular, i'd like to be able to write something like this:\n   \n   where for<'a, 'b> &'a T : Foo<&'b T>\n\nbut today the parser only accepts `for` after the `:`. the rest of the code already considers `'a` and `'b` to be in scope for the self-type of the trait, so it's just the parser that has to be changed. I imagine that the `for`, in that case, would distribute over all the attached where clauses, so:\n\n```\nwhere for<'a> T : Foo<&'a T> + Bar<&'a T>\n```\n\nwould be equivalent to:\n\n```\nwhere T : for<'a> Foo&'a T> + for<'a> Bar<&'a T>\n```\n\nPoints 3 and 4 probably require an RFC.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67620718/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67623329",
    "html_url": "https://github.com/rust-lang/rust/pull/20002#issuecomment-67623329",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20002",
    "id": 67623329,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NjIzMzI5",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-19T10:44:08Z",
    "updated_at": "2014-12-19T10:44:08Z",
    "body": "I've created issues for each of those points in https://github.com/rust-lang/rust/issues/17657\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67623329/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67624913",
    "html_url": "https://github.com/rust-lang/rust/pull/20002#issuecomment-67624913",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20002",
    "id": 67624913,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NjI0OTEz",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-19T10:59:48Z",
    "updated_at": "2014-12-19T10:59:48Z",
    "body": "OK, I went through the commits and offered commits. It's also probably a good idea to cleanup the history a bit, though I'm not a stickler about this (but the intermediate commits don't seem... especially useful here; also, don't worry about preserving authorship on the commit that came from me). I'd like to see some more tests. Here are two I wrote to test the code, they seem to work (which is awesome): \n\nhttps://github.com/nikomatsakis/rust/tree/jroesch-generalized-where-clause-parser/\n\nIt'd be great to see also tests that add builtin bounds locally, since they are treated rather differently. In particular `Copy` and `Sized`. I think though that `Sized` still has some parts of the code that use the bounds lists rather than checking the parameter environment. I was working on refactoring those. So you may encounter that those tests don't work, in which case we should just follow another follow-up issue (and I should figure out why my branch wasn't bootstrapping...)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67624913/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67624926",
    "html_url": "https://github.com/rust-lang/rust/pull/20002#issuecomment-67624926",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20002",
    "id": 67624926,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NjI0OTI2",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-19T10:59:55Z",
    "updated_at": "2014-12-19T10:59:55Z",
    "body": "OK, ping me on IRC if there are any questions.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67624926/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67722683",
    "html_url": "https://github.com/rust-lang/rust/pull/20002#issuecomment-67722683",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20002",
    "id": 67722683,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NzIyNjgz",
    "user": {
      "login": "jroesch",
      "id": 696509,
      "node_id": "MDQ6VXNlcjY5NjUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/696509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jroesch",
      "html_url": "https://github.com/jroesch",
      "followers_url": "https://api.github.com/users/jroesch/followers",
      "following_url": "https://api.github.com/users/jroesch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jroesch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jroesch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jroesch/subscriptions",
      "organizations_url": "https://api.github.com/users/jroesch/orgs",
      "repos_url": "https://api.github.com/users/jroesch/repos",
      "events_url": "https://api.github.com/users/jroesch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jroesch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-20T03:02:03Z",
    "updated_at": "2014-12-20T03:02:03Z",
    "body": "I just rebased, and squashed them into a single commit. Hopefully I have addressed all the comments, and will begin chasing down some of the follow up issues.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67722683/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67723793",
    "html_url": "https://github.com/rust-lang/rust/pull/20002#issuecomment-67723793",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20002",
    "id": 67723793,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NzIzNzkz",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-20T03:52:56Z",
    "updated_at": "2014-12-20T03:52:56Z",
    "body": "As discussed on IRC, r+ with one additional test that shows a where clause with a generic trait, so that substitution is required.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67723793/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67724596",
    "html_url": "https://github.com/rust-lang/rust/pull/20002#issuecomment-67724596",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20002",
    "id": 67724596,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NzI0NTk2",
    "user": {
      "login": "jroesch",
      "id": 696509,
      "node_id": "MDQ6VXNlcjY5NjUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/696509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jroesch",
      "html_url": "https://github.com/jroesch",
      "followers_url": "https://api.github.com/users/jroesch/followers",
      "following_url": "https://api.github.com/users/jroesch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jroesch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jroesch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jroesch/subscriptions",
      "organizations_url": "https://api.github.com/users/jroesch/orgs",
      "repos_url": "https://api.github.com/users/jroesch/repos",
      "events_url": "https://api.github.com/users/jroesch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jroesch/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-20T04:26:25Z",
    "updated_at": "2014-12-20T04:26:36Z",
    "body": "Tests should be in an acceptable state now. Should be good to go :+1:. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67724596/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67730558",
    "html_url": "https://github.com/rust-lang/rust/pull/20002#issuecomment-67730558",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/20002",
    "id": 67730558,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NzMwNTU4",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-20T09:39:08Z",
    "updated_at": "2014-12-20T09:39:08Z",
    "body": "Giving p=1 because this enables work on stdlib\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/67730558/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
