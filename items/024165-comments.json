[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90686876",
    "html_url": "https://github.com/rust-lang/rust/issues/24165#issuecomment-90686876",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24165",
    "id": 90686876,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkwNjg2ODc2",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-07T18:15:59Z",
    "updated_at": "2015-04-07T18:15:59Z",
    "body": "This is not a bug, as these impls do conflict: `T` could be instantiated with `Vec<T>`. In other words, the impl that would be selected here is ambiguous:\n\n``` rust\nfn foo<F: Foo>() {}\n\nfn main() {\n    foo::<Vec<i32>>();\n}\n```\n\nOne solution involves parameterizing `Foo` itself with `T`, as multidispatch will disambiguate the two impls:\n\n``` rust\ntrait Foo<T> {}\n\nimpl<T> Foo<T> for T where T: Copy {}\nimpl<T> Foo<T> for Vec<T> where T: Copy {}\n\nfn main() {\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90686876/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90689520",
    "html_url": "https://github.com/rust-lang/rust/issues/24165#issuecomment-90689520",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24165",
    "id": 90689520,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkwNjg5NTIw",
    "user": {
      "login": "bfops",
      "id": 196249,
      "node_id": "MDQ6VXNlcjE5NjI0OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/196249?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bfops",
      "html_url": "https://github.com/bfops",
      "followers_url": "https://api.github.com/users/bfops/followers",
      "following_url": "https://api.github.com/users/bfops/following{/other_user}",
      "gists_url": "https://api.github.com/users/bfops/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bfops/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bfops/subscriptions",
      "organizations_url": "https://api.github.com/users/bfops/orgs",
      "repos_url": "https://api.github.com/users/bfops/repos",
      "events_url": "https://api.github.com/users/bfops/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bfops/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-07T18:25:37Z",
    "updated_at": "2015-04-07T18:30:47Z",
    "body": "`Vec<T>` doesn't implement `Copy`; I can tell you exactly which `impl` should be picked in your example. And until I ran `rustup` today, the compiler was doing that properly. And it _should_ be able to, since the `impl Copy` must be in scope if it exists for `Vec`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90689520/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90691235",
    "html_url": "https://github.com/rust-lang/rust/issues/24165#issuecomment-90691235",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24165",
    "id": 90691235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkwNjkxMjM1",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-07T18:30:48Z",
    "updated_at": "2015-04-07T18:30:48Z",
    "body": "Oh, I see. This may be a result of #23867.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90691235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90692285",
    "html_url": "https://github.com/rust-lang/rust/issues/24165#issuecomment-90692285",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24165",
    "id": 90692285,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkwNjkyMjg1",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-07T18:34:04Z",
    "updated_at": "2015-04-07T18:34:04Z",
    "body": "In particular, https://github.com/rust-lang/rfcs/blob/master/text/1023-rebalancing-coherence.md#type-locality-and-negative-reasoning seems relevant.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90692285/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90693541",
    "html_url": "https://github.com/rust-lang/rust/issues/24165#issuecomment-90693541",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24165",
    "id": 90693541,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkwNjkzNTQx",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-07T18:38:25Z",
    "updated_at": "2015-04-07T18:38:25Z",
    "body": "/cc @nikomatsakis \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90693541/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90710699",
    "html_url": "https://github.com/rust-lang/rust/issues/24165#issuecomment-90710699",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24165",
    "id": 90710699,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkwNzEwNjk5",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-07T19:46:36Z",
    "updated_at": "2015-04-07T19:46:36Z",
    "body": "Yes, this is now the intended behavior, due to rust-lang/rfcs#1023, as @apasel422 points out. And this is also one of the known cases where it'd be nice to be able to extend the system, though the best way to do that is not yet agreed upon.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90710699/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90716477",
    "html_url": "https://github.com/rust-lang/rust/issues/24165#issuecomment-90716477",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24165",
    "id": 90716477,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkwNzE2NDc3",
    "user": {
      "login": "bfops",
      "id": 196249,
      "node_id": "MDQ6VXNlcjE5NjI0OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/196249?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bfops",
      "html_url": "https://github.com/bfops",
      "followers_url": "https://api.github.com/users/bfops/followers",
      "following_url": "https://api.github.com/users/bfops/following{/other_user}",
      "gists_url": "https://api.github.com/users/bfops/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bfops/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bfops/subscriptions",
      "organizations_url": "https://api.github.com/users/bfops/orgs",
      "repos_url": "https://api.github.com/users/bfops/repos",
      "events_url": "https://api.github.com/users/bfops/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bfops/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-07T20:09:33Z",
    "updated_at": "2015-04-07T20:17:18Z",
    "body": "Ah. So given that the type system is now less powerful indefinitely, what's the appropriate course of action if I'm writing a `Flatten` trait? This _used_ to work:\n\n```\npub trait Flatten<T> {\n  /// Emit a value into a Vec of bytes.\n  fn emit(v: &Self, dest: &mut Vec<u8>) -> Result<(), ()>;\n  /// Parse a value out of a stream of bytes.\n  fn read<'a>(s: &mut MemStream<'a>) -> Result<Self, EOF>;\n}\n\n#[macro_export]\nmacro_rules! flatten_unit_struct_impl(\n  ...\n);\n\n#[macro_export]\nmacro_rules! flatten_struct_impl(\n  ...\n);\n\n#[macro_export]\nmacro_rules! flatten_enum_impl(\n  ...\n);\n\nimpl<T> Flatten for T where T: Copy {\n  ...\n}\n\nimpl<T> Flatten for Vec<T> where T: Copy {\n  ...\n}\n\nimpl Flatten for String {\n  ...\n}\n```\n\n@apasel422 I'm having some trouble using your fix for this, since not everything is neatly parameterized on some `T`.\n\nThe reason I'm not using `rustc-serialize` is because I couldn't find a way to optimize the `Vec<T> where T: Copy` case to a single `memcpy`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90716477/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90722074",
    "html_url": "https://github.com/rust-lang/rust/issues/24165#issuecomment-90722074",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24165",
    "id": 90722074,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkwNzIyMDc0",
    "user": {
      "login": "apasel422",
      "id": 8644784,
      "node_id": "MDQ6VXNlcjg2NDQ3ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apasel422",
      "html_url": "https://github.com/apasel422",
      "followers_url": "https://api.github.com/users/apasel422/followers",
      "following_url": "https://api.github.com/users/apasel422/following{/other_user}",
      "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions",
      "organizations_url": "https://api.github.com/users/apasel422/orgs",
      "repos_url": "https://api.github.com/users/apasel422/repos",
      "events_url": "https://api.github.com/users/apasel422/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apasel422/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-07T20:29:21Z",
    "updated_at": "2015-04-07T20:29:21Z",
    "body": "@bfops: I'd suggest bringing this up in http://users.rust-lang.org/ and closing this issue, but the solution depends on how you want to be able to use this trait. My type parameter suggestion was just based on your reduced test case, but, in general, you won't be able to provide multiple `Flatten` impls if you have a blanket one for `T`. You may also want to take a look at [`rustc-serialize`](https://github.com/rust-lang/rustc-serialize) and [`serde`](https://github.com/erickt/rust-serde) for ideas.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90722074/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
