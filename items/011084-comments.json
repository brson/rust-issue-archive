[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68721466",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-68721466",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 68721466,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NzIxNDY2",
    "user": {
      "login": "SimonSapin",
      "id": 291359,
      "node_id": "MDQ6VXNlcjI5MTM1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSapin",
      "html_url": "https://github.com/SimonSapin",
      "followers_url": "https://api.github.com/users/SimonSapin/followers",
      "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
      "repos_url": "https://api.github.com/users/SimonSapin/repos",
      "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-05T15:17:48Z",
    "updated_at": "2015-01-05T15:17:48Z",
    "body": "Do unboxed closures fix this?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/68721466/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162004634",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-162004634",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 162004634,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MjAwNDYzNA==",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-04T15:59:28Z",
    "updated_at": "2015-12-04T15:59:28Z",
    "body": "> Do unboxed closures fix this?\n\nNot completely, it seems. I [rewrote the original tests provided](https://gist.github.com/shepmaster/be393d0483bcd30813b7).\n\nThe implementation in the standard library uses the adapter iterator, so I only compared it to a version using `scan`. I also added one with `filter_map`, just to see how that would play out. I didn't expect those to be different, but:\n\n```\nrunning 3 tests\ntest bench_from_iter                 ... bench:       6,991 ns/iter (+/- 941)\ntest bench_from_iter_with_filter_map ... bench:       8,324 ns/iter (+/- 1,320)\ntest bench_from_iter_with_scan       ... bench:       7,299 ns/iter (+/- 1,172)\n```\n\nSo it seems like the adapter iterator is still the most performant.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162004634/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162008168",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-162008168",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 162008168,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MjAwODE2OA==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-04T16:13:57Z",
    "updated_at": "2015-12-04T16:13:57Z",
    "body": "@shepmaster Thanks for updating the benchmarks! Unfortunately they primarily measure the time it takes to create the `v` source vectors. The results are highly unstable and re-running the benchmark a few times had a different winner everytime, because the results vary enough to make up for the differences.\n\nImproved benchmark at https://gist.github.com/dotdash/5ce3f0bfa2e652ca58b5 -- I simply moved the vector creation out of the loop and user `iter().cloned()` instead of `into_iter()`. As the vectors are made up of `i32` values, that shouldn't affect the result compared for the actual loop that we want to measure.\n\nResults:\n\n```\ntest bench_from_iter                 ... bench:       2,304 ns/iter (+/- 23)\ntest bench_from_iter_with_filter_map ... bench:       4,996 ns/iter (+/- 122)\ntest bench_from_iter_with_scan       ... bench:       3,071 ns/iter (+/- 33)\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162008168/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162008998",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-162008998",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 162008998,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MjAwODk5OA==",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-04T16:17:21Z",
    "updated_at": "2015-12-04T16:17:21Z",
    "body": "> they primarily measure the time it takes to create the `v` source vectors\n\nYeah, I should have noted that. I left if that way just to be consistent with the original version, but I also figured that since each was doing the same over-work they would come out consistent. A small number (~5) runs had the same winners for me, so I shipped it! :-)\n\nThanks for improving it even more!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/162008998/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/247860189",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-247860189",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 247860189,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0Nzg2MDE4OQ==",
    "user": {
      "login": "pmarcelll",
      "id": 1909968,
      "node_id": "MDQ6VXNlcjE5MDk5Njg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1909968?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pmarcelll",
      "html_url": "https://github.com/pmarcelll",
      "followers_url": "https://api.github.com/users/pmarcelll/followers",
      "following_url": "https://api.github.com/users/pmarcelll/following{/other_user}",
      "gists_url": "https://api.github.com/users/pmarcelll/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pmarcelll/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pmarcelll/subscriptions",
      "organizations_url": "https://api.github.com/users/pmarcelll/orgs",
      "repos_url": "https://api.github.com/users/pmarcelll/repos",
      "events_url": "https://api.github.com/users/pmarcelll/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pmarcelll/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-09-18T17:11:34Z",
    "updated_at": "2016-09-18T17:11:34Z",
    "body": "Results with the improved benchmark on nightly:\n\n```\nrunning 3 tests\ntest bench_from_iter                 ... bench:       2,158 ns/iter (+/- 24)\ntest bench_from_iter_with_filter_map ... bench:       2,474 ns/iter (+/- 89)\ntest bench_from_iter_with_scan       ... bench:       2,145 ns/iter (+/- 35)\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/247860189/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/327346350",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-327346350",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 327346350,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNzM0NjM1MA==",
    "user": {
      "login": "Eh2406",
      "id": 3709504,
      "node_id": "MDQ6VXNlcjM3MDk1MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3709504?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Eh2406",
      "html_url": "https://github.com/Eh2406",
      "followers_url": "https://api.github.com/users/Eh2406/followers",
      "following_url": "https://api.github.com/users/Eh2406/following{/other_user}",
      "gists_url": "https://api.github.com/users/Eh2406/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Eh2406/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Eh2406/subscriptions",
      "organizations_url": "https://api.github.com/users/Eh2406/orgs",
      "repos_url": "https://api.github.com/users/Eh2406/repos",
      "events_url": "https://api.github.com/users/Eh2406/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Eh2406/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-09-06T01:16:30Z",
    "updated_at": "2017-09-06T01:20:15Z",
    "body": "There is a FIXME related to this issue,\r\nhttps://github.com/rust-lang/rust/blob/master/src/libcore/option.rs#L1092\r\nhttps://github.com/rust-lang/rust/blob/master/src/libcore/result.rs#L1117\r\nIs this now resolved? If so can the FIXME be fix, or made more specific?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/327346350/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/409288530",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-409288530",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 409288530,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTI4ODUzMA==",
    "user": {
      "login": "ljedrz",
      "id": 3750347,
      "node_id": "MDQ6VXNlcjM3NTAzNDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3750347?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ljedrz",
      "html_url": "https://github.com/ljedrz",
      "followers_url": "https://api.github.com/users/ljedrz/followers",
      "following_url": "https://api.github.com/users/ljedrz/following{/other_user}",
      "gists_url": "https://api.github.com/users/ljedrz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ljedrz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ljedrz/subscriptions",
      "organizations_url": "https://api.github.com/users/ljedrz/orgs",
      "repos_url": "https://api.github.com/users/ljedrz/repos",
      "events_url": "https://api.github.com/users/ljedrz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ljedrz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-07-31T16:45:05Z",
    "updated_at": "2018-07-31T16:45:05Z",
    "body": "This issue can be closed, as the `scan` performance issue is void.\r\n\r\nHowever, since `Scan` no longer exposes `state`, these `FIXME`s are void too - I see no way of rewriting these `FromIterator` implementations using `scan`.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/409288530/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/474797847",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-474797847",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 474797847,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDc5Nzg0Nw==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-20T11:53:30Z",
    "updated_at": "2019-03-20T14:00:20Z",
    "body": "I think I see a way to rewrite them using `scan`. I'll just post a PR with it if I'm right; if I'm wrong, I'll post a PR removing the FIXME comments.\r\n\r\n * A reason that it can be tricky to use `scan` is that one might think that the accumulated value being built should be owned by the `state` parameter that is threaded through the scan; but that would be a mistake, because there is no way to recover that `state` after the scan is finished, as @ljedrz noted above.\r\n * From what I can tell, the reason the FIXME commenter mentioned `scan` here is *not* because of the threaded `state` parameter, but rather because `scan`, unlike e.g. `fold`, can terminate early without taking all of the elements from the given `iter`, which is necessary for correctly implementing `FromIterator` for `Option` and `Result`.\r\n\r\nUpdate: reading over the previous comments more carefully, @erickt, @shepmaster and @dotdash have all provided benchmarks that illustrate how to implement `FromIterator` for `Result` using `scan`. (And `Option` is similar.)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/474797847/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/474825066",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-474825066",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 474825066,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDgyNTA2Ng==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-20T13:20:07Z",
    "updated_at": "2019-03-20T13:58:48Z",
    "body": "~~(or perhaps `try_fold` would be more idiomatic here than `scan`)~~ ((no that doesn't work))",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/474825066/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/474842240",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-474842240",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 474842240,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDg0MjI0MA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-20T14:01:38Z",
    "updated_at": "2019-03-20T14:21:45Z",
    "body": "Interestingly, for me I do observe a 2x slowdown on the @dotdash -provided benchmark.\r\n\r\n(And now I need to see if I can reproduce the previous results that claims there was no slowdown...)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/474842240/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475053714",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-475053714",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 475053714,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTA1MzcxNA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-20T22:28:44Z",
    "updated_at": "2019-03-21T10:09:54Z",
    "body": "Okay  I think I see what happened here, at least procedurally. (I do not yet have an explanation for the performance difference I am observing, but I want to first document the details of the observations that I have made, because the historical trajectory is interesting.)\r\n\r\nFirst, here's what I did (in `details` block):\r\n\r\n<details>\r\n\r\n * I took the dotdash-benchmark, and I made two versions of the `bench_from_iter_with_scan`: the one that @dotdash had is `bench_from_iter_with_scan_passing_state`, and I made a variant that uses a free-variable in the closure and just passes `()` for the parameter (just because I wanted to see if it ever mattered). I didn't notice any signficant difference in my results, so I do not think the free-variable vs explicit-parameter styles matter.\r\n * Here is the source code I used: https://gist.github.com/pnkfelix/7cb66d32c3cd9e1f2ea1a61ef15a0a3a\r\n * I ran the dotdash-benchmark on each stable compiler version from 1.13 through 1.33 (using `RUSTC_BOOTSTRAP=1` to get around the `#![feature(test)]` restriction).\r\n * I ran each benchmark executable five times, via this shell invocation:\r\n```\r\n% for VERSION in 1.{13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33}.0 ; do (\\\r\n  echo $VERSION && rustup update $VERSION && rustc +$VERSION --version && \\\r\n  RUSTC_BOOTSTRAP=1 rustc +$VERSION -C opt-level=3  --test main-bench.rs && \\\r\n   ./main-bench --bench && ./main-bench --bench && ./main-bench --bench && ./main-bench --bench && ./main-bench --bench \\\r\n) ; done | tee version-bench.txt\r\n```\r\n * Full log is at this gist: https://gist.github.com/2db1e313af68ad6936a3da28c0c272f5\r\n * I averaged the numbers in a spreadsheet (maybe I should have taken minimums rather than averages, but from skimming the data I don't think it matters), and looked at the performance of the variant implementations compared to the built-in explicit-adapter based one. \r\n * While I took averages for my analysis, in the text below I just grabbed representative output from the gist that is similar enough to the averages I observed.\r\n\r\n</details>\r\n\r\nObservations (in `details` block):\r\n\r\n<details>\r\n\r\n *  I definitely see that while back in 1.13 the performance was about the same for the explicit-adapter (i.e. the old implementation) as for the `scan`-based implementation (and a little slower for `filter_map`). That supports @pmarcelll 's findings from 2016. Here is an sample run from 1.33 (on my Linux desktop):\r\n\r\n```\r\nrustc 1.13.0 (2c6933acc 2016-11-07)\r\n\r\nrunning 4 tests\r\ntest bench_from_iter                         ... bench:       1,691 ns/iter (+/- 9)\r\ntest bench_from_iter_with_filter_map         ... bench:       1,930 ns/iter (+/- 230)\r\ntest bench_from_iter_with_scan_passing_state ... bench:       1,682 ns/iter (+/- 10)\r\ntest bench_from_iter_with_scan_with_freevar  ... bench:       1,686 ns/iter (+/- 55)\r\n```\r\n\r\n * Between 1.14 and 1.15, the relative performance of the `filter_map`-based implementation regressed, but the relative-performance of the `scan`-based implementation remained competitive.\r\n\r\n * Between 1.18 and 1.19, both the explicit-adapter  (`bench_from_iter`) and the `scan`-based implementations got a little bit faster. So the relative performance of the `scan`-based implementation still remained competitive.\r\n\r\n * But then between 1.19 and 1.20 the explicit-adapter regressed a lot, so that the `filter_map` and `scan`-based implementations were now significantly *faster* than the explicit-adapter:\r\n\r\n```\r\nrustc 1.20.0 (f3d6973f4 2017-08-27)\r\n\r\nrunning 4 tests\r\ntest bench_from_iter                         ... bench:       2,274 ns/iter (+/- 54)\r\ntest bench_from_iter_with_filter_map         ... bench:       1,793 ns/iter (+/- 14)\r\ntest bench_from_iter_with_scan_passing_state ... bench:       1,716 ns/iter (+/- 7)\r\ntest bench_from_iter_with_scan_with_freevar  ... bench:       1,716 ns/iter (+/- 26)\r\n```\r\n\r\n * Between 1.22 and 1.23, the performance of the `scan`-based implementation regressed significantly while the others remained constant:\r\n\r\n```\r\nrustc 1.23.0 (766bd11c8 2018-01-01)\r\n\r\nrunning 4 tests\r\ntest bench_from_iter                         ... bench:       2,238 ns/iter (+/- 2)\r\ntest bench_from_iter_with_filter_map         ... bench:       1,755 ns/iter (+/- 6)\r\ntest bench_from_iter_with_scan_passing_state ... bench:       3,506 ns/iter (+/- 6)\r\ntest bench_from_iter_with_scan_with_freevar  ... bench:       3,508 ns/iter (+/- 2)\r\n```\r\n\r\n * Then between 1.23 and 1.24, the performance of the `filter_map`-based implementation regressed to the point where it was no longer beating `bench_from_iter` by any significant degree.\r\n\r\n```\r\nrustc 1.24.0 (4d90ac38c 2018-02-12)\r\n\r\nrunning 4 tests\r\ntest bench_from_iter                         ... bench:       2,323 ns/iter (+/- 8)\r\ntest bench_from_iter_with_filter_map         ... bench:       2,535 ns/iter (+/- 4)\r\ntest bench_from_iter_with_scan_passing_state ... bench:       3,796 ns/iter (+/- 15)\r\ntest bench_from_iter_with_scan_with_freevar  ... bench:       3,792 ns/iter (+/- 11)\r\n```\r\n\r\n * Between 1.26 and 1.27 the performance of the `filter_map`-based implementation regressed again, quite significantly:\r\n\r\n```\r\nrustc 1.27.0 (3eda71b00 2018-06-19)\r\n\r\nrunning 4 tests\r\ntest bench_from_iter                         ... bench:       2,442 ns/iter (+/- 5)\r\ntest bench_from_iter_with_filter_map         ... bench:       5,080 ns/iter (+/- 55)\r\ntest bench_from_iter_with_scan_passing_state ... bench:       3,594 ns/iter (+/- 12)\r\ntest bench_from_iter_with_scan_with_freevar  ... bench:       3,591 ns/iter (+/- 2)\r\n```\r\n\r\n</details>\r\n\r\n----\r\n\r\nSo: that is a series of steps that sort of masks the bigger story here: these benchmarks went from this under 1.13:\r\n\r\n```\r\nrustc 1.13.0 (2c6933acc 2016-11-07)\r\n\r\nrunning 4 tests\r\ntest bench_from_iter                         ... bench:       1,691 ns/iter (+/- 9)\r\ntest bench_from_iter_with_filter_map         ... bench:       1,930 ns/iter (+/- 230)\r\ntest bench_from_iter_with_scan_passing_state ... bench:       1,682 ns/iter (+/- 10)\r\ntest bench_from_iter_with_scan_with_freevar  ... bench:       1,686 ns/iter (+/- 55)\r\n```\r\n\r\n\r\nto this under 1.27:\r\n\r\n```\r\nrustc 1.27.0 (3eda71b00 2018-06-19)\r\n\r\nrunning 4 tests\r\ntest bench_from_iter                         ... bench:       2,442 ns/iter (+/- 5)\r\ntest bench_from_iter_with_filter_map         ... bench:       5,080 ns/iter (+/- 55)\r\ntest bench_from_iter_with_scan_passing_state ... bench:       3,594 ns/iter (+/- 12)\r\ntest bench_from_iter_with_scan_with_freevar  ... bench:       3,591 ns/iter (+/- 2)\r\n```\r\n\r\nWhich does not seem like a good trajectory over time, for **any** of the variants, in both absolute and relative terms.\r\n\r\n(Note that there is non-zero chance that some other confounding factor in my benchmark apparatus is actually to blame for the gradual performance shift over time. I have thoughts on this but I am too tired to get into them here.)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475053714/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475059299",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-475059299",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 475059299,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTA1OTI5OQ==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-20T22:51:13Z",
    "updated_at": "2019-03-20T22:52:48Z",
    "body": "making this a P-high issue to at least diagnose what has happened to our performance in the cases noted in previous comment.\r\n\r\n(It might be better to fork such investigation off into its own separate issue. but again, I am tired and am just trying to do the minimal amount necessary to keep this on my radar in the short term with respect to tagging and assigning myself.)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475059299/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475158787",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-475158787",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 475158787,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTE1ODc4Nw==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-21T09:20:32Z",
    "updated_at": "2019-03-21T09:20:32Z",
    "body": "@pnkfelix Could you share the code for your benchmark?\r\n\r\n`perf` shows this as the hotspot for my old `bench_from_iter_with_scan` benchmark:\r\n\r\n```\r\n  0.09 \u2502       movaps 0x20(%rsp),%xmm0\r\n 34.33 \u2502       movups %xmm0,(%r15)\r\n  5.85 \u2502       movups (%r15),%xmm0\r\n 49.67 \u2502       movaps %xmm0,0x20(%rsp)\r\n```\r\n\r\nwhich seems pretty hilarious.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475158787/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475162427",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-475162427",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 475162427,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTE2MjQyNw==",
    "user": {
      "login": "dotdash",
      "id": 230962,
      "node_id": "MDQ6VXNlcjIzMDk2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dotdash",
      "html_url": "https://github.com/dotdash",
      "followers_url": "https://api.github.com/users/dotdash/followers",
      "following_url": "https://api.github.com/users/dotdash/following{/other_user}",
      "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions",
      "organizations_url": "https://api.github.com/users/dotdash/orgs",
      "repos_url": "https://api.github.com/users/dotdash/repos",
      "events_url": "https://api.github.com/users/dotdash/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dotdash/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-21T09:33:30Z",
    "updated_at": "2019-03-21T09:33:30Z",
    "body": "Compiled with `rustc -O --test`:\r\n\r\n```\r\nrunning 3 tests\r\ntest bench_from_iter                 ... bench:       2,170 ns/iter (+/- 20)\r\ntest bench_from_iter_with_filter_map ... bench:       3,412 ns/iter (+/- 67)\r\ntest bench_from_iter_with_scan       ... bench:       4,416 ns/iter (+/- 40)\r\n```\r\n\r\nCompiled with `rustc -O --test -Ccodegen-units=1`:\r\n\r\n```\r\nrunning 3 tests\r\ntest bench_from_iter                 ... bench:         977 ns/iter (+/- 18)\r\ntest bench_from_iter_with_filter_map ... bench:       3,296 ns/iter (+/- 36)\r\ntest bench_from_iter_with_scan       ... bench:       2,280 ns/iter (+/- 40)\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475162427/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475172599",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-475172599",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 475172599,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTE3MjU5OQ==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-21T10:09:03Z",
    "updated_at": "2019-03-21T10:09:03Z",
    "body": "@dotdash here is the file I'm compiling for my benchmark: https://gist.github.com/pnkfelix/7cb66d32c3cd9e1f2ea1a61ef15a0a3a",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475172599/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475174908",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-475174908",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 475174908,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTE3NDkwOA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-21T10:16:46Z",
    "updated_at": "2019-03-21T10:25:25Z",
    "body": "Okay; I had forgotten about the change to the defaults for `codegen-units`. (Maybe `-C opt-level=3` should change the default for `codegen-units` back to 1? Just a thought...)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475174908/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475175642",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-475175642",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 475175642,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTE3NTY0Mg==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-21T10:19:24Z",
    "updated_at": "2019-03-21T10:19:24Z",
    "body": "Results for my linux machine, with `--test -C opt-level=3 -C codegen-units=`1: \r\n\r\n```\r\nrustc 1.33.0 (2aa4c46cf 2019-02-28)\r\n\r\nrunning 4 tests\r\ntest bench_from_iter                         ... bench:       1,432 ns/iter (+/- 44)\r\ntest bench_from_iter_with_filter_map         ... bench:       1,504 ns/iter (+/- 3)\r\ntest bench_from_iter_with_scan_passing_state ... bench:       2,088 ns/iter (+/- 4)\r\ntest bench_from_iter_with_scan_with_freevar  ... bench:       2,050 ns/iter (+/- 12)\r\n```\r\n\r\n```\r\nrustc 1.13.0 (2c6933acc 2016-11-07)\r\n\r\nrunning 4 tests\r\ntest bench_from_iter                         ... bench:       1,688 ns/iter (+/- 50)\r\ntest bench_from_iter_with_filter_map         ... bench:       1,953 ns/iter (+/- 10)\r\ntest bench_from_iter_with_scan_passing_state ... bench:       1,677 ns/iter (+/- 62)\r\ntest bench_from_iter_with_scan_with_freevar  ... bench:       1,683 ns/iter (+/- 17)\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475175642/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475199896",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-475199896",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 475199896,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTE5OTg5Ng==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-21T11:50:31Z",
    "updated_at": "2019-03-21T11:50:31Z",
    "body": "One additional caveat I will add: while I remain concerned about some of the performance differences observed here, I also worry about controlling for factors introduced by the benchmark harness itself.\r\n\r\nIn particular, I made two variants of `bench_from_iter` (one with the adapter-implementation written inline (`bench_from_iter_using_adapter`), and another that continues to call out to the stdlib implementation that it was copied from (`bench_from_iter_using_baseline`)), source code [here](https://gist.github.com/f1c9bc597f9c9ee607f6ea53bb11ea8a), and I am currently observing this:\r\n\r\n```\r\n12-45-10 Mozilla/issue11084 % rustc +nightly-2019-03-20 -C opt-level=3 -C codegen-units=1 --test main-bench.rs -o main-bench\r\n12-45-45 Mozilla/issue11084 % ./main-bench --bench\r\n\r\nrunning 5 tests\r\ntest bench_from_iter_using_adapter____ ... bench:       1,531 ns/iter (+/- 6)\r\ntest bench_from_iter_using_baseline___ ... bench:       1,277 ns/iter (+/- 10)\r\ntest bench_from_iter_with_filter_map__ ... bench:       3,508 ns/iter (+/- 64)\r\ntest bench_from_iter_with_scan_freevar ... bench:       2,066 ns/iter (+/- 53)\r\ntest bench_from_iter_with_scan_param__ ... bench:       2,055 ns/iter (+/- 30)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 5 measured; 0 filtered out\r\n\r\n12-45-51 Mozilla/issue11084 % ./main-bench --bench\r\n\r\nrunning 5 tests\r\ntest bench_from_iter_using_adapter____ ... bench:       1,514 ns/iter (+/- 6)\r\ntest bench_from_iter_using_baseline___ ... bench:       1,305 ns/iter (+/- 12)\r\ntest bench_from_iter_with_filter_map__ ... bench:       3,491 ns/iter (+/- 56)\r\ntest bench_from_iter_with_scan_freevar ... bench:       2,061 ns/iter (+/- 5)\r\ntest bench_from_iter_with_scan_param__ ... bench:       2,094 ns/iter (+/- 53)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 5 measured; 0 filtered out\r\n\r\n12-45-53 Mozilla/issue11084 % ./main-bench --bench adapter\r\n\r\nrunning 1 test\r\ntest bench_from_iter_using_adapter____ ... bench:       1,574 ns/iter (+/- 12)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 1 measured; 4 filtered out\r\n\r\n12-45-57 Mozilla/issue11084 % ./main-bench --bench adapter\r\n\r\nrunning 1 test\r\ntest bench_from_iter_using_adapter____ ... bench:       1,530 ns/iter (+/- 9)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 1 measured; 4 filtered out\r\n\r\n12-45-59 Mozilla/issue11084 % ./main-bench --bench baseline\r\n\r\nrunning 1 test\r\ntest bench_from_iter_using_baseline___ ... bench:       1,569 ns/iter (+/- 9)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 1 measured; 4 filtered out\r\n\r\n12-46-01 Mozilla/issue11084 % ./main-bench --bench baseline\r\n\r\nrunning 1 test\r\ntest bench_from_iter_using_baseline___ ... bench:       1,576 ns/iter (+/- 4)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 1 measured; 4 filtered out\r\n\r\n12-46-03 Mozilla/issue11084 %\r\n```\r\n\r\nNote in particular that the timing for `bench_from_iter_using_baseline` jumped from [1277, 1305] up to [1569, 1576], just by being called on its own rather than in sequence with the other benchmarks. These results seem to be fairly consistent on continued repeated runs.\r\n\r\nThat means there may be cache effects or memory-allocator issues that are causing the effects of running one benchmark to bleed into the execution of another.\r\n\r\n(That in turn means I need to be very careful about which executions I consider to be worrisome with respect to performance. That, or I need to be more careful about how I run the benchmarks.)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475199896/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475200316",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-475200316",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 475200316,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTIwMDMxNg==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-21T11:52:13Z",
    "updated_at": "2019-03-21T12:05:40Z",
    "body": "(one way to control for some of the aforementioned effects would be to rewrite this benchmark such that it does not accumulate into a `Vec`; the performance of that operation is not what the original code was trying to measure, and it certainly is not what should be blocking how we implement `FromIterator` for `Result` and `Option`, right? )",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475200316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475210653",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-475210653",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 475210653,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTIxMDY1Mw==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-21T12:31:00Z",
    "updated_at": "2019-03-21T12:35:11Z",
    "body": "Okay, so here is a revised version of the code that has added a new target type `Last<T>` for `FromIterator`. It just remembers the final element in the iteration (via `.last()`), so there's no noise from any heap management as the benchmark runs. (Also, since there is no mem-mgmt overhead, I pumped up the input size a little so that the ns/iter would still be pretty large.)\r\n\r\nhttps://gist.github.com/80fe57277434ef31f018c08fa8e21f84\r\n\r\nHopefully this can provide additional focus on the `FromIterator` implementation artifacts. (Notably: the measured ns/iter for the `Last<T>` benchmark variants seem to be stable regardless of whether I run them on their own or as part of the overall suite; that was not the case for the `Vec<T>` variants.)\r\n\r\nWith this, I get the following results:\r\n\r\n```\r\n% RUSTC_BOOTSTRAP=1 rustc +1.13.0 -C opt-level=3 -C codegen-units=1 --test main-bench.rs -o main-bench  && ./main-bench --bench\r\n\r\nrunning 10 tests\r\ntest bench__vec_from_iter_using_adapter____ ... bench:       1,692 ns/iter (+/- 8)\r\ntest bench__vec_from_iter_using_baseline___ ... bench:       1,692 ns/iter (+/- 67)\r\ntest bench__vec_from_iter_with_filter_map__ ... bench:       1,963 ns/iter (+/- 10)\r\ntest bench__vec_from_iter_with_scan_freevar ... bench:       1,692 ns/iter (+/- 11)\r\ntest bench__vec_from_iter_with_scan_param__ ... bench:       1,690 ns/iter (+/- 8)\r\ntest bench_last_from_iter_using_adapter____ ... bench:       2,156 ns/iter (+/- 10)\r\ntest bench_last_from_iter_using_baseline___ ... bench:       2,158 ns/iter (+/- 8)\r\ntest bench_last_from_iter_with_filter_map__ ... bench:       3,022 ns/iter (+/- 8)\r\ntest bench_last_from_iter_with_scan_freevar ... bench:       2,156 ns/iter (+/- 12)\r\ntest bench_last_from_iter_with_scan_param__ ... bench:       2,155 ns/iter (+/- 6)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 10 measured\r\n\r\n% RUSTC_BOOTSTRAP=1 rustc +1.33.0 -C opt-level=3 -C codegen-units=1 --test main-bench.rs -o main-bench  && ./main-bench --bench\r\n\r\nrunning 10 tests\r\ntest bench__vec_from_iter_using_adapter____ ... bench:       1,211 ns/iter (+/- 3)\r\ntest bench__vec_from_iter_using_baseline___ ... bench:       1,280 ns/iter (+/- 4)\r\ntest bench__vec_from_iter_with_filter_map__ ... bench:       1,504 ns/iter (+/- 4)\r\ntest bench__vec_from_iter_with_scan_freevar ... bench:       2,088 ns/iter (+/- 61)\r\ntest bench__vec_from_iter_with_scan_param__ ... bench:       2,054 ns/iter (+/- 5)\r\ntest bench_last_from_iter_using_adapter____ ... bench:       2,186 ns/iter (+/- 5)\r\ntest bench_last_from_iter_using_baseline___ ... bench:       2,186 ns/iter (+/- 19)\r\ntest bench_last_from_iter_with_filter_map__ ... bench:       1,659 ns/iter (+/- 12)\r\ntest bench_last_from_iter_with_scan_freevar ... bench:       2,692 ns/iter (+/- 2)\r\ntest bench_last_from_iter_with_scan_param__ ... bench:       2,693 ns/iter (+/- 3)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 10 measured; 0 filtered out\r\n\r\n% RUSTC_BOOTSTRAP=1 rustc +nightly-2019-03-20 -C opt-level=3 -C codegen-units=1 --test main-bench.rs -o main-bench  && ./main-bench --bench\r\n\r\nrunning 10 tests\r\ntest bench__vec_from_iter_using_adapter____ ... bench:       1,270 ns/iter (+/- 53)\r\ntest bench__vec_from_iter_using_baseline___ ... bench:       1,265 ns/iter (+/- 54)\r\ntest bench__vec_from_iter_with_filter_map__ ... bench:       3,469 ns/iter (+/- 7)\r\ntest bench__vec_from_iter_with_scan_freevar ... bench:       2,076 ns/iter (+/- 1)\r\ntest bench__vec_from_iter_with_scan_param__ ... bench:       2,128 ns/iter (+/- 47)\r\ntest bench_last_from_iter_using_adapter____ ... bench:       2,186 ns/iter (+/- 5)\r\ntest bench_last_from_iter_using_baseline___ ... bench:       2,185 ns/iter (+/- 57)\r\ntest bench_last_from_iter_with_filter_map__ ... bench:       2,650 ns/iter (+/- 13)\r\ntest bench_last_from_iter_with_scan_freevar ... bench:       2,678 ns/iter (+/- 12)\r\ntest bench_last_from_iter_with_scan_param__ ... bench:       2,674 ns/iter (+/- 15)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 10 measured; 0 filtered out\r\n```\r\n\r\nSo: there is still some regression when you compare the `scan`-based implementations with the adapter-based ones, even when building a `Last<T>` rather than a `Vec<T>`, but it is not as pronounced a difference: the slowdown is a factor of 1.22x for `Last<T>` (compared to something like 1.67x for `Vec<T>`).",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475210653/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475245534",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-475245534",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 475245534,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTI0NTUzNA==",
    "user": {
      "login": "shepmaster",
      "id": 174509,
      "node_id": "MDQ6VXNlcjE3NDUwOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/174509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shepmaster",
      "html_url": "https://github.com/shepmaster",
      "followers_url": "https://api.github.com/users/shepmaster/followers",
      "following_url": "https://api.github.com/users/shepmaster/following{/other_user}",
      "gists_url": "https://api.github.com/users/shepmaster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shepmaster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shepmaster/subscriptions",
      "organizations_url": "https://api.github.com/users/shepmaster/orgs",
      "repos_url": "https://api.github.com/users/shepmaster/repos",
      "events_url": "https://api.github.com/users/shepmaster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shepmaster/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-21T14:14:39Z",
    "updated_at": "2019-03-21T19:21:40Z",
    "body": "Here's a graph of @pnkfelix's [original data](https://github.com/rust-lang/rust/issues/11084#issuecomment-475053714) showing the variance ([creation scripts](https://gist.github.com/shepmaster/c16bbae77d777778a47a0424fc326b42)).\r\n\r\n![graph](https://user-images.githubusercontent.com/174509/54779031-93782380-4bec-11e9-9909-888850a61ae1.png)\r\n\r\nThen *someone* went and changed the testing methods, so this may not be useful anymore...",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475245534/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475566822",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-475566822",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 475566822,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTU2NjgyMg==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-22T10:22:16Z",
    "updated_at": "2019-03-22T10:24:34Z",
    "body": "> Then someone went and changed the testing methods\r\n\r\n(well, all I did was add *new* variants; the original benchmarks are still there...)\r\n\r\nUpdate: I will admit that one need to figure out some sort of normalization function before attempting to compare the `Vec`-building variants with the `Last`-building ones; but we shouldn't be trying to do that anyway, right?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475566822/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475572382",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-475572382",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 475572382,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTU3MjM4Mg==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-22T10:41:52Z",
    "updated_at": "2019-03-22T10:51:49Z",
    "body": "Ah here is one last run: a note from @eddyb elsewhere pointed out that using codegen-units=1 disables link-time optimizations.\r\n\r\n\r\nLets explicitly control link-time optimizations via `-C lto=...` and see what happens:\r\n\r\n## lto=off (same as default with codegen-units=1)\r\n\r\n```\r\n% RUSTC_BOOTSTRAP=1 rustc +nightly-2019-03-20 -C opt-level=3 -C codegen-units=1 --test main-bench.rs -o main-bench -C lto=off  && ./main-bench --bench\r\n\r\nrunning 10 tests\r\ntest bench__vec_from_iter_using_adapter____ ... bench:       1,260 ns/iter (+/- 6)\r\ntest bench__vec_from_iter_using_baseline___ ... bench:       1,306 ns/iter (+/- 48)\r\ntest bench__vec_from_iter_with_filter_map__ ... bench:       3,467 ns/iter (+/- 3)\r\ntest bench__vec_from_iter_with_scan_freevar ... bench:       2,082 ns/iter (+/- 12)\r\ntest bench__vec_from_iter_with_scan_param__ ... bench:       2,087 ns/iter (+/- 52)\r\ntest bench_last_from_iter_using_adapter____ ... bench:       2,186 ns/iter (+/- 6)\r\ntest bench_last_from_iter_using_baseline___ ... bench:       2,187 ns/iter (+/- 21)\r\ntest bench_last_from_iter_with_filter_map__ ... bench:       2,650 ns/iter (+/- 3)\r\ntest bench_last_from_iter_with_scan_freevar ... bench:       2,683 ns/iter (+/- 4)\r\ntest bench_last_from_iter_with_scan_param__ ... bench:       2,688 ns/iter (+/- 8)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 10 measured; 0 filtered out\r\n```\r\n\r\n## lto=fat\r\n\r\n```\r\n% RUSTC_BOOTSTRAP=1 rustc +nightly-2019-03-20 -C opt-level=3 -C codegen-units=1 --test main-bench.rs -o main-bench -C lto=fat  && ./main-bench --bench\r\n\r\nrunning 10 tests\r\ntest bench__vec_from_iter_using_adapter____ ... bench:       1,289 ns/iter (+/- 19)\r\ntest bench__vec_from_iter_using_baseline___ ... bench:       1,232 ns/iter (+/- 9)\r\ntest bench__vec_from_iter_with_filter_map__ ... bench:       3,481 ns/iter (+/- 19)\r\ntest bench__vec_from_iter_with_scan_freevar ... bench:       1,273 ns/iter (+/- 20)\r\ntest bench__vec_from_iter_with_scan_param__ ... bench:       1,273 ns/iter (+/- 8)\r\ntest bench_last_from_iter_using_adapter____ ... bench:       1,680 ns/iter (+/- 18)\r\ntest bench_last_from_iter_using_baseline___ ... bench:       1,683 ns/iter (+/- 21)\r\ntest bench_last_from_iter_with_filter_map__ ... bench:       3,047 ns/iter (+/- 2)\r\ntest bench_last_from_iter_with_scan_freevar ... bench:       1,793 ns/iter (+/- 81)\r\ntest bench_last_from_iter_with_scan_param__ ... bench:       1,773 ns/iter (+/- 49)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 10 measured; 0 filtered out\r\n```\r\n\r\n## lto=thin\r\n\r\n```\r\n% RUSTC_BOOTSTRAP=1 rustc +nightly-2019-03-20 -C opt-level=3 -C codegen-units=1 --test main-bench.rs -o main-bench -C lto=thin  && ./main-bench --bench\r\n\r\nrunning 10 tests\r\ntest bench__vec_from_iter_using_adapter____ ... bench:       1,263 ns/iter (+/- 8)\r\ntest bench__vec_from_iter_using_baseline___ ... bench:       1,238 ns/iter (+/- 49)\r\ntest bench__vec_from_iter_with_filter_map__ ... bench:       3,702 ns/iter (+/- 32)\r\ntest bench__vec_from_iter_with_scan_freevar ... bench:       1,248 ns/iter (+/- 3)\r\ntest bench__vec_from_iter_with_scan_param__ ... bench:       1,248 ns/iter (+/- 13)\r\ntest bench_last_from_iter_using_adapter____ ... bench:       1,616 ns/iter (+/- 6)\r\ntest bench_last_from_iter_using_baseline___ ... bench:       1,612 ns/iter (+/- 6)\r\ntest bench_last_from_iter_with_filter_map__ ... bench:       3,024 ns/iter (+/- 7)\r\ntest bench_last_from_iter_with_scan_freevar ... bench:       1,427 ns/iter (+/- 7)\r\ntest bench_last_from_iter_with_scan_param__ ... bench:       1,427 ns/iter (+/- 11)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 10 measured; 0 filtered out\r\n```\r\n\r\nNotably, using lto (fat or thin) brings `scan`-performance in line with the baseline that we currently provide (or improves upon it).\r\n\r\nI think has convinced me that there is not much we should do about this case in particular (apart from trying to resolve broader issues with link-time optimizations and/or codegen-unit partitioning).\r\n\r\nAnd I am going to go ahead and put up a PR with the simplified implementations of `FromIterator` for `Option` and `Result`, linking to the results of this investigation.\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475572382/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475577073",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-475577073",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 475577073,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTU3NzA3Mw==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-03-22T10:59:34Z",
    "updated_at": "2019-04-02T14:57:57Z",
    "body": "Well, okay, to be fair, I realized I should do a similar experiment, but this time show the results when you vary `lto` but you have `codegen-units` \u2260 1:\r\n\r\n## lto=off codegen-units=16\r\n\r\n```\r\n11-54-00 Mozilla/issue11084 % RUSTC_BOOTSTRAP=1 rustc +nightly-2019-03-20 -C opt-level=3 -C codegen-units=16 --test main-bench.rs -o main-bench -C lto=off  && ./main-bench --bench\r\n\r\nrunning 10 tests\r\ntest bench__vec_from_iter_using_adapter____ ... bench:       6,830 ns/iter (+/- 66)\r\ntest bench__vec_from_iter_using_baseline___ ... bench:       6,848 ns/iter (+/- 30)\r\ntest bench__vec_from_iter_with_filter_map__ ... bench:       5,547 ns/iter (+/- 20)\r\ntest bench__vec_from_iter_with_scan_freevar ... bench:       5,592 ns/iter (+/- 84)\r\ntest bench__vec_from_iter_with_scan_param__ ... bench:       5,322 ns/iter (+/- 12)\r\ntest bench_last_from_iter_using_adapter____ ... bench:       9,820 ns/iter (+/- 216)\r\ntest bench_last_from_iter_using_baseline___ ... bench:      14,730 ns/iter (+/- 116)\r\ntest bench_last_from_iter_with_filter_map__ ... bench:       9,869 ns/iter (+/- 16)\r\ntest bench_last_from_iter_with_scan_freevar ... bench:      11,351 ns/iter (+/- 131)\r\ntest bench_last_from_iter_with_scan_param__ ... bench:      10,593 ns/iter (+/- 51)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 10 measured; 0 filtered out\r\n```\r\n\r\n## lto=fat codegen-units=16\r\n\r\n```\r\n11-54-19 Mozilla/issue11084 % RUSTC_BOOTSTRAP=1 rustc +nightly-2019-03-20 -C opt-level=3 -C codegen-units=16 --test main-bench.rs -o main-bench -C lto=fat  && ./main-bench --bench\r\n\r\nrunning 10 tests\r\ntest bench__vec_from_iter_using_adapter____ ... bench:       1,914 ns/iter (+/- 12)\r\ntest bench__vec_from_iter_using_baseline___ ... bench:       1,914 ns/iter (+/- 2)\r\ntest bench__vec_from_iter_with_filter_map__ ... bench:       3,406 ns/iter (+/- 10)\r\ntest bench__vec_from_iter_with_scan_freevar ... bench:       1,354 ns/iter (+/- 4)\r\ntest bench__vec_from_iter_with_scan_param__ ... bench:       1,340 ns/iter (+/- 7)\r\ntest bench_last_from_iter_using_adapter____ ... bench:       1,648 ns/iter (+/- 17)\r\ntest bench_last_from_iter_using_baseline___ ... bench:       1,607 ns/iter (+/- 11)\r\ntest bench_last_from_iter_with_filter_map__ ... bench:       8,309 ns/iter (+/- 23)\r\ntest bench_last_from_iter_with_scan_freevar ... bench:       1,648 ns/iter (+/- 8)\r\ntest bench_last_from_iter_with_scan_param__ ... bench:       1,648 ns/iter (+/- 14)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 10 measured; 0 filtered out\r\n```\r\n\r\n## lto=thin codegen-units=16\r\n\r\n```\r\n11-55-02 Mozilla/issue11084 % RUSTC_BOOTSTRAP=1 rustc +nightly-2019-03-20 -C opt-level=3 -C codegen-units=16 --test main-bench.rs -o main-bench -C lto=thin  && ./main-bench --bench\r\n\r\nrunning 10 tests\r\ntest bench__vec_from_iter_using_adapter____ ... bench:       2,076 ns/iter (+/- 82)\r\ntest bench__vec_from_iter_using_baseline___ ... bench:       2,076 ns/iter (+/- 3)\r\ntest bench__vec_from_iter_with_filter_map__ ... bench:       3,792 ns/iter (+/- 11)\r\ntest bench__vec_from_iter_with_scan_freevar ... bench:       6,046 ns/iter (+/- 21)\r\ntest bench__vec_from_iter_with_scan_param__ ... bench:       6,064 ns/iter (+/- 46)\r\ntest bench_last_from_iter_using_adapter____ ... bench:       1,429 ns/iter (+/- 12)\r\ntest bench_last_from_iter_using_baseline___ ... bench:       1,501 ns/iter (+/- 21)\r\ntest bench_last_from_iter_with_filter_map__ ... bench:       8,945 ns/iter (+/- 91)\r\ntest bench_last_from_iter_with_scan_freevar ... bench:      15,404 ns/iter (+/- 15)\r\ntest bench_last_from_iter_with_scan_param__ ... bench:      15,385 ns/iter (+/- 17)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 10 measured; 0 filtered out\r\n```\r\n\r\nThe regressions for the `scan`-based iterator when you have codegen-units=16 and lto=thin *is* pretty scary (and for this desktop machine, `codegen-units=16` is the default)...  should that block landing the proposed change?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/475577073/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/478610190",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-478610190",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 478610190,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3ODYxMDE5MA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-04-01T14:47:41Z",
    "updated_at": "2019-04-02T14:59:08Z",
    "body": "Update: @michaelwoerister has informed me that the default for LTO when you do not specify anything is *not* necessarily LTO off. ~~(which, given the numbers above, makes sense, since there is probably *something* going on that is making the baseline and scan-based implementations competitive when codegen-units=16 when nothing is stated about LTO).~~ (The numbers above do not capture this case, because I was not aware that it did not have an explicit `-C lto` encoding.)\r\n * In particular, if you do not specify `-C lto` _and_ you compile with multiple codegen units, then something called \"local ThinLTO\" will be used.\r\n * If you compile with just one codegen unit and do not specify `-C lto`, then no LTO at all is used.\r\n\r\nThere is no way to explictly opt into \"local ThinLTO\" via the `-C lto` flag. I am more used to systems where there is some way to explicitly encode a setting that matches whatever the default is, which is why I was confused about what was happening, and some of the headings in my data above might be confused or at least confusing.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/478610190/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/478620965",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-478620965",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 478620965,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3ODYyMDk2NQ==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-04-01T15:14:22Z",
    "updated_at": "2019-04-01T15:14:22Z",
    "body": "> making this a P-high issue to at least diagnose what has happened to our performance in the cases noted in previous comment.\r\n\r\nOkay I am satisfied with the results of my investigation.\r\n\r\nSo I'm immediately going to mark this as P-low for now.\r\n\r\n----\r\n\r\nBut furthermore, I do not think there is much else that is actionable on this specific issue.\r\n\r\nI have posted a PR that demonstrates the change to `impl FromIterator` that motivated the original issue here, as well as benchmarks for it. That's in PR #59605.\r\n\r\nAnd I do wonder whether we need to revise some of our defaults for the compiler command UI, in terms of how the various LTO settings are specified or at least documented, and also in terms of changing what `-C opt-level=3` implies (e.g. I think that should imply codegen-units=1 if the user has not already specified some other setting for codegen-units). But that is not related to this issue as written.\r\n\r\nTherefore, I am inclined to actually close this issue. But I think I'll hold off on doing so until I get some feedback on PR #59605. ",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/478620965/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/478621554",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-478621554",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 478621554,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3ODYyMTU1NA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-04-01T15:15:49Z",
    "updated_at": "2019-04-01T15:15:49Z",
    "body": "> @pnkfelix Could you share the code for your benchmark?\r\n> \r\n> `perf` shows this as the hotspot for my old `bench_from_iter_with_scan` benchmark:\r\n> \r\n> ```\r\n>   0.09 \u2502       movaps 0x20(%rsp),%xmm0\r\n>  34.33 \u2502       movups %xmm0,(%r15)\r\n>   5.85 \u2502       movups (%r15),%xmm0\r\n>  49.67 \u2502       movaps %xmm0,0x20(%rsp)\r\n> ```\r\n> \r\n> which seems pretty hilarious.\r\n\r\nIts possible that we *might* be able to do something about this phenomenon. It might be low-hanging fruit for optimization, maybe.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/478621554/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/493407328",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-493407328",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 493407328,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MzQwNzMyOA==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-05-17T10:33:10Z",
    "updated_at": "2019-05-17T10:33:10Z",
    "body": "based on my summary in [previous comment](https://github.com/rust-lang/rust/issues/11084#issuecomment-478620965), and the inconclusive results from PR #59605, I'm just going to close this.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/493407328/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/914198485",
    "html_url": "https://github.com/rust-lang/rust/issues/11084#issuecomment-914198485",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11084",
    "id": 914198485,
    "node_id": "IC_kwDOAAsO6M42fY_V",
    "user": {
      "login": "jkmpariab",
      "id": 19835003,
      "node_id": "MDQ6VXNlcjE5ODM1MDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/19835003?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jkmpariab",
      "html_url": "https://github.com/jkmpariab",
      "followers_url": "https://api.github.com/users/jkmpariab/followers",
      "following_url": "https://api.github.com/users/jkmpariab/following{/other_user}",
      "gists_url": "https://api.github.com/users/jkmpariab/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jkmpariab/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jkmpariab/subscriptions",
      "organizations_url": "https://api.github.com/users/jkmpariab/orgs",
      "repos_url": "https://api.github.com/users/jkmpariab/repos",
      "events_url": "https://api.github.com/users/jkmpariab/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jkmpariab/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-09-07T10:45:53Z",
    "updated_at": "2021-09-07T10:45:53Z",
    "body": "> based on my summary in [previous comment](https://github.com/rust-lang/rust/issues/11084#issuecomment-478620965), and the inconclusive results from PR #59605, I'm just going to close this.\r\n\r\nDoes closing PR #59605 imply opening this issue again? or i'm wrong?\r\nHere is the documentation reference to this issue: https://doc.rust-lang.org/nightly/src/core/result.rs.html#1884-1885",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/914198485/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
