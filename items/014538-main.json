{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/14538",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/14538/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/14538/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/14538/events",
  "html_url": "https://github.com/rust-lang/rust/pull/14538",
  "id": 34619290,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTY1MTgwNzA=",
  "number": 14538,
  "title": "std: Recreate a `collections` module ",
  "user": {
    "login": "alexcrichton",
    "id": 64996,
    "node_id": "MDQ6VXNlcjY0OTk2",
    "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexcrichton",
    "html_url": "https://github.com/alexcrichton",
    "followers_url": "https://api.github.com/users/alexcrichton/followers",
    "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
    "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
    "repos_url": "https://api.github.com/users/alexcrichton/repos",
    "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 4,
  "created_at": "2014-05-30T05:43:16Z",
  "updated_at": "2014-06-12T06:04:25Z",
  "closed_at": "2014-06-05T23:36:55Z",
  "author_association": "MEMBER",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/14538",
    "html_url": "https://github.com/rust-lang/rust/pull/14538",
    "diff_url": "https://github.com/rust-lang/rust/pull/14538.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/14538.patch",
    "merged_at": null
  },
  "body": "As with the previous commit with `librand`, this commit shuffles around some\n`collections` code. The new state of the world is similar to that of librand:\n- The libcollections crate now only depends on libcore and liballoc.\n- The standard library has a new module, `std::collections`. All functionality\n  of libcollections is reexported through this module.\n\nI would like to stress that this change is purely cosmetic. There are very few\nalterations to these primitives.\n\nThere are a number of notable points about the new organization:\n- std::{str, slice, string, vec} all moved to libcollections. There is no reason\n  that these primitives shouldn't be necessarily usable in a freestanding\n  context that has allocation. These are all reexported in their usual places in\n  the standard library.\n- The `hashmap`, and transitively the `lru_cache`, modules no longer reside in\n  `libcollections`, but rather in libstd. The reason for this is because the\n  `HashMap::new` contructor requires access to the OSRng for initially seeding\n  the hash map. Beyond this requirement, there is no reason that the hashmap\n  could not move to libcollections.\n  \n  I do, however, have a plan to move the hash map to the collections module. The\n  `HashMap::new` function could be altered to require that the `H` hasher\n  parameter ascribe to the `Default` trait, allowing the entire `hashmap` module\n  to live in libcollections. The key idea would be that the default hasher would\n  be different in libstd. Something along the lines of:\n  \n  ```\n  // src/libstd/collections/mod.rs\n  \n  pub type HashMap<K, V, H = RandomizedSipHasher> =\n        core_collections::HashMap<K, V, H>;\n  ```\n  \n  This is not possible today because you cannot invoke static methods through\n  type aliases. If we modified the compiler, however, to allow invocation of\n  static methods through type aliases, then this type definition would\n  essentially be switching the default hasher from `SipHasher` in libcollections\n  to a libstd-defined `RandomizedSipHasher` type. This type's `Default`\n  implementation would randomly seed the `SipHasher` instance, and otherwise\n  perform the same as `SipHasher`.\n  \n  This future state doesn't seem incredibly far off, but until that time comes,\n  the hashmap module will live in libstd to not compromise on functionality.\n- In preparation for the hashmap moving to libcollections, the `hash` module has\n  moved from libstd to libcollections. A previously snapshotted commit enables a\n  distinct `Writer` trait to live in the `hash` module which `Hash`\n  implementations are now parameterized over.\n  \n  Due to using a custom trait, the `SipHasher` implementation has lost its\n  specialized methods for writing integers. These can be re-added\n  backwards-compatibly in the future via default methods if necessary, but the\n  FNV hashing should satisfy much of the need for speedier hashing.\n\nA list of breaking changes:\n- HashMap::{get, get_mut} no longer fails with the key formatted into the error\n  message with `{:?}`, instead, a generic message is printed. With backtraces,\n  it should still be not-too-hard to track down errors.\n- The HashMap, HashSet, and LruCache types are now available through\n  std::collections instead of the collections crate.\n- Manual implementations of hash should be parameterized over `hash::Writer`\n  instead of just `Writer`.\n\n[breaking-change]\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/14538/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/14538/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
