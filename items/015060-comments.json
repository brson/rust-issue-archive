[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/46724537",
    "html_url": "https://github.com/rust-lang/rust/issues/15060#issuecomment-46724537",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15060",
    "id": 46724537,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NzI0NTM3",
    "user": {
      "login": "Ryman",
      "id": 994978,
      "node_id": "MDQ6VXNlcjk5NDk3OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/994978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ryman",
      "html_url": "https://github.com/Ryman",
      "followers_url": "https://api.github.com/users/Ryman/followers",
      "following_url": "https://api.github.com/users/Ryman/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ryman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ryman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ryman/subscriptions",
      "organizations_url": "https://api.github.com/users/Ryman/orgs",
      "repos_url": "https://api.github.com/users/Ryman/repos",
      "events_url": "https://api.github.com/users/Ryman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ryman/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-06-20T20:44:07Z",
    "updated_at": "2014-06-20T20:44:07Z",
    "body": "I think this is related to anonymous modules appearing, `Vec` resolves to a module due to the impl.\n\nIf you change to this you get another interesting error:\n\n``` rust\ntrait T {}\nimpl<U: T> Vec<U> {\n    fn from_slice<'a>(x: &'a [uint]) -> Vec<uint> {\n        fail!()\n    }\n}\nfn main() { let r = Vec::from_slice(&[1u]); }\n```\n\n```\nerror: found module name used as a type: impl Vec<U>::Vec<U> (id=5)\nimpl<U: T> Vec<U> {\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/46724537/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48061610",
    "html_url": "https://github.com/rust-lang/rust/issues/15060#issuecomment-48061610",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15060",
    "id": 48061610,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDYxNjEw",
    "user": {
      "login": "apoelstra",
      "id": 1351933,
      "node_id": "MDQ6VXNlcjEzNTE5MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1351933?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apoelstra",
      "html_url": "https://github.com/apoelstra",
      "followers_url": "https://api.github.com/users/apoelstra/followers",
      "following_url": "https://api.github.com/users/apoelstra/following{/other_user}",
      "gists_url": "https://api.github.com/users/apoelstra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apoelstra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apoelstra/subscriptions",
      "organizations_url": "https://api.github.com/users/apoelstra/orgs",
      "repos_url": "https://api.github.com/users/apoelstra/repos",
      "events_url": "https://api.github.com/users/apoelstra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apoelstra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-04T17:14:01Z",
    "updated_at": "2014-07-04T17:14:01Z",
    "body": "Note that a workaround is to wrap `Vec<U>` in parens, as\n\n```\ntrait T {}\nimpl<U: T> (Vec<U>) {}\nfn main() { let r = Vec::from_slice(&[1u]); }\n```\n\nThen you get the correct error message about trying to `impl` on a type outside of its crate.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48061610/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48072352",
    "html_url": "https://github.com/rust-lang/rust/issues/15060#issuecomment-48072352",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15060",
    "id": 48072352,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDcyMzUy",
    "user": {
      "login": "apoelstra",
      "id": 1351933,
      "node_id": "MDQ6VXNlcjEzNTE5MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1351933?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apoelstra",
      "html_url": "https://github.com/apoelstra",
      "followers_url": "https://api.github.com/users/apoelstra/followers",
      "following_url": "https://api.github.com/users/apoelstra/following{/other_user}",
      "gists_url": "https://api.github.com/users/apoelstra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apoelstra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apoelstra/subscriptions",
      "organizations_url": "https://api.github.com/users/apoelstra/orgs",
      "repos_url": "https://api.github.com/users/apoelstra/repos",
      "events_url": "https://api.github.com/users/apoelstra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apoelstra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-04T22:35:00Z",
    "updated_at": "2014-07-04T22:45:05Z",
    "body": "I've spent some time investigating this bug and I think that the cleanest thing to do is to fix #3785 (closed B-RFC right now, does anyone have a link to a relevant RFC?) and require `impl Type` to occur only in the same module as, and after, the definition of `Type`. This check would be done before creating the anonymous trait module with name `Type`.\n\nOtherwise in the case of `impl Type` where a definition of `Type` is not visible, `Type` is not resolved until typeck (at which point the compiler will complain if `Type` is defined outside the current crate, or not at all), but if there are resolve errors like the current bug, these will be exposed to the user first and halt compilation.\n\nThe current behaviour upon encountering `impl Type` where `Type` has not been defined in the current module is to create a module `Type` (which shadows any other `Type` modules exposed by `use` statements) and try to resolve any `Type::function` symbols into this module. This means that the current support for `impl Type` outside of the module `Type` is defined in is <i>already</i> broken. Consider for example\n\nbreak.rs:\n\n```\nuse break1::MyGuy;\n\nmod break1;\n\nimpl MyGuy {\n  fn do2() { println!(\"do 2\"); }\n}\n\nfn main() {\n  MyGuy::do1();\n  MyGuy::do2();\n}\n```\n\nbreak1.rs:\n\n```\npub struct MyGuy;\n\nimpl MyGuy {\n  pub fn do1() { println!(\"do 1\"); }\n}\n```\n\nbreak.rs will error out with \"unresolved name `MyGuy::do1`\".\n\nI'm sure I could come up with other examples of currently broken behaviour like this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48072352/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48072892",
    "html_url": "https://github.com/rust-lang/rust/issues/15060#issuecomment-48072892",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15060",
    "id": 48072892,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDcyODky",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-04T22:56:47Z",
    "updated_at": "2014-07-04T22:56:47Z",
    "body": "@apoelstra the closing of that bug predates our RFC process, so there would not be a link to an RFC.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48072892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48074554",
    "html_url": "https://github.com/rust-lang/rust/issues/15060#issuecomment-48074554",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15060",
    "id": 48074554,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDc0NTU0",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-04T23:43:17Z",
    "updated_at": "2014-07-04T23:43:17Z",
    "body": "Interestingly, this breaks in the opposite direction if you qualify the `impl`: http://is.gd/p8GatW\n\n``` rust\nmod break1 {\n    pub struct MyGuy;\n\n    impl MyGuy {\n        pub fn do1() { println!(\"do 1\"); }\n    }\n}\n\nimpl break1::MyGuy {\n    fn do2() { println!(\"do 2\"); }\n}\n\nfn main() {\n    break1::MyGuy::do1();\n    break1::MyGuy::do2();\n}\n```\n\n```\n<anon>:15:5: 15:23 error: unresolved name `break1::MyGuy::do2`.\n<anon>:15     break1::MyGuy::do2();\n              ^~~~~~~~~~~~~~~~~~\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48074554/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48076382",
    "html_url": "https://github.com/rust-lang/rust/issues/15060#issuecomment-48076382",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15060",
    "id": 48076382,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDc2Mzgy",
    "user": {
      "login": "apoelstra",
      "id": 1351933,
      "node_id": "MDQ6VXNlcjEzNTE5MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1351933?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apoelstra",
      "html_url": "https://github.com/apoelstra",
      "followers_url": "https://api.github.com/users/apoelstra/followers",
      "following_url": "https://api.github.com/users/apoelstra/following{/other_user}",
      "gists_url": "https://api.github.com/users/apoelstra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apoelstra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apoelstra/subscriptions",
      "organizations_url": "https://api.github.com/users/apoelstra/orgs",
      "repos_url": "https://api.github.com/users/apoelstra/repos",
      "events_url": "https://api.github.com/users/apoelstra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apoelstra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-05T01:53:58Z",
    "updated_at": "2014-07-05T01:53:58Z",
    "body": "My suggestion is that `impl break1::MyGuy` should be disallowed. I will submit an RFC with these changes.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48076382/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48077692",
    "html_url": "https://github.com/rust-lang/rust/issues/15060#issuecomment-48077692",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/15060",
    "id": 48077692,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDc3Njky",
    "user": {
      "login": "apoelstra",
      "id": 1351933,
      "node_id": "MDQ6VXNlcjEzNTE5MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1351933?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apoelstra",
      "html_url": "https://github.com/apoelstra",
      "followers_url": "https://api.github.com/users/apoelstra/followers",
      "following_url": "https://api.github.com/users/apoelstra/following{/other_user}",
      "gists_url": "https://api.github.com/users/apoelstra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apoelstra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apoelstra/subscriptions",
      "organizations_url": "https://api.github.com/users/apoelstra/orgs",
      "repos_url": "https://api.github.com/users/apoelstra/repos",
      "events_url": "https://api.github.com/users/apoelstra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apoelstra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-07-05T03:45:55Z",
    "updated_at": "2014-07-05T03:45:55Z",
    "body": "https://github.com/rust-lang/rfcs/pull/155\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/48077692/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
