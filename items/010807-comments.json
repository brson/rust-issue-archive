[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29846948",
    "html_url": "https://github.com/rust-lang/rust/issues/10807#issuecomment-29846948",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10807",
    "id": 29846948,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODQ2OTQ4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-04T21:23:47Z",
    "updated_at": "2013-12-04T21:23:47Z",
    "body": "This is possible via the `#[link(name = \"foo\", kind = \"static\")]` link directive (documented [here](http://static.rust-lang.org/doc/master/rust.html#linkage)). Has that been found to be insufficient?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29846948/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29855067",
    "html_url": "https://github.com/rust-lang/rust/issues/10807#issuecomment-29855067",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10807",
    "id": 29855067,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODU1MDY3",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-04T22:59:40Z",
    "updated_at": "2013-12-04T22:59:40Z",
    "body": "So far I've found no way to link libc statically. I've tried:\n\n```\n#[link(name=\"test\", kind = \"static\")];\n#[crate_type=\"bin\"];\n#[link(name=\"c\", kind=\"static\")]\nextern {}\n\nfn main () {}\n```\n- `rustc -Z prefer-static`: unknown debug flag\n- `rustc --link-args -static`: linker errors (multiple definition and others)\n- `rustc --link-args -static-libgcc`: does compile, but libgcc_s.so.1 shows up in `ldd` all the same.\n\nThe runtime seems to pull in dynamic libraries unconditionally.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29855067/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29856533",
    "html_url": "https://github.com/rust-lang/rust/issues/10807#issuecomment-29856533",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10807",
    "id": 29856533,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODU2NTMz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-12-04T23:21:10Z",
    "updated_at": "2013-12-04T23:21:10Z",
    "body": "Right now, rust's `libstd` requires various system libraries in order to function. This currently includes `dl`, `rt`, `m`, and `stdc++`. It is not possible to produce a totally standalone executable today with 0 dependencies of the system that it is running on.\n\nIn the crate you've listed, `#[link(name = \"test\", kind = \"static\")]` has no effect on the output (other than naming the binary `test`). When you declare `#[link(name = \"c\", kind = \"static\")]`, then when producing a binary this just means that rustc will pass `-lc` to the linker.\n\nIt sounds like you're trying to produce a statically linked executable while using `libstd`, which today is not possible. I want to be able to drop dynamic dependencies which you aren't using, but today that's not implemented. For now though, I'm going to close this because everything is working as intended.\n\nRust supports static linking to the fullest extent that it is currently possible. I doubt that we will soon reach a point at which the compiler can generate a truly standalone executable when linking to `libstd`, but the compiler is more than capable of generating a fully standalone executable with rust library dependencies if nothing uses `libstd`. It may be a bug that libstd has so many dynamic dependencies, but they're going to be tough to remove (although we should attempt to pursue them if reasonable).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29856533/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
