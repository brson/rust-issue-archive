[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2881139",
    "html_url": "https://github.com/rust-lang/rust/issues/1215#issuecomment-2881139",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1215",
    "id": 2881139,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODExMzk=",
    "user": {
      "login": "boggle",
      "id": 50886,
      "node_id": "MDQ6VXNlcjUwODg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/50886?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/boggle",
      "html_url": "https://github.com/boggle",
      "followers_url": "https://api.github.com/users/boggle/followers",
      "following_url": "https://api.github.com/users/boggle/following{/other_user}",
      "gists_url": "https://api.github.com/users/boggle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/boggle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/boggle/subscriptions",
      "organizations_url": "https://api.github.com/users/boggle/orgs",
      "repos_url": "https://api.github.com/users/boggle/repos",
      "events_url": "https://api.github.com/users/boggle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/boggle/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-11-26T11:44:43Z",
    "updated_at": "2011-11-26T11:49:53Z",
    "body": "This should work for imports of functions, consts, and types, and in const definitions, too.\n\nThe general rule would be that a cast `(expr: a) as b` is dropped (treated as if not there while the type conversion still happens implicitly), iff the cast is valid and both types have the same shape and alignment (i.e. no actual casting code needs to be generated).  This should at least hold for primitive types, tuples, function types, and record types.\n\nIn `std::math` it would allow to import a `fn sin(n: f32) -> f32` like `import f32::sin as (float)->float` (as soon as casting of function types is supported) and `const e: float = f32::consts::e as float` which would make everything so much more concise and reduce code duplication.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2881139/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2881148",
    "html_url": "https://github.com/rust-lang/rust/issues/1215#issuecomment-2881148",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1215",
    "id": 2881148,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4ODExNDg=",
    "user": {
      "login": "boggle",
      "id": 50886,
      "node_id": "MDQ6VXNlcjUwODg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/50886?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/boggle",
      "html_url": "https://github.com/boggle",
      "followers_url": "https://api.github.com/users/boggle/followers",
      "following_url": "https://api.github.com/users/boggle/following{/other_user}",
      "gists_url": "https://api.github.com/users/boggle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/boggle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/boggle/subscriptions",
      "organizations_url": "https://api.github.com/users/boggle/orgs",
      "repos_url": "https://api.github.com/users/boggle/repos",
      "events_url": "https://api.github.com/users/boggle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/boggle/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-11-26T11:48:58Z",
    "updated_at": "2011-11-26T11:48:58Z",
    "body": "Implementing this requires modifying the parser and dropping cast expressions after type checking.  This either needs an extra pass or special treatment of `import`, `const`, and `be`, during `trans`.  \n\nPlease give feedback on the right approach to implement this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2881148/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2904921",
    "html_url": "https://github.com/rust-lang/rust/issues/1215#issuecomment-2904921",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1215",
    "id": 2904921,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDQ5MjE=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-11-28T18:38:54Z",
    "updated_at": "2011-11-28T18:38:54Z",
    "body": "This depends on #217. As far as I know tail calls simply don't work in Rust.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2904921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2906746",
    "html_url": "https://github.com/rust-lang/rust/issues/1215#issuecomment-2906746",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1215",
    "id": 2906746,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDY3NDY=",
    "user": {
      "login": "boggle",
      "id": 50886,
      "node_id": "MDQ6VXNlcjUwODg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/50886?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/boggle",
      "html_url": "https://github.com/boggle",
      "followers_url": "https://api.github.com/users/boggle/followers",
      "following_url": "https://api.github.com/users/boggle/following{/other_user}",
      "gists_url": "https://api.github.com/users/boggle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/boggle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/boggle/subscriptions",
      "organizations_url": "https://api.github.com/users/boggle/orgs",
      "repos_url": "https://api.github.com/users/boggle/repos",
      "events_url": "https://api.github.com/users/boggle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/boggle/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-11-28T20:29:41Z",
    "updated_at": "2011-11-28T20:29:41Z",
    "body": "Let's say, they would. What would be right way to approach this (or answer for import, const). Do I really need to add another pass just for this? Is there anything to watch out for when changing the ast just before trans?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2906746/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2952959",
    "html_url": "https://github.com/rust-lang/rust/issues/1215#issuecomment-2952959",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1215",
    "id": 2952959,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NTI5NTk=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-11-30T00:20:33Z",
    "updated_at": "2011-11-30T00:20:33Z",
    "body": "I was focused on tail calls and didn't notice that this is mostly about treating machine types as ints, etc, which would obviously be nice.\n\nI would start by just adding a new method to ty, like are_trivially_castable, then using that in the few analysis passes where this might matter (typechecking for be, const checking) and then in the corresponding places in trans (we have a lot of these little situations where the analysis and translation are completely disconnected and just make the same assumptions and rely on tests to ensure correctness).\n\nThe const case seems like a no-brainer - we can just support whatever constant scalar casting operations that the LLVMConst\\* functions get us, which is probably a lot more than just casts of the same machine type. Needs changes to middle::check_const and middle::trans::trans_const_expr.\n\nChanging import like that probably requires further discussion with people other than me. On first glance I wonder if there's some other solution. Putting the 'as' keyword into a non-expression context is a big step, though the implementation would probably just be a matter of changing the parser and type checker.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2952959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2969954",
    "html_url": "https://github.com/rust-lang/rust/issues/1215#issuecomment-2969954",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/1215",
    "id": 2969954,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5Njk5NTQ=",
    "user": {
      "login": "boggle",
      "id": 50886,
      "node_id": "MDQ6VXNlcjUwODg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/50886?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/boggle",
      "html_url": "https://github.com/boggle",
      "followers_url": "https://api.github.com/users/boggle/followers",
      "following_url": "https://api.github.com/users/boggle/following{/other_user}",
      "gists_url": "https://api.github.com/users/boggle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/boggle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/boggle/subscriptions",
      "organizations_url": "https://api.github.com/users/boggle/orgs",
      "repos_url": "https://api.github.com/users/boggle/repos",
      "events_url": "https://api.github.com/users/boggle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/boggle/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-12-01T02:19:35Z",
    "updated_at": "2011-12-01T02:19:35Z",
    "body": "Did this for \"be\" now, as you suggested.  Consts coming up next, don't pull yet, will rebase:\n\nhttps://github.com/boggle/rust/compare/castaway\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2969954/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
