[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34716338",
    "html_url": "https://github.com/rust-lang/rust/pull/12162#issuecomment-34716338",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12162",
    "id": 34716338,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzE2MzM4",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-11T00:56:54Z",
    "updated_at": "2014-02-11T00:56:54Z",
    "body": "Could you also add rationale for why this was done and the direction it's going in? I'm mostly just curious, I'm not really sure what the impetus for this was.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34716338/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34736363",
    "html_url": "https://github.com/rust-lang/rust/pull/12162#issuecomment-34736363",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12162",
    "id": 34736363,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzM2MzYz",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-11T09:00:13Z",
    "updated_at": "2014-02-11T09:00:24Z",
    "body": "I wanted to remove all the cloning associated with `ast_map::Path`, and I've found a pretty good way to retrieve paths without storing them (apart from the base paths of inlined items), by having \"parent\" `NodeId`s on each node, referring to its inner-most enclosing item/method node.\n\nIn the process of adapting the codebase to that model, I've come across the inefficient and deprecated methods on `Session`, related to the token interner, and I've ripped them out. It might be possible to split those changes into a separate commit, but they've become quite entangled.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34736363/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34748883",
    "html_url": "https://github.com/rust-lang/rust/pull/12162#issuecomment-34748883",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12162",
    "id": 34748883,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzQ4ODgz",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-11T12:17:23Z",
    "updated_at": "2014-02-11T12:38:27Z",
    "body": "> In the process of adapting the codebase to that model, I've come across the inefficient and deprecated methods on Session, related to the token interner, and I've ripped them out. It might be possible to split those changes into a separate commit, but they've become quite entangled.\n\nFWIW, it's _much_ easier to review when things are not just a single monolithic 4500 line commit, so it's generally good practice to avoid the temptation to do too many things at once (which I'm not very good at either...). In any case, a longer commit message describing what's changing and why (so that it's possible to deduce it from the git history/git blame) is something that should be possible now.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34748883/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34770900",
    "html_url": "https://github.com/rust-lang/rust/pull/12162#issuecomment-34770900",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12162",
    "id": 34770900,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzcwOTAw",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-11T16:21:40Z",
    "updated_at": "2014-02-11T16:21:40Z",
    "body": "> by having \"parent\" NodeIds on each node, referring to its inner-most enclosing item/method node\n\nThis seems like a fairly large change to the code base, and I just wanna make sure that you've talked it over with others first (it's certainly fine if you have already).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34770900/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34792694",
    "html_url": "https://github.com/rust-lang/rust/pull/12162#issuecomment-34792694",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12162",
    "id": 34792694,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzkyNjk0",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-11T19:08:48Z",
    "updated_at": "2014-02-11T19:08:48Z",
    "body": "cc me (I want to read over)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34792694/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34812107",
    "html_url": "https://github.com/rust-lang/rust/pull/12162#issuecomment-34812107",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12162",
    "id": 34812107,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODEyMTA3",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-11T21:49:18Z",
    "updated_at": "2014-02-11T21:49:18Z",
    "body": "I've been skimming at a high-level. This mostly makes sense, I think, but I'm not a fan of the `<PI:PathIter>` that is littered everywhere -- it's verbose and will generate a lot of monomorphized instances. Though perhaps that is precisely the point of this patch, to avoid the overhead of collecting. \n\nAnyway, my biggest concern is that I fear the interaction with #12158 -- in particular, lazy iterators often cause borrow checker conflicts, since their closures claim the data they touch for the entirety of the iteration.\n\nThis means that if you have `foo.iter().filter(|| expr1).map(|| expr2)` and so on, `expr1` and `expr2` cannot mutate the same state etc. Anyway, I'm not sure if there'll be a negative interaction or not -- we'll have to see. Quite possibly it'll be fine since path iteration is mostly touching the ast_map, which is (I think) stored in a a `RefCell` and hence sharable.\n\nBut i'd request that PR #12158 land first, since I think closing up soundness holes takes higher precedence and I have no desire to undo work this PR does.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34812107/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34842814",
    "html_url": "https://github.com/rust-lang/rust/pull/12162#issuecomment-34842814",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12162",
    "id": 34842814,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODQyODE0",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-12T06:28:49Z",
    "updated_at": "2014-02-12T06:34:22Z",
    "body": "`PathIter` includes `Clone`, to reduce vebosity (I originally had `Iterator<PathElem> + Clone` in a few bounds), so `iter::Map` wouldn't even work.\nWe can remove monomorphization completely by using `FullPathIter` (a chained vector value iterator and a stack linked list iterator) everywhere, there's definitely less composition now in metadata and whatnot.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34842814/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34859453",
    "html_url": "https://github.com/rust-lang/rust/pull/12162#issuecomment-34859453",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12162",
    "id": 34859453,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODU5NDUz",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-12T11:17:58Z",
    "updated_at": "2014-02-12T11:17:58Z",
    "body": "I was wondering whether we could remove the `<PI>` generics and replace them with a specific type. I'd prefer to do that, I think, though I might prefer a shorter name than `FullPathIter` (maybe `PathIter` or even `Path`?). Actually, following our new convention I guess the appropriate thing would be some sort of pluralized noun like `Names` or `Ids`.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34859453/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34912234",
    "html_url": "https://github.com/rust-lang/rust/pull/12162#issuecomment-34912234",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/12162",
    "id": 34912234,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTEyMjM0",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-12T20:14:25Z",
    "updated_at": "2014-02-12T20:17:15Z",
    "body": "I've renamed `FullPathIter` to `PathElems`, and now only 3 (terminal) functions are generic over `<PI: Iterator<PathElem>`.\n\n@cmr has been nice enough to send my branch to try, yielding this interesting [test failure](http://buildbot.rust-lang.org/builders/try-linux/builds/851/steps/test/logs/stdio/text).\nI'm surprised to see we output [these ugly \"pretty\" impl paths](https://github.com/mozilla/rust/blob/master/src/test/compile-fail/ambig_impl_unify.rs#L16) in errors.\nThose changed in this PR, `foo$$UP$$VEC$uint::foo` is now `~[uint].foo::foo` (trans doesn't have any problems because it mangles paths itself).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/34912234/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
