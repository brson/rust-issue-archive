[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66803073",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-66803073",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 66803073,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODAzMDcz",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-12T17:13:55Z",
    "updated_at": "2014-12-12T17:13:55Z",
    "body": "Can you run with `--leak-check=full` and `--show-reachable=yes` and paste the output here as well? I sadly can't reproduce this locally :(\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66803073/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66803855",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-66803855",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 66803855,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODAzODU1",
    "user": {
      "login": "rjammala",
      "id": 4990663,
      "node_id": "MDQ6VXNlcjQ5OTA2NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4990663?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjammala",
      "html_url": "https://github.com/rjammala",
      "followers_url": "https://api.github.com/users/rjammala/followers",
      "following_url": "https://api.github.com/users/rjammala/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjammala/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjammala/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjammala/subscriptions",
      "organizations_url": "https://api.github.com/users/rjammala/orgs",
      "repos_url": "https://api.github.com/users/rjammala/repos",
      "events_url": "https://api.github.com/users/rjammala/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjammala/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-12T17:19:30Z",
    "updated_at": "2014-12-12T17:23:24Z",
    "body": "```\n$ valgrind --leak-check=full --show-reachable=yes ./learn\n==3771== Memcheck, a memory error detector\n==3771== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.\n==3771== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info\n==3771== Command: ./learn\n==3771== \nHello World!\nHow are you today\n==3771== \n==3771== HEAP SUMMARY:\n==3771==     in use at exit: 1,184 bytes in 4 blocks\n==3771==   total heap usage: 18 allocs, 14 frees, 2,696 bytes allocated\n==3771== \n==3771== 32 bytes in 1 blocks are still reachable in loss record 1 of 4\n==3771==    at 0x128A12: je_mallocx (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x11137F: thread_local::imp::register_dtor::h6d14515a39f84cf203b (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x1129E3: thread_local::Key$LT$T$GT$::with::h7241079596358413660 (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x112C42: io::stdio::with_task_stdout::hafb602ec3975fdc5syg (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x115557: io::stdio::println_args::h7f0794513d4f2dfcxDg (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x1110B7: main::hbd01322dca53aee9eaa (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x11A22A: rt::start::closure.32122 (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x124FEB: rust_try_inner (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x124FD5: rust_try (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x123BB2: unwind::try::hf2f7fcf7ecc46c43Tyc (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x123A8B: task::Task::run::h911f3b3bbb0c433efKb (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x11A05B: rt::start::hfd264fa826df3608S9x (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771== \n==3771== 64 bytes in 1 blocks are still reachable in loss record 2 of 4\n==3771==    at 0x128A12: je_mallocx (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x111431: thread_local::imp::register_dtor::h6d14515a39f84cf203b (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x1129E3: thread_local::Key$LT$T$GT$::with::h7241079596358413660 (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x112C42: io::stdio::with_task_stdout::hafb602ec3975fdc5syg (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x115557: io::stdio::println_args::h7f0794513d4f2dfcxDg (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x1110B7: main::hbd01322dca53aee9eaa (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x11A22A: rt::start::closure.32122 (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x124FEB: rust_try_inner (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x124FD5: rust_try (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x123BB2: unwind::try::hf2f7fcf7ecc46c43Tyc (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x123A8B: task::Task::run::h911f3b3bbb0c433efKb (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x11A05B: rt::start::hfd264fa826df3608S9x (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771== \n==3771== 64 bytes in 1 blocks are still reachable in loss record 3 of 4\n==3771==    at 0x128A12: je_mallocx (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x112CDD: io::stdio::with_task_stdout::hafb602ec3975fdc5syg (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x115557: io::stdio::println_args::h7f0794513d4f2dfcxDg (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x1110B7: main::hbd01322dca53aee9eaa (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x11A22A: rt::start::closure.32122 (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x124FEB: rust_try_inner (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x124FD5: rust_try (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x123BB2: unwind::try::hf2f7fcf7ecc46c43Tyc (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x123A8B: task::Task::run::h911f3b3bbb0c433efKb (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x11A05B: rt::start::hfd264fa826df3608S9x (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x119E35: rt::lang_start::hde2a214462357c7eb9x (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x11117E: main (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771== \n==3771== 1,024 bytes in 1 blocks are still reachable in loss record 4 of 4\n==3771==    at 0x128A12: je_mallocx (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x112222: io::buffered::BufferedWriter$LT$W$GT$::with_capacity::h8206835914802320726 (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x112D63: io::stdio::with_task_stdout::hafb602ec3975fdc5syg (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x115557: io::stdio::println_args::h7f0794513d4f2dfcxDg (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x1110B7: main::hbd01322dca53aee9eaa (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x11A22A: rt::start::closure.32122 (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x124FEB: rust_try_inner (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x124FD5: rust_try (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x123BB2: unwind::try::hf2f7fcf7ecc46c43Tyc (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x123A8B: task::Task::run::h911f3b3bbb0c433efKb (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x11A05B: rt::start::hfd264fa826df3608S9x (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771==    by 0x119E35: rt::lang_start::hde2a214462357c7eb9x (in /home/rjammalamadaka/Programs/Rust/learn)\n==3771== \n==3771== LEAK SUMMARY:\n==3771==    definitely lost: 0 bytes in 0 blocks\n==3771==    indirectly lost: 0 bytes in 0 blocks\n==3771==      possibly lost: 0 bytes in 0 blocks\n==3771==    still reachable: 1,184 bytes in 4 blocks\n==3771==         suppressed: 0 bytes in 0 blocks\n==3771== \n==3771== For counts of detected and suppressed errors, rerun with: -v\n==3771== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 6 from 6)\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66803855/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66835389",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-66835389",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 66835389,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODM1Mzg5",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-12T21:06:36Z",
    "updated_at": "2014-12-12T21:06:36Z",
    "body": "Interesting! It looks like destructors registered with `pthread_key_create` do not run when the process exits, causing this leak.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66835389/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66842252",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-66842252",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 66842252,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODQyMjUy",
    "user": {
      "login": "rjammala",
      "id": 4990663,
      "node_id": "MDQ6VXNlcjQ5OTA2NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4990663?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjammala",
      "html_url": "https://github.com/rjammala",
      "followers_url": "https://api.github.com/users/rjammala/followers",
      "following_url": "https://api.github.com/users/rjammala/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjammala/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjammala/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjammala/subscriptions",
      "organizations_url": "https://api.github.com/users/rjammala/orgs",
      "repos_url": "https://api.github.com/users/rjammala/repos",
      "events_url": "https://api.github.com/users/rjammala/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjammala/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-12-12T22:01:59Z",
    "updated_at": "2014-12-12T22:01:59Z",
    "body": "Let me know if you need any more information.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/66842252/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123570118",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-123570118",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 123570118,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzU3MDExOA==",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-22T05:36:58Z",
    "updated_at": "2015-07-22T05:36:58Z",
    "body": "This seems to be resolved, at least the program with `println!`s has nothing still reachable.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123570118/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123573503",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-123573503",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 123573503,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzU3MzUwMw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-22T06:14:49Z",
    "updated_at": "2015-07-22T06:14:49Z",
    "body": "@huonw did you test on linux? You may have been using the ELF TLS instead of pthread tls. I just built a compiler with `--disable-elf-tls` and it looks like the leak is still present:\n\n```\n$ valgrind ./foo \n==21255== Memcheck, a memory error detector\n==21255== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==21255== Using Valgrind-3.10.0.SVN and LibVEX; rerun with -h for copyright info\n==21255== Command: ./foo\n==21255== \nHello World!\nHow are you today\n==21255== \n==21255== HEAP SUMMARY:\n==21255==     in use at exit: 312 bytes in 7 blocks\n==21255==   total heap usage: 26 allocs, 19 frees, 2,720 bytes allocated\n==21255== \n==21255== LEAK SUMMARY:\n==21255==    definitely lost: 0 bytes in 0 blocks\n==21255==    indirectly lost: 0 bytes in 0 blocks\n==21255==      possibly lost: 0 bytes in 0 blocks\n==21255==    still reachable: 312 bytes in 7 blocks\n==21255==         suppressed: 0 bytes in 0 blocks\n==21255== Rerun with --leak-check=full to see details of leaked memory\n==21255== \n==21255== For counts of detected and suppressed errors, rerun with: -v\n==21255== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n```\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123573503/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123573982",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-123573982",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 123573982,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEyMzU3Mzk4Mg==",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-07-22T06:17:59Z",
    "updated_at": "2015-07-22T06:17:59Z",
    "body": "Ah, yes, that looks like the difference.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/123573982/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/163663275",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-163663275",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 163663275,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MzY2MzI3NQ==",
    "user": {
      "login": "rjammala",
      "id": 4990663,
      "node_id": "MDQ6VXNlcjQ5OTA2NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4990663?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjammala",
      "html_url": "https://github.com/rjammala",
      "followers_url": "https://api.github.com/users/rjammala/followers",
      "following_url": "https://api.github.com/users/rjammala/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjammala/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjammala/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjammala/subscriptions",
      "organizations_url": "https://api.github.com/users/rjammala/orgs",
      "repos_url": "https://api.github.com/users/rjammala/repos",
      "events_url": "https://api.github.com/users/rjammala/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjammala/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-10T15:42:29Z",
    "updated_at": "2015-12-10T15:42:29Z",
    "body": "It looks like this is no longer an issue (at least using nightly build of rust (1.7-0-nightly):\n\n]$ valgrind ./learn\n==79754== Memcheck, a memory error detector\n==79754== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.\n==79754== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info\n==79754== Command: ./learn\n==79754== \nHello World!\nHow are you today\n==79754== \n==79754== HEAP SUMMARY:\n==79754==     in use at exit: 0 bytes in 0 blocks\n==79754==   total heap usage: 4 allocs, 4 frees, 960 bytes allocated\n==79754== \n==79754== All heap blocks were freed -- no leaks are possible\n==79754== \n==79754== For counts of detected and suppressed errors, rerun with: -v\n==79754== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 6 from 6)\n[rjammalamadaka@localhost Rust]$ rustc --version\nrustc 1.7.0-nightly (81ae8be71 2015-12-09)\n[rjammalamadaka@localhost Rust]$ \n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/163663275/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/163685449",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-163685449",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 163685449,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MzY4NTQ0OQ==",
    "user": {
      "login": "tamird",
      "id": 1535036,
      "node_id": "MDQ6VXNlcjE1MzUwMzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tamird",
      "html_url": "https://github.com/tamird",
      "followers_url": "https://api.github.com/users/tamird/followers",
      "following_url": "https://api.github.com/users/tamird/following{/other_user}",
      "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tamird/subscriptions",
      "organizations_url": "https://api.github.com/users/tamird/orgs",
      "repos_url": "https://api.github.com/users/tamird/repos",
      "events_url": "https://api.github.com/users/tamird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tamird/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-10T16:52:37Z",
    "updated_at": "2015-12-10T16:52:37Z",
    "body": "This is probably OK to close then\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/163685449/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/163732854",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-163732854",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 163732854,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2MzczMjg1NA==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-12-10T19:55:21Z",
    "updated_at": "2015-12-10T19:55:21Z",
    "body": "Ah unfortunately [as I mentioned earlier](https://github.com/rust-lang/rust/issues/19776#issuecomment-123573503) this is specifically related to pthread TLS instead of ELF TLS (e.g. really old TLS). I just verified that this is indeed still an issue.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/163732854/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215112205",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-215112205",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 215112205,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNTExMjIwNQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-27T15:02:27Z",
    "updated_at": "2016-04-27T15:02:27Z",
    "body": "Trying this today:\n\n``` bash\n$ ./configure --disable-elf-tls\n$ make -j6\n$ ./x86_64-unknown-linux-gnu/stage2/bin/rustc learn.rs \n$  valgrind --leak-check=full ./learn\n==14462== Memcheck, a memory error detector\n==14462== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==14462== Using Valgrind-3.10.0 and LibVEX; rerun with -h for copyright info\n==14462== Command: ./learn\n==14462== \nHello World!\nHow are you today\n==14462== \n==14462== HEAP SUMMARY:\n==14462==     in use at exit: 0 bytes in 0 blocks\n==14462==   total heap usage: 22 allocs, 22 frees, 2,680 bytes allocated\n==14462== \n==14462== All heap blocks were freed -- no leaks are possible\n==14462== \n==14462== For counts of detected and suppressed errors, rerun with: -v\n==14462== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n$ ./x86_64-unknown-linux-gnu/stage2/bin/rustc --version\nrustc 1.10.0-dev (80bff1eea 2016-04-26)\n```\n\nHas this been randomly fixed?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215112205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215141335",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-215141335",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 215141335,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNTE0MTMzNQ==",
    "user": {
      "login": "rjammala",
      "id": 4990663,
      "node_id": "MDQ6VXNlcjQ5OTA2NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4990663?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rjammala",
      "html_url": "https://github.com/rjammala",
      "followers_url": "https://api.github.com/users/rjammala/followers",
      "following_url": "https://api.github.com/users/rjammala/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjammala/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rjammala/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjammala/subscriptions",
      "organizations_url": "https://api.github.com/users/rjammala/orgs",
      "repos_url": "https://api.github.com/users/rjammala/repos",
      "events_url": "https://api.github.com/users/rjammala/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rjammala/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-27T16:36:05Z",
    "updated_at": "2016-04-27T16:36:05Z",
    "body": "yup, even I disabled elf-tls and it seems to have been fixed.\n./configure --disable-elf-tls\n$ ./x86_64-unknown-linux-gnu/stage2/bin/rustc --version\nrustc 1.10.0-dev (80bff1eea 2016-04-26)\n\n@alexcrichton : Can we close this?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215141335/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215146410",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-215146410",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 215146410,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNTE0NjQxMA==",
    "user": {
      "login": "tamird",
      "id": 1535036,
      "node_id": "MDQ6VXNlcjE1MzUwMzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tamird",
      "html_url": "https://github.com/tamird",
      "followers_url": "https://api.github.com/users/tamird/followers",
      "following_url": "https://api.github.com/users/tamird/following{/other_user}",
      "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tamird/subscriptions",
      "organizations_url": "https://api.github.com/users/tamird/orgs",
      "repos_url": "https://api.github.com/users/tamird/repos",
      "events_url": "https://api.github.com/users/tamird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tamird/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-27T16:53:17Z",
    "updated_at": "2016-04-27T16:53:17Z",
    "body": "Probably needs a test to confirm it doesn't regress.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215146410/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215147815",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-215147815",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 215147815,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNTE0NzgxNQ==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-27T16:58:12Z",
    "updated_at": "2016-04-27T16:58:12Z",
    "body": "No, this is still an issue. The `--disable-elf-tls` option no longer works (that's a separate issue) and [as I mentioned earlier](https://github.com/rust-lang/rust/issues/19776#issuecomment-123573503) (and [earlier](https://github.com/rust-lang/rust/issues/19776#issuecomment-163732854)) this requires pthread TLS to be used, and by default we use ELF TLS so it's difficult to reproduce.\n\nRunning binaries on older systems with a working valgrind should reproduce this.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215147815/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215149515",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-215149515",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 215149515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNTE0OTUxNQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-27T17:04:09Z",
    "updated_at": "2016-04-27T17:04:09Z",
    "body": "Gah! I didn't realize the flag didn't work; I thought I _was_ using pthread TLS.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215149515/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215151177",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-215151177",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 215151177,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNTE1MTE3Nw==",
    "user": {
      "login": "tamird",
      "id": 1535036,
      "node_id": "MDQ6VXNlcjE1MzUwMzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tamird",
      "html_url": "https://github.com/tamird",
      "followers_url": "https://api.github.com/users/tamird/followers",
      "following_url": "https://api.github.com/users/tamird/following{/other_user}",
      "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tamird/subscriptions",
      "organizations_url": "https://api.github.com/users/tamird/orgs",
      "repos_url": "https://api.github.com/users/tamird/repos",
      "events_url": "https://api.github.com/users/tamird/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tamird/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-27T17:09:44Z",
    "updated_at": "2016-04-27T17:09:44Z",
    "body": "@alexcrichton can you cross-link to the `--disable-elf-tls` issue?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215151177/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215169902",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-215169902",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 215169902,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNTE2OTkwMg==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-27T17:52:02Z",
    "updated_at": "2016-04-27T17:52:02Z",
    "body": "that'd be https://github.com/rust-lang/rust/issues/32047\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/215169902/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/259289734",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-259289734",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 259289734,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTI4OTczNA==",
    "user": {
      "login": "jtsiros",
      "id": 7041192,
      "node_id": "MDQ6VXNlcjcwNDExOTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7041192?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtsiros",
      "html_url": "https://github.com/jtsiros",
      "followers_url": "https://api.github.com/users/jtsiros/followers",
      "following_url": "https://api.github.com/users/jtsiros/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtsiros/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtsiros/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtsiros/subscriptions",
      "organizations_url": "https://api.github.com/users/jtsiros/orgs",
      "repos_url": "https://api.github.com/users/jtsiros/repos",
      "events_url": "https://api.github.com/users/jtsiros/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtsiros/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-11-08T23:14:45Z",
    "updated_at": "2016-11-08T23:14:45Z",
    "body": "Not sure if this is was resolved on nightly, but I see a similar issue for a trivial for a simple heap allocation testing using a bunch of Box::new() calls:\n\nvalgrind-3.12.0\nrustc 1.12.1 (d4f39402a 2016-10-19)\nDarwin mC02QF11JG8WN 15.6.0 Darwin Kernel Version 15.6.0: Thu Sep  1 15:01:16 PDT 2016; root:xnu-3248.60.11~2/RELEASE_X86_64 x86_64\n\n```\nvalgrind --leak-check=full --show-reachable=yes target/debug/sandbox\n==55274== Memcheck, a memory error detector\n==55274== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==55274== Using Valgrind-3.12.0 and LibVEX; rerun with -h for copyright info\n==55274== Command: target/debug/sandbox\n==55274==\n==55274==\n==55274== HEAP SUMMARY:\n==55274==     in use at exit: 23,333 bytes in 187 blocks\n==55274==   total heap usage: 275 allocs, 88 frees, 29,733 bytes allocated\n==55274==\n==55274== 112 bytes in 1 blocks are still reachable in loss record 39 of 64\n==55274==    at 0x10005C681: malloc (in /usr/local/Cellar/valgrind/3.12.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\n==55274==    by 0x10019CD7C: tlv_allocate_and_initialize_for_key (in /usr/lib/system/libdyld.dylib)\n==55274==    by 0x10019D52B: tlv_get_addr (in /usr/lib/system/libdyld.dylib)\n==55274==    by 0x10000541D: std::sys_common::thread_info::set::h3ee71b197ed00dc8 (in target/debug/sandbox)\n==55274==    by 0x100006782: std::rt::lang_start::hca48e539ce72a288 (in target/debug/sandbox)\n==55274==    by 0x100001639: main (in target/debug/sandbox)\n==55274==\n==55274== 2,064 bytes in 1 blocks are possibly lost in loss record 61 of 64\n==55274==    at 0x10005C942: malloc_zone_malloc (in /usr/local/Cellar/valgrind/3.12.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\n==55274==    by 0x10054EEFD: _objc_copyClassNamesForImage (in /usr/lib/libobjc.A.dylib)\n==55274==    by 0x100542182: protocols() (in /usr/lib/libobjc.A.dylib)\n==55274==    by 0x100542093: readClass(objc_class*, bool, bool) (in /usr/lib/libobjc.A.dylib)\n==55274==    by 0x10053FC13: gc_init (in /usr/lib/libobjc.A.dylib)\n==55274==    by 0x10054724E: objc_initializeClassPair_internal(objc_class*, char const*, objc_class*, objc_class*) (in /usr/lib/libobjc.A.dylib)\n==55274==    by 0x100554132: layout_string_create (in /usr/lib/libobjc.A.dylib)\n==55274==    by 0x10054283C: realizeClass(objc_class*) (in /usr/lib/libobjc.A.dylib)\n==55274==    by 0x100542300: copySwiftV1MangledName(char const*, bool) (in /usr/lib/libobjc.A.dylib)\n==55274==    by 0x1005422E9: copySwiftV1MangledName(char const*, bool) (in /usr/lib/libobjc.A.dylib)\n==55274==    by 0x1005422E9: copySwiftV1MangledName(char const*, bool) (in /usr/lib/libobjc.A.dylib)\n==55274==    by 0x1005422E9: copySwiftV1MangledName(char const*, bool) (in /usr/lib/libobjc.A.dylib)\n==55274==\n==55274== LEAK SUMMARY:\n==55274==    definitely lost: 0 bytes in 0 blocks\n==55274==    indirectly lost: 0 bytes in 0 blocks\n==55274==      possibly lost: 2,064 bytes in 1 blocks\n==55274==    still reachable: 112 bytes in 1 blocks\n==55274==         suppressed: 21,157 bytes in 185 blocks\n==55274==\n==55274== For counts of detected and suppressed errors, rerun with: -v\n==55274== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 15 from 15)\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/259289734/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/286032700",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-286032700",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 286032700,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjAzMjcwMA==",
    "user": {
      "login": "tbg",
      "id": 5076964,
      "node_id": "MDQ6VXNlcjUwNzY5NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5076964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tbg",
      "html_url": "https://github.com/tbg",
      "followers_url": "https://api.github.com/users/tbg/followers",
      "following_url": "https://api.github.com/users/tbg/following{/other_user}",
      "gists_url": "https://api.github.com/users/tbg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tbg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tbg/subscriptions",
      "organizations_url": "https://api.github.com/users/tbg/orgs",
      "repos_url": "https://api.github.com/users/tbg/repos",
      "events_url": "https://api.github.com/users/tbg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tbg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-13T07:25:47Z",
    "updated_at": "2017-03-13T07:29:44Z",
    "body": "still repros just like a charm, see below (seting of `use-jemalloc` doesn't matter, though of course the output varies somewhat). I'm happy to look more into why this is broken, but I'd need some guidance.\r\n\r\n1. apply this diff (adapt if you're not on `x86_64_unknown_linux_gnu`)\r\n    ```diff --git a/src/librustc_back/target/x86_64_unknown_linux_gnu.rs b/src/librustc_back/target/x86_64_unknown_linux_gnu.rs\r\n    index f95bcb5..dd93595 100644\r\n    --- a/src/librustc_back/target/x86_64_unknown_linux_gnu.rs\r\n    +++ b/src/librustc_back/target/x86_64_unknown_linux_gnu.rs\r\n    @@ -15,6 +15,7 @@ pub fn target() -> TargetResult {\r\n         base.cpu = \"x86-64\".to_string();\r\n         base.max_atomic_width = Some(64);\r\n         base.pre_link_args.push(\"-m64\".to_string());\r\n    +    base.has_elf_tls = false;\r\n    \r\n         Ok(Target {\r\n             llvm_target: \"x86_64-unknown-linux-gnu\".to_string(),\r\n    ```\r\n1. `./x.py build src/libtest --stage 1 --incremental` (or whichever you prefer)\r\n1. `*/*/stage1/*/rustc ~/learn.rs`\r\n1.  `valgrind --track-origins=yes --leak-check=full --show-reachable=yes ./learn`\r\n1. find the leaks, plus `Conditional jump or move depends on uninitialised value`.\r\n\r\n<details><summary>use-jemalloc=true (click to view)</summary>\r\n<p>\r\n\r\n---\r\n```\r\nvalgrind --track-origins=yes --leak-check=full --show-reachable=yes ./learn\r\n==27188== Memcheck, a memory error detector\r\n==27188== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\r\n==27188== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\r\n==27188== Command: ./learn\r\n==27188==\r\n==27188== Conditional jump or move depends on uninitialised value(s)\r\n==27188==    at 0x119CB1: std::io::stdio::stdout::stdout_init::hde9bb20c74d239a0 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x117D3E: _$LT$std..io..lazy..Lazy$LT$T$GT$$GT$::get::hd42305ba5388eaca (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x11A17E: std::io::stdio::_print::h909f88694efb8b49 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10E6FF: learn::main::h86b1088ba10af1af (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x11F292: std::panicking::try::do_call::h47aca5fe0bc0ca6f (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x124200: __rust_maybe_catch_panic (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x11F247: std::panicking::try::haf2827ba761d86f4 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x11B498: std::panic::catch_unwind::hd0e9dc562574f6f9 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10F206: std::rt::lang_start::h8c02412f0e1905c4 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10E739: main (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==  Uninitialised value was created by a stack allocation\r\n==27188==    at 0x119C52: std::io::stdio::stdout::stdout_init::hde9bb20c74d239a0 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==\r\nHow are you today\r\n==27188==\r\n==27188== HEAP SUMMARY:\r\n==27188==     in use at exit: 312 bytes in 7 blocks\r\n==27188==   total heap usage: 22 allocs, 15 frees, 3,744 bytes allocated\r\n==27188==\r\n==27188== 8 bytes in 1 blocks are still reachable in loss record 1 of 7\r\n==27188==    at 0x129DED: mallocx (jemalloc.c:2173)\r\n==27188==    by 0x123F30: _$LT$alloc..raw_vec..RawVec$LT$T$GT$$GT$::with_capacity::h9ac4354317bda4cc (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x124062: collections::slice::_$LT$impl$u20$collections..borrow..ToOwned$u20$for$u20$$u5b$T$u5d$$GT$::to_owned::ha76a6ec29817e7b5 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x123EE1: collections::str::_$LT$impl$u20$collections..borrow..ToOwned$u20$for$u20$str$GT$::to_owned::h471d5925d3705d5e (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10F1D0: std::rt::lang_start::h8c02412f0e1905c4 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10E739: main (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==\r\n==27188== 32 bytes in 1 blocks are still reachable in loss record 2 of 7\r\n==27188==    at 0x129DED: mallocx (jemalloc.c:2173)\r\n==27188==    by 0x10E906: _$LT$std..thread..local..os..Key$LT$T$GT$$GT$::get::hf79eb5e1178b3ce0 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x11141D: _$LT$std..thread..local..LocalKey$LT$T$GT$$GT$::with::haff1cf65b443d42b (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x11F2B8: std::panicking::panicking::h4bf7d1f6b8817da7 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x1103BA: _$LT$std..sys_common..remutex..ReentrantMutex$LT$T$GT$$GT$::lock::h1f21b2cbcd0ed8ce (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x119E41: _$LT$std..io..stdio..Stdout$u20$as$u20$std..io..Write$GT$::write_fmt::hb0aeab83fe2aee50 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x11A1D0: std::io::stdio::_print::h909f88694efb8b49 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10E6FF: learn::main::h86b1088ba10af1af (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x11F292: std::panicking::try::do_call::h47aca5fe0bc0ca6f (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x124200: __rust_maybe_catch_panic (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x11F247: std::panicking::try::haf2827ba761d86f4 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x11B498: std::panic::catch_unwind::hd0e9dc562574f6f9 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==\r\n==27188== 48 bytes in 1 blocks are still reachable in loss record 3 of 7\r\n==27188==    at 0x129DED: mallocx (jemalloc.c:2173)\r\n==27188==    by 0x1165E0: _$LT$std..sync..mutex..Mutex$LT$T$GT$$GT$::new::hf4e3619dc58c81a2 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x110856: std::thread::Thread::new::ha2a11efc1d6ac4f2 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x110B5C: _$LT$std..thread..Thread$u20$as$u20$std..sys_common..thread_info..NewThread$GT$::new::h188fe40d655e3e09 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10F1D8: std::rt::lang_start::h8c02412f0e1905c4 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10E739: main (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==\r\n==27188== 48 bytes in 1 blocks are still reachable in loss record 4 of 7\r\n==27188==    at 0x129DED: mallocx (jemalloc.c:2173)\r\n==27188==    by 0x1100F5: std::sync::condvar::Condvar::new::h4fbbad5b416fb56f (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x110860: std::thread::Thread::new::ha2a11efc1d6ac4f2 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x110B5C: _$LT$std..thread..Thread$u20$as$u20$std..sys_common..thread_info..NewThread$GT$::new::h188fe40d655e3e09 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10F1D8: std::rt::lang_start::h8c02412f0e1905c4 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10E739: main (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==\r\n==27188== 48 bytes in 1 blocks are still reachable in loss record 5 of 7\r\n==27188==    at 0x129DED: mallocx (jemalloc.c:2173)\r\n==27188==    by 0x10E876: _$LT$std..thread..local..os..Key$LT$T$GT$$GT$::get::h307be15b67cc5cff (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x1117FB: _$LT$std..thread..local..LocalKey$LT$T$GT$$GT$::with::hb38a09bf838c22e7 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x11E5FD: std::sys_common::thread_info::set::h9bdea53d21fd0ea4 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10F1EF: std::rt::lang_start::h8c02412f0e1905c4 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10E739: main (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==\r\n==27188== 48 bytes in 1 blocks are still reachable in loss record 6 of 7\r\n==27188==    at 0x129DED: mallocx (jemalloc.c:2173)\r\n==27188==    by 0x10E7E6: _$LT$std..thread..local..os..Key$LT$T$GT$$GT$::get::h0a66dfc1cd407d9b (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x111902: _$LT$std..thread..local..LocalKey$LT$T$GT$$GT$::state::h517ffedf5ce521c1 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x11A156: std::io::stdio::_print::h909f88694efb8b49 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10E6FF: learn::main::h86b1088ba10af1af (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x11F292: std::panicking::try::do_call::h47aca5fe0bc0ca6f (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x124200: __rust_maybe_catch_panic (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x11F247: std::panicking::try::haf2827ba761d86f4 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x11B498: std::panic::catch_unwind::hd0e9dc562574f6f9 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10F206: std::rt::lang_start::h8c02412f0e1905c4 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10E739: main (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==\r\n==27188== 80 bytes in 1 blocks are still reachable in loss record 7 of 7\r\n==27188==    at 0x129DED: mallocx (jemalloc.c:2173)\r\n==27188==    by 0x110896: std::thread::Thread::new::ha2a11efc1d6ac4f2 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x110B5C: _$LT$std..thread..Thread$u20$as$u20$std..sys_common..thread_info..NewThread$GT$::new::h188fe40d655e3e09 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10F1D8: std::rt::lang_start::h8c02412f0e1905c4 (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==    by 0x10E739: main (in /home/tschottdorf/rust-pthread/learn)\r\n==27188==\r\n==27188== LEAK SUMMARY:\r\n==27188==    definitely lost: 0 bytes in 0 blocks\r\n==27188==    indirectly lost: 0 bytes in 0 blocks\r\n==27188==      possibly lost: 0 bytes in 0 blocks\r\n==27188==    still reachable: 312 bytes in 7 blocks\r\n==27188==         suppressed: 0 bytes in 0 blocks\r\n==27188==\r\n==27188== For counts of detected and suppressed errors, rerun with: -v\r\n==27188== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\r\n```\r\n---\r\n\r\n</p>\r\n</details>\r\n\r\n<details><summary>use-jemalloc=false (click to view)</summary>\r\n<p>\r\n\r\n---\r\n```\r\n==18929== Memcheck, a memory error detector\r\n==18929== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\r\n==18929== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\r\n==18929== Command: ./learn\r\n==18929==\r\n==18929== Conditional jump or move depends on uninitialised value(s)\r\n==18929==    at 0x1174E1: std::io::stdio::stdout::stdout_init::h8c219ec6edaca9e2 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x11556E: _$LT$std..io..lazy..Lazy$LT$T$GT$$GT$::get::h3818fe46065008a9 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x1179AE: std::io::stdio::_print::hb65c73db7e5ba8b4 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10BF2F: learn::main::h86b1088ba10af1af (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x11CAC2: std::panicking::try::do_call::h4af13c61a0885795 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x121A30: __rust_maybe_catch_panic (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x11CA77: std::panicking::try::h5d0504a555a21656 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x118CC8: std::panic::catch_unwind::h8daeb6c836b441af (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10CA36: std::rt::lang_start::h74f5ad66fb152c57 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10BF69: main (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==  Uninitialised value was created by a stack allocation\r\n==18929==    at 0x117482: std::io::stdio::stdout::stdout_init::h8c219ec6edaca9e2 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==\r\nHow are you today\r\n==18929==\r\n==18929== HEAP SUMMARY:\r\n==18929==     in use at exit: 277 bytes in 7 blocks\r\n==18929==   total heap usage: 23 allocs, 16 frees, 3,560 bytes allocated\r\n==18929==\r\n==18929== 5 bytes in 1 blocks are still reachable in loss record 1 of 7\r\n==18929==    at 0x4C2FD5F: realloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==18929==    by 0x10CB12: _$LT$alloc..raw_vec..RawVec$LT$T$GT$$GT$::reserve_exact::h4edf8f87d342a05f (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x118AE5: std::ffi::c_str::CString::from_vec_unchecked::hdcef4de01dead576 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x118A7D: std::ffi::c_str::CString::_new::hc7b7f6376e99eb50 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x1189B5: std::ffi::c_str::CString::new::h31a27631ea3d129f (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10E01B: std::thread::Thread::new::hdbde4e93369830a6 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10E38C: _$LT$std..thread..Thread$u20$as$u20$std..sys_common..thread_info..NewThread$GT$::new::hd92ec6def8113f36 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10CA08: std::rt::lang_start::h74f5ad66fb152c57 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10BF69: main (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==\r\n==18929== 24 bytes in 1 blocks are still reachable in loss record 2 of 7\r\n==18929==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==18929==    by 0x10C016: _$LT$std..thread..local..os..Key$LT$T$GT$$GT$::get::h4cb8adf76f34a8a8 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10EDAD: _$LT$std..thread..local..LocalKey$LT$T$GT$$GT$::with::h7268ed135fa874a3 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x11CAE8: std::panicking::panicking::hf8bff814c3b72c57 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10DBEA: _$LT$std..sys_common..remutex..ReentrantMutex$LT$T$GT$$GT$::lock::hc072fd20cb222349 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x117671: _$LT$std..io..stdio..Stdout$u20$as$u20$std..io..Write$GT$::write_fmt::ha9551f3ca8d595e4 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x117A00: std::io::stdio::_print::hb65c73db7e5ba8b4 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10BF2F: learn::main::h86b1088ba10af1af (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x11CAC2: std::panicking::try::do_call::h4af13c61a0885795 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x121A30: __rust_maybe_catch_panic (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x11CA77: std::panicking::try::h5d0504a555a21656 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x118CC8: std::panic::catch_unwind::h8daeb6c836b441af (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==\r\n==18929== 40 bytes in 1 blocks are still reachable in loss record 3 of 7\r\n==18929==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==18929==    by 0x113E10: _$LT$std..sync..mutex..Mutex$LT$T$GT$$GT$::new::h2c7659a20efbd015 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10E086: std::thread::Thread::new::hdbde4e93369830a6 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10E38C: _$LT$std..thread..Thread$u20$as$u20$std..sys_common..thread_info..NewThread$GT$::new::hd92ec6def8113f36 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10CA08: std::rt::lang_start::h74f5ad66fb152c57 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10BF69: main (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==\r\n==18929== 40 bytes in 1 blocks are still reachable in loss record 4 of 7\r\n==18929==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==18929==    by 0x10C136: _$LT$std..thread..local..os..Key$LT$T$GT$$GT$::get::hf9087164760e6dbd (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10F132: _$LT$std..thread..local..LocalKey$LT$T$GT$$GT$::state::h0545415cf9387211 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x117986: std::io::stdio::_print::hb65c73db7e5ba8b4 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10BF2F: learn::main::h86b1088ba10af1af (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x11CAC2: std::panicking::try::do_call::h4af13c61a0885795 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x121A30: __rust_maybe_catch_panic (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x11CA77: std::panicking::try::h5d0504a555a21656 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x118CC8: std::panic::catch_unwind::h8daeb6c836b441af (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10CA36: std::rt::lang_start::h74f5ad66fb152c57 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10BF69: main (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==\r\n==18929== 48 bytes in 1 blocks are still reachable in loss record 5 of 7\r\n==18929==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==18929==    by 0x10D925: std::sync::condvar::Condvar::new::h9b5a8a20b184aadc (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10E090: std::thread::Thread::new::hdbde4e93369830a6 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10E38C: _$LT$std..thread..Thread$u20$as$u20$std..sys_common..thread_info..NewThread$GT$::new::hd92ec6def8113f36 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10CA08: std::rt::lang_start::h74f5ad66fb152c57 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10BF69: main (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==\r\n==18929== 48 bytes in 1 blocks are still reachable in loss record 6 of 7\r\n==18929==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==18929==    by 0x10C0A6: _$LT$std..thread..local..os..Key$LT$T$GT$$GT$::get::hbf071f63bdfa8db8 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10EE1B: _$LT$std..thread..local..LocalKey$LT$T$GT$$GT$::with::ha1974f44b6021a71 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x11BE2D: std::sys_common::thread_info::set::hcd1ca419433f28db (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10CA1F: std::rt::lang_start::h74f5ad66fb152c57 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10BF69: main (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==\r\n==18929== 72 bytes in 1 blocks are still reachable in loss record 7 of 7\r\n==18929==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==18929==    by 0x10E0C6: std::thread::Thread::new::hdbde4e93369830a6 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10E38C: _$LT$std..thread..Thread$u20$as$u20$std..sys_common..thread_info..NewThread$GT$::new::hd92ec6def8113f36 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10CA08: std::rt::lang_start::h74f5ad66fb152c57 (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==    by 0x10BF69: main (in /home/tschottdorf/rust-nojemalloc/learn)\r\n==18929==\r\n==18929== LEAK SUMMARY:\r\n==18929==    definitely lost: 0 bytes in 0 blocks\r\n==18929==    indirectly lost: 0 bytes in 0 blocks\r\n==18929==      possibly lost: 0 bytes in 0 blocks\r\n==18929==    still reachable: 277 bytes in 7 blocks\r\n==18929==         suppressed: 0 bytes in 0 blocks\r\n==18929==\r\n==18929== For counts of detected and suppressed errors, rerun with: -v\r\n==18929== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\r\n```\r\n---\r\n\r\n</p>\r\n</details>",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/286032700/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/286033720",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-286033720",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 286033720,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjAzMzcyMA==",
    "user": {
      "login": "tbg",
      "id": 5076964,
      "node_id": "MDQ6VXNlcjUwNzY5NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5076964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tbg",
      "html_url": "https://github.com/tbg",
      "followers_url": "https://api.github.com/users/tbg/followers",
      "following_url": "https://api.github.com/users/tbg/following{/other_user}",
      "gists_url": "https://api.github.com/users/tbg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tbg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tbg/subscriptions",
      "organizations_url": "https://api.github.com/users/tbg/orgs",
      "repos_url": "https://api.github.com/users/tbg/repos",
      "events_url": "https://api.github.com/users/tbg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tbg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-13T07:32:39Z",
    "updated_at": "2017-03-13T07:32:39Z",
    "body": "Oh, btw, the `Conditional jump or move depends on uninitialised value(s)` is always there (i.e. even when you don't apply the patch). So that's probably new. Isn't this run in CI somewhere?\r\n\r\n```\r\n==31040== Memcheck, a memory error detector\r\n==31040== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\r\n==31040== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\r\n==31040== Command: ./learn\r\n==31040==\r\n==31040== Conditional jump or move depends on uninitialised value(s)\r\n==31040==    at 0x10EB61: std::io::stdio::stdout::stdout_init::hde9bb20c74d239a0 (in /home/tschottdorf/rust-pthread/learn)\r\n==31040==    by 0x11DC3E: _$LT$std..io..lazy..Lazy$LT$T$GT$$GT$::get::hd42305ba5388eaca (in /home/tschottdorf/rust-pthread/learn)\r\n==31040==    by 0x10F02E: std::io::stdio::_print::h909f88694efb8b49 (in /home/tschottdorf/rust-pthread/learn)\r\n==31040==    by 0x10E6EF: learn::main::h86b1088ba10af1af (in /home/tschottdorf/rust-pthread/learn)\r\n==31040==    by 0x113922: std::panicking::try::do_call::h47aca5fe0bc0ca6f (in /home/tschottdorf/rust-pthread/learn)\r\n==31040==    by 0x124260: __rust_maybe_catch_panic (in /home/tschottdorf/rust-pthread/learn)\r\n==31040==    by 0x1138D7: std::panicking::try::haf2827ba761d86f4 (in /home/tschottdorf/rust-pthread/learn)\r\n==31040==    by 0x110956: std::rt::lang_start::h8c02412f0e1905c4 (in /home/tschottdorf/rust-pthread/learn)\r\n==31040==    by 0x10E729: main (in /home/tschottdorf/rust-pthread/learn)\r\n==31040==  Uninitialised value was created by a stack allocation\r\n==31040==    at 0x10EB02: std::io::stdio::stdout::stdout_init::hde9bb20c74d239a0 (in /home/tschottdorf/rust-pthread/learn)\r\n==31040==\r\nHow are you today\r\n==31040==\r\n==31040== HEAP SUMMARY:\r\n==31040==     in use at exit: 0 bytes in 0 blocks\r\n==31040==   total heap usage: 21 allocs, 21 frees, 3,680 bytes allocated\r\n==31040==\r\n==31040== All heap blocks were freed -- no leaks are possible\r\n==31040==\r\n==31040== For counts of detected and suppressed errors, rerun with: -v\r\n==31040== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/286033720/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/286092768",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-286092768",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 286092768,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjA5Mjc2OA==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-13T12:25:34Z",
    "updated_at": "2017-03-13T12:25:34Z",
    "body": "> Oh, btw, the `Conditional jump or move depends on uninitialised value(s)` is always there (i.e. even when you don't apply the patch).\r\n\r\nThat warning is harmless, and caused by LLVM optimization - see https://bugs.llvm.org//show_bug.cgi?id=23180 .",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/286092768/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/286212625",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-286212625",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 286212625,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjIxMjYyNQ==",
    "user": {
      "login": "o01eg",
      "id": 397177,
      "node_id": "MDQ6VXNlcjM5NzE3Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/397177?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/o01eg",
      "html_url": "https://github.com/o01eg",
      "followers_url": "https://api.github.com/users/o01eg/followers",
      "following_url": "https://api.github.com/users/o01eg/following{/other_user}",
      "gists_url": "https://api.github.com/users/o01eg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/o01eg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/o01eg/subscriptions",
      "organizations_url": "https://api.github.com/users/o01eg/orgs",
      "repos_url": "https://api.github.com/users/o01eg/repos",
      "events_url": "https://api.github.com/users/o01eg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/o01eg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-03-13T19:12:09Z",
    "updated_at": "2017-03-13T19:12:09Z",
    "body": "Can compiler just optimize out condition?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/286212625/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/445929445",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-445929445",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 445929445,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTkyOTQ0NQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-12-10T18:54:54Z",
    "updated_at": "2018-12-10T18:54:54Z",
    "body": "Triage: I do not have the means to attempt to reproduce today, but we did recently switch to the system allocator; I wonder if the bug persists. Anyone?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/445929445/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/446828035",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-446828035",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 446828035,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NjgyODAzNQ==",
    "user": {
      "login": "devMYC",
      "id": 6139711,
      "node_id": "MDQ6VXNlcjYxMzk3MTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6139711?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/devMYC",
      "html_url": "https://github.com/devMYC",
      "followers_url": "https://api.github.com/users/devMYC/followers",
      "following_url": "https://api.github.com/users/devMYC/following{/other_user}",
      "gists_url": "https://api.github.com/users/devMYC/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/devMYC/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/devMYC/subscriptions",
      "organizations_url": "https://api.github.com/users/devMYC/orgs",
      "repos_url": "https://api.github.com/users/devMYC/repos",
      "events_url": "https://api.github.com/users/devMYC/events{/privacy}",
      "received_events_url": "https://api.github.com/users/devMYC/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-12-13T03:14:20Z",
    "updated_at": "2018-12-13T03:14:20Z",
    "body": "```\r\n$ rustc --version\r\nrustc 1.31.0 (abe02cefd 2018-12-04)\r\n$\r\n$\r\n$ cat raii.rs \r\nfn create_box() {\r\n  let _box = Box::new(1u8);\r\n}\r\n\r\nfn main() {\r\n  let _box_one = Box::new(10u8);\r\n\r\n  {\r\n    let _box_two = Box::new(20u8);\r\n  }\r\n\r\n  for _ in 0u16..1_000 {\r\n    create_box();\r\n  }\r\n}\r\n$\r\n$\r\n$ rustc raii.rs && valgrind --leak-check=full --show-leak-kinds=all ./raii\r\n==43885== Memcheck, a memory error detector\r\n==43885== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\r\n==43885== Using Valgrind-3.14.0 and LibVEX; rerun with -h for copyright info\r\n==43885== Command: ./raii\r\n==43885== \r\n--43885-- run: /usr/bin/dsymutil \"./raii\"\r\n==43885== \r\n==43885== HEAP SUMMARY:\r\n==43885==     in use at exit: 18,719 bytes in 162 blocks\r\n==43885==   total heap usage: 184 allocs, 22 frees, 27,191 bytes allocated\r\n==43885== \r\n==43885== 24 bytes in 1 blocks are still reachable in loss record 3 of 44\r\n==43885==    at 0x1001332FE: malloc_zone_malloc (in /usr/local/Cellar/valgrind/3.14.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==43885==    by 0x100807901: NXCreateMapTableFromZone (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x1008078D3: NXCreateMapTable (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100806394: __sel_registerName(char const*, int, int) (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100806096: sel_init (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10080598C: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x1008184E0: map_images (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10008EC64: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==43885==    by 0x10008EE39: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==43885==    by 0x1002D071D: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==43885==    by 0x100805073: _objc_init (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10025AB34: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==43885== \r\n==43885== 32 bytes in 1 blocks are still reachable in loss record 8 of 44\r\n==43885==    at 0x1001332FE: malloc_zone_malloc (in /usr/local/Cellar/valgrind/3.14.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==43885==    by 0x100807A9E: NXCreateHashTableFromZone (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100807A6E: NXCreateHashTable (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100807948: NXCreateMapTableFromZone (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x1008078D3: NXCreateMapTable (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100806394: __sel_registerName(char const*, int, int) (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100806096: sel_init (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10080598C: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x1008184E0: map_images (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10008EC64: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==43885==    by 0x10008EE39: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==43885==    by 0x1002D071D: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==43885== \r\n==43885== 32 bytes in 1 blocks are still reachable in loss record 9 of 44\r\n==43885==    at 0x1001332FE: malloc_zone_malloc (in /usr/local/Cellar/valgrind/3.14.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==43885==    by 0x100807ABF: NXCreateHashTableFromZone (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100807A6E: NXCreateHashTable (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100807948: NXCreateMapTableFromZone (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x1008078D3: NXCreateMapTable (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100806394: __sel_registerName(char const*, int, int) (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100806096: sel_init (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10080598C: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x1008184E0: map_images (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10008EC64: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==43885==    by 0x10008EE39: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==43885==    by 0x1002D071D: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==43885== \r\n==43885== 32 bytes in 1 blocks are still reachable in loss record 10 of 44\r\n==43885==    at 0x100133086: malloc (in /usr/local/Cellar/valgrind/3.14.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==43885==    by 0x100807B83: NXCreateHashTableFromZone (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100807A6E: NXCreateHashTable (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100807948: NXCreateMapTableFromZone (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x1008078D3: NXCreateMapTable (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100806394: __sel_registerName(char const*, int, int) (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100806096: sel_init (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10080598C: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x1008184E0: map_images (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10008EC64: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==43885==    by 0x10008EE39: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==43885==    by 0x1002D071D: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==43885== \r\n==43885== 32 bytes in 1 blocks are still reachable in loss record 11 of 44\r\n==43885==    at 0x100133086: malloc (in /usr/local/Cellar/valgrind/3.14.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==43885==    by 0x1008079AE: NXCreateMapTableFromZone (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x1008078D3: NXCreateMapTable (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100806394: __sel_registerName(char const*, int, int) (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100806096: sel_init (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10080598C: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x1008184E0: map_images (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10008EC64: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==43885==    by 0x10008EE39: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==43885==    by 0x1002D071D: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==43885==    by 0x100805073: _objc_init (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10025AB34: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==43885== \r\n==43885== 48 bytes in 1 blocks are still reachable in loss record 15 of 44\r\n==43885==    at 0x1001338AD: malloc_zone_calloc (in /usr/local/Cellar/valgrind/3.14.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==43885==    by 0x100807F24: _NXHashRehashToCapacity (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100807EA2: NXHashInsert (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100807BAD: NXCreateHashTableFromZone (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100807A6E: NXCreateHashTable (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100807948: NXCreateMapTableFromZone (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x1008078D3: NXCreateMapTable (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100806394: __sel_registerName(char const*, int, int) (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x100806096: sel_init (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10080598C: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x1008184E0: map_images (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10008EC64: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==43885== \r\n==43885== 72 bytes in 3 blocks are possibly lost in loss record 26 of 44\r\n==43885==    at 0x1001336EA: calloc (in /usr/local/Cellar/valgrind/3.14.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==43885==    by 0x1008057C2: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x1008184E0: map_images (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10008EC64: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==43885==    by 0x10008EE39: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==43885==    by 0x1002D071D: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==43885==    by 0x100805073: _objc_init (in /usr/lib/libobjc.A.dylib)\r\n==43885==    by 0x10025AB34: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==43885==    by 0x10025AB1B: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==43885==    by 0x1001419C2: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==43885==    by 0x1000A0AC5: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==43885==    by 0x1000A0CF5: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==43885== \r\n==43885== 112 bytes in 1 blocks are still reachable in loss record 27 of 44\r\n==43885==    at 0x100133086: malloc (in /usr/local/Cellar/valgrind/3.14.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==43885==    by 0x1002D0969: tlv_allocate_and_initialize_for_key (in /usr/lib/system/libdyld.dylib)\r\n==43885==    by 0x1002D10EB: tlv_get_addr (in /usr/lib/system/libdyld.dylib)\r\n==43885==    by 0x10000938E: std::sys_common::thread_info::THREAD_INFO::__getit (cell.rs:258)\r\n==43885==    by 0x10000A21F: <std::thread::local::LocalKey<T>>::with (local.rs:297)\r\n==43885==    by 0x100008599: std::rt::lang_start_internal (thread_info.rs:47)\r\n==43885==    by 0x1000017A1: std::rt::lang_start (in ./raii)\r\n==43885==    by 0x100001371: main (in ./raii)\r\n==43885== \r\n==43885== LEAK SUMMARY:\r\n==43885==    definitely lost: 0 bytes in 0 blocks\r\n==43885==    indirectly lost: 0 bytes in 0 blocks\r\n==43885==      possibly lost: 72 bytes in 3 blocks\r\n==43885==    still reachable: 312 bytes in 7 blocks\r\n==43885==         suppressed: 18,335 bytes in 152 blocks\r\n==43885== \r\n==43885== For counts of detected and suppressed errors, rerun with: -v\r\n==43885== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 9 from 9)\r\n```",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/446828035/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/455176035",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-455176035",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 455176035,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NTE3NjAzNQ==",
    "user": {
      "login": "tesuji",
      "id": 15225902,
      "node_id": "MDQ6VXNlcjE1MjI1OTAy",
      "avatar_url": "https://avatars.githubusercontent.com/u/15225902?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tesuji",
      "html_url": "https://github.com/tesuji",
      "followers_url": "https://api.github.com/users/tesuji/followers",
      "following_url": "https://api.github.com/users/tesuji/following{/other_user}",
      "gists_url": "https://api.github.com/users/tesuji/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tesuji/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tesuji/subscriptions",
      "organizations_url": "https://api.github.com/users/tesuji/orgs",
      "repos_url": "https://api.github.com/users/tesuji/repos",
      "events_url": "https://api.github.com/users/tesuji/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tesuji/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-01-17T13:42:58Z",
    "updated_at": "2020-04-28T14:10:51Z",
    "body": "**Edit**: Resolved with latest valgrind (3.15.0)\r\n\r\n<details>\r\n\r\n   <summary>Resolved</summary>\r\n\r\n    ```r2\r\n    $ uname -a\r\n    Linux up 4.15.0-43-generic #46-Ubuntu SMP Thu Dec 6 14:45:28 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n    ```\r\n\r\n    ---\r\n\r\n    @devMYC Same program as your (named `tmp.rs`)\r\n\r\n    ```rust\r\n    fn create_box() {\r\n        let _box = Box::new(1u8);\r\n    }\r\n    fn main() {\r\n        let _box_one = Box::new(10u8);\r\n        {\r\n            let _box_two = Box::new(20u8);\r\n        }\r\n        for _ in 0u16..1_000 {\r\n            create_box();\r\n        }\r\n    }\r\n    ```\r\n\r\n    My result is different:\r\n\r\n    ```r2\r\n    $ rustc +nightly -V\r\n    rustc 1.33.0-nightly (ceb251214 2019-01-16)\r\n    $ rustc -V\r\n    rustc 1.31.1 (b6c32da9b 2018-12-18)\r\n    $ rustc +nightly tmp.rs -o tmp_nightly\r\n    $ rustc          tmp.rs -o tmp_stable\r\n    $ valgrind --version\r\n    valgrind-3.13.0\r\n    $ valgrind ./tmp_stable\r\n    [...]\r\n    ==9461== HEAP SUMMARY:\r\n    ==9461==     in use at exit: 0 bytes in 0 blocks\r\n    ==9461==   total heap usage: 6 allocs, 6 frees, 2,000 bytes allocated\r\n    ==9461==\r\n    ==9461== All heap blocks were freed -- no leaks are possible\r\n    [...]\r\n    $ valgrind ./tmp_nightly\r\n    [...]\r\n    ==9463== HEAP SUMMARY:\r\n    ==9463==     in use at exit: 0 bytes in 0 blocks\r\n    ==9463==   total heap usage: 1,013 allocs, 1,013 frees, 3,179 bytes allocated\r\n    ==9463==\r\n    ==9463== All heap blocks were freed -- no leaks are possible\r\n    [...]\r\n    ```\r\n\r\n    But the follow code has leak:\r\n\r\n    ```rust\r\n    use std::thread;\r\n    const NTHREADS: i32 = 10;\r\n    // This is the `main` thread\r\n    fn main() {\r\n        // Make a vector to hold the children which are spawned.\r\n        let mut children = vec![];\r\n        for i in 0..NTHREADS {\r\n            // Spin up another thread\r\n            children.push(thread::spawn(move || {\r\n                i + NTHREADS + 2\r\n            }));\r\n        }\r\n        for child in children {\r\n            // Wait for the thread to finish. Returns a result.\r\n            let _ = child.join();\r\n        }\r\n    }\r\n    ```\r\n\r\n    ```r2\r\n    $ valgrind ./tmp_nightly\r\n    [..]\r\n    ==9866== HEAP SUMMARY:\r\n    ==9866==     in use at exit: 32 bytes in 1 blocks\r\n    ==9866==   total heap usage: 111 allocs, 110 frees, 9,275 bytes allocated\r\n    ==9866== \r\n    ==9866== LEAK SUMMARY:\r\n    ==9866==    definitely lost: 0 bytes in 0 blocks\r\n    ==9866==    indirectly lost: 0 bytes in 0 blocks\r\n    ==9866==      possibly lost: 0 bytes in 0 blocks\r\n    ==9866==    still reachable: 32 bytes in 1 blocks\r\n    ==9866==         suppressed: 0 bytes in 0 blocks\r\n    ==9866== Rerun with --leak-check=full to see details of leaked memory\r\n    [..]\r\n    $ valgrind ./tmp_stable \r\n    [..]\r\n    ==9879== HEAP SUMMARY:\r\n    ==9879==     in use at exit: 32 bytes in 1 blocks\r\n    ==9879==   total heap usage: 37 allocs, 36 frees, 5,552 bytes allocated\r\n    ==9879== \r\n    ==9879== LEAK SUMMARY:\r\n    ==9879==    definitely lost: 0 bytes in 0 blocks\r\n    ==9879==    indirectly lost: 0 bytes in 0 blocks\r\n    ==9879==      possibly lost: 0 bytes in 0 blocks\r\n    ==9879==    still reachable: 32 bytes in 1 blocks\r\n    ==9879==         suppressed: 0 bytes in 0 blocks\r\n    ==9879== Rerun with --leak-check=full to see details of leaked memory\r\n    [..]\r\n    ```\r\n\r\n</details>\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/455176035/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/523243639",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-523243639",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 523243639,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzI0MzYzOQ==",
    "user": {
      "login": "mal20k",
      "id": 5705000,
      "node_id": "MDQ6VXNlcjU3MDUwMDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5705000?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mal20k",
      "html_url": "https://github.com/mal20k",
      "followers_url": "https://api.github.com/users/mal20k/followers",
      "following_url": "https://api.github.com/users/mal20k/following{/other_user}",
      "gists_url": "https://api.github.com/users/mal20k/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mal20k/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mal20k/subscriptions",
      "organizations_url": "https://api.github.com/users/mal20k/orgs",
      "repos_url": "https://api.github.com/users/mal20k/repos",
      "events_url": "https://api.github.com/users/mal20k/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mal20k/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-08-21T00:14:27Z",
    "updated_at": "2019-08-21T00:14:27Z",
    "body": "I'm running into what looks to be a related issue when trying to call a Rust function from C. According to valgrind, memory is leaked when Rust allocates the handle for `stdout` or `stderr`, but only once. Subsequent calls to `println!`, `eprintln!` `std::io::stdout()`, even across function calls, don't add to the count (always 8 allocs, 1 free). Could this be related or it it caused by some other issue?\r\n\r\n```bash\r\n$ uname -a\r\nLinux Bastion 4.10.17-2-pve #1 SMP PVE 4.10.17-20 (Mon, 14 Aug 2017 11:23:37 +0200) x86_64 GNU/Linux\r\n$ rustc --version\r\nrustc 1.37.0 (eae3437df 2019-08-13)\r\n$ gcc --version\r\ngcc (Debian 6.3.0-18+deb9u1) 6.3.0 20170516\r\n```\r\n```c\r\n// main.c\r\nvoid print_things();\r\nvoid main() {\r\n    print_things();\r\n}\r\n```\r\n```rust\r\n// lib.rs\r\n#[no_mangle]\r\npub extern \"C\" fn print_things() {\r\n    println!(\"Hello, world!\");\r\n}\r\n```\r\n```bash\r\n$ LD_LIBRARY_PATH=../target/debug/ valgrind --leak-check=full --show-leak-kinds=all --trace-children=yes ./test.out\r\n==9724== Memcheck, a memory error detector\r\n==9724== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\r\n==9724== Using Valgrind-3.14.0 and LibVEX; rerun with -h for copyright info\r\n==9724== Command: ./test.out\r\n==9724== \r\n==9724== \r\n==9724== HEAP SUMMARY:\r\n==9724==     in use at exit: 1,200 bytes in 7 blocks\r\n==9724==   total heap usage: 8 allocs, 1 frees, 1,232 bytes allocated\r\n==9724== \r\n==9724== 8 bytes in 1 blocks are still reachable in loss record 1 of 7\r\n==9724==    at 0x483577F: malloc (vg_replace_malloc.c:299)\r\n==9724==    by 0x484A7F8: alloc (alloc.rs:81)\r\n==9724==    by 0x484A7F8: exchange_malloc (alloc.rs:203)\r\n==9724==    by 0x484A7F8: new<closure> (boxed.rs:113)\r\n==9724==    by 0x484A7F8: at_exit<closure> (mod.rs:123)\r\n==9724==    by 0x484A7F8: init<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>> (lazy.rs:48)\r\n==9724==    by 0x484A7F8: get<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>> (lazy.rs:34)\r\n==9724==    by 0x484A7F8: std::io::stdio::stdout (stdio.rs:470)\r\n==9724==    by 0x484AF17: {{closure}}<std::io::stdio::Stdout> (stdio.rs:786)\r\n==9724==    by 0x484AF17: try_with<core::cell::RefCell<core::option::Option<alloc::boxed::Box<Write>>>,closure,core::result::Result<(), std::io::error::Error>> (local.rs:299)\r\n==9724==    by 0x484AF17: print_to<std::io::stdio::Stdout> (stdio.rs:780)\r\n==9724==    by 0x484AF17: std::io::stdio::_print (stdio.rs:802)\r\n==9724==    by 0x48475A3: print_things (lib.rs:3)\r\n==9724==    by 0x1086CD: main (in /home/proxmox/Projects/test-things/src/test.out)\r\n==9724== \r\n==9724== 8 bytes in 1 blocks are still reachable in loss record 2 of 7\r\n==9724==    at 0x483577F: malloc (vg_replace_malloc.c:299)\r\n==9724==    by 0x484A973: alloc (alloc.rs:81)\r\n==9724==    by 0x484A973: exchange_malloc (alloc.rs:203)\r\n==9724==    by 0x484A973: new<alloc::sync::Arc<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>>> (boxed.rs:113)\r\n==9724==    by 0x484A973: init<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>> (lazy.rs:60)\r\n==9724==    by 0x484A973: get<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>> (lazy.rs:34)\r\n==9724==    by 0x484A973: std::io::stdio::stdout (stdio.rs:470)\r\n==9724==    by 0x484AF17: {{closure}}<std::io::stdio::Stdout> (stdio.rs:786)\r\n==9724==    by 0x484AF17: try_with<core::cell::RefCell<core::option::Option<alloc::boxed::Box<Write>>>,closure,core::result::Result<(), std::io::error::Error>> (local.rs:299)\r\n==9724==    by 0x484AF17: print_to<std::io::stdio::Stdout> (stdio.rs:780)\r\n==9724==    by 0x484AF17: std::io::stdio::_print (stdio.rs:802)\r\n==9724==    by 0x48475A3: print_things (lib.rs:3)\r\n==9724==    by 0x1086CD: main (in /home/proxmox/Projects/test-things/src/test.out)\r\n==9724== \r\n==9724== 16 bytes in 1 blocks are still reachable in loss record 3 of 7\r\n==9724==    at 0x483577F: malloc (vg_replace_malloc.c:299)\r\n==9724==    by 0x484CA25: alloc (alloc.rs:81)\r\n==9724==    by 0x484CA25: alloc (alloc.rs:169)\r\n==9724==    by 0x484CA25: reserve_internal<alloc::boxed::Box<FnOnce<()>>,alloc::alloc::Global> (raw_vec.rs:668)\r\n==9724==    by 0x484CA25: reserve<alloc::boxed::Box<FnOnce<()>>,alloc::alloc::Global> (raw_vec.rs:491)\r\n==9724==    by 0x484CA25: reserve<alloc::boxed::Box<FnOnce<()>>> (vec.rs:457)\r\n==9724==    by 0x484CA25: push<alloc::boxed::Box<FnOnce<()>>> (vec.rs:1033)\r\n==9724==    by 0x484CA25: std::sys_common::at_exit_imp::push (at_exit_imp.rs:69)\r\n==9724==    by 0x484A813: at_exit<closure> (mod.rs:123)\r\n==9724==    by 0x484A813: init<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>> (lazy.rs:48)\r\n==9724==    by 0x484A813: get<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>> (lazy.rs:34)\r\n==9724==    by 0x484A813: std::io::stdio::stdout (stdio.rs:470)\r\n==9724==    by 0x484AF17: {{closure}}<std::io::stdio::Stdout> (stdio.rs:786)\r\n==9724==    by 0x484AF17: try_with<core::cell::RefCell<core::option::Option<alloc::boxed::Box<Write>>>,closure,core::result::Result<(), std::io::error::Error>> (local.rs:299)\r\n==9724==    by 0x484AF17: print_to<std::io::stdio::Stdout> (stdio.rs:780)\r\n==9724==    by 0x484AF17: std::io::stdio::_print (stdio.rs:802)\r\n==9724==    by 0x48475A3: print_things (lib.rs:3)\r\n==9724==    by 0x1086CD: main (in /home/proxmox/Projects/test-things/src/test.out)\r\n==9724== \r\n==9724== 24 bytes in 1 blocks are still reachable in loss record 4 of 7\r\n==9724==    at 0x483577F: malloc (vg_replace_malloc.c:299)\r\n==9724==    by 0x484C94A: alloc (alloc.rs:81)\r\n==9724==    by 0x484C94A: exchange_malloc (alloc.rs:203)\r\n==9724==    by 0x484C94A: init (at_exit_imp.rs:30)\r\n==9724==    by 0x484C94A: std::sys_common::at_exit_imp::push (at_exit_imp.rs:66)\r\n==9724==    by 0x484A813: at_exit<closure> (mod.rs:123)\r\n==9724==    by 0x484A813: init<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>> (lazy.rs:48)\r\n==9724==    by 0x484A813: get<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>> (lazy.rs:34)\r\n==9724==    by 0x484A813: std::io::stdio::stdout (stdio.rs:470)\r\n==9724==    by 0x484AF17: {{closure}}<std::io::stdio::Stdout> (stdio.rs:786)\r\n==9724==    by 0x484AF17: try_with<core::cell::RefCell<core::option::Option<alloc::boxed::Box<Write>>>,closure,core::result::Result<(), std::io::error::Error>> (local.rs:299)\r\n==9724==    by 0x484AF17: print_to<std::io::stdio::Stdout> (stdio.rs:780)\r\n==9724==    by 0x484AF17: std::io::stdio::_print (stdio.rs:802)\r\n==9724==    by 0x48475A3: print_things (lib.rs:3)\r\n==9724==    by 0x1086CD: main (in /home/proxmox/Projects/test-things/src/test.out)\r\n==9724== \r\n==9724== 40 bytes in 1 blocks are still reachable in loss record 5 of 7\r\n==9724==    at 0x483577F: malloc (vg_replace_malloc.c:299)\r\n==9724==    by 0x484A862: alloc (alloc.rs:81)\r\n==9724==    by 0x484A862: exchange_malloc (alloc.rs:203)\r\n==9724==    by 0x484A862: new<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>> (remutex.rs:54)\r\n==9724==    by 0x484A862: stdout_init (stdio.rs:480)\r\n==9724==    by 0x484A862: init<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>> (lazy.rs:58)\r\n==9724==    by 0x484A862: get<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>> (lazy.rs:34)\r\n==9724==    by 0x484A862: std::io::stdio::stdout (stdio.rs:470)\r\n==9724==    by 0x484AF17: {{closure}}<std::io::stdio::Stdout> (stdio.rs:786)\r\n==9724==    by 0x484AF17: try_with<core::cell::RefCell<core::option::Option<alloc::boxed::Box<Write>>>,closure,core::result::Result<(), std::io::error::Error>> (local.rs:299)\r\n==9724==    by 0x484AF17: print_to<std::io::stdio::Stdout> (stdio.rs:780)\r\n==9724==    by 0x484AF17: std::io::stdio::_print (stdio.rs:802)\r\n==9724==    by 0x48475A3: print_things (lib.rs:3)\r\n==9724==    by 0x1086CD: main (in /home/proxmox/Projects/test-things/src/test.out)\r\n==9724== \r\n==9724== 80 bytes in 1 blocks are still reachable in loss record 6 of 7\r\n==9724==    at 0x483577F: malloc (vg_replace_malloc.c:299)\r\n==9724==    by 0x484A8DE: alloc (alloc.rs:81)\r\n==9724==    by 0x484A8DE: exchange_malloc (alloc.rs:203)\r\n==9724==    by 0x484A8DE: new<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>> (sync.rs:288)\r\n==9724==    by 0x484A8DE: stdout_init (stdio.rs:480)\r\n==9724==    by 0x484A8DE: init<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>> (lazy.rs:58)\r\n==9724==    by 0x484A8DE: get<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>> (lazy.rs:34)\r\n==9724==    by 0x484A8DE: std::io::stdio::stdout (stdio.rs:470)\r\n==9724==    by 0x484AF17: {{closure}}<std::io::stdio::Stdout> (stdio.rs:786)\r\n==9724==    by 0x484AF17: try_with<core::cell::RefCell<core::option::Option<alloc::boxed::Box<Write>>>,closure,core::result::Result<(), std::io::error::Error>> (local.rs:299)\r\n==9724==    by 0x484AF17: print_to<std::io::stdio::Stdout> (stdio.rs:780)\r\n==9724==    by 0x484AF17: std::io::stdio::_print (stdio.rs:802)\r\n==9724==    by 0x48475A3: print_things (lib.rs:3)\r\n==9724==    by 0x1086CD: main (in /home/proxmox/Projects/test-things/src/test.out)\r\n==9724== \r\n==9724== 1,024 bytes in 1 blocks are still reachable in loss record 7 of 7\r\n==9724==    at 0x483577F: malloc (vg_replace_malloc.c:299)\r\n==9724==    by 0x484A826: alloc (alloc.rs:81)\r\n==9724==    by 0x484A826: alloc (alloc.rs:169)\r\n==9724==    by 0x484A826: allocate_in<u8,alloc::alloc::Global> (raw_vec.rs:95)\r\n==9724==    by 0x484A826: with_capacity<u8> (raw_vec.rs:139)\r\n==9724==    by 0x484A826: with_capacity<u8> (vec.rs:355)\r\n==9724==    by 0x484A826: with_capacity<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>> (buffered.rs:484)\r\n==9724==    by 0x484A826: with_capacity<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>> (buffered.rs:857)\r\n==9724==    by 0x484A826: new<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>> (buffered.rs:836)\r\n==9724==    by 0x484A826: stdout_init (stdio.rs:480)\r\n==9724==    by 0x484A826: init<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>> (lazy.rs:58)\r\n==9724==    by 0x484A826: get<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::buffered::LineWriter<std::io::stdio::Maybe<std::io::stdio::StdoutRaw>>>>> (lazy.rs:34)\r\n==9724==    by 0x484A826: std::io::stdio::stdout (stdio.rs:470)\r\n==9724==    by 0x484AF17: {{closure}}<std::io::stdio::Stdout> (stdio.rs:786)\r\n==9724==    by 0x484AF17: try_with<core::cell::RefCell<core::option::Option<alloc::boxed::Box<Write>>>,closure,core::result::Result<(), std::io::error::Error>> (local.rs:299)\r\n==9724==    by 0x484AF17: print_to<std::io::stdio::Stdout> (stdio.rs:780)\r\n==9724==    by 0x484AF17: std::io::stdio::_print (stdio.rs:802)\r\n==9724==    by 0x48475A3: print_things (lib.rs:3)\r\n==9724==    by 0x1086CD: main (in /home/proxmox/Projects/test-things/src/test.out)\r\n==9724== \r\n==9724== LEAK SUMMARY:\r\n==9724==    definitely lost: 0 bytes in 0 blocks\r\n==9724==    indirectly lost: 0 bytes in 0 blocks\r\n==9724==      possibly lost: 0 bytes in 0 blocks\r\n==9724==    still reachable: 1,200 bytes in 7 blocks\r\n==9724==         suppressed: 0 bytes in 0 blocks\r\n==9724== \r\n==9724== For counts of detected and suppressed errors, rerun with: -v\r\n==9724== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\r\n```",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/523243639/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/524575717",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-524575717",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 524575717,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNDU3NTcxNw==",
    "user": {
      "login": "sebpuetz",
      "id": 30175181,
      "node_id": "MDQ6VXNlcjMwMTc1MTgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/30175181?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sebpuetz",
      "html_url": "https://github.com/sebpuetz",
      "followers_url": "https://api.github.com/users/sebpuetz/followers",
      "following_url": "https://api.github.com/users/sebpuetz/following{/other_user}",
      "gists_url": "https://api.github.com/users/sebpuetz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sebpuetz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sebpuetz/subscriptions",
      "organizations_url": "https://api.github.com/users/sebpuetz/orgs",
      "repos_url": "https://api.github.com/users/sebpuetz/repos",
      "events_url": "https://api.github.com/users/sebpuetz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sebpuetz/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-08-24T19:42:12Z",
    "updated_at": "2019-08-24T19:42:12Z",
    "body": "I'm encountering the same behaviour with Rust -> C -> C++\r\n\r\n```\r\n$ uname -a\r\nLinux seb-desktop 5.0.0-25-generic #26~18.04.1-Ubuntu SMP Thu Aug 1 13:51:02 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\r\n$ g++ --version\r\ng++ (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0\r\n$ rustc --version\r\nrustc 1.37.0 (eae3437df 2019-08-13)\r\n```\r\n\r\n```Rust\r\n#[no_mangle]\r\npub extern \"C\" fn print_something() {\r\neprintln!(\"something\");\r\n}\r\n```\r\n\r\n```Cpp\r\nint main() {\r\n  print_something();\r\n  return 0;\r\n}\r\n```\r\n\r\n```Bash\r\nRUSTFLAGS=\"-g -C opt-level=0\" cargo build\r\ng++ main.cpp -L ./target/debug/ -lfinalfusion_tf -o run -g -O0\r\nvalgrind --leak-check=full --show-leak-kinds=all  --trace-children=yes ./run\r\n```\r\n\r\n```\r\n==975== Memcheck, a memory error detector\r\n==975== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\r\n==975== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info\r\n==975== Command: ./run\r\n==975== \r\nsomething\r\n==975== \r\n==975== HEAP SUMMARY:\r\n==975==     in use at exit: 144 bytes in 6 blocks\r\n==975==   total heap usage: 7 allocs, 1 frees, 176 bytes allocated\r\n==975== \r\n==975== 8 bytes in 1 blocks are still reachable in loss record 1 of 6\r\n==975==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==975==    by 0x4EB0196: alloc (alloc.rs:82)\r\n==975==    by 0x4EB0196: exchange_malloc (alloc.rs:204)\r\n==975==    by 0x4EB0196: new<closure> (boxed.rs:116)\r\n==975==    by 0x4EB0196: at_exit<closure> (mod.rs:117)\r\n==975==    by 0x4EB0196: init<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::stdio::Maybe<std::io::stdio::StderrRaw>>>> (lazy.rs:48)\r\n==975==    by 0x4EB0196: get<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::stdio::Maybe<std::io::stdio::StderrRaw>>>> (lazy.rs:34)\r\n==975==    by 0x4EB0196: std::io::stdio::stderr (stdio.rs:629)\r\n==975==    by 0x4EB0772: {{closure}}<std::io::stdio::Stderr> (stdio.rs:786)\r\n==975==    by 0x4EB0772: try_with<core::cell::RefCell<core::option::Option<alloc::boxed::Box<Write>>>,closure,core::result::Result<(), std::io::error::Error>> (local.rs:257)\r\n==975==    by 0x4EB0772: print_to<std::io::stdio::Stderr> (stdio.rs:780)\r\n==975==    by 0x4EB0772: std::io::stdio::_eprint (stdio.rs:811)\r\n==975==    by 0x4E4A1B3: print_something (embeddings_wrap.rs:147)\r\n==975==    by 0x108662: main (main.cpp:13)\r\n==975== \r\n==975== 8 bytes in 1 blocks are still reachable in loss record 2 of 6\r\n==975==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==975==    by 0x4EB02AD: alloc (alloc.rs:82)\r\n==975==    by 0x4EB02AD: exchange_malloc (alloc.rs:204)\r\n==975==    by 0x4EB02AD: new<alloc::sync::Arc<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::stdio::Maybe<std::io::stdio::StderrRaw>>>>> (boxed.rs:116)\r\n==975==    by 0x4EB02AD: init<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::stdio::Maybe<std::io::stdio::StderrRaw>>>> (lazy.rs:60)\r\n==975==    by 0x4EB02AD: get<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::stdio::Maybe<std::io::stdio::StderrRaw>>>> (lazy.rs:34)\r\n==975==    by 0x4EB02AD: std::io::stdio::stderr (stdio.rs:629)\r\n==975==    by 0x4EB0772: {{closure}}<std::io::stdio::Stderr> (stdio.rs:786)\r\n==975==    by 0x4EB0772: try_with<core::cell::RefCell<core::option::Option<alloc::boxed::Box<Write>>>,closure,core::result::Result<(), std::io::error::Error>> (local.rs:257)\r\n==975==    by 0x4EB0772: print_to<std::io::stdio::Stderr> (stdio.rs:780)\r\n==975==    by 0x4EB0772: std::io::stdio::_eprint (stdio.rs:811)\r\n==975==    by 0x4E4A1B3: print_something (embeddings_wrap.rs:147)\r\n==975==    by 0x108662: main (main.cpp:13)\r\n==975== \r\n==975== 16 bytes in 1 blocks are still reachable in loss record 3 of 6\r\n==975==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==975==    by 0x4EB2105: alloc (alloc.rs:82)\r\n==975==    by 0x4EB2105: alloc (alloc.rs:170)\r\n==975==    by 0x4EB2105: reserve_internal<alloc::boxed::Box<FnOnce<()>>,alloc::alloc::Global> (raw_vec.rs:668)\r\n==975==    by 0x4EB2105: reserve<alloc::boxed::Box<FnOnce<()>>,alloc::alloc::Global> (raw_vec.rs:491)\r\n==975==    by 0x4EB2105: reserve<alloc::boxed::Box<FnOnce<()>>> (vec.rs:457)\r\n==975==    by 0x4EB2105: push<alloc::boxed::Box<FnOnce<()>>> (vec.rs:1102)\r\n==975==    by 0x4EB2105: std::sys_common::at_exit_imp::push (at_exit_imp.rs:69)\r\n==975==    by 0x4EB01B1: at_exit<closure> (mod.rs:117)\r\n==975==    by 0x4EB01B1: init<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::stdio::Maybe<std::io::stdio::StderrRaw>>>> (lazy.rs:48)\r\n==975==    by 0x4EB01B1: get<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::stdio::Maybe<std::io::stdio::StderrRaw>>>> (lazy.rs:34)\r\n==975==    by 0x4EB01B1: std::io::stdio::stderr (stdio.rs:629)\r\n==975==    by 0x4EB0772: {{closure}}<std::io::stdio::Stderr> (stdio.rs:786)\r\n==975==    by 0x4EB0772: try_with<core::cell::RefCell<core::option::Option<alloc::boxed::Box<Write>>>,closure,core::result::Result<(), std::io::error::Error>> (local.rs:257)\r\n==975==    by 0x4EB0772: print_to<std::io::stdio::Stderr> (stdio.rs:780)\r\n==975==    by 0x4EB0772: std::io::stdio::_eprint (stdio.rs:811)\r\n==975==    by 0x4E4A1B3: print_something (embeddings_wrap.rs:147)\r\n==975==    by 0x108662: main (main.cpp:13)\r\n==975== \r\n==975== 24 bytes in 1 blocks are still reachable in loss record 4 of 6\r\n==975==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==975==    by 0x4EB202A: alloc (alloc.rs:82)\r\n==975==    by 0x4EB202A: exchange_malloc (alloc.rs:204)\r\n==975==    by 0x4EB202A: init (at_exit_imp.rs:30)\r\n==975==    by 0x4EB202A: std::sys_common::at_exit_imp::push (at_exit_imp.rs:66)\r\n==975==    by 0x4EB01B1: at_exit<closure> (mod.rs:117)\r\n==975==    by 0x4EB01B1: init<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::stdio::Maybe<std::io::stdio::StderrRaw>>>> (lazy.rs:48)\r\n==975==    by 0x4EB01B1: get<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::stdio::Maybe<std::io::stdio::StderrRaw>>>> (lazy.rs:34)\r\n==975==    by 0x4EB01B1: std::io::stdio::stderr (stdio.rs:629)\r\n==975==    by 0x4EB0772: {{closure}}<std::io::stdio::Stderr> (stdio.rs:786)\r\n==975==    by 0x4EB0772: try_with<core::cell::RefCell<core::option::Option<alloc::boxed::Box<Write>>>,closure,core::result::Result<(), std::io::error::Error>> (local.rs:257)\r\n==975==    by 0x4EB0772: print_to<std::io::stdio::Stderr> (stdio.rs:780)\r\n==975==    by 0x4EB0772: std::io::stdio::_eprint (stdio.rs:811)\r\n==975==    by 0x4E4A1B3: print_something (embeddings_wrap.rs:147)\r\n==975==    by 0x108662: main (main.cpp:13)\r\n==975== \r\n==975== 40 bytes in 1 blocks are still reachable in loss record 5 of 6\r\n==975==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==975==    by 0x4EB01C4: alloc (alloc.rs:82)\r\n==975==    by 0x4EB01C4: exchange_malloc (alloc.rs:204)\r\n==975==    by 0x4EB01C4: new<core::cell::RefCell<std::io::stdio::Maybe<std::io::stdio::StderrRaw>>> (remutex.rs:54)\r\n==975==    by 0x4EB01C4: stderr_init (stdio.rs:639)\r\n==975==    by 0x4EB01C4: init<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::stdio::Maybe<std::io::stdio::StderrRaw>>>> (lazy.rs:58)\r\n==975==    by 0x4EB01C4: get<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::stdio::Maybe<std::io::stdio::StderrRaw>>>> (lazy.rs:34)\r\n==975==    by 0x4EB01C4: std::io::stdio::stderr (stdio.rs:629)\r\n==975==    by 0x4EB0772: {{closure}}<std::io::stdio::Stderr> (stdio.rs:786)\r\n==975==    by 0x4EB0772: try_with<core::cell::RefCell<core::option::Option<alloc::boxed::Box<Write>>>,closure,core::result::Result<(), std::io::error::Error>> (local.rs:257)\r\n==975==    by 0x4EB0772: print_to<std::io::stdio::Stderr> (stdio.rs:780)\r\n==975==    by 0x4EB0772: std::io::stdio::_eprint (stdio.rs:811)\r\n==975==    by 0x4E4A1B3: print_something (embeddings_wrap.rs:147)\r\n==975==    by 0x108662: main (main.cpp:13)\r\n==975== \r\n==975== 48 bytes in 1 blocks are still reachable in loss record 6 of 6\r\n==975==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\r\n==975==    by 0x4EB0243: alloc (alloc.rs:82)\r\n==975==    by 0x4EB0243: exchange_malloc (alloc.rs:204)\r\n==975==    by 0x4EB0243: new<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::stdio::Maybe<std::io::stdio::StderrRaw>>>> (sync.rs:288)\r\n==975==    by 0x4EB0243: stderr_init (stdio.rs:639)\r\n==975==    by 0x4EB0243: init<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::stdio::Maybe<std::io::stdio::StderrRaw>>>> (lazy.rs:58)\r\n==975==    by 0x4EB0243: get<std::sys_common::remutex::ReentrantMutex<core::cell::RefCell<std::io::stdio::Maybe<std::io::stdio::StderrRaw>>>> (lazy.rs:34)\r\n==975==    by 0x4EB0243: std::io::stdio::stderr (stdio.rs:629)\r\n==975==    by 0x4EB0772: {{closure}}<std::io::stdio::Stderr> (stdio.rs:786)\r\n==975==    by 0x4EB0772: try_with<core::cell::RefCell<core::option::Option<alloc::boxed::Box<Write>>>,closure,core::result::Result<(), std::io::error::Error>> (local.rs:257)\r\n==975==    by 0x4EB0772: print_to<std::io::stdio::Stderr> (stdio.rs:780)\r\n==975==    by 0x4EB0772: std::io::stdio::_eprint (stdio.rs:811)\r\n==975==    by 0x4E4A1B3: print_something (embeddings_wrap.rs:147)\r\n==975==    by 0x108662: main (main.cpp:13)\r\n==975== \r\n==975== LEAK SUMMARY:\r\n==975==    definitely lost: 0 bytes in 0 blocks\r\n==975==    indirectly lost: 0 bytes in 0 blocks\r\n==975==      possibly lost: 0 bytes in 0 blocks\r\n==975==    still reachable: 144 bytes in 6 blocks\r\n==975==         suppressed: 0 bytes in 0 blocks\r\n==975== \r\n==975== For counts of detected and suppressed errors, rerun with: -v\r\n==975== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\r\n```",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/524575717/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/596022192",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-596022192",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 596022192,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjAyMjE5Mg==",
    "user": {
      "login": "mal20k",
      "id": 5705000,
      "node_id": "MDQ6VXNlcjU3MDUwMDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5705000?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mal20k",
      "html_url": "https://github.com/mal20k",
      "followers_url": "https://api.github.com/users/mal20k/followers",
      "following_url": "https://api.github.com/users/mal20k/following{/other_user}",
      "gists_url": "https://api.github.com/users/mal20k/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mal20k/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mal20k/subscriptions",
      "organizations_url": "https://api.github.com/users/mal20k/orgs",
      "repos_url": "https://api.github.com/users/mal20k/repos",
      "events_url": "https://api.github.com/users/mal20k/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mal20k/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-03-07T00:44:35Z",
    "updated_at": "2020-03-07T00:44:35Z",
    "body": "Still seeing this in 1.41.1, same test program as my previous comment.\r\n\r\nWhat would be needed to resolve this issue? Is there a workaround that can be done or just avoid using stdout/stderr in Rust code called from C?\r\n\r\n```\r\n$ LD_LIBRARY_PATH=./target/debug/ valgrind ./call_rust\r\n==13954== Memcheck, a memory error detector\r\n==13954== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\r\n==13954== Using Valgrind-3.14.0 and LibVEX; rerun with -h for copyright info\r\n==13954== Command: ./call_rust\r\n==13954==\r\nHello, world!\r\n==13954==\r\n==13954== HEAP SUMMARY:\r\n==13954==     in use at exit: 1,200 bytes in 7 blocks\r\n==13954==   total heap usage: 8 allocs, 1 frees, 1,232 bytes allocated\r\n==13954==\r\n==13954== LEAK SUMMARY:\r\n==13954==    definitely lost: 0 bytes in 0 blocks\r\n==13954==    indirectly lost: 0 bytes in 0 blocks\r\n==13954==      possibly lost: 0 bytes in 0 blocks\r\n==13954==    still reachable: 1,200 bytes in 7 blocks\r\n==13954==         suppressed: 0 bytes in 0 blocks\r\n==13954== Rerun with --leak-check=full to see details of leaked memory\r\n==13954==\r\n==13954== For counts of detected and suppressed errors, rerun with: -v\r\n==13954== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\r\n```",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/596022192/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/596028934",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-596028934",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 596028934,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjAyODkzNA==",
    "user": {
      "login": "sfackler",
      "id": 1455697,
      "node_id": "MDQ6VXNlcjE0NTU2OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfackler",
      "html_url": "https://github.com/sfackler",
      "followers_url": "https://api.github.com/users/sfackler/followers",
      "following_url": "https://api.github.com/users/sfackler/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions",
      "organizations_url": "https://api.github.com/users/sfackler/orgs",
      "repos_url": "https://api.github.com/users/sfackler/repos",
      "events_url": "https://api.github.com/users/sfackler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfackler/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-03-07T01:31:28Z",
    "updated_at": "2020-03-07T01:31:28Z",
    "body": "> Is there a workaround that can be done or just avoid using stdout/stderr in Rust code called from C?\r\n\r\nHow do those 7 allocations negatively impact your program?",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/596028934/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/596176596",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-596176596",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 596176596,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjE3NjU5Ng==",
    "user": {
      "login": "mal20k",
      "id": 5705000,
      "node_id": "MDQ6VXNlcjU3MDUwMDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5705000?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mal20k",
      "html_url": "https://github.com/mal20k",
      "followers_url": "https://api.github.com/users/mal20k/followers",
      "following_url": "https://api.github.com/users/mal20k/following{/other_user}",
      "gists_url": "https://api.github.com/users/mal20k/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mal20k/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mal20k/subscriptions",
      "organizations_url": "https://api.github.com/users/mal20k/orgs",
      "repos_url": "https://api.github.com/users/mal20k/repos",
      "events_url": "https://api.github.com/users/mal20k/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mal20k/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-03-08T07:44:46Z",
    "updated_at": "2020-03-08T07:44:46Z",
    "body": "> How do those 7 allocations negatively impact your program?\r\n\r\nMostly personal curiosity since I don't know a whole lot about what's causing this. But also my company has been considering allowing us to use Rust with our existing C codebase and management tends to focus pretty hard on any kind of memory leak occurring.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/596176596/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/603770213",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-603770213",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 603770213,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMzc3MDIxMw==",
    "user": {
      "login": "taro-yamada",
      "id": 11765802,
      "node_id": "MDQ6VXNlcjExNzY1ODAy",
      "avatar_url": "https://avatars.githubusercontent.com/u/11765802?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/taro-yamada",
      "html_url": "https://github.com/taro-yamada",
      "followers_url": "https://api.github.com/users/taro-yamada/followers",
      "following_url": "https://api.github.com/users/taro-yamada/following{/other_user}",
      "gists_url": "https://api.github.com/users/taro-yamada/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/taro-yamada/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/taro-yamada/subscriptions",
      "organizations_url": "https://api.github.com/users/taro-yamada/orgs",
      "repos_url": "https://api.github.com/users/taro-yamada/repos",
      "events_url": "https://api.github.com/users/taro-yamada/events{/privacy}",
      "received_events_url": "https://api.github.com/users/taro-yamada/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-03-25T10:45:10Z",
    "updated_at": "2020-03-25T10:45:10Z",
    "body": "It seems that when we call println first time, it register a closure to drop the resource at the end of the program.\r\nhttps://github.com/rust-lang/rust/blob/02046a5d402c789c006d0da7662f800fe3c45faf/src/libstd/io/lazy.rs#L43-L53\r\n\r\nIf we call println from normal Rust program, lang_start_internal execute that closure at the end and memory freed.\r\nhttps://github.com/rust-lang/rust/blob/3982d3514efbb65b3efac6bb006b3fa496d16663/src/libstd/rt.rs#L55\r\nhttps://github.com/rust-lang/rust/blob/02046a5d402c789c006d0da7662f800fe3c45faf/src/libstd/sys_common/mod.rs#L130\r\nhttps://github.com/rust-lang/rust/blob/02046a5d402c789c006d0da7662f800fe3c45faf/src/libstd/sys_common/at_exit_imp.rs#L40\r\n\r\nBut if we call it from C program, lang_start_internal will not be executed and registered closures will not be executed too and the resource will be leaked.\r\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/603770213/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/636499275",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-636499275",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 636499275,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNjQ5OTI3NQ==",
    "user": {
      "login": "inancgumus",
      "id": 621232,
      "node_id": "MDQ6VXNlcjYyMTIzMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/621232?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/inancgumus",
      "html_url": "https://github.com/inancgumus",
      "followers_url": "https://api.github.com/users/inancgumus/followers",
      "following_url": "https://api.github.com/users/inancgumus/following{/other_user}",
      "gists_url": "https://api.github.com/users/inancgumus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/inancgumus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/inancgumus/subscriptions",
      "organizations_url": "https://api.github.com/users/inancgumus/orgs",
      "repos_url": "https://api.github.com/users/inancgumus/repos",
      "events_url": "https://api.github.com/users/inancgumus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/inancgumus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-05-31T17:07:30Z",
    "updated_at": "2020-05-31T17:10:40Z",
    "body": "It looks like, this problem is still alive.\r\n\r\n```bash\r\n~/leak \u276f valgrind --version\r\nvalgrind-3.16.0.GIT\r\n```\r\n\r\n```bash\r\n~/leak \u276f rustc --version\r\nrustc 1.33.0\r\n```\r\n\r\n```bash\r\n~/leak \u276f uname -a\r\nDarwin x.local 19.5.0 Darwin Kernel Version 19.5.0: Thu Apr 30 18:25:59 PDT 2020; root:xnu-6153.121.1~7/RELEASE_X86_64 x86_64\r\n```\r\n\r\n```rust\r\n~/leak \u276f cat src/main.rs\r\nfn main() {\r\n    println!(\"Hello World!\");\r\n    println!(\"How are you today\");\r\n}\r\n```\r\n\r\n```bash\r\n~/leak \u276f rustc src/main.rs && valgrind --leak-check=full --show-reachable=yes ./main\r\n==2304== Memcheck, a memory error detector\r\n==2304== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\r\n==2304== Using Valgrind-3.16.0.GIT and LibVEX; rerun with -h for copyright info\r\n==2304== Command: ./main\r\n==2304== \r\nHello World!\r\nHow are you today\r\n==2304== \r\n==2304== HEAP SUMMARY:\r\n==2304==     in use at exit: 14,803 bytes in 163 blocks\r\n==2304==   total heap usage: 191 allocs, 28 frees, 21,036 bytes allocated\r\n==2304== \r\n==2304== 14 bytes in 1 blocks are still reachable in loss record 1 of 38\r\n==2304==    at 0x100157635: malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x1004362AA: __setenv_locked (in /usr/lib/system/libsystem_c.dylib)\r\n==2304==    by 0x1004366A3: setenv (in /usr/lib/system/libsystem_c.dylib)\r\n==2304==    by 0x1006D83E6: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1001637A0: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x10006100A: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x100060F75: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F013: ImageLoader::processInitializers(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F0B3: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)\r\n==2304==    by 0x10004D59F: dyld::initializeMainExecutable() (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 16 bytes in 1 blocks are indirectly lost in loss record 2 of 38\r\n==2304==    at 0x100157E51: malloc_zone_calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10073E29D: copySwiftV1MangledName(char const*, bool) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073DFFC: _getObjc2ProtocolList(header_info const*, unsigned long*) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073C96E: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304== \r\n==2304== 32 bytes in 1 blocks are indirectly lost in loss record 3 of 38\r\n==2304==    at 0x100157635: malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10073E21B: _NXMapMember(_NXMapTable*, void const*, void**) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073DFFC: _getObjc2ProtocolList(header_info const*, unsigned long*) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073C96E: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304== \r\n==2304== 32 bytes in 1 blocks are indirectly lost in loss record 4 of 38\r\n==2304==    at 0x100157635: malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10073E04F: _getObjc2ProtocolList(header_info const*, unsigned long*) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073C96E: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 32 bytes in 1 blocks are definitely lost in loss record 5 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x1007515F3: objc::DenseMap<objc_class*, objc_class*, objc::DenseMapValueInfo<objc_class*>, objc::DenseMapInfo<objc_class*>, objc::detail::DenseMapPair<objc_class*, objc_class*> >::grow(unsigned int) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075169F: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075169F: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073D406: objc_opt::objc_stringhash_t::getIndex(char const*) const (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304== \r\n==2304== 32 bytes in 1 blocks are definitely lost in loss record 6 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x1007515F3: objc::DenseMap<objc_class*, objc_class*, objc::DenseMapValueInfo<objc_class*>, objc::DenseMapInfo<objc_class*>, objc::detail::DenseMapPair<objc_class*, objc_class*> >::grow(unsigned int) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075169F: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075169F: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075169F: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073D406: objc_opt::objc_stringhash_t::getIndex(char const*) const (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304== \r\n==2304== 32 bytes in 1 blocks are definitely lost in loss record 7 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x1007515F3: objc::DenseMap<objc_class*, objc_class*, objc::DenseMapValueInfo<objc_class*>, objc::DenseMapInfo<objc_class*>, objc::detail::DenseMapPair<objc_class*, objc_class*> >::grow(unsigned int) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1007516C6: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075169F: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075169F: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075169F: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073D406: objc_opt::objc_stringhash_t::getIndex(char const*) const (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304== \r\n==2304== 32 bytes in 1 blocks are definitely lost in loss record 8 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x1007515F3: objc::DenseMap<objc_class*, objc_class*, objc::DenseMapValueInfo<objc_class*>, objc::DenseMapInfo<objc_class*>, objc::detail::DenseMapPair<objc_class*, objc_class*> >::grow(unsigned int) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1007516C6: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075169F: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075169F: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073D406: objc_opt::objc_stringhash_t::getIndex(char const*) const (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304== \r\n==2304== 48 bytes in 1 blocks are still reachable in loss record 9 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x100740667: objc_msgSend_stret (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298FEC: _os_object_alloc_realized (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1006D852B: xpc_array_create (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D7F85: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1001637A0: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x10006100A: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x100060F75: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F013: ImageLoader::processInitializers(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F0B3: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 48 bytes in 1 blocks are indirectly lost in loss record 10 of 38\r\n==2304==    at 0x100157E51: malloc_zone_calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10073E5F2: _mapStrIsEqual(_NXMapTable*, void const*, void const*) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073E57C: NXMapInsert (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073E23D: _mapStrHash(_NXMapTable*, void const*) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073DFFC: _getObjc2ProtocolList(header_info const*, unsigned long*) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073C96E: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304== \r\n==2304== 64 bytes in 1 blocks are still reachable in loss record 11 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x1006D859B: _xpc_calloc (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D8542: xpc_array_create (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D7F85: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1001637A0: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x10006100A: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x100060F75: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F013: ImageLoader::processInitializers(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F0B3: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)\r\n==2304==    by 0x10004D59F: dyld::initializeMainExecutable() (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 64 bytes in 1 blocks are still reachable in loss record 12 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x100740667: objc_msgSend_stret (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298FEC: _os_object_alloc_realized (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1006EEB3A: _xpc_pipe_create (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D8614: _xpc_create_bootstrap_pipe (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D832D: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1001637A0: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x10006100A: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x100060F75: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F013: ImageLoader::processInitializers(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 64 bytes in 1 blocks are indirectly lost in loss record 13 of 38\r\n==2304==    at 0x100157635: malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x100435FB5: _owned_ptr_alloc (in /usr/lib/system/libsystem_c.dylib)\r\n==2304==    by 0x100436675: setenv (in /usr/lib/system/libsystem_c.dylib)\r\n==2304==    by 0x1006D83E6: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1001637A0: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x10006100A: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x100060F75: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F013: ImageLoader::processInitializers(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F0B3: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)\r\n==2304==    by 0x10004D59F: dyld::initializeMainExecutable() (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 80 (32 direct, 48 indirect) bytes in 1 blocks are definitely lost in loss record 14 of 38\r\n==2304==    at 0x1001578AA: malloc_zone_malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10073E14F: _NXMapMember(_NXMapTable*, void const*, void**) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073DFFC: _getObjc2ProtocolList(header_info const*, unsigned long*) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073C96E: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304== \r\n==2304== 80 (32 direct, 48 indirect) bytes in 1 blocks are definitely lost in loss record 15 of 38\r\n==2304==    at 0x1001578AA: malloc_zone_malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10073E170: _NXMapMember(_NXMapTable*, void const*, void**) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073DFFC: _getObjc2ProtocolList(header_info const*, unsigned long*) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073C96E: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304== \r\n==2304== 80 (16 direct, 64 indirect) bytes in 1 blocks are definitely lost in loss record 16 of 38\r\n==2304==    at 0x100157635: malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x100435FA3: _owned_ptr_alloc (in /usr/lib/system/libsystem_c.dylib)\r\n==2304==    by 0x100436675: setenv (in /usr/lib/system/libsystem_c.dylib)\r\n==2304==    by 0x1006D83E6: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1001637A0: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x10006100A: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x100060F75: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F013: ImageLoader::processInitializers(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F0B3: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)\r\n==2304==    by 0x10004D59F: dyld::initializeMainExecutable() (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 128 bytes in 1 blocks are definitely lost in loss record 17 of 38\r\n==2304==    at 0x100157635: malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x100316801: tlv_load_notification (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10004F64F: dyld::registerAddCallback(void (*)(mach_header const*, long)) (in /usr/lib/dyld)\r\n==2304==    by 0x100315E7A: _dyld_register_func_for_add_image (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10032E41A: _dyld_initializer (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x100163780: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x10006100A: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x100060F75: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F013: ImageLoader::processInitializers(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F0B3: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 128 bytes in 1 blocks are definitely lost in loss record 18 of 38\r\n==2304==    at 0x100157FD6: realloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10075A752: int sliceRequiresGC<Arch32>(Arch32::mh_t, FileSlice) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073C299: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 128 bytes in 1 blocks are definitely lost in loss record 19 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x100740667: objc_msgSend_stret (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298FEC: _os_object_alloc_realized (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x10029DBC5: _dispatch_lane_create_with_target (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1006A05F5: _libtrace_init (in /usr/lib/system/libsystem_trace.dylib)\r\n==2304==    by 0x1001637B0: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x10006100A: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x100060F75: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F013: ImageLoader::processInitializers(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F0B3: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 128 bytes in 4 blocks are definitely lost in loss record 20 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x1007515F3: objc::DenseMap<objc_class*, objc_class*, objc::DenseMapValueInfo<objc_class*>, objc::DenseMapInfo<objc_class*>, objc::detail::DenseMapPair<objc_class*, objc_class*> >::grow(unsigned int) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075169F: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073D406: objc_opt::objc_stringhash_t::getIndex(char const*) const (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304== \r\n==2304== 128 bytes in 4 blocks are definitely lost in loss record 21 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x1007515F3: objc::DenseMap<objc_class*, objc_class*, objc::DenseMapValueInfo<objc_class*>, objc::DenseMapInfo<objc_class*>, objc::detail::DenseMapPair<objc_class*, objc_class*> >::grow(unsigned int) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1007516C6: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075169F: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073D406: objc_opt::objc_stringhash_t::getIndex(char const*) const (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304== \r\n==2304== 152 bytes in 1 blocks are still reachable in loss record 22 of 38\r\n==2304==    at 0x100157635: malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10032212F: tlv_allocate_and_initialize_for_key (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x100321F67: tlv_get_addr (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10000873E: std::sys_common::thread_info::THREAD_INFO::__getit (cell.rs:249)\r\n==2304==    by 0x1000089AF: <std::thread::local::LocalKey<T>>::with (local.rs:296)\r\n==2304==    by 0x1000027DD: std::rt::lang_start_internal (thread_info.rs:37)\r\n==2304==    by 0x1000018B1: std::rt::lang_start (in ./main)\r\n==2304==    by 0x100001971: main (in ./main)\r\n==2304== \r\n==2304== 252 bytes in 2 blocks are indirectly lost in loss record 23 of 38\r\n==2304==    at 0x100157635: malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x1006D8CA6: _xpc_malloc (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D8B81: _xpc_dictionary_insert (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D8F27: _xpc_dyld_image_callback (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x10004F8DA: dyld::registerBulkLoadCallback(void (*)(unsigned int, mach_header const**, char const**)) (in /usr/lib/dyld)\r\n==2304==    by 0x1006D8DBA: _xpc_collect_images (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D8337: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1001637A0: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x10006100A: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x100060F75: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 288 bytes in 6 blocks are indirectly lost in loss record 24 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x100740667: objc_msgSend_stret (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298FEC: _os_object_alloc_realized (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1006F4D46: _xpc_string_create (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D88CF: xpc_dictionary_set_string (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D8725: _xpc_collect_environment (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D8332: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1001637A0: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x10006100A: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x100060F75: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 300 bytes in 6 blocks are indirectly lost in loss record 25 of 38\r\n==2304==    at 0x100157635: malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x1006D8CA6: _xpc_malloc (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D8B81: _xpc_dictionary_insert (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D88E0: xpc_dictionary_set_string (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D8725: _xpc_collect_environment (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D8332: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1001637A0: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x10006100A: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x100060F75: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F013: ImageLoader::processInitializers(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 348 (96 direct, 252 indirect) bytes in 1 blocks are definitely lost in loss record 26 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x100740667: objc_msgSend_stret (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298FEC: _os_object_alloc_realized (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1006D8877: xpc_dictionary_create (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D8EA2: _xpc_dyld_image_callback (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x10004F8DA: dyld::registerBulkLoadCallback(void (*)(unsigned int, mach_header const**, char const**)) (in /usr/lib/dyld)\r\n==2304==    by 0x1006D8DBA: _xpc_collect_images (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D8337: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1001637A0: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x10006100A: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 352 bytes in 4 blocks are indirectly lost in loss record 27 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10073C049: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 440 (88 direct, 352 indirect) bytes in 1 blocks are definitely lost in loss record 28 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10073C049: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 925 bytes in 6 blocks are indirectly lost in loss record 29 of 38\r\n==2304==    at 0x100157635: malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10042DCE5: strdup (in /usr/lib/system/libsystem_c.dylib)\r\n==2304==    by 0x1006D88FD: xpc_string_create (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D88CF: xpc_dictionary_set_string (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D8725: _xpc_collect_environment (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D8332: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1001637A0: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x10006100A: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x100060F75: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F013: ImageLoader::processInitializers(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 1,536 bytes in 1 blocks are definitely lost in loss record 30 of 38\r\n==2304==    at 0x100157635: malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10073BCBA: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x10006100A: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x100060F75: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F013: ImageLoader::processInitializers(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F0B3: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)\r\n==2304==    by 0x10004D59F: dyld::initializeMainExecutable() (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 1,609 (96 direct, 1,513 indirect) bytes in 1 blocks are definitely lost in loss record 31 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x100740667: objc_msgSend_stret (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298FEC: _os_object_alloc_realized (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1006D8877: xpc_dictionary_create (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D86F9: _xpc_collect_environment (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1006D8332: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)\r\n==2304==    by 0x1001637A0: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x1000665ED: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304==    by 0x10006100A: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x100060F75: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304==    by 0x10005F013: ImageLoader::processInitializers(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 1,632 bytes in 51 blocks are definitely lost in loss record 32 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x1007515F3: objc::DenseMap<objc_class*, objc_class*, objc::DenseMapValueInfo<objc_class*>, objc::DenseMapInfo<objc_class*>, objc::detail::DenseMapPair<objc_class*, objc_class*> >::grow(unsigned int) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073D406: objc_opt::objc_stringhash_t::getIndex(char const*) const (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 1,632 bytes in 51 blocks are definitely lost in loss record 33 of 38\r\n==2304==    at 0x100157C90: calloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x1007515F3: objc::DenseMap<objc_class*, objc_class*, objc::DenseMapValueInfo<objc_class*>, objc::DenseMapInfo<objc_class*>, objc::detail::DenseMapPair<objc_class*, objc_class*> >::grow(unsigned int) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1007516C6: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073D406: objc_opt::objc_stringhash_t::getIndex(char const*) const (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304== \r\n==2304== 2,048 bytes in 1 blocks are still reachable in loss record 34 of 38\r\n==2304==    at 0x100157635: malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x100757E95: class_setWeakIvarLayout (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100757E26: class_setWeakIvarLayout (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075BBF9: _objc_atfork_parent (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100749742: property_copyAttributeList (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073F1E7: NXMapRemove (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100751BD2: attachCategories(objc_class*, locstamped_category_t const*, unsigned int, int) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1007516C6: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075169F: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075169F: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10075169F: objc_class::mangledName() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073D406: objc_opt::objc_stringhash_t::getIndex(char const*) const (in /usr/lib/libobjc.A.dylib)\r\n==2304== \r\n==2304== 2,064 bytes in 1 blocks are indirectly lost in loss record 35 of 38\r\n==2304==    at 0x1001578AA: malloc_zone_malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10073E0B5: getProtocol(char const*) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073C96E: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== 2,064 bytes in 1 blocks are indirectly lost in loss record 36 of 38\r\n==2304==    at 0x1001578AA: malloc_zone_malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10073F01E: NXMapRemove (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073EEA5: search_method_list(method_list_t const*, objc_selector*) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073D0DD: _getObjc2MessageRefs(header_info const*, unsigned long*) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304== \r\n==2304== 2,088 (24 direct, 2,064 indirect) bytes in 1 blocks are definitely lost in loss record 37 of 38\r\n==2304==    at 0x1001578AA: malloc_zone_malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10073DFCC: protocols() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073E959: prepareMethodLists(objc_class*, method_list_t**, int, bool, bool) (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073CEF6: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304== \r\n==2304== 2,120 (24 direct, 2,096 indirect) bytes in 1 blocks are definitely lost in loss record 38 of 38\r\n==2304==    at 0x1001578AA: malloc_zone_malloc (in /usr/local/Cellar/valgrind/HEAD-36f444c/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\r\n==2304==    by 0x10073DFCC: protocols() (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10073C96E: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x10074D2D0: unmap_image (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x1000505A5: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\r\n==2304==    by 0x100050746: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\r\n==2304==    by 0x100316AD0: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\r\n==2304==    by 0x10073BDAF: map_images_nolock (in /usr/lib/libobjc.A.dylib)\r\n==2304==    by 0x100298F38: _os_object_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x1002A50E7: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\r\n==2304==    by 0x100163790: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\r\n==2304==    by 0x1000661E2: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)\r\n==2304== \r\n==2304== LEAK SUMMARY:\r\n==2304==    definitely lost: 5,976 bytes in 126 blocks\r\n==2304==    indirectly lost: 6,437 bytes in 31 blocks\r\n==2304==      possibly lost: 0 bytes in 0 blocks\r\n==2304==    still reachable: 2,390 bytes in 6 blocks\r\n==2304==         suppressed: 0 bytes in 0 blocks\r\n==2304== \r\n==2304== For lists of detected and suppressed errors, rerun with: -s\r\n==2304== ERROR SUMMARY: 20 errors from 20 contexts (suppressed: 1 from 1)\r\n~/leak \u276f \r\n```",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/636499275/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 2,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/935215832",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-935215832",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 935215832,
    "node_id": "IC_kwDOAAsO6M43vkLY",
    "user": {
      "login": "workingjubilee",
      "id": 46493976,
      "node_id": "MDQ6VXNlcjQ2NDkzOTc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46493976?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/workingjubilee",
      "html_url": "https://github.com/workingjubilee",
      "followers_url": "https://api.github.com/users/workingjubilee/followers",
      "following_url": "https://api.github.com/users/workingjubilee/following{/other_user}",
      "gists_url": "https://api.github.com/users/workingjubilee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/workingjubilee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/workingjubilee/subscriptions",
      "organizations_url": "https://api.github.com/users/workingjubilee/orgs",
      "repos_url": "https://api.github.com/users/workingjubilee/repos",
      "events_url": "https://api.github.com/users/workingjubilee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/workingjubilee/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2021-10-06T01:30:15Z",
    "updated_at": "2021-10-06T01:30:32Z",
    "body": "Is this report about leakages that could lead to unconstrained memory usage or just memory that was allocated for the entire lifespan of the process on purpose? Based on what I have been reading, Valgrind does not fully differentiate between the two, and only seems to sense bytes that have not been deliberately cleaned up at the end, but we should expect perpetual allocation in some cases, and that leaving it to the system can actually be better than bothering to run a destructor if the destructor was trivial, thus consuming active program cycles before termination even when it would be equally safe to leave it to the system. Even OWASP mentions [this is not a problem in short-lived userland applications](https://owasp.org/www-community/vulnerabilities/Memory_leak).\r\n\r\nAccording to the [Valgrind FAQ](https://www.valgrind.org/docs/manual/faq.html), for the \"still reachable\" reports:\r\n>    \"still reachable\" means your program is probably ok -- it didn't free some memory it could have. This is quite common and often reasonable. Don't use --show-reachable=yes if you don't want to see these reports.\r\n>\r\n>    \"suppressed\" means that a leak error has been suppressed. There are some suppressions in the default suppression files. You can ignore suppressed errors.\r\n\r\nI am puzzled by the last report here, since it is actually quite severe by comparison, but it seems all the leaks detected are actually inside MacOS libraries and thus things we cannot do much about.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/935215832/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1776097853",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-1776097853",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 1776097853,
    "node_id": "IC_kwDOAAsO6M5p3Ro9",
    "user": {
      "login": "istankovic",
      "id": 1312091,
      "node_id": "MDQ6VXNlcjEzMTIwOTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1312091?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/istankovic",
      "html_url": "https://github.com/istankovic",
      "followers_url": "https://api.github.com/users/istankovic/followers",
      "following_url": "https://api.github.com/users/istankovic/following{/other_user}",
      "gists_url": "https://api.github.com/users/istankovic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/istankovic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/istankovic/subscriptions",
      "organizations_url": "https://api.github.com/users/istankovic/orgs",
      "repos_url": "https://api.github.com/users/istankovic/repos",
      "events_url": "https://api.github.com/users/istankovic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/istankovic/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-10-23T22:07:25Z",
    "updated_at": "2023-10-23T22:07:25Z",
    "body": "Seems there are no leaks on my 64-bit Linux machine with rustc 1.75.0-nightly (249624b50 2023-10-20):\r\n```\r\n$ valgrind --leak-check=full --show-reachable=yes ./a        \r\n==19775== Memcheck, a memory error detector                                 \r\n==19775== Copyright (C) 2002-2022, and GNU GPL'd, by Julian Seward et al.   \r\n==19775== Using Valgrind-3.21.0 and LibVEX; rerun with -h for copyright info\r\n==19775== Command: ./a                                                      \r\n==19775==                                                                   \r\nHello World!                                                                \r\nHow are you today                                                           \r\n==19775==                                                                   \r\n==19775== HEAP SUMMARY:                                                     \r\n==19775==     in use at exit: 0 bytes in 0 blocks                           \r\n==19775==   total heap usage: 11 allocs, 11 frees, 3,181 bytes allocated    \r\n==19775==                                                                   \r\n==19775== All heap blocks were freed -- no leaks are possible               \r\n==19775==                                                                   \r\n==19775== For lists of detected and suppressed errors, rerun with: -s       \r\n==19775== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)    \r\n```\r\n\r\n@inancgumus would you be willing to test once more on your machine with nightly rustc?",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1776097853/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1776111888",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-1776111888",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 1776111888,
    "node_id": "IC_kwDOAAsO6M5p3VEQ",
    "user": {
      "login": "mati865",
      "id": 1174646,
      "node_id": "MDQ6VXNlcjExNzQ2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1174646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mati865",
      "html_url": "https://github.com/mati865",
      "followers_url": "https://api.github.com/users/mati865/followers",
      "following_url": "https://api.github.com/users/mati865/following{/other_user}",
      "gists_url": "https://api.github.com/users/mati865/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mati865/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mati865/subscriptions",
      "organizations_url": "https://api.github.com/users/mati865/orgs",
      "repos_url": "https://api.github.com/users/mati865/repos",
      "events_url": "https://api.github.com/users/mati865/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mati865/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-10-23T22:19:43Z",
    "updated_at": "2023-10-23T22:19:43Z",
    "body": "I think Valgrind version might be more important than Rustc version.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1776111888/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1776113161",
    "html_url": "https://github.com/rust-lang/rust/issues/19776#issuecomment-1776113161",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/19776",
    "id": 1776113161,
    "node_id": "IC_kwDOAAsO6M5p3VYJ",
    "user": {
      "login": "workingjubilee",
      "id": 46493976,
      "node_id": "MDQ6VXNlcjQ2NDkzOTc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46493976?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/workingjubilee",
      "html_url": "https://github.com/workingjubilee",
      "followers_url": "https://api.github.com/users/workingjubilee/followers",
      "following_url": "https://api.github.com/users/workingjubilee/following{/other_user}",
      "gists_url": "https://api.github.com/users/workingjubilee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/workingjubilee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/workingjubilee/subscriptions",
      "organizations_url": "https://api.github.com/users/workingjubilee/orgs",
      "repos_url": "https://api.github.com/users/workingjubilee/repos",
      "events_url": "https://api.github.com/users/workingjubilee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/workingjubilee/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-10-23T22:20:52Z",
    "updated_at": "2023-10-23T22:20:52Z",
    "body": "Thank you @istankovic.\r\n\r\nThen, considering also what @mati865 said, I think it is safe to close this.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1776113161/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
