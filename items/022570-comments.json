[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/277545950",
    "html_url": "https://github.com/rust-lang/rust/issues/22570#issuecomment-277545950",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22570",
    "id": 277545950,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzU0NTk1MA==",
    "user": {
      "login": "tsezgin",
      "id": 1861150,
      "node_id": "MDQ6VXNlcjE4NjExNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1861150?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tsezgin",
      "html_url": "https://github.com/tsezgin",
      "followers_url": "https://api.github.com/users/tsezgin/followers",
      "following_url": "https://api.github.com/users/tsezgin/following{/other_user}",
      "gists_url": "https://api.github.com/users/tsezgin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tsezgin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tsezgin/subscriptions",
      "organizations_url": "https://api.github.com/users/tsezgin/orgs",
      "repos_url": "https://api.github.com/users/tsezgin/repos",
      "events_url": "https://api.github.com/users/tsezgin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tsezgin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-02-05T20:18:18Z",
    "updated_at": "2017-02-05T20:18:18Z",
    "body": "Hi Grzegorz, \r\nI hit the same problem recently, and I wonder what made you convinced that this is not a valid issue.\r\nAlthought It seems to be the expected behaviour, I'm not convinced that it is the correct behaviour.\r\nI have not encountered such behaviour in other languages such as (C++, Java, C#). \r\nAnd, how did you handle this issue in your application? a wrapper method?\r\nthanks. \r\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/277545950/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/277584663",
    "html_url": "https://github.com/rust-lang/rust/issues/22570#issuecomment-277584663",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22570",
    "id": 277584663,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzU4NDY2Mw==",
    "user": {
      "login": "antekone",
      "id": 1664036,
      "node_id": "MDQ6VXNlcjE2NjQwMzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1664036?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/antekone",
      "html_url": "https://github.com/antekone",
      "followers_url": "https://api.github.com/users/antekone/followers",
      "following_url": "https://api.github.com/users/antekone/following{/other_user}",
      "gists_url": "https://api.github.com/users/antekone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/antekone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/antekone/subscriptions",
      "organizations_url": "https://api.github.com/users/antekone/orgs",
      "repos_url": "https://api.github.com/users/antekone/repos",
      "events_url": "https://api.github.com/users/antekone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/antekone/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-02-06T04:32:49Z",
    "updated_at": "2017-02-06T04:35:23Z",
    "body": "IIRC, it was mostly due to a comment I've received on a different site. I've made [this thread](https://www.reddit.com/r/rust/comments/2wjaqa/strange_behaviour_of_bufreader_and_offset_65536/) on Reddit. The comment from burntsushi made an interesting reply implying `read()` is too low-level to do any buffering by its own. Also the documentation of `read()` says, that it just \"pulls some bytes from the source, returning number of bytes actually read\". This convinced me that this indeed is designed behavior (I didn't like it as well).\r\n\r\nCurrently `BufReader` [implements](https://doc.rust-lang.org/std/io/trait.Read.html#method.read_exact) functions like `read_exact()` and `read_to_end()`, have you tried these?",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/277584663/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/277710356",
    "html_url": "https://github.com/rust-lang/rust/issues/22570#issuecomment-277710356",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22570",
    "id": 277710356,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzcxMDM1Ng==",
    "user": {
      "login": "tsezgin",
      "id": 1861150,
      "node_id": "MDQ6VXNlcjE4NjExNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1861150?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tsezgin",
      "html_url": "https://github.com/tsezgin",
      "followers_url": "https://api.github.com/users/tsezgin/followers",
      "following_url": "https://api.github.com/users/tsezgin/following{/other_user}",
      "gists_url": "https://api.github.com/users/tsezgin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tsezgin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tsezgin/subscriptions",
      "organizations_url": "https://api.github.com/users/tsezgin/orgs",
      "repos_url": "https://api.github.com/users/tsezgin/repos",
      "events_url": "https://api.github.com/users/tsezgin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tsezgin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-02-06T15:08:26Z",
    "updated_at": "2017-02-06T15:08:26Z",
    "body": "I had seen read_exact() and read_to_end() functions in the documentation, but had preferred using read(). Now, reading your suggestion, I switched to read_exact() and my application works properly.\r\n\r\nBut I'm still not convinced about BufReader::read() behaviour, when backend is a File, because it changes behaviour observed by the application.\r\n\r\nIn my case, initially I started with using File::read(), and the application worked as expected. \r\nmy buffer was always filled, except the last read(), which is EOF case.\r\n\r\nThen, just to improve the IO performance, I wrapped the File object with BufReader, and the behaviour of the application has changed. I received partial fills although there are more data in the file.\r\nI would expect such behaviour while reading from from a TCP socket.\r\nBut while reading from a file, I would expect BufReader to return full buffers. (by properly refilling its internal buffer).\r\nI believe, Java and C# buffered readers behave this way, without needing a separate read_exact() method.\r\nAnyway, thanks again for your explanations and quick response.\r\n\r\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/277710356/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
