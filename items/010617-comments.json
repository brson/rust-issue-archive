[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29192227",
    "html_url": "https://github.com/rust-lang/rust/issues/10617#issuecomment-29192227",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10617",
    "id": 29192227,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTkyMjI3",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-25T10:46:58Z",
    "updated_at": "2013-11-25T10:46:58Z",
    "body": "I agree, this error is obsolete -- the concern was code clarity. This used to be called #2152 (but I see we closed that). I think all we have to do is just remove the error in borrowck and everything else will work just fine.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/29192227/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32286878",
    "html_url": "https://github.com/rust-lang/rust/issues/10617#issuecomment-32286878",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10617",
    "id": 32286878,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMjg2ODc4",
    "user": {
      "login": "nickdesaulniers",
      "id": 1823839,
      "node_id": "MDQ6VXNlcjE4MjM4Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1823839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nickdesaulniers",
      "html_url": "https://github.com/nickdesaulniers",
      "followers_url": "https://api.github.com/users/nickdesaulniers/followers",
      "following_url": "https://api.github.com/users/nickdesaulniers/following{/other_user}",
      "gists_url": "https://api.github.com/users/nickdesaulniers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nickdesaulniers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nickdesaulniers/subscriptions",
      "organizations_url": "https://api.github.com/users/nickdesaulniers/orgs",
      "repos_url": "https://api.github.com/users/nickdesaulniers/repos",
      "events_url": "https://api.github.com/users/nickdesaulniers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nickdesaulniers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-14T17:30:54Z",
    "updated_at": "2014-01-14T19:29:25Z",
    "body": "@nikomatsakis , see the comments in [this](https://github.com/mozilla/rust/blob/206ab89629298cc9f4b6fb0aa1cd7556c65b5bfe/src/test/compile-fail/kindck-implicit-close-over-mut-var.rs#L16-L40) test case.  If you still believe it's ok, I'll remove that test case, and [this branch of the match](https://github.com/mozilla/rust/blob/119c6141f568b8b5bca141b24d3cbd3e1aacb2c7/src/librustc/middle/kind.rs#L455).  Note how in the test, the shadow copied var is not mutable, which is the whole point (to be able to move mutable variables into a closure).\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32286878/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32331169",
    "html_url": "https://github.com/rust-lang/rust/issues/10617#issuecomment-32331169",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10617",
    "id": 32331169,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyMzMxMTY5",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-15T03:10:25Z",
    "updated_at": "2014-01-15T03:10:25Z",
    "body": "@nickdesaulniers I think it's ok -- there is a potential hazard, if people don't realize the counter is being copied, but c'est la vie. I toyed with suggesting that procs _always_ move or something like that but I think it's more consistent to just say that they move/copy in the usual way at the time of their creation.\n\nNote: it'd be good to test whether you can re-assign the variable in the proc as well. I imagine that should be legal (obviously it'll modify the proc's copy).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32331169/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32406897",
    "html_url": "https://github.com/rust-lang/rust/issues/10617#issuecomment-32406897",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10617",
    "id": 32406897,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDA2ODk3",
    "user": {
      "login": "nickdesaulniers",
      "id": 1823839,
      "node_id": "MDQ6VXNlcjE4MjM4Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1823839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nickdesaulniers",
      "html_url": "https://github.com/nickdesaulniers",
      "followers_url": "https://api.github.com/users/nickdesaulniers/followers",
      "following_url": "https://api.github.com/users/nickdesaulniers/following{/other_user}",
      "gists_url": "https://api.github.com/users/nickdesaulniers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nickdesaulniers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nickdesaulniers/subscriptions",
      "organizations_url": "https://api.github.com/users/nickdesaulniers/orgs",
      "repos_url": "https://api.github.com/users/nickdesaulniers/repos",
      "events_url": "https://api.github.com/users/nickdesaulniers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nickdesaulniers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-15T19:39:53Z",
    "updated_at": "2014-01-15T19:39:53Z",
    "body": "> Note: it'd be good to test whether you can re-assign the variable in the proc as well. I imagine that should be legal (obviously it'll modify the proc's copy).\n\n@nikomatsakis , it looks like the proc's copy does not have the same mutability as the closed over var.  For example:\n\n``` rust\nfn foo() {\n  let mut i = 0;\n    do task::spawn {\n      i += 1; // fails here\n      some_func(i);\n      println!(\"spawned {}\", i)\n    }\n    i += 1;\n    println!(\"original {}\", i)\n}\n```\n\nwill fail to compile complaining that: `cannot assign to immutable captured outer variable in a heap closure`.  It will work if within the closure, you say `let mut i = i;`  Is this something that should be fixed?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32406897/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32595625",
    "html_url": "https://github.com/rust-lang/rust/issues/10617#issuecomment-32595625",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10617",
    "id": 32595625,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTk1NjI1",
    "user": {
      "login": "nmsmith",
      "id": 909604,
      "node_id": "MDQ6VXNlcjkwOTYwNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/909604?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nmsmith",
      "html_url": "https://github.com/nmsmith",
      "followers_url": "https://api.github.com/users/nmsmith/followers",
      "following_url": "https://api.github.com/users/nmsmith/following{/other_user}",
      "gists_url": "https://api.github.com/users/nmsmith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nmsmith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nmsmith/subscriptions",
      "organizations_url": "https://api.github.com/users/nmsmith/orgs",
      "repos_url": "https://api.github.com/users/nmsmith/repos",
      "events_url": "https://api.github.com/users/nmsmith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nmsmith/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-17T10:41:22Z",
    "updated_at": "2014-01-17T10:45:06Z",
    "body": "I agree this needs to be fixed. For types that are moved/copied anyway, it makes no difference whether they are mutable or not when they are taken by a proc. It might stop newcomers from accidentally copying a variable, but I think it's over-the-top to make it an error for everyone if that is the only reason for making it forbidden. Speaking from experience, those error messages only make procs <i> harder </i> to understand.\n\nAnd it looks like @nickdesaulniers has brought up another issue that should probably also be addressed.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32595625/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32654850",
    "html_url": "https://github.com/rust-lang/rust/issues/10617#issuecomment-32654850",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10617",
    "id": 32654850,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjU0ODUw",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-17T22:16:14Z",
    "updated_at": "2014-01-17T22:16:14Z",
    "body": "On Wed, Jan 15, 2014 at 11:39:58AM -0800, Nick Desaulniers wrote:\n\n> Is this something that should be fixed?\n\nProbably. I guess it's no loss of expressiveness, as one can always\nwrite `let mut x = x` inside the proc. But I'm not sure there's a good\nreason to prevent mutation.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32654850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32659735",
    "html_url": "https://github.com/rust-lang/rust/issues/10617#issuecomment-32659735",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10617",
    "id": 32659735,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjU5NzM1",
    "user": {
      "login": "nickdesaulniers",
      "id": 1823839,
      "node_id": "MDQ6VXNlcjE4MjM4Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1823839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nickdesaulniers",
      "html_url": "https://github.com/nickdesaulniers",
      "followers_url": "https://api.github.com/users/nickdesaulniers/followers",
      "following_url": "https://api.github.com/users/nickdesaulniers/following{/other_user}",
      "gists_url": "https://api.github.com/users/nickdesaulniers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nickdesaulniers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nickdesaulniers/subscriptions",
      "organizations_url": "https://api.github.com/users/nickdesaulniers/orgs",
      "repos_url": "https://api.github.com/users/nickdesaulniers/repos",
      "events_url": "https://api.github.com/users/nickdesaulniers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nickdesaulniers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-17T22:49:13Z",
    "updated_at": "2014-01-17T22:49:13Z",
    "body": "ok then I think that this should be two separate issues (one for the two issues @alexcrichton 's code example shows):\n1. cannot borrow immutable captured outer variable in a heap closure as mutable\n2. mutable variables cannot be implicitly captured\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32659735/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32660320",
    "html_url": "https://github.com/rust-lang/rust/issues/10617#issuecomment-32660320",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10617",
    "id": 32660320,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNjYwMzIw",
    "user": {
      "login": "nickdesaulniers",
      "id": 1823839,
      "node_id": "MDQ6VXNlcjE4MjM4Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1823839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nickdesaulniers",
      "html_url": "https://github.com/nickdesaulniers",
      "followers_url": "https://api.github.com/users/nickdesaulniers/followers",
      "following_url": "https://api.github.com/users/nickdesaulniers/following{/other_user}",
      "gists_url": "https://api.github.com/users/nickdesaulniers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nickdesaulniers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nickdesaulniers/subscriptions",
      "organizations_url": "https://api.github.com/users/nickdesaulniers/orgs",
      "repos_url": "https://api.github.com/users/nickdesaulniers/repos",
      "events_url": "https://api.github.com/users/nickdesaulniers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nickdesaulniers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-17T22:51:45Z",
    "updated_at": "2014-01-17T23:58:04Z",
    "body": "Not sure yet how to tackle the second part.\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/32660320/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33029301",
    "html_url": "https://github.com/rust-lang/rust/issues/10617#issuecomment-33029301",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10617",
    "id": 33029301,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDI5MzAx",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-22T14:49:40Z",
    "updated_at": "2014-01-22T14:49:40Z",
    "body": "@nickdesaulniers I'm not sure I understand your division into 2 parts. I guess you mean (1) cannot capture mutable variables in a proc and (2) captured mutable variables are not themselves mutable? I can help you with (2)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33029301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33441575",
    "html_url": "https://github.com/rust-lang/rust/issues/10617#issuecomment-33441575",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10617",
    "id": 33441575,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDQxNTc1",
    "user": {
      "login": "nickdesaulniers",
      "id": 1823839,
      "node_id": "MDQ6VXNlcjE4MjM4Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1823839?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nickdesaulniers",
      "html_url": "https://github.com/nickdesaulniers",
      "followers_url": "https://api.github.com/users/nickdesaulniers/followers",
      "following_url": "https://api.github.com/users/nickdesaulniers/following{/other_user}",
      "gists_url": "https://api.github.com/users/nickdesaulniers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nickdesaulniers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nickdesaulniers/subscriptions",
      "organizations_url": "https://api.github.com/users/nickdesaulniers/orgs",
      "repos_url": "https://api.github.com/users/nickdesaulniers/repos",
      "events_url": "https://api.github.com/users/nickdesaulniers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nickdesaulniers/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-01-28T01:01:29Z",
    "updated_at": "2014-01-28T01:02:04Z",
    "body": "@alexcrichton : [r?](https://github.com/nickdesaulniers/rust/commit/b932b38b04960d1839494c41675f58986f67228c)\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33441575/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
