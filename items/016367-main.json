{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/16367",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16367/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16367/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16367/events",
  "html_url": "https://github.com/rust-lang/rust/pull/16367",
  "id": 39865048,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTk1NTMxNTQ=",
  "number": 16367,
  "title": "parallelize LLVM optimization and codegen passes",
  "user": {
    "login": "spernsteiner",
    "id": 3031136,
    "node_id": "MDQ6VXNlcjMwMzExMzY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3031136?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/spernsteiner",
    "html_url": "https://github.com/spernsteiner",
    "followers_url": "https://api.github.com/users/spernsteiner/followers",
    "following_url": "https://api.github.com/users/spernsteiner/following{/other_user}",
    "gists_url": "https://api.github.com/users/spernsteiner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/spernsteiner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/spernsteiner/subscriptions",
    "organizations_url": "https://api.github.com/users/spernsteiner/orgs",
    "repos_url": "https://api.github.com/users/spernsteiner/repos",
    "events_url": "https://api.github.com/users/spernsteiner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/spernsteiner/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 28,
  "created_at": "2014-08-08T21:34:51Z",
  "updated_at": "2014-09-17T16:02:59Z",
  "closed_at": "2014-09-06T07:46:32Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/16367",
    "html_url": "https://github.com/rust-lang/rust/pull/16367",
    "diff_url": "https://github.com/rust-lang/rust/pull/16367.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/16367.patch",
    "merged_at": "2014-09-06T07:46:35Z"
  },
  "body": "This branch adds support for running LLVM optimization and codegen on different parts of a crate in parallel.  Instead of translating the crate into a single LLVM compilation unit, `rustc` now distributes items in the crate among several compilation units, and spawns worker threads to optimize and codegen each compilation unit independently.  This improves compile times on multicore machines, at the cost of worse performance in the compiled code.  The intent is to speed up build times during development without sacrificing too much optimization.\n\nOn the machine I tested this on, `librustc` build time with `-O` went from 265 seconds (master branch, single-threaded) to 115s (this branch, with 4 threads), a speedup of 2.3x.  For comparison, the build time without `-O` was 90s (single-threaded).  Bootstrapping `rustc` using 4 threads gets a 1.6x speedup over the default settings (870s vs. 1380s), and building `librustc` with the resulting stage2 compiler takes 1.3x as long as the master branch (44s vs.  55s, single threaded, ignoring time spent in LLVM codegen).\n\nThe user-visible changes from this branch are two new codegen flags:\n- `-C codegen-units=N`: Distribute items across `N` compilation units.\n- `-C codegen-threads=N`: Spawn `N` worker threads for running optimization and codegen.  (It is possible to set `codegen-threads` larger than `codegen-units`, but this is not very useful.)\n\nInternal changes to the compiler are described in detail on the individual commit messages.\n\nNote: The first commit on this branch is copied from #16359, which this branch depends on.\n\nr? @nick29581\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/16367/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 1,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16367/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
