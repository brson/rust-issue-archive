[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19076699",
    "html_url": "https://github.com/rust-lang/rust/pull/6979#issuecomment-19076699",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6979",
    "id": 19076699,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MDc2Njk5",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-06T21:51:22Z",
    "updated_at": "2013-06-06T21:51:35Z",
    "body": "r-. I don't understand the motivation here. There's no harm in having these available. Furthermore, we should not be counting on llvm to 'generate calls to libc when appropriate'. It is essentially never appropriate for llvm to emit foreign function calls on its own because Rust has special requirements dealing with stack growth. If LLVM is doing this for memcpy and friends then we should stop it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19076699/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19076933",
    "html_url": "https://github.com/rust-lang/rust/pull/6979#issuecomment-19076933",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6979",
    "id": 19076933,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MDc2OTMz",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-06T21:55:46Z",
    "updated_at": "2013-06-06T21:56:13Z",
    "body": "@brson: it's doing it for memcpy, memmove, memset, fmod, and likely others and I don't think it can be stopped. We could provide our own implementation of the standard C library (at least those functions).\n\nThe reasoning behind removing them is that they should never be used directly - LLVM will make a performance decision about generating code or a call with the intrinsic, and it gives it good alignment information.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19076933/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19077011",
    "html_url": "https://github.com/rust-lang/rust/pull/6979#issuecomment-19077011",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6979",
    "id": 19077011,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MDc3MDEx",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-06T21:56:47Z",
    "updated_at": "2013-06-06T21:56:47Z",
    "body": "Urgh. I can kind of see why you would want this and why it's ok for LLVM to emit calls to these (they are already #[rust_stack]), but I strongly think we should be in control of all the FFI calls and not let LLVM do those transformations. Foreign calls emitted directly by LLVM have bitten us before.\n\nLeaving three of the most common libc functions out of the libc module seems surprising. Maybe we could redefine them to use the appropraite rust functions, in turn delegating to the intrinsics.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19077011/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19077848",
    "html_url": "https://github.com/rust-lang/rust/pull/6979#issuecomment-19077848",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6979",
    "id": 19077848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MDc3ODQ4",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-06-06T22:12:55Z",
    "updated_at": "2013-06-06T22:12:55Z",
    "body": "@brson: perhaps we could just document that equivalent functions are in the `ptr` module, they're better because they work on chunks aligned to the type and not bytes even without being fully inlined to where they can see the type's allocation on the heap/stack\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/19077848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
