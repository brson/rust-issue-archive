[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/107141515",
    "html_url": "https://github.com/rust-lang/rust/issues/25916#issuecomment-107141515",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25916",
    "id": 107141515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNzE0MTUxNQ==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-31T07:48:20Z",
    "updated_at": "2015-05-31T17:25:53Z",
    "body": "This must be what's making my old macro-abusing inflate implementation take almost 300 seconds in typeck.\nIt almost sounds like type-checking a function is quadratic over the number of inference variables.\n\nHaving ran callgrind on the sample and also half of it, I'm seeing the following trace:\n\n| Function | Calls (N=128) | Calls (N=256) | Calls (N) |\n| --- | --- | --- | --- |\n| [check::op::check_binop](https://github.com/rust-lang/rust/blob/243e85f393a9e4527d814ecc9dfe23d2e3f9c737/src/librustc_typeck/check/op.rs#L84) | 128 | 256 | N |\n| [check::FnCtxt::resolve_type_vars_if_possible](https://github.com/rust-lang/rust/blob/243e85f393a9e4527d814ecc9dfe23d2e3f9c737/src/librustc_typeck/check/mod.rs#L1325) | 512 | 1024 | 4N |\n| [check::FnCtxt::select_obligations_where_possible](https://github.com/rust-lang/rust/blob/243e85f393a9e4527d814ecc9dfe23d2e3f9c737/src/librustc_typeck/check/mod.rs#L1861) | 512 + 12 | 1024 + 12 | 4N + 12 |\n| [traits::FulfillmentContext::select_where_possible](https://github.com/rust-lang/rust/blob/243e85f393a9e4527d814ecc9dfe23d2e3f9c737/src/librustc/middle/traits/fulfill.rs#L227) | 512 + 27 | 1024 + 27 | 4N + 27 |\n| traits::FulfillmentContext::select | 1024 + 155 | 2048 + 183 | 8N + M |\n| infer::InferCtxt::commit_if_ok | 83072 | 329984 | 5N\u00b2 + 9N |\n\nAn unrefined conclusion is that either `check_binop` shouldn't call `fcx.resolve_type_vars_if_possible()` or `FulfillmentContext::select` should be constant-time.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/107141515/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/107142310",
    "html_url": "https://github.com/rust-lang/rust/issues/25916#issuecomment-107142310",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25916",
    "id": 107142310,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNzE0MjMxMA==",
    "user": {
      "login": "bluss",
      "id": 3209739,
      "node_id": "MDQ6VXNlcjMyMDk3Mzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bluss",
      "html_url": "https://github.com/bluss",
      "followers_url": "https://api.github.com/users/bluss/followers",
      "following_url": "https://api.github.com/users/bluss/following{/other_user}",
      "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bluss/subscriptions",
      "organizations_url": "https://api.github.com/users/bluss/orgs",
      "repos_url": "https://api.github.com/users/bluss/repos",
      "events_url": "https://api.github.com/users/bluss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bluss/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-31T08:13:09Z",
    "updated_at": "2015-05-31T08:13:09Z",
    "body": "Is this the same issue as #23977?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/107142310/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/107143108",
    "html_url": "https://github.com/rust-lang/rust/issues/25916#issuecomment-107143108",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25916",
    "id": 107143108,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNzE0MzEwOA==",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-31T08:19:29Z",
    "updated_at": "2015-05-31T08:20:11Z",
    "body": "@nikomatsakis I'm not too familiar with fulfill and infer, but couldn't `select_where_possible` track the latest `InferCtxt` snapshot it processed and look at the new information there?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/107143108/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/107231110",
    "html_url": "https://github.com/rust-lang/rust/issues/25916#issuecomment-107231110",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25916",
    "id": 107231110,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNzIzMTExMA==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-05-31T18:14:23Z",
    "updated_at": "2015-05-31T18:14:23Z",
    "body": "@eddyb \n\nWe have `select_new_obligations` exactly for this reason. It doesn't work for some reason tho.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/107231110/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/107981259",
    "html_url": "https://github.com/rust-lang/rust/issues/25916#issuecomment-107981259",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/25916",
    "id": 107981259,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNzk4MTI1OQ==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-06-02T14:54:28Z",
    "updated_at": "2015-06-02T14:54:28Z",
    "body": "This is the same issue as\n    #25069 \n    #23977\n\nThis is a different issue from #22204 (I think I will fix that one separately).\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/107981259/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
