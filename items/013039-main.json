{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/13039",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/13039/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/13039/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/13039/events",
  "html_url": "https://github.com/rust-lang/rust/pull/13039",
  "id": 29848245,
  "node_id": "MDExOlB1bGxSZXF1ZXN0MTM4MDU1NTI=",
  "number": 13039,
  "title": "Changed `iter::Extendable` and `iter::FromIterator` to take a `Iterator` by value.",
  "user": {
    "login": "Kimundi",
    "id": 2903206,
    "node_id": "MDQ6VXNlcjI5MDMyMDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2903206?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Kimundi",
    "html_url": "https://github.com/Kimundi",
    "followers_url": "https://api.github.com/users/Kimundi/followers",
    "following_url": "https://api.github.com/users/Kimundi/following{/other_user}",
    "gists_url": "https://api.github.com/users/Kimundi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Kimundi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Kimundi/subscriptions",
    "organizations_url": "https://api.github.com/users/Kimundi/orgs",
    "repos_url": "https://api.github.com/users/Kimundi/repos",
    "events_url": "https://api.github.com/users/Kimundi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Kimundi/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 4,
  "created_at": "2014-03-20T19:06:18Z",
  "updated_at": "2014-06-18T03:16:47Z",
  "closed_at": "2014-03-26T07:51:57Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/13039",
    "html_url": "https://github.com/rust-lang/rust/pull/13039",
    "diff_url": "https://github.com/rust-lang/rust/pull/13039.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/13039.patch",
    "merged_at": null
  },
  "body": "# Summary\n\nChanged `iter::Extendable` and `iter::FromIterator` to take a `Iterator` by value.\nThese functions always exhaust the passed `Iterator`, and are often used for transferring the values of a new `Iterator` directly into a data structure, so using them usually require the use of the `&mut` operator:\n\n```\nfoo.extend(&mut bar.move_iter()); // Transfer content from bar into foo\n\nlet mut iter = ...;\nfoo.extend(&mut iter); // iter is now empty\n```\n\nThis patch changes both the `FromIterator` and `Extendable` traits to take the iterator by value instead, which makes the common case of using these traits less heavy:\n\n```\nfoo.extend(bar.move_iter()); // Transfer content from bar into foo\n\nlet iter = ...;\nfoo.extend(iter);\n// iter is now inaccessible if it moved\n// or unchanged if it was Pod and copied.\n```\n# Composability\n\nThis technically makes the traits less flexible from a type system pov, because they now require ownership. \n\nHowever, because `Iterator` provides the `ByRef` adapter, there is no loss of functionality:\n\n```\nfoo.extend(iter.by_ref()); // Same semantic as today, for the few situations where you need it.\n```\n# Motivation\n\nThis change makes it less painful to use iterators for shuffling values around between collections, which makes it more acceptable to always use them for this, enabling more flexibility.\n\nFor example, `foo.extend(bar.move_iter())` can generally be the fastest way to append an collections content to another one, without both needing to have the same type. Making this easy to use would allow the removal of special cased methods like `push_all()` on vectors. (See https://github.com/mozilla/rust/issues/12456)\n\nI opened https://github.com/mozilla/rust/issues/13038 as well, to discuss this change in general if people object to it.\n# Further work\n\nThis didn't change the `collect()` method to take by value `self`, nor any of the other adapters that also exhaust their iterator argument. For consistency this should probably happen in the long term, but for now this is too much trouble, as every use of them would need to be checked for accidentally changed semantic by going `&mut self -> self`. (which allows for the possibility that a `Pod` iterator got copied instead of exhausted without generating a type error by the change)\n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/13039/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/13039/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
