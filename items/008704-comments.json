[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23599864",
    "html_url": "https://github.com/rust-lang/rust/issues/8704#issuecomment-23599864",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8704",
    "id": 23599864,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNTk5ODY0",
    "user": {
      "login": "eamartin",
      "id": 287200,
      "node_id": "MDQ6VXNlcjI4NzIwMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/287200?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eamartin",
      "html_url": "https://github.com/eamartin",
      "followers_url": "https://api.github.com/users/eamartin/followers",
      "following_url": "https://api.github.com/users/eamartin/following{/other_user}",
      "gists_url": "https://api.github.com/users/eamartin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eamartin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eamartin/subscriptions",
      "organizations_url": "https://api.github.com/users/eamartin/orgs",
      "repos_url": "https://api.github.com/users/eamartin/repos",
      "events_url": "https://api.github.com/users/eamartin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eamartin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-31T03:34:37Z",
    "updated_at": "2013-08-31T03:40:39Z",
    "body": "I've spent a little while looking at the code for this and am hoping to tackle this issue over the weekend.\n\nI have one question so far about the code.\n\nThe Rust code (in std::rt:local_heap) contains:\n\n``` rust\nstruct Env { priv opaque: () }\n\nstruct BoxedRegion {\n    env: *Env,\n    backing_region: *MemoryRegion,\n    live_allocs: *raw::Box<()>,\n}\n```\n\nwhile the C++ boxed_region struct looks like\n\n``` C++\nclass boxed_region {\nprivate:\n    bool poison_on_free;\n    memory_region *backing_region;\n    rust_opaque_box *live_allocs;\n// some code here ommitted\n}\n```\n\nDoes the the pointer to the Env struct in BoxedRegion exist just for alignment purposes? It seems a bit odd to use an unsafe pointer to align with a bool (why not just use a Rust bool). Since I'm porting this to Rust, can I just get rid of the Env struct and replace the pointer to env with a poison_on_free field?\n\nedit: Just noticed the `rust_env` empty struct in both `memory_region.h` and `boxed_region.h` but the type is never used. Now I'm a bit more confused. Is there just a remnant from some previous refactoring?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23599864/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23907371",
    "html_url": "https://github.com/rust-lang/rust/issues/8704#issuecomment-23907371",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/8704",
    "id": 23907371,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzOTA3Mzcx",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-09-05T22:46:03Z",
    "updated_at": "2013-09-05T22:46:03Z",
    "body": "`rust_env` is a declaration left over from previous refactoring, yes. It no longer exists. I can't explain the `Env` type in the `BoxedRegion` struct - it looks completely bogus to me and should mirror the C++ decl.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23907371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
