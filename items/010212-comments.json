[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27542055",
    "html_url": "https://github.com/rust-lang/rust/issues/10212#issuecomment-27542055",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10212",
    "id": 27542055,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTQyMDU1",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-01T01:23:27Z",
    "updated_at": "2013-11-01T01:23:27Z",
    "body": "This would result in an overall code size increase, because LLVM would have to emit external symbols for lots of small functions in the source crate.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27542055/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27542101",
    "html_url": "https://github.com/rust-lang/rust/issues/10212#issuecomment-27542101",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10212",
    "id": 27542101,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTQyMTAx",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-01T01:24:45Z",
    "updated_at": "2013-11-01T01:24:45Z",
    "body": "From my understanding, we currently already emit the symbols for all `#[inline]` functions in the crate which defined them (although this may be wrong to do so).\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27542101/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27542158",
    "html_url": "https://github.com/rust-lang/rust/issues/10212#issuecomment-27542158",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10212",
    "id": 27542158,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTQyMTU4",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-01T01:26:17Z",
    "updated_at": "2013-11-01T01:26:38Z",
    "body": "They shouldn't be output as external symbols, it's a bug. The reachability code doesn't work at all.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27542158/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27542230",
    "html_url": "https://github.com/rust-lang/rust/issues/10212#issuecomment-27542230",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10212",
    "id": 27542230,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTQyMjMw",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-01T01:28:38Z",
    "updated_at": "2013-11-01T01:28:38Z",
    "body": "I think it's a huge mistake to be having programmers making manual decisions about when to use inlining. The crate model is fundamentally broken and doesn't provide either the ability to expose a stable ABI or have good performance/size.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27542230/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27559744",
    "html_url": "https://github.com/rust-lang/rust/issues/10212#issuecomment-27559744",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10212",
    "id": 27559744,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTU5NzQ0",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-01T11:25:46Z",
    "updated_at": "2013-11-01T11:25:46Z",
    "body": "On Thu, Oct 31, 2013 at 06:28:42PM -0700, Daniel Micay wrote:\n\n> I think it's a huge mistake to be having programmers making manual\n> decisions about when to use inlining. \n\nIn the end crates are really oriented around dynamic linking. We\ndesigned cross-crate inlining so that people could have control over\nwhat gets inlined across a DLL boundary and whta does not. This way,\nif you are the author of a popular library, and you make a bug fix,\nyou can know for certain whether downstream clients will have to\nrecompile or not. At least that was the idea. I still think this is\nan important use case.\n\nHowever, there are other use cases where performance is more\nimportant.  In that case, dynamic linking seems like the wrong\nchoice. Static linking would probably be better. Ideally we'd emit the\nLLVM bit code for each library and then statically link the whole\nkit-and-kaboodle together, or possibly use LTO. We should work on\nmaking this path easy, because it's important too.\n\n> The crate model is fundamentally broken and doesn't provide either\n> the ability to expose a stable ABI or have good performance/size.\n\nI'm not sure why you say that crates don't provide the ability to\nexpose a stable ABI. Based on some overheard IRC conversation, I think\nit has to do with reflection, but perhaps there are other concerns?\n\nI am...  amenable to reining in reflection or even removing it\naltogether -- we're really not using it for much, and deriving gives\nyou much of the same benefit without any of the concerns -- but I\nthink you are exaggerating its impact. Java lets you use reflection to\ndo all sorts of things, including modifying private fields, and yet\nsomehow they have one of the richest ecosystem of libraries in\nexistence.  Not to mention that unsafe code has the power to violate\nevery abstraction boundary known to man.  Anyway, reflection is a\nseparate issue from what is under discussion here.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27559744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27559765",
    "html_url": "https://github.com/rust-lang/rust/issues/10212#issuecomment-27559765",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10212",
    "id": 27559765,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTU5NzY1",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-01T11:26:19Z",
    "updated_at": "2013-11-01T11:26:19Z",
    "body": "One thing: for generic functions, there may not be an externally\navailable variant specialized to the correct types.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27559765/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27598687",
    "html_url": "https://github.com/rust-lang/rust/issues/10212#issuecomment-27598687",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10212",
    "id": 27598687,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTk4Njg3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-01T20:34:56Z",
    "updated_at": "2013-11-01T20:46:51Z",
    "body": "@nikomatsakis: Rust suffers from the same problems as C++ when it comes to dynamic linking but also makes life harder. In both languages, field privacy leads to exposing the size of every public type as part of the ABI. In Rust, visit glue also exposes all the internal details of every field reachable from a public type. The definitions of global values are also serialized to metadata.\n\nC++ has instantiations of generics, but allows exporting specific instances of them. It contains anything relevant to the ABI in a header file, so it's obvious what you're exposing. The most widely used open-source C++ standard library (libstdc++) has kept binary compatibility since 2006.\n\nI don't think we'll _ever_ reach the point where you can upgrade Rust itself or idiomatic libraries and not end up having to rebuild everything using them. However, I think it is important to _support_ writing a stable ABI. I guess it might make more sense to be using `extern \"C\"` and a header file when you're in one of those use cases but it would be nice if you didn't have to.\n\nThe issue I have with `#[inline]` is that almost everything in `libstd` is going to end up tagged that way or is generic. Nearly everything else ends up as an external symbol because an inline/generic function is calling it. The library boundary is barely there at all.\n\nIf we decided to use static linking for debug builds and link-time optimization for release builds, we could pretty much stop worrying about `#[inline]` and split libraries like `librustc` into _many_ (30+) compilation units without any performance loss.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27598687/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27598877",
    "html_url": "https://github.com/rust-lang/rust/issues/10212#issuecomment-27598877",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10212",
    "id": 27598877,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTk4ODc3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-01T20:37:33Z",
    "updated_at": "2013-11-01T20:43:20Z",
    "body": "A normal C library is composed of hundreds of compilation units handled via static linking or link-time optimization, and then presents a single static/dynamic library to users. If we moved towards that, it would definitely be an improvement, but I don't see much value in a top-level dynamically linkable shared object for Rust.\n\nJava is essentially doing the same thing as link-time optimization path, where each compilation unit is translated/optimized in advance to bytecode and then loaded/optimized again. There's no need for ABI compatibility in that paradigm.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27598877/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/44597147",
    "html_url": "https://github.com/rust-lang/rust/issues/10212#issuecomment-44597147",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/10212",
    "id": 44597147,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NTk3MTQ3",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-05-29T23:08:35Z",
    "updated_at": "2014-05-29T23:08:35Z",
    "body": "I came up with a concrete plan for this: #14527\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/44597147/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
