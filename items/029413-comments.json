[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151671633",
    "html_url": "https://github.com/rust-lang/rust/issues/29413#issuecomment-151671633",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29413",
    "id": 151671633,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MTY3MTYzMw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-27T23:10:42Z",
    "updated_at": "2015-10-27T23:10:42Z",
    "body": "I would prefer to understand a little more here before we start turning things off, but unfortunately right now we can't turn off dwarf emission entirely as it's used for unwinding still (LLVM's SEH-based unwinding is unreliable in 3.7).\n\nThe minimal test case I've found so far is:\n\n``` rust\n// compile with -Clto -g\nextern crate libc;\nextern crate winapi;\nfn main() {}\n```\n\nIt looks like this may just be related to the size of object files rather than optimization + dwarf info, if you remove `-Clto` it links just fine.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151671633/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151673682",
    "html_url": "https://github.com/rust-lang/rust/issues/29413#issuecomment-151673682",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29413",
    "id": 151673682,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MTY3MzY4Mg==",
    "user": {
      "login": "briansmith",
      "id": 16816,
      "node_id": "MDQ6VXNlcjE2ODE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/16816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/briansmith",
      "html_url": "https://github.com/briansmith",
      "followers_url": "https://api.github.com/users/briansmith/followers",
      "following_url": "https://api.github.com/users/briansmith/following{/other_user}",
      "gists_url": "https://api.github.com/users/briansmith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/briansmith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/briansmith/subscriptions",
      "organizations_url": "https://api.github.com/users/briansmith/orgs",
      "repos_url": "https://api.github.com/users/briansmith/repos",
      "events_url": "https://api.github.com/users/briansmith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/briansmith/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-27T23:23:51Z",
    "updated_at": "2015-10-27T23:23:51Z",
    "body": "> we can't turn off dwarf emission entirely\n\nIt isn't necessary to turn off dward emission entirely. I'm assuming that when we omit \"-g\", then the DWARF info for unwinding is still being generated. If so, it would only be necessary to turn off whatever additional DWARF stuff gets added with \"-g\", ideally keeping the CV/PDB format debug info.\n\n> It looks like this may just be related to the size of object files rather than optimization + dwarf info\n\nI can't do anything about the size.\n\n> If you remove `-Clto` it links just fine.\n\nYes, but I'd rather compile with LTO than with the extra debug info by default.\n\nIf I weren't using Cargo, then I could just change my build logic to omit the `-g` flag on Win64. But, I can't do that with Cargo, so some alternate solution is needed.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151673682/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151678043",
    "html_url": "https://github.com/rust-lang/rust/issues/29413#issuecomment-151678043",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29413",
    "id": 151678043,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MTY3ODA0Mw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-27T23:53:35Z",
    "updated_at": "2015-10-27T23:53:35Z",
    "body": "Oh right, so I think this is where I'd probably like to understand a little more about what's causing this. We don't (to the best of my knowledge) emit any dwarf debug information with -g on MSVC, it should in theory be all PDB stuff. That being said, we don't request anything specific from LLVM, I think it just chooses the output format based on the target.\n\nIt'd be good to either (a) fix this in LLVM, (b) figure out a flag to pass to the linker, or (c) figure out how to prevent this in the frontend in a more surgical manner than \"disable all debug info on msvc\"\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151678043/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151681631",
    "html_url": "https://github.com/rust-lang/rust/issues/29413#issuecomment-151681631",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29413",
    "id": 151681631,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE1MTY4MTYzMQ==",
    "user": {
      "login": "briansmith",
      "id": 16816,
      "node_id": "MDQ6VXNlcjE2ODE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/16816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/briansmith",
      "html_url": "https://github.com/briansmith",
      "followers_url": "https://api.github.com/users/briansmith/followers",
      "following_url": "https://api.github.com/users/briansmith/following{/other_user}",
      "gists_url": "https://api.github.com/users/briansmith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/briansmith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/briansmith/subscriptions",
      "organizations_url": "https://api.github.com/users/briansmith/orgs",
      "repos_url": "https://api.github.com/users/briansmith/repos",
      "events_url": "https://api.github.com/users/briansmith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/briansmith/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-10-28T00:17:55Z",
    "updated_at": "2015-10-28T00:17:55Z",
    "body": "> It'd be good to either (a) fix this in LLVM, (b) figure out a flag to pass to the linker, or (c) figure out how to prevent this in the frontend in a more surgical manner than \"disable all debug info on msvc\"\n\nSure, but I think it is reasonable to implement that workaround until the problem is found, since it seems likely that it will take a while to do the better things.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/151681631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/214526848",
    "html_url": "https://github.com/rust-lang/rust/issues/29413#issuecomment-214526848",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29413",
    "id": 214526848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNDUyNjg0OA==",
    "user": {
      "login": "briansmith",
      "id": 16816,
      "node_id": "MDQ6VXNlcjE2ODE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/16816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/briansmith",
      "html_url": "https://github.com/briansmith",
      "followers_url": "https://api.github.com/users/briansmith/followers",
      "following_url": "https://api.github.com/users/briansmith/following{/other_user}",
      "gists_url": "https://api.github.com/users/briansmith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/briansmith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/briansmith/subscriptions",
      "organizations_url": "https://api.github.com/users/briansmith/orgs",
      "repos_url": "https://api.github.com/users/briansmith/repos",
      "events_url": "https://api.github.com/users/briansmith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/briansmith/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-25T21:20:34Z",
    "updated_at": "2016-04-25T21:20:34Z",
    "body": "What is the current status of things, as far as this bug goes? Now, IIUC, LLVM's unwinding is being used so there's less (no?) reason to embed the DWARF debugging info? If so, then can we get rid of it so that debug=true can be used on optimized builds?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/214526848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/214618347",
    "html_url": "https://github.com/rust-lang/rust/issues/29413#issuecomment-214618347",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29413",
    "id": 214618347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNDYxODM0Nw==",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-04-26T05:14:28Z",
    "updated_at": "2016-04-26T05:14:28Z",
    "body": "Does this still reproduce for you? This may have been fixed by https://github.com/rust-lang/rust/pull/31319, and my [\"minimal repro\"](https://github.com/rust-lang/rust/issues/29413#issuecomment-151671633) seems to work.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/214618347/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/222276923",
    "html_url": "https://github.com/rust-lang/rust/issues/29413#issuecomment-222276923",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29413",
    "id": 222276923,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjI3NjkyMw==",
    "user": {
      "login": "briansmith",
      "id": 16816,
      "node_id": "MDQ6VXNlcjE2ODE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/16816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/briansmith",
      "html_url": "https://github.com/briansmith",
      "followers_url": "https://api.github.com/users/briansmith/followers",
      "following_url": "https://api.github.com/users/briansmith/following{/other_user}",
      "gists_url": "https://api.github.com/users/briansmith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/briansmith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/briansmith/subscriptions",
      "organizations_url": "https://api.github.com/users/briansmith/orgs",
      "repos_url": "https://api.github.com/users/briansmith/repos",
      "events_url": "https://api.github.com/users/briansmith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/briansmith/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-27T23:57:48Z",
    "updated_at": "2016-05-27T23:57:48Z",
    "body": "Yes, this still reproduces for me.\n\nIn particular, if I do `cargo build --release`, then the build succeeds, but if I do `cargo test --release` then the build fails with several errors like this:\n- git clone https://github.com/briansmith/ring\n- edit Cargo.toml to `s/debug = false/debug = true/` in the `[profile.release]` section.\n- cargo test --release\n\n```\ncheckdigest.0.o : error LNK2017: 'ADDR32' relocation to '.debug_info' invalid without /LARGEADDRESSAWARE:NO\n```\n\n`checkdigest` is one of the examples (as cargo defines \"example\") of _ring_.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/222276923/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/222288807",
    "html_url": "https://github.com/rust-lang/rust/issues/29413#issuecomment-222288807",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29413",
    "id": 222288807,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjI4ODgwNw==",
    "user": {
      "login": "retep998",
      "id": 666308,
      "node_id": "MDQ6VXNlcjY2NjMwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/retep998",
      "html_url": "https://github.com/retep998",
      "followers_url": "https://api.github.com/users/retep998/followers",
      "following_url": "https://api.github.com/users/retep998/following{/other_user}",
      "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/retep998/subscriptions",
      "organizations_url": "https://api.github.com/users/retep998/orgs",
      "repos_url": "https://api.github.com/users/retep998/repos",
      "events_url": "https://api.github.com/users/retep998/events{/privacy}",
      "received_events_url": "https://api.github.com/users/retep998/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-28T04:08:37Z",
    "updated_at": "2016-05-28T04:10:48Z",
    "body": "I compiled three binaries, the first is a Rust hello world with debug info, the second is without debug info, and the third is a C hello world. All using 64bit msvc.\n\n![](http://i.imgur.com/Yw5wCjU.png)\n\nSo dwarf debug symbols are definitely not being produced anymore for `x86_64-pc-windows-msvc` and we can rule that out.\n\n@briansmith What is the exact version of rust you are using?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/222288807/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/222322624",
    "html_url": "https://github.com/rust-lang/rust/issues/29413#issuecomment-222322624",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/29413",
    "id": 222322624,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjMyMjYyNA==",
    "user": {
      "login": "briansmith",
      "id": 16816,
      "node_id": "MDQ6VXNlcjE2ODE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/16816?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/briansmith",
      "html_url": "https://github.com/briansmith",
      "followers_url": "https://api.github.com/users/briansmith/followers",
      "following_url": "https://api.github.com/users/briansmith/following{/other_user}",
      "gists_url": "https://api.github.com/users/briansmith/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/briansmith/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/briansmith/subscriptions",
      "organizations_url": "https://api.github.com/users/briansmith/orgs",
      "repos_url": "https://api.github.com/users/briansmith/repos",
      "events_url": "https://api.github.com/users/briansmith/events{/privacy}",
      "received_events_url": "https://api.github.com/users/briansmith/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-05-28T18:25:56Z",
    "updated_at": "2016-05-28T18:25:56Z",
    "body": "Thanks Peter. It turns out that I had a pre-rustup version of rustc in my path, so that even when rustup told me it had switched to rustc 1.10, I was really building with rustc 1.6. After I fixed that, I verified that at least as of Rust 1.9, the problem is fixed. So this can be closed!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/222322624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
