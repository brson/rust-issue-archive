[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70055849",
    "html_url": "https://github.com/rust-lang/rust/issues/21182#issuecomment-70055849",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21182",
    "id": 70055849,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDU1ODQ5",
    "user": {
      "login": "chris-morgan",
      "id": 392868,
      "node_id": "MDQ6VXNlcjM5Mjg2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chris-morgan",
      "html_url": "https://github.com/chris-morgan",
      "followers_url": "https://api.github.com/users/chris-morgan/followers",
      "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}",
      "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions",
      "organizations_url": "https://api.github.com/users/chris-morgan/orgs",
      "repos_url": "https://api.github.com/users/chris-morgan/repos",
      "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chris-morgan/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-15T08:49:55Z",
    "updated_at": "2015-01-15T08:49:55Z",
    "body": "I would think that an implementation should be on HashMap and let HashSet derive it. Does this seem reasonable?\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70055849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70921204",
    "html_url": "https://github.com/rust-lang/rust/issues/21182#issuecomment-70921204",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21182",
    "id": 70921204,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwOTIxMjA0",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-21T21:04:08Z",
    "updated_at": "2015-01-21T21:04:46Z",
    "body": "It's impossible to implement Hash for HashSet, as far as I know. You would need some way to deterministically order all the elements in the HashSet for hashing, in a hasher-state and insertion-order independent way.\n\nSince HashMap only requires Eq and Hash, and hashers have random state, there is no such ordering. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70921204/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70921714",
    "html_url": "https://github.com/rust-lang/rust/issues/21182#issuecomment-70921714",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21182",
    "id": 70921714,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwOTIxNzE0",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-21T21:07:13Z",
    "updated_at": "2015-01-21T21:07:13Z",
    "body": "I suppose you could have the impl be dependent on also happening to have Ord, and either take O(n^2) time and O(1) space, or O(nlogn) time and O(n) space, but both are pretty unsavoury options!\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70921714/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70922064",
    "html_url": "https://github.com/rust-lang/rust/issues/21182#issuecomment-70922064",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21182",
    "id": 70922064,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwOTIyMDY0",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-21T21:09:14Z",
    "updated_at": "2015-01-21T21:09:14Z",
    "body": "I suggest using EnumSet or TrieSet in collect-rs if you need some order-dependent information like this.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70922064/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/93536054",
    "html_url": "https://github.com/rust-lang/rust/issues/21182#issuecomment-93536054",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21182",
    "id": 93536054,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkzNTM2MDU0",
    "user": {
      "login": "Gankra",
      "id": 1136864,
      "node_id": "MDQ6VXNlcjExMzY4NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gankra",
      "html_url": "https://github.com/Gankra",
      "followers_url": "https://api.github.com/users/Gankra/followers",
      "following_url": "https://api.github.com/users/Gankra/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions",
      "organizations_url": "https://api.github.com/users/Gankra/orgs",
      "repos_url": "https://api.github.com/users/Gankra/repos",
      "events_url": "https://api.github.com/users/Gankra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gankra/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-15T19:12:46Z",
    "updated_at": "2015-06-19T23:44:37Z",
    "body": "Note for nitpickers: You _can_ synthesize a Hash using your favourite commutative function (+, *, XOR), but this would substantially undermine the _security_ properties provided by SipHash. We obtain security through siphash by mixing _values_ through the hasher, which is fundamentally order-dependent. This ensures that e.g. \"tac\" and \"cat\" don't hash to the same thing. However of course for a HashSet you would want `[t, a, c]` and `[c, a, t]` to hash to the same thing. \n\nIf you do this through a commutative function `mix` on top of the hashes of the individual elements, then I can theoretically produce a DDOS against a `HashSet<HashSet<T>>` by finding pairs of elements such that `mix(hash(x), hash(y)) == 0`. Given `k` such (disjoint) pairs, I can produce 2<sup>k</sup> HashSets of size at most 2k that all collide. This will produce O(n<sup>2</sup>) behaviour for operations that should take O(n) time.\n\nNow of course this is a less fundamental flaw than this flaw existing for _all_ keys, especially since a HashMap or HashSet as a key is a really niche thing. So perhaps this is an acceptable problem.\n\nFinally because we use robin hood hashing, we're _extra_ vulnerable to bad hashing because even \"clumpy\" distributions are a performance hazard.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/93536054/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1003740880",
    "html_url": "https://github.com/rust-lang/rust/issues/21182#issuecomment-1003740880",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21182",
    "id": 1003740880,
    "node_id": "IC_kwDOAAsO6M47097Q",
    "user": {
      "login": "peterkelly",
      "id": 1472178,
      "node_id": "MDQ6VXNlcjE0NzIxNzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1472178?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/peterkelly",
      "html_url": "https://github.com/peterkelly",
      "followers_url": "https://api.github.com/users/peterkelly/followers",
      "following_url": "https://api.github.com/users/peterkelly/following{/other_user}",
      "gists_url": "https://api.github.com/users/peterkelly/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/peterkelly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/peterkelly/subscriptions",
      "organizations_url": "https://api.github.com/users/peterkelly/orgs",
      "repos_url": "https://api.github.com/users/peterkelly/repos",
      "events_url": "https://api.github.com/users/peterkelly/events{/privacy}",
      "received_events_url": "https://api.github.com/users/peterkelly/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-01-02T16:24:33Z",
    "updated_at": "2022-01-02T16:24:33Z",
    "body": "While the elements don't necessarily have an ordering, their hashes do. This could be implemented by obtaining the hashes of all elements, sorting them, and then iterating through them to compute a hash for the set.",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1003740880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1024622804",
    "html_url": "https://github.com/rust-lang/rust/issues/21182#issuecomment-1024622804",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/21182",
    "id": 1024622804,
    "node_id": "IC_kwDOAAsO6M49EoDU",
    "user": {
      "login": "the8472",
      "id": 1065730,
      "node_id": "MDQ6VXNlcjEwNjU3MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1065730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/the8472",
      "html_url": "https://github.com/the8472",
      "followers_url": "https://api.github.com/users/the8472/followers",
      "following_url": "https://api.github.com/users/the8472/following{/other_user}",
      "gists_url": "https://api.github.com/users/the8472/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/the8472/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/the8472/subscriptions",
      "organizations_url": "https://api.github.com/users/the8472/orgs",
      "repos_url": "https://api.github.com/users/the8472/repos",
      "events_url": "https://api.github.com/users/the8472/events{/privacy}",
      "received_events_url": "https://api.github.com/users/the8472/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2022-01-28T20:45:57Z",
    "updated_at": "2022-01-28T20:45:57Z",
    "body": "#91837 implemented it for a rustc-internal hashet by using commutative operations.\r\nBut that approach can't be applied to the public HashSet because it requires intermediate hashers to be constructable. I.e. it would need something like `impl<H, T> Hash<H> for HashSet<T> where H: Hasher + Default `, but Hash has the generics on the methods rather than the trait itself, so that approach isn't applicable here.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1024622804/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
