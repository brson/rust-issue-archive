{
  "url": "https://api.github.com/repos/rust-lang/rust/issues/28816",
  "repository_url": "https://api.github.com/repos/rust-lang/rust",
  "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/28816/labels{/name}",
  "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/28816/comments",
  "events_url": "https://api.github.com/repos/rust-lang/rust/issues/28816/events",
  "html_url": "https://github.com/rust-lang/rust/pull/28816",
  "id": 109577907,
  "node_id": "MDExOlB1bGxSZXF1ZXN0NDY2ODYxNDI=",
  "number": 28816,
  "title": "Unify structures and enum variants in AST/HIR",
  "user": {
    "login": "petrochenkov",
    "id": 5751617,
    "node_id": "MDQ6VXNlcjU3NTE2MTc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/petrochenkov",
    "html_url": "https://github.com/petrochenkov",
    "followers_url": "https://api.github.com/users/petrochenkov/followers",
    "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}",
    "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions",
    "organizations_url": "https://api.github.com/users/petrochenkov/orgs",
    "repos_url": "https://api.github.com/users/petrochenkov/repos",
    "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/petrochenkov/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "nrc",
    "id": 762626,
    "node_id": "MDQ6VXNlcjc2MjYyNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nrc",
    "html_url": "https://github.com/nrc",
    "followers_url": "https://api.github.com/users/nrc/followers",
    "following_url": "https://api.github.com/users/nrc/following{/other_user}",
    "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nrc/subscriptions",
    "organizations_url": "https://api.github.com/users/nrc/orgs",
    "repos_url": "https://api.github.com/users/nrc/repos",
    "events_url": "https://api.github.com/users/nrc/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nrc/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "nrc",
      "id": 762626,
      "node_id": "MDQ6VXNlcjc2MjYyNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nrc",
      "html_url": "https://github.com/nrc",
      "followers_url": "https://api.github.com/users/nrc/followers",
      "following_url": "https://api.github.com/users/nrc/following{/other_user}",
      "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nrc/subscriptions",
      "organizations_url": "https://api.github.com/users/nrc/orgs",
      "repos_url": "https://api.github.com/users/nrc/repos",
      "events_url": "https://api.github.com/users/nrc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nrc/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 31,
  "created_at": "2015-10-02T21:48:53Z",
  "updated_at": "2015-11-22T11:46:50Z",
  "closed_at": "2015-10-14T06:35:15Z",
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/rust-lang/rust/pulls/28816",
    "html_url": "https://github.com/rust-lang/rust/pull/28816",
    "diff_url": "https://github.com/rust-lang/rust/pull/28816.diff",
    "patch_url": "https://github.com/rust-lang/rust/pull/28816.patch",
    "merged_at": "2015-10-14T06:35:15Z"
  },
  "body": "This patch uses the same data structures for structs and enum variants in AST and HIR. These changes in data structures lead to noticeable simplification in most of code dealing with them.\nI didn't touch the top level, i.e. `ItemStruct` is still `ItemStruct` and not `ItemEnum` with one variant, like in the type checker.\nAs part of this patch, structures and variants get the `kind` field making distinction between \"normal\" structs, tuple structs and unit structs explicit instead of relying on the number of fields and presence of constructor `NodeId`. In particular, we can now distinguish empty tuple structs from unit structs, which was impossible before! Comprehensive tests for empty structs are added and some improvements to empty struct feature gates are made. Some tests don't pass due to issue https://github.com/rust-lang/rust/issues/28692 , they are still there for completeness, but are commented out.\nThis patch fixes issue mentioned in https://github.com/rust-lang/rust/issues/16819#issuecomment-139509861, now emptiness of tuple structs is checked after expansion.\nIt also touches https://github.com/rust-lang/rust/issues/28750 by providing span for visit_struct_def\ncc https://github.com/rust-lang/rust/pull/28336\n\nr? @nrc \n",
  "closed_by": {
    "login": "bors",
    "id": 3372342,
    "node_id": "MDQ6VXNlcjMzNzIzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bors",
    "html_url": "https://github.com/bors",
    "followers_url": "https://api.github.com/users/bors/followers",
    "following_url": "https://api.github.com/users/bors/following{/other_user}",
    "gists_url": "https://api.github.com/users/bors/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bors/subscriptions",
    "organizations_url": "https://api.github.com/users/bors/orgs",
    "repos_url": "https://api.github.com/users/bors/repos",
    "events_url": "https://api.github.com/users/bors/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bors/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/28816/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/28816/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "_meta": {
    "type": "pr"
  }
}
