[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22544889",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-22544889",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 22544889,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNTQ0ODg5",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-13T06:04:42Z",
    "updated_at": "2013-08-13T06:04:42Z",
    "body": "/cc @toddaaro \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22544889/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22544901",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-22544901",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 22544901,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNTQ0OTAx",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-13T06:05:10Z",
    "updated_at": "2013-08-13T06:05:10Z",
    "body": "/cc @msullivan \nI don't think it was actually toddaaro I was talking to about this...\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22544901/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23033732",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-23033732",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 23033732,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzMDMzNzMy",
    "user": {
      "login": "toddaaro",
      "id": 366431,
      "node_id": "MDQ6VXNlcjM2NjQzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/366431?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/toddaaro",
      "html_url": "https://github.com/toddaaro",
      "followers_url": "https://api.github.com/users/toddaaro/followers",
      "following_url": "https://api.github.com/users/toddaaro/following{/other_user}",
      "gists_url": "https://api.github.com/users/toddaaro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/toddaaro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/toddaaro/subscriptions",
      "organizations_url": "https://api.github.com/users/toddaaro/orgs",
      "repos_url": "https://api.github.com/users/toddaaro/repos",
      "events_url": "https://api.github.com/users/toddaaro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/toddaaro/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-21T17:16:08Z",
    "updated_at": "2013-08-21T17:16:08Z",
    "body": "I have whined a lot about match implementations that suffer from combinatorial explosion, so maybe that is why you thought of me. \n\nThis Scala issue is probably unrelated, but maybe reading about the experience will prove useful to a Rust developer someday.\n\nhttps://issues.scala-lang.org/browse/SI-1133 \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/23033732/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70721757",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-70721757",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 70721757,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNzIxNzU3",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-20T19:59:02Z",
    "updated_at": "2015-01-20T19:59:02Z",
    "body": "Triage: did anyone determine if `match` was still the issue here? I'd imagine codegen has gotten better since 2013...\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70721757/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70723912",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-70723912",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 70723912,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNzIzOTEy",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-20T20:11:53Z",
    "updated_at": "2015-01-20T20:11:53Z",
    "body": "@steveklabnik I don't know of any changes to `match` codegen that would have alleviated this, re-running the measurements...\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70723912/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70734106",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-70734106",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 70734106,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNzM0MTA2",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-20T21:10:42Z",
    "updated_at": "2015-01-20T21:10:42Z",
    "body": "Yes, `match` is still generating more code than anything else, by a significant margin.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70734106/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70744216",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-70744216",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 70744216,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNzQ0MjE2",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-20T22:07:58Z",
    "updated_at": "2015-01-20T22:07:58Z",
    "body": "@cmr if you have a moment, can you explain how you checked this out? Future triage-rs will be thankful :smile: \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70744216/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70748768",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-70748768",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 70748768,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNzQ4NzY4",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-01-20T22:35:40Z",
    "updated_at": "2015-01-20T22:35:40Z",
    "body": "`make RUSTFLAGS=\"-Z count-llvm-insns\" | tee output`, followed by `sort -n < output > output2`, then look at the bottom of `output2` (ctrl-f for \"trans_match\")\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/70748768/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/168904677",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-168904677",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 168904677,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE2ODkwNDY3Nw==",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-01-05T05:41:09Z",
    "updated_at": "2016-01-05T05:41:09Z",
    "body": "trans-ing a `match` appears to be quadratic in the number of arms (at least for integers and strings):\n\n```\n$ for N in 500 1000 2000 4000; do\n    echo $N\n    python -c \"print('fn main() { match 0 { %s _ => {} } }' % ''.join(' %s => {}' % n for n in range(0, $N)))\" | \n        rustc - -Z time-passes |\n        grep translation\n  done\n500\ntime: 0.030; rss: 65MB  translation\n1000\ntime: 0.107; rss: 67MB  translation\n2000\ntime: 0.427; rss: 70MB  translation\n4000\ntime: 1.620; rss: 75MB  translation\n```\n\n(The python invocation prints code like `fn main() { match 0 {  0 => {} 1 => {} 2 => {} 3 => {} 4 => {} _ => {} } }` with `$N + 1` arms.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/168904677/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/225104823",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-225104823",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 225104823,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNTEwNDgyMw==",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-10T06:36:59Z",
    "updated_at": "2016-06-10T06:36:59Z",
    "body": "Results of @huonw's script above with `rustc 1.11.0-nightly (34505e222 2016-06-08)`:\n\n```\n500\ntime: 0.088; rss: 97MB  translation\n1000\ntime: 0.308; rss: 100MB translation\n2000\ntime: 1.247; rss: 101MB translation\n4000\ntime: 4.723; rss: 106MB translation\n```\n\nWith `-Z orbit`:\n\n```\n500\ntime: 0.009; rss: 95MB  translation\n1000\ntime: 0.015; rss: 97MB  translation\n2000\ntime: 0.017; rss: 101MB translation\n4000\ntime: 0.030; rss: 104MB translation\n```\n\nMIR trans looks to be a lot better at this case.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/225104823/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/225315049",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-225315049",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 225315049,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNTMxNTA0OQ==",
    "user": {
      "login": "arielb1",
      "id": 1830974,
      "node_id": "MDQ6VXNlcjE4MzA5NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arielb1",
      "html_url": "https://github.com/arielb1",
      "followers_url": "https://api.github.com/users/arielb1/followers",
      "following_url": "https://api.github.com/users/arielb1/following{/other_user}",
      "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions",
      "organizations_url": "https://api.github.com/users/arielb1/orgs",
      "repos_url": "https://api.github.com/users/arielb1/repos",
      "events_url": "https://api.github.com/users/arielb1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arielb1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-10T22:55:50Z",
    "updated_at": "2016-06-10T22:55:50Z",
    "body": "@brson \n\nMIR trans's algorithm is indeed very careful to generate a linear number of basic blocks.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/225315049/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/299335065",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-299335065",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 299335065,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTMzNTA2NQ==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-04T23:18:18Z",
    "updated_at": "2017-05-04T23:18:18Z",
    "body": "Match checking currently takes the most time, which is rather unsurprising since I think it's O(n^2) code. So I'm going to leave this open for the time being, though realistically matches with this many arms are... excessive, but I plan on taking a look at the code and seeing if it's possible to optimize it a little soon, so I'll leave it open till then.\r\n\r\n```\r\n$ for N in {10..100}; do echo -n \"$((2**$N)): \"; python -c \"print('fn main() { match 0 { %s _ => {} } }' % ''.join(' %s => {}' % n for n in xrange(0, 2 ** $N)))\" | rustc - -Z time-passes | rg --color never 'match'; done\r\n1024: time: 0.021; rss: 93MB\tmatch checking\r\n2048: time: 0.083; rss: 96MB\tmatch checking\r\n4096: time: 0.335; rss: 99MB\tmatch checking\r\n8192: time: 1.340; rss: 107MB\tmatch checking\r\n16384: time: 5.360; rss: 117MB\tmatch checking\r\n32768: time: 21.446; rss: 142MB\tmatch checking\r\n65536: time: 88.756; rss: 193MB\tmatch checking\r\n131072: time: 380.206; rss: 300MB\tmatch checking\r\n```",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/299335065/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/383362030",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-383362030",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 383362030,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MzM2MjAzMA==",
    "user": {
      "login": "ishitatsuyuki",
      "id": 12389383,
      "node_id": "MDQ6VXNlcjEyMzg5Mzgz",
      "avatar_url": "https://avatars.githubusercontent.com/u/12389383?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ishitatsuyuki",
      "html_url": "https://github.com/ishitatsuyuki",
      "followers_url": "https://api.github.com/users/ishitatsuyuki/followers",
      "following_url": "https://api.github.com/users/ishitatsuyuki/following{/other_user}",
      "gists_url": "https://api.github.com/users/ishitatsuyuki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ishitatsuyuki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ishitatsuyuki/subscriptions",
      "organizations_url": "https://api.github.com/users/ishitatsuyuki/orgs",
      "repos_url": "https://api.github.com/users/ishitatsuyuki/repos",
      "events_url": "https://api.github.com/users/ishitatsuyuki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ishitatsuyuki/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-04-22T07:37:36Z",
    "updated_at": "2018-04-22T07:51:09Z",
    "body": "Actually, the current match checking code seems to be wrongly/poorly implemented. The original [paper](http://moscova.inria.fr/~maranget/papers/warn/warn009.html#toc13) had linear performance on simple sequences here.\r\n\r\nEDIT: I interpret the figures wrongly:\r\n\r\n> the X-axis shows the size of matchings squared, (expressed as source file size squared)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/383362030/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/435854536",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-435854536",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 435854536,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTg1NDUzNg==",
    "user": {
      "login": "ishitatsuyuki",
      "id": 12389383,
      "node_id": "MDQ6VXNlcjEyMzg5Mzgz",
      "avatar_url": "https://avatars.githubusercontent.com/u/12389383?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ishitatsuyuki",
      "html_url": "https://github.com/ishitatsuyuki",
      "followers_url": "https://api.github.com/users/ishitatsuyuki/followers",
      "following_url": "https://api.github.com/users/ishitatsuyuki/following{/other_user}",
      "gists_url": "https://api.github.com/users/ishitatsuyuki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ishitatsuyuki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ishitatsuyuki/subscriptions",
      "organizations_url": "https://api.github.com/users/ishitatsuyuki/orgs",
      "repos_url": "https://api.github.com/users/ishitatsuyuki/repos",
      "events_url": "https://api.github.com/users/ishitatsuyuki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ishitatsuyuki/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2018-11-05T12:17:47Z",
    "updated_at": "2018-11-05T12:17:47Z",
    "body": "I'd like to make it clear that match checking is a NP-Complete problem, and quadratic average time is not very bad for such complex algorithm.\r\n\r\nHowever, it's true that it's taking up significant portion of compile time, and we probably want to special case trivial (C/switch-like) matches so that they use a loglinear algorithm instead.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/435854536/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/491001743",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-491001743",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 491001743,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTAwMTc0Mw==",
    "user": {
      "login": "estebank",
      "id": 1606434,
      "node_id": "MDQ6VXNlcjE2MDY0MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/estebank",
      "html_url": "https://github.com/estebank",
      "followers_url": "https://api.github.com/users/estebank/followers",
      "following_url": "https://api.github.com/users/estebank/following{/other_user}",
      "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/estebank/subscriptions",
      "organizations_url": "https://api.github.com/users/estebank/orgs",
      "repos_url": "https://api.github.com/users/estebank/repos",
      "events_url": "https://api.github.com/users/estebank/events{/privacy}",
      "received_events_url": "https://api.github.com/users/estebank/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2019-05-09T17:49:54Z",
    "updated_at": "2019-05-09T17:50:35Z",
    "body": "Triage:\r\n\r\n```\r\n~$ for N in 500 1000 2000 4000; do     echo $N;     python -c \"print('fn main() { match 0 { %s _ => {} } }' % ''.join(' %s => {}' % n for n in range(0, $N)))\" |          rustc +devel - -Z time-passes | grep \"checking 2\"; done\r\n500\r\n  time: 0.028\tmisc checking 2\r\n1000\r\n  time: 0.087\tmisc checking 2\r\n2000\r\n  time: 0.312\tmisc checking 2\r\n4000\r\n  time: 1.220\tmisc checking 2\r\n```\r\n\r\n```\r\n~$ for N in 500 1000 2000 4000; do     echo $N;     python -c \"print('fn main() { match 0 { %s _ => {} } }' % ''.join(' %s => {}' % n for n in range(0, $N)))\" |          rustc +devel - -Z time-passes | grep \"match\"; done\r\n500\r\n    time: 0.029\trvalue promotion + match checking\r\n1000\r\n    time: 0.087\trvalue promotion + match checking\r\n2000\r\n    time: 0.313\trvalue promotion + match checking\r\n4000\r\n    time: 1.233\trvalue promotion + match checking\r\n```",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/491001743/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/592185143",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-592185143",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 592185143,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MjE4NTE0Mw==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-02-27T21:27:46Z",
    "updated_at": "2020-02-27T21:27:46Z",
    "body": "triage: P-medium.\r\n\r\nThis is not believed to be a high priority work-item; in practice these match checking times, even for large matches, are minuscule compared to other passes in the compiler.\r\n\r\nStill, it might be a fun thing for a volunteer to attack.\r\n\r\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/592185143/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/592185567",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-592185567",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 592185567,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MjE4NTU2Nw==",
    "user": {
      "login": "pnkfelix",
      "id": 173127,
      "node_id": "MDQ6VXNlcjE3MzEyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pnkfelix",
      "html_url": "https://github.com/pnkfelix",
      "followers_url": "https://api.github.com/users/pnkfelix/followers",
      "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions",
      "organizations_url": "https://api.github.com/users/pnkfelix/orgs",
      "repos_url": "https://api.github.com/users/pnkfelix/repos",
      "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pnkfelix/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-02-27T21:28:53Z",
    "updated_at": "2020-02-27T21:28:53Z",
    "body": "> However, it's true that it's taking up significant portion of compile time, and we probably want to special case trivial (C/switch-like) matches so that they use a loglinear algorithm instead.\r\n\r\n(Even this simpler step would probably be both easy and beneficial!)",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/592185567/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/687666991",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-687666991",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 687666991,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NzY2Njk5MQ==",
    "user": {
      "login": "workingjubilee",
      "id": 46493976,
      "node_id": "MDQ6VXNlcjQ2NDkzOTc2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46493976?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/workingjubilee",
      "html_url": "https://github.com/workingjubilee",
      "followers_url": "https://api.github.com/users/workingjubilee/followers",
      "following_url": "https://api.github.com/users/workingjubilee/following{/other_user}",
      "gists_url": "https://api.github.com/users/workingjubilee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/workingjubilee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/workingjubilee/subscriptions",
      "organizations_url": "https://api.github.com/users/workingjubilee/orgs",
      "repos_url": "https://api.github.com/users/workingjubilee/repos",
      "events_url": "https://api.github.com/users/workingjubilee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/workingjubilee/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-09-05T21:44:52Z",
    "updated_at": "2020-09-05T21:44:52Z",
    "body": "It's 2020 and\r\n```bash\r\n$ for K in {8..16}; do\r\n  N=$((1 << K))\r\n  echo -n \"$((N)): \"\r\n  python -c \"print('fn main() { match 0 { %s _ => {} } }' % ''.join(' %s => {}' % n for n in xrange(0, $N)))\" | \r\n    rustc - -Z time-passes | \r\n    rg --color never 'match'\r\ndone\r\n256: time: 0.001; rss: 88MB\tmatch_checking\r\n512: time: 0.004; rss: 89MB\tmatch_checking\r\n1024: time: 0.013; rss: 89MB\tmatch_checking # huh, rss is almost constant up to here\r\n2048: time: 0.046; rss: 93MB\tmatch_checking\r\n4096: time: 0.179; rss: 96MB\tmatch_checking\r\n8192: time: 0.715; rss: 103MB\tmatch_checking\r\n16384: time: 3.152; rss: 118MB\tmatch_checking\r\n32768: time: 11.660; rss: 148MB\tmatch_checking\r\n65536: time: 55.046; rss: 206MB\tmatch_checking\r\n```",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/687666991/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/723292368",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-723292368",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 723292368,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMzI5MjM2OA==",
    "user": {
      "login": "Nadrieril",
      "id": 6783654,
      "node_id": "MDQ6VXNlcjY3ODM2NTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6783654?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Nadrieril",
      "html_url": "https://github.com/Nadrieril",
      "followers_url": "https://api.github.com/users/Nadrieril/followers",
      "following_url": "https://api.github.com/users/Nadrieril/following{/other_user}",
      "gists_url": "https://api.github.com/users/Nadrieril/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Nadrieril/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Nadrieril/subscriptions",
      "organizations_url": "https://api.github.com/users/Nadrieril/orgs",
      "repos_url": "https://api.github.com/users/Nadrieril/repos",
      "events_url": "https://api.github.com/users/Nadrieril/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Nadrieril/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2020-11-06T20:46:27Z",
    "updated_at": "2020-11-06T22:08:25Z",
    "body": "The match exhaustiveness algorithm is indeed completely quadratic: for every branch, we check if it is redundant with any of the branches above. We could hack workarounds for some special cases like what #76918 did, but those usually stop being useful for non-trivial patterns, and I'm not sure they're worth it since most matches have only a few branches. (I would love some data to confirm that, if you want to help see https://github.com/rust-lang/rustc-perf/issues/792)\r\nA real solution would involve a pretty drastic redesign of the algorithm. I have been thinking about that in my spare time, but as @ishitatsuyuki [mentioned](https://github.com/rust-lang/rust/issues/7462#issuecomment-435854536), it's not easy.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/723292368/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1835387426",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-1835387426",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 1835387426,
    "node_id": "IC_kwDOAAsO6M5tZcoi",
    "user": {
      "login": "Nadrieril",
      "id": 6783654,
      "node_id": "MDQ6VXNlcjY3ODM2NTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6783654?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Nadrieril",
      "html_url": "https://github.com/Nadrieril",
      "followers_url": "https://api.github.com/users/Nadrieril/followers",
      "following_url": "https://api.github.com/users/Nadrieril/following{/other_user}",
      "gists_url": "https://api.github.com/users/Nadrieril/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Nadrieril/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Nadrieril/subscriptions",
      "organizations_url": "https://api.github.com/users/Nadrieril/orgs",
      "repos_url": "https://api.github.com/users/Nadrieril/repos",
      "events_url": "https://api.github.com/users/Nadrieril/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Nadrieril/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-01T03:13:20Z",
    "updated_at": "2025-03-11T21:47:01Z",
    "body": "It's 2023 and `-Z time-passes` no longer has `translation` or `match-checking`. The only thing that's affected by huge matches is `MIR_borrow_checking`, which I assume includes match checking and lowering. If I run:\n```bash\nfor K in {8..16}; do\n  N=$((1 << K))\n  echo -n \"$((N)): \"\n  python -c \"print('fn main() { match 0 { %s _ => {} } }' % ''.join(' %s => {}' % n for n in range(0, $N)))\" |\n    rustc - -Z time-passes 2>&1 |\n    rg --color never 'MIR_borrow_checking'\ndone\n```\nwith `rustc 1.76.0-nightly (87e1447aa 2023-11-30)` I get\n```text\n256: time:   0.002; rss:   58MB ->   62MB (   +3MB)     MIR_borrow_checking\n512: time:   0.005; rss:   59MB ->   64MB (   +5MB)     MIR_borrow_checking\n1024: time:   0.014; rss:   60MB ->   65MB (   +5MB)    MIR_borrow_checking\n2048: time:   0.049; rss:   62MB ->   69MB (   +7MB)    MIR_borrow_checking\n4096: time:   0.161; rss:   65MB ->   76MB (  +12MB)    MIR_borrow_checking\n8192: time:   0.599; rss:   72MB ->   92MB (  +20MB)    MIR_borrow_checking\n16384: time:   2.309; rss:   85MB ->  110MB (  +25MB)   MIR_borrow_checking\n32768: time:   9.270; rss:  114MB ->  161MB (  +47MB)   MIR_borrow_checking\n65536: time:  48.641; rss:  154MB ->  242MB (  +88MB)   MIR_borrow_checking\n```\nwhich is still quadratic. I'd be curious to know if it's still match checking that drives this issue, how could I measure that?\n\nIf it is indeed match checking, then I'd like to close this as wontfix. I've done what I could to reduce this quadraticness (most notably https://github.com/rust-lang/rust/pull/117611) and I don't believe tackling this further would be worth it for typical matches (I have ideas but they would require a lot of allocations and increased code complexity).",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1835387426/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1835389583",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-1835389583",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 1835389583,
    "node_id": "IC_kwDOAAsO6M5tZdKP",
    "user": {
      "login": "ishitatsuyuki",
      "id": 12389383,
      "node_id": "MDQ6VXNlcjEyMzg5Mzgz",
      "avatar_url": "https://avatars.githubusercontent.com/u/12389383?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ishitatsuyuki",
      "html_url": "https://github.com/ishitatsuyuki",
      "followers_url": "https://api.github.com/users/ishitatsuyuki/followers",
      "following_url": "https://api.github.com/users/ishitatsuyuki/following{/other_user}",
      "gists_url": "https://api.github.com/users/ishitatsuyuki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ishitatsuyuki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ishitatsuyuki/subscriptions",
      "organizations_url": "https://api.github.com/users/ishitatsuyuki/orgs",
      "repos_url": "https://api.github.com/users/ishitatsuyuki/repos",
      "events_url": "https://api.github.com/users/ishitatsuyuki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ishitatsuyuki/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-01T03:16:31Z",
    "updated_at": "2023-12-01T03:16:31Z",
    "body": "I think it's fine to close this as wontfix. Also, thanks for your work on rewriting the check passes! It's a quite complicated problem and I was surprised you were able to make it quite a bit faster.",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1835389583/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1835410475",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-1835410475",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 1835410475,
    "node_id": "IC_kwDOAAsO6M5tZiQr",
    "user": {
      "login": "Nadrieril",
      "id": 6783654,
      "node_id": "MDQ6VXNlcjY3ODM2NTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6783654?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Nadrieril",
      "html_url": "https://github.com/Nadrieril",
      "followers_url": "https://api.github.com/users/Nadrieril/followers",
      "following_url": "https://api.github.com/users/Nadrieril/following{/other_user}",
      "gists_url": "https://api.github.com/users/Nadrieril/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Nadrieril/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Nadrieril/subscriptions",
      "organizations_url": "https://api.github.com/users/Nadrieril/orgs",
      "repos_url": "https://api.github.com/users/Nadrieril/repos",
      "events_url": "https://api.github.com/users/Nadrieril/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Nadrieril/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2023-12-01T03:47:41Z",
    "updated_at": "2023-12-01T03:47:41Z",
    "body": "Thank you! I'll close it then, and someone can reopen if they feel it's relevant",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1835410475/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2712471312",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-2712471312",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 2712471312,
    "node_id": "IC_kwDOAAsO6M6hrQcQ",
    "user": {
      "login": "theemathas",
      "id": 6120103,
      "node_id": "MDQ6VXNlcjYxMjAxMDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6120103?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theemathas",
      "html_url": "https://github.com/theemathas",
      "followers_url": "https://api.github.com/users/theemathas/followers",
      "following_url": "https://api.github.com/users/theemathas/following{/other_user}",
      "gists_url": "https://api.github.com/users/theemathas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theemathas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theemathas/subscriptions",
      "organizations_url": "https://api.github.com/users/theemathas/orgs",
      "repos_url": "https://api.github.com/users/theemathas/repos",
      "events_url": "https://api.github.com/users/theemathas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theemathas/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2025-03-11T03:24:22Z",
    "updated_at": "2025-03-11T03:26:36Z",
    "body": "I've seen two people ran into what I think is this issue in real use cases. They involve matching over all possible kinds of game entity types / all existing sprites. I've previously reported this at #133945",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2712471312/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2715818566",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-2715818566",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 2715818566,
    "node_id": "IC_kwDOAAsO6M6h4BpG",
    "user": {
      "login": "Nadrieril",
      "id": 6783654,
      "node_id": "MDQ6VXNlcjY3ODM2NTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6783654?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Nadrieril",
      "html_url": "https://github.com/Nadrieril",
      "followers_url": "https://api.github.com/users/Nadrieril/followers",
      "following_url": "https://api.github.com/users/Nadrieril/following{/other_user}",
      "gists_url": "https://api.github.com/users/Nadrieril/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Nadrieril/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Nadrieril/subscriptions",
      "organizations_url": "https://api.github.com/users/Nadrieril/orgs",
      "repos_url": "https://api.github.com/users/Nadrieril/repos",
      "events_url": "https://api.github.com/users/Nadrieril/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Nadrieril/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2025-03-11T22:12:37Z",
    "updated_at": "2025-03-11T22:12:37Z",
    "body": "Running the [silly example](https://github.com/rust-lang/rust/issues/7462#issuecomment-1835387426) with `-Zself-profile`, I get for N=2^15 branches:\n```text\n+--------------------------------------------------------+-----------+-----------------+----------+------------+\n| Item                                                   | Self time | % of total time | Time     | Item count |\n+--------------------------------------------------------+-----------+-----------------+----------+------------+\n| check_match                                            | 3.16s     | 79.678          | 3.16s    | 1          |\n+--------------------------------------------------------+-----------+-----------------+----------+------------+\n| mir_borrowck                                           | 549.36ms  | 13.843          | 553.29ms | 1          |\n+--------------------------------------------------------+-----------+-----------------+----------+------------+\n| run_linker                                             | 49.54ms   | 1.248           | 49.54ms  | 1          |\n+--------------------------------------------------------+-----------+-----------------+----------+------------+\n| mir_built                                              | 34.77ms   | 0.876           | 3.20s    | 1          |\n```\nand for N=2^16 branches\n```text\n--------------------------------------------------------+-----------+-----------------+----------+------------+\n| Item                                                   | Self time | % of total time | Time     | Item count |\n+--------------------------------------------------------+-----------+-----------------+----------+------------+\n| check_match                                            | 17.20s    | 86.436          | 17.20s   | 1          |\n+--------------------------------------------------------+-----------+-----------------+----------+------------+\n| mir_borrowck                                           | 2.16s     | 10.838          | 2.16s    | 1          |\n+--------------------------------------------------------+-----------+-----------------+----------+------------+\n| mir_built                                              | 90.85ms   | 0.457           | 17.31s   | 1          |\n+--------------------------------------------------------+-----------+-----------------+----------+------------+\n| run_linker                                             | 71.40ms   | 0.359           | 71.40ms  | 1          |\n```\n\nSo MIR lowering is roughly `O(N^1.5)`, borrowck is `O(N^2)`, and match checking is between `O(N^2)` and `O(N^2.5)`, with a worse constant factor :')",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2715818566/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2715835209",
    "html_url": "https://github.com/rust-lang/rust/issues/7462#issuecomment-2715835209",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/7462",
    "id": 2715835209,
    "node_id": "IC_kwDOAAsO6M6h4FtJ",
    "user": {
      "login": "Nadrieril",
      "id": 6783654,
      "node_id": "MDQ6VXNlcjY3ODM2NTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6783654?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Nadrieril",
      "html_url": "https://github.com/Nadrieril",
      "followers_url": "https://api.github.com/users/Nadrieril/followers",
      "following_url": "https://api.github.com/users/Nadrieril/following{/other_user}",
      "gists_url": "https://api.github.com/users/Nadrieril/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Nadrieril/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Nadrieril/subscriptions",
      "organizations_url": "https://api.github.com/users/Nadrieril/orgs",
      "repos_url": "https://api.github.com/users/Nadrieril/repos",
      "events_url": "https://api.github.com/users/Nadrieril/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Nadrieril/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2025-03-11T22:22:23Z",
    "updated_at": "2025-03-11T22:22:23Z",
    "body": "Reopening because it does feel like an issue, though I don't know how likely it is that we can fix it.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/2715835209/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
