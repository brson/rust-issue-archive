[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33895744",
    "html_url": "https://github.com/rust-lang/rust/issues/11985#issuecomment-33895744",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/11985",
    "id": 33895744,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODk1NzQ0",
    "user": {
      "login": "adrientetar",
      "id": 1250894,
      "node_id": "MDQ6VXNlcjEyNTA4OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1250894?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adrientetar",
      "html_url": "https://github.com/adrientetar",
      "followers_url": "https://api.github.com/users/adrientetar/followers",
      "following_url": "https://api.github.com/users/adrientetar/following{/other_user}",
      "gists_url": "https://api.github.com/users/adrientetar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adrientetar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adrientetar/subscriptions",
      "organizations_url": "https://api.github.com/users/adrientetar/orgs",
      "repos_url": "https://api.github.com/users/adrientetar/repos",
      "events_url": "https://api.github.com/users/adrientetar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adrientetar/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2014-02-02T09:09:12Z",
    "updated_at": "2014-02-02T21:11:40Z",
    "body": "This might make it work:\n\n``` diff\ncommit 0b215c3286c0dc7c2b2569c65b08c07c7e0d302d\nAuthor: Adrien T\u00e9tar <adri-from-59 at hotmail period fr>\nDate:   Sun Feb 2 09:56:02 2014 +0100\n\n    etc/tidy: pass triple information to SNAP\n\ndiff --git a/mk/tests.mk b/mk/tests.mk\nindex d50f987..e44c046 100644\n--- a/mk/tests.mk\n+++ b/mk/tests.mk\n@@ -255,13 +255,13 @@ tidy:\n        | grep '^$(S)src/llvm' -v \\\n        | grep '^$(S)src/gyp' -v \\\n        | xargs -n 10 $(CFG_PYTHON) $(S)src/etc/tidy.py\n-       $(Q)find $(S)src/etc -name '*.py' \\\n+       $(CFG_BUILD) $(Q)find $(S)src/etc -name '*.py' \\\n        | xargs -n 10 $(CFG_PYTHON) $(S)src/etc/tidy.py\n-       $(Q)echo $(ALL_CS) \\\n+       $(CFG_BUILD) $(Q)echo $(ALL_CS) \\\n        | xargs -n 10 $(CFG_PYTHON) $(S)src/etc/tidy.py\n-       $(Q)echo $(ALL_HS) \\\n+       $(CFG_BUILD) $(Q)echo $(ALL_HS) \\\n        | xargs -n 10 $(CFG_PYTHON) $(S)src/etc/tidy.py\n-       $(Q)find $(S)src -type f -perm +111 \\\n+       $(CFG_BUILD) $(Q)find $(S)src -type f -perm +111 \\\n            -not -name '*.rs' -and -not -name '*.py' \\\n            -and -not -name '*.sh' \\\n        | grep '^$(S)src/llvm' -v \\\ndiff --git a/src/etc/tidy.py b/src/etc/tidy.py\nindex 3364ddc..1a5d2ac 100644\n--- a/src/etc/tidy.py\n+++ b/src/etc/tidy.py\n@@ -33,8 +33,8 @@ def do_license_check(name, contents):\n     if not check_license(name, contents):\n         report_error_name_no(name, 1, \"incorrect license\")\n\n-\n-file_names = [s for s in sys.argv[1:] if (not s.endswith(\"_gen.rs\"))\n+triple = sys.argv[1]\n+file_names = [s for s in sys.argv[2:] if (not s.endswith(\"_gen.rs\"))\n                                      and (not \".#\" in s)]\n\n current_name = \"\"\n@@ -58,7 +58,7 @@ try:\n             match = re.match(r'^.*//\\s*SNAP\\s+(\\w+)', line)\n             if match:\n                 hsh = match.group(1)\n-                a, b, c, phash = snapshot.determine_curr_snapshot_info()\n+                a, b, c, phash = snapshot.determine_curr_snapshot_info(triple)\n                 if not phash.startswith(hsh):\n                     report_err(\"Snapshot out of date: \" + line)\n             else:\n```\n\nEDIT: this does not seem to work; the nested grep and xargs seem to pass args in a special way. (`triple` ends up being the name of a file to scan)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/33895744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
