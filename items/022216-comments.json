[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74145893",
    "html_url": "https://github.com/rust-lang/rust/issues/22216#issuecomment-74145893",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22216",
    "id": 74145893,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MTQ1ODkz",
    "user": {
      "login": "mdinger",
      "id": 4156987,
      "node_id": "MDQ6VXNlcjQxNTY5ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4156987?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mdinger",
      "html_url": "https://github.com/mdinger",
      "followers_url": "https://api.github.com/users/mdinger/followers",
      "following_url": "https://api.github.com/users/mdinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/mdinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mdinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mdinger/subscriptions",
      "organizations_url": "https://api.github.com/users/mdinger/orgs",
      "repos_url": "https://api.github.com/users/mdinger/repos",
      "events_url": "https://api.github.com/users/mdinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mdinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-12T20:26:10Z",
    "updated_at": "2015-02-12T20:26:10Z",
    "body": "This gives the same error and might be arguably more clear, but not by much because the problem remains.\n\n``` rust\nfn forgot_to_return() -> usize {\n    while true {}\n}\n```\n\nWhat would a fix look like though? Should `while` and other similar keywords have special cases such as:\n\n``` rust\n<anon>:4:5: 6:6 error: a `while` loop expression of type `()` is being returned but `usize` is expected\n<anon>:4:5: 6:6 error: mismatched types:\n expected `usize`,\n    found `()`\n(expected usize,\n    found ()) [E0308]\n<anon>:4     while 4 > 3 {\n<anon>:5         /* do something */\n<anon>:6     }\nerror: aborting due to previous error\n```\n\nMaybe this:\n\n``` rust\n<anon>:4:5: 6:6 error: mismatched types:\n expected `usize`,\n    found `()`\n(expected usize,\n    found a `while` loop expression returning `()`) [E0308]\n<anon>:4     while 4 > 3 {\n<anon>:5         /* do something */\n<anon>:6     }\nerror: aborting due to previous error\n```\n\nI actually like the second better. I wasn't sure how a better error would look before this. Maybe the tip should be via a warning or a `try this` comment. It's less likely to be fixed if the _fixed_ form isn't decided or clear.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74145893/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74669263",
    "html_url": "https://github.com/rust-lang/rust/issues/22216#issuecomment-74669263",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22216",
    "id": 74669263,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NjY5MjYz",
    "user": {
      "login": "Xirdus",
      "id": 4664749,
      "node_id": "MDQ6VXNlcjQ2NjQ3NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4664749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Xirdus",
      "html_url": "https://github.com/Xirdus",
      "followers_url": "https://api.github.com/users/Xirdus/followers",
      "following_url": "https://api.github.com/users/Xirdus/following{/other_user}",
      "gists_url": "https://api.github.com/users/Xirdus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Xirdus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Xirdus/subscriptions",
      "organizations_url": "https://api.github.com/users/Xirdus/orgs",
      "repos_url": "https://api.github.com/users/Xirdus/repos",
      "events_url": "https://api.github.com/users/Xirdus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Xirdus/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-17T13:44:26Z",
    "updated_at": "2015-02-17T13:44:26Z",
    "body": "I think it shouldn't be limited to particular keywords, but general - whenever it's about wrong return type, the error should read \"mismatched return type (missing return?)\" or something instead of the generic \"mismatched types\".\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74669263/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74765156",
    "html_url": "https://github.com/rust-lang/rust/issues/22216#issuecomment-74765156",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22216",
    "id": 74765156,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzY1MTU2",
    "user": {
      "login": "mdinger",
      "id": 4156987,
      "node_id": "MDQ6VXNlcjQxNTY5ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4156987?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mdinger",
      "html_url": "https://github.com/mdinger",
      "followers_url": "https://api.github.com/users/mdinger/followers",
      "following_url": "https://api.github.com/users/mdinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/mdinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mdinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mdinger/subscriptions",
      "organizations_url": "https://api.github.com/users/mdinger/orgs",
      "repos_url": "https://api.github.com/users/mdinger/repos",
      "events_url": "https://api.github.com/users/mdinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mdinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-02-17T22:08:46Z",
    "updated_at": "2015-02-17T22:08:46Z",
    "body": "This isn't just restricted to function return types. These are just to highlight that when the expression is big, it's especially unclear what the problem is. It just looks like something is wrong with the `while` loop but it's not clear what.\n\nThis isn't returning anything but has the same issue:\n\n``` rust\nfn main() {\n    let _: usize = while 4 > 3 {\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n        let _ = 3;\n    };\n}\n```\n\nOutput:\n\n``` cmd\n<anon>:2:20: 33:6 error: mismatched types:\n expected `usize`,\n    found `()`\n(expected usize,\n    found ()) [E0308]\n<anon>:2     let _: usize = while 4 > 3 {\n<anon>:3         let _ = 3;\n<anon>:4         let _ = 3;\n<anon>:5         let _ = 3;\n<anon>:6         let _ = 3;\n<anon>:7         let _ = 3;\n         ...\nerror: aborting due to previous error\nplaypen: application terminated with error code 101\n```\n\n---\n\nAll this error states is that there is a mismatch on line 2 which includes a `while` loop. Where in this huge expression is the problem?\n\n---\n\nSimilarly, this doesn't work:\n\n``` rust\nfn main() {\n    let x = 3;\n    let _: usize = match x {\n        0 => while true {\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n            let _ = 3;\n        },\n        _ => 3,\n    };\n}\n```\n\n``` cmd\n<anon>:4:14: 35:10 error: mismatched types:\n expected `usize`,\n    found `()`\n(expected usize,\n    found ()) [E0308]\n<anon>:4         0 => while true {\n<anon>:5             let _ = 3;\n<anon>:6             let _ = 3;\n<anon>:7             let _ = 3;\n<anon>:8             let _ = 3;\n<anon>:9             let _ = 3;\n         ...\nerror: aborting due to previous error\nplaypen: application terminated with error code 101\n```\n\n---\n\nI think nesting can make these even more unclear.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/74765156/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/192439441",
    "html_url": "https://github.com/rust-lang/rust/issues/22216#issuecomment-192439441",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22216",
    "id": 192439441,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MjQzOTQ0MQ==",
    "user": {
      "login": "steveklabnik",
      "id": 27786,
      "node_id": "MDQ6VXNlcjI3Nzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steveklabnik",
      "html_url": "https://github.com/steveklabnik",
      "followers_url": "https://api.github.com/users/steveklabnik/followers",
      "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions",
      "organizations_url": "https://api.github.com/users/steveklabnik/orgs",
      "repos_url": "https://api.github.com/users/steveklabnik/repos",
      "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steveklabnik/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-03-04T19:56:37Z",
    "updated_at": "2016-03-04T19:56:37Z",
    "body": "Triage: this diagnostic remains the same today.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/192439441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/300612655",
    "html_url": "https://github.com/rust-lang/rust/issues/22216#issuecomment-300612655",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/22216",
    "id": 300612655,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDYxMjY1NQ==",
    "user": {
      "login": "Mark-Simulacrum",
      "id": 5047365,
      "node_id": "MDQ6VXNlcjUwNDczNjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mark-Simulacrum",
      "html_url": "https://github.com/Mark-Simulacrum",
      "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers",
      "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions",
      "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs",
      "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos",
      "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2017-05-10T21:06:41Z",
    "updated_at": "2017-05-10T21:06:41Z",
    "body": "Closing in favor of collective issue for this general problem: https://github.com/rust-lang/rust/issues/41897.",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/300612655/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
