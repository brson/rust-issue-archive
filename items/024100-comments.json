[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90291436",
    "html_url": "https://github.com/rust-lang/rust/issues/24100#issuecomment-90291436",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24100",
    "id": 90291436,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkwMjkxNDM2",
    "user": {
      "login": "goertzenator",
      "id": 605072,
      "node_id": "MDQ6VXNlcjYwNTA3Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/605072?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/goertzenator",
      "html_url": "https://github.com/goertzenator",
      "followers_url": "https://api.github.com/users/goertzenator/followers",
      "following_url": "https://api.github.com/users/goertzenator/following{/other_user}",
      "gists_url": "https://api.github.com/users/goertzenator/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/goertzenator/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/goertzenator/subscriptions",
      "organizations_url": "https://api.github.com/users/goertzenator/orgs",
      "repos_url": "https://api.github.com/users/goertzenator/repos",
      "events_url": "https://api.github.com/users/goertzenator/events{/privacy}",
      "received_events_url": "https://api.github.com/users/goertzenator/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-06T23:56:39Z",
    "updated_at": "2015-04-06T23:56:39Z",
    "body": "Me too:\n\nCrate: https://github.com/goertzenator/liblrust\n\nOutput: https://gist.github.com/goertzenator/912f010da6f2ae243336\n\nRust:\n\n```\nrustc 1.0.0-beta (9854143cb 2015-04-02) (built 2015-04-02)\n```\n\nOS:\n\n```\nLinux goertzen-G550JK 3.16.0-33-generic #44-Ubuntu SMP Thu Mar 12 12:19:35 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/90291436/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/92674963",
    "html_url": "https://github.com/rust-lang/rust/issues/24100#issuecomment-92674963",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24100",
    "id": 92674963,
    "node_id": "MDEyOklzc3VlQ29tbWVudDkyNjc0OTYz",
    "user": {
      "login": "robn",
      "id": 130670,
      "node_id": "MDQ6VXNlcjEzMDY3MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/130670?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robn",
      "html_url": "https://github.com/robn",
      "followers_url": "https://api.github.com/users/robn/followers",
      "following_url": "https://api.github.com/users/robn/following{/other_user}",
      "gists_url": "https://api.github.com/users/robn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robn/subscriptions",
      "organizations_url": "https://api.github.com/users/robn/orgs",
      "repos_url": "https://api.github.com/users/robn/repos",
      "events_url": "https://api.github.com/users/robn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robn/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-14T07:27:04Z",
    "updated_at": "2015-04-14T07:27:04Z",
    "body": "Me three, with this trivial program:\n\n``` rust\n#[derive(Debug)]\nstruct S {\n    v: String,\n}\n\nfn main() {\n    let x = S { v: \"hello\".to_string() };\n    println!(\"{:?}\", x as S);\n}\n```\n\n```\n$ RUST_BACKTRACE=1 rustc test.rs \nerror: internal compiler error: translating unsupported cast: S (cast_other) -> S (cast_other)\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /home/robn/code/rust/rust/src/libsyntax/diagnostic.rs:190\n\nstack backtrace:\n   1:     0x7f9ef6fdb0b8 - sys::backtrace::write::hc7bf68ee23aa2a47IJC\n   2:     0x7f9ef7006460 - panicking::on_panic::hae54fd167ccd0c87sXI\n   3:     0x7f9ef6f3e193 - rt::unwind::begin_unwind_inner::h04b19af4046d9402ACI\n   4:     0x7f9ef430657d - rt::unwind::begin_unwind::h14358179414781977900\n   5:     0x7f9ef4306cd2 - diagnostic::Handler::bug::h6b05bef8ecda0ec4ZsB\n   6:     0x7f9ef4d1980b - session::Session::bug::h7677b9d1b16c63a2oYq\n   7:     0x7f9ef668358a - trans::expr::trans_imm_cast::h3c51f5e7bab523a6nKj\n   8:     0x7f9ef666b3b9 - trans::expr::trans_unadjusted::h50be0c1e615b9b53TXh\n   9:     0x7f9ef6622944 - trans::expr::trans::h5fac271f51fcff39Blh\n  10:     0x7f9ef6682347 - trans::expr::trans_addr_of::h6ef6c8160ed58d06fij\n  11:     0x7f9ef666b67f - trans::expr::trans_unadjusted::h50be0c1e615b9b53TXh\n  12:     0x7f9ef6620ff9 - trans::expr::trans_into::h03dc3dcf7bddc72dgfh\n  13:     0x7f9ef669e4bd - trans::expr::trans_adt::h390328ce7ac619d86Yi\n  14:     0x7f9ef666ee4e - trans::expr::trans_rvalue_dps_unadjusted::ha57d2ad1e4a3199amti\n  15:     0x7f9ef666b1e0 - trans::expr::trans_unadjusted::h50be0c1e615b9b53TXh\n  16:     0x7f9ef6622944 - trans::expr::trans::h5fac271f51fcff39Blh\n  17:     0x7f9ef6719a60 - trans::_match::trans_match_inner::hc4bc6db15d8e6ce3gUw\n  18:     0x7f9ef666ca8c - trans::expr::trans_rvalue_dps_unadjusted::ha57d2ad1e4a3199amti\n  19:     0x7f9ef666b1e0 - trans::expr::trans_unadjusted::h50be0c1e615b9b53TXh\n  20:     0x7f9ef6622944 - trans::expr::trans::h5fac271f51fcff39Blh\n  21:     0x7f9ef6682347 - trans::expr::trans_addr_of::h6ef6c8160ed58d06fij\n  22:     0x7f9ef666b67f - trans::expr::trans_unadjusted::h50be0c1e615b9b53TXh\n  23:     0x7f9ef6622944 - trans::expr::trans::h5fac271f51fcff39Blh\n  24:     0x7f9ef665a28f - trans::callee::trans_args::hea46cd98019ae23d9Rg\n  25:     0x7f9ef6660d24 - trans::callee::trans_call_inner::h8036123679852670048\n  26:     0x7f9ef666d583 - trans::expr::trans_rvalue_dps_unadjusted::ha57d2ad1e4a3199amti\n  27:     0x7f9ef666b1e0 - trans::expr::trans_unadjusted::h50be0c1e615b9b53TXh\n  28:     0x7f9ef6622944 - trans::expr::trans::h5fac271f51fcff39Blh\n  29:     0x7f9ef665a28f - trans::callee::trans_args::hea46cd98019ae23d9Rg\n  30:     0x7f9ef6660d24 - trans::callee::trans_call_inner::h8036123679852670048\n  31:     0x7f9ef666d583 - trans::expr::trans_rvalue_dps_unadjusted::ha57d2ad1e4a3199amti\n  32:     0x7f9ef6620fd8 - trans::expr::trans_into::h03dc3dcf7bddc72dgfh\n  33:     0x7f9ef6620056 - trans::controlflow::trans_stmt_semi::hd76f97e4ff316b93L5d\n  34:     0x7f9ef6621ca5 - trans::controlflow::trans_block::h2574d0aaf248b2a2H6d\n  35:     0x7f9ef66f8d2f - trans::base::trans_closure::h4bbbebda4a6a2eaeQtt\n  36:     0x7f9ef660ac76 - trans::base::trans_fn::hc59e1e3af67fd20dzEt\n  37:     0x7f9ef660590f - trans::base::trans_item::h0c811983fce37f04P2t\n  38:     0x7f9ef670126c - trans::base::trans_crate::h84a63b946dfd0dd2lZu\n  39:     0x7f9ef766e84f - driver::phase_4_translate_to_llvm::h0f768fc8e75d0e95aOa\n  40:     0x7f9ef764629b - driver::compile_input::h154756c108de519fQba\n  41:     0x7f9ef76fd675 - run_compiler::hd45ff49ff4db7f9fV4b\n  42:     0x7f9ef76faf8d - boxed::F.FnBox<A>::call_box::h998211653744645471\n  43:     0x7f9ef76fa4c9 - rt::unwind::try::try_fn::h5486996895865591730\n  44:     0x7f9ef708b748 - rust_try_inner\n  45:     0x7f9ef708b735 - rust_try\n  46:     0x7f9ef76fa79b - boxed::F.FnBox<A>::call_box::h4941640570998788665\n  47:     0x7f9ef6ff1471 - sys::thread::create::thread_start::haf7c3f703308e235ExH\n  48:     0x7f9ef0f480a3 - start_thread\n  49:     0x7f9ef6ba804c - __clone\n  50:                0x0 - <unknown>\n```\n\nSelf-built rustc from the 1.0.0-beta commit:\n\n```\n$ rustc --version --verbose\nrustc 1.0.0-dev (9854143cb 2015-04-02) (built 2015-04-07)\nbinary: rustc\ncommit-hash: 9854143cba679834bc4ef932858cd5303f015a0e\ncommit-date: 2015-04-02\nbuild-date: 2015-04-07\nhost: x86_64-unknown-linux-gnu\nrelease: 1.0.0-dev\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/92674963/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/96683487",
    "html_url": "https://github.com/rust-lang/rust/issues/24100#issuecomment-96683487",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/24100",
    "id": 96683487,
    "node_id": "MDEyOklzc3VlQ29tbWVudDk2NjgzNDg3",
    "user": {
      "login": "polyfractal",
      "id": 1224228,
      "node_id": "MDQ6VXNlcjEyMjQyMjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1224228?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/polyfractal",
      "html_url": "https://github.com/polyfractal",
      "followers_url": "https://api.github.com/users/polyfractal/followers",
      "following_url": "https://api.github.com/users/polyfractal/following{/other_user}",
      "gists_url": "https://api.github.com/users/polyfractal/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/polyfractal/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/polyfractal/subscriptions",
      "organizations_url": "https://api.github.com/users/polyfractal/orgs",
      "repos_url": "https://api.github.com/users/polyfractal/repos",
      "events_url": "https://api.github.com/users/polyfractal/events{/privacy}",
      "received_events_url": "https://api.github.com/users/polyfractal/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2015-04-27T14:51:26Z",
    "updated_at": "2015-04-27T14:51:26Z",
    "body": "Adding another report, with a similar setup.  Encountered this in my code, boiled it down to this test...looks very similar to @robn's ICE, since it is trying to cast \"same\" -> \"same\".\n\nSeems to only happen when trying to cast a struct to itself with `as`.  If you use primitive types, there is no ICE.  I tried deriving `Copy`/`Clone` to see if that was the problem, but it still threw an ICE.\n\n```\nerror: internal compiler error: translating unsupported cast: TestStruct (cast_other) -> TestStruct (cast_other)\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/libsyntax/diagnostic.rs:230\n\nstack backtrace:\n   1:        0x10dd99b3f - sys::backtrace::write::h7c4b7b31b5a98994KVr\n   2:        0x10dda2242 - panicking::on_panic::h130becb52f065864NVv\n   3:        0x10dd5e985 - rt::unwind::begin_unwind_inner::hf2ec506d50a3ea22wDv\n   4:        0x10d5692de - rt::unwind::begin_unwind::h10963008848674724601\n   5:        0x10d569a82 - diagnostic::Handler::bug::h7f6411f5b5710a68VxB\n   6:        0x10af2d887 - session::Session::bug::h67c3e63982ede886xWp\n   7:        0x10a767a0c - trans::expr::trans_imm_cast::h56c659d7a3aa3946OkC\n   8:        0x10a75bbde - trans::expr::trans_unadjusted::h16ccd3176676f118vxA\n   9:        0x10a72fdf7 - trans::expr::trans_into::hb0f7fdd5a2a9abdbj4z\n  10:        0x10a6b1109 - trans::controlflow::trans_block::h12567c1fc6ee8337H1u\n  11:        0x10a6afa06 - trans::base::trans_closure::ha53aa9eb2a9bf670gEh\n  12:        0x10a6b173e - trans::base::trans_fn::h8f58e16c0621df33YOh\n  13:        0x10a6f2f25 - trans::monomorphize::monomorphic_fn::h9b2fe76155400f16iAJ\n  14:        0x10a6e33b7 - trans::callee::trans_fn_ref_with_substs::ha369033cd198b04eBGn\n  15:        0x10a6e1e52 - trans::callee::trans_fn_ref::h20eb8b04123e4545Gun\n  16:        0x10a6f6feb - trans::meth::trans_method_callee::h0e2799d89ca0fda9jxI\n  17:        0x10a6f5533 - trans::callee::trans_call_inner::h2848324853079840396\n  18:        0x10a75c79b - trans::expr::trans_rvalue_dps_unadjusted::hadab5746c39f5e9fY2A\n  19:        0x10a72fdd7 - trans::expr::trans_into::hb0f7fdd5a2a9abdbj4z\n  20:        0x10a7b0c61 - trans::_match::mk_binding_alloca::h3749212929604063812\n  21:        0x10a6a0b39 - trans::base::init_local::hcee21b7a4917a72djXg\n  22:        0x10a6b0df3 - trans::controlflow::trans_block::h12567c1fc6ee8337H1u\n  23:        0x10a6afa06 - trans::base::trans_closure::ha53aa9eb2a9bf670gEh\n  24:        0x10a6b173e - trans::base::trans_fn::h8f58e16c0621df33YOh\n  25:        0x10a6b4d38 - trans::base::trans_item::he86179308be326c4adi\n  26:        0x10a6c3b80 - trans::base::trans_crate::h350105e1ee0f6a06a2i\n  27:        0x10a531c2e - driver::phase_4_translate_to_llvm::h7039638042d67b1enOa\n  28:        0x10a50a7a9 - driver::compile_input::h65cad254ac62afa6Qba\n  29:        0x10a5c9613 - run_compiler::hbd6a992aacaf1248F4b\n  30:        0x10a5c6d7a - boxed::F.FnBox<A>::call_box::h9480122591250505076\n  31:        0x10a5c62c7 - rt::unwind::try::try_fn::h5956310425634165804\n  32:        0x10de24618 - rust_try_inner\n  33:        0x10de24605 - rust_try\n  34:        0x10a5c659e - boxed::F.FnBox<A>::call_box::h8195565033996650298\n  35:        0x10dda0c3d - sys::thread::Thread::new::thread_start::h8efe8b1c3780385fvYu\n  36:     0x7fff92e872fb - _pthread_body\n  37:     0x7fff92e87278 - _pthread_start\n```\n\n```\nrustc 1.1.0-nightly (5fb0259ed 2015-04-26) (built 2015-04-26)\nbinary: rustc\ncommit-hash: 5fb0259edfbc4034cfbcf827ab91d6118b7ae848\ncommit-date: 2015-04-26\nbuild-date: 2015-04-26\nhost: x86_64-apple-darwin\nrelease: 1.1.0-nightly\n```\n\n``` rust\npub struct Consumer<T> {\n    vec: Vec<T>\n}\n\nimpl<T> Consumer<T> {\n    pub fn pop(&mut self) -> T {\n        self.vec.pop().unwrap() as T // <--- Removing \"as T\" fixes the ICE\n    }\n}\n\n// #[derive(Copy, Clone)]  // <-- tried to add Copy/Clone, does not fix ICE\nstruct TestStruct {\n    a: u32\n}\n\nimpl TestStruct {\n    pub fn new() -> TestStruct {\n        TestStruct { a: 19 }\n    }\n}\n\n\n#[test]\nfn test_struct() {\n    let mut c = Consumer {\n        vec: vec![TestStruct::new(), TestStruct::new()]\n        //vec: vec![0,1,2,3]        // <-- works fine\n    };\n\n    let t: TestStruct = c.pop();\n}\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/96683487/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
