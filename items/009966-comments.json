[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26661175",
    "html_url": "https://github.com/rust-lang/rust/pull/9966#issuecomment-26661175",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9966",
    "id": 26661175,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NjYxMTc1",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-19T23:19:38Z",
    "updated_at": "2013-10-19T23:19:48Z",
    "body": "What happens for (e.g.) `#[linkage(dll_export)]` on Linux?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26661175/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26661301",
    "html_url": "https://github.com/rust-lang/rust/pull/9966#issuecomment-26661301",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9966",
    "id": 26661301,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NjYxMzAx",
    "user": {
      "login": "eddyb",
      "id": 77424,
      "node_id": "MDQ6VXNlcjc3NDI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eddyb",
      "html_url": "https://github.com/eddyb",
      "followers_url": "https://api.github.com/users/eddyb/followers",
      "following_url": "https://api.github.com/users/eddyb/following{/other_user}",
      "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions",
      "organizations_url": "https://api.github.com/users/eddyb/orgs",
      "repos_url": "https://api.github.com/users/eddyb/repos",
      "events_url": "https://api.github.com/users/eddyb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eddyb/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-19T23:28:24Z",
    "updated_at": "2013-10-19T23:28:24Z",
    "body": "That's odd... LLVM doesn't error when using `dll_export` on Linux. However, I expect that to be a compatibility feature, since the test works with `dll_export` as it does with `external`.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26661301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26666271",
    "html_url": "https://github.com/rust-lang/rust/pull/9966#issuecomment-26666271",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9966",
    "id": 26666271,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NjY2Mjcx",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-20T06:49:33Z",
    "updated_at": "2013-10-20T06:49:33Z",
    "body": "I'm a little uneasy about this change. Could you elaborate a little more on what the main purpose for these is going to be?\n\nI'm generally of the opinion that we should be able to infer as much of this as possible. We already infer whether to make a function externally visible (or at least we should be correctly doing so). You can very easily shoot yourself in the foot by tinkering with these linkage attributes too much, which rust strives to make it very hard to do so.\n\nThis seems to be like more of a bug in other portions of the language than to attempt to allow this on a per-item basis. Our management of linkage of symbols is already hairy enough as-is, and throwing this in the mix could very easily produce unexpected results. I personally don't think that we should have the `weak_linkage` or `link_name` attributes, I think that we're starting to allow too much power for such small use cases.\n\nI still believe that all use cases should be encodable in some form of rust, but not necessarily through the use of attributes. Things like:\n- If you want an `internal` linkage function, you shouldn't make it accessible from the outside world\n- If you want an `external` linkage function, you should make it accessible from the outside world (pub from the root)\n- If you declare `extern \"C\"`, we probably shouldn't flag that as internal (seeing how you explicitly wrote the `extern` on it)\n- It's not clear to me what dll import/export do for windows, so I would need to understand more about them before saying how they should be encoded in rust\n\nAgain though, I could just be unaware of perfectly legitimate use cases which definitely need fine-grained control over linkage. My perference would be to have a different way to encode this type of use other than being able to specify the linkage per-item, though.\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26666271/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26666524",
    "html_url": "https://github.com/rust-lang/rust/pull/9966#issuecomment-26666524",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9966",
    "id": 26666524,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NjY2NTI0",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-20T07:13:59Z",
    "updated_at": "2013-10-20T07:14:21Z",
    "body": "@alexcrichton: A private `extern \"C\"` function should definitely be internal, it's the way to declare a function with a C ABI. You don't want internal functions you pass as function pointers to C to be external.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26666524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26683737",
    "html_url": "https://github.com/rust-lang/rust/pull/9966#issuecomment-26683737",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9966",
    "id": 26683737,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NjgzNzM3",
    "user": {
      "login": "alexcrichton",
      "id": 64996,
      "node_id": "MDQ6VXNlcjY0OTk2",
      "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexcrichton",
      "html_url": "https://github.com/alexcrichton",
      "followers_url": "https://api.github.com/users/alexcrichton/followers",
      "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions",
      "organizations_url": "https://api.github.com/users/alexcrichton/orgs",
      "repos_url": "https://api.github.com/users/alexcrichton/repos",
      "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexcrichton/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-20T21:53:42Z",
    "updated_at": "2013-10-20T21:53:42Z",
    "body": "I was looking over the list of linkages that llvm provides, and this is what I ended up noticing:\n- `private` - this was pretty much the same as `internal`, I don't personally see why rust source would want this and not `internal`\n- `linker_private` - same as above\n- `internal` - this is quite useful, and I believe that the visibility rust has maps well to this, so I'm not sure why you'd want to explicitly flag this on a function\n- `available_externally` - this is currently used for inlining globals, but it's not clear to me why you would want to do this manually with a function\n- `linkonce` - This would be very useful for when we instantiate generic functions, but I don't see why you'd want to place this manually on a function\n- `weak` - It's not clear that this is necessary, if you want this in rust it seems like you may want `extern_weak`, but there may be a use case here that I'm not seeing.\n- `common` - It's not clear to me that we'd want this\n- `appending` - only works if we use llvm arrays, which I don't believe we are currently doing\n- `extern_weak` - This is useful sometimes. I'm not sure it totally makes sense to put on a function though, it may only be applicable to statics.\n- `*_odr` - like generic instantiation, this seems like the compiler should be emitting this instead of users explicitly on fuctions\n- `external` - very useful, but this is encoded with visibility\n- `dllexport` and `dllimport` - I'm still not quite sure what these do, so I wouldn't be able to comment much on them.\n\nFrom this list, it really seems like the useful ones which you'd want to apply are weak and dllimport/export (although I don't know what they do, so perhaps they are encodable in other rust-isms). Overally, it's not clear to me that we're gaining much by allowing such fine-grained control of linkage attributes. The existing cases where a different linkage is desired seem like a bug that should be fixed or it's wontfix behavior.\n\nThat being said, I could certainly be unaware of other use cases!\n",
    "author_association": "MEMBER",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26683737/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26684139",
    "html_url": "https://github.com/rust-lang/rust/pull/9966#issuecomment-26684139",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9966",
    "id": 26684139,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2Njg0MTM5",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-10-20T22:11:06Z",
    "updated_at": "2013-10-20T22:11:48Z",
    "body": "@alexcrichton: `linkonce` isn't useful without translation units that are built together either with static linking or via LTO. It could discard copies of the symbol from within the same crate, but we never have those.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/26684139/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27638733",
    "html_url": "https://github.com/rust-lang/rust/pull/9966#issuecomment-27638733",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/9966",
    "id": 27638733,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NjM4NzMz",
    "user": {
      "login": "thestinger",
      "id": 1505226,
      "node_id": "MDQ6VXNlcjE1MDUyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thestinger",
      "html_url": "https://github.com/thestinger",
      "followers_url": "https://api.github.com/users/thestinger/followers",
      "following_url": "https://api.github.com/users/thestinger/following{/other_user}",
      "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions",
      "organizations_url": "https://api.github.com/users/thestinger/orgs",
      "repos_url": "https://api.github.com/users/thestinger/repos",
      "events_url": "https://api.github.com/users/thestinger/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thestinger/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-03T04:24:06Z",
    "updated_at": "2013-11-03T04:24:06Z",
    "body": "The changes implemented by #9945 have landed, so I think the use case this was meant for is now well covered. I think the Windows issue is likely separate, I don't really understand why `external` wouldn't be the same thing.\n\nWe can revisit this in the future if a use case comes up.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27638733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
