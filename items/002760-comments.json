[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6688110",
    "html_url": "https://github.com/rust-lang/rust/issues/2760#issuecomment-6688110",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2760",
    "id": 6688110,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODgxMTA=",
    "user": {
      "login": "eholk",
      "id": 105766,
      "node_id": "MDQ6VXNlcjEwNTc2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eholk",
      "html_url": "https://github.com/eholk",
      "followers_url": "https://api.github.com/users/eholk/followers",
      "following_url": "https://api.github.com/users/eholk/following{/other_user}",
      "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eholk/subscriptions",
      "organizations_url": "https://api.github.com/users/eholk/orgs",
      "repos_url": "https://api.github.com/users/eholk/repos",
      "events_url": "https://api.github.com/users/eholk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eholk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-06-30T20:07:52Z",
    "updated_at": "2012-06-30T20:07:52Z",
    "body": "I really like being able to write the `map2` example as `map2(|x, y| x + y, [1, 2, 3], [4, 5, 6])`. I'm not sure the parentheses would be required here though even if lambda binds forever, since as far as I know, there's not way `x + y, [1, 2, 3], [4, 5, 6]` would parse as something else.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6688110/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6691183",
    "html_url": "https://github.com/rust-lang/rust/issues/2760#issuecomment-6691183",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2760",
    "id": 6691183,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTExODM=",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-01T05:42:47Z",
    "updated_at": "2012-07-01T05:42:47Z",
    "body": "I'm not well-versed enough in rustic grammar to say for sure, but I think if we allow stopping at commas (at the same paren-level), we won't rule out any cases in which forever-binding could correctly parse more stuff. (That is to say, nobody should be surprised when it parses one way when it could legally have parsed another.)\n\nIt'd be good if someone could confirm that, and also perhaps mention any other stop-binding-here tokens that would be similarly unambiguous.\n\nI'd be wary of adding too many special-cases (\"Oh, and you can _also_ write lambdas like this, if there's a comma, and _also_...\"). I could go either way on the comma case in particular.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6691183/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6691358",
    "html_url": "https://github.com/rust-lang/rust/issues/2760#issuecomment-6691358",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2760",
    "id": 6691358,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTEzNTg=",
    "user": {
      "login": "eholk",
      "id": 105766,
      "node_id": "MDQ6VXNlcjEwNTc2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eholk",
      "html_url": "https://github.com/eholk",
      "followers_url": "https://api.github.com/users/eholk/followers",
      "following_url": "https://api.github.com/users/eholk/following{/other_user}",
      "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eholk/subscriptions",
      "organizations_url": "https://api.github.com/users/eholk/orgs",
      "repos_url": "https://api.github.com/users/eholk/repos",
      "events_url": "https://api.github.com/users/eholk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eholk/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-01T06:23:53Z",
    "updated_at": "2012-07-01T06:23:53Z",
    "body": "It seems to me like we are discussing the difference between the current rule, which is roughly `lambda -> |args| expr`, and the bind forever rule, which is `lambda -> |args| ( expr ; )* expr`. As long as we don't also have a rule like C's comma sequence operator (roughly `expr -> stmt, expr`), then I don't think there's any difficulty in parsing something like `map2(|x, y| let z = x + y; z, [1, 2, 3], [4, 5, 6])`. However, having semicolons in argument lists seems pretty terrible to me...\n\nBind forever has problems in cases like this:\n\n```\nlet x = |z| io::println(z);\nlet x = 5;\n```\n\nUnder the current rule, this first sets `x` to a function that just prints its argument, and then rebinds `x` to `5`. Under bind forever, this binds x to a function that prints its argument and then internally creates a new x that is bound to 5. I'm not really sure how to end the outermost let expression now.\n\nI think the bind forever rule leads to things like this too:\n\n```\nfn foo() {\n   let mut total = 0;\n   for int::range(0, 4) |i| total += i;\n   log(error, total);\n}\n```\n\nWith bind forever, we end up printing 0, then 1, then 3, then 6, instead of just printing 6. I'd be surprised if this is ever what a Rust programmer wants.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6691358/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6695980",
    "html_url": "https://github.com/rust-lang/rust/issues/2760#issuecomment-6695980",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2760",
    "id": 6695980,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTU5ODA=",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-01T18:55:57Z",
    "updated_at": "2012-07-01T18:55:57Z",
    "body": "Hm, that is indeed a problem, but I think a solvable one. We could make the compiler warn on such uses, printing out \"did you mean `(|i| total += i;)`?\"\n\nHow to get the compiler to decide not to warn, in a way not dependent on whitespace (looking for newlines, etc) is still in the air. Maybe there's a grammar-level distinction between the use examples I provided and the ones you said - like \"in the middle of a statement instead of at the start of a new binding group\"?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6695980/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6696898",
    "html_url": "https://github.com/rust-lang/rust/issues/2760#issuecomment-6696898",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2760",
    "id": 6696898,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTY4OTg=",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-01T21:01:42Z",
    "updated_at": "2012-07-01T21:04:58Z",
    "body": "Changed the title. I realised that how far lambda binds is sort of a red herring, and really what I care about is being able to easily write curried functions. I now have another proposal which I think solves every problem, even the \"manually currying requires writing the variable name far away from its type\" one.\n\nLambdas bind one expression, until a semicolon or comma. (It turns out SML stops binding at semicolons too. No big loss) So `for (..) |i| { .. }` is the loop syntax, as people seem to want. But, to avoid drowning in braces when currying, we also add syntax sugar:\n\n```\nfn foo(x: X)@(y: y)~(z: Z) {\n    body\n}\n```\n\nexpands to\n\n```\nfn foo(x: X) -> fn@(Y) -> fn~(Z) {|y||z|{\n    body\n}}\n```\n\n(Maybe default to @, so you can write `fn foo(x: X)(y: Y)~(z: Z)`. Not sure.)\n\nThe only downside of this (apart from opposing my aesthetic preference for the current loop syntax over the new loop syntax, which I'm prepared to part with) is that the \"staged computation\" stuff is lost, and has to be written without sugar - maybe it was just a curiosity to begin with, or maybe we could come up with extra sugar/macros for that.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6696898/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6697032",
    "html_url": "https://github.com/rust-lang/rust/issues/2760#issuecomment-6697032",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2760",
    "id": 6697032,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTcwMzI=",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-01T21:16:10Z",
    "updated_at": "2012-07-01T21:16:31Z",
    "body": "The syntax could further generalise to writing function types, not just function declarations. Consider a zipWith that takes a curryable function as an argument:\n\n```\nfn zipWith(f: fn(A)@(B) -> C) @(list1: [A]) @(list2: [B]) -> [C] {\n```\n\nOr even, if we default to @,\n\n```\nfn zipWith(f: fn(A)(B) -> C) (list1: [A]) (list2: [B]) -> [C] {\n```\n\nI'm playing fast-and-loose with the vector type syntax here, but the more I look at this, the more I like it.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/6697032/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7577727",
    "html_url": "https://github.com/rust-lang/rust/issues/2760#issuecomment-7577727",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/2760",
    "id": 7577727,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1Nzc3Mjc=",
    "user": {
      "login": "bblum",
      "id": 1820515,
      "node_id": "MDQ6VXNlcjE4MjA1MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bblum",
      "html_url": "https://github.com/bblum",
      "followers_url": "https://api.github.com/users/bblum/followers",
      "following_url": "https://api.github.com/users/bblum/following{/other_user}",
      "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bblum/subscriptions",
      "organizations_url": "https://api.github.com/users/bblum/orgs",
      "repos_url": "https://api.github.com/users/bblum/repos",
      "events_url": "https://api.github.com/users/bblum/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bblum/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-08-08T08:15:54Z",
    "updated_at": "2012-08-08T08:15:54Z",
    "body": "Dunno about this one's feasibility, since the new closure syntax has been in for a while. I care less about it, to be sure.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7577727/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
