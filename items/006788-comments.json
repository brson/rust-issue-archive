[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/21495313",
    "html_url": "https://github.com/rust-lang/rust/issues/6788#issuecomment-21495313",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6788",
    "id": 21495313,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNDk1MzEz",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-07-24T15:58:45Z",
    "updated_at": "2013-07-24T15:58:45Z",
    "body": "@jensnockert the gist no longer exists :(\n\nCan you create another testcase?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/21495313/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22059766",
    "html_url": "https://github.com/rust-lang/rust/issues/6788#issuecomment-22059766",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6788",
    "id": 22059766,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMDU5NzY2",
    "user": {
      "login": "auroranockert",
      "id": 49616,
      "node_id": "MDQ6VXNlcjQ5NjE2",
      "avatar_url": "https://avatars.githubusercontent.com/u/49616?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/auroranockert",
      "html_url": "https://github.com/auroranockert",
      "followers_url": "https://api.github.com/users/auroranockert/followers",
      "following_url": "https://api.github.com/users/auroranockert/following{/other_user}",
      "gists_url": "https://api.github.com/users/auroranockert/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/auroranockert/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/auroranockert/subscriptions",
      "organizations_url": "https://api.github.com/users/auroranockert/orgs",
      "repos_url": "https://api.github.com/users/auroranockert/repos",
      "events_url": "https://api.github.com/users/auroranockert/events{/privacy}",
      "received_events_url": "https://api.github.com/users/auroranockert/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-03T19:02:49Z",
    "updated_at": "2013-08-03T19:03:26Z",
    "body": "I'll just repost the Gist, https://gist.github.com/jensnockert/ab64d115023bf9d20261. I changed my username from JensNockert to jensnockert, and the link broke :(\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22059766/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22235028",
    "html_url": "https://github.com/rust-lang/rust/issues/6788#issuecomment-22235028",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6788",
    "id": 22235028,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjM1MDI4",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-08-07T07:45:50Z",
    "updated_at": "2013-08-07T07:45:50Z",
    "body": "Copying the unexpanded version of source code here, to avoid the link-death problems in the future:\n\n``` rust\n#[link(name = \"min\", vers = \"0.1\", uuid = \"430a7e67-8e6a-4041-be05-643fabff74cf\")];\n\n#[crate_type = \"lib\"];\n\n#[nolink]\n#[link_args = \"-framework OpenCL\"]\n#[cfg(target_os = \"macos\")]\nextern { }\n\n#[nolink]\n#[link_args = \"-lOpenCL\"]\n#[cfg(target_os = \"linux\")]\nextern { }\n\n#[nolink]\nextern {\n    unsafe fn clGetPlatformInfo(platform: *libc::c_void, name: u32, value_size: libc::size_t, value: *mut libc::c_void, value_size_ret: *mut libc::size_t) -> i32;\n}\n\nmacro_rules! cl_call(($name:ident : $($arg:expr),+) => ({\n    let error = unsafe { $name($($arg),+) };\n\n    if (error != 0) {\n        return result::Err(error);\n    }\n}))\n\nmacro_rules! cl_call_unknown_length(($name:ident, $n:ty, $in:ty, $out:ty : $($arg:expr),+) => ({\n    let mut n:$n = 0;\n\n    cl_call!($name: $($arg),+, 0, ptr::mut_null(), ptr::to_mut_unsafe_ptr(&mut n));\n\n    let mut result:~[$out] = vec::with_capacity(n as uint);\n\n    cl_call!($name: $($arg),+, n, vec::raw::to_mut_ptr(result) as *mut $in, ptr::mut_null());\n\n    unsafe { vec::raw::set_len(&mut result, n as uint) };\n\n    result\n}))\n\npub fn get_info(id: *libc::c_void, name: u32) -> result::Result<~str, i32> {\n    return result::Ok(str::from_bytes(cl_call_unknown_length!(clGetPlatformInfo, libc::size_t, libc::c_void, u8: id, name)));\n}\n```\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/22235028/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27637344",
    "html_url": "https://github.com/rust-lang/rust/issues/6788#issuecomment-27637344",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6788",
    "id": 27637344,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NjM3MzQ0",
    "user": {
      "login": "huonw",
      "id": 1203825,
      "node_id": "MDQ6VXNlcjEyMDM4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/huonw",
      "html_url": "https://github.com/huonw",
      "followers_url": "https://api.github.com/users/huonw/followers",
      "following_url": "https://api.github.com/users/huonw/following{/other_user}",
      "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/huonw/subscriptions",
      "organizations_url": "https://api.github.com/users/huonw/orgs",
      "repos_url": "https://api.github.com/users/huonw/repos",
      "events_url": "https://api.github.com/users/huonw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/huonw/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-03T02:20:30Z",
    "updated_at": "2013-11-03T02:20:30Z",
    "body": "Triage: the following update seems to work (at least, it compiles for me, but I don't have opencl so it fails in linking).\n\n``` rust\n#[link(name = \"min\", vers = \"0.1\", uuid = \"430a7e67-8e6a-4041-be05-643fabff74cf\")];\n#[feature(macro_rules)];\n#[crate_type = \"lib\"];\n\nuse std::{libc, result, ptr, vec, str};\n#[nolink]\n#[link_args = \"-framework OpenCL\"]\n#[cfg(target_os = \"macos\")]\nextern { }\n\n#[nolink]\n#[link_args = \"-lOpenCL\"]\n#[cfg(target_os = \"linux\")]\nextern { }\n\n#[nolink]\nextern {\n    fn clGetPlatformInfo(platform: *libc::c_void, name: u32, value_size: libc::size_t, value: *mut libc::c_void, value_size_ret: *mut libc::size_t) -> i32;\n}\n\nmacro_rules! cl_call(($name:ident : $($arg:expr),+) => ({\n    let error = unsafe { $name($($arg),+) };\n\n    if (error != 0) {\n        return result::Err(error);\n    }\n}))\n\nmacro_rules! cl_call_unknown_length(\n    ($name:ident, $n:ty, $in_:ty, $out:ty <- $($arg:expr),*) => ({\n            let mut n:$n = 0;\n\n            cl_call!($name: $($arg),*, 0, ptr::mut_null(), ptr::to_mut_unsafe_ptr(&mut n));\n\n            let mut result:~[$out] = vec::with_capacity(n as uint);\n\n            cl_call!($name: $($arg),*, n, vec::raw::to_mut_ptr(result) as *mut $in_, ptr::mut_null());\n\n            unsafe { vec::raw::set_len(&mut result, n as uint) };\n\n            result\n}))\n\n#[fixed_stack_segment]\npub fn get_info(id: *libc::c_void, name: u32) -> result::Result<~str, i32> {\n    return result::Ok(str::from_utf8_owned(\n            cl_call_unknown_length!(clGetPlatformInfo,\n                                    libc::size_t,\n                                    libc::c_void,\n                                    u8 <- id, name)));\n}\n```\n\n@jensnockert could you confirm? (And reopen if it's not behaving as you expect.)\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27637344/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27637949",
    "html_url": "https://github.com/rust-lang/rust/issues/6788#issuecomment-27637949",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/6788",
    "id": 27637949,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NjM3OTQ5",
    "user": {
      "login": "emberian",
      "id": 704250,
      "node_id": "MDQ6VXNlcjcwNDI1MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emberian",
      "html_url": "https://github.com/emberian",
      "followers_url": "https://api.github.com/users/emberian/followers",
      "following_url": "https://api.github.com/users/emberian/following{/other_user}",
      "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emberian/subscriptions",
      "organizations_url": "https://api.github.com/users/emberian/orgs",
      "repos_url": "https://api.github.com/users/emberian/repos",
      "events_url": "https://api.github.com/users/emberian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emberian/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-11-03T03:15:34Z",
    "updated_at": "2013-11-03T03:15:34Z",
    "body": "@huonw would it be possible to add a testcase for this?\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/27637949/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
