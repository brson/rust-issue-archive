[
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1375304",
    "html_url": "https://github.com/rust-lang/rust/issues/493#issuecomment-1375304",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/493",
    "id": 1375304,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNzUzMDQ=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-06-15T17:22:20Z",
    "updated_at": "2011-06-15T17:22:20Z",
    "body": "Ditto for native modules\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1375304/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1410566",
    "html_url": "https://github.com/rust-lang/rust/issues/493#issuecomment-1410566",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/493",
    "id": 1410566,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE0MTA1NjY=",
    "user": {
      "login": "espindola",
      "id": 42633,
      "node_id": "MDQ6VXNlcjQyNjMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/42633?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/espindola",
      "html_url": "https://github.com/espindola",
      "followers_url": "https://api.github.com/users/espindola/followers",
      "following_url": "https://api.github.com/users/espindola/following{/other_user}",
      "gists_url": "https://api.github.com/users/espindola/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/espindola/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/espindola/subscriptions",
      "organizations_url": "https://api.github.com/users/espindola/orgs",
      "repos_url": "https://api.github.com/users/espindola/repos",
      "events_url": "https://api.github.com/users/espindola/events{/privacy}",
      "received_events_url": "https://api.github.com/users/espindola/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2011-06-21T14:16:16Z",
    "updated_at": "2011-06-21T14:16:16Z",
    "body": "Why?\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/1410566/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3975615",
    "html_url": "https://github.com/rust-lang/rust/issues/493#issuecomment-3975615",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/493",
    "id": 3975615,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzU2MTU=",
    "user": {
      "login": "graydon",
      "id": 14097,
      "node_id": "MDQ6VXNlcjE0MDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/graydon",
      "html_url": "https://github.com/graydon",
      "followers_url": "https://api.github.com/users/graydon/followers",
      "following_url": "https://api.github.com/users/graydon/following{/other_user}",
      "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/graydon/subscriptions",
      "organizations_url": "https://api.github.com/users/graydon/orgs",
      "repos_url": "https://api.github.com/users/graydon/repos",
      "events_url": "https://api.github.com/users/graydon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/graydon/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-02-15T06:22:09Z",
    "updated_at": "2012-02-15T06:22:09Z",
    "body": "Harmless either way. I don't see a lot of functions big enough to warrant their own modules, and we don't support reaching into a function scope from outside, so I wager this is not likely to matter often. Lowering to frontend enhancement req.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/3975615/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7387079",
    "html_url": "https://github.com/rust-lang/rust/issues/493#issuecomment-7387079",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/493",
    "id": 7387079,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczODcwNzk=",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2012-07-31T01:01:43Z",
    "updated_at": "2012-07-31T01:01:43Z",
    "body": "Mods in functions have magically started working.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/7387079/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/13515733",
    "html_url": "https://github.com/rust-lang/rust/issues/493#issuecomment-13515733",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/493",
    "id": 13515733,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNTE1NzMz",
    "user": {
      "login": "brson",
      "id": 147214,
      "node_id": "MDQ6VXNlcjE0NzIxNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brson",
      "html_url": "https://github.com/brson",
      "followers_url": "https://api.github.com/users/brson/followers",
      "following_url": "https://api.github.com/users/brson/following{/other_user}",
      "gists_url": "https://api.github.com/users/brson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brson/subscriptions",
      "organizations_url": "https://api.github.com/users/brson/orgs",
      "repos_url": "https://api.github.com/users/brson/repos",
      "events_url": "https://api.github.com/users/brson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brson/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-02-13T20:17:18Z",
    "updated_at": "2013-02-13T20:17:18Z",
    "body": "Discussions with @jbclements indicate this feature is bad for hygienic macros\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/13515733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/13515978",
    "html_url": "https://github.com/rust-lang/rust/issues/493#issuecomment-13515978",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/493",
    "id": 13515978,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNTE1OTc4",
    "user": {
      "login": "jbclements",
      "id": 226617,
      "node_id": "MDQ6VXNlcjIyNjYxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/226617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbclements",
      "html_url": "https://github.com/jbclements",
      "followers_url": "https://api.github.com/users/jbclements/followers",
      "following_url": "https://api.github.com/users/jbclements/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbclements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbclements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbclements/subscriptions",
      "organizations_url": "https://api.github.com/users/jbclements/orgs",
      "repos_url": "https://api.github.com/users/jbclements/repos",
      "events_url": "https://api.github.com/users/jbclements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbclements/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-02-13T20:22:31Z",
    "updated_at": "2013-02-13T20:22:31Z",
    "body": "@brson, @pcwalton, @graydon, @dherman: I'm currently struggling to keep resolution separate from macro expansion and parsing. One key element in this fight is not allowing modules inside functions.\n\nIn more detail: the macro expander needs to know when two varrefs (I'm not going to use the term \"identifier\" any more, because that means something different) may refer to the same binding. With module paths, it may be that a::b and b are two ways of referring to the same binding.  In a world without modules inside functions, I conjecture that it may be possible to punt on this issue by observing that if a::b and b refer to the same binding, they're \"external\" varrefs and thus not within the purview of hygiene.\n\nIf this sounds a bit sketchy to you, it does to me, too. The alternative, though, is to fold resolution into expansion, an idea that appears to give people pause.\n\nSo, for the moment, I'm going to proceed with the assumption that modules can't occur inside functions....\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/13515978/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/13678400",
    "html_url": "https://github.com/rust-lang/rust/issues/493#issuecomment-13678400",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/493",
    "id": 13678400,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzNjc4NDAw",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-02-17T00:52:02Z",
    "updated_at": "2013-02-17T00:52:02Z",
    "body": "@jbclements I don't really understand the problem, but I also don't understand why `a::b` and `b` implies \"external varrefs not within the purview of hygiene\".  Thinking naively about it, I am not sure that \"varrefs\" (by which I guess you mean something like paths?) is the right level to apply hygiene.  I feel like the root identifier in a path (that is, the `a` in `a::b`) is the one that must be \"hygienic\", and the others are all relative to that root?   (By hygienic, I mean either defined within the macro or brought in from the outside) But maybe I am just confused about what's going on.  That said, I think it's reasonable to say that modules must not appear within functions if that really solves a problem.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/13678400/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17557224",
    "html_url": "https://github.com/rust-lang/rust/issues/493#issuecomment-17557224",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/493",
    "id": 17557224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NTU3MjI0",
    "user": {
      "login": "nikomatsakis",
      "id": 155238,
      "node_id": "MDQ6VXNlcjE1NTIzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nikomatsakis",
      "html_url": "https://github.com/nikomatsakis",
      "followers_url": "https://api.github.com/users/nikomatsakis/followers",
      "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}",
      "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions",
      "organizations_url": "https://api.github.com/users/nikomatsakis/orgs",
      "repos_url": "https://api.github.com/users/nikomatsakis/repos",
      "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nikomatsakis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-07T17:32:15Z",
    "updated_at": "2013-05-07T17:32:15Z",
    "body": "I note that given our current path-resolution rules, there is no way\nto _name_ a mod inside of a fn, since paths will always be relative\nto the current module. Therefore I propose that they should not be\npermitted.\n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17557224/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17558077",
    "html_url": "https://github.com/rust-lang/rust/issues/493#issuecomment-17558077",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/493",
    "id": 17558077,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3NTU4MDc3",
    "user": {
      "login": "jbclements",
      "id": 226617,
      "node_id": "MDQ6VXNlcjIyNjYxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/226617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jbclements",
      "html_url": "https://github.com/jbclements",
      "followers_url": "https://api.github.com/users/jbclements/followers",
      "following_url": "https://api.github.com/users/jbclements/following{/other_user}",
      "gists_url": "https://api.github.com/users/jbclements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jbclements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jbclements/subscriptions",
      "organizations_url": "https://api.github.com/users/jbclements/orgs",
      "repos_url": "https://api.github.com/users/jbclements/repos",
      "events_url": "https://api.github.com/users/jbclements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jbclements/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2013-05-07T17:47:06Z",
    "updated_at": "2013-05-07T17:47:06Z",
    "body": "Several things to add here.  First, a few months ago, Felix came up with a way to refer to a module defined inside a function:\n\n```\n   pub fn baz() {\n       mod z {\n           pub fn f () -> int { 19 }\n       }\n       fn g() -> int { use z; z::f() }\n       g();\n   }\n```\n\n... which worked at the time, but no longer does! It now fails to resolve the 'z' in the 'use'. I conjecture that this is due to changes in the resolver due to @pcwalton. \n\nSo, I believe that modules within functions are now pretty much completely useless.\n\nOn the other hand, I no longer believe that hygiene requires eliminating them. I'm not going to go into it unless people want me to.\n\nTL; DR. I'm closing this bug (again). It might make sense to get rid of modules inside fns, but it's not a high priority for me. \n",
    "author_association": "CONTRIBUTOR",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/17558077/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/227127295",
    "html_url": "https://github.com/rust-lang/rust/issues/493#issuecomment-227127295",
    "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/493",
    "id": 227127295,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNzEyNzI5NQ==",
    "user": {
      "login": "hosza",
      "id": 838346,
      "node_id": "MDQ6VXNlcjgzODM0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/838346?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hosza",
      "html_url": "https://github.com/hosza",
      "followers_url": "https://api.github.com/users/hosza/followers",
      "following_url": "https://api.github.com/users/hosza/following{/other_user}",
      "gists_url": "https://api.github.com/users/hosza/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hosza/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hosza/subscriptions",
      "organizations_url": "https://api.github.com/users/hosza/orgs",
      "repos_url": "https://api.github.com/users/hosza/repos",
      "events_url": "https://api.github.com/users/hosza/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hosza/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2016-06-20T12:23:17Z",
    "updated_at": "2016-06-20T12:23:17Z",
    "body": "Note that as of writing this comment, the example does work again after dropping the `use z` declaration. (And of course fixing `int` to `i32`.) Thus functions defined inside modules defined inside functions can still be useful (or at least callable) but simply they can not be `use` declared.\n\n```\npub fn baz() {\n   mod z {\n       pub fn f () -> i32 { 19 }\n   }\n   fn g() -> i32 { z::f() }\n   g();\n}\n```\n",
    "author_association": "NONE",
    "reactions": {
      "url": "https://api.github.com/repos/rust-lang/rust/issues/comments/227127295/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
